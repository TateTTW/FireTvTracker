"use strict";var Rte=Object.defineProperty,Nte=Object.defineProperties,Fte=Object.getOwnPropertyDescriptors,lq=Object.getOwnPropertySymbols,Bte=Object.prototype.hasOwnProperty,Vte=Object.prototype.propertyIsEnumerable,cq=(Kt,Xe,G)=>Xe in Kt?Rte(Kt,Xe,{enumerable:!0,configurable:!0,writable:!0,value:G}):Kt[Xe]=G,FO=(Kt,Xe)=>{for(var G in Xe||(Xe={}))Bte.call(Xe,G)&&cq(Kt,G,Xe[G]);if(lq)for(var G of lq(Xe))Vte.call(Xe,G)&&cq(Kt,G,Xe[G]);return Kt},BO=(Kt,Xe)=>Nte(Kt,Fte(Xe));(self.webpackChunkTvTracker=self.webpackChunkTvTracker||[]).push([[179],{2011:(Kt,Xe,G)=>{G.d(Xe,{Dh:()=>Be,GT:()=>ze,cc:()=>rt,hO:()=>Pt,on:()=>he,pX:()=>Pe,xv:()=>Ue});var d=G(5e3),ee=G(9260),z=G(4976);Kt=G.hmd(Kt);const Ie=["ngOnDestroy"],Pe=(Ye,Et,Dt,wt={})=>new Proxy(Ye,{get:(Gt,ht)=>Dt.runOutsideAngular(()=>{var zt;if(Ye[ht])return(null===(zt=null==wt?void 0:wt.spy)||void 0===zt?void 0:zt.get)&&wt.spy.get(ht,Ye[ht]),Ye[ht];if(Ie.indexOf(ht)>-1)return()=>{};const Rt=Et.toPromise().then(bi=>{const be=bi&&bi[ht];return"function"==typeof be?be.bind(bi):be&&be.then?be.then(We=>Dt.run(()=>We)):Dt.run(()=>be)});return new Proxy(()=>{},{get:(bi,be)=>Rt[be],apply:(bi,be,We)=>Rt.then(qe=>{var Qe;const xt=qe&&qe(...We);return(null===(Qe=null==wt?void 0:wt.spy)||void 0===Qe?void 0:Qe.apply)&&wt.spy.apply(ht,We,xt),xt})})})}),ze=(Ye,Et)=>{Et.forEach(Dt=>{Object.getOwnPropertyNames(Dt.prototype||Dt).forEach(wt=>{Object.defineProperty(Ye.prototype,wt,Object.getOwnPropertyDescriptor(Dt.prototype||Dt,wt))})})};class Le{constructor(Et){return Et}}const Be=new d.OlP("angularfire2.app.options"),Ue=new d.OlP("angularfire2.app.name");function he(Ye,Et,Dt){const Gt="object"==typeof Dt&&Dt||{};Gt.name=Gt.name||"string"==typeof Dt&&Dt||"[DEFAULT]";const zt=ee.Z.apps.filter(Rt=>Rt&&Rt.name===Gt.name)[0]||Et.runOutsideAngular(()=>ee.Z.initializeApp(Ye,Gt));try{JSON.stringify(Ye)!==JSON.stringify(zt.options)&&ue("error",`${zt.name} Firebase App already initialized with different options${Kt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Rt){}return new Le(zt)}const ue=(Ye,...Et)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[Ye](...Et)},xe={provide:Le,useFactory:he,deps:[Be,d.R0b,[new d.FiY,Ue]]};let Pt=(()=>{class Ye{constructor(Dt){ee.Z.registerVersion("angularfire",z.q4.full,"core"),ee.Z.registerVersion("angularfire",z.q4.full,"app-compat"),ee.Z.registerVersion("angular",d.q4F.full,Dt.toString())}static initializeApp(Dt,wt){return{ngModule:Ye,providers:[{provide:Be,useValue:Dt},{provide:Ue,useValue:wt}]}}}return Ye.\u0275fac=function(Dt){return new(Dt||Ye)(d.LFG(d.Lbi))},Ye.\u0275mod=d.oAB({type:Ye}),Ye.\u0275inj=d.cJS({providers:[xe]}),Ye})();function rt(Ye,Et,Dt,wt,Gt){const[,ht,zt]=globalThis.\u0275AngularfireInstanceCache.find(Rt=>Rt[0]===Ye)||[];if(ht)return function vt(Ye,Et){try{return Ye.toString()===Et.toString()}catch(Dt){return Ye===Et}}(Gt,zt)||(Fe("error",`${Et} was already initialized on the ${Dt} Firebase App with different settings.${At?" You may need to reload as Firebase is not HMR aware.":""}`),Fe("warn",{is:Gt,was:zt})),ht;{const Rt=wt();return globalThis.\u0275AngularfireInstanceCache.push([Ye,Rt,Gt]),Rt}}const At=!!Kt.hot,Fe=(Ye,...Et)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[Ye](...Et)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(Kt,Xe,G)=>{G.d(Xe,{q4:()=>hp,iC:()=>yh,HU:()=>jc,vb:()=>ig,JM:()=>vv,u3:()=>If});var d=G(5e3),ee=G(259),z=G(5861),Ie=G(6881),Pe=G(2090),ze=G(4859),Le=G(1877);let Ue,he;const Pt=new WeakMap,rt=new WeakMap,vt=new WeakMap,At=new WeakMap,Fe=new WeakMap;let Dt={get(x,M,N){if(x instanceof IDBTransaction){if("done"===M)return rt.get(x);if("objectStoreNames"===M)return x.objectStoreNames||vt.get(x);if("store"===M)return N.objectStoreNames[1]?void 0:N.objectStore(N.objectStoreNames[0])}return zt(x[M])},set:(x,M,N)=>(x[M]=N,!0),has:(x,M)=>x instanceof IDBTransaction&&("done"===M||"store"===M)||M in x};function ht(x){return"function"==typeof x?function Gt(x){return x!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function xe(){return he||(he=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(x)?function(...M){return x.apply(Rt(this),M),zt(Pt.get(this))}:function(...M){return zt(x.apply(Rt(this),M))}:function(M,...N){const K=x.call(Rt(this),M,...N);return vt.set(K,M.sort?M.sort():[M]),zt(K)}}(x):(x instanceof IDBTransaction&&function Et(x){if(rt.has(x))return;const M=new Promise((N,K)=>{const ce=()=>{x.removeEventListener("complete",fe),x.removeEventListener("error",Oe),x.removeEventListener("abort",Oe)},fe=()=>{N(),ce()},Oe=()=>{K(x.error||new DOMException("AbortError","AbortError")),ce()};x.addEventListener("complete",fe),x.addEventListener("error",Oe),x.addEventListener("abort",Oe)});rt.set(x,M)}(x),((x,M)=>M.some(N=>x instanceof N))(x,function ue(){return Ue||(Ue=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(x,Dt):x)}function zt(x){if(x instanceof IDBRequest)return function Ye(x){const M=new Promise((N,K)=>{const ce=()=>{x.removeEventListener("success",fe),x.removeEventListener("error",Oe)},fe=()=>{N(zt(x.result)),ce()},Oe=()=>{K(x.error),ce()};x.addEventListener("success",fe),x.addEventListener("error",Oe)});return M.then(N=>{N instanceof IDBCursor&&Pt.set(N,x)}).catch(()=>{}),Fe.set(M,x),M}(x);if(At.has(x))return At.get(x);const M=ht(x);return M!==x&&(At.set(x,M),Fe.set(M,x)),M}const Rt=x=>Fe.get(x),We=["get","getKey","getAll","getAllKeys","count"],qe=["put","add","delete","clear"],Qe=new Map;function xt(x,M){if(!(x instanceof IDBDatabase)||M in x||"string"!=typeof M)return;if(Qe.get(M))return Qe.get(M);const N=M.replace(/FromIndex$/,""),K=M!==N,ce=qe.includes(N);if(!(N in(K?IDBIndex:IDBObjectStore).prototype)||!ce&&!We.includes(N))return;const fe=function(){var Oe=(0,z.Z)(function*(Tt,...St){const Zt=this.transaction(Tt,ce?"readwrite":"readonly");let Mi=Zt.store;return K&&(Mi=Mi.index(St.shift())),(yield Promise.all([Mi[N](...St),ce&&Zt.done]))[0]});return function(St){return Oe.apply(this,arguments)}}();return Qe.set(M,fe),fe}!function wt(x){Dt=x(Dt)}(x=>BO(FO({},x),{get:(M,N,K)=>xt(M,N)||x.get(M,N,K),has:(M,N)=>!!xt(M,N)||x.has(M,N)}));const Ve="@firebase/installations",Yr="w:0.6.4",ui="FIS_v2",Tn=new Pe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ta(x){return x instanceof Pe.ZR&&x.code.includes("request-failed")}function An({projectId:x}){return`https://firebaseinstallations.googleapis.com/v1/projects/${x}/installations`}function Sl(x){return{token:x.token,requestStatus:2,expiresIn:_l(x.expiresIn),creationTime:Date.now()}}function Ya(x,M){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,z.Z)(function*(x,M){const K=(yield M.json()).error;return Tn.create("request-failed",{requestName:x,serverCode:K.code,serverMessage:K.message,serverStatus:K.status})})).apply(this,arguments)}function sh({apiKey:x}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x})}function Ka(x,{refreshToken:M}){const N=sh(x);return N.append("Authorization",function Vi(x){return`${ui} ${x}`}(M)),N}function ia(x){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,z.Z)(function*(x){const M=yield x();return M.status>=500&&M.status<600?x():M})).apply(this,arguments)}function _l(x){return Number(x.replace("s","000"))}function Ea(x,M){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,z.Z)(function*({appConfig:x,heartbeatServiceProvider:M},{fid:N}){const K=An(x),ce=sh(x),fe=M.getImmediate({optional:!0});if(fe){const Zt=yield fe.getHeartbeatsHeader();Zt&&ce.append("x-firebase-client",Zt)}const Tt={method:"POST",headers:ce,body:JSON.stringify({fid:N,authVersion:ui,appId:x.appId,sdkVersion:Yr})},St=yield ia(()=>fetch(K,Tt));if(St.ok){const Zt=yield St.json();return{fid:Zt.fid||N,registrationStatus:2,refreshToken:Zt.refreshToken,authToken:Sl(Zt.authToken)}}throw yield Ya("Create Installation",St)})).apply(this,arguments)}function Zi(x){return new Promise(M=>{setTimeout(M,x)})}const Sa=/^[cdef][\w-]{21}$/;function dt(){try{const x=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(x),x[0]=112+x[0]%16;const N=function Qs(x){return function wa(x){return btoa(String.fromCharCode(...x)).replace(/\+/g,"-").replace(/\//g,"_")}(x).substr(0,22)}(x);return Sa.test(N)?N:""}catch(x){return""}}function Cn(x){return`${x.appName}!${x.appId}`}const Yi=new Map;function di(x,M){const N=Cn(x);Gl(N,M),function es(x,M){const N=function rn(){return!so&&"BroadcastChannel"in self&&(so=new BroadcastChannel("[Firebase] FID Change"),so.onmessage=x=>{Gl(x.data.key,x.data.fid)}),so}();N&&N.postMessage({key:x,fid:M}),function fn(){0===Yi.size&&so&&(so.close(),so=null)}()}(N,M)}function Gl(x,M){const N=Yi.get(x);if(N)for(const K of N)K(M)}let so=null;const ni="firebase-installations-store";let Kn=null;function Rr(){return Kn||(Kn=function bi(x,M,{blocked:N,upgrade:K,blocking:ce,terminated:fe}={}){const Oe=indexedDB.open(x,M),Tt=zt(Oe);return K&&Oe.addEventListener("upgradeneeded",St=>{K(zt(Oe.result),St.oldVersion,St.newVersion,zt(Oe.transaction))}),N&&Oe.addEventListener("blocked",()=>N()),Tt.then(St=>{fe&&St.addEventListener("close",()=>fe()),ce&&St.addEventListener("versionchange",()=>ce())}).catch(()=>{}),Tt}("firebase-installations-database",1,{upgrade:(x,M)=>{0===M&&x.createObjectStore(ni)}})),Kn}function Dn(x,M){return $s.apply(this,arguments)}function $s(){return($s=(0,z.Z)(function*(x,M){const N=Cn(x),ce=(yield Rr()).transaction(ni,"readwrite"),fe=ce.objectStore(ni),Oe=yield fe.get(N);return yield fe.put(M,N),yield ce.done,(!Oe||Oe.fid!==M.fid)&&di(x,M.fid),M})).apply(this,arguments)}function Xa(x){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,z.Z)(function*(x){const M=Cn(x),K=(yield Rr()).transaction(ni,"readwrite");yield K.objectStore(ni).delete(M),yield K.done})).apply(this,arguments)}function sa(x,M){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,z.Z)(function*(x,M){const N=Cn(x),ce=(yield Rr()).transaction(ni,"readwrite"),fe=ce.objectStore(ni),Oe=yield fe.get(N),Tt=M(Oe);return void 0===Tt?yield fe.delete(N):yield fe.put(Tt,N),yield ce.done,Tt&&(!Oe||Oe.fid!==Tt.fid)&&di(x,Tt.fid),Tt})).apply(this,arguments)}function ne(x){return te.apply(this,arguments)}function te(){return(te=(0,z.Z)(function*(x){let M;const N=yield sa(x.appConfig,K=>{const ce=W(K),fe=q(x,ce);return M=fe.registrationPromise,fe.installationEntry});return""===N.fid?{installationEntry:yield M}:{installationEntry:N,registrationPromise:M}})).apply(this,arguments)}function W(x){return Ei(x||{fid:dt(),registrationStatus:0})}function q(x,M){if(0===M.registrationStatus){if(!navigator.onLine)return{installationEntry:M,registrationPromise:Promise.reject(Tn.create("app-offline"))};const N={fid:M.fid,registrationStatus:1,registrationTime:Date.now()},K=function U(x,M){return ge.apply(this,arguments)}(x,N);return{installationEntry:N,registrationPromise:K}}return 1===M.registrationStatus?{installationEntry:M,registrationPromise:Ze(x)}:{installationEntry:M}}function ge(){return(ge=(0,z.Z)(function*(x,M){try{const N=yield Ea(x,M);return Dn(x.appConfig,N)}catch(N){throw ta(N)&&409===N.customData.serverCode?yield Xa(x.appConfig):yield Dn(x.appConfig,{fid:M.fid,registrationStatus:0}),N}})).apply(this,arguments)}function Ze(x){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,z.Z)(function*(x){let M=yield Ci(x.appConfig);for(;1===M.registrationStatus;)yield Zi(100),M=yield Ci(x.appConfig);if(0===M.registrationStatus){const{installationEntry:N,registrationPromise:K}=yield ne(x);return K||N}return M})).apply(this,arguments)}function Ci(x){return sa(x,M=>{if(!M)throw Tn.create("installation-not-found");return Ei(M)})}function Ei(x){return function $i(x){return 1===x.registrationStatus&&x.registrationTime+1e4<Date.now()}(x)?{fid:x.fid,registrationStatus:0}:x}function yi(x,M){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,z.Z)(function*({appConfig:x,heartbeatServiceProvider:M},N){const K=Di(x,N),ce=Ka(x,N),fe=M.getImmediate({optional:!0});if(fe){const Zt=yield fe.getHeartbeatsHeader();Zt&&ce.append("x-firebase-client",Zt)}const Tt={method:"POST",headers:ce,body:JSON.stringify({installation:{sdkVersion:Yr,appId:x.appId}})},St=yield ia(()=>fetch(K,Tt));if(St.ok)return Sl(yield St.json());throw yield Ya("Generate Auth Token",St)})).apply(this,arguments)}function Di(x,{fid:M}){return`${An(x)}/${M}/authTokens:generate`}function En(x){return So.apply(this,arguments)}function So(){return(So=(0,z.Z)(function*(x,M=!1){let N;const K=yield sa(x.appConfig,fe=>{if(!Qt(fe))throw Tn.create("not-registered");const Oe=fe.authToken;if(!M&&ns(Oe))return fe;if(1===Oe.requestStatus)return N=De(x,M),fe;{if(!navigator.onLine)throw Tn.create("app-offline");const Tt=ms(fe);return N=He(x,Tt),Tt}});return N?yield N:K.authToken})).apply(this,arguments)}function De(x,M){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,z.Z)(function*(x,M){let N=yield tt(x.appConfig);for(;1===N.authToken.requestStatus;)yield Zi(100),N=yield tt(x.appConfig);const K=N.authToken;return 0===K.requestStatus?En(x,M):K})).apply(this,arguments)}function tt(x){return sa(x,M=>{if(!Qt(M))throw Tn.create("not-registered");return function Nr(x){return 1===x.requestStatus&&x.requestTime+1e4<Date.now()}(M.authToken)?Object.assign(Object.assign({},M),{authToken:{requestStatus:0}}):M})}function He(x,M){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,z.Z)(function*(x,M){try{const N=yield yi(x,M),K=Object.assign(Object.assign({},M),{authToken:N});return yield Dn(x.appConfig,K),N}catch(N){if(!ta(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const K=Object.assign(Object.assign({},M),{authToken:{requestStatus:0}});yield Dn(x.appConfig,K)}else yield Xa(x.appConfig);throw N}})).apply(this,arguments)}function Qt(x){return void 0!==x&&2===x.registrationStatus}function ns(x){return 2===x.requestStatus&&!function Hn(x){const M=Date.now();return M<x.creationTime||x.creationTime+x.expiresIn<M+36e5}(x)}function ms(x){const M={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},x),{authToken:M})}function _o(){return(_o=(0,z.Z)(function*(x){const M=x,{installationEntry:N,registrationPromise:K}=yield ne(M);return K?K.catch(console.error):En(M).catch(console.error),N.fid})).apply(this,arguments)}function Xi(){return(Xi=(0,z.Z)(function*(x,M=!1){const N=x;return yield jo(N),(yield En(N,M)).token})).apply(this,arguments)}function jo(x){return nh.apply(this,arguments)}function nh(){return(nh=(0,z.Z)(function*(x){const{registrationPromise:M}=yield ne(x);M&&(yield M)})).apply(this,arguments)}function rh(x){return Tn.create("missing-app-config-values",{valueName:x})}const Uo="installations",oh=x=>{const M=x.getProvider("app").getImmediate(),N=function Xp(x){if(!x||!x.options)throw rh("App Configuration");if(!x.name)throw rh("App Name");const M=["projectId","apiKey","appId"];for(const N of M)if(!x.options[N])throw rh(N);return{appName:x.name,projectId:x.options.projectId,apiKey:x.options.apiKey,appId:x.options.appId}}(M);return{app:M,appConfig:N,heartbeatServiceProvider:(0,Ie._getProvider)(M,"heartbeat"),_delete:()=>Promise.resolve()}},Qp=x=>{const M=x.getProvider("app").getImmediate(),N=(0,Ie._getProvider)(M,Uo).getImmediate();return{getId:()=>function Os(x){return _o.apply(this,arguments)}(N),getToken:ce=>function _a(x){return Xi.apply(this,arguments)}(N,ce)}};(function Fu(){(0,Ie._registerComponent)(new ze.wA(Uo,oh,"PUBLIC")),(0,Ie._registerComponent)(new ze.wA("installations-internal",Qp,"PRIVATE"))})(),(0,Ie.registerVersion)(Ve,"0.6.4"),(0,Ie.registerVersion)(Ve,"0.6.4","esm2017");const na="@firebase/remote-config",Io=new Pe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class sv{constructor(M,N,K,ce){this.client=M,this.storage=N,this.storageCache=K,this.logger=ce}isCachedDataFresh(M,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const K=Date.now()-N,ce=K<=M;return this.logger.debug(`Config fetch cache check. Cache age millis: ${K}. Cache max age millis (minimumFetchIntervalMillis setting): ${M}. Is cache hit: ${ce}.`),ce}fetch(M){var N=this;return(0,z.Z)(function*(){const[K,ce]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(ce&&N.isCachedDataFresh(M.cacheMaxAgeMillis,K))return ce;M.eTag=ce&&ce.eTag;const fe=yield N.client.fetch(M),Oe=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===fe.status&&Oe.push(N.storage.setLastSuccessfulFetchResponse(fe)),yield Promise.all(Oe),fe})()}}function Wh(x=navigator){return x.languages&&x.languages[0]||x.language}class Bu{constructor(M,N,K,ce,fe,Oe){this.firebaseInstallations=M,this.sdkVersion=N,this.namespace=K,this.projectId=ce,this.apiKey=fe,this.appId=Oe}fetch(M){var N=this;return(0,z.Z)(function*(){const[K,ce]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),Oe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,Tt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":M.eTag||"*"},St={sdk_version:N.sdkVersion,app_instance_id:K,app_instance_id_token:ce,app_id:N.appId,language_code:Wh()},Zt={method:"POST",headers:Tt,body:JSON.stringify(St)},Mi=fetch(Oe,Zt),Hi=new Promise((ha,bh)=>{M.signal.addEventListener(()=>{const xf=new Error("The operation was aborted.");xf.name="AbortError",bh(xf)})});let Oa;try{yield Promise.race([Mi,Hi]),Oa=yield Mi}catch(ha){let bh="fetch-client-network";throw"AbortError"===(null==ha?void 0:ha.name)&&(bh="fetch-timeout"),Io.create(bh,{originalErrorMessage:null==ha?void 0:ha.message})}let co=Oa.status;const pp=Oa.headers.get("ETag")||void 0;let Ml,vh;if(200===Oa.status){let ha;try{ha=yield Oa.json()}catch(bh){throw Io.create("fetch-client-parse",{originalErrorMessage:null==bh?void 0:bh.message})}Ml=ha.entries,vh=ha.state}if("INSTANCE_STATE_UNSPECIFIED"===vh?co=500:"NO_CHANGE"===vh?co=304:("NO_TEMPLATE"===vh||"EMPTY_CONFIG"===vh)&&(Ml={}),304!==co&&200!==co)throw Io.create("fetch-status",{httpStatus:co});return{status:co,eTag:pp,config:Ml}})()}}class ti{constructor(M,N){this.client=M,this.storage=N}fetch(M){var N=this;return(0,z.Z)(function*(){const K=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(M,K)})()}attemptFetch(M,{throttleEndTimeMillis:N,backoffCount:K}){var ce=this;return(0,z.Z)(function*(){yield function nv(x,M){return new Promise((N,K)=>{const ce=Math.max(M-Date.now(),0),fe=setTimeout(N,ce);x.addEventListener(()=>{clearTimeout(fe),K(Io.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}(M.signal,N);try{const fe=yield ce.client.fetch(M);return yield ce.storage.deleteThrottleMetadata(),fe}catch(fe){if(!function rv(x){if(!(x instanceof Pe.ZR&&x.customData))return!1;const M=Number(x.customData.httpStatus);return 429===M||500===M||503===M||504===M}(fe))throw fe;const Oe={throttleEndTimeMillis:Date.now()+(0,Pe.$s)(K),backoffCount:K+1};return yield ce.storage.setThrottleMetadata(Oe),ce.attemptFetch(M,Oe)}})()}}class Vu{constructor(M,N,K,ce,fe){this.app=M,this._client=N,this._storageCache=K,this._storage=ce,this._logger=fe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Hu(x,M){const N=x.target.error||void 0;return Io.create(M,{originalErrorMessage:N&&(null==N?void 0:N.message)})}const br="app_namespace_store";class Om{constructor(M,N,K,ce=function Gd(){return new Promise((x,M)=>{try{const N=indexedDB.open("firebase_remote_config",1);N.onerror=K=>{M(Hu(K,"storage-open"))},N.onsuccess=K=>{x(K.target.result)},N.onupgradeneeded=K=>{0===K.oldVersion&&K.target.result.createObjectStore(br,{keyPath:"compositeKey"})}}catch(N){M(Io.create("storage-open",{originalErrorMessage:null==N?void 0:N.message}))}})}()){this.appId=M,this.appName=N,this.namespace=K,this.openDbPromise=ce}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(M){return this.set("last_fetch_status",M)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(M){return this.set("last_successful_fetch_timestamp_millis",M)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(M){return this.set("last_successful_fetch_response",M)}getActiveConfig(){return this.get("active_config")}setActiveConfig(M){return this.set("active_config",M)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(M){return this.set("active_config_etag",M)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(M){return this.set("throttle_metadata",M)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(M){var N=this;return(0,z.Z)(function*(){const K=yield N.openDbPromise;return new Promise((ce,fe)=>{const Tt=K.transaction([br],"readonly").objectStore(br),St=N.createCompositeKey(M);try{const Zt=Tt.get(St);Zt.onerror=Mi=>{fe(Hu(Mi,"storage-get"))},Zt.onsuccess=Mi=>{const Hi=Mi.target.result;ce(Hi?Hi.value:void 0)}}catch(Zt){fe(Io.create("storage-get",{originalErrorMessage:null==Zt?void 0:Zt.message}))}})})()}set(M,N){var K=this;return(0,z.Z)(function*(){const ce=yield K.openDbPromise;return new Promise((fe,Oe)=>{const St=ce.transaction([br],"readwrite").objectStore(br),Zt=K.createCompositeKey(M);try{const Mi=St.put({compositeKey:Zt,value:N});Mi.onerror=Hi=>{Oe(Hu(Hi,"storage-set"))},Mi.onsuccess=()=>{fe()}}catch(Mi){Oe(Io.create("storage-set",{originalErrorMessage:null==Mi?void 0:Mi.message}))}})})()}delete(M){var N=this;return(0,z.Z)(function*(){const K=yield N.openDbPromise;return new Promise((ce,fe)=>{const Tt=K.transaction([br],"readwrite").objectStore(br),St=N.createCompositeKey(M);try{const Zt=Tt.delete(St);Zt.onerror=Mi=>{fe(Hu(Mi,"storage-delete"))},Zt.onsuccess=()=>{ce()}}catch(Zt){fe(Io.create("storage-delete",{originalErrorMessage:null==Zt?void 0:Zt.message}))}})})()}createCompositeKey(M){return[this.appId,this.appName,this.namespace,M].join()}}class qh{constructor(M){this.storage=M}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var M=this;return(0,z.Z)(function*(){const N=M.storage.getLastFetchStatus(),K=M.storage.getLastSuccessfulFetchTimestampMillis(),ce=M.storage.getActiveConfig(),fe=yield N;fe&&(M.lastFetchStatus=fe);const Oe=yield K;Oe&&(M.lastSuccessfulFetchTimestampMillis=Oe);const Tt=yield ce;Tt&&(M.activeConfig=Tt)})()}setLastFetchStatus(M){return this.lastFetchStatus=M,this.storage.setLastFetchStatus(M)}setLastSuccessfulFetchTimestampMillis(M){return this.lastSuccessfulFetchTimestampMillis=M,this.storage.setLastSuccessfulFetchTimestampMillis(M)}setActiveConfig(M){return this.activeConfig=M,this.storage.setActiveConfig(M)}}function Pm(){return mn.apply(this,arguments)}function mn(){return(mn=(0,z.Z)(function*(){if(!(0,Pe.hl)())return!1;try{return yield(0,Pe.eu)()}catch(x){return!1}})).apply(this,arguments)}let ju,Yl;!function Mm(){(0,Ie._registerComponent)(new ze.wA("remote-config",function x(M,{instanceIdentifier:N}){const K=M.getProvider("app").getImmediate(),ce=M.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Io.create("registration-window");if(!(0,Pe.hl)())throw Io.create("indexed-db-unavailable");const{projectId:fe,apiKey:Oe,appId:Tt}=K.options;if(!fe)throw Io.create("registration-project-id");if(!Oe)throw Io.create("registration-api-key");if(!Tt)throw Io.create("registration-app-id");const St=new Om(Tt,K.name,N=N||"firebase"),Zt=new qh(St),Mi=new Le.Yd(na);Mi.logLevel=Le.in.ERROR;const Hi=new Bu(ce,Ie.SDK_VERSION,N,fe,Oe,Tt),Oa=new ti(Hi,St),co=new sv(Oa,St,Zt,Mi),pp=new Vu(K,co,Zt,St,Mi);return function MC(x){const M=(0,Pe.m9)(x);M._initializePromise||(M._initializePromise=M._storageCache.loadFromStorage().then(()=>{M._isInitializationComplete=!0}))}(pp),pp},"PUBLIC").setMultipleInstances(!0)),(0,Ie.registerVersion)(na,"0.4.4"),(0,Ie.registerVersion)(na,"0.4.4","esm2017")}();const Gh=new WeakMap,Kl=new WeakMap,ro=new WeakMap,kc=new WeakMap,xo=new WeakMap;let oo={get(x,M,N){if(x instanceof IDBTransaction){if("done"===M)return Kl.get(x);if("objectStoreNames"===M)return x.objectStoreNames||ro.get(x);if("store"===M)return N.objectStoreNames[1]?void 0:N.objectStore(N.objectStoreNames[0])}return Ta(x[M])},set:(x,M,N)=>(x[M]=N,!0),has:(x,M)=>x instanceof IDBTransaction&&("done"===M||"store"===M)||M in x};function Zd(x){return"function"==typeof x?function Oi(x){return x!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Yd(){return Yl||(Yl=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(x)?function(...M){return x.apply(Uu(this),M),Ta(Gh.get(this))}:function(...M){return Ta(x.apply(Uu(this),M))}:function(M,...N){const K=x.call(Uu(this),M,...N);return ro.set(K,M.sort?M.sort():[M]),Ta(K)}}(x):(x instanceof IDBTransaction&&function Ja(x){if(Kl.has(x))return;const M=new Promise((N,K)=>{const ce=()=>{x.removeEventListener("complete",fe),x.removeEventListener("error",Oe),x.removeEventListener("abort",Oe)},fe=()=>{N(),ce()},Oe=()=>{K(x.error||new DOMException("AbortError","AbortError")),ce()};x.addEventListener("complete",fe),x.addEventListener("error",Oe),x.addEventListener("abort",Oe)});Kl.set(x,M)}(x),((x,M)=>M.some(N=>x instanceof N))(x,function zo(){return ju||(ju=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(x,oo):x)}function Ta(x){if(x instanceof IDBRequest)return function of(x){const M=new Promise((N,K)=>{const ce=()=>{x.removeEventListener("success",fe),x.removeEventListener("error",Oe)},fe=()=>{N(Ta(x.result)),ce()},Oe=()=>{K(x.error),ce()};x.addEventListener("success",fe),x.addEventListener("error",Oe)});return M.then(N=>{N instanceof IDBCursor&&Gh.set(N,x)}).catch(()=>{}),xo.set(M,x),M}(x);if(kc.has(x))return kc.get(x);const M=Zd(x);return M!==x&&(kc.set(x,M),xo.set(M,x)),M}const Uu=x=>xo.get(x);function Yh(x,M,{blocked:N,upgrade:K,blocking:ce,terminated:fe}={}){const Oe=indexedDB.open(x,M),Tt=Ta(Oe);return K&&Oe.addEventListener("upgradeneeded",St=>{K(Ta(Oe.result),St.oldVersion,St.newVersion,Ta(Oe.transaction))}),N&&Oe.addEventListener("blocked",()=>N()),Tt.then(St=>{fe&&St.addEventListener("close",()=>fe()),ce&&St.addEventListener("versionchange",()=>ce())}).catch(()=>{}),Tt}function zu(x,{blocked:M}={}){const N=indexedDB.deleteDatabase(x);return M&&N.addEventListener("blocked",()=>M()),Ta(N).then(()=>{})}const Lm=["get","getKey","getAll","getAllKeys","count"],af=["put","add","delete","clear"],it=new Map;function Es(x,M){if(!(x instanceof IDBDatabase)||M in x||"string"!=typeof M)return;if(it.get(M))return it.get(M);const N=M.replace(/FromIndex$/,""),K=M!==N,ce=af.includes(N);if(!(N in(K?IDBIndex:IDBObjectStore).prototype)||!ce&&!Lm.includes(N))return;const fe=function(){var Oe=(0,z.Z)(function*(Tt,...St){const Zt=this.transaction(Tt,ce?"readwrite":"readonly");let Mi=Zt.store;return K&&(Mi=Mi.index(St.shift())),(yield Promise.all([Mi[N](...St),ce&&Zt.done]))[0]});return function(St){return Oe.apply(this,arguments)}}();return it.set(M,fe),fe}!function Kd(x){oo=x(oo)}(x=>BO(FO({},x),{get:(M,N,K)=>Es(M,N)||x.get(M,N,K),has:(M,N)=>!!Es(M,N)||x.has(M,N)}));const Rm="/firebase-messaging-sw.js",an="/firebase-cloud-messaging-push-scope",lf="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Zn="google.c.a.c_id",Il="google.c.a.c_l",lh="google.c.a.ts",ov="google.c.a.e";var Zl=(()=>{return(x=Zl||(Zl={})).PUSH_RECEIVED="push-received",x.NOTIFICATION_CLICKED="notification-clicked",Zl;var x})();function Aa(x){const M=new Uint8Array(x);return btoa(String.fromCharCode(...M)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Xn(x){const N=(x+"=".repeat((4-x.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),K=atob(N),ce=new Uint8Array(K.length);for(let fe=0;fe<K.length;++fe)ce[fe]=K.charCodeAt(fe);return ce}const el="fcm_token_details_db",Oc="fcm_token_object_Store";function Da(x){return qu.apply(this,arguments)}function qu(){return qu=(0,z.Z)(function*(x){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(fe=>fe.name).includes(el))return null;let M=null;return(yield Yh(el,5,{upgrade:(K=(0,z.Z)(function*(ce,fe,Oe,Tt){var St;if(fe<2||!ce.objectStoreNames.contains(Oc))return;const Zt=Tt.objectStore(Oc),Mi=yield Zt.index("fcmSenderId").get(x);if(yield Zt.clear(),Mi)if(2===fe){const Hi=Mi;if(!Hi.auth||!Hi.p256dh||!Hi.endpoint)return;M={token:Hi.fcmToken,createTime:null!==(St=Hi.createTime)&&void 0!==St?St:Date.now(),subscriptionOptions:{auth:Hi.auth,p256dh:Hi.p256dh,endpoint:Hi.endpoint,swScope:Hi.swScope,vapidKey:"string"==typeof Hi.vapidKey?Hi.vapidKey:Aa(Hi.vapidKey)}}}else if(3===fe){const Hi=Mi;M={token:Hi.fcmToken,createTime:Hi.createTime,subscriptionOptions:{auth:Aa(Hi.auth),p256dh:Aa(Hi.p256dh),endpoint:Hi.endpoint,swScope:Hi.swScope,vapidKey:Aa(Hi.vapidKey)}}}else if(4===fe){const Hi=Mi;M={token:Hi.fcmToken,createTime:Hi.createTime,subscriptionOptions:{auth:Aa(Hi.auth),p256dh:Aa(Hi.p256dh),endpoint:Hi.endpoint,swScope:Hi.swScope,vapidKey:Aa(Hi.vapidKey)}}}}),function(fe,Oe,Tt,St){return K.apply(this,arguments)})})).close(),yield zu(el),yield zu("fcm_vapid_details_db"),yield zu("undefined"),ra(M)?M:null;var K}),qu.apply(this,arguments)}function ra(x){if(!x||!x.subscriptionOptions)return!1;const{subscriptionOptions:M}=x;return"number"==typeof x.createTime&&x.createTime>0&&"string"==typeof x.token&&x.token.length>0&&"string"==typeof M.auth&&M.auth.length>0&&"string"==typeof M.p256dh&&M.p256dh.length>0&&"string"==typeof M.endpoint&&M.endpoint.length>0&&"string"==typeof M.swScope&&M.swScope.length>0&&"string"==typeof M.vapidKey&&M.vapidKey.length>0}const tl="firebase-messaging-store";let Mc=null;function $u(){return Mc||(Mc=Yh("firebase-messaging-database",1,{upgrade:(x,M)=>{0===M&&x.createObjectStore(tl)}})),Mc}function Gu(x){return cf.apply(this,arguments)}function cf(){return(cf=(0,z.Z)(function*(x){const M=Xh(x),K=yield(yield $u()).transaction(tl).objectStore(tl).get(M);if(K)return K;{const ce=yield Da(x.appConfig.senderId);if(ce)return yield Yu(x,ce),ce}})).apply(this,arguments)}function Yu(x,M){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,z.Z)(function*(x,M){const N=Xh(x),ce=(yield $u()).transaction(tl,"readwrite");return yield ce.objectStore(tl).put(M,N),yield ce.done,M})).apply(this,arguments)}function hf(x){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,z.Z)(function*(x){const M=Xh(x),K=(yield $u()).transaction(tl,"readwrite");yield K.objectStore(tl).delete(M),yield K.done})).apply(this,arguments)}function Xh({appConfig:x}){return x.appId}const Un=new Pe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function lv(x,M){return Xd.apply(this,arguments)}function Xd(){return(Xd=(0,z.Z)(function*(x,M){const N=yield Jh(x),K=df(M),ce={method:"POST",headers:N,body:JSON.stringify(K)};let fe;try{fe=yield(yield fetch(Qh(x.appConfig),ce)).json()}catch(Oe){throw Un.create("token-subscribe-failed",{errorInfo:null==Oe?void 0:Oe.toString()})}if(fe.error)throw Un.create("token-subscribe-failed",{errorInfo:fe.error.message});if(!fe.token)throw Un.create("token-subscribe-no-token");return fe.token})).apply(this,arguments)}function Cr(x,M){return Er.apply(this,arguments)}function Er(){return(Er=(0,z.Z)(function*(x,M){const N=yield Jh(x),K=df(M.subscriptionOptions),ce={method:"PATCH",headers:N,body:JSON.stringify(K)};let fe;try{fe=yield(yield fetch(`${Qh(x.appConfig)}/${M.token}`,ce)).json()}catch(Oe){throw Un.create("token-update-failed",{errorInfo:null==Oe?void 0:Oe.toString()})}if(fe.error)throw Un.create("token-update-failed",{errorInfo:fe.error.message});if(!fe.token)throw Un.create("token-update-no-token");return fe.token})).apply(this,arguments)}function wn(x,M){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,z.Z)(function*(x,M){const K={method:"DELETE",headers:yield Jh(x)};try{const fe=yield(yield fetch(`${Qh(x.appConfig)}/${M}`,K)).json();if(fe.error)throw Un.create("token-unsubscribe-failed",{errorInfo:fe.error.message})}catch(ce){throw Un.create("token-unsubscribe-failed",{errorInfo:null==ce?void 0:ce.toString()})}})).apply(this,arguments)}function Qh({projectId:x}){return`https://fcmregistrations.googleapis.com/v1/projects/${x}/registrations`}function Jh(x){return Fm.apply(this,arguments)}function Fm(){return(Fm=(0,z.Z)(function*({appConfig:x,installations:M}){const N=yield M.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function df({p256dh:x,auth:M,endpoint:N,vapidKey:K}){const ce={web:{endpoint:N,auth:M,p256dh:x}};return K!==lf&&(ce.web.applicationPubKey=K),ce}const NC=6048e5;function eu(x){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,z.Z)(function*(x){const M=yield Vm(x.swRegistration,x.vapidKey),N={vapidKey:x.vapidKey,swScope:x.swRegistration.scope,endpoint:M.endpoint,auth:Aa(M.getKey("auth")),p256dh:Aa(M.getKey("p256dh"))},K=yield Gu(x.firebaseDependencies);if(K){if(nu(K.subscriptionOptions,N))return Date.now()>=K.createTime+NC?iu(x,{token:K.token,createTime:Date.now(),subscriptionOptions:N}):K.token;try{yield wn(x.firebaseDependencies,K.token)}catch(ce){console.warn(ce)}return il(x.firebaseDependencies,N)}return il(x.firebaseDependencies,N)})).apply(this,arguments)}function ch(x){return tu.apply(this,arguments)}function tu(){return(tu=(0,z.Z)(function*(x){const M=yield Gu(x.firebaseDependencies);M&&(yield wn(x.firebaseDependencies,M.token),yield hf(x.firebaseDependencies));const N=yield x.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function iu(x,M){return Bm.apply(this,arguments)}function Bm(){return(Bm=(0,z.Z)(function*(x,M){try{const N=yield Cr(x.firebaseDependencies,M),K=Object.assign(Object.assign({},M),{token:N,createTime:Date.now()});return yield Yu(x.firebaseDependencies,K),N}catch(N){throw yield ch(x),N}})).apply(this,arguments)}function il(x,M){return su.apply(this,arguments)}function su(){return(su=(0,z.Z)(function*(x,M){const K={token:yield lv(x,M),createTime:Date.now(),subscriptionOptions:M};return yield Yu(x,K),K.token})).apply(this,arguments)}function Vm(x,M){return Hm.apply(this,arguments)}function Hm(){return(Hm=(0,z.Z)(function*(x,M){return(yield x.pushManager.getSubscription())||x.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Xn(M)})})).apply(this,arguments)}function nu(x,M){return M.vapidKey===x.vapidKey&&M.endpoint===x.endpoint&&M.auth===x.auth&&M.p256dh===x.p256dh}function Qd(x){const M={from:x.from,collapseKey:x.collapse_key,messageId:x.fcmMessageId};return function jm(x,M){if(!M.notification)return;x.notification={};const N=M.notification.title;N&&(x.notification.title=N);const K=M.notification.body;K&&(x.notification.body=K);const ce=M.notification.image;ce&&(x.notification.image=ce);const fe=M.notification.icon;fe&&(x.notification.icon=fe)}(M,x),function FC(x,M){!M.data||(x.data=M.data)}(M,x),function cv(x,M){var N,K,ce,fe,Oe;if(!M.fcmOptions&&!(null===(N=M.notification)||void 0===N?void 0:N.click_action))return;x.fcmOptions={};const Tt=null!==(ce=null===(K=M.fcmOptions)||void 0===K?void 0:K.link)&&void 0!==ce?ce:null===(fe=M.notification)||void 0===fe?void 0:fe.click_action;Tt&&(x.fcmOptions.link=Tt);const St=null===(Oe=M.fcmOptions)||void 0===Oe?void 0:Oe.analytics_label;St&&(x.fcmOptions.analyticsLabel=St)}(M,x),M}function BC(x){return"object"==typeof x&&!!x&&Zn in x}function ru(x,M){const N=[];for(let K=0;K<x.length;K++)N.push(x.charAt(K)),K<M.length&&N.push(M.charAt(K));return N.join("")}function ln(x){return Un.create("missing-app-config-values",{valueName:x})}ru("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ru("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class _i{constructor(M,N,K){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ce=function hh(x){if(!x||!x.options)throw ln("App Configuration Object");if(!x.name)throw ln("App Name");const M=["projectId","apiKey","appId","messagingSenderId"],{options:N}=x;for(const K of M)if(!N[K])throw ln(K);return{appName:x.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(M);this.firebaseDependencies={app:M,appConfig:ce,installations:N,analyticsProvider:K}}_delete(){return Promise.resolve()}}function To(x){return wr.apply(this,arguments)}function wr(){return(wr=(0,z.Z)(function*(x){try{x.swRegistration=yield navigator.serviceWorker.register(Rm,{scope:an}),x.swRegistration.update().catch(()=>{})}catch(M){throw Un.create("failed-service-worker-registration",{browserErrorMessage:null==M?void 0:M.message})}})).apply(this,arguments)}function Ql(x,M){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,z.Z)(function*(x,M){if(!M&&!x.swRegistration&&(yield To(x)),M||!x.swRegistration){if(!(M instanceof ServiceWorkerRegistration))throw Un.create("invalid-sw-registration");x.swRegistration=M}})).apply(this,arguments)}function or(x,M){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,z.Z)(function*(x,M){M?x.vapidKey=M:x.vapidKey||(x.vapidKey=lf)})).apply(this,arguments)}function Qi(){return(Qi=(0,z.Z)(function*(x,M){if(!navigator)throw Un.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Un.create("permission-blocked");return yield or(x,null==M?void 0:M.vapidKey),yield Ql(x,null==M?void 0:M.serviceWorkerRegistration),eu(x)})).apply(this,arguments)}function Zu(x,M,N){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,z.Z)(function*(x,M,N){const K=oa(M);(yield x.firebaseDependencies.analyticsProvider.get()).logEvent(K,{message_id:N[Zn],message_name:N[Il],message_time:N[lh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function oa(x){switch(x){case Zl.NOTIFICATION_CLICKED:return"notification_open";case Zl.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Jl(){return(Jl=(0,z.Z)(function*(x,M){const N=M.data;if(!N.isFirebaseMessaging)return;x.onMessageHandler&&N.messageType===Zl.PUSH_RECEIVED&&("function"==typeof x.onMessageHandler?x.onMessageHandler(Qd(N)):x.onMessageHandler.next(Qd(N)));const K=N.data;BC(K)&&"1"===K[ov]&&(yield Zu(x,N.messageType,K))})).apply(this,arguments)}const Jd="@firebase/messaging",Qu=x=>{const M=new _i(x.getProvider("app").getImmediate(),x.getProvider("installations-internal").getImmediate(),x.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function hv(x,M){return Jl.apply(this,arguments)}(M,N)),M},Ju=x=>{const M=x.getProvider("messaging").getImmediate();return{getToken:K=>function ao(x,M){return Qi.apply(this,arguments)}(M,K)}};function ep(){return tp.apply(this,arguments)}function tp(){return(tp=(0,z.Z)(function*(){try{yield(0,Pe.eu)()}catch(x){return!1}return"undefined"!=typeof window&&(0,Pe.hl)()&&(0,Pe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function xl(){(0,Ie._registerComponent)(new ze.wA("messaging",Qu,"PUBLIC")),(0,Ie._registerComponent)(new ze.wA("messaging-internal",Ju,"PRIVATE")),(0,Ie.registerVersion)(Jd,"0.12.4"),(0,Ie.registerVersion)(Jd,"0.12.4","esm2017")}();const lu="analytics",ec="firebase_id",mf="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Rc="https://www.googletagmanager.com/gtag/js",On=new Le.Yd("@firebase/analytics"),Zr=new Pe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Nc(x){if(!x.startsWith(Rc)){const M=Zr.create("invalid-gtag-resource",{gtagURL:x});return On.warn(M.message),""}return x}function Fc(x){return Promise.all(x.map(M=>M.catch(N=>N)))}function HC(x,M){const N=function VC(x,M){let N;return window.trustedTypes&&(N=window.trustedTypes.createPolicy(x,M)),N}("firebase-js-sdk-policy",{createScriptURL:Nc}),K=document.createElement("script"),ce=`${Rc}?l=${x}&id=${M}`;K.src=N?null==N?void 0:N.createScriptURL(ce):ce,K.async=!0,document.head.appendChild(K)}function jw(x,M,N,K,ce,fe){return Wm.apply(this,arguments)}function Wm(){return(Wm=(0,z.Z)(function*(x,M,N,K,ce,fe){const Oe=K[ce];try{if(Oe)yield M[Oe];else{const St=(yield Fc(N)).find(Zt=>Zt.measurementId===ce);St&&(yield M[St.appId])}}catch(Tt){On.error(Tt)}x("config",ce,fe)})).apply(this,arguments)}function dv(x,M,N,K,ce){return td.apply(this,arguments)}function td(){return(td=(0,z.Z)(function*(x,M,N,K,ce){try{let fe=[];if(ce&&ce.send_to){let Oe=ce.send_to;Array.isArray(Oe)||(Oe=[Oe]);const Tt=yield Fc(N);for(const St of Oe){const Zt=Tt.find(Hi=>Hi.measurementId===St),Mi=Zt&&M[Zt.appId];if(!Mi){fe=[];break}fe.push(Mi)}}0===fe.length&&(fe=Object.values(M)),yield Promise.all(fe),x("event",K,ce||{})}catch(fe){On.error(fe)}})).apply(this,arguments)}function sp(x){const M=window.document.getElementsByTagName("script");for(const N of Object.values(M))if(N.src&&N.src.includes(Rc)&&N.src.includes(x))return N;return null}const gf=new class _r{constructor(M={},N=1e3){this.throttleMetadata=M,this.intervalMillis=N}getThrottleMetadata(M){return this.throttleMetadata[M]}setThrottleMetadata(M,N){this.throttleMetadata[M]=N}deleteThrottleMetadata(M){delete this.throttleMetadata[M]}};function yf(x){return new Headers({Accept:"application/json","x-goog-api-key":x})}function pv(x){return Gm.apply(this,arguments)}function Gm(){return(Gm=(0,z.Z)(function*(x){var M;const{appId:N,apiKey:K}=x,ce={method:"GET",headers:yf(K)},fe=mf.replace("{app-id}",N),Oe=yield fetch(fe,ce);if(200!==Oe.status&&304!==Oe.status){let Tt="";try{const St=yield Oe.json();(null===(M=St.error)||void 0===M?void 0:M.message)&&(Tt=St.error.message)}catch(St){}throw Zr.create("config-fetch-failed",{httpStatus:Oe.status,responseMessage:Tt})}return Oe.json()})).apply(this,arguments)}function aa(x){return nl.apply(this,arguments)}function nl(){return(nl=(0,z.Z)(function*(x,M=gf,N){const{appId:K,apiKey:ce,measurementId:fe}=x.options;if(!K)throw Zr.create("no-app-id");if(!ce){if(fe)return{measurementId:fe,appId:K};throw Zr.create("no-api-key")}const Oe=M.getThrottleMetadata(K)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Tt=new fv;return setTimeout((0,z.Z)(function*(){Tt.abort()}),void 0!==N?N:6e4),rl({appId:K,apiKey:ce,measurementId:fe},Oe,Tt,M)})).apply(this,arguments)}function rl(x,M,N){return ar.apply(this,arguments)}function ar(){return(ar=(0,z.Z)(function*(x,{throttleEndTimeMillis:M,backoffCount:N},K,ce=gf){var fe;const{appId:Oe,measurementId:Tt}=x;try{yield sd(K,M)}catch(St){if(Tt)return On.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Tt} provided in the "measurementId" field in the local Firebase config. [${null==St?void 0:St.message}]`),{appId:Oe,measurementId:Tt};throw St}try{const St=yield pv(x);return ce.deleteThrottleMetadata(Oe),St}catch(St){const Zt=St;if(!Jn(Zt)){if(ce.deleteThrottleMetadata(Oe),Tt)return On.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Tt} provided in the "measurementId" field in the local Firebase config. [${null==Zt?void 0:Zt.message}]`),{appId:Oe,measurementId:Tt};throw St}const Mi=503===Number(null===(fe=null==Zt?void 0:Zt.customData)||void 0===fe?void 0:fe.httpStatus)?(0,Pe.$s)(N,ce.intervalMillis,30):(0,Pe.$s)(N,ce.intervalMillis),Hi={throttleEndTimeMillis:Date.now()+Mi,backoffCount:N+1};return ce.setThrottleMetadata(Oe,Hi),On.debug(`Calling attemptFetch again in ${Mi} millis`),rl(x,Hi,K,ce)}})).apply(this,arguments)}function sd(x,M){return new Promise((N,K)=>{const ce=Math.max(M-Date.now(),0),fe=setTimeout(N,ce);x.addEventListener(()=>{clearTimeout(fe),K(Zr.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}function Jn(x){if(!(x instanceof Pe.ZR&&x.customData))return!1;const M=Number(x.customData.httpStatus);return 429===M||500===M||503===M||504===M}class fv{constructor(){this.listeners=[]}addEventListener(M){this.listeners.push(M)}abort(){this.listeners.forEach(M=>M())}}let nd,dh;function np(){return(np=(0,z.Z)(function*(x,M,N,K,ce){if(ce&&ce.global)x("event",N,K);else{const fe=yield M;x("event",N,Object.assign(Object.assign({},K),{send_to:fe}))}})).apply(this,arguments)}function Bc(x){dh=x}function ap(x){nd=x}function Vc(){return du.apply(this,arguments)}function du(){return(du=(0,z.Z)(function*(){if(!(0,Pe.hl)())return On.warn(Zr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Pe.eu)()}catch(x){return On.warn(Zr.create("indexeddb-unavailable",{errorInfo:null==x?void 0:x.toString()}).message),!1}return!0})).apply(this,arguments)}function Tl(){return(Tl=(0,z.Z)(function*(x,M,N,K,ce,fe,Oe){var Tt;const St=aa(x);St.then(co=>{N[co.measurementId]=co.appId,x.options.measurementId&&co.measurementId!==x.options.measurementId&&On.warn(`The measurement ID in the local Firebase config (${x.options.measurementId}) does not match the measurement ID fetched from the server (${co.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(co=>On.error(co)),M.push(St);const Zt=Vc().then(co=>{if(co)return K.getId()}),[Mi,Hi]=yield Promise.all([St,Zt]);sp(fe)||HC(fe,Mi.measurementId),dh&&(ce("consent","default",dh),Bc(void 0)),ce("js",new Date);const Oa=null!==(Tt=null==Oe?void 0:Oe.config)&&void 0!==Tt?Tt:{};return Oa.origin="firebase",Oa.update=!0,null!=Hi&&(Oa[ec]=Hi),ce("config",Mi.measurementId,Oa),nd&&(ce("set",nd),ap(void 0)),Mi.measurementId})).apply(this,arguments)}class lp{constructor(M){this.app=M}_delete(){return delete ka[this.app.options.appId],Promise.resolve()}}let ka={},Km=[];const lo={};let fu,Br,ph="dataLayer",Al=!1;function Zm(x,M,N){!function vf(){const x=[];if((0,Pe.ru)()&&x.push("This is a browser extension environment."),(0,Pe.zI)()||x.push("Cookies are not available."),x.length>0){const M=x.map((K,ce)=>`(${ce+1}) ${K}`).join(" "),N=Zr.create("invalid-analytics-context",{errorInfo:M});On.warn(N.message)}}();const K=x.options.appId;if(!K)throw Zr.create("no-app-id");if(!x.options.apiKey){if(!x.options.measurementId)throw Zr.create("no-api-key");On.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${x.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ka[K])throw Zr.create("already-exists",{id:K});if(!Al){!function Qn(x){let M=[];Array.isArray(window[x])?M=window[x]:window[x]=M}(ph);const{wrappedGtag:fe,gtagCore:Oe}=function qm(x,M,N,K,ce){let fe=function(...Oe){window[K].push(arguments)};return window[ce]&&"function"==typeof window[ce]&&(fe=window[ce]),window[ce]=function id(x,M,N,K){function fe(){return(fe=(0,z.Z)(function*(Oe,...Tt){try{if("event"===Oe){const[St,Zt]=Tt;yield dv(x,M,N,St,Zt)}else if("config"===Oe){const[St,Zt]=Tt;yield jw(x,M,N,K,St,Zt)}else if("consent"===Oe){const[St]=Tt;x("consent","update",St)}else if("get"===Oe){const[St,Zt,Mi]=Tt;x("get",St,Zt,Mi)}else if("set"===Oe){const[St]=Tt;x("set",St)}else x(Oe,...Tt)}catch(St){On.error(St)}})).apply(this,arguments)}return function ce(Oe){return fe.apply(this,arguments)}}(fe,x,M,N),{gtagCore:fe,wrappedGtag:window[ce]}}(ka,Km,lo,ph,"gtag");Br=fe,fu=Oe,Al=!0}return ka[K]=function pu(x,M,N,K,ce,fe,Oe){return Tl.apply(this,arguments)}(x,Km,lo,M,fu,ph,N),new lp(x)}function fh(){return Do.apply(this,arguments)}function Do(){return(Do=(0,z.Z)(function*(){if((0,Pe.ru)()||!(0,Pe.zI)()||!(0,Pe.hl)())return!1;try{return yield(0,Pe.eu)()}catch(x){return!1}})).apply(this,arguments)}const dd="@firebase/analytics";!function cp(){(0,Ie._registerComponent)(new ze.wA(lu,(M,{options:N})=>Zm(M.getProvider("app").getImmediate(),M.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,Ie._registerComponent)(new ze.wA("analytics-internal",function x(M){try{const N=M.getProvider(lu).getImmediate();return{logEvent:(K,ce,fe)=>function ud(x,M,N,K){x=(0,Pe.m9)(x),function mv(x,M,N,K,ce){return np.apply(this,arguments)}(Br,ka[x.app.options.appId],M,N,K).catch(ce=>On.error(ce))}(N,K,ce,fe)}}catch(N){throw Zr.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,Ie.registerVersion)(dd,"0.10.0"),(0,Ie.registerVersion)(dd,"0.10.0","esm2017")}();var Dl=G(4408),yv=G(7565);const eg=new class Jm extends yv.v{}(class mh extends Dl.o{constructor(M,N){super(M,N),this.scheduler=M,this.work=N}schedule(M,N=0){return N>0?super.schedule(M,N):(this.delay=N,this.state=M,this.scheduler.flush(this),this)}execute(M,N){return N>0||this.closed?super.execute(M,N):this._execute(M,N)}requestAsyncId(M,N,K=0){return null!=K&&K>0||null==K&&this.delay>0?super.requestAsyncId(M,N,K):M.flush(this)}});var as=G(4986),tg=G(8306),gu=G(8505),Ef=G(9468),ic=G(5363);const hp=new d.GfV("7.6.1"),Hc="__angularfire_symbol__analyticsIsSupportedValue",wf="__angularfire_symbol__analyticsIsSupported",Wo="__angularfire_symbol__remoteConfigIsSupportedValue",Sf="__angularfire_symbol__remoteConfigIsSupported",sc="__angularfire_symbol__messagingIsSupportedValue",yu="__angularfire_symbol__messagingIsSupported";function vv(x,M,N){if(M){if(1===M.length)return M[0];const fe=M.filter(Oe=>Oe.app===N);if(1===fe.length)return fe[0]}return N.container.getProvider(x).getImmediate({optional:!0})}globalThis[wf]||(globalThis[wf]=fh().then(x=>globalThis[Hc]=x).catch(()=>globalThis[Hc]=!1)),globalThis[yu]||(globalThis[yu]=ep().then(x=>globalThis[sc]=x).catch(()=>globalThis[sc]=!1)),globalThis[Sf]||(globalThis[Sf]=Pm().then(x=>globalThis[Wo]=x).catch(()=>globalThis[Wo]=!1));const ig=(x,M)=>{const N=M?[M]:(0,ee.C6)(),K=[];return N.forEach(ce=>{ce.container.getProvider(x).instances.forEach(Oe=>{K.includes(Oe)||K.push(Oe)})}),K};function nc(){}class up{constructor(M,N=eg){this.zone=M,this.delegate=N}now(){return this.delegate.now()}schedule(M,N,K){const ce=this.zone;return this.delegate.schedule(function(Oe){ce.runGuarded(()=>{M.apply(this,[Oe])})},N,K)}}class dp{constructor(M){this.zone=M,this.task=null}call(M,N){const K=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",nc,{},nc,nc)),N.pipe((0,gu.b)({next:K,complete:K,error:K})).subscribe(M).add(K)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let jc=(()=>{class x{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new up(Zone.current)),this.insideAngular=N.run(()=>new up(Zone.current,as.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return x.\u0275fac=function(N){return new(N||x)(d.LFG(d.R0b))},x.\u0275prov=d.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();function ca(){const x=globalThis.\u0275AngularFireScheduler;if(!x)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return x}function _f(x){return ca().ngZone.runOutsideAngular(()=>x())}function Ol(x){return ca().ngZone.run(()=>x())}function yh(x){return ca(),function UC(x){return function(N){return(N=N.lift(new dp(x.ngZone))).pipe((0,Ef.R)(x.outsideAngular),(0,ic.Q)(x.insideAngular))}}(ca())(x)}const Uc=(x,M)=>function(){const K=arguments;return M&&setTimeout(()=>{"scheduled"===M.state&&M.invoke()},10),Ol(()=>x.apply(void 0,K))},If=(x,M)=>function(){let N;const K=arguments;for(let fe=0;fe<arguments.length;fe++)"function"==typeof K[fe]&&(M&&(N||(N=Ol(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",nc,{},nc,nc)))),K[fe]=Uc(K[fe],N));const ce=_f(()=>x.apply(this,K));if(!M){if(ce instanceof tg.y){const fe=ca();return ce.pipe((0,Ef.R)(fe.outsideAngular),(0,ic.Q)(fe.insideAngular))}return Ol(()=>ce)}return ce instanceof tg.y?ce.pipe(yh):ce instanceof Promise?Ol(()=>new Promise((fe,Oe)=>ce.then(Tt=>Ol(()=>fe(Tt)),Tt=>Ol(()=>Oe(Tt))))):"function"==typeof ce&&N?function(){return setTimeout(()=>{N&&"scheduled"===N.state&&N.invoke()},10),ce.apply(this,arguments)}:Ol(()=>ce)}},9914:(Kt,Xe,G)=>{G.d(Xe,{$:()=>Cr,A:()=>Sl,D:()=>sh,I:()=>Wh,J:()=>Dc,L:()=>oo,N:()=>Nu,P:()=>eg,Q:()=>Kh,R:()=>hd,U:()=>ov,V:()=>RC,W:()=>Zl,X:()=>lh,Y:()=>Wu,Z:()=>Oc,_:()=>av,a:()=>aa,a0:()=>wn,a1:()=>Qh,a2:()=>NC,a3:()=>Bm,a4:()=>su,a5:()=>Hm,a6:()=>Qd,a7:()=>FC,a8:()=>BC,a9:()=>hh,aA:()=>dt,aB:()=>Mi,aC:()=>jo,aD:()=>Ia,aE:()=>fe,aF:()=>ca,aG:()=>jc,aH:()=>kn,aL:()=>ar,aO:()=>Xn,aa:()=>ln,ab:()=>To,ac:()=>wr,ad:()=>Fr,ae:()=>Qi,af:()=>Xu,ai:()=>Jd,aj:()=>Qu,ak:()=>Ju,an:()=>cf,ao:()=>Sr,aq:()=>VC,ar:()=>qm,as:()=>Cn,at:()=>oh,au:()=>rh,av:()=>Cs,aw:()=>yp,ax:()=>pp,ay:()=>Qp,az:()=>Zi,b:()=>pv,c:()=>wf,d:()=>yu,e:()=>Sf,f:()=>md,g:()=>x,h:()=>UC,i:()=>ka,j:()=>K,k:()=>GC,l:()=>Cf,m:()=>YC,o:()=>Gw,p:()=>Tn,r:()=>Qm,s:()=>gv,u:()=>yv});var d=G(5861),ee=G(2090),z=G(6881);function Le(w,v){var C={};for(var I in w)Object.prototype.hasOwnProperty.call(w,I)&&v.indexOf(I)<0&&(C[I]=w[I]);if(null!=w&&"function"==typeof Object.getOwnPropertySymbols){var P=0;for(I=Object.getOwnPropertySymbols(w);P<I.length;P++)v.indexOf(I[P])<0&&Object.prototype.propertyIsEnumerable.call(w,I[P])&&(C[I[P]]=w[I[P]])}return C}"function"==typeof SuppressedError&&SuppressedError;var bn=G(1877),io=G(4859);const Tn={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Sl={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const sh=function Ya(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Ka=function Tc(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ia=new ee.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_l=new bn.Yd("@firebase/auth");function Ea(w,...v){_l.logLevel<=bn.in.ERROR&&_l.error(`Auth (${z.SDK_VERSION}): ${w}`,...v)}function Cs(w,...v){throw Vn(w,...v)}function Zi(w,...v){return Vn(w,...v)}function wa(w,v,C){const I=Object.assign(Object.assign({},Ka()),{[v]:C});return new ee.LL("auth","Firebase",I).create(v,{appName:w.name})}function Sa(w,v,C){if(!(v instanceof C))throw C.name!==v.constructor.name&&Cs(w,"argument-error"),wa(w,"argument-error",`Type of ${v.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Vn(w,...v){if("string"!=typeof w){const C=v[0],I=[...v.slice(1)];return I[0]&&(I[0].appName=w.name),w._errorFactory.create(C,...I)}return ia.create(w,...v)}function dt(w,v,...C){if(!w)throw Vn(v,...C)}function Qs(w){const v="INTERNAL ASSERTION FAILED: "+w;throw Ea(v),new Error(v)}function Cn(w,v){w||Qs(v)}function Yi(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function di(){return"http:"===ai()||"https:"===ai()}function ai(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class es{constructor(v,C){this.shortDelay=v,this.longDelay=C,Cn(C>v,"Short delay should be less than long delay!"),this.isMobile=(0,ee.uI)()||(0,ee.b$)()}get(){return function Za(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(di()||(0,ee.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function so(w,v){Cn(w.emulator,"Emulator should always be set here");const{url:C}=w.emulator;return v?`${C}${v.startsWith("/")?v.slice(1):v}`:C}class rn{static initialize(v,C,I){this.fetchImpl=v,C&&(this.headersImpl=C),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Qs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Qs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Qs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const fn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Si=new es(3e4,6e4);function Ss(w,v){return w.tenantId&&!v.tenantId?Object.assign(Object.assign({},v),{tenantId:w.tenantId}):v}function ni(w,v,C,I){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,d.Z)(function*(w,v,C,I,P={}){return Rr(w,P,(0,d.Z)(function*(){let F={},ie={};I&&("GET"===v?ie=I:F={body:JSON.stringify(I)});const ve=(0,ee.xO)(Object.assign({key:w.config.apiKey},ie)).slice(1),pt=yield w._getAdditionalHeaders();return pt["Content-Type"]="application/json",w.languageCode&&(pt["X-Firebase-Locale"]=w.languageCode),rn.fetch()(Ho(w,w.config.apiHost,C,ve),Object.assign({method:v,headers:pt,referrerPolicy:"no-referrer"},F))}))})).apply(this,arguments)}function Rr(w,v,C){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,d.Z)(function*(w,v,C){w._canInitEmulator=!1;const I=Object.assign(Object.assign({},fn),v);try{const P=new sa(w),F=yield Promise.race([C(),P.promise]);P.clearNetworkTimeout();const ie=yield F.json();if("needConfirmation"in ie)throw Kr(w,"account-exists-with-different-credential",ie);if(F.ok&&!("errorMessage"in ie))return ie;{const ve=F.ok?ie.errorMessage:ie.error.message,[pt,Je]=ve.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===pt)throw Kr(w,"credential-already-in-use",ie);if("EMAIL_EXISTS"===pt)throw Kr(w,"email-already-in-use",ie);if("USER_DISABLED"===pt)throw Kr(w,"user-disabled",ie);const Lt=I[pt]||pt.toLowerCase().replace(/[_\s]+/g,"-");if(Je)throw wa(w,Lt,Je);Cs(w,Lt)}}catch(P){if(P instanceof ee.ZR)throw P;Cs(w,"network-request-failed",{message:String(P)})}})).apply(this,arguments)}function $s(w,v,C,I){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,d.Z)(function*(w,v,C,I,P={}){const F=yield ni(w,v,C,I,P);return"mfaPendingCredential"in F&&Cs(w,"multi-factor-auth-required",{_serverResponse:F}),F})).apply(this,arguments)}function Ho(w,v,C,I){const P=`${v}${C}?${I}`;return w.config.emulator?so(w.config,P):`${w.config.apiScheme}://${P}`}class sa{constructor(v){this.auth=v,this.timer=null,this.promise=new Promise((C,I)=>{this.timer=setTimeout(()=>I(Zi(this.auth,"network-request-failed")),Si.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kr(w,v,C){const I={appName:w.name};C.email&&(I.email=C.email),C.phoneNumber&&(I.phoneNumber=C.phoneNumber);const P=Zi(w,v,I);return P.customData._tokenResponse=C,P}function te(){return(te=(0,d.Z)(function*(w,v){return ni(w,"POST","/v1/accounts:delete",v)})).apply(this,arguments)}function W(w,v){return q.apply(this,arguments)}function q(){return(q=(0,d.Z)(function*(w,v){return ni(w,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function U(w,v){return ge.apply(this,arguments)}function ge(){return(ge=(0,d.Z)(function*(w,v){return ni(w,"POST","/v1/accounts:lookup",v)})).apply(this,arguments)}function Ze(w){if(w)try{const v=new Date(Number(w));if(!isNaN(v.getTime()))return v.toUTCString()}catch(v){}}function Ei(){return(Ei=(0,d.Z)(function*(w,v=!1){const C=(0,ee.m9)(w),I=yield C.getIdToken(v),P=yi(I);dt(P&&P.exp&&P.auth_time&&P.iat,C.auth,"internal-error");const F="object"==typeof P.firebase?P.firebase:void 0,ie=null==F?void 0:F.sign_in_provider;return{claims:P,token:I,authTime:Ze($i(P.auth_time)),issuedAtTime:Ze($i(P.iat)),expirationTime:Ze($i(P.exp)),signInProvider:ie||null,signInSecondFactor:(null==F?void 0:F.sign_in_second_factor)||null}})).apply(this,arguments)}function $i(w){return 1e3*Number(w)}function yi(w){const[v,C,I]=w.split(".");if(void 0===v||void 0===C||void 0===I)return Ea("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,ee.tV)(C);return P?JSON.parse(P):(Ea("Failed to decode base64 JWT payload"),null)}catch(P){return Ea("Caught error parsing JWT payload as JSON",null==P?void 0:P.toString()),null}}function Di(w,v){return En.apply(this,arguments)}function En(){return(En=(0,d.Z)(function*(w,v,C=!1){if(C)return v;try{return yield v}catch(I){throw I instanceof ee.ZR&&So(I)&&w.auth.currentUser===w&&(yield w.auth.signOut()),I}})).apply(this,arguments)}function So({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class De{constructor(v){this.user=v,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(v){var C;if(v){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const P=(null!==(C=this.user.stsTokenManager.expirationTime)&&void 0!==C?C:0)-Date.now()-3e5;return Math.max(0,P)}}schedule(v=!1){var C=this;if(!this.isRunning)return;const I=this.getInterval(v);this.timerId=setTimeout((0,d.Z)(function*(){yield C.iteration()}),I)}iteration(){var v=this;return(0,d.Z)(function*(){try{yield v.user.getIdToken(!0)}catch(C){return void("auth/network-request-failed"===(null==C?void 0:C.code)&&v.schedule(!0))}v.schedule()})()}}class Ee{constructor(v,C){this.createdAt=v,this.lastLoginAt=C,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ze(this.lastLoginAt),this.creationTime=Ze(this.createdAt)}_copy(v){this.createdAt=v.createdAt,this.lastLoginAt=v.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function tt(w){return He.apply(this,arguments)}function He(){return(He=(0,d.Z)(function*(w){var v;const C=w.auth,I=yield w.getIdToken(),P=yield Di(w,U(C,{idToken:I}));dt(null==P?void 0:P.users.length,C,"internal-error");const F=P.users[0];w._notifyReloadListener(F);const ie=(null===(v=F.providerUserInfo)||void 0===v?void 0:v.length)?Hn(F.providerUserInfo):[],ve=ns(w.providerData,ie),Lt=!!w.isAnonymous&&!(w.email&&F.passwordHash||(null==ve?void 0:ve.length)),Ti={uid:F.localId,displayName:F.displayName||null,photoURL:F.photoUrl||null,email:F.email||null,emailVerified:F.emailVerified||!1,phoneNumber:F.phoneNumber||null,tenantId:F.tenantId||null,providerData:ve,metadata:new Ee(F.createdAt,F.lastLoginAt),isAnonymous:Lt};Object.assign(w,Ti)})).apply(this,arguments)}function Qt(){return(Qt=(0,d.Z)(function*(w){const v=(0,ee.m9)(w);yield tt(v),yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)})).apply(this,arguments)}function ns(w,v){return[...w.filter(I=>!v.some(P=>P.providerId===I.providerId)),...v]}function Hn(w){return w.map(v=>{var{providerId:C}=v,I=Le(v,["providerId"]);return{providerId:C,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function Nr(){return(Nr=(0,d.Z)(function*(w,v){const C=yield Rr(w,{},(0,d.Z)(function*(){const I=(0,ee.xO)({grant_type:"refresh_token",refresh_token:v}).slice(1),{tokenApiHost:P,apiKey:F}=w.config,ie=Ho(w,P,"/v1/token",`key=${F}`),ve=yield w._getAdditionalHeaders();return ve["Content-Type"]="application/x-www-form-urlencoded",rn.fetch()(ie,{method:"POST",headers:ve,body:I})}));return{accessToken:C.access_token,expiresIn:C.expires_in,refreshToken:C.refresh_token}})).apply(this,arguments)}class Os{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(v){dt(v.idToken,"internal-error"),dt(void 0!==v.idToken,"internal-error"),dt(void 0!==v.refreshToken,"internal-error");const C="expiresIn"in v&&void 0!==v.expiresIn?Number(v.expiresIn):function Gs(w){const v=yi(w);return dt(v,"internal-error"),dt(void 0!==v.exp,"internal-error"),dt(void 0!==v.iat,"internal-error"),Number(v.exp)-Number(v.iat)}(v.idToken);this.updateTokensAndExpiration(v.idToken,v.refreshToken,C)}getToken(v,C=!1){var I=this;return(0,d.Z)(function*(){return dt(!I.accessToken||I.refreshToken,v,"user-token-expired"),C||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(v,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(v,C){var I=this;return(0,d.Z)(function*(){const{accessToken:P,refreshToken:F,expiresIn:ie}=yield function ms(w,v){return Nr.apply(this,arguments)}(v,C);I.updateTokensAndExpiration(P,F,Number(ie))})()}updateTokensAndExpiration(v,C,I){this.refreshToken=C||null,this.accessToken=v||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(v,C){const{refreshToken:I,accessToken:P,expirationTime:F}=C,ie=new Os;return I&&(dt("string"==typeof I,"internal-error",{appName:v}),ie.refreshToken=I),P&&(dt("string"==typeof P,"internal-error",{appName:v}),ie.accessToken=P),F&&(dt("number"==typeof F,"internal-error",{appName:v}),ie.expirationTime=F),ie}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(v){this.accessToken=v.accessToken,this.refreshToken=v.refreshToken,this.expirationTime=v.expirationTime}_clone(){return Object.assign(new Os,this.toJSON())}_performRefresh(){return Qs("not implemented")}}function _o(w,v){dt("string"==typeof w||void 0===w,"internal-error",{appName:v})}class _a{constructor(v){var{uid:C,auth:I,stsTokenManager:P}=v,F=Le(v,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new De(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=C,this.auth=I,this.stsTokenManager=P,this.accessToken=P.accessToken,this.displayName=F.displayName||null,this.email=F.email||null,this.emailVerified=F.emailVerified||!1,this.phoneNumber=F.phoneNumber||null,this.photoURL=F.photoURL||null,this.isAnonymous=F.isAnonymous||!1,this.tenantId=F.tenantId||null,this.providerData=F.providerData?[...F.providerData]:[],this.metadata=new Ee(F.createdAt||void 0,F.lastLoginAt||void 0)}getIdToken(v){var C=this;return(0,d.Z)(function*(){const I=yield Di(C,C.stsTokenManager.getToken(C.auth,v));return dt(I,C.auth,"internal-error"),C.accessToken!==I&&(C.accessToken=I,yield C.auth._persistUserIfCurrent(C),C.auth._notifyListenersIfCurrent(C)),I})()}getIdTokenResult(v){return function Ci(w){return Ei.apply(this,arguments)}(this,v)}reload(){return function Mt(w){return Qt.apply(this,arguments)}(this)}_assign(v){this!==v&&(dt(this.uid===v.uid,this.auth,"internal-error"),this.displayName=v.displayName,this.photoURL=v.photoURL,this.email=v.email,this.emailVerified=v.emailVerified,this.phoneNumber=v.phoneNumber,this.isAnonymous=v.isAnonymous,this.tenantId=v.tenantId,this.providerData=v.providerData.map(C=>Object.assign({},C)),this.metadata._copy(v.metadata),this.stsTokenManager._assign(v.stsTokenManager))}_clone(v){const C=new _a(Object.assign(Object.assign({},this),{auth:v,stsTokenManager:this.stsTokenManager._clone()}));return C.metadata._copy(this.metadata),C}_onReload(v){dt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=v,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(v){this.reloadListener?this.reloadListener(v):this.reloadUserInfo=v}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(v,C=!1){var I=this;return(0,d.Z)(function*(){let P=!1;v.idToken&&v.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(v),P=!0),C&&(yield tt(I)),yield I.auth._persistUserIfCurrent(I),P&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var v=this;return(0,d.Z)(function*(){const C=yield v.getIdToken();return yield Di(v,function ne(w,v){return te.apply(this,arguments)}(v.auth,{idToken:C})),v.stsTokenManager.clearRefreshToken(),v.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(v=>Object.assign({},v)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(v,C){var I,P,F,ie,ve,pt,Je,Lt;const Ti=null!==(I=C.displayName)&&void 0!==I?I:void 0,us=null!==(P=C.email)&&void 0!==P?P:void 0,Ys=null!==(F=C.phoneNumber)&&void 0!==F?F:void 0,er=null!==(ie=C.photoURL)&&void 0!==ie?ie:void 0,rc=null!==(ve=C.tenantId)&&void 0!==ve?ve:void 0,al=null!==(pt=C._redirectEventId)&&void 0!==pt?pt:void 0,zc=null!==(Je=C.createdAt)&&void 0!==Je?Je:void 0,Ma=null!==(Lt=C.lastLoginAt)&&void 0!==Lt?Lt:void 0,{uid:Pf,emailVerified:cg,isAnonymous:KC,providerData:hg,stsTokenManager:Ch}=C;dt(Pf&&Ch,v,"internal-error");const Tv=Os.fromJSON(this.name,Ch);dt("string"==typeof Pf,v,"internal-error"),_o(Ti,v.name),_o(us,v.name),dt("boolean"==typeof cg,v,"internal-error"),dt("boolean"==typeof KC,v,"internal-error"),_o(Ys,v.name),_o(er,v.name),_o(rc,v.name),_o(al,v.name),_o(zc,v.name),_o(Ma,v.name);const Lf=new _a({uid:Pf,auth:v,email:us,emailVerified:cg,displayName:Ti,isAnonymous:KC,photoURL:er,phoneNumber:Ys,tenantId:rc,stsTokenManager:Tv,createdAt:zc,lastLoginAt:Ma});return hg&&Array.isArray(hg)&&(Lf.providerData=hg.map(Cd=>Object.assign({},Cd))),al&&(Lf._redirectEventId=al),Lf}static _fromIdTokenResponse(v,C,I=!1){return(0,d.Z)(function*(){const P=new Os;P.updateFromServerResponse(C);const F=new _a({uid:C.localId,auth:v,stsTokenManager:P,isAnonymous:I});return yield tt(F),F})()}}const Xi=new Map;function jo(w){Cn(w instanceof Function,"Expected a class definition");let v=Xi.get(w);return v?(Cn(v instanceof w,"Instance stored in cache mismatched with class"),v):(v=new w,Xi.set(w,v),v)}const Nu=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(C,I){var P=this;return(0,d.Z)(function*(){P.storage[C]=I})()}_get(C){var I=this;return(0,d.Z)(function*(){const P=I.storage[C];return void 0===P?null:P})()}_remove(C){var I=this;return(0,d.Z)(function*(){delete I.storage[C]})()}_addListener(C,I){}_removeListener(C,I){}}return w.type="NONE",w})();function Ia(w,v,C){return`firebase:${w}:${v}:${C}`}class vr{constructor(v,C,I){this.persistence=v,this.auth=C,this.userKey=I;const{config:P,name:F}=this.auth;this.fullUserKey=Ia(this.userKey,P.apiKey,F),this.fullPersistenceKey=Ia("persistence",P.apiKey,F),this.boundEventHandler=C._onStorageEvent.bind(C),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(v){return this.persistence._set(this.fullUserKey,v.toJSON())}getCurrentUser(){var v=this;return(0,d.Z)(function*(){const C=yield v.persistence._get(v.fullUserKey);return C?_a._fromJSON(v.auth,C):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(v){var C=this;return(0,d.Z)(function*(){if(C.persistence===v)return;const I=yield C.getCurrentUser();return yield C.removeCurrentUser(),C.persistence=v,I?C.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(v,C,I="authUser"){return(0,d.Z)(function*(){if(!C.length)return new vr(jo(Nu),v,I);const P=(yield Promise.all(C.map(function(){var Je=(0,d.Z)(function*(Lt){if(yield Lt._isAvailable())return Lt});return function(Lt){return Je.apply(this,arguments)}}()))).filter(Je=>Je);let F=P[0]||jo(Nu);const ie=Ia(I,v.config.apiKey,v.name);let ve=null;for(const Je of C)try{const Lt=yield Je._get(ie);if(Lt){const Ti=_a._fromJSON(v,Lt);Je!==F&&(ve=Ti),F=Je;break}}catch(Lt){}const pt=P.filter(Je=>Je._shouldAllowMigration);return F._shouldAllowMigration&&pt.length?(F=pt[0],ve&&(yield F._set(ie,ve.toJSON())),yield Promise.all(C.map(function(){var Je=(0,d.Z)(function*(Lt){if(Lt!==F)try{yield Lt._remove(ie)}catch(Ti){}});return function(Lt){return Je.apply(this,arguments)}}())),new vr(F,v,I)):new vr(F,v,I)})()}}function Uh(w){const v=w.toLowerCase();if(v.includes("opera/")||v.includes("opr/")||v.includes("opios/"))return"Opera";if(Xp(v))return"IEMobile";if(v.includes("msie")||v.includes("trident/"))return"IE";if(v.includes("edge/"))return"Edge";if(Ac(v))return"Firefox";if(v.includes("silk/"))return"Silk";if(Uo(v))return"Blackberry";if(xa(v))return"Webos";if(no(v))return"Safari";if((v.includes("chrome/")||on(v))&&!v.includes("edge/"))return"Chrome";if(rh(v))return"Android";{const I=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==I?void 0:I.length))return I[1]}return"Other"}function Ac(w=(0,ee.z$)()){return/firefox\//i.test(w)}function no(w=(0,ee.z$)()){const v=w.toLowerCase();return v.includes("safari/")&&!v.includes("chrome/")&&!v.includes("crios/")&&!v.includes("android")}function on(w=(0,ee.z$)()){return/crios\//i.test(w)}function Xp(w=(0,ee.z$)()){return/iemobile/i.test(w)}function rh(w=(0,ee.z$)()){return/android/i.test(w)}function Uo(w=(0,ee.z$)()){return/blackberry/i.test(w)}function xa(w=(0,ee.z$)()){return/webos/i.test(w)}function oh(w=(0,ee.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function Qp(w=(0,ee.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function Jp(w=(0,ee.z$)()){return oh(w)||rh(w)||xa(w)||Uo(w)||/windows phone/i.test(w)||Xp(w)}function _m(w,v=[]){let C;switch(w){case"Browser":C=Uh((0,ee.z$)());break;case"Worker":C=`${Uh((0,ee.z$)())}-${w}`;break;default:C=w}const I=v.length?v.join(","):"FirebaseCore-web";return`${C}/JsCore/${z.SDK_VERSION}/${I}`}function Io(){return(Io=(0,d.Z)(function*(w){return(yield ni(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Qy(w,v){return Im.apply(this,arguments)}function Im(){return(Im=(0,d.Z)(function*(w,v){return ni(w,"GET","/v2/recaptchaConfig",Ss(w,v))})).apply(this,arguments)}function Jy(w){return void 0!==w&&void 0!==w.getResponse}function xm(w){return void 0!==w&&void 0!==w.enterprise}class ev{constructor(v){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===v.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=v.recaptchaKey.split("/")[3],this.emailPasswordEnabled=v.recaptchaEnforcementState.some(C=>"EMAIL_PASSWORD_PROVIDER"===C.provider&&"OFF"!==C.enforcementState)}}function tv(w){return new Promise((v,C)=>{const I=document.createElement("script");I.setAttribute("src",w),I.onload=v,I.onerror=P=>{const F=Zi("internal-error");F.customData=P,C(F)},I.type="text/javascript",I.charset="UTF-8",function Tm(){var w,v;return null!==(v=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==v?v:document}().appendChild(I)})}function iv(w){return`__${w}${Math.floor(1e6*Math.random())}`}class ef{constructor(v){this.type="recaptcha-enterprise",this.auth=kn(v)}verify(v="verify",C=!1){var I=this;return(0,d.Z)(function*(){function F(){return F=(0,d.Z)(function*(ve){if(!C){if(null==ve.tenantId&&null!=ve._agentRecaptchaConfig)return ve._agentRecaptchaConfig.siteKey;if(null!=ve.tenantId&&void 0!==ve._tenantRecaptchaConfigs[ve.tenantId])return ve._tenantRecaptchaConfigs[ve.tenantId].siteKey}return new Promise(function(){var pt=(0,d.Z)(function*(Je,Lt){Qy(ve,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ti=>{if(void 0!==Ti.recaptchaKey){const us=new ev(Ti);return null==ve.tenantId?ve._agentRecaptchaConfig=us:ve._tenantRecaptchaConfigs[ve.tenantId]=us,Je(us.siteKey)}Lt(new Error("recaptcha Enterprise site key undefined"))}).catch(Ti=>{Lt(Ti)})});return function(Je,Lt){return pt.apply(this,arguments)}}())}),F.apply(this,arguments)}function ie(ve,pt,Je){const Lt=window.grecaptcha;xm(Lt)?Lt.enterprise.ready(()=>{Lt.enterprise.execute(ve,{action:v}).then(Ti=>{pt(Ti)}).catch(()=>{pt("NO_RECAPTCHA")})}):Je(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ve,pt)=>{(function P(ve){return F.apply(this,arguments)})(I.auth).then(Je=>{if(!C&&xm(window.grecaptcha))ie(Je,ve,pt);else{if("undefined"==typeof window)return void pt(new Error("RecaptchaVerifier is only supported in browser"));tv("https://www.google.com/recaptcha/enterprise.js?render="+Je).then(()=>{ie(Je,ve,pt)}).catch(Lt=>{pt(Lt)})}}).catch(Je=>{pt(Je)})})})()}}function zh(w,v,C){return tf.apply(this,arguments)}function tf(){return(tf=(0,d.Z)(function*(w,v,C,I=!1){const P=new ef(w);let F;try{F=yield P.verify(C)}catch(ve){F=yield P.verify(C,!0)}const ie=Object.assign({},v);return Object.assign(ie,I?{captchaResp:F}:{captchaResponse:F}),Object.assign(ie,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ie,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ie})).apply(this,arguments)}class Dm{constructor(v){this.auth=v,this.queue=[]}pushCallback(v,C){const I=F=>new Promise((ie,ve)=>{try{ie(v(F))}catch(pt){ve(pt)}});I.onAbort=C,this.queue.push(I);const P=this.queue.length-1;return()=>{this.queue[P]=()=>Promise.resolve()}}runMiddleware(v){var C=this;return(0,d.Z)(function*(){if(C.auth.currentUser===v)return;const I=[];try{for(const P of C.queue)yield P(v),P.onAbort&&I.push(P.onAbort)}catch(P){I.reverse();for(const F of I)try{F()}catch(ie){}throw C.auth._errorFactory.create("login-blocked",{originalMessage:null==P?void 0:P.message})}})()}}class Hw{constructor(v,C,I,P){this.app=v,this.heartbeatServiceProvider=C,this.appCheckServiceProvider=I,this.config=P,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new LC(this),this.idTokenSubscription=new LC(this),this.beforeStateQueue=new Dm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ia,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=v.name,this.clientVersion=P.sdkClientVersion}_initializeWithPersistence(v,C){var I=this;return C&&(this._popupRedirectResolver=jo(C)),this._initializationPromise=this.queue((0,d.Z)(function*(){var P,F;if(!I._deleted&&(I.persistenceManager=yield vr.create(I,v),!I._deleted)){if(null===(P=I._popupRedirectResolver)||void 0===P?void 0:P._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch(ie){}yield I.initializeCurrentUser(C),I.lastNotifiedUid=(null===(F=I.currentUser)||void 0===F?void 0:F.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var v=this;return(0,d.Z)(function*(){if(v._deleted)return;const C=yield v.assertedPersistence.getCurrentUser();if(v.currentUser||C){if(v.currentUser&&C&&v.currentUser.uid===C.uid)return v._currentUser._assign(C),void(yield v.currentUser.getIdToken());yield v._updateCurrentUser(C,!0)}})()}initializeCurrentUser(v){var C=this;return(0,d.Z)(function*(){var I;const P=yield C.assertedPersistence.getCurrentUser();let F=P,ie=!1;if(v&&C.config.authDomain){yield C.getOrInitRedirectPersistenceManager();const ve=null===(I=C.redirectUser)||void 0===I?void 0:I._redirectEventId,pt=null==F?void 0:F._redirectEventId,Je=yield C.tryRedirectSignIn(v);(!ve||ve===pt)&&(null==Je?void 0:Je.user)&&(F=Je.user,ie=!0)}if(!F)return C.directlySetCurrentUser(null);if(!F._redirectEventId){if(ie)try{yield C.beforeStateQueue.runMiddleware(F)}catch(ve){F=P,C._popupRedirectResolver._overrideRedirectResult(C,()=>Promise.reject(ve))}return F?C.reloadAndSetCurrentUserOrClear(F):C.directlySetCurrentUser(null)}return dt(C._popupRedirectResolver,C,"argument-error"),yield C.getOrInitRedirectPersistenceManager(),C.redirectUser&&C.redirectUser._redirectEventId===F._redirectEventId?C.directlySetCurrentUser(F):C.reloadAndSetCurrentUserOrClear(F)})()}tryRedirectSignIn(v){var C=this;return(0,d.Z)(function*(){let I=null;try{I=yield C._popupRedirectResolver._completeRedirectFn(C,v,!0)}catch(P){yield C._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(v){var C=this;return(0,d.Z)(function*(){try{yield tt(v)}catch(I){if("auth/network-request-failed"!==(null==I?void 0:I.code))return C.directlySetCurrentUser(null)}return C.directlySetCurrentUser(v)})()}useDeviceLanguage(){this.languageCode=function Gl(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var v=this;return(0,d.Z)(function*(){v._deleted=!0})()}updateCurrentUser(v){var C=this;return(0,d.Z)(function*(){const I=v?(0,ee.m9)(v):null;return I&&dt(I.auth.config.apiKey===C.config.apiKey,C,"invalid-user-token"),C._updateCurrentUser(I&&I._clone(C))})()}_updateCurrentUser(v,C=!1){var I=this;return(0,d.Z)(function*(){if(!I._deleted)return v&&dt(I.tenantId===v.tenantId,I,"tenant-id-mismatch"),C||(yield I.beforeStateQueue.runMiddleware(v)),I.queue((0,d.Z)(function*(){yield I.directlySetCurrentUser(v),I.notifyAuthListeners()}))})()}signOut(){var v=this;return(0,d.Z)(function*(){return yield v.beforeStateQueue.runMiddleware(null),(v.redirectPersistenceManager||v._popupRedirectResolver)&&(yield v._setRedirectUser(null)),v._updateCurrentUser(null,!0)})()}setPersistence(v){var C=this;return this.queue((0,d.Z)(function*(){yield C.assertedPersistence.setPersistence(jo(v))}))}initializeRecaptchaConfig(){var v=this;return(0,d.Z)(function*(){const C=yield Qy(v,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),I=new ev(C);null==v.tenantId?v._agentRecaptchaConfig=I:v._tenantRecaptchaConfigs[v.tenantId]=I,I.emailPasswordEnabled&&new ef(v).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(v){this._errorFactory=new ee.LL("auth","Firebase",v())}onAuthStateChanged(v,C,I){return this.registerStateListener(this.authStateSubscription,v,C,I)}beforeAuthStateChanged(v,C){return this.beforeStateQueue.pushCallback(v,C)}onIdTokenChanged(v,C,I){return this.registerStateListener(this.idTokenSubscription,v,C,I)}toJSON(){var v;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(v=this._currentUser)||void 0===v?void 0:v.toJSON()}}_setRedirectUser(v,C){var I=this;return(0,d.Z)(function*(){const P=yield I.getOrInitRedirectPersistenceManager(C);return null===v?P.removeCurrentUser():P.setCurrentUser(v)})()}getOrInitRedirectPersistenceManager(v){var C=this;return(0,d.Z)(function*(){if(!C.redirectPersistenceManager){const I=v&&jo(v)||C._popupRedirectResolver;dt(I,C,"argument-error"),C.redirectPersistenceManager=yield vr.create(C,[jo(I._redirectPersistence)],"redirectUser"),C.redirectUser=yield C.redirectPersistenceManager.getCurrentUser()}return C.redirectPersistenceManager})()}_redirectUserForId(v){var C=this;return(0,d.Z)(function*(){var I,P;return C._isInitialized&&(yield C.queue((0,d.Z)(function*(){}))),(null===(I=C._currentUser)||void 0===I?void 0:I._redirectEventId)===v?C._currentUser:(null===(P=C.redirectUser)||void 0===P?void 0:P._redirectEventId)===v?C.redirectUser:null})()}_persistUserIfCurrent(v){var C=this;return(0,d.Z)(function*(){if(v===C.currentUser)return C.queue((0,d.Z)(function*(){return C.directlySetCurrentUser(v)}))})()}_notifyListenersIfCurrent(v){v===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var v,C;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(C=null===(v=this.currentUser)||void 0===v?void 0:v.uid)&&void 0!==C?C:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(v,C,I,P){if(this._deleted)return()=>{};const F="function"==typeof C?C:C.next.bind(C),ie=this._isInitialized?Promise.resolve():this._initializationPromise;return dt(ie,this,"internal-error"),ie.then(()=>F(this.currentUser)),"function"==typeof C?v.addObserver(C,I,P):v.addObserver(C)}directlySetCurrentUser(v){var C=this;return(0,d.Z)(function*(){C.currentUser&&C.currentUser!==v&&C._currentUser._stopProactiveRefresh(),v&&C.isProactiveRefreshEnabled&&v._startProactiveRefresh(),C.currentUser=v,v?yield C.assertedPersistence.setCurrentUser(v):yield C.assertedPersistence.removeCurrentUser()})()}queue(v){return this.operations=this.operations.then(v,v),this.operations}get assertedPersistence(){return dt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(v){!v||this.frameworks.includes(v)||(this.frameworks.push(v),this.frameworks.sort(),this.clientVersion=_m(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var v=this;return(0,d.Z)(function*(){var C;const I={"X-Client-Version":v.clientVersion};v.app.options.appId&&(I["X-Firebase-gmpid"]=v.app.options.appId);const P=yield null===(C=v.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===C?void 0:C.getHeartbeatsHeader();P&&(I["X-Firebase-Client"]=P);const F=yield v._getAppCheckToken();return F&&(I["X-Firebase-AppCheck"]=F),I})()}_getAppCheckToken(){var v=this;return(0,d.Z)(function*(){var C;const I=yield null===(C=v.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===C?void 0:C.getToken();return(null==I?void 0:I.error)&&function Vi(w,...v){_l.logLevel<=bn.in.WARN&&_l.warn(`Auth (${z.SDK_VERSION}): ${w}`,...v)}(`Error while retrieving App Check token: ${I.error}`),null==I?void 0:I.token})()}}function kn(w){return(0,ee.m9)(w)}class LC{constructor(v){this.auth=v,this.observer=null,this.addObserver=(0,ee.ne)(C=>this.observer=C)}get next(){return dt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Wh(w,v,C){const I=kn(w);dt(I._canInitEmulator,I,"emulator-config-failed"),dt(/^https?:\/\//.test(v),I,"invalid-emulator-scheme");const P=!!(null==C?void 0:C.disableWarnings),F=Bu(v),{host:ie,port:ve}=function nv(w){const v=Bu(w),C=/(\/\/)?([^?#/]+)/.exec(w.substr(v.length));if(!C)return{host:"",port:null};const I=C[2].split("@").pop()||"",P=/^(\[[^\]]+\])(:|$)/.exec(I);if(P){const F=P[1];return{host:F,port:rv(I.substr(F.length+1))}}{const[F,ie]=I.split(":");return{host:F,port:rv(ie)}}}(v);I.config.emulator={url:`${F}//${ie}${null===ve?"":`:${ve}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:ie,port:ve,protocol:F.replace(":",""),options:Object.freeze({disableWarnings:P})}),P||function ti(){function w(){const v=document.createElement("p"),C=v.style;v.innerText="Running in emulator mode. Do not use with production credentials.",C.position="fixed",C.width="100%",C.backgroundColor="#ffffff",C.border=".1em solid #000000",C.color="#b50000",C.bottom="0px",C.left="0px",C.margin="0px",C.zIndex="10000",C.textAlign="center",v.classList.add("firebase-emulator-warning"),document.body.appendChild(v)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function Bu(w){const v=w.indexOf(":");return v<0?"":w.substr(0,v+1)}function rv(w){if(!w)return null;const v=Number(w);return isNaN(v)?null:v}class Dc{constructor(v,C){this.providerId=v,this.signInMethod=C}toJSON(){return Qs("not implemented")}_getIdTokenResponse(v){return Qs("not implemented")}_linkToIdToken(v,C){return Qs("not implemented")}_getReauthenticationResolver(v){return Qs("not implemented")}}function km(w,v){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,d.Z)(function*(w,v){return ni(w,"POST","/v1/accounts:resetPassword",Ss(w,v))})).apply(this,arguments)}function Hu(w,v){return br.apply(this,arguments)}function br(){return(br=(0,d.Z)(function*(w,v){return ni(w,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function sf(w,v){return nf.apply(this,arguments)}function nf(){return(nf=(0,d.Z)(function*(w,v){return ni(w,"POST","/v1/accounts:update",Ss(w,v))})).apply(this,arguments)}function Gd(w,v){return Om.apply(this,arguments)}function Om(){return(Om=(0,d.Z)(function*(w,v){return $s(w,"POST","/v1/accounts:signInWithPassword",Ss(w,v))})).apply(this,arguments)}function qh(w,v){return Mm.apply(this,arguments)}function Mm(){return(Mm=(0,d.Z)(function*(w,v){return ni(w,"POST","/v1/accounts:sendOobCode",Ss(w,v))})).apply(this,arguments)}function jn(w,v){return $h.apply(this,arguments)}function $h(){return($h=(0,d.Z)(function*(w,v){return qh(w,v)})).apply(this,arguments)}function Pm(w,v){return mn.apply(this,arguments)}function mn(){return(mn=(0,d.Z)(function*(w,v){return qh(w,v)})).apply(this,arguments)}function rf(w,v){return ju.apply(this,arguments)}function ju(){return(ju=(0,d.Z)(function*(w,v){return qh(w,v)})).apply(this,arguments)}function Yl(w,v){return zo.apply(this,arguments)}function zo(){return(zo=(0,d.Z)(function*(w,v){return qh(w,v)})).apply(this,arguments)}function Gh(){return(Gh=(0,d.Z)(function*(w,v){return $s(w,"POST","/v1/accounts:signInWithEmailLink",Ss(w,v))})).apply(this,arguments)}function ro(){return(ro=(0,d.Z)(function*(w,v){return $s(w,"POST","/v1/accounts:signInWithEmailLink",Ss(w,v))})).apply(this,arguments)}class kc extends Dc{constructor(v,C,I,P=null){super("password",I),this._email=v,this._password=C,this._tenantId=P}static _fromEmailAndPassword(v,C){return new kc(v,C,"password")}static _fromEmailAndCode(v,C,I=null){return new kc(v,C,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(v){const C="string"==typeof v?JSON.parse(v):v;if((null==C?void 0:C.email)&&(null==C?void 0:C.password)){if("password"===C.signInMethod)return this._fromEmailAndPassword(C.email,C.password);if("emailLink"===C.signInMethod)return this._fromEmailAndCode(C.email,C.password,C.tenantId)}return null}_getIdTokenResponse(v){var C=this;return(0,d.Z)(function*(){var I;switch(C.signInMethod){case"password":const P={returnSecureToken:!0,email:C._email,password:C._password,clientType:"CLIENT_TYPE_WEB"};if(null===(I=v._getRecaptchaConfig())||void 0===I?void 0:I.emailPasswordEnabled){const F=yield zh(v,P,"signInWithPassword");return Gd(v,F)}return Gd(v,P).catch(function(){var F=(0,d.Z)(function*(ie){if("auth/missing-recaptcha-token"===ie.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const ve=yield zh(v,P,"signInWithPassword");return Gd(v,ve)}return Promise.reject(ie)});return function(ie){return F.apply(this,arguments)}}());case"emailLink":return function Yd(w,v){return Gh.apply(this,arguments)}(v,{email:C._email,oobCode:C._password});default:Cs(v,"internal-error")}})()}_linkToIdToken(v,C){var I=this;return(0,d.Z)(function*(){switch(I.signInMethod){case"password":return Hu(v,{idToken:C,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function Kl(w,v){return ro.apply(this,arguments)}(v,{idToken:C,email:I._email,oobCode:I._password});default:Cs(v,"internal-error")}})()}_getReauthenticationResolver(v){return this._getIdTokenResponse(v)}}function xo(w,v){return of.apply(this,arguments)}function of(){return(of=(0,d.Z)(function*(w,v){return $s(w,"POST","/v1/accounts:signInWithIdp",Ss(w,v))})).apply(this,arguments)}class oo extends Dc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(v){const C=new oo(v.providerId,v.signInMethod);return v.idToken||v.accessToken?(v.idToken&&(C.idToken=v.idToken),v.accessToken&&(C.accessToken=v.accessToken),v.nonce&&!v.pendingToken&&(C.nonce=v.nonce),v.pendingToken&&(C.pendingToken=v.pendingToken)):v.oauthToken&&v.oauthTokenSecret?(C.accessToken=v.oauthToken,C.secret=v.oauthTokenSecret):Cs("argument-error"),C}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(v){const C="string"==typeof v?JSON.parse(v):v,{providerId:I,signInMethod:P}=C,F=Le(C,["providerId","signInMethod"]);if(!I||!P)return null;const ie=new oo(I,P);return ie.idToken=F.idToken||void 0,ie.accessToken=F.accessToken||void 0,ie.secret=F.secret,ie.nonce=F.nonce,ie.pendingToken=F.pendingToken||null,ie}_getIdTokenResponse(v){return xo(v,this.buildRequest())}_linkToIdToken(v,C){const I=this.buildRequest();return I.idToken=C,xo(v,I)}_getReauthenticationResolver(v){const C=this.buildRequest();return C.autoCreate=!1,xo(v,C)}buildRequest(){const v={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)v.pendingToken=this.pendingToken;else{const C={};this.idToken&&(C.id_token=this.idToken),this.accessToken&&(C.access_token=this.accessToken),this.secret&&(C.oauth_token_secret=this.secret),C.providerId=this.providerId,this.nonce&&!this.pendingToken&&(C.nonce=this.nonce),v.postBody=(0,ee.xO)(C)}return v}}function Kd(w,v){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,d.Z)(function*(w,v){return ni(w,"POST","/v1/accounts:sendVerificationCode",Ss(w,v))})).apply(this,arguments)}function Ta(){return(Ta=(0,d.Z)(function*(w,v){return $s(w,"POST","/v1/accounts:signInWithPhoneNumber",Ss(w,v))})).apply(this,arguments)}function Yh(){return(Yh=(0,d.Z)(function*(w,v){const C=yield $s(w,"POST","/v1/accounts:signInWithPhoneNumber",Ss(w,v));if(C.temporaryProof)throw Kr(w,"account-exists-with-different-credential",C);return C})).apply(this,arguments)}const zu={USER_NOT_FOUND:"user-not-found"};function af(){return(af=(0,d.Z)(function*(w,v){return $s(w,"POST","/v1/accounts:signInWithPhoneNumber",Ss(w,Object.assign(Object.assign({},v),{operation:"REAUTH"})),zu)})).apply(this,arguments)}class it extends Dc{constructor(v){super("phone","phone"),this.params=v}static _fromVerification(v,C){return new it({verificationId:v,verificationCode:C})}static _fromTokenResponse(v,C){return new it({phoneNumber:v,temporaryProof:C})}_getIdTokenResponse(v){return function Zd(w,v){return Ta.apply(this,arguments)}(v,this._makeVerificationRequest())}_linkToIdToken(v,C){return function Uu(w,v){return Yh.apply(this,arguments)}(v,Object.assign({idToken:C},this._makeVerificationRequest()))}_getReauthenticationResolver(v){return function Lm(w,v){return af.apply(this,arguments)}(v,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:v,phoneNumber:C,verificationId:I,verificationCode:P}=this.params;return v&&C?{temporaryProof:v,phoneNumber:C}:{sessionInfo:I,code:P}}toJSON(){const v={providerId:this.providerId};return this.params.phoneNumber&&(v.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(v.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(v.verificationCode=this.params.verificationCode),this.params.verificationId&&(v.verificationId=this.params.verificationId),v}static fromJSON(v){"string"==typeof v&&(v=JSON.parse(v));const{verificationId:C,verificationCode:I,phoneNumber:P,temporaryProof:F}=v;return I||C||P||F?new it({verificationId:C,verificationCode:I,phoneNumber:P,temporaryProof:F}):null}}class an{constructor(v){var C,I,P,F,ie,ve;const pt=(0,ee.zd)((0,ee.pd)(v)),Je=null!==(C=pt.apiKey)&&void 0!==C?C:null,Lt=null!==(I=pt.oobCode)&&void 0!==I?I:null,Ti=function Es(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(P=pt.mode)&&void 0!==P?P:null);dt(Je&&Lt&&Ti,"argument-error"),this.apiKey=Je,this.operation=Ti,this.code=Lt,this.continueUrl=null!==(F=pt.continueUrl)&&void 0!==F?F:null,this.languageCode=null!==(ie=pt.languageCode)&&void 0!==ie?ie:null,this.tenantId=null!==(ve=pt.tenantId)&&void 0!==ve?ve:null}static parseLink(v){const C=function Rm(w){const v=(0,ee.zd)((0,ee.pd)(w)).link,C=v?(0,ee.zd)((0,ee.pd)(v)).deep_link_id:null,I=(0,ee.zd)((0,ee.pd)(w)).deep_link_id;return(I?(0,ee.zd)((0,ee.pd)(I)).link:null)||I||C||v||w}(v);try{return new an(C)}catch(I){return null}}}let Kh=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(C,I){return kc._fromEmailAndPassword(C,I)}static credentialWithLink(C,I){const P=an.parseLink(I);return dt(P,"argument-error"),kc._fromEmailAndCode(C,P.code,P.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Zn{constructor(v){this.providerId=v,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(v){this.defaultLanguageCode=v}setCustomParameters(v){return this.customParameters=v,this}getCustomParameters(){return this.customParameters}}class Il extends Zn{constructor(){super(...arguments),this.scopes=[]}addScope(v){return this.scopes.includes(v)||this.scopes.push(v),this}getScopes(){return[...this.scopes]}}class lh extends Il{static credentialFromJSON(v){const C="string"==typeof v?JSON.parse(v):v;return dt("providerId"in C&&"signInMethod"in C,"argument-error"),oo._fromParams(C)}credential(v){return this._credential(Object.assign(Object.assign({},v),{nonce:v.rawNonce}))}_credential(v){return dt(v.idToken||v.accessToken,"argument-error"),oo._fromParams(Object.assign(Object.assign({},v),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(v){return lh.oauthCredentialFromTaggedObject(v)}static credentialFromError(v){return lh.oauthCredentialFromTaggedObject(v.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:C,oauthAccessToken:I,oauthTokenSecret:P,pendingToken:F,nonce:ie,providerId:ve}=v;if(!I&&!P&&!C&&!F||!ve)return null;try{return new lh(ve)._credential({idToken:C,accessToken:I,nonce:ie,pendingToken:F})}catch(pt){return null}}}let ov=(()=>{class w extends Il{constructor(){super("facebook.com")}static credential(C){return oo._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:C})}static credentialFromResult(C){return w.credentialFromTaggedObject(C)}static credentialFromError(C){return w.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C||!("oauthAccessToken"in C)||!C.oauthAccessToken)return null;try{return w.credential(C.oauthAccessToken)}catch(I){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),RC=(()=>{class w extends Il{constructor(){super("google.com"),this.addScope("profile")}static credential(C,I){return oo._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:C,accessToken:I})}static credentialFromResult(C){return w.credentialFromTaggedObject(C)}static credentialFromError(C){return w.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C)return null;const{oauthIdToken:I,oauthAccessToken:P}=C;if(!I&&!P)return null;try{return w.credential(I,P)}catch(F){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Zl=(()=>{class w extends Il{constructor(){super("github.com")}static credential(C){return oo._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:C})}static credentialFromResult(C){return w.credentialFromTaggedObject(C)}static credentialFromError(C){return w.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C||!("oauthAccessToken"in C)||!C.oauthAccessToken)return null;try{return w.credential(C.oauthAccessToken)}catch(I){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Xn extends Dc{constructor(v,C){super(v,v),this.pendingToken=C}_getIdTokenResponse(v){return xo(v,this.buildRequest())}_linkToIdToken(v,C){const I=this.buildRequest();return I.idToken=C,xo(v,I)}_getReauthenticationResolver(v){const C=this.buildRequest();return C.autoCreate=!1,xo(v,C)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(v){const C="string"==typeof v?JSON.parse(v):v,{providerId:I,signInMethod:P,pendingToken:F}=C;return I&&P&&F&&I===P?new Xn(I,F):null}static _create(v,C){return new Xn(v,C)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Wu extends Zn{constructor(v){dt(v.startsWith("saml."),"argument-error"),super(v)}static credentialFromResult(v){return Wu.samlCredentialFromTaggedObject(v)}static credentialFromError(v){return Wu.samlCredentialFromTaggedObject(v.customData||{})}static credentialFromJSON(v){const C=Xn.fromJSON(v);return dt(C,"argument-error"),C}static samlCredentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{pendingToken:C,providerId:I}=v;if(!C||!I)return null;try{return Xn._create(I,C)}catch(P){return null}}}let Oc=(()=>{class w extends Il{constructor(){super("twitter.com")}static credential(C,I){return oo._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:C,oauthTokenSecret:I})}static credentialFromResult(C){return w.credentialFromTaggedObject(C)}static credentialFromError(C){return w.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C)return null;const{oauthAccessToken:I,oauthTokenSecret:P}=C;if(!I||!P)return null;try{return w.credential(I,P)}catch(F){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Da(w,v){return qu.apply(this,arguments)}function qu(){return(qu=(0,d.Z)(function*(w,v){return $s(w,"POST","/v1/accounts:signUp",Ss(w,v))})).apply(this,arguments)}class ra{constructor(v){this.user=v.user,this.providerId=v.providerId,this._tokenResponse=v._tokenResponse,this.operationType=v.operationType}static _fromIdTokenResponse(v,C,I,P=!1){return(0,d.Z)(function*(){const F=yield _a._fromIdTokenResponse(v,I,P),ie=Nm(I);return new ra({user:F,providerId:ie,_tokenResponse:I,operationType:C})})()}static _forOperation(v,C,I){return(0,d.Z)(function*(){yield v._updateTokensIfNecessary(I,!0);const P=Nm(I);return new ra({user:v,providerId:P,_tokenResponse:I,operationType:C})})()}}function Nm(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function av(w){return tl.apply(this,arguments)}function tl(){return(tl=(0,d.Z)(function*(w){var v;const C=kn(w);if(yield C._initializationPromise,null===(v=C.currentUser)||void 0===v?void 0:v.isAnonymous)return new ra({user:C.currentUser,providerId:null,operationType:"signIn"});const I=yield Da(C,{returnSecureToken:!0}),P=yield ra._fromIdTokenResponse(C,"signIn",I,!0);return yield C._updateCurrentUser(P.user),P})).apply(this,arguments)}class Mc extends ee.ZR{constructor(v,C,I,P){var F;super(C.code,C.message),this.operationType=I,this.user=P,Object.setPrototypeOf(this,Mc.prototype),this.customData={appName:v.name,tenantId:null!==(F=v.tenantId)&&void 0!==F?F:void 0,_serverResponse:C.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(v,C,I,P){return new Mc(v,C,I,P)}}function $u(w,v,C,I){return("reauthenticate"===v?C._getReauthenticationResolver(w):C._getIdTokenResponse(w)).catch(F=>{throw"auth/multi-factor-auth-required"===F.code?Mc._fromErrorAndOperation(w,F,v,I):F})}function Gu(w){return new Set(w.map(({providerId:v})=>v).filter(v=>!!v))}function cf(w,v){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,d.Z)(function*(w,v){const C=(0,ee.m9)(w);yield Zh(!0,C,v);const{providerUserInfo:I}=yield W(C.auth,{idToken:yield C.getIdToken(),deleteProvider:[v]}),P=Gu(I||[]);return C.providerData=C.providerData.filter(F=>P.has(F.providerId)),P.has("phone")||(C.phoneNumber=null),yield C.auth._persistUserIfCurrent(C),C})).apply(this,arguments)}function Pc(w,v){return hf.apply(this,arguments)}function hf(){return(hf=(0,d.Z)(function*(w,v,C=!1){const I=yield Di(w,v._linkToIdToken(w.auth,yield w.getIdToken()),C);return ra._forOperation(w,"link",I)})).apply(this,arguments)}function Zh(w,v,C){return Xh.apply(this,arguments)}function Xh(){return(Xh=(0,d.Z)(function*(w,v,C){yield tt(v);const P=!1===w?"provider-already-linked":"no-such-provider";dt(Gu(v.providerData).has(C)===w,v.auth,P)})).apply(this,arguments)}function uf(w,v){return Un.apply(this,arguments)}function Un(){return(Un=(0,d.Z)(function*(w,v,C=!1){const{auth:I}=w,P="reauthenticate";try{const F=yield Di(w,$u(I,P,v,w),C);dt(F.idToken,I,"internal-error");const ie=yi(F.idToken);dt(ie,I,"internal-error");const{sub:ve}=ie;return dt(w.uid===ve,I,"user-mismatch"),ra._forOperation(w,P,F)}catch(F){throw"auth/user-not-found"===(null==F?void 0:F.code)&&Cs(I,"user-mismatch"),F}})).apply(this,arguments)}function lv(w,v){return Xd.apply(this,arguments)}function Xd(){return(Xd=(0,d.Z)(function*(w,v,C=!1){const I="signIn",P=yield $u(w,I,v),F=yield ra._fromIdTokenResponse(w,I,P);return C||(yield w._updateCurrentUser(F.user)),F})).apply(this,arguments)}function Cr(w,v){return Er.apply(this,arguments)}function Er(){return(Er=(0,d.Z)(function*(w,v){return lv(kn(w),v)})).apply(this,arguments)}function wn(w,v){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,d.Z)(function*(w,v){const C=(0,ee.m9)(w);return yield Zh(!1,C,v.providerId),Pc(C,v)})).apply(this,arguments)}function Qh(w,v){return Jh.apply(this,arguments)}function Jh(){return(Jh=(0,d.Z)(function*(w,v){return uf((0,ee.m9)(w),v)})).apply(this,arguments)}function Fm(w,v){return df.apply(this,arguments)}function df(){return(df=(0,d.Z)(function*(w,v){return $s(w,"POST","/v1/accounts:signInWithCustomToken",Ss(w,v))})).apply(this,arguments)}function NC(w,v){return eu.apply(this,arguments)}function eu(){return(eu=(0,d.Z)(function*(w,v){const C=kn(w),I=yield Fm(C,{token:v,returnSecureToken:!0}),P=yield ra._fromIdTokenResponse(C,"signIn",I);return yield C._updateCurrentUser(P.user),P})).apply(this,arguments)}class Xl{constructor(v,C){this.factorId=v,this.uid=C.mfaEnrollmentId,this.enrollmentTime=new Date(C.enrolledAt).toUTCString(),this.displayName=C.displayName}static _fromServerResponse(v,C){return"phoneInfo"in C?ch._fromServerResponse(v,C):"totpInfo"in C?tu._fromServerResponse(v,C):Cs(v,"internal-error")}}class ch extends Xl{constructor(v){super("phone",v),this.phoneNumber=v.phoneInfo}static _fromServerResponse(v,C){return new ch(C)}}class tu extends Xl{constructor(v){super("totp",v)}static _fromServerResponse(v,C){return new tu(C)}}function iu(w,v,C){var I;dt((null===(I=C.url)||void 0===I?void 0:I.length)>0,w,"invalid-continue-uri"),dt(void 0===C.dynamicLinkDomain||C.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),v.continueUrl=C.url,v.dynamicLinkDomain=C.dynamicLinkDomain,v.canHandleCodeInApp=C.handleCodeInApp,C.iOS&&(dt(C.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),v.iOSBundleId=C.iOS.bundleId),C.android&&(dt(C.android.packageName.length>0,w,"missing-android-pkg-name"),v.androidInstallApp=C.android.installApp,v.androidMinimumVersionCode=C.android.minimumVersion,v.androidPackageName=C.android.packageName)}function Bm(w,v,C){return il.apply(this,arguments)}function il(){return il=(0,d.Z)(function*(w,v,C){var I;const P=kn(w),F={requestType:"PASSWORD_RESET",email:v,clientType:"CLIENT_TYPE_WEB"};if(null===(I=P._getRecaptchaConfig())||void 0===I?void 0:I.emailPasswordEnabled){const ie=yield zh(P,F,"getOobCode",!0);C&&iu(P,ie,C),yield Pm(P,ie)}else C&&iu(P,F,C),yield Pm(P,F).catch(function(){var ie=(0,d.Z)(function*(ve){if("auth/missing-recaptcha-token"!==ve.code)return Promise.reject(ve);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const pt=yield zh(P,F,"getOobCode",!0);C&&iu(P,pt,C),yield Pm(P,pt)}});return function(ve){return ie.apply(this,arguments)}}())}),il.apply(this,arguments)}function su(w,v,C){return Vm.apply(this,arguments)}function Vm(){return(Vm=(0,d.Z)(function*(w,v,C){yield km((0,ee.m9)(w),{oobCode:v,newPassword:C})})).apply(this,arguments)}function Hm(w,v){return nu.apply(this,arguments)}function nu(){return(nu=(0,d.Z)(function*(w,v){yield sf((0,ee.m9)(w),{oobCode:v})})).apply(this,arguments)}function Qd(w,v){return jm.apply(this,arguments)}function jm(){return(jm=(0,d.Z)(function*(w,v){const C=(0,ee.m9)(w),I=yield km(C,{oobCode:v}),P=I.requestType;switch(dt(P,C,"internal-error"),P){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":dt(I.newEmail,C,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":dt(I.mfaInfo,C,"internal-error");default:dt(I.email,C,"internal-error")}let F=null;return I.mfaInfo&&(F=Xl._fromServerResponse(kn(C),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:F},operation:P}})).apply(this,arguments)}function FC(w,v){return cv.apply(this,arguments)}function cv(){return(cv=(0,d.Z)(function*(w,v){const{data:C}=yield Qd((0,ee.m9)(w),v);return C.email})).apply(this,arguments)}function BC(w,v,C){return ru.apply(this,arguments)}function ru(){return ru=(0,d.Z)(function*(w,v,C){var I;const P=kn(w),F={returnSecureToken:!0,email:v,password:C,clientType:"CLIENT_TYPE_WEB"};let ie;if(null===(I=P._getRecaptchaConfig())||void 0===I?void 0:I.emailPasswordEnabled){const Je=yield zh(P,F,"signUpPassword");ie=Da(P,Je)}else ie=Da(P,F).catch(function(){var Je=(0,d.Z)(function*(Lt){if("auth/missing-recaptcha-token"===Lt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Ti=yield zh(P,F,"signUpPassword");return Da(P,Ti)}return Promise.reject(Lt)});return function(Lt){return Je.apply(this,arguments)}}());const ve=yield ie.catch(Je=>Promise.reject(Je)),pt=yield ra._fromIdTokenResponse(P,"signIn",ve);return yield P._updateCurrentUser(pt.user),pt}),ru.apply(this,arguments)}function hh(w,v,C){return Cr((0,ee.m9)(w),Kh.credential(v,C))}function ln(w,v,C){return _i.apply(this,arguments)}function _i(){return _i=(0,d.Z)(function*(w,v,C){var I;const P=kn(w),F={requestType:"EMAIL_SIGNIN",email:v,clientType:"CLIENT_TYPE_WEB"};function ie(ve,pt){dt(pt.handleCodeInApp,P,"argument-error"),pt&&iu(P,ve,pt)}if(null===(I=P._getRecaptchaConfig())||void 0===I?void 0:I.emailPasswordEnabled){const ve=yield zh(P,F,"getOobCode",!0);ie(ve,C),yield rf(P,ve)}else ie(F,C),yield rf(P,F).catch(function(){var ve=(0,d.Z)(function*(pt){if("auth/missing-recaptcha-token"!==pt.code)return Promise.reject(pt);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Je=yield zh(P,F,"getOobCode",!0);ie(Je,C),yield rf(P,Je)}});return function(pt){return ve.apply(this,arguments)}}())}),_i.apply(this,arguments)}function To(w,v){const C=an.parseLink(v);return"EMAIL_SIGNIN"===(null==C?void 0:C.operation)}function wr(w,v,C){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,d.Z)(function*(w,v,C){const I=(0,ee.m9)(w),P=Kh.credentialWithLink(v,C||Yi());return dt(P._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Cr(I,P)})).apply(this,arguments)}function Lc(w,v){return or.apply(this,arguments)}function or(){return(or=(0,d.Z)(function*(w,v){return ni(w,"POST","/v1/accounts:createAuthUri",Ss(w,v))})).apply(this,arguments)}function Fr(w,v){return ao.apply(this,arguments)}function ao(){return(ao=(0,d.Z)(function*(w,v){const I={identifier:v,continueUri:di()?Yi():"http://localhost"},{signinMethods:P}=yield Lc((0,ee.m9)(w),I);return P||[]})).apply(this,arguments)}function Qi(w,v){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,d.Z)(function*(w,v){const C=(0,ee.m9)(w),P={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};v&&iu(C.auth,P,v);const{email:F}=yield jn(C.auth,P);F!==w.email&&(yield w.reload())})).apply(this,arguments)}function Xu(w,v,C){return oa.apply(this,arguments)}function oa(){return(oa=(0,d.Z)(function*(w,v,C){const I=(0,ee.m9)(w),F={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:v};C&&iu(I.auth,F,C);const{email:ie}=yield Yl(I.auth,F);ie!==w.email&&(yield w.reload())})).apply(this,arguments)}function hv(w,v){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,d.Z)(function*(w,v){return ni(w,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function Jd(w,v){return ou.apply(this,arguments)}function ou(){return(ou=(0,d.Z)(function*(w,{displayName:v,photoURL:C}){if(void 0===v&&void 0===C)return;const I=(0,ee.m9)(w),F={idToken:yield I.getIdToken(),displayName:v,photoUrl:C,returnSecureToken:!0},ie=yield Di(I,hv(I.auth,F));I.displayName=ie.displayName||null,I.photoURL=ie.photoUrl||null;const ve=I.providerData.find(({providerId:pt})=>"password"===pt);ve&&(ve.displayName=I.displayName,ve.photoURL=I.photoURL),yield I._updateTokensIfNecessary(ie)})).apply(this,arguments)}function Qu(w,v){return xl((0,ee.m9)(w),v,null)}function Ju(w,v){return xl((0,ee.m9)(w),null,v)}function xl(w,v,C){return ep.apply(this,arguments)}function ep(){return(ep=(0,d.Z)(function*(w,v,C){const{auth:I}=w,F={idToken:yield w.getIdToken(),returnSecureToken:!0};v&&(F.email=v),C&&(F.password=C);const ie=yield Di(w,Hu(I,F));yield w._updateTokensIfNecessary(ie,!0)})).apply(this,arguments)}class uh{constructor(v,C,I={}){this.isNewUser=v,this.providerId=C,this.profile=I}}class au extends uh{constructor(v,C,I,P){super(v,C,I),this.username=P}}class Um extends uh{constructor(v,C){super(v,"facebook.com",C)}}class uv extends au{constructor(v,C){super(v,"github.com",C,"string"==typeof(null==C?void 0:C.login)?null==C?void 0:C.login:null)}}class pf extends uh{constructor(v,C){super(v,"google.com",C)}}class sl extends au{constructor(v,C,I){super(v,"twitter.com",C,I)}}function Sr(w){const{user:v,_tokenResponse:C}=w;return v.isAnonymous&&!C?{providerId:null,isNewUser:!1,profile:null}:function tp(w){var v,C;if(!w)return null;const{providerId:I}=w,P=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},F=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!I&&(null==w?void 0:w.idToken)){const ie=null===(C=null===(v=yi(w.idToken))||void 0===v?void 0:v.firebase)||void 0===C?void 0:C.sign_in_provider;if(ie)return new uh(F,"anonymous"!==ie&&"custom"!==ie?ie:null)}if(!I)return null;switch(I){case"facebook.com":return new Um(F,P);case"github.com":return new uv(F,P);case"google.com":return new pf(F,P);case"twitter.com":return new sl(F,P,w.screenName||null);case"custom":case"anonymous":return new uh(F,null);default:return new uh(F,I,P)}}(C)}class Nc{constructor(v,C,I){this.type=v,this.credential=C,this.auth=I}static _fromIdtoken(v,C){return new Nc("enroll",v,C)}static _fromMfaPendingCredential(v){return new Nc("signin",v)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(v){var C,I;if(null==v?void 0:v.multiFactorSession){if(null===(C=v.multiFactorSession)||void 0===C?void 0:C.pendingCredential)return Nc._fromMfaPendingCredential(v.multiFactorSession.pendingCredential);if(null===(I=v.multiFactorSession)||void 0===I?void 0:I.idToken)return Nc._fromIdtoken(v.multiFactorSession.idToken)}return null}}class Fc{constructor(v,C,I){this.session=v,this.hints=C,this.signInResolver=I}static _fromError(v,C){const I=kn(v),P=C.customData._serverResponse,F=(P.mfaInfo||[]).map(ve=>Xl._fromServerResponse(I,ve));dt(P.mfaPendingCredential,I,"internal-error");const ie=Nc._fromMfaPendingCredential(P.mfaPendingCredential);return new Fc(ie,F,function(){var ve=(0,d.Z)(function*(pt){const Je=yield pt._process(I,ie);delete P.mfaInfo,delete P.mfaPendingCredential;const Lt=Object.assign(Object.assign({},P),{idToken:Je.idToken,refreshToken:Je.refreshToken});switch(C.operationType){case"signIn":const Ti=yield ra._fromIdTokenResponse(I,C.operationType,Lt);return yield I._updateCurrentUser(Ti.user),Ti;case"reauthenticate":return dt(C.user,I,"internal-error"),ra._forOperation(C.user,C.operationType,Lt);default:Cs(I,"internal-error")}});return function(pt){return ve.apply(this,arguments)}}())}resolveSignIn(v){var C=this;return(0,d.Z)(function*(){return C.signInResolver(v)})()}}function VC(w,v){var C;const I=(0,ee.m9)(w),P=v;return dt(v.customData.operationType,I,"argument-error"),dt(null===(C=P.customData._serverResponse)||void 0===C?void 0:C.mfaPendingCredential,I,"argument-error"),Fc._fromError(I,P)}function HC(w,v){return ni(w,"POST","/v2/accounts/mfaEnrollment:start",Ss(w,v))}class td{constructor(v){this.user=v,this.enrolledFactors=[],v._onReload(C=>{C.mfaInfo&&(this.enrolledFactors=C.mfaInfo.map(I=>Xl._fromServerResponse(v.auth,I)))})}static _fromUser(v){return new td(v)}getSession(){var v=this;return(0,d.Z)(function*(){return Nc._fromIdtoken(yield v.user.getIdToken(),v.user.auth)})()}enroll(v,C){var I=this;return(0,d.Z)(function*(){const P=v,F=yield I.getSession(),ie=yield Di(I.user,P._process(I.user.auth,F,C));return yield I.user._updateTokensIfNecessary(ie),I.user.reload()})()}unenroll(v){var C=this;return(0,d.Z)(function*(){const I="string"==typeof v?v:v.uid,P=yield C.user.getIdToken();try{const F=yield Di(C.user,function dv(w,v){return ni(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Ss(w,v))}(C.user.auth,{idToken:P,mfaEnrollmentId:I}));C.enrolledFactors=C.enrolledFactors.filter(({uid:ie})=>ie!==I),yield C.user._updateTokensIfNecessary(F),yield C.user.reload()}catch(F){throw F}})()}}const id=new WeakMap;function qm(w){const v=(0,ee.m9)(w);return id.has(v)||id.set(v,td._fromUser(v)),id.get(v)}const sp="__sak";class cu{constructor(v,C){this.storageRetriever=v,this.type=C}_isAvailable(){try{return this.storage?(this.storage.setItem(sp,"1"),this.storage.removeItem(sp),Promise.resolve(!0)):Promise.resolve(!1)}catch(v){return Promise.resolve(!1)}}_set(v,C){return this.storage.setItem(v,JSON.stringify(C)),Promise.resolve()}_get(v){const C=this.storage.getItem(v);return Promise.resolve(C?JSON.parse(C):null)}_remove(v){return this.storage.removeItem(v),Promise.resolve()}get storage(){return this.storageRetriever()}}const pv=(()=>{class w extends cu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(C,I)=>this.onStorageEvent(C,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function $m(){const w=(0,ee.z$)();return no(w)||oh(w)}()&&function OC(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=Jp(),this._shouldAllowMigration=!0}forAllChangedKeys(C){for(const I of Object.keys(this.listeners)){const P=this.storage.getItem(I),F=this.localCache[I];P!==F&&C(I,F,P)}}onStorageEvent(C,I=!1){if(!C.key)return void this.forAllChangedKeys((ve,pt,Je)=>{this.notifyListeners(ve,Je)});const P=C.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ve=this.storage.getItem(P);if(C.newValue!==ve)null!==C.newValue?this.storage.setItem(P,C.newValue):this.storage.removeItem(P);else if(this.localCache[P]===C.newValue&&!I)return}const F=()=>{const ve=this.storage.getItem(P);!I&&this.localCache[P]===ve||this.notifyListeners(P,ve)},ie=this.storage.getItem(P);!function na(){return(0,ee.w1)()&&10===document.documentMode}()||ie===C.newValue||C.newValue===C.oldValue?F():setTimeout(F,10)}notifyListeners(C,I){this.localCache[C]=I;const P=this.listeners[C];if(P)for(const F of Array.from(P))F(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((C,I,P)=>{this.onStorageEvent(new StorageEvent("storage",{key:C,oldValue:I,newValue:P}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(C,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[C]||(this.listeners[C]=new Set,this.localCache[C]=this.storage.getItem(C)),this.listeners[C].add(I)}_removeListener(C,I){this.listeners[C]&&(this.listeners[C].delete(I),0===this.listeners[C].size&&delete this.listeners[C]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(C,I){var P=()=>super._set,F=this;return(0,d.Z)(function*(){yield P().call(F,C,I),F.localCache[C]=JSON.stringify(I)})()}_get(C){var I=()=>super._get,P=this;return(0,d.Z)(function*(){const F=yield I().call(P,C);return P.localCache[C]=JSON.stringify(F),F})()}_remove(C){var I=()=>super._remove,P=this;return(0,d.Z)(function*(){yield I().call(P,C),delete P.localCache[C]})()}}return w.type="LOCAL",w})(),aa=(()=>{class w extends cu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(C,I){}_removeListener(C,I){}}return w.type="SESSION",w})();let rl=(()=>{class w{constructor(C){this.eventTarget=C,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(C){const I=this.receivers.find(F=>F.isListeningto(C));if(I)return I;const P=new w(C);return this.receivers.push(P),P}isListeningto(C){return this.eventTarget===C}handleEvent(C){var I=this;return(0,d.Z)(function*(){const P=C,{eventId:F,eventType:ie,data:ve}=P.data,pt=I.handlersMap[ie];if(!(null==pt?void 0:pt.size))return;P.ports[0].postMessage({status:"ack",eventId:F,eventType:ie});const Je=Array.from(pt).map(function(){var Ti=(0,d.Z)(function*(us){return us(P.origin,ve)});return function(us){return Ti.apply(this,arguments)}}()),Lt=yield function nl(w){return Promise.all(w.map(function(){var v=(0,d.Z)(function*(C){try{return{fulfilled:!0,value:yield C}}catch(I){return{fulfilled:!1,reason:I}}});return function(C){return v.apply(this,arguments)}}()))}(Je);P.ports[0].postMessage({status:"done",eventId:F,eventType:ie,response:Lt})})()}_subscribe(C,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[C]||(this.handlersMap[C]=new Set),this.handlersMap[C].add(I)}_unsubscribe(C,I){this.handlersMap[C]&&I&&this.handlersMap[C].delete(I),(!I||0===this.handlersMap[C].size)&&delete this.handlersMap[C],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function ar(w="",v=10){let C="";for(let I=0;I<v;I++)C+=Math.floor(10*Math.random());return w+C}class sd{constructor(v){this.target=v,this.handlers=new Set}removeMessageHandler(v){v.messageChannel&&(v.messageChannel.port1.removeEventListener("message",v.onMessage),v.messageChannel.port1.close()),this.handlers.delete(v)}_send(v,C,I=50){var P=this;return(0,d.Z)(function*(){const F="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!F)throw new Error("connection_unavailable");let ie,ve;return new Promise((pt,Je)=>{const Lt=ar("",20);F.port1.start();const Ti=setTimeout(()=>{Je(new Error("unsupported_event"))},I);ve={messageChannel:F,onMessage(us){const Ys=us;if(Ys.data.eventId===Lt)switch(Ys.data.status){case"ack":clearTimeout(Ti),ie=setTimeout(()=>{Je(new Error("timeout"))},3e3);break;case"done":clearTimeout(ie),pt(Ys.data.response);break;default:clearTimeout(Ti),clearTimeout(ie),Je(new Error("invalid_response"))}}},P.handlers.add(ve),F.port1.addEventListener("message",ve.onMessage),P.target.postMessage({eventType:v,eventId:Lt,data:C},[F.port2])}).finally(()=>{ve&&P.removeMessageHandler(ve)})})()}}function Jn(){return window}function nd(){return void 0!==Jn().WorkerGlobalScope&&"function"==typeof Jn().importScripts}function np(){return(np=(0,d.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const rp="firebaseLocalStorageDb",op="firebaseLocalStorage",rd="fbase_key";class od{constructor(v){this.request=v}toPromise(){return new Promise((v,C)=>{this.request.addEventListener("success",()=>{v(this.request.result)}),this.request.addEventListener("error",()=>{C(this.request.error)})})}}function uu(w,v){return w.transaction([op],v?"readwrite":"readonly").objectStore(op)}function ad(){const w=indexedDB.open(rp,1);return new Promise((v,C)=>{w.addEventListener("error",()=>{C(w.error)}),w.addEventListener("upgradeneeded",()=>{const I=w.result;try{I.createObjectStore(op,{keyPath:rd})}catch(P){C(P)}}),w.addEventListener("success",(0,d.Z)(function*(){const I=w.result;I.objectStoreNames.contains(op)?v(I):(I.close(),yield function Ym(){const w=indexedDB.deleteDatabase(rp);return new od(w).toPromise()}(),v(yield ad()))}))})}function dh(w,v,C){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,d.Z)(function*(w,v,C){const I=uu(w,!0).put({[rd]:v,value:C});return new od(I).toPromise()})).apply(this,arguments)}function Vc(){return(Vc=(0,d.Z)(function*(w,v){const C=uu(w,!1).get(v),I=yield new od(C).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function du(w,v){const C=uu(w,!0).delete(v);return new od(C).toPromise()}const ka=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var C=this;return(0,d.Z)(function*(){return C.db||(C.db=yield ad()),C.db})()}_withRetries(C){var I=this;return(0,d.Z)(function*(){let P=0;for(;;)try{const F=yield I._openDb();return yield C(F)}catch(F){if(P++>3)throw F;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var C=this;return(0,d.Z)(function*(){return nd()?C.initializeReceiver():C.initializeSender()})()}initializeReceiver(){var C=this;return(0,d.Z)(function*(){C.receiver=rl._getInstance(function Ao(){return nd()?self:null}()),C.receiver._subscribe("keyChanged",function(){var I=(0,d.Z)(function*(P,F){return{keyProcessed:(yield C._poll()).includes(F.key)}});return function(P,F){return I.apply(this,arguments)}}()),C.receiver._subscribe("ping",function(){var I=(0,d.Z)(function*(P,F){return["keyChanged"]});return function(P,F){return I.apply(this,arguments)}}())})()}initializeSender(){var C=this;return(0,d.Z)(function*(){var I,P;if(C.activeServiceWorker=yield function mv(){return np.apply(this,arguments)}(),!C.activeServiceWorker)return;C.sender=new sd(C.activeServiceWorker);const F=yield C.sender._send("ping",{},800);!F||(null===(I=F[0])||void 0===I?void 0:I.fulfilled)&&(null===(P=F[0])||void 0===P?void 0:P.value.includes("keyChanged"))&&(C.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(C){var I=this;return(0,d.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function hu(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:C},I.serviceWorkerReceiverAvailable?800:50)}catch(P){}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const C=yield ad();return yield dh(C,sp,"1"),yield du(C,sp),!0}catch(C){}return!1})()}_withPendingWrite(C){var I=this;return(0,d.Z)(function*(){I.pendingWrites++;try{yield C()}finally{I.pendingWrites--}})()}_set(C,I){var P=this;return(0,d.Z)(function*(){return P._withPendingWrite((0,d.Z)(function*(){return yield P._withRetries(F=>dh(F,C,I)),P.localCache[C]=I,P.notifyServiceWorker(C)}))})()}_get(C){var I=this;return(0,d.Z)(function*(){const P=yield I._withRetries(F=>function ap(w,v){return Vc.apply(this,arguments)}(F,C));return I.localCache[C]=P,P})()}_remove(C){var I=this;return(0,d.Z)(function*(){return I._withPendingWrite((0,d.Z)(function*(){return yield I._withRetries(P=>du(P,C)),delete I.localCache[C],I.notifyServiceWorker(C)}))})()}_poll(){var C=this;return(0,d.Z)(function*(){const I=yield C._withRetries(ie=>{const ve=uu(ie,!1).getAll();return new od(ve).toPromise()});if(!I)return[];if(0!==C.pendingWrites)return[];const P=[],F=new Set;for(const{fbase_key:ie,value:ve}of I)F.add(ie),JSON.stringify(C.localCache[ie])!==JSON.stringify(ve)&&(C.notifyListeners(ie,ve),P.push(ie));for(const ie of Object.keys(C.localCache))C.localCache[ie]&&!F.has(ie)&&(C.notifyListeners(ie,null),P.push(ie));return P})()}notifyListeners(C,I){this.localCache[C]=I;const P=this.listeners[C];if(P)for(const F of Array.from(P))F(I)}startPolling(){var C=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return C._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(C,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[C]||(this.listeners[C]=new Set,this._get(C)),this.listeners[C].add(I)}_removeListener(C,I){this.listeners[C]&&(this.listeners[C].delete(I),0===this.listeners[C].size&&delete this.listeners[C]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Km(w,v){return ni(w,"POST","/v2/accounts/mfaSignIn:start",Ss(w,v))}const Br=1e12;class Al{constructor(v){this.auth=v,this.counter=Br,this._widgets=new Map}render(v,C){const I=this.counter;return this._widgets.set(I,new Vr(v,this.auth.name,C||{})),this.counter++,I}reset(v){var C;const I=v||Br;null===(C=this._widgets.get(I))||void 0===C||C.delete(),this._widgets.delete(I)}getResponse(v){var C;return(null===(C=this._widgets.get(v||Br))||void 0===C?void 0:C.getResponse())||""}execute(v){var C=this;return(0,d.Z)(function*(){var I;return null===(I=C._widgets.get(v||Br))||void 0===I||I.execute(),""})()}}class Vr{constructor(v,C,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const P="string"==typeof v?document.getElementById(v):v;dt(P,"argument-error",{appName:C}),this.container=P,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function vf(w){const v=[],C="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<w;I++)v.push(C.charAt(Math.floor(Math.random()*C.length)));return v.join("")}(50);const{callback:v,"expired-callback":C}=this.params;if(v)try{v(this.responseToken)}catch(I){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,C)try{C()}catch(I){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Zm=iv("rcb"),bf=new es(3e4,6e4);class fh{constructor(){var v;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(v=Jn().grecaptcha)||void 0===v?void 0:v.render)}load(v,C=""){return dt(function Do(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(C),v,"argument-error"),this.shouldResolveImmediately(C)&&Jy(Jn().grecaptcha)?Promise.resolve(Jn().grecaptcha):new Promise((I,P)=>{const F=Jn().setTimeout(()=>{P(Zi(v,"network-request-failed"))},bf.get());Jn()[Zm]=()=>{Jn().clearTimeout(F),delete Jn()[Zm];const ve=Jn().grecaptcha;if(!ve||!Jy(ve))return void P(Zi(v,"internal-error"));const pt=ve.render;ve.render=(Je,Lt)=>{const Ti=pt(Je,Lt);return this.counter++,Ti},this.hostLanguage=C,I(ve)},tv(`https://www.google.com/recaptcha/api.js??${(0,ee.xO)({onload:Zm,render:"explicit",hl:C})}`).catch(()=>{clearTimeout(F),P(Zi(v,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(v){var C;return!!(null===(C=Jn().grecaptcha)||void 0===C?void 0:C.render)&&(v===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class jC{load(v){return(0,d.Z)(function*(){return new Al(v)})()}clearedOneInstance(){}}const la="recaptcha",ol={theme:"light",type:"image"};class hd{constructor(v,C=Object.assign({},ol),I){this.parameters=C,this.type=la,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=kn(I),this.isInvisible="invisible"===this.parameters.size,dt("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const P="string"==typeof v?document.getElementById(v):v;dt(P,this.auth,"argument-error"),this.container=P,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new jC:new fh,this.validateStartingState()}verify(){var v=this;return(0,d.Z)(function*(){v.assertNotDestroyed();const C=yield v.render(),I=v.getAssertedRecaptcha();return I.getResponse(C)||new Promise(F=>{const ie=ve=>{!ve||(v.tokenChangeListeners.delete(ie),F(ve))};v.tokenChangeListeners.add(ie),v.isInvisible&&I.execute(C)})})()}render(){try{this.assertNotDestroyed()}catch(v){return Promise.reject(v)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(v=>{throw this.renderPromise=null,v})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(v=>{this.container.removeChild(v)})}validateStartingState(){dt(!this.parameters.sitekey,this.auth,"argument-error"),dt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),dt("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(v){return C=>{if(this.tokenChangeListeners.forEach(I=>I(C)),"function"==typeof v)v(C);else if("string"==typeof v){const I=Jn()[v];"function"==typeof I&&I(C)}}}assertNotDestroyed(){dt(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var v=this;return(0,d.Z)(function*(){if(yield v.init(),!v.widgetId){let C=v.container;if(!v.isInvisible){const I=document.createElement("div");C.appendChild(I),C=I}v.widgetId=v.getAssertedRecaptcha().render(C,v.parameters)}return v.widgetId})()}init(){var v=this;return(0,d.Z)(function*(){dt(di()&&!nd(),v.auth,"internal-error"),yield function mu(){let w=null;return new Promise(v=>{"complete"!==document.readyState?(w=()=>v(),window.addEventListener("load",w)):v()}).catch(v=>{throw w&&window.removeEventListener("load",w),v})}(),v.recaptcha=yield v._recaptchaLoader.load(v.auth,v.auth.languageCode||void 0);const C=yield function Qa(w){return Io.apply(this,arguments)}(v.auth);dt(C,v.auth,"internal-error"),v.parameters.sitekey=C})()}getAssertedRecaptcha(){return dt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Xm{constructor(v,C){this.verificationId=v,this.onConfirmation=C}confirm(v){const C=it._fromVerification(this.verificationId,v);return this.onConfirmation(C)}}function gv(w,v,C){return ud.apply(this,arguments)}function ud(){return(ud=(0,d.Z)(function*(w,v,C){const I=kn(w),P=yield Dl(I,v,(0,ee.m9)(C));return new Xm(P,F=>Cr(I,F))})).apply(this,arguments)}function Cf(w,v,C){return dd.apply(this,arguments)}function dd(){return(dd=(0,d.Z)(function*(w,v,C){const I=(0,ee.m9)(w);yield Zh(!1,I,"phone");const P=yield Dl(I.auth,v,(0,ee.m9)(C));return new Xm(P,F=>wn(I,F))})).apply(this,arguments)}function Qm(w,v,C){return cp.apply(this,arguments)}function cp(){return(cp=(0,d.Z)(function*(w,v,C){const I=(0,ee.m9)(w),P=yield Dl(I.auth,v,(0,ee.m9)(C));return new Xm(P,F=>Qh(I,F))})).apply(this,arguments)}function Dl(w,v,C){return mh.apply(this,arguments)}function mh(){return(mh=(0,d.Z)(function*(w,v,C){var I;const P=yield C.verify();try{let F;if(dt("string"==typeof P,w,"argument-error"),dt(C.type===la,w,"argument-error"),F="string"==typeof v?{phoneNumber:v}:v,"session"in F){const ie=F.session;if("phoneNumber"in F)return dt("enroll"===ie.type,w,"internal-error"),(yield HC(w,{idToken:ie.credential,phoneEnrollmentInfo:{phoneNumber:F.phoneNumber,recaptchaToken:P}})).phoneSessionInfo.sessionInfo;{dt("signin"===ie.type,w,"internal-error");const ve=(null===(I=F.multiFactorHint)||void 0===I?void 0:I.uid)||F.multiFactorUid;return dt(ve,w,"missing-multi-factor-info"),(yield Km(w,{mfaPendingCredential:ie.credential,mfaEnrollmentId:ve,phoneSignInInfo:{recaptchaToken:P}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ie}=yield Kd(w,{phoneNumber:F.phoneNumber,recaptchaToken:P});return ie}}finally{C._reset()}})).apply(this,arguments)}function yv(w,v){return Jm.apply(this,arguments)}function Jm(){return(Jm=(0,d.Z)(function*(w,v){yield Pc((0,ee.m9)(w),v)})).apply(this,arguments)}let eg=(()=>{class w{constructor(C){this.providerId=w.PROVIDER_ID,this.auth=kn(C)}verifyPhoneNumber(C,I){return Dl(this.auth,C,(0,ee.m9)(I))}static credential(C,I){return it._fromVerification(C,I)}static credentialFromResult(C){return w.credentialFromTaggedObject(C)}static credentialFromError(C){return w.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C)return null;const{phoneNumber:I,temporaryProof:P}=C;return I&&P?it._fromTokenResponse(I,P):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function gh(w,v){return v?jo(v):(dt(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class as extends Dc{constructor(v){super("custom","custom"),this.params=v}_getIdTokenResponse(v){return xo(v,this._buildIdpRequest())}_linkToIdToken(v,C){return xo(v,this._buildIdpRequest(C))}_getReauthenticationResolver(v){return xo(v,this._buildIdpRequest())}_buildIdpRequest(v){const C={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return v&&(C.idToken=v),C}}function tg(w){return lv(w.auth,new as(w),w.bypassAuthState)}function gu(w){const{auth:v,user:C}=w;return dt(C,v,"internal-error"),uf(C,new as(w),w.bypassAuthState)}function Ef(w){return ic.apply(this,arguments)}function ic(){return(ic=(0,d.Z)(function*(w){const{auth:v,user:C}=w;return dt(C,v,"internal-error"),Pc(C,new as(w),w.bypassAuthState)})).apply(this,arguments)}class hp{constructor(v,C,I,P,F=!1){this.auth=v,this.resolver=I,this.user=P,this.bypassAuthState=F,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(C)?C:[C]}execute(){var v=this;return new Promise(function(){var C=(0,d.Z)(function*(I,P){v.pendingPromise={resolve:I,reject:P};try{v.eventManager=yield v.resolver._initialize(v.auth),yield v.onExecution(),v.eventManager.registerConsumer(v)}catch(F){v.reject(F)}});return function(I,P){return C.apply(this,arguments)}}())}onAuthEvent(v){var C=this;return(0,d.Z)(function*(){const{urlResponse:I,sessionId:P,postBody:F,tenantId:ie,error:ve,type:pt}=v;if(ve)return void C.reject(ve);const Je={auth:C.auth,requestUri:I,sessionId:P,tenantId:ie||void 0,postBody:F||void 0,user:C.user,bypassAuthState:C.bypassAuthState};try{C.resolve(yield C.getIdpTask(pt)(Je))}catch(Lt){C.reject(Lt)}})()}onError(v){this.reject(v)}getIdpTask(v){switch(v){case"signInViaPopup":case"signInViaRedirect":return tg;case"linkViaPopup":case"linkViaRedirect":return Ef;case"reauthViaPopup":case"reauthViaRedirect":return gu;default:Cs(this.auth,"internal-error")}}resolve(v){Cn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(v),this.unregisterAndCleanUp()}reject(v){Cn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(v),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Hc=new es(2e3,1e4);function wf(w,v,C){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,d.Z)(function*(w,v,C){const I=kn(w);Sa(w,v,Zn);const P=gh(I,C);return new Ir(I,"signInViaPopup",v,P).executeNotNull()})).apply(this,arguments)}function Sf(w,v,C){return sc.apply(this,arguments)}function sc(){return(sc=(0,d.Z)(function*(w,v,C){const I=(0,ee.m9)(w);Sa(I.auth,v,Zn);const P=gh(I.auth,C);return new Ir(I.auth,"reauthViaPopup",v,P,I).executeNotNull()})).apply(this,arguments)}function yu(w,v,C){return pd.apply(this,arguments)}function pd(){return(pd=(0,d.Z)(function*(w,v,C){const I=(0,ee.m9)(w);Sa(I.auth,v,Zn);const P=gh(I.auth,C);return new Ir(I.auth,"linkViaPopup",v,P,I).executeNotNull()})).apply(this,arguments)}let Ir=(()=>{class w extends hp{constructor(C,I,P,F,ie){super(C,I,F,ie),this.provider=P,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var C=this;return(0,d.Z)(function*(){const I=yield C.execute();return dt(I,C.auth,"internal-error"),I})()}onExecution(){var C=this;return(0,d.Z)(function*(){Cn(1===C.filter.length,"Popup operations only handle one event");const I=ar();C.authWindow=yield C.resolver._openPopup(C.auth,C.provider,C.filter[0],I),C.authWindow.associatedEvent=I,C.resolver._originValidation(C.auth).catch(P=>{C.reject(P)}),C.resolver._isIframeWebStorageSupported(C.auth,P=>{P||C.reject(Zi(C.auth,"web-storage-unsupported"))}),C.pollUserCancellation()})()}get eventId(){var C;return(null===(C=this.authWindow)||void 0===C?void 0:C.associatedEvent)||null}cancel(){this.reject(Zi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const C=()=>{var I,P;this.pollId=(null===(P=null===(I=this.authWindow)||void 0===I?void 0:I.window)||void 0===P?void 0:P.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Zi(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(C,Hc.get())};C()}}return w.currentPopupAction=null,w})();const fd=new Map;class vv extends hp{constructor(v,C,I=!1){super(v,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],C,void 0,I),this.eventId=null}execute(){var v=()=>super.execute,C=this;return(0,d.Z)(function*(){let I=fd.get(C.auth._key());if(!I){try{const F=(yield function ig(w,v){return nc.apply(this,arguments)}(C.resolver,C.auth))?yield v().call(C):null;I=()=>Promise.resolve(F)}catch(P){I=()=>Promise.reject(P)}fd.set(C.auth._key(),I)}return C.bypassAuthState||fd.set(C.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(v){var C=()=>super.onAuthEvent,I=this;return(0,d.Z)(function*(){if("signInViaRedirect"===v.type)return C().call(I,v);if("unknown"!==v.type){if(v.eventId){const P=yield I.auth._redirectUserForId(v.eventId);if(P)return I.user=P,C().call(I,v);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function nc(){return(nc=(0,d.Z)(function*(w,v){const C=Ol(v),I=_f(w);if(!(yield I._isAvailable()))return!1;const P="true"===(yield I._get(C));return yield I._remove(C),P})).apply(this,arguments)}function up(w,v){return dp.apply(this,arguments)}function dp(){return(dp=(0,d.Z)(function*(w,v){return _f(w)._set(Ol(v),"true")})).apply(this,arguments)}function jc(){fd.clear()}function ca(w,v){fd.set(w._key(),v)}function _f(w){return jo(w._redirectPersistence)}function Ol(w){return Ia("pendingRedirect",w.config.apiKey,w.name)}function md(w,v,C){return function _s(w,v,C){return yh.apply(this,arguments)}(w,v,C)}function yh(){return(yh=(0,d.Z)(function*(w,v,C){const I=kn(w);Sa(w,v,Zn),yield I._initializationPromise;const P=gh(I,C);return yield up(P,I),P._openRedirect(I,v,"signInViaRedirect")})).apply(this,arguments)}function UC(w,v,C){return function Uc(w,v,C){return If.apply(this,arguments)}(w,v,C)}function If(){return(If=(0,d.Z)(function*(w,v,C){const I=(0,ee.m9)(w);Sa(I.auth,v,Zn),yield I.auth._initializationPromise;const P=gh(I.auth,C);yield up(P,I.auth);const F=yield Tt(I);return P._openRedirect(I.auth,v,"reauthViaRedirect",F)})).apply(this,arguments)}function x(w,v,C){return function M(w,v,C){return N.apply(this,arguments)}(w,v,C)}function N(){return(N=(0,d.Z)(function*(w,v,C){const I=(0,ee.m9)(w);Sa(I.auth,v,Zn),yield I.auth._initializationPromise;const P=gh(I.auth,C);yield Zh(!1,I,v.providerId),yield up(P,I.auth);const F=yield Tt(I);return P._openRedirect(I.auth,v,"linkViaRedirect",F)})).apply(this,arguments)}function K(w,v){return ce.apply(this,arguments)}function ce(){return(ce=(0,d.Z)(function*(w,v){return yield kn(w)._initializationPromise,fe(w,v,!1)})).apply(this,arguments)}function fe(w,v){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,d.Z)(function*(w,v,C=!1){const I=kn(w),P=gh(I,v),ie=yield new vv(I,P,C).execute();return ie&&!C&&(delete ie.user._redirectEventId,yield I._persistUserIfCurrent(ie.user),yield I._setRedirectUser(null,v)),ie})).apply(this,arguments)}function Tt(w){return St.apply(this,arguments)}function St(){return(St=(0,d.Z)(function*(w){const v=ar(`${w.uid}:::`);return w._redirectEventId=v,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),v})).apply(this,arguments)}class Mi{constructor(v){this.auth=v,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(v){this.consumers.add(v),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,v)&&(this.sendToConsumer(this.queuedRedirectEvent,v),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(v){this.consumers.delete(v)}onEvent(v){if(this.hasEventBeenHandled(v))return!1;let C=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(v,I)&&(C=!0,this.sendToConsumer(v,I),this.saveEventToCache(v))}),this.hasHandledPotentialRedirect||!function co(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Oa(w);default:return!1}}(v)||(this.hasHandledPotentialRedirect=!0,C||(this.queuedRedirectEvent=v,C=!0)),C}sendToConsumer(v,C){var I;if(v.error&&!Oa(v)){const P=(null===(I=v.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";C.onError(Zi(this.auth,P))}else C.onAuthEvent(v)}isEventForConsumer(v,C){const I=null===C.eventId||!!v.eventId&&v.eventId===C.eventId;return C.filter.includes(v.type)&&I}hasEventBeenHandled(v){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hi(v))}saveEventToCache(v){this.cachedEventUids.add(Hi(v)),this.lastProcessedEventTime=Date.now()}}function Hi(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(v=>v).join("-")}function Oa({type:w,error:v}){return"unknown"===w&&"auth/no-auth-event"===(null==v?void 0:v.code)}function pp(w){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,d.Z)(function*(w,v={}){return ni(w,"GET","/v1/projects",v)})).apply(this,arguments)}const vh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ha=/^https?/;function xf(){return(xf=(0,d.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:v}=yield pp(w);for(const C of v)try{if(zC(C))return}catch(I){}Cs(w,"unauthorized-domain")})).apply(this,arguments)}function zC(w){const v=Yi(),{protocol:C,hostname:I}=new URL(v);if(w.startsWith("chrome-extension://")){const ie=new URL(w);return""===ie.hostname&&""===I?"chrome-extension:"===C&&w.replace("chrome-extension://","")===v.replace("chrome-extension://",""):"chrome-extension:"===C&&ie.hostname===I}if(!ha.test(C))return!1;if(vh.test(w))return I===w;const P=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+P+"|"+P+")$","i").test(I)}const WC=new es(3e4,6e4);function sg(){const w=Jn().___jsl;if(null==w?void 0:w.H)for(const v of Object.keys(w.H))if(w.H[v].r=w.H[v].r||[],w.H[v].L=w.H[v].L||[],w.H[v].r=[...w.H[v].L],w.CP)for(let C=0;C<w.CP.length;C++)w.CP[C]=null}let Pl=null;function gd(w){return Pl=Pl||function bv(w){return new Promise((v,C)=>{var I,P,F;function ie(){sg(),gapi.load("gapi.iframes",{callback:()=>{v(gapi.iframes.getContext())},ontimeout:()=>{sg(),C(Zi(w,"network-request-failed"))},timeout:WC.get()})}if(null===(P=null===(I=Jn().gapi)||void 0===I?void 0:I.iframes)||void 0===P?void 0:P.Iframe)v(gapi.iframes.getContext());else{if(!(null===(F=Jn().gapi)||void 0===F?void 0:F.load)){const ve=iv("iframefcb");return Jn()[ve]=()=>{gapi.load?ie():C(Zi(w,"network-request-failed"))},tv(`https://apis.google.com/js/api.js?onload=${ve}`).catch(pt=>C(pt))}ie()}}).catch(v=>{throw Pl=null,v})}(w),Pl}const Tf=new es(5e3,15e3),fp={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Uw(w){const v=w.config;dt(v.authDomain,w,"auth-domain-config-required");const C=v.emulator?so(v,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,I={apiKey:v.apiKey,appName:w.name,v:z.SDK_VERSION},P=xr.get(w.config.apiHost);P&&(I.eid=P);const F=w._getFrameworks();return F.length&&(I.fw=F.join(",")),`${C}?${(0,ee.xO)(I).slice(1)}`}function mp(){return mp=(0,d.Z)(function*(w){const v=yield gd(w),C=Jn().gapi;return dt(C,w,"internal-error"),v.open({where:document.body,url:Uw(w),messageHandlersFilter:C.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fp,dontclear:!0},I=>new Promise(function(){var P=(0,d.Z)(function*(F,ie){yield I.restyle({setHideOnLeave:!1});const ve=Zi(w,"network-request-failed"),pt=Jn().setTimeout(()=>{ie(ve)},Tf.get());function Je(){Jn().clearTimeout(pt),F(I)}I.ping(Je).then(Je,()=>{ie(ve)})});return function(F,ie){return P.apply(this,arguments)}}()))}),mp.apply(this,arguments)}const rg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class gp{constructor(v){this.window=v,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(v){}}}const yd=encodeURIComponent("fac");function yp(w,v,C,I,P,F){return Df.apply(this,arguments)}function Df(){return(Df=(0,d.Z)(function*(w,v,C,I,P,F){dt(w.config.authDomain,w,"auth-domain-config-required"),dt(w.config.apiKey,w,"invalid-api-key");const ie={apiKey:w.config.apiKey,appName:w.name,authType:C,redirectUrl:I,v:z.SDK_VERSION,eventId:P};if(v instanceof Zn){v.setDefaultLanguage(w.languageCode),ie.providerId=v.providerId||"",(0,ee.xb)(v.getCustomParameters())||(ie.customParameters=JSON.stringify(v.getCustomParameters()));for(const[Lt,Ti]of Object.entries(F||{}))ie[Lt]=Ti}if(v instanceof Il){const Lt=v.getScopes().filter(Ti=>""!==Ti);Lt.length>0&&(ie.scopes=Lt.join(","))}w.tenantId&&(ie.tid=w.tenantId);const ve=ie;for(const Lt of Object.keys(ve))void 0===ve[Lt]&&delete ve[Lt];const pt=yield w._getAppCheckToken(),Je=pt?`#${yd}=${encodeURIComponent(pt)}`:"";return`${ko(w)}?${(0,ee.xO)(ve).slice(1)}${Je}`})).apply(this,arguments)}function ko({config:w}){return w.emulator?so(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}const vd="webStorageSupport",GC=class kf{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aa,this._completeRedirectFn=fe,this._overrideRedirectResult=ca}_openPopup(v,C,I,P){var F=this;return(0,d.Z)(function*(){var ie;Cn(null===(ie=F.eventManagers[v._key()])||void 0===ie?void 0:ie.manager,"_initialize() not called before _openPopup()");const ve=yield yp(v,C,I,Yi(),P);return function rT(w,v,C,I=500,P=600){const F=Math.max((window.screen.availHeight-P)/2,0).toString(),ie=Math.max((window.screen.availWidth-I)/2,0).toString();let ve="";const pt=Object.assign(Object.assign({},rg),{width:I.toString(),height:P.toString(),top:F,left:ie}),Je=(0,ee.z$)().toLowerCase();C&&(ve=on(Je)?"_blank":C),Ac(Je)&&(v=v||"http://localhost",pt.scrollbars="yes");const Lt=Object.entries(pt).reduce((us,[Ys,er])=>`${us}${Ys}=${er},`,"");if(function Fu(w=(0,ee.z$)()){var v;return oh(w)&&!!(null===(v=window.navigator)||void 0===v?void 0:v.standalone)}(Je)&&"_self"!==ve)return function oT(w,v){const C=document.createElement("a");C.href=w,C.target=v;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),C.dispatchEvent(I)}(v||"",ve),new gp(null);const Ti=window.open(v||"",ve,Lt);dt(Ti,w,"popup-blocked");try{Ti.focus()}catch(us){}return new gp(Ti)}(v,ve,ar())})()}_openRedirect(v,C,I,P){var F=this;return(0,d.Z)(function*(){return yield F._originValidation(v),function fv(w){Jn().location.href=w}(yield yp(v,C,I,Yi(),P)),new Promise(()=>{})})()}_initialize(v){const C=v._key();if(this.eventManagers[C]){const{manager:P,promise:F}=this.eventManagers[C];return P?Promise.resolve(P):(Cn(F,"If manager is not set, promise should be"),F)}const I=this.initAndGetManager(v);return this.eventManagers[C]={promise:I},I.catch(()=>{delete this.eventManagers[C]}),I}initAndGetManager(v){var C=this;return(0,d.Z)(function*(){const I=yield function ng(w){return mp.apply(this,arguments)}(v),P=new Mi(v);return I.register("authEvent",F=>(dt(null==F?void 0:F.authEvent,v,"invalid-auth-event"),{status:P.onEvent(F.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),C.eventManagers[v._key()]={manager:P},C.iframes[v._key()]=I,P})()}_isIframeWebStorageSupported(v,C){this.iframes[v._key()].send(vd,{type:vd},P=>{var F;const ie=null===(F=null==P?void 0:P[0])||void 0===F?void 0:F[vd];void 0!==ie&&C(!!ie),Cs(v,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(v){const C=v._key();return this.originValidationPromises[C]||(this.originValidationPromises[C]=function bh(w){return xf.apply(this,arguments)}(v)),this.originValidationPromises[C]}get _shouldInitProactively(){return Jp()||no()||oh()}};class og extends class Ww{constructor(v){this.factorId=v}_process(v,C,I){switch(C.type){case"enroll":return this._finalizeEnroll(v,C.credential,I);case"signin":return this._finalizeSignIn(v,C.credential);default:return Qs("unexpected MultiFactorSessionType")}}}{constructor(v){super("phone"),this.credential=v}static _fromCredential(v){return new og(v)}_finalizeEnroll(v,C,I){return function Qn(w,v){return ni(w,"POST","/v2/accounts/mfaEnrollment:finalize",Ss(w,v))}(v,{idToken:C,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(v,C){return function lo(w,v){return ni(w,"POST","/v2/accounts/mfaSignIn:finalize",Ss(w,v))}(v,{mfaPendingCredential:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let YC=(()=>{class w{constructor(){}static assertion(C){return og._fromCredential(C)}}return w.FACTOR_ID="phone",w})();var _v="@firebase/auth";class qw{constructor(v){this.auth=v,this.internalListeners=new Map}getUid(){var v;return this.assertAuthConfigured(),(null===(v=this.auth.currentUser)||void 0===v?void 0:v.uid)||null}getToken(v){var C=this;return(0,d.Z)(function*(){return C.assertAuthConfigured(),yield C.auth._initializationPromise,C.auth.currentUser?{accessToken:yield C.auth.currentUser.getIdToken(v)}:null})()}addAuthTokenListener(v){if(this.assertAuthConfigured(),this.internalListeners.has(v))return;const C=this.auth.onIdTokenChanged(I=>{v((null==I?void 0:I.stsTokenManager.accessToken)||null)});this.internalListeners.set(v,C),this.updateProactiveRefresh()}removeAuthTokenListener(v){this.assertAuthConfigured();const C=this.internalListeners.get(v);!C||(this.internalListeners.delete(v),C(),this.updateProactiveRefresh())}assertAuthConfigured(){dt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const vu=(0,ee.Pz)("authIdTokenMaxAge")||300;let vp=null;const bd=w=>function(){var v=(0,d.Z)(function*(C){const I=C&&(yield C.getIdTokenResult()),P=I&&((new Date).getTime()-Date.parse(I.issuedAtTime))/1e3;if(P&&P>vu)return;const F=null==I?void 0:I.token;vp!==F&&(vp=F,yield fetch(w,{method:F?"POST":"DELETE",headers:F?{Authorization:`Bearer ${F}`}:{}}))});return function(C){return v.apply(this,arguments)}}();function Gw(w=(0,z.getApp)()){const v=(0,z._getProvider)(w,"auth");if(v.isInitialized())return v.getImmediate();const C=function ah(w,v){const C=(0,z._getProvider)(w,"auth");if(C.isInitialized()){const P=C.getImmediate(),F=C.getOptions();if((0,ee.vZ)(F,null!=v?v:{}))return P;Cs(P,"already-initialized")}return C.initialize({options:v})}(w,{popupRedirectResolver:GC,persistence:[ka,pv,aa]}),I=(0,ee.Pz)("authTokenSyncURL");if(I){const F=bd(I);(function ff(w,v,C){(0,ee.m9)(w).beforeAuthStateChanged(v,C)})(C,F,()=>F(C.currentUser)),function ec(w,v,C,I){(0,ee.m9)(w).onIdTokenChanged(v,C,I)}(C,ie=>F(ie))}const P=(0,ee.q4)("auth");return P&&Wh(C,`http://${P}`),C}!function Iv(w){(0,z._registerComponent)(new io.wA("auth",(v,{options:C})=>{const I=v.getProvider("app").getImmediate(),P=v.getProvider("heartbeat"),F=v.getProvider("app-check-internal"),{apiKey:ie,authDomain:ve}=I.options;dt(ie&&!ie.includes(":"),"invalid-api-key",{appName:I.name});const pt={apiKey:ie,authDomain:ve,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_m(w)},Je=new Hw(I,P,F,pt);return function sv(w,v){const C=(null==v?void 0:v.persistence)||[],I=(Array.isArray(C)?C:[C]).map(jo);(null==v?void 0:v.errorMap)&&w._updateErrorMap(v.errorMap),w._initializeWithPersistence(I,null==v?void 0:v.popupRedirectResolver)}(Je,C),Je},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((v,C,I)=>{v.getProvider("auth-internal").initialize()})),(0,z._registerComponent)(new io.wA("auth-internal",v=>{const C=kn(v.getProvider("auth").getImmediate());return new qw(C)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,z.registerVersion)(_v,"0.23.2",function $w(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,z.registerVersion)(_v,"0.23.2","esm2017")}("Browser")},2090:(Kt,Xe,G)=>{G.d(Xe,{$s:()=>Xa,BH:()=>ht,G6:()=>Yr,L:()=>Ue,LL:()=>qs,P0:()=>Dt,Pz:()=>Gt,Sg:()=>zt,UG:()=>be,US:()=>ze,ZB:()=>xe,ZR:()=>io,aH:()=>wt,b$:()=>Qe,eu:()=>Wi,hl:()=>ui,jU:()=>We,m9:()=>Kr,ne:()=>Cn,pd:()=>dt,q4:()=>Et,r3:()=>Ca,ru:()=>qe,tV:()=>he,uI:()=>bi,vZ:()=>Cs,w1:()=>Ve,xO:()=>Sa,xb:()=>Vi,z$:()=>Rt,zI:()=>ba,zd:()=>Vn});const Ie=function(ne){const te=[];let W=0;for(let q=0;q<ne.length;q++){let U=ne.charCodeAt(q);U<128?te[W++]=U:U<2048?(te[W++]=U>>6|192,te[W++]=63&U|128):55296==(64512&U)&&q+1<ne.length&&56320==(64512&ne.charCodeAt(q+1))?(U=65536+((1023&U)<<10)+(1023&ne.charCodeAt(++q)),te[W++]=U>>18|240,te[W++]=U>>12&63|128,te[W++]=U>>6&63|128,te[W++]=63&U|128):(te[W++]=U>>12|224,te[W++]=U>>6&63|128,te[W++]=63&U|128)}return te},ze={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ne,te){if(!Array.isArray(ne))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=te?this.byteToCharMapWebSafe_:this.byteToCharMap_,q=[];for(let U=0;U<ne.length;U+=3){const ge=ne[U],Ze=U+1<ne.length,Ot=Ze?ne[U+1]:0,Ci=U+2<ne.length,Ei=Ci?ne[U+2]:0;let Gs=(15&Ot)<<2|Ei>>6,Di=63&Ei;Ci||(Di=64,Ze||(Gs=64)),q.push(W[ge>>2],W[(3&ge)<<4|Ot>>4],W[Gs],W[Di])}return q.join("")},encodeString(ne,te){return this.HAS_NATIVE_SUPPORT&&!te?btoa(ne):this.encodeByteArray(Ie(ne),te)},decodeString(ne,te){return this.HAS_NATIVE_SUPPORT&&!te?atob(ne):function(ne){const te=[];let W=0,q=0;for(;W<ne.length;){const U=ne[W++];if(U<128)te[q++]=String.fromCharCode(U);else if(U>191&&U<224){const ge=ne[W++];te[q++]=String.fromCharCode((31&U)<<6|63&ge)}else if(U>239&&U<365){const Ci=((7&U)<<18|(63&ne[W++])<<12|(63&ne[W++])<<6|63&ne[W++])-65536;te[q++]=String.fromCharCode(55296+(Ci>>10)),te[q++]=String.fromCharCode(56320+(1023&Ci))}else{const ge=ne[W++],Ze=ne[W++];te[q++]=String.fromCharCode((15&U)<<12|(63&ge)<<6|63&Ze)}}return te.join("")}(this.decodeStringToByteArray(ne,te))},decodeStringToByteArray(ne,te){this.init_();const W=te?this.charToByteMapWebSafe_:this.charToByteMap_,q=[];for(let U=0;U<ne.length;){const ge=W[ne.charAt(U++)],Ot=U<ne.length?W[ne.charAt(U)]:0;++U;const Ei=U<ne.length?W[ne.charAt(U)]:64;++U;const yi=U<ne.length?W[ne.charAt(U)]:64;if(++U,null==ge||null==Ot||null==Ei||null==yi)throw new Le;q.push(ge<<2|Ot>>4),64!==Ei&&(q.push(Ot<<4&240|Ei>>2),64!==yi&&q.push(Ei<<6&192|yi))}return q},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ne=0;ne<this.ENCODED_VALS.length;ne++)this.byteToCharMap_[ne]=this.ENCODED_VALS.charAt(ne),this.charToByteMap_[this.byteToCharMap_[ne]]=ne,this.byteToCharMapWebSafe_[ne]=this.ENCODED_VALS_WEBSAFE.charAt(ne),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ne]]=ne,ne>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ne)]=ne,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ne)]=ne)}}};class Le extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ue=function(ne){return function(ne){const te=Ie(ne);return ze.encodeByteArray(te,!0)}(ne).replace(/\./g,"")},he=function(ne){try{return ze.decodeString(ne,!0)}catch(te){console.error("base64Decode failed: ",te)}return null};function xe(ne,te){if(!(te instanceof Object))return te;switch(te.constructor){case Date:return new Date(te.getTime());case Object:void 0===ne&&(ne={});break;case Array:ne=[];break;default:return te}for(const W in te)!te.hasOwnProperty(W)||!Pt(W)||(ne[W]=xe(ne[W],te[W]));return ne}function Pt(ne){return"__proto__"!==ne}const Ye=()=>{try{return function rt(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const ne=process.env.__FIREBASE_DEFAULTS__;return ne?JSON.parse(ne):void 0})()||(()=>{if("undefined"==typeof document)return;let ne;try{ne=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(W){return}const te=ne&&he(ne[1]);return te&&JSON.parse(te)})()}catch(ne){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ne}`)}},Et=ne=>{var te,W;return null===(W=null===(te=Ye())||void 0===te?void 0:te.emulatorHosts)||void 0===W?void 0:W[ne]},Dt=ne=>{const te=Et(ne);if(!te)return;const W=te.lastIndexOf(":");if(W<=0||W+1===te.length)throw new Error(`Invalid host ${te} with no separate hostname and port!`);const q=parseInt(te.substring(W+1),10);return"["===te[0]?[te.substring(1,W-1),q]:[te.substring(0,W),q]},wt=()=>{var ne;return null===(ne=Ye())||void 0===ne?void 0:ne.config},Gt=ne=>{var te;return null===(te=Ye())||void 0===te?void 0:te[`_${ne}`]};class ht{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((te,W)=>{this.resolve=te,this.reject=W})}wrapCallback(te){return(W,q)=>{W?this.reject(W):this.resolve(q),"function"==typeof te&&(this.promise.catch(()=>{}),1===te.length?te(W):te(W,q))}}}function zt(ne,te){if(ne.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const q=te||"demo-project",U=ne.iat||0,ge=ne.sub||ne.user_id;if(!ge)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ze=Object.assign({iss:`https://securetoken.google.com/${q}`,aud:q,iat:U,exp:U+3600,auth_time:U,sub:ge,user_id:ge,firebase:{sign_in_provider:"custom",identities:{}}},ne);return[Ue(JSON.stringify({alg:"none",type:"JWT"})),Ue(JSON.stringify(Ze)),""].join(".")}function Rt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function bi(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rt())}function be(){var ne;const te=null===(ne=Ye())||void 0===ne?void 0:ne.forceEnvironment;if("node"===te)return!0;if("browser"===te)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(W){return!1}}function We(){return"object"==typeof self&&self.self===self}function qe(){const ne="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ne&&void 0!==ne.id}function Qe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ve(){const ne=Rt();return ne.indexOf("MSIE ")>=0||ne.indexOf("Trident/")>=0}function Yr(){return!be()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ui(){try{return"object"==typeof indexedDB}catch(ne){return!1}}function Wi(){return new Promise((ne,te)=>{try{let W=!0;const q="validate-browser-context-for-indexeddb-analytics-module",U=self.indexedDB.open(q);U.onsuccess=()=>{U.result.close(),W||self.indexedDB.deleteDatabase(q),ne(!0)},U.onupgradeneeded=()=>{W=!1},U.onerror=()=>{var ge;te((null===(ge=U.error)||void 0===ge?void 0:ge.message)||"")}}catch(W){te(W)}})}function ba(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class io extends Error{constructor(te,W,q){super(W),this.code=te,this.customData=q,this.name="FirebaseError",Object.setPrototypeOf(this,io.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qs.prototype.create)}}class qs{constructor(te,W,q){this.service=te,this.serviceName=W,this.errors=q}create(te,...W){const q=W[0]||{},U=`${this.service}/${te}`,ge=this.errors[te],Ze=ge?function Tn(ne,te){return ne.replace(ta,(W,q)=>{const U=te[q];return null!=U?String(U):`<${q}?>`})}(ge,q):"Error";return new io(U,`${this.serviceName}: ${Ze} (${U}).`,q)}}const ta=/\{\$([^}]+)}/g;function Ca(ne,te){return Object.prototype.hasOwnProperty.call(ne,te)}function Vi(ne){for(const te in ne)if(Object.prototype.hasOwnProperty.call(ne,te))return!1;return!0}function Cs(ne,te){if(ne===te)return!0;const W=Object.keys(ne),q=Object.keys(te);for(const U of W){if(!q.includes(U))return!1;const ge=ne[U],Ze=te[U];if(Zi(ge)&&Zi(Ze)){if(!Cs(ge,Ze))return!1}else if(ge!==Ze)return!1}for(const U of q)if(!W.includes(U))return!1;return!0}function Zi(ne){return null!==ne&&"object"==typeof ne}function Sa(ne){const te=[];for(const[W,q]of Object.entries(ne))Array.isArray(q)?q.forEach(U=>{te.push(encodeURIComponent(W)+"="+encodeURIComponent(U))}):te.push(encodeURIComponent(W)+"="+encodeURIComponent(q));return te.length?"&"+te.join("&"):""}function Vn(ne){const te={};return ne.replace(/^\?/,"").split("&").forEach(q=>{if(q){const[U,ge]=q.split("=");te[decodeURIComponent(U)]=decodeURIComponent(ge)}}),te}function dt(ne){const te=ne.indexOf("?");if(!te)return"";const W=ne.indexOf("#",te);return ne.substring(te,W>0?W:void 0)}function Cn(ne,te){const W=new Yi(ne,te);return W.subscribe.bind(W)}class Yi{constructor(te,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{te(this)}).catch(q=>{this.error(q)})}next(te){this.forEachObserver(W=>{W.next(te)})}error(te){this.forEachObserver(W=>{W.error(te)}),this.close(te)}complete(){this.forEachObserver(te=>{te.complete()}),this.close()}subscribe(te,W,q){let U;if(void 0===te&&void 0===W&&void 0===q)throw new Error("Missing Observer.");U=function ai(ne,te){if("object"!=typeof ne||null===ne)return!1;for(const W of te)if(W in ne&&"function"==typeof ne[W])return!0;return!1}(te,["next","error","complete"])?te:{next:te,error:W,complete:q},void 0===U.next&&(U.next=Za),void 0===U.error&&(U.error=Za),void 0===U.complete&&(U.complete=Za);const ge=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?U.error(this.finalError):U.complete()}catch(Ze){}}),this.observers.push(U),ge}unsubscribeOne(te){void 0===this.observers||void 0===this.observers[te]||(delete this.observers[te],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(te){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,te)}sendOne(te,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[te])try{W(this.observers[te])}catch(q){"undefined"!=typeof console&&console.error&&console.error(q)}})}close(te){this.finalized||(this.finalized=!0,void 0!==te&&(this.finalError=te),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Za(){}function Xa(ne,te=1e3,W=2){const q=te*Math.pow(W,ne),U=Math.round(.5*q*(Math.random()-.5)*2);return Math.min(144e5,q+U)}function Kr(ne){return ne&&ne._delegate?ne._delegate:ne}},7881:(Kt,Xe,G)=>{var d=G(5e3);let ee=null;function z(){return ee}const Le=new d.OlP("DocumentToken");let Be=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ue(){return(0,d.LFG)(ue)}()},providedIn:"platform"}),n})();const he=new d.OlP("Location Initialized");let ue=(()=>{class n extends Be{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return z().getBaseHref(this._doc)}onPopState(t){const i=z().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=z().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,s){xe()?this._history.pushState(t,i,s):this.location.hash=s}replaceState(t,i,s){xe()?this._history.replaceState(t,i,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Le))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Pt(){return new ue((0,d.LFG)(Le))}()},providedIn:"platform"}),n})();function xe(){return!!window.history.pushState}function rt(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function vt(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function At(n){return n&&"?"!==n[0]?"?"+n:n}let Fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ye(n){const e=(0,d.LFG)(Le).location;return new Dt((0,d.LFG)(Be),e&&e.origin||"")}()},providedIn:"root"}),n})();const Et=new d.OlP("appBaseHref");let Dt=(()=>{class n extends Fe{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return rt(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+At(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${i}${s}`:i}pushState(t,i,s,r){const o=this.prepareExternalUrl(s+At(r));this._platformLocation.pushState(t,i,o)}replaceState(t,i,s,r){const o=this.prepareExternalUrl(s+At(r));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,s;null===(s=(i=this._platformLocation).historyGo)||void 0===s||s.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Be),d.LFG(Et,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),wt=(()=>{class n extends Fe{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=rt(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,s,r){let o=this.prepareExternalUrl(s+At(r));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,s,r){let o=this.prepareExternalUrl(s+At(r));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,s;null===(s=(i=this._platformLocation).historyGo)||void 0===s||s.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Be),d.LFG(Et,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Gt=(()=>{class n{constructor(t,i){this._subject=new d.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const s=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=vt(Rt(s)),this._platformStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+At(i))}normalize(t){return n.stripTrailingSlash(function zt(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Rt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,i="",s=null){this._platformStrategy.pushState(s,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+At(i)),s)}replaceState(t,i="",s=null){this._platformStrategy.replaceState(s,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+At(i)),s)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var i,s;null===(s=(i=this._platformStrategy).historyGo)||void 0===s||s.call(i,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(s=>s(t,i))}subscribe(t,i,s){return this._subject.subscribe({next:t,error:i,complete:s})}}return n.normalizeQueryParams=At,n.joinWithSlash=rt,n.stripTrailingSlash=vt,n.\u0275fac=function(t){return new(t||n)(d.LFG(Fe),d.LFG(Be))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function ht(){return new Gt((0,d.LFG)(Fe),(0,d.LFG)(Be))}()},providedIn:"root"}),n})();function Rt(n){return n.replace(/\/index.html$/,"")}var We=(()=>((We=We||{})[We.Zero=0]="Zero",We[We.One=1]="One",We[We.Two=2]="Two",We[We.Few=3]="Few",We[We.Many=4]="Many",We[We.Other=5]="Other",We))();const ia=d.kL8;class Os{}let _a=(()=>{class n extends Os{constructor(t){super(),this.locale=t}getPluralCategory(t,i){switch(ia(i||this.locale)(t)){case We.Zero:return"zero";case We.One:return"one";case We.Two:return"two";case We.Few:return"few";case We.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.soG))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function jo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[s,r]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(s.trim()===e)return decodeURIComponent(r)}return null}let no=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new on,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Xp("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Xp("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class on{constructor(){this.$implicit=null,this.ngIf=null}}function Xp(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let ti=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[{provide:Os,useClass:_a}]}),n})();function sf(n){return"server"===n}let qh=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new Mm((0,d.LFG)(Le),window)}),n})();class Mm{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function $h(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=i.currentNode;for(;s;){const r=s.shadowRoot;if(r){const o=r.getElementById(e)||r.querySelector(`[name="${e}"]`);if(o)return o}s=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(i-r[0],s-r[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=jn(this.window.history)||jn(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function jn(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class mn{}class ju extends class rf extends class ze{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Pe(n){ee||(ee=n)}(new ju)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function zo(){return Yl=Yl||document.querySelector("base"),Yl?Yl.getAttribute("href"):null}();return null==t?null:function Gh(n){Yd=Yd||document.createElement("a"),Yd.setAttribute("href",n);const e=Yd.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Yl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return jo(document.cookie,e)}}let Yd,Yl=null;const Kl=new d.OlP("TRANSITION_ID"),kc=[{provide:d.ip1,useFactory:function ro(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const i=z(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let r=0;r<s.length;r++)i.remove(s[r])})}},deps:[Kl,Le,d.zs3],multi:!0}];class xo{static init(){(0,d.VLi)(new xo)}addToWindow(e){d.dqk.getAngularTestability=(i,s=!0)=>{const r=e.findTestabilityInTree(i,s);if(null==r)throw new Error("Could not find testability for element.");return r},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(i=>{const s=d.dqk.getAllAngularTestabilities();let r=s.length,o=!1;const a=function(u){o=o||u,r--,0==r&&i(o)};s.forEach(function(u){u.whenStable(a)})})}findTestabilityInTree(e,t,i){if(null==t)return null;const s=e.getTestability(t);return null!=s?s:i?z().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let of=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ja=new d.OlP("EventManagerPlugins");let oo=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,s){return this._findPluginFor(i).addEventListener(t,i,s)}addGlobalEventListener(t,i,s){return this._findPluginFor(i).addGlobalEventListener(t,i,s)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const s=this._plugins;for(let r=0;r<s.length;r++){const o=s[r];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ja),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Kd{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const s=z().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,i)}}let Oi=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),i.add(s))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Zd=(()=>{class n extends Oi{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,s){t.forEach(r=>{const o=this._doc.createElement("style");o.textContent=r,s.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(Ta),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,s)=>{this._addStylesToHost(t,s,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ta))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Le))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Ta(n){z().remove(n)}const Uu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Yh=/%COMP%/g;function an(n,e,t){for(let i=0;i<e.length;i++){let s=e[i];Array.isArray(s)?an(n,s,t):(s=s.replace(Yh,n),t.push(s))}return t}function lf(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Zn=(()=>{class n{constructor(t,i,s){this.eventManager=t,this.sharedStylesHost=i,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new Il(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case d.ifc.Emulated:{let s=this.rendererByCompId.get(i.id);return s||(s=new RC(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,s)),s.applyToHost(t),s}case 1:case d.ifc.ShadowDom:return new Zl(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const s=an(i.id,i.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oo),d.LFG(Zd),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Il{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Uu[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,s){if(s){t=s+":"+t;const r=Uu[s];r?e.setAttributeNS(r,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const s=Uu[i];s?e.removeAttributeNS(s,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,s){s&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,i,s&d.JOm.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,lf(i)):this.eventManager.addEventListener(e,t,lf(i))}}class RC extends Il{constructor(e,t,i,s){super(e),this.component=i;const r=an(s+"-"+i.id,i.styles,[]);t.addStyles(r),this.contentAttr=function Es(n){return"_ngcontent-%COMP%".replace(Yh,n)}(s+"-"+i.id),this.hostAttr=function Rm(n){return"_nghost-%COMP%".replace(Yh,n)}(s+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class Zl extends Il{constructor(e,t,i,s){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const r=an(s.id,s.styles,[]);for(let o=0;o<r.length;o++){const a=document.createElement("style");a.textContent=r[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Aa=(()=>{class n extends Kd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,s){return t.addEventListener(i,s,!1),()=>this.removeEventListener(t,i,s)}removeEventListener(t,i,s){return t.removeEventListener(i,s)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Le))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Xn=["alt","control","meta","shift"],Wu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Oc={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Da={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let qu=(()=>{class n extends Kd{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,s){const r=n.parseEventName(i),o=n.eventCallback(r.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>z().onAndCancel(t,r.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),s=i.shift();if(0===i.length||"keydown"!==s&&"keyup"!==s)return null;const r=n._normalizeKey(i.pop());let o="";if(Xn.forEach(u=>{const p=i.indexOf(u);p>-1&&(i.splice(p,1),o+=u+".")}),o+=r,0!=i.length||0===r.length)return null;const a={};return a.domEventName=s,a.fullKey=o,a}static getEventFullKey(t){let i="",s=function ra(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Oc.hasOwnProperty(e)&&(e=Oc[e]))}return Wu[e]||e}(t);return s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),Xn.forEach(r=>{r!=s&&Da[r](t)&&(i+=r+".")}),i+=s,i}static eventCallback(t,i,s){return r=>{n.getEventFullKey(r)===t&&s.runGuarded(()=>i(r))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Le))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const $u=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function Nm(){ju.makeCurrent(),xo.init()},multi:!0},{provide:Le,useFactory:function tl(){return(0,d.RDi)(document),document},deps:[]}]),Gu=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function av(){return new d.qLn},deps:[]},{provide:Ja,useClass:Aa,multi:!0,deps:[Le,d.R0b,d.Lbi]},{provide:Ja,useClass:qu,multi:!0,deps:[Le]},{provide:Zn,useClass:Zn,deps:[oo,Zd,d.AFp]},{provide:d.FYo,useExisting:Zn},{provide:Oi,useExisting:Zd},{provide:Zd,useClass:Zd,deps:[Le]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b]},{provide:oo,useClass:oo,deps:[Ja,d.R0b]},{provide:mn,useClass:of,deps:[]}];let cf=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:Kl,useExisting:d.AFp},kc]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(n,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:Gu,imports:[ti,d.hGG]}),n})();"undefined"!=typeof window&&window;var hh=G(7669),ln=G(8996);function _i(...n){const e=(0,hh.yG)(n);return(0,ln.D)(n,e)}var To=G(8306),wr=G(5577),Ql=G(576);function Lc(n,e){return(0,Ql.m)(e)?(0,wr.z)(n,e,1):(0,wr.z)(n,1)}var or=G(4482),Fr=G(5403);function ao(n,e){return(0,or.e)((t,i)=>{let s=0;t.subscribe(new Fr.Q(i,r=>n.call(e,r,s++)&&i.next(r)))})}var Qi=G(4004);class Zu{}class Xu{}class oa{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const s=t.slice(0,i),r=s.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(s,r),this.headers.has(r)?this.headers.get(r).push(o):this.headers.set(r,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const s=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(s,i),this.maybeSetNormalizedName(t,s))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof oa?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new oa;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof oa?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const s=("a"===e.op?this.headers.get(t):void 0)||[];s.push(...i),this.headers.set(t,s);break;case"d":const r=e.value;if(r){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===r.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class hv{encodeKey(e){return Qu(e)}encodeValue(e){return Qu(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Jd=/%(\d[a-f0-9])/gi,ou={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Qu(n){return encodeURIComponent(n).replace(Jd,(e,t)=>{var i;return null!==(i=ou[t])&&void 0!==i?i:e})}function Ju(n){return`${n}`}class xl{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new hv,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Jl(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{const r=s.indexOf("="),[o,a]=-1==r?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,r)),e.decodeValue(s.slice(r+1))],u=t.get(o)||[];u.push(a),t.set(o,u)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t];this.map.set(t,Array.isArray(i)?i:[i])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const s=e[i];Array.isArray(s)?s.forEach(r=>{t.push({param:i,value:r,op:"a"})}):t.push({param:i,value:s,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new xl({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Ju(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const s=i.indexOf(Ju(e.value));-1!==s&&i.splice(s,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class tp{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function au(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function Um(n){return"undefined"!=typeof Blob&&n instanceof Blob}function uv(n){return"undefined"!=typeof FormData&&n instanceof FormData}class sl{constructor(e,t,i,s){let r;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function uh(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==i?i:null,r=s):r=i,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.context&&(this.context=r.context),r.params&&(this.params=r.params)),this.headers||(this.headers=new oa),this.context||(this.context=new tp),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new xl,this.urlWithParams=t}serializeBody(){return null===this.body?null:au(this.body)||Um(this.body)||uv(this.body)||function pf(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof xl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||uv(this.body)?null:Um(this.body)?this.body.type||null:au(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof xl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const i=e.method||this.method,s=e.url||this.url,r=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,u=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let p=e.headers||this.headers,y=e.params||this.params;const E=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(p=Object.keys(e.setHeaders).reduce((_,D)=>_.set(D,e.setHeaders[D]),p)),e.setParams&&(y=Object.keys(e.setParams).reduce((_,D)=>_.set(D,e.setParams[D]),y)),new sl(i,s,o,{params:y,headers:p,context:E,reportProgress:u,responseType:r,withCredentials:a})}}var Sr=(()=>((Sr=Sr||{})[Sr.Sent=0]="Sent",Sr[Sr.UploadProgress=1]="UploadProgress",Sr[Sr.ResponseHeader=2]="ResponseHeader",Sr[Sr.DownloadProgress=3]="DownloadProgress",Sr[Sr.Response=4]="Response",Sr[Sr.User=5]="User",Sr))();class zm{constructor(e,t=200,i="OK"){this.headers=e.headers||new oa,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class lu extends zm{constructor(e={}){super(e),this.type=Sr.ResponseHeader}clone(e={}){return new lu({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ec extends zm{constructor(e={}){super(e),this.type=Sr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new ec({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ff extends zm{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function ip(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let mf=(()=>{class n{constructor(t){this.handler=t}request(t,i,s={}){let r;if(t instanceof sl)r=t;else{let u,p;u=s.headers instanceof oa?s.headers:new oa(s.headers),s.params&&(p=s.params instanceof xl?s.params:new xl({fromObject:s.params})),r=new sl(t,i,void 0!==s.body?s.body:null,{headers:u,context:s.context,params:p,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const o=_i(r).pipe(Lc(u=>this.handler.handle(u)));if(t instanceof sl||"events"===s.observe)return o;const a=o.pipe(ao(u=>u instanceof ec));switch(s.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return a.pipe((0,Qi.U)(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe((0,Qi.U)(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe((0,Qi.U)(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return a.pipe((0,Qi.U)(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new xl).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,s={}){return this.request("PATCH",t,ip(s,i))}post(t,i,s={}){return this.request("POST",t,ip(s,i))}put(t,i,s={}){return this.request("PUT",t,ip(s,i))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Zu))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Rc{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const On=new d.OlP("HTTP_INTERCEPTORS");let ed=(()=>{class n{intercept(t,i){return i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Wm=/^\)\]\}',?\n/;let td=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new To.y(i=>{const s=this.xhrFactory.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((D,L)=>s.setRequestHeader(D,L.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const D=t.detectContentTypeHeader();null!==D&&s.setRequestHeader("Content-Type",D)}if(t.responseType){const D=t.responseType.toLowerCase();s.responseType="json"!==D?D:"text"}const r=t.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const D=1223===s.status?204:s.status,L=s.statusText||"OK",V=new oa(s.getAllResponseHeaders()),H=function dv(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return o=new lu({headers:V,status:D,statusText:L,url:H}),o},u=()=>{let{headers:D,status:L,statusText:V,url:H}=a(),se=null;204!==L&&(se=void 0===s.response?s.responseText:s.response),0===L&&(L=se?200:0);let _e=L>=200&&L<300;if("json"===t.responseType&&"string"==typeof se){const re=se;se=se.replace(Wm,"");try{se=""!==se?JSON.parse(se):null}catch(Ae){se=re,_e&&(_e=!1,se={error:Ae,text:se})}}_e?(i.next(new ec({body:se,headers:D,status:L,statusText:V,url:H||void 0})),i.complete()):i.error(new ff({error:se,headers:D,status:L,statusText:V,url:H||void 0}))},p=D=>{const{url:L}=a(),V=new ff({error:D,status:s.status||0,statusText:s.statusText||"Unknown Error",url:L||void 0});i.error(V)};let y=!1;const E=D=>{y||(i.next(a()),y=!0);let L={type:Sr.DownloadProgress,loaded:D.loaded};D.lengthComputable&&(L.total=D.total),"text"===t.responseType&&!!s.responseText&&(L.partialText=s.responseText),i.next(L)},_=D=>{let L={type:Sr.UploadProgress,loaded:D.loaded};D.lengthComputable&&(L.total=D.total),i.next(L)};return s.addEventListener("load",u),s.addEventListener("error",p),s.addEventListener("timeout",p),s.addEventListener("abort",p),t.reportProgress&&(s.addEventListener("progress",E),null!==r&&s.upload&&s.upload.addEventListener("progress",_)),s.send(r),i.next({type:Sr.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",u),s.removeEventListener("timeout",p),t.reportProgress&&(s.removeEventListener("progress",E),null!==r&&s.upload&&s.upload.removeEventListener("progress",_)),s.readyState!==s.DONE&&s.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(mn))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const id=new d.OlP("XSRF_COOKIE_NAME"),qm=new d.OlP("XSRF_HEADER_NAME");class sp{}let cu=(()=>{class n{constructor(t,i,s){this.doc=t,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=jo(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Le),d.LFG(d.Lbi),d.LFG(id))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),$m=(()=>{class n{constructor(t,i){this.tokenService=t,this.headerName=i}intercept(t,i){const s=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||s.startsWith("http://")||s.startsWith("https://"))return i.handle(t);const r=this.tokenService.getToken();return null!==r&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,r)})),i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(sp),d.LFG(qm))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),_r=(()=>{class n{constructor(t,i){this.backend=t,this.injector=i,this.chain=null}handle(t){if(null===this.chain){const i=this.injector.get(On,[]);this.chain=i.reduceRight((s,r)=>new Rc(s,r),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Xu),d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),pv=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:$m,useClass:ed}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:id,useValue:t.cookieName}:[],t.headerName?{provide:qm,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[$m,{provide:On,useExisting:$m,multi:!0},{provide:sp,useClass:cu},{provide:id,useValue:"XSRF-TOKEN"},{provide:qm,useValue:"X-XSRF-TOKEN"}]}),n})(),Gm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[mf,{provide:Zu,useClass:_r},td,{provide:Xu,useExisting:td}],imports:[[pv.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();var rl=G(7579);class ar extends rl.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}const{isArray:sd}=Array,{getPrototypeOf:Jn,prototype:fv,keys:nd}=Object;var hu=G(4671);const{isArray:Ao}=Array;var rd=G(9672);function od(...n){const e=(0,hh.yG)(n),t=(0,hh.jO)(n),{args:i,keys:s}=function mv(n){if(1===n.length){const e=n[0];if(sd(e))return{args:e,keys:null};if(function np(n){return n&&"object"==typeof n&&Jn(n)===fv}(e)){const t=nd(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}(n);if(0===i.length)return(0,ln.D)([],e);const r=new To.y(function uu(n,e,t=hu.y){return i=>{Ym(e,()=>{const{length:s}=n,r=new Array(s);let o=s,a=s;for(let u=0;u<s;u++)Ym(e,()=>{const p=(0,ln.D)(n[u],e);let y=!1;p.subscribe(new Fr.Q(i,E=>{r[u]=E,y||(y=!0,a--),a||i.next(t(r.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,s?o=>function op(n,e){return n.reduce((t,i,s)=>(t[i]=e[s],t),{})}(s,o):hu.y));return t?r.pipe(function tc(n){return(0,Qi.U)(e=>function rp(n,e){return Ao(e)?n(...e):n(e)}(n,e))}(t)):r}function Ym(n,e,t){n?(0,rd.f)(t,n,e):e()}const dh=(0,G(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Bc=G(8189);function Vc(...n){return function ap(){return(0,Bc.J)(1)}()((0,ln.D)(n,(0,hh.yG)(n)))}var du=G(8421);function pu(n){return new To.y(e=>{(0,du.Xf)(n()).subscribe(e)})}var Tl=G(515),lp=G(727);function ka(){return(0,or.e)((n,e)=>{let t=null;n._refCount++;const i=new Fr.Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,r=t;t=null,s&&(!r||s===r)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class Km extends To.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,or.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new lp.w0;const t=this.getSubject();e.add(this.source.subscribe(new Fr.Q(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=lp.w0.EMPTY)}return e}refCount(){return ka()(this)}}function lo(n,e){return(0,or.e)((t,i)=>{let s=null,r=0,o=!1;const a=()=>o&&!s&&i.complete();t.subscribe(new Fr.Q(i,u=>{null==s||s.unsubscribe();let p=0;const y=r++;(0,du.Xf)(n(u,y)).subscribe(s=new Fr.Q(i,E=>i.next(e?e(u,E,y,p++):E),()=>{s=null,a()}))},()=>{o=!0,a()}))})}var ph=G(5698);function ld(...n){const e=(0,hh.yG)(n);return(0,or.e)((t,i)=>{(e?Vc(n,t,e):Vc(n,t)).subscribe(i)})}function fu(n,e,t,i,s){return(r,o)=>{let a=t,u=e,p=0;r.subscribe(new Fr.Q(o,y=>{const E=p++;u=a?n(u,y,E):(a=!0,y),i&&o.next(u)},s&&(()=>{a&&o.next(u),o.complete()})))}}function Br(n,e){return(0,or.e)(fu(n,e,arguments.length>=2,!0))}function Al(n){return(0,or.e)((e,t)=>{let r,i=null,s=!1;i=e.subscribe(new Fr.Q(t,void 0,void 0,o=>{r=(0,du.Xf)(n(o,Al(n)(e))),i?(i.unsubscribe(),i=null,r.subscribe(t)):s=!0})),s&&(i.unsubscribe(),i=null,r.subscribe(t))})}function Vr(n){return n<=0?()=>Tl.E:(0,or.e)((e,t)=>{let i=[];e.subscribe(new Fr.Q(t,s=>{i.push(s),n<i.length&&i.shift()},()=>{for(const s of i)t.next(s);t.complete()},void 0,()=>{i=null}))})}function vf(n=Zm){return(0,or.e)((e,t)=>{let i=!1;e.subscribe(new Fr.Q(t,s=>{i=!0,t.next(s)},()=>i?t.complete():t.error(n())))})}function Zm(){return new dh}function bf(n){return(0,or.e)((e,t)=>{let i=!1;e.subscribe(new Fr.Q(t,s=>{i=!0,t.next(s)},()=>{i||t.next(n),t.complete()}))})}function fh(n,e){const t=arguments.length>=2;return i=>i.pipe(n?ao((s,r)=>n(s,r,i)):hu.y,(0,ph.q)(1),t?bf(e):vf(()=>new dh))}var Do=G(8505);class la{constructor(e,t){this.id=e,this.url=t}}class ol extends la{constructor(e,t,i="imperative",s=null){super(e,t),this.navigationTrigger=i,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class hd extends la{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class mu extends la{constructor(e,t,i){super(e,t),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Xm extends la{constructor(e,t,i){super(e,t),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class gv extends la{constructor(e,t,i,s){super(e,t),this.urlAfterRedirects=i,this.state=s}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ud extends la{constructor(e,t,i,s){super(e,t),this.urlAfterRedirects=i,this.state=s}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cf extends la{constructor(e,t,i,s,r){super(e,t),this.urlAfterRedirects=i,this.state=s,this.shouldActivate=r}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class dd extends la{constructor(e,t,i,s){super(e,t),this.urlAfterRedirects=i,this.state=s}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qm extends la{constructor(e,t,i,s){super(e,t),this.urlAfterRedirects=i,this.state=s}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cp{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Dl{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class mh{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yv{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jm{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class eg{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gh{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const as="primary";class tg{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function gu(n){return new tg(n)}const Ef="ngNavigationCancelingError";function ic(n){const e=Error("NavigationCancelingError: "+n);return e[Ef]=!0,e}function Hc(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const s={};for(let r=0;r<i.length;r++){const o=i[r],a=n[r];if(o.startsWith(":"))s[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:s}}function Wo(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let s;for(let r=0;r<t.length;r++)if(s=t[r],!Sf(n[s],e[s]))return!1;return!0}function Sf(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((s,r)=>i[r]===s)}return n===e}function sc(n){return Array.prototype.concat.apply([],n)}function yu(n){return n.length>0?n[n.length-1]:null}function Ir(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function kl(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,ln.D)(Promise.resolve(n)):_i(n)}const vv={exact:function dp(n,e,t){if(!Uc(n.segments,e.segments)||!Ol(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!dp(n.children[i],e.children[i],t))return!1;return!0},subset:ca},ig={exact:function up(n,e){return Wo(n,e)},subset:function jc(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Sf(n[t],e[t]))},ignored:()=>!0};function nc(n,e,t){return vv[t.paths](n.root,e.root,t.matrixParams)&&ig[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function ca(n,e,t){return _f(n,e,e.segments,t)}function _f(n,e,t,i){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!Uc(s,t)||e.hasChildren()||!Ol(s,t,i))}if(n.segments.length===t.length){if(!Uc(n.segments,t)||!Ol(n.segments,t,i))return!1;for(const s in e.children)if(!n.children[s]||!ca(n.children[s],e.children[s],i))return!1;return!0}{const s=t.slice(0,n.segments.length),r=t.slice(n.segments.length);return!!(Uc(n.segments,s)&&Ol(n.segments,s,i)&&n.children[as])&&_f(n.children[as],e,r,i)}}function Ol(n,e,t){return e.every((i,s)=>ig[t](n[s].parameters,i.parameters))}class md{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gu(this.queryParams)),this._queryParamMap}toString(){return N.serialize(this)}}class _s{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ir(t,(i,s)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return K(this)}}class yh{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=gu(this.parameters)),this._parameterMap}toString(){return Hi(this)}}function Uc(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}class x{}class M{parse(e){const t=new zC(e);return new md(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ce(e.root,!0)}`,i=function co(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(s=>`${Oe(t)}=${Oe(s)}`).join("&"):`${Oe(t)}=${Oe(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function Tt(n){return encodeURI(n)}(e.fragment)}`:""}`}}const N=new M;function K(n){return n.segments.map(e=>Hi(e)).join("/")}function ce(n,e){if(!n.hasChildren())return K(n);if(e){const t=n.children[as]?ce(n.children[as],!1):"",i=[];return Ir(n.children,(s,r)=>{r!==as&&i.push(`${r}:${ce(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function If(n,e){let t=[];return Ir(n.children,(i,s)=>{s===as&&(t=t.concat(e(i,s)))}),Ir(n.children,(i,s)=>{s!==as&&(t=t.concat(e(i,s)))}),t}(n,(i,s)=>s===as?[ce(n.children[as],!1)]:[`${s}:${ce(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[as]?`${K(n)}/${t[0]}`:`${K(n)}/(${t.join("//")})`}}function fe(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Oe(n){return fe(n).replace(/%3B/gi,";")}function St(n){return fe(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Zt(n){return decodeURIComponent(n)}function Mi(n){return Zt(n.replace(/\+/g,"%20"))}function Hi(n){return`${St(n.path)}${function Oa(n){return Object.keys(n).map(e=>`;${St(e)}=${St(n[e])}`).join("")}(n.parameters)}`}const pp=/^[^\/()?;=#]+/;function Ml(n){const e=n.match(pp);return e?e[0]:""}const vh=/^[^=?&#]+/,bh=/^[^&#]+/;class zC{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new _s([],{}):new _s([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[as]=new _s(e,t)),i}parseSegment(){const e=Ml(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new yh(Zt(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ml(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const s=Ml(this.remaining);s&&(i=s,this.capture(i))}e[Zt(t)]=Zt(i)}parseQueryParam(e){const t=function ha(n){const e=n.match(vh);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function xf(n){const e=n.match(bh);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const s=Mi(t),r=Mi(i);if(e.hasOwnProperty(s)){let o=e[s];Array.isArray(o)||(o=[o],e[s]=o),o.push(r)}else e[s]=r}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Ml(this.remaining),s=this.remaining[i.length];if("/"!==s&&")"!==s&&";"!==s)throw new Error(`Cannot parse url '${this.url}'`);let r;i.indexOf(":")>-1?(r=i.substr(0,i.indexOf(":")),this.capture(r),this.capture(":")):e&&(r=as);const o=this.parseChildren();t[r]=1===Object.keys(o).length?o[as]:new _s([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class WC{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=sg(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=sg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=bv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return bv(e,this._root).map(t=>t.value)}}function sg(n,e){if(n===e.value)return e;for(const t of e.children){const i=sg(n,t);if(i)return i}return null}function bv(n,e){if(n===e.value)return[e];for(const t of e.children){const i=bv(n,t);if(i.length)return i.unshift(e),i}return[]}class Pl{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function gd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Tf extends WC{constructor(e,t){super(e),this.snapshot=t,rg(this,e)}toString(){return this.snapshot.toString()}}function qC(n,e){const t=function Cv(n,e){const o=new ng([],{},{},"",{},as,e,null,n.root,-1,{});return new mp("",new Pl(o,[]))}(n,e),i=new ar([new yh("",{})]),s=new ar({}),r=new ar({}),o=new ar({}),a=new ar(""),u=new fp(i,s,o,a,r,as,e,t.root);return u.snapshot=t.root,new Tf(new Pl(u,[]),t)}class fp{constructor(e,t,i,s,r,o,a,u){this.url=e,this.params=t,this.queryParams=i,this.fragment=s,this.data=r,this.outlet=o,this.component=a,this._futureSnapshot=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Qi.U)(e=>gu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Qi.U)(e=>gu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xr(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const s=t[i],r=t[i-1];if(s.routeConfig&&""===s.routeConfig.path)i--;else{if(r.component)break;i--}}return function Uw(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(i))}class ng{constructor(e,t,i,s,r,o,a,u,p,y,E){this.url=e,this.params=t,this.queryParams=i,this.fragment=s,this.data=r,this.outlet=o,this.component=a,this.routeConfig=u,this._urlSegment=p,this._lastPathIndex=y,this._resolve=E}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=gu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class mp extends WC{constructor(e,t){super(t),this.url=e,rg(this,t)}toString(){return $C(this._root)}}function rg(n,e){e.value._routerState=n,e.children.forEach(t=>rg(n,t))}function $C(n){const e=n.children.length>0?` { ${n.children.map($C).join(", ")} } `:"";return`${n.value}${e}`}function Ev(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Wo(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Wo(e.params,t.params)||n.params.next(t.params),function wf(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Wo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Wo(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function wv(n,e){const t=Wo(n.params,e.params)&&function UC(n,e){return Uc(n,e)&&n.every((t,i)=>Wo(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||wv(n.parent,e.parent))}function gp(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const s=function rT(n,e,t){return e.children.map(i=>{for(const s of t.children)if(n.shouldReuseRoute(i.value,s.value.snapshot))return gp(n,i,s);return gp(n,i)})}(n,e,t);return new Pl(i,s)}{if(n.shouldAttach(e.value)){const r=n.retrieve(e.value);if(null!==r){const o=r.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>gp(n,a)),o}}const i=function oT(n){return new fp(new ar(n.url),new ar(n.params),new ar(n.queryParams),new ar(n.fragment),new ar(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(r=>gp(n,r));return new Pl(i,s)}}function ho(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function yd(n){return"object"==typeof n&&null!=n&&n.outlets}function yp(n,e,t,i,s){let r={};return i&&Ir(i,(o,a)=>{r[a]=Array.isArray(o)?o.map(u=>`${u}`):`${o}`}),new md(t.root===n?e:Df(t.root,n,e),r,s)}function Df(n,e,t){const i={};return Ir(n.children,(s,r)=>{i[r]=s===e?t:Df(s,e,t)}),new _s(n.segments,i)}class ko{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&ho(i[0]))throw new Error("Root segment cannot have matrix parameters");const s=i.find(yd);if(s&&s!==yu(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class kf{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function YC(n,e,t){if(n||(n=new _s([],{})),0===n.segments.length&&n.hasChildren())return ag(n,e,t);const i=function Sv(n,e,t){let i=0,s=e;const r={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(i>=t.length)return r;const o=n.segments[s],a=t[i];if(yd(a))break;const u=`${a}`,p=i<t.length-1?t[i+1]:null;if(s>0&&void 0===u)break;if(u&&p&&"object"==typeof p&&void 0===p.outlets){if(!Mf(u,p,o))return r;i+=2}else{if(!Mf(u,{},o))return r;i++}s++}return{match:!0,pathIndex:s,commandIndex:i}}(n,e,t),s=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const r=new _s(n.segments.slice(0,i.pathIndex),{});return r.children[as]=new _s(n.segments.slice(i.pathIndex),n.children),ag(r,0,s)}return i.match&&0===s.length?new _s(n.segments,{}):i.match&&!n.hasChildren()?Of(n,e,t):i.match?ag(n,0,s):Of(n,e,t)}function ag(n,e,t){if(0===t.length)return new _s(n.segments,{});{const i=function og(n){return yd(n[0])?n[0].outlets:{[as]:n}}(t),s={};return Ir(i,(r,o)=>{"string"==typeof r&&(r=[r]),null!==r&&(s[o]=YC(n.children[o],e,r))}),Ir(n.children,(r,o)=>{void 0===i[o]&&(s[o]=r)}),new _s(n.segments,s)}}function Of(n,e,t){const i=n.segments.slice(0,e);let s=0;for(;s<t.length;){const r=t[s];if(yd(r)){const u=lg(r.outlets);return new _s(i,u)}if(0===s&&ho(t[0])){i.push(new yh(n.segments[e].path,_v(t[0]))),s++;continue}const o=yd(r)?r.outlets[as]:`${r}`,a=s<t.length-1?t[s+1]:null;o&&a&&ho(a)?(i.push(new yh(o,_v(a))),s+=2):(i.push(new yh(o,{})),s++)}return new _s(i,{})}function lg(n){const e={};return Ir(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=Of(new _s([],{}),0,t))}),e}function _v(n){const e={};return Ir(n,(t,i)=>e[i]=`${t}`),e}function Mf(n,e,t){return n==t.path&&Wo(e,t.parameters)}class $w{constructor(e,t,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=s}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Ev(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const s=gd(t);e.children.forEach(r=>{const o=r.value.outlet;this.deactivateRoutes(r,s[o],i),delete s[o]}),Ir(s,(r,o)=>{this.deactivateRouteAndItsChildren(r,i)})}deactivateRoutes(e,t,i){const s=e.value,r=t?t.value:null;if(s===r)if(s.component){const o=i.getContext(s.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else r&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),s=i&&e.value.component?i.children:t,r=gd(e);for(const o of Object.keys(r))this.deactivateRouteAndItsChildren(r[o],s);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),s=i&&e.value.component?i.children:t,r=gd(e);for(const o of Object.keys(r))this.deactivateRouteAndItsChildren(r[o],s);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const s=gd(t);e.children.forEach(r=>{this.activateRoutes(r,s[r.value.outlet],i),this.forwardEvent(new eg(r.value.snapshot))}),e.children.length&&this.forwardEvent(new yv(e.value.snapshot))}activateRoutes(e,t,i){const s=e.value,r=t?t.value:null;if(Ev(s),s===r)if(s.component){const o=i.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(s.component){const o=i.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const a=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Ev(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=function Iv(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(s.snapshot),u=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=s,o.resolver=u,o.outlet&&o.outlet.activateWith(s,u),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class xv{constructor(e,t){this.routes=e,this.module=t}}function vu(n){return"function"==typeof n}function bd(n){return n instanceof md}const I=Symbol("INITIAL_VALUE");function P(){return lo(n=>od(n.map(e=>e.pipe((0,ph.q)(1),ld(I)))).pipe(Br((e,t)=>{let i=!1;return t.reduce((s,r,o)=>s!==I?s:(r===I&&(i=!0),i||!1!==r&&o!==t.length-1&&!bd(r)?s:r),e)},I),ao(e=>e!==I),(0,Qi.U)(e=>bd(e)?e:!0===e),(0,ph.q)(1)))}class F{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ie,this.attachRef=null}}class ie{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new F,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let ve=(()=>{class n{constructor(t,i,s,r,o){this.parentContexts=t,this.location=i,this.resolver=s,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=r||as,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const o=(i=i||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,u=new pt(t,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,u),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ie),d.Y36(d.s_b),d.Y36(d._Vd),d.$8M("name"),d.Y36(d.sBO))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class pt{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===fp?this.route:e===ie?this.childContexts:this.parent.get(e,t)}}let Je=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,i){1&t&&d._UZ(0,"router-outlet")},directives:[ve],encapsulation:2}),n})();function Lt(n,e=""){for(let t=0;t<n.length;t++){const i=n[t];Ti(i,us(e,i))}}function Ti(n,e){n.children&&Lt(n.children,e)}function us(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Ys(n){const e=n.children&&n.children.map(Ys),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==as&&(t.component=Je),t}function er(n){return n.outlet||as}function rc(n,e){const t=n.filter(i=>er(i)===e);return t.push(...n.filter(i=>er(i)!==e)),t}const al={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function zc(n,e,t){var i;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},al):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const r=(e.matcher||Hc)(t,n,e);if(!r)return Object.assign({},al);const o={};Ir(r.posParams,(u,p)=>{o[p]=u.path});const a=r.consumed.length>0?Object.assign(Object.assign({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:a,positionalParamSegments:null!==(i=r.posParams)&&void 0!==i?i:{}}}function Ma(n,e,t,i,s="corrected"){if(t.length>0&&function KC(n,e,t){return t.some(i=>Ch(n,e,i)&&er(i)!==as)}(n,t,i)){const o=new _s(e,function cg(n,e,t,i){const s={};s[as]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const r of t)if(""===r.path&&er(r)!==as){const o=new _s([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,s[er(r)]=o}return s}(n,e,i,new _s(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function hg(n,e,t){return t.some(i=>Ch(n,e,i))}(n,t,i)){const o=new _s(n.segments,function Pf(n,e,t,i,s,r){const o={};for(const a of i)if(Ch(n,t,a)&&!s[er(a)]){const u=new _s([],{});u._sourceSegment=n,u._segmentIndexShift="legacy"===r?n.segments.length:e.length,o[er(a)]=u}return Object.assign(Object.assign({},s),o)}(n,e,t,i,n.children,s));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const r=new _s(n.segments,n.children);return r._sourceSegment=n,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:t}}function Ch(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Tv(n,e,t,i){return!!(er(n)===i||i!==as&&Ch(e,t,n))&&("**"===n.path||zc(e,n,t).matched)}function Lf(n,e,t){return 0===e.length&&!n.children[t]}class Cd{constructor(e){this.segmentGroup=e||null}}class ZC{constructor(e){this.urlTree=e}}function Av(n){return new To.y(e=>e.error(new Cd(n)))}function VO(n){return new To.y(e=>e.error(new ZC(n)))}function ug(n){return new To.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class HO{constructor(e,t,i,s,r){this.configLoader=t,this.urlSerializer=i,this.urlTree=s,this.config=r,this.allowRedirects=!0,this.ngModule=e.get(d.h0i)}apply(){const e=Ma(this.urlTree.root,[],[],this.config).segmentGroup,t=new _s(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,as).pipe((0,Qi.U)(r=>this.createUrlTree(Zw(r),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Al(r=>{if(r instanceof ZC)return this.allowRedirects=!1,this.match(r.urlTree);throw r instanceof Cd?this.noMatchError(r):r}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,as).pipe((0,Qi.U)(s=>this.createUrlTree(Zw(s),e.queryParams,e.fragment))).pipe(Al(s=>{throw s instanceof Cd?this.noMatchError(s):s}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,i){const s=e.segments.length>0?new _s([],{[as]:e}):e;return new md(s,t,i)}expandSegmentGroup(e,t,i,s){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe((0,Qi.U)(r=>new _s([],r))):this.expandSegment(e,i,t,i.segments,s,!0)}expandChildren(e,t,i){const s=[];for(const r of Object.keys(i.children))"primary"===r?s.unshift(r):s.push(r);return(0,ln.D)(s).pipe(Lc(r=>{const o=i.children[r],a=rc(t,r);return this.expandSegmentGroup(e,a,o,r).pipe((0,Qi.U)(u=>({segment:u,outlet:r})))}),Br((r,o)=>(r[o.outlet]=o.segment,r),{}),function cd(n,e){const t=arguments.length>=2;return i=>i.pipe(n?ao((s,r)=>n(s,r,i)):hu.y,Vr(1),t?bf(e):vf(()=>new dh))}())}expandSegment(e,t,i,s,r,o){return(0,ln.D)(i).pipe(Lc(a=>this.expandSegmentAgainstRoute(e,t,i,a,s,r,o).pipe(Al(p=>{if(p instanceof Cd)return _i(null);throw p}))),fh(a=>!!a),Al((a,u)=>{if(a instanceof dh||"EmptyError"===a.name){if(Lf(t,s,r))return _i(new _s([],{}));throw new Cd(t)}throw a}))}expandSegmentAgainstRoute(e,t,i,s,r,o,a){return Tv(s,t,r,o)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,r,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,s,r,o):Av(t):Av(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,s,r,o){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,s,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,s,r,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,s){const r=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?VO(r):this.lineralizeSegments(i,r).pipe((0,wr.z)(o=>{const a=new _s(o,{});return this.expandSegment(e,a,t,o,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,s,r,o){const{matched:a,consumedSegments:u,lastChild:p,positionalParamSegments:y}=zc(t,s,r);if(!a)return Av(t);const E=this.applyRedirectCommands(u,s.redirectTo,y);return s.redirectTo.startsWith("/")?VO(E):this.lineralizeSegments(s,E).pipe((0,wr.z)(_=>this.expandSegment(e,t,i,_.concat(r.slice(p)),o,!1)))}matchSegmentAgainstRoute(e,t,i,s,r){if("**"===i.path)return i.loadChildren?(i._loadedConfig?_i(i._loadedConfig):this.configLoader.load(e.injector,i)).pipe((0,Qi.U)(_=>(i._loadedConfig=_,new _s(s,{})))):_i(new _s(s,{}));const{matched:o,consumedSegments:a,lastChild:u}=zc(t,i,s);if(!o)return Av(t);const p=s.slice(u);return this.getChildConfig(e,i,s).pipe((0,wr.z)(E=>{const _=E.module,D=E.routes,{segmentGroup:L,slicedSegments:V}=Ma(t,a,p,D),H=new _s(L.segments,L.children);if(0===V.length&&H.hasChildren())return this.expandChildren(_,D,H).pipe((0,Qi.U)(Ae=>new _s(a,Ae)));if(0===D.length&&0===V.length)return _i(new _s(a,{}));const se=er(i)===r;return this.expandSegment(_,H,D,V,se?as:r,!0).pipe((0,Qi.U)(re=>new _s(a.concat(re.segments),re.children)))}))}getChildConfig(e,t,i){return t.children?_i(new xv(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?_i(t._loadedConfig):this.runCanLoadGuards(e.injector,t,i).pipe((0,wr.z)(s=>s?this.configLoader.load(e.injector,t).pipe((0,Qi.U)(r=>(t._loadedConfig=r,r))):function Yw(n){return new To.y(e=>e.error(ic(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):_i(new xv([],e))}runCanLoadGuards(e,t,i){const s=t.canLoad;return s&&0!==s.length?_i(s.map(o=>{const a=e.get(o);let u;if(function Gw(n){return n&&vu(n.canLoad)}(a))u=a.canLoad(t,i);else{if(!vu(a))throw new Error("Invalid CanLoad guard");u=a(t,i)}return kl(u)})).pipe(P(),(0,Do.b)(o=>{if(!bd(o))return;const a=ic(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),(0,Qi.U)(o=>!0===o)):_i(!0)}lineralizeSegments(e,t){let i=[],s=t.root;for(;;){if(i=i.concat(s.segments),0===s.numberOfChildren)return _i(i);if(s.numberOfChildren>1||!s.children[as])return ug(e.redirectTo);s=s.children[as]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreatreUrlTree(e,t,i,s){const r=this.createSegmentGroup(e,t.root,i,s);return new md(r,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Ir(e,(s,r)=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);i[r]=t[a]}else i[r]=s}),i}createSegmentGroup(e,t,i,s){const r=this.createSegments(e,t.segments,i,s);let o={};return Ir(t.children,(a,u)=>{o[u]=this.createSegmentGroup(e,a,i,s)}),new _s(r,o)}createSegments(e,t,i,s){return t.map(r=>r.path.startsWith(":")?this.findPosParam(e,r,s):this.findOrReturn(r,i))}findPosParam(e,t,i){const s=i[t.path.substring(1)];if(!s)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return s}findOrReturn(e,t){let i=0;for(const s of t){if(s.path===e.path)return t.splice(i),s;i++}return e}}function Zw(n){const e={};for(const i of Object.keys(n.children)){const r=Zw(n.children[i]);(r.segments.length>0||r.hasChildren())&&(e[i]=r)}return function Kw(n){if(1===n.numberOfChildren&&n.children[as]){const e=n.children[as];return new _s(n.segments.concat(e.segments),e.children)}return n}(new _s(n.segments,e))}class lT{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class XC{constructor(e,t){this.component=e,this.route=t}}function UO(n,e,t){const i=n._root;return dg(i,e?e._root:null,t,[i.value])}function Dv(n,e,t){const i=function Xw(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:t).get(n)}function dg(n,e,t,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const r=gd(e);return n.children.forEach(o=>{(function Qw(n,e,t,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const r=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&r.routeConfig===o.routeConfig){const u=function WO(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Uc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Uc(n.url,e.url)||!Wo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!wv(n,e)||!Wo(n.queryParams,e.queryParams);default:return!wv(n,e)}}(o,r,r.routeConfig.runGuardsAndResolvers);u?s.canActivateChecks.push(new lT(i)):(r.data=o.data,r._resolvedData=o._resolvedData),dg(n,e,r.component?a?a.children:null:t,i,s),u&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new XC(a.outlet.component,o))}else o&&kv(e,a,s),s.canActivateChecks.push(new lT(i)),dg(n,null,r.component?a?a.children:null:t,i,s)})(o,r[o.value.outlet],t,i.concat([o.value]),s),delete r[o.value.outlet]}),Ir(r,(o,a)=>kv(o,t.getContext(a),s)),s}function kv(n,e,t){const i=gd(n),s=n.value;Ir(i,(r,o)=>{kv(r,s.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new XC(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}class pT{}function Jw(n){return new To.y(e=>e.error(n))}class eS{constructor(e,t,i,s,r,o){this.rootComponentType=e,this.config=t,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=r,this.relativeLinkResolution=o}recognize(){const e=Ma(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,as);if(null===t)return null;const i=new ng([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},as,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new Pl(i,t),r=new mp(this.url,s);return this.inheritParamsAndData(r._root),r}inheritParamsAndData(e){const t=e.value,i=xr(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,i){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,i)}processChildren(e,t){const i=[];for(const r of Object.keys(t.children)){const o=t.children[r],a=rc(e,r),u=this.processSegmentGroup(a,o,r);if(null===u)return null;i.push(...u)}const s=tS(i);return function mT(n){n.sort((e,t)=>e.value.outlet===as?-1:t.value.outlet===as?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}processSegment(e,t,i,s){for(const r of e){const o=this.processSegmentAgainstRoute(r,t,i,s);if(null!==o)return o}return Lf(t,i,s)?[]:null}processSegmentAgainstRoute(e,t,i,s){if(e.redirectTo||!Tv(e,t,i,s))return null;let r,o=[],a=[];if("**"===e.path){const D=i.length>0?yu(i).parameters:{};r=new ng(i,D,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,pg(e),er(e),e.component,e,iS(t),t0(t)+i.length,yT(e))}else{const D=zc(t,e,i);if(!D.matched)return null;o=D.consumedSegments,a=i.slice(D.lastChild),r=new ng(o,D.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,pg(e),er(e),e.component,e,iS(t),t0(t)+o.length,yT(e))}const u=function JC(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:p,slicedSegments:y}=Ma(t,o,a,u.filter(D=>void 0===D.redirectTo),this.relativeLinkResolution);if(0===y.length&&p.hasChildren()){const D=this.processChildren(u,p);return null===D?null:[new Pl(r,D)]}if(0===u.length&&0===y.length)return[new Pl(r,[])];const E=er(e)===s,_=this.processSegment(u,p,y,E?as:s);return null===_?null:[new Pl(r,_)]}}function e0(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function tS(n){const e=[],t=new Set;for(const i of n){if(!e0(i)){e.push(i);continue}const s=e.find(r=>i.value.routeConfig===r.value.routeConfig);void 0!==s?(s.children.push(...i.children),t.add(s)):e.push(i)}for(const i of t){const s=tS(i.children);e.push(new Pl(i.value,s))}return e.filter(i=>!t.has(i))}function iS(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function t0(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function pg(n){return n.data||{}}function yT(n){return n.resolve||{}}function s0(n){return lo(e=>{const t=n(e);return t?(0,ln.D)(t).pipe((0,Qi.U)(()=>e)):_i(e)})}class KO extends class CT{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const n0=new d.OlP("ROUTES");class ET{constructor(e,t,i,s){this.injector=e,this.compiler=t,this.onLoadStartListener=i,this.onLoadEndListener=s}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const s=this.loadModuleFactory(t.loadChildren).pipe((0,Qi.U)(r=>{this.onLoadEndListener&&this.onLoadEndListener(t);const o=r.create(e);return new xv(sc(o.injector.get(n0,void 0,d.XFs.Self|d.XFs.Optional)).map(Ys),o)}),Al(r=>{throw t._loader$=void 0,r}));return t._loader$=new Km(s,()=>new rl.x).pipe(ka()),t._loader$}loadModuleFactory(e){return kl(e()).pipe((0,wr.z)(t=>t instanceof d.YKP?_i(t):(0,ln.D)(this.compiler.compileModuleAsync(t))))}}class Eh{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function XO(n){throw n}function wT(n,e,t){return e.parse("/")}function ST(n,e){return _i(null)}const QO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},JO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let oc=(()=>{class n{constructor(t,i,s,r,o,a,u){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=s,this.location=r,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new rl.x,this.errorHandler=XO,this.malformedUriErrorHandler=wT,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ST,afterPreactivation:ST},this.urlHandlingStrategy=new Eh,this.routeReuseStrategy=new KO,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(d.h0i),this.console=o.get(d.c2e);const E=o.get(d.R0b);this.isNgZoneEnabled=E instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=function fd(){return new md(new _s([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ET(o,a,_=>this.triggerEvent(new cp(_)),_=>this.triggerEvent(new Dl(_))),this.routerState=qC(this.currentUrlTree,this.rootComponentType),this.transitions=new ar({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(ao(s=>0!==s.id),(0,Qi.U)(s=>Object.assign(Object.assign({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),lo(s=>{let r=!1,o=!1;return _i(s).pipe((0,Do.b)(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),lo(a=>{const u=this.browserUrlTree.toString(),p=!this.navigated||a.extractedUrl.toString()!==u||u!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||p)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return r0(a.source)&&(this.browserUrlTree=a.extractedUrl),_i(a).pipe(lo(E=>{const _=this.transitions.getValue();return i.next(new ol(E.id,this.serializeUrl(E.extractedUrl),E.source,E.restoredState)),_!==this.transitions.getValue()?Tl.E:Promise.resolve(E)}),function jO(n,e,t,i){return lo(s=>function aT(n,e,t,i,s){return new HO(n,e,t,i,s).apply()}(n,e,t,s.extractedUrl,i).pipe((0,Qi.U)(r=>Object.assign(Object.assign({},s),{urlAfterRedirects:r}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Do.b)(E=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:E.urlAfterRedirects})}),function vT(n,e,t,i,s){return(0,wr.z)(r=>function fT(n,e,t,i,s="emptyOnly",r="legacy"){try{const o=new eS(n,e,t,i,s,r).recognize();return null===o?Jw(new pT):_i(o)}catch(o){return Jw(o)}}(n,e,r.urlAfterRedirects,t(r.urlAfterRedirects),i,s).pipe((0,Qi.U)(o=>Object.assign(Object.assign({},r),{targetSnapshot:o}))))}(this.rootComponentType,this.config,E=>this.serializeUrl(E),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Do.b)(E=>{if("eager"===this.urlUpdateStrategy){if(!E.extras.skipLocationChange){const D=this.urlHandlingStrategy.merge(E.urlAfterRedirects,E.rawUrl);this.setBrowserUrl(D,E)}this.browserUrlTree=E.urlAfterRedirects}const _=new gv(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);i.next(_)}));if(p&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:_,extractedUrl:D,source:L,restoredState:V,extras:H}=a,se=new ol(_,this.serializeUrl(D),L,V);i.next(se);const _e=qC(D,this.rootComponentType).snapshot;return _i(Object.assign(Object.assign({},a),{targetSnapshot:_e,urlAfterRedirects:D,extras:Object.assign(Object.assign({},H),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),Tl.E}),s0(a=>{const{targetSnapshot:u,id:p,extractedUrl:y,rawUrl:E,extras:{skipLocationChange:_,replaceUrl:D}}=a;return this.hooks.beforePreactivation(u,{navigationId:p,appliedUrlTree:y,rawUrlTree:E,skipLocationChange:!!_,replaceUrl:!!D})}),(0,Do.b)(a=>{const u=new ud(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(u)}),(0,Qi.U)(a=>Object.assign(Object.assign({},a),{guards:UO(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function cT(n,e){return(0,wr.z)(t=>{const{targetSnapshot:i,currentSnapshot:s,guards:{canActivateChecks:r,canDeactivateChecks:o}}=t;return 0===o.length&&0===r.length?_i(Object.assign(Object.assign({},t),{guardsResult:!0})):function hT(n,e,t,i){return(0,ln.D)(n).pipe((0,wr.z)(s=>function $O(n,e,t,i,s){const r=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return r&&0!==r.length?_i(r.map(a=>{const u=Dv(a,e,s);let p;if(function C(n){return n&&vu(n.canDeactivate)}(u))p=kl(u.canDeactivate(n,e,t,i));else{if(!vu(u))throw new Error("Invalid CanDeactivate guard");p=kl(u(n,e,t,i))}return p.pipe(fh())})).pipe(P()):_i(!0)}(s.component,s.route,t,e,i)),fh(s=>!0!==s,!0))}(o,i,s,n).pipe((0,wr.z)(a=>a&&function vp(n){return"boolean"==typeof n}(a)?function Rf(n,e,t,i){return(0,ln.D)(e).pipe(Lc(s=>Vc(function dT(n,e){return null!==n&&e&&e(new mh(n)),_i(!0)}(s.route.parent,i),function uT(n,e){return null!==n&&e&&e(new Jm(n)),_i(!0)}(s.route,i),function QC(n,e,t){const i=e[e.length-1],r=e.slice(0,e.length-1).reverse().map(o=>function zO(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>pu(()=>_i(o.guards.map(u=>{const p=Dv(u,o.node,t);let y;if(function v(n){return n&&vu(n.canActivateChild)}(p))y=kl(p.canActivateChild(i,n));else{if(!vu(p))throw new Error("Invalid CanActivateChild guard");y=kl(p(i,n))}return y.pipe(fh())})).pipe(P())));return _i(r).pipe(P())}(n,s.path,t),function qO(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return _i(!0);const s=i.map(r=>pu(()=>{const o=Dv(r,e,t);let a;if(function w(n){return n&&vu(n.canActivate)}(o))a=kl(o.canActivate(e,n));else{if(!vu(o))throw new Error("Invalid CanActivate guard");a=kl(o(e,n))}return a.pipe(fh())}));return _i(s).pipe(P())}(n,s.route,t))),fh(s=>!0!==s,!0))}(i,r,n,e):_i(a)),(0,Qi.U)(a=>Object.assign(Object.assign({},t),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),(0,Do.b)(a=>{if(bd(a.guardsResult)){const p=ic(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw p.url=a.guardsResult,p}const u=new Cf(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(u)}),ao(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),s0(a=>{if(a.guards.canActivateChecks.length)return _i(a).pipe((0,Do.b)(u=>{const p=new dd(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(p)}),lo(u=>{let p=!1;return _i(u).pipe(function GO(n,e){return(0,wr.z)(t=>{const{targetSnapshot:i,guards:{canActivateChecks:s}}=t;if(!s.length)return _i(t);let r=0;return(0,ln.D)(s).pipe(Lc(o=>function YO(n,e,t,i){return function bT(n,e,t,i){const s=Object.keys(n);if(0===s.length)return _i({});const r={};return(0,ln.D)(s).pipe((0,wr.z)(o=>function sS(n,e,t,i){const s=Dv(n,e,i);return kl(s.resolve?s.resolve(e,t):s(e,t))}(n[o],e,t,i).pipe((0,Do.b)(a=>{r[o]=a}))),Vr(1),(0,wr.z)(()=>Object.keys(r).length===s.length?_i(r):Tl.E))}(n._resolve,n,e,i).pipe((0,Qi.U)(r=>(n._resolvedData=r,n.data=Object.assign(Object.assign({},n.data),xr(n,t).resolve),null)))}(o.route,i,n,e)),(0,Do.b)(()=>r++),Vr(1),(0,wr.z)(o=>r===s.length?_i(t):Tl.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Do.b)({next:()=>p=!0,complete:()=>{p||(this.restoreHistory(u),this.cancelNavigationTransition(u,"At least one route resolver didn't emit any value."))}}))}),(0,Do.b)(u=>{const p=new Qm(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(p)}))}),s0(a=>{const{targetSnapshot:u,id:p,extractedUrl:y,rawUrl:E,extras:{skipLocationChange:_,replaceUrl:D}}=a;return this.hooks.afterPreactivation(u,{navigationId:p,appliedUrlTree:y,rawUrlTree:E,skipLocationChange:!!_,replaceUrl:!!D})}),(0,Qi.U)(a=>{const u=function zw(n,e,t){const i=gp(n,e._root,t?t._root:void 0);return new Tf(i,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:u})}),(0,Do.b)(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>(0,Qi.U)(i=>(new $w(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),(0,Do.b)({next(){r=!0},complete(){r=!0}}),function jC(n){return(0,or.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var a;r||o||this.cancelNavigationTransition(s,`Navigation ID ${s.id} is not equal to the current navigation id ${this.navigationId}`),(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===s.id&&(this.currentNavigation=null)}),Al(a=>{if(o=!0,function hp(n){return n&&n[Ef]}(a)){const u=bd(a.url);u||(this.navigated=!0,this.restoreHistory(s,!0));const p=new mu(s.id,this.serializeUrl(s.extractedUrl),a.message);i.next(p),u?setTimeout(()=>{const y=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),E={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||r0(s.source)};this.scheduleNavigation(y,"imperative",null,E,{resolve:s.resolve,reject:s.reject,promise:s.promise})},0):s.resolve(!1)}else{this.restoreHistory(s,!0);const u=new Xm(s.id,this.serializeUrl(s.extractedUrl),a);i.next(u);try{s.resolve(this.errorHandler(a))}catch(p){s.reject(p)}}return Tl.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var s;const r={replaceUrl:!0},o=(null===(s=t.state)||void 0===s?void 0:s.navigationId)?t.state:null;if(o){const u=Object.assign({},o);delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(r.state=u)}const a=this.parseUrl(t.url);this.scheduleNavigation(a,i,o,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Lt(t),this.config=t.map(Ys),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:s,queryParams:r,fragment:o,queryParamsHandling:a,preserveFragment:u}=i,p=s||this.routerState.root,y=u?this.currentUrlTree.fragment:o;let E=null;switch(a){case"merge":E=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":E=this.currentUrlTree.queryParams;break;default:E=r||null}return null!==E&&(E=this.removeEmptyProps(E)),function Af(n,e,t,i,s){if(0===t.length)return yp(e.root,e.root,e,i,s);const r=function vd(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ko(!0,0,n);let e=0,t=!1;const i=n.reduce((s,r,o)=>{if("object"==typeof r&&null!=r){if(r.outlets){const a={};return Ir(r.outlets,(u,p)=>{a[p]="string"==typeof u?u.split("/"):u}),[...s,{outlets:a}]}if(r.segmentPath)return[...s,r.segmentPath]}return"string"!=typeof r?[...s,r]:0===o?(r.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?t=!0:".."===a?e++:""!=a&&s.push(a))}),s):[...s,r]},[]);return new ko(t,e,i)}(t);if(r.toRoot())return yp(e.root,new _s([],{}),e,i,s);const o=function GC(n,e,t){if(n.isAbsolute)return new kf(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const r=t.snapshot._urlSegment;return new kf(r,r===e.root,0)}const i=ho(n.commands[0])?0:1;return function Ww(n,e,t){let i=n,s=e,r=t;for(;r>s;){if(r-=s,i=i.parent,!i)throw new Error("Invalid number of '../'");s=i.segments.length}return new kf(i,!1,s-r)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(r,e,n),a=o.processChildren?ag(o.segmentGroup,o.index,r.commands):YC(o.segmentGroup,o.index,r.commands);return yp(o.segmentGroup,a,e,i,s)}(p,this.currentUrlTree,t,E,null!=y?y:null)}navigateByUrl(t,i={skipLocationChange:!1}){const s=bd(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function _T(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(s){i=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return i}isActive(t,i){let s;if(s=!0===i?Object.assign({},QO):!1===i?Object.assign({},JO):i,bd(t))return nc(this.currentUrlTree,t,s);const r=this.parseUrl(t);return nc(this.currentUrlTree,r,s)}removeEmptyProps(t){return Object.keys(t).reduce((i,s)=>{const r=t[s];return null!=r&&(i[s]=r),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new hd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,s,r,o){var a,u,p;if(this.disposed)return Promise.resolve(!1);const y=this.transitions.value,E=r0(i)&&y&&!r0(y.source),_=y.rawUrl.toString()===t.toString(),D=y.id===(null===(a=this.currentNavigation)||void 0===a?void 0:a.id);if(E&&_&&D)return Promise.resolve(!0);let V,H,se;o?(V=o.resolve,H=o.reject,se=o.promise):se=new Promise((Ae,gt)=>{V=Ae,H=gt});const _e=++this.navigationId;let re;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),re=s&&s.\u0275routerPageId?s.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?null!==(u=this.browserPageId)&&void 0!==u?u:0:(null!==(p=this.browserPageId)&&void 0!==p?p:0)+1):re=0,this.setTransition({id:_e,targetPageId:re,source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:V,reject:H,promise:se,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),se.catch(Ae=>Promise.reject(Ae))}setBrowserUrl(t,i){const s=this.urlSerializer.serialize(t),r=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl?this.location.replaceState(s,"",r):this.location.go(s,"",r)}restoreHistory(t,i=!1){var s,r;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)||0===o?this.currentUrlTree===(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i){const s=new mu(t.id,this.serializeUrl(t.extractedUrl),i);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function r0(n){return"imperative"!==n}class oS{}class Wc{preload(e,t){return _i(null)}}let aS=(()=>{class n{constructor(t,i,s,r){this.router=t,this.injector=s,this.preloadingStrategy=r,this.loader=new ET(s,i,u=>t.triggerEvent(new cp(u)),u=>t.triggerEvent(new Dl(u)))}setUpPreloading(){this.subscription=this.router.events.pipe(ao(t=>t instanceof hd),Lc(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(d.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const s=[];for(const r of i)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const o=r._loadedConfig;s.push(this.processRoutes(o.module,o.routes))}else r.loadChildren&&!r.canLoad?s.push(this.preloadConfig(t,r)):r.children&&s.push(this.processRoutes(t,r.children));return(0,ln.D)(s).pipe((0,Bc.J)(),(0,Qi.U)(r=>{}))}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?_i(i._loadedConfig):this.loader.load(t.injector,i)).pipe((0,wr.z)(r=>(i._loadedConfig=r,this.processRoutes(r.module,r.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oc),d.LFG(d.Sil),d.LFG(d.zs3),d.LFG(oS))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),lS=(()=>{class n{constructor(t,i,s={}){this.router=t,this.viewportScroller=i,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ol?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof hd&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof gh&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new gh(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const ll=new d.OlP("ROUTER_CONFIGURATION"),a0=new d.OlP("ROUTER_FORROOT_GUARD"),AT=[Gt,{provide:x,useClass:M},{provide:oc,useFactory:function hS(n,e,t,i,s,r,o={},a,u){const p=new oc(null,n,e,t,i,s,sc(r));return a&&(p.urlHandlingStrategy=a),u&&(p.routeReuseStrategy=u),function uS(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,p),o.enableTracing&&p.events.subscribe(y=>{var E,_;null===(E=console.group)||void 0===E||E.call(console,`Router Event: ${y.constructor.name}`),console.log(y.toString()),console.log(y),null===(_=console.groupEnd)||void 0===_||_.call(console)}),p},deps:[x,ie,Gt,d.zs3,d.Sil,n0,ll,[class ZO{},new d.FiY],[class yV{},new d.FiY]]},ie,{provide:fp,useFactory:function dS(n){return n.routerState.root},deps:[oc]},aS,Wc,class o0{preload(e,t){return t().pipe(Al(()=>_i(null)))}},{provide:ll,useValue:{enableTracing:!1}}];function cS(){return new d.PXZ("Router",oc)}let eM=(()=>{class n{constructor(t,i){}static forRoot(t,i){return{ngModule:n,providers:[AT,Ov(t),{provide:a0,useFactory:l0,deps:[[oc,new d.FiY,new d.tp0]]},{provide:ll,useValue:i||{}},{provide:Fe,useFactory:vV,deps:[Be,[new d.tBr(Et),new d.FiY],ll]},{provide:lS,useFactory:DT,deps:[oc,qh,ll]},{provide:oS,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:Wc},{provide:d.PXZ,multi:!0,useFactory:cS},[kT,{provide:d.ip1,multi:!0,useFactory:tM,deps:[kT]},{provide:OT,useFactory:iM,deps:[kT]},{provide:d.tb,multi:!0,useExisting:OT}]]}}static forChild(t){return{ngModule:n,providers:[Ov(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(a0,8),d.LFG(oc,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function DT(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new lS(n,e,t)}function vV(n,e,t={}){return t.useHash?new wt(n,e):new Dt(n,e)}function l0(n){return"guarded"}function Ov(n){return[{provide:d.deG,multi:!0,useValue:n},{provide:n0,multi:!0,useValue:n}]}let kT=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new rl.x}appInitializer(){return this.injector.get(he,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const s=new Promise(a=>i=a),r=this.injector.get(oc),o=this.injector.get(ll);return"disabled"===o.initialNavigation?(r.setUpLocationChangeListener(),i(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(r.hooks.afterPreactivation=()=>this.initNavigation?_i(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),r.initialNavigation()):i(!0),s})}bootstrapListener(t){const i=this.injector.get(ll),s=this.injector.get(aS),r=this.injector.get(lS),o=this.injector.get(oc),a=this.injector.get(d.z2F);t===a.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&o.initialNavigation(),s.setUpPreloading(),r.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function tM(n){return n.appInitializer.bind(n)}function iM(n){return n.bootstrapListener.bind(n)}const OT=new d.OlP("Router Initializer");var Ne=G(5861);const Mv="ej2_instances";let bV=0;function h0(n,e){const t=e;return t.unshift(void 0),new(Function.prototype.bind.apply(n,t))}function J(n,e){let t=e;const i=n.replace(/\[/g,".").replace(/\]/g,"").split(".");for(let s=0;s<i.length&&!Jt(t);s++)t=t[i[s]];return t}function pi(n,e,t){const i=n.replace(/\[/g,".").replace(/\]/g,"").split("."),s=t||{};let o,r=s;const a=i.length;let u;for(o=0;o<a;o++)u=i[o],o+1===a?r[u]=void 0===e?{}:e:m(r[u])&&(r[u]={}),r=r[u];return s}function MT(n,e){delete n[e]}function Ed(n){return!m(n)&&n.constructor==={}.constructor}function qc(n,e){if(!m(e)){const t=n,i=e,s=Object.keys(e),r="deepMerge";for(const o of s)m(t[r])||-1===t[r].indexOf(o)||!Ed(i[o])&&!Array.isArray(i[o])?t[o]=i[o]:ut(t[o],t[o],i[o],!0)}}function ut(n,e,t,i){const s=n&&"object"==typeof n?n:{};let r=arguments.length;i&&(r-=1);for(let o=1;o<r;o++){if(!arguments[o])continue;let a=arguments[o];Object.keys(a).forEach(u=>{const p=s[u],y=a[u];let E;const _=Array.isArray(y)&&Array.isArray(p)&&y.length!==p.length,D=!Ft()||!(p instanceof Event||_);i&&D&&(Ed(y)||Array.isArray(y))?Ed(y)?(E=p||{},Array.isArray(E)&&E.hasOwnProperty("isComplexArray")?ut(E,{},y,i):s[u]=ut(E,{},y,i)):(E=Ft()?p&&Object.keys(y).length:p||[],s[u]=ut([],E,y,i)):s[u]=y})}return s}function m(n){return null==n}function Jt(n){return void 0===n}function Ks(n){return n+"_"+bV++}function Pv(n,e){return n===e||!(n===document||!n)&&Pv(n.parentNode,e)}function Nf(n){try{throw new Error(n)}catch(e){throw e.message+"\n"+e.stack}}function ct(n){const e=n+"";return e.match(/auto|cm|mm|in|px|pt|pc|%|em|ex|ch|rem|vw|vh|vmin|vmax/)?e:e+"px"}function Ft(){return false}function fS(n){return Node,n}function ac(n,e){let t="string"==typeof n?document.querySelector(n):n;if(t[Mv])for(const i of t[Mv])if(i instanceof e)return i;return null}const lM={latn:{_digits:"0123456789",_type:"numeric"}},NT={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"\u221e",nan:"NaN",exponential:"E"},fg=[0,1,2,3,4,5,6,7,8,9];let cn=(()=>{class n{static getMainObject(t,i){return J("main."+i,t)}static getNumberingSystem(t){return J("supplemental.numberingSystems",t)||this.numberingSystems}static reverseObject(t,i){const s=i||Object.keys(t),r={};for(const o of s)r.hasOwnProperty(t[o])||(r[t[o]]=o);return r}static getSymbolRegex(t){const i=t.map(s=>s.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")).join("|");return new RegExp(i,"g")}static getSymbolMatch(t){const i=Object.keys(NT),s={};for(const r of i)s[t[r]]=NT[r];return s}static constructRegex(t){const i=t.length;let s="";for(let r=0;r<i;r++)s+=r!==i-1?t[r]+"|":t[r];return s}static convertValueParts(t,i,s){return t.replace(i,r=>s[r])}static getDefaultNumberingSystem(t){const i={};return i.obj=J("numbers",t),i.nSystem=J("defaultNumberingSystem",i.obj),i}static getCurrentNumericOptions(t,i,s,r){const o={},a=this.getDefaultNumberingSystem(t);if(!Jt(a.nSystem)||r){const u=r?J("obj.mapperDigits",a):J(a.nSystem+"._digits",i);Jt(u)||(o.numericPair=this.reverseObject(u,fg),o.numberParseRegex=new RegExp(this.constructRegex(u),"g"),o.numericRegex="["+u[0]+"-"+u[9]+"]",s&&(o.numericRegex=u[0]+"-"+u[9],o.symbolNumberSystem=J(r?"numberSymbols":"symbols-numberSystem-"+a.nSystem,a.obj),o.symbolMatch=this.getSymbolMatch(o.symbolNumberSystem),o.numberSystem=a.nSystem))}return o}static getNumberMapper(t,i,s){const r={mapper:{}},o=this.getDefaultNumberingSystem(t);if(!Jt(o.nSystem)){r.numberSystem=o.nSystem,r.numberSymbols=J("symbols-numberSystem-"+o.nSystem,o.obj),r.timeSeparator=J("timeSeparator",r.numberSymbols);const a=J(o.nSystem+"._digits",i);if(!Jt(a))for(const u of fg)r.mapper[u]=a[u]}return r}}return n.nPair="numericPair",n.nRegex="numericRegex",n.numberingSystems=lM,n})();const mS={DJF:"Fdj",ERN:"Nfk",ETB:"Br",NAD:"$",ZAR:"R",XAF:"FCFA",GHS:"GH\u20b5",XDR:"XDR",AED:"\u062f.\u0625.\u200f",BHD:"\u062f.\u0628.\u200f",DZD:"\u062f.\u062c.\u200f",EGP:"\u062c.\u0645.\u200f",ILS:"\u20aa",IQD:"\u062f.\u0639.\u200f",JOD:"\u062f.\u0627.\u200f",KMF:"CF",KWD:"\u062f.\u0643.\u200f",LBP:"\u0644.\u0644.\u200f",LYD:"\u062f.\u0644.\u200f",MAD:"\u062f.\u0645.\u200f",MRU:"\u0623.\u0645.",OMR:"\u0631.\u0639.\u200f",QAR:"\u0631.\u0642.\u200f",SAR:"\u0631.\u0633.\u200f",SDG:"\u062c.\u0633.",SOS:"S",SSP:"\xa3",SYP:"\u0644.\u0633.\u200f",TND:"\u062f.\u062a.\u200f",YER:"\u0631.\u064a.\u200f",CLP:"$",INR:"\u20b9",TZS:"TSh",EUR:"\u20ac",AZN:"\u20bc",RUB:"\u20bd",BYN:"Br",ZMW:"K",BGN:"\u043b\u0432.",NGN:"\u20a6",XOF:"CFA",BDT:"\u09f3",CNY:"\xa5",BAM:"\u041a\u041c",UGX:"USh",USD:"$",CZK:"K\u010d",GBP:"\xa3",DKK:"kr.",KES:"Ksh",CHF:"CHF",MVR:"\u0783.",BTN:"Nu.",XCD:"EC$",AUD:"$",BBD:"$",BIF:"FBu",BMD:"$",BSD:"$",BWP:"P",BZD:"$",CAD:"$",NZD:"$",FJD:"$",FKP:"\xa3",GIP:"\xa3",GMD:"D",GYD:"$",HKD:"$",IDR:"Rp",JMD:"$",KYD:"$",LRD:"$",MGA:"Ar",MOP:"MOP$",MUR:"Rs",MWK:"MK",MYR:"RM",PGK:"K",PHP:"\u20b1",PKR:"Rs",RWF:"RF",SBD:"$",SCR:"SR",SEK:"kr",SGD:"$",SHP:"\xa3",SLL:"Le",ANG:"NAf.",SZL:"E",TOP:"T$",TTD:"$",VUV:"VT",WST:"WS$",ARS:"$",BOB:"Bs",BRL:"R$",COP:"$",CRC:"\u20a1",CUP:"$",DOP:"$",GTQ:"Q",HNL:"L",MXN:"$",NIO:"C$",PAB:"B/.",PEN:"S/",PYG:"\u20b2",UYU:"$",VES:"Bs.S",IRR:"\u0631\u064a\u0627\u0644",GNF:"FG",CDF:"FC",HTG:"G",XPF:"FCFP",HRK:"kn",HUF:"Ft",AMD:"\u058f",ISK:"kr",JPY:"\xa5",GEL:"\u20be",CVE:"\u200b",KZT:"\u20b8",KHR:"\u17db",KPW:"\u20a9",KRW:"\u20a9",KGS:"\u0441\u043e\u043c",AOA:"Kz",LAK:"\u20ad",MZN:"MTn",MKD:"\u0434\u0435\u043d",MNT:"\u20ae",BND:"$",MMK:"K",NOK:"kr",NPR:"\u0930\u0941",AWG:"Afl.",SRD:"$",PLN:"z\u0142",AFN:"\u060b",STN:"Db",MDL:"L",RON:"lei",UAH:"\u20b4",LKR:"\u0dbb\u0dd4.",ALL:"Lek\xeb",RSD:"\u0434\u0438\u043d.",TJS:"\u0441\u043c\u043d",THB:"\u0e3f",TMT:"m.",TRY:"\u20ba",UZS:"\u0441\u045e\u043c",VND:"\u20ab",TWD:"NT$"};var wd;!function(n){const e=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990];n.getHijriDate=function t(s){let r=s.getDate(),o=s.getMonth(),a=s.getFullYear(),u=o+1,p=a;u<3&&(p-=1,u+=12);let y=Math.floor(p/100),E=y-Math.floor(y/4)-2;const _=Math.floor(365.25*(p+4716))+Math.floor(30.6001*(u+1))+r-E-1524;y=Math.floor((_-1867216.25)/36524.25),E=y-Math.floor(y/4)+1;const D=_+E+1524;let L=Math.floor((D-122.1)/365.25);const V=Math.floor(365.25*L),H=Math.floor((D-V)/30.6001);r=D-V-Math.floor(30.6001*H),o=Math.floor((D-V)/20.6001),o>13&&(L+=1,o-=12),o-=1,a=L-4716;const se=_-24e5,_e=10631/30;let re=_-1948084;const Ae=Math.floor(re/10631);re-=10631*Ae;const gt=Math.floor((re-.1335)/_e),ot=30*Ae+gt;re-=Math.floor(gt*_e+.1335);let ri=Math.floor((re+28.5001)/29.5);13===ri&&(ri=12);const jt=re-Math.floor(29.5001*ri-29);let Ai=0;for(;Ai<e.length&&!(e[Ai]>se);Ai++);const rr=Ai+16260,mt=Math.floor((rr-1)/12);let yt=mt+1,st=rr-12*mt,Ce=se-e[Ai-1]+1;return(Ce+"").length>2&&(Ce=jt,st=ri,yt=ot),{year:yt,month:st,date:Ce}},n.toGregorian=function i(s,r,o){const V=Math.floor(o+e[12*(s-1)+1+(r-1)-16260-1]-1+24e5+.5);let H=Math.floor((V-1867216.25)/36524.25);H=V+1+H-Math.floor(H/4);const se=H+1524,_e=Math.floor((se-122.1)/365.25),re=Math.floor(365.25*_e),Ae=Math.floor((se-re)/30.6001),gt=se-re-Math.floor(30.6001*Ae);let ot=Ae-(Ae>13.5?13:1);const ri=_e-(ot>2.5?4716:4715);return ri<=0&&ot--,new Date(ri+"/"+ot+"/"+gt)}}(wd||(wd={}));const gg=/\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi,FT="stand-alone",BT=["sun","mon","tue","wed","thu","fri","sat"],gS={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate",f:"getMilliseconds"},yS={M:"month",d:"day",E:"weekday",c:"weekday",y:"year",m:"minute",h:"hour",H:"hour",s:"second",L:"month",a:"designator",z:"timeZone",Z:"timeZone",G:"era",f:"milliseconds"};class bS{static dateFormat(e,t,i){const s=mi.getDependables(i,e,t.calendar),o=(J("parserObject.numbers",s),s.dateObject),a={isIslamic:mi.islamicRegex.test(t.calendar)};let u=t.format||mi.getResultantPattern(t.skeleton,s.dateObject,t.type,!1,"");if(a.dateSeperator=mi.getDateSeparator(s.dateObject),Jt(u))Nf("Format options or type given must be invalid");else{u=mi.ConvertDateToWeekFormat(u),a.pattern=u,a.numMapper=cn.getNumberMapper(s.parserObject,cn.getNumberingSystem(i));const p=u.match(gg)||[];for(const y of p){const E=y.length;let _=y[0];switch("K"===_&&(_="h"),_){case"E":case"c":a.weekday=s.dateObject[mi.days][FT][mi.monthIndex[E]];break;case"M":case"L":a.month=s.dateObject[mi.month][FT][mi.monthIndex[E]];break;case"a":a.designator=J("dayPeriods.format.wide",o);break;case"G":a.era=J("eras."+(E<=3?"eraAbbr":4===E?"eraNames":"eraNarrow"),s.dateObject);break;case"z":a.timeZone=J("dates.timeZoneNames",s.parserObject)}}}return p=>isNaN(p.getDate())?null:this.intDateFormatter(p,a)}static intDateFormatter(e,t){let s="";const r=t.pattern.match(mi.dateParseRegex),o=this.getCurrentDateValue(e,t.isIslamic);for(const a of r){const u=a.length;let p=a[0];"K"===p&&(p="h");let y,_,D,E="",L="";switch(p){case"M":case"L":y=o.month,u>2?s+=t.month[y]:_=!0;break;case"E":case"c":s+=t.weekday[BT[e.getDay()]];break;case"H":case"h":case"m":case"s":case"d":case"f":if(_=!0,"d"===p)y=o.date;else if("f"===p){_=!1,D=!0,E=e[gS[p]]().toString(),E=E.substring(0,u);const Ae=E.length;if(u!==Ae){if(u>3)continue;for(let gt=0;gt<u-Ae;gt++)E="0"+E.toString()}L+=E}else y=e[gS[p]]();"h"===p&&(y=y%12||12);break;case"y":D=!0,L+=o.year,2===u&&(L=L.substr(L.length-2));break;case"a":let V=e.getHours()<12?"am":"pm";s+=t.designator[V];break;case"G":let H=e.getFullYear()<0?0:1,se=t.era[H];m(se)&&(se=t.era[H?0:1]),s+=se||"";break;case"'":s+="''"===a?"'":a.replace(/'/g,"");break;case"z":let _e=e.getTimezoneOffset(),re=u<4?"+H;-H":t.timeZone.hourFormat;re=re.replace(/:/g,t.numMapper.timeSeparator),0===_e?s+=t.timeZone.gmtZeroFormat:(D=!0,L=this.getTimeZoneValue(_e,re)),L=t.timeZone.gmtFormat.replace(/\{0\}/,L);break;case":":s+=t.numMapper.numberSymbols.timeSeparator;break;case"/":s+=t.dateSeperator;break;case"W":_=!0,y=mi.getWeekOfYear(e);break;default:s+=a}_&&(D=!0,L=this.checkTwodigitNumber(y,u)),D&&(s+=cn.convertValueParts(L,mi.latnParseRegex,t.numMapper.mapper))}return s}static getCurrentDateValue(e,t){return t?wd.getHijriDate(e):{year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate()}}static checkTwodigitNumber(e,t){const i=e+"";return 2===t&&2!==i.length?"0"+i:i}static getTimeZoneValue(e,t){let s=t.split(";")[e>0?1:0];const r=Math.abs(e);return s.replace(/HH?|mm/g,o=>{const a=o.length,u=-1!==o.indexOf("H");return this.checkTwodigitNumber(Math.floor(u?r/60:r%60),a)})}}const Lv={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},Rv=["infinity","nan","group","decimal","exponential"];class CS{static numberFormatter(e,t,i){const s=ut({},t);let r={};const o={};let a;const u=mi.getDependables(i,e,"",!0);o.numberMapper=cn.getNumberMapper(u.parserObject,cn.getNumberingSystem(i),!0),o.currencySymbol=mi.getCurrencySymbol(u.numericObject,s.currency||yg,t.altSymbol),o.percentSymbol=o.numberMapper.numberSymbols.percentSign,o.minusSymbol=o.numberMapper.numberSymbols.minusSign;const y=o.numberMapper.numberSymbols;if(t.format&&!mi.formatRegex.test(t.format))r=mi.customFormat(t.format,o,u.numericObject);else{ut(s,mi.getProperNumericSkeleton(t.format||"N")),s.isCurrency="currency"===s.type,s.isPercent="percent"===s.type,a=mi.getSymbolPattern(s.type,o.numberMapper.numberSystem,u.numericObject,s.isAccount),s.groupOne=this.checkValueRange(s.maximumSignificantDigits,s.minimumSignificantDigits,!0),this.checkValueRange(s.maximumFractionDigits,s.minimumFractionDigits,!1,!0),Jt(s.fractionDigits)||(s.minimumFractionDigits=s.maximumFractionDigits=s.fractionDigits),Jt(s.useGrouping)&&(s.useGrouping=!0),s.isCurrency&&(a=a.replace(/\u00A4/g,mi.defaultCurrency));{const L=a.split(";");r.nData=mi.getFormatData(L[1]||"-"+L[0],!0,o.currencySymbol),r.pData=mi.getFormatData(L[0],!1,o.currencySymbol),s.useGrouping&&(s.groupSeparator=y[Rv[2]],s.groupData=this.getGroupingDetails(L[0]))}if(Jt(s.minimumFractionDigits)&&(s.minimumFractionDigits=r.nData.minimumFraction),Jt(s.maximumFractionDigits)){const L=r.nData.maximumFraction;s.maximumFractionDigits=Jt(L)&&s.isPercent?0:L}const _=s.minimumFractionDigits,D=s.maximumFractionDigits;!Jt(_)&&!Jt(D)&&_>D&&(s.maximumFractionDigits=_)}return ut(r.nData,s),ut(r.pData,s),E=>isNaN(E)?y[Rv[1]]:isFinite(E)?this.intNumberFormatter(E,r,o):y[Rv[0]]}static getGroupingDetails(e){const t={},i=e.match(mi.negativeDataRegex);if(i&&i[4]){const s=i[4],r=s.lastIndexOf(",");if(-1!==r){const o=s.split(".")[0];t.primary=o.length-r-1;const a=s.lastIndexOf(",",r-1);-1!==a&&(t.secondary=r-1-a)}}return t}static checkValueRange(e,t,i,s){const r=s?"f":"s";let o=0;const a=Lv["l"+r];let u=Lv["m"+r];if(Jt(e)||(this.checkRange(e,a,s),o++),Jt(t)||(this.checkRange(t,u,s),o++),2===o){if(!(e<t))return!0;Nf(u+"specified must be less than the"+a)}else i&&1===o&&Nf("Both"+u+"and"+u+"must be present");return!1}static checkRange(e,t,i){const s=i?[0,20]:[1,21];(e<s[0]||e>s[1])&&Nf(t+"value must be within the range"+s[0]+"to"+s[1])}static intNumberFormatter(e,t,i){let s;if(!Jt(t.nData.type)){e<0?(e*=-1,s=t.nData):s=0===e&&t.zeroData||t.pData;let r="";return s.isPercent&&(e*=100),s.groupOne?r=this.processSignificantDigits(e,s.minimumSignificantDigits,s.maximumSignificantDigits):(r=this.processFraction(e,s.minimumFractionDigits,s.maximumFractionDigits),s.minimumIntegerDigits&&(r=this.processMinimumIntegers(r,s.minimumIntegerDigits))),"scientific"===s.type&&(r=e.toExponential(s.maximumFractionDigits),r=r.replace("e",i.numberMapper.numberSymbols[Rv[4]])),r=r.replace(".",i.numberMapper.numberSymbols[Rv[3]]),s.useGrouping&&(r=this.groupNumbers(r,s.groupData.primary,s.groupSeparator||",",i.numberMapper.numberSymbols[Rv[3]]||".",s.groupData.secondary)),r=cn.convertValueParts(r,mi.latnParseRegex,i.numberMapper.mapper),"N/A"===s.nlead?s.nlead:s.nlead+r+s.nend}}static processSignificantDigits(e,t,i){let r,s=e+"";return s.length<t?e.toPrecision(t):(s=e.toPrecision(i),r=+s,r+"")}static groupNumbers(e,t,i,s,r){let o=!m(r)&&0!==r;const a=e.split(s),u=a[0];let p=u.length,y="";for(;p>t;)y=u.slice(p-t,p)+(y.length?i+y:""),p-=t,o&&(t=r,o=!1);return a[0]=u.slice(0,p)+(y.length?i:"")+y,a.join(s)}static processFraction(e,t,i){const s=(e+"").split(".")[1],r=s?s.length:0;if(t&&r<t){let o="";if(0!==r){o+=e;for(let a=0;a<t-r;a++)o+="0";return o}return o=e.toFixed(t),e.toFixed(t)}return!m(i)&&(r>i||0===i)?e.toFixed(i):e+""}static processMinimumIntegers(e,t){const i=e.split(".");let s=i[0];const r=s.length;if(r<t){for(let o=0;o<t-r;o++)s="0"+s;i[0]=s}return i.join(".")}}const ES="stand-alone",hM=/^[0-9]*$/,wS={minute:"setMinutes",hour:"setHours",second:"setSeconds",day:"setDate",month:"setMonth",milliseconds:"setMilliseconds"},lc=/^([^0-9]*)(([0-9,]*[0-9]+)(\.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$/,pM=/,/g,fM=["minusSign","infinity"];class u0{constructor(e){this.ranArray=[],this.boundedEvents={},!m(e)&&(this.context=e)}on(e,t,i,s){if(m(t))return;const r=i||this.context;this.notExist(e)?this.boundedEvents[e]=[{handler:t,context:r}]:m(s)?this.isHandlerPresent(this.boundedEvents[e],t)||this.boundedEvents[e].push({handler:t,context:r}):-1===this.ranArray.indexOf(s)&&(this.ranArray.push(s),this.boundedEvents[e].push({handler:t,context:r,id:s}))}off(e,t,i){if(this.notExist(e))return;const s=J(e,this.boundedEvents);if(t){for(let r=0;r<s.length;r++)if(i){if(s[r].id===i){s.splice(r,1);const o=this.ranArray.indexOf(i);-1!==o&&this.ranArray.splice(o,1);break}}else if(t===s[r].handler){s.splice(r,1);break}}else delete this.boundedEvents[e]}notify(e,t,i,s){if(this.notExist(e))return void(i&&i.call(this,t));t&&(t.name=e);const o=J(e,this.boundedEvents).slice(0);if(window.Blazor)return this.blazorCallback(o,t,i,s,0);for(const a of o)a.handler.call(a.context,t);i&&i.call(this,t)}blazorCallback(e,t,i,s,r){const o=r===e.length-1;if(r<e.length){const a=e[r],u=a.handler.call(a.context,t);if(u&&"function"==typeof u.then){if(!i)return u;u.then(p=>{if(p="string"==typeof p&&this.isJson(p)?JSON.parse(p,this.dateReviver):p,ut(t,t,p,!0),!i||!o)return this.blazorCallback(e,t,i,s,r+1);i.call(a.context,t)}).catch(p=>{s&&s.call(a.context,"string"==typeof p&&this.isJson(p)?JSON.parse(p,this.dateReviver):p)})}else{if(!i||!o)return this.blazorCallback(e,t,i,s,r+1);i.call(a.context,t)}}}dateReviver(e,t){return Ft&&"string"==typeof t&&null!==t.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?new Date(t):t}isJson(e){try{JSON.parse(e)}catch(t){return!1}return!0}destroy(){this.boundedEvents=this.context=void 0}notExist(e){return!1===this.boundedEvents.hasOwnProperty(e)||this.boundedEvents[e].length<=0}isHandlerPresent(e,t){for(const i of e)if(i.handler===t)return!0;return!1}}const Cp=new u0;const $c={};let Ff="en-US",yg="USD";const SS=["numericObject","dateObject"];class d0{constructor(e){e&&(this.culture=e)}getDateFormat(e){return bS.dateFormat(this.getCulture(),e||{type:"date",skeleton:"short"},$c)}getNumberFormat(e){return e&&!e.currency&&(e.currency=yg),CS.numberFormatter(this.getCulture(),e||{},$c)}getDateParser(e){return class dM{static dateParser(e,t,i){const s=mi.getDependables(i,e,t.calendar),r=cn.getCurrentNumericOptions(s.parserObject,cn.getNumberingSystem(i),!1,!1);let p,o={},a=t.format||mi.getResultantPattern(t.skeleton,s.dateObject,t.type,!1,""),u="";if(Jt(a))Nf("Format options or type given must be invalid");else{a=mi.ConvertDateToWeekFormat(a),o={isIslamic:mi.islamicRegex.test(t.calendar),pattern:a,evalposition:{},culture:e};const y=a.match(mi.dateParseRegex)||[],E=y.length;let _=0,D=0,L=!1;const V=r.numericRegex;let H=cn.getNumberMapper(s.parserObject,cn.getNumberingSystem(i));for(let se=0;se<E;se++){const _e=y[se],re=_e.length,Ae="K"===_e[0]?"h":_e[0];let gt,ot,ri=yS[Ae];const jt=2===re?"":"?";switch(L&&(_=D,L=!1),Ae){case"E":case"c":let Ai;Ai=s.dateObject[mi.days][ES][mi.monthIndex[re]];let rr=cn.reverseObject(Ai);u+="("+Object.keys(rr).join("|")+")";break;case"M":case"L":case"d":case"m":case"s":case"h":case"H":case"f":if(ot=!0,("M"===Ae||"L"===Ae)&&re>2){let we;we=s.dateObject.months[ES][mi.monthIndex[re]],o[ri]=cn.reverseObject(we),u+="("+Object.keys(o[ri]).join("|")+")"}else if("f"===Ae){if(re>3)continue;gt=!0,u+="("+V+V+"?"+V+"?)"}else gt=!0,u+="("+V+V+jt+")";"h"===Ae&&(o.hour12=!0);break;case"W":u+="("+V+(1===re?"?":"")+V+")";break;case"y":ot=gt=!0,u+=2===re?"("+V+V+")":"("+V+"{"+re+",})";break;case"a":ot=!0;let yt=J("dayPeriods.format.wide",s.dateObject);o[ri]=cn.reverseObject(yt),u+="("+Object.keys(o[ri]).join("|")+")";break;case"G":ot=!0,o[ri]=cn.reverseObject(J("eras."+(re<=3?"eraAbbr":4===re?"eraNames":"eraNarrow"),s.dateObject)),u+="("+Object.keys(o[ri]).join("|")+"?)";break;case"z":ot=0!==(new Date).getTimezoneOffset(),o[ri]=J("dates.timeZoneNames",s.parserObject);let ke=o[ri];p=re<4;let Re=p?"+H;-H":ke.hourFormat;Re=Re.replace(/:/g,H.timeSeparator),u+="("+this.parseTimeZoneRegx(Re,ke,V)+")?",L=!0,D=p?6:12;break;case"'":u+="("+_e.replace(/'/g,"")+")?";break;default:u+="([\\D])"}ot&&(o.evalposition[ri]={isNumber:gt,pos:se+1+_,hourOnly:p}),se===E-1&&!m(u)&&(o.parserRegex=new RegExp("^"+u+"$","i"))}}return y=>{const E=this.internalDateParse(y,o,r);if(m(E)||!Object.keys(E).length)return null;if(o.isIslamic){let _={},D=E.year;const L=E.day,V=E.month,H=D?D+"":"",se=2===H.length;(!D||!V||!L||se)&&(_=wd.getHijriDate(new Date)),se&&(D=parseInt((_.year+"").slice(0,2)+H,10));const _e=wd.toGregorian(D||_.year,V||_.month,L||_.date);E.year=_e.getFullYear(),E.month=_e.getMonth()+1,E.day=_e.getDate()}return this.getDateObject(E)}}static getDateObject(e,t){const i=t||new Date;i.setMilliseconds(0);const s=["hour","minute","second","milliseconds","month","day"];let r=e.year;const o=e.designator,a=e.timeZone;Jt(r)||((r+"").length<=2&&(r+=100*Math.floor(i.getFullYear()/100)),i.setFullYear(r));for(const u of s){let p=e[u];if(Jt(p)&&"day"===u&&i.setDate(1),!Jt(p))if("month"===u){if(p-=1,p<0||p>11)return new Date("invalid");const y=i.getDate();i.setDate(1),i[wS[u]](p);const E=new Date(i.getFullYear(),p+1,0).getDate();i.setDate(y<E?y:E)}else{if("day"===u){const y=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();if(p<1||p>y)return null}i[wS[u]](p)}}if(!Jt(o)){const u=i.getHours();"pm"===o?i.setHours(u+(12===u?0:12)):12===u&&i.setHours(0)}if(!Jt(a)){const u=a-i.getTimezoneOffset();0!==u&&i.setMinutes(i.getMinutes()+u)}return i}static internalDateParse(e,t,i){const s=e.match(t.parserRegex),r={hour:0,minute:0,second:0};if(m(s))return null;{const o=Object.keys(t.evalposition);for(const a of o){const u=t.evalposition[a];let p=s[u.pos];if(u.isNumber)r[a]=this.internalNumberParser(p,i);else if("timeZone"!==a||Jt(p))p="month"!==a||t.isIslamic||"en"!==t.culture&&"en-GB"!==t.culture&&"en-US"!==t.culture?p:p[0].toUpperCase()+p.substring(1).toLowerCase(),r[a]=t[a][p];else{const y=u.pos;let E;const _=s[y+1],D=!Jt(_);u.hourOnly?E=60*this.getZoneValue(D,_,s[y+4],i):(E=60*this.getZoneValue(D,_,s[y+7],i),E+=this.getZoneValue(D,s[y+4],s[y+10],i)),m(E)||(r[a]=E)}}t.hour12&&(r.hour12=!0)}return r}static internalNumberParser(e,t){return e=cn.convertValueParts(e,t.numberParseRegex,t.numericPair),hM.test(e)?+e:null}static parseTimeZoneRegx(e,t,i){const s=t.gmtFormat;let r;const o="("+i+")("+i+")";let a;return r=e.replace("+","\\+"),r=-1!==e.indexOf("HH")?r.replace(/HH|mm/g,"("+o+")"):r.replace(/H|m/g,"("+o+"?)"),a=r.split(";").map(u=>s.replace("{0}",u)),r=a.join("|")+"|"+t.gmtZeroFormat,r}static getZoneValue(e,t,i,s){const r=e?t:i;if(!r)return 0;const o=this.internalNumberParser(r,s);return e?-o:o}}.dateParser(this.getCulture(),e||{skeleton:"short",type:"date"},$c)}getNumberParser(e){return class wV{static numberParser(e,t,i){const s=mi.getDependables(i,e,"",!0),r={custom:!0};let o;mi.formatRegex.test(t.format)||!t.format?(ut(r,mi.getProperNumericSkeleton(t.format||"N")),r.custom=!1,r.fractionDigits||t.maximumFractionDigits&&(r.maximumFractionDigits=t.maximumFractionDigits)):ut(r,mi.customFormat(t.format,null,null));J("numbers",s.parserObject);let u;if(o=cn.getCurrentNumericOptions(s.parserObject,cn.getNumberingSystem(i),!0,!1),r.symbolRegex=cn.getSymbolRegex(Object.keys(o.symbolMatch)),r.infinity=o.symbolNumberSystem[fM[1]],u=mi.getSymbolPattern(r.type,o.numberSystem,s.numericObject,r.isAccount),u){u=u.replace(/\u00A4/g,mi.defaultCurrency);const p=u.split(";");r.nData=mi.getFormatData(p[1]||"-"+p[0],!0,""),r.pData=mi.getFormatData(p[0],!0,"")}return p=>this.getParsedNumber(p,r,o)}static getParsedNumber(e,t,i){let s,r,o,a,u,p;if(-1!==e.indexOf(t.infinity))return 1/0;{e=cn.convertValueParts(e,t.symbolRegex,i.symbolMatch),0===(e=-1!==(e=cn.convertValueParts(e,i.numberParseRegex,i.numericPair)).indexOf("-")?e.replace("-.","-0."):e).indexOf(".")&&(e="0"+e);const y=e.match(lc);if(m(y))return NaN;a=y[1],o=y[2];const E=y[5];return u=y[6],s=t.custom?a===t.nData.nlead&&u===t.nData.nend:-1!==a.indexOf(t.nData.nlead)&&-1!==u.indexOf(t.nData.nend),r=s?t.nData.isPercent:t.pData.isPercent,o=o.replace(pM,""),E&&(o+=E),p=+o,("percent"===t.type||r)&&(p/=100),(t.custom||t.fractionDigits)&&(p=parseFloat(p.toFixed(t.custom?s?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.fractionDigits))),t.maximumFractionDigits&&(p=this.convertMaxFracDigits(o,t,p,s)),s&&(p*=-1),p}}static convertMaxFracDigits(e,t,i,s){let r=e.split(".");return r[1]&&r[1].length>t.maximumFractionDigits&&(i=+i.toFixed(t.custom?s?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.maximumFractionDigits)),i}}.numberParser(this.getCulture(),e||{format:"N"},$c)}formatNumber(e,t){return this.getNumberFormat(t)(e)}formatDate(e,t){return this.getDateFormat(t)(e)}parseDate(e,t){return this.getDateParser(t)(e)}parseNumber(e,t){return this.getNumberParser(t)(e)}getDatePattern(e,t){return mi.getActualDateTimeFormat(this.getCulture(),e,$c,t)}getNumberPattern(e,t){return mi.getActualNumberFormat(this.getCulture(),e,$c,t)}getFirstDayOfWeek(){return mi.getWeekData(this.getCulture(),$c)}getCulture(){return this.culture||Ff}}function p0(n,e){let t=mi.getDependables($c,n,"",!0)[SS[0]];const i=mi.getDependables($c,n,"")[SS[1]],s=J("defaultNumberingSystem",t),r=J("symbols-numberSystem-"+s,t),o=mi.getSymbolPattern(e||"decimal",s,t,!1);return ut(r,mi.getFormatData(o,!0,"",!0),{dateSeparator:mi.getDateSeparator(i)})}const _S={"en-US":{d:"M/d/y",D:"EEEE, MMMM d, y",f:"EEEE, MMMM d, y h:mm a",F:"EEEE, MMMM d, y h:mm:s a",g:"M/d/y h:mm a",G:"M/d/yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:m:s tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",U:"dddd, MMMM d, yyyy h:mm:ss tt",y:"MMMM yyyy",Y:"MMMM yyyy"}};var mi;!function(n){n.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,n.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*[0#\ ]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,n.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;const e=/[0-9]/g;n.defaultCurrency="$";const t=["infinity","nan","group","decimal"],i=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,s={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};n.dateConverterMapper=/dddd|ddd/gi,n.islamicRegex=/^islamic/;const o={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};n.formatRegex=/(^[ncpae]{1})([0-1]?[0-9]|20)?$/i,n.currencyFormatRegex=/(^[ca]{1})([0-1]?[0-9]|20)?$/i,n.curWithoutNumberRegex=/(c|a)$/gi;const a={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};function u(Ce,ke,Re,me,we){let Ke;const Ut=Re||"date";if(we)Ke=_({skeleton:Ce},we).format||_({skeleton:"d"},"en-US").format;else{if(-1!==n.basicPatterns.indexOf(Ce)){if(Ke=J(Ut+"Formats."+Ce,ke),"dateTime"===Ut){const ki=J("dateFormats."+Ce,ke),oi=J("timeFormats."+Ce,ke);Ke=Ke.replace("{1}",ki).replace("{0}",oi)}}else Ke=J("dateTimeFormats.availableFormats."+Ce,ke);Jt(Ke)&&"yMd"===Ce&&(Ke="M/d/y")}return Ke}function p(Ce,ke,Re,me){const we={},Ke=Re||"gregorian";if(we.parserObject=cn.getMainObject(Ce,ke)||n.defaultObject,me)we.numericObject=J("numbers",we.parserObject);else{we.dateObject=J("dates.calendars."+Ke,we.parserObject)}return we}function y(Ce,ke,Re,me){return J(Ce+"Formats-numberSystem-"+ke+(me?".accounting":".standard"),Re)||(me?J(Ce+"Formats-numberSystem-"+ke+".standard",Re):"")}function E(Ce){Ce.match(n.dateConverterMapper);return Ce}function _(Ce,ke){const Re=Ce.format||Ce.skeleton;let me=J((ke||"en-US")+"."+Re,_S);return me||(me=J("en-US."+Re,_S)),me&&(me=E(me),Ce.format=me.replace(/tt/,"a")),Ce}function D(Ce){const ke=Ce.match(n.formatRegex),Re={},me=ke[1].toUpperCase();return Re.isAccount="A"===me,Re.type=n.patternMatcher[me],Ce.length>1&&(Re.fractionDigits=parseInt(ke[2],10)),Re}function L(Ce,ke,Re,me){const we=me?{}:{nlead:"",nend:""},Ke=Ce.match(n.customRegex);if(Ke){me||(we.nlead=V(Ke[1],Re),we.nend=V(Ke[10],Re),we.groupPattern=Ke[4]);const Ut=Ke[7];if(Ut&&ke){const ki=Ut.match(e);we.minimumFraction=m(ki)?0:ki.length,we.maximumFraction=Ut.length-1}}return we}function V(Ce,ke){return Ce?Ce.replace(n.defaultCurrency,ke):""}function H(Ce,ke,Re){return J("currencies."+ke+(Re?"."+Re:".symbol"),Ce)||J("currencies."+ke+".symbol-alt-narrow",Ce)||"$"}function _e(Ce,ke,Re){const me={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},we=Ce.match(n.customRegex);if(m(we)||""===we[5]&&"N/A"!==Ce)return me.type=void 0,me;me.nlead=we[1],me.nend=we[10];let Ke=we[6];const Ut=!!Ke.match(/\ $/g),ki=-1!==Ke.replace(/\ $/g,"").indexOf(" ");me.useGrouping=-1!==Ke.indexOf(",")||ki,Ke=ki?Ke.replace(/,/g,""):Ke.replace(/,/g,"").replace(/\ $/g,"");const oi=we[7];if(-1!==Ke.indexOf("0")&&(me.minimumIntegerDigits=Ke.length-Ke.indexOf("0")),m(oi)||(me.minimumFractionDigits=oi.lastIndexOf("0"),me.maximumFractionDigits=oi.lastIndexOf("#"),-1===me.minimumFractionDigits&&(me.minimumFractionDigits=0),(-1===me.maximumFractionDigits||me.maximumFractionDigits<me.minimumFractionDigits)&&(me.maximumFractionDigits=me.minimumFractionDigits)),m(ke)?ut(me,re([me.nlead,me.nend],"%","%")):(ut(me,re([me.nlead,me.nend],"$",ke.currencySymbol)),me.isCurrency||ut(me,re([me.nlead,me.nend],"%",ke.percentSymbol))),!m(Re)){const os=y(me.type,ke.numberMapper.numberSystem,Re,!1);me.useGrouping&&(me.groupSeparator=ki?" ":ke.numberMapper.numberSymbols[t[2]],me.groupData=CS.getGroupingDetails(os.split(";")[0])),me.nlead=me.nlead.replace(/'/g,""),me.nend=Ut?" "+me.nend.replace(/'/g,""):me.nend.replace(/'/g,"")}return me}function re(Ce,ke,Re){const me={nlead:Ce[0],nend:Ce[1]};for(let we=0;we<2;we++){const Ke=Ce[we],Ut=Ke.indexOf(ke);if(-1!==Ut&&(Ut<Ke.indexOf("'")||Ut>Ke.lastIndexOf("'"))){me[a[we]]=Ke.substr(0,Ut)+Re+Ke.substr(Ut+1),me[a[ke]]=!0,me.type=me.isCurrency?"currency":"percent";break}}return me}function jt(Ce,ke,Re){Ce+=".";for(let me=0;me<ke;me++)Ce+="0";if(ke<Re){const me=Re-ke;for(let we=0;we<me;we++)Ce+="#"}return Ce}function Ai(Ce,ke){const Re=Ce.split(".");let me="";for(let we=0;we<ke;we++)me+="0";return Re[1]?me+"."+Re[1]:me}function rr(Ce){const ke=Ce.split(".");let Re=ke[0];const me=3-Re.length%3;Re=(me&&1===me?"#":2===me?"##":"")+Re,Ce="";for(let Ke=Re.length-1;Ke>0;Ke-=3)Ce=","+Re[Ke-2]+Re[Ke-1]+Re[Ke]+Ce;return Ce=Ce.slice(1),ke[1]?Ce+"."+ke[1]:Ce}n.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,n.basicPatterns=["short","medium","long","full"],n.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhu\u02bbl-Q.",12:"Dhu\u02bbl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabi\u02bb I",4:"Rabi\u02bb II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Sha\u02bbban",9:"Ramadan",10:"Shawwal",11:"Dhu\u02bbl-Qi\u02bbdah",12:"Dhu\u02bbl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"\u20ac","symbol-alt-narrow":"\u20ac"},GBP:{displayName:"British Pound","symbol-alt-narrow":"\xa3"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"\xd7",perMille:"\u2030",infinity:"\u221e",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"\xa4#,##0.00",accounting:"\xa4#,##0.00;(\xa4#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},n.blazorDefaultObject={numbers:{mapper:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},mapperDigits:"0123456789",numberSymbols:{decimal:".",group:",",plusSign:"+",minusSign:"-",percentSign:"%",nan:"NaN",timeSeparator:":",infinity:"\u221e"},timeSeparator:":",currencySymbol:"$",currencypData:{nlead:"$",nend:"",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentpData:{nlead:"",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentnData:{nlead:"-",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},currencynData:{nlead:"($",nend:")",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalnData:{nlead:"-",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalpData:{nlead:"",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2}},dates:{dayPeriods:{am:"AM",pm:"PM"},dateSeperator:"/",days:{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}},months:{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},eras:{1:"AD"}}},n.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},n.month="months",n.days="days",n.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},n.getResultantPattern=u,n.getDependables=p,n.getSymbolPattern=y,n.ConvertDateToWeekFormat=E,n.compareBlazorDateFormats=_,n.getProperNumericSkeleton=D,n.getFormatData=L,n.changeCurrencySymbol=V,n.getCurrencySymbol=H,n.customFormat=function se(Ce,ke,Re){const me={},we=Ce.split(";"),Ke=["pData","nData","zeroData"];for(let Ut=0;Ut<we.length;Ut++)me[Ke[Ut]]=_e(we[Ut],ke,Re);return m(me.nData)&&(me.nData=ut({},me.pData),me.nData.nlead=m(ke)?"-"+me.nData.nlead:ke.minusSymbol+me.nData.nlead),me},n.customNumberFormat=_e,n.isCurrencyPercent=re,n.getDateSeparator=function Ae(Ce){const ke=(J("dateFormats.short",Ce)||"").match(/[d\u200fM\u200f]([^d\u200fM])[d\u200fM\u200f]/i);return ke?ke[1]:"/"},n.getActualDateTimeFormat=function gt(Ce,ke,Re,me){const we=p(Re,Ce,ke.calendar);let Ke=ke.format||u(ke.skeleton,we.dateObject,ke.type);if(me){if(Ke=Ke.replace(i,Ut=>s[Ut]),-1!==Ke.indexOf("z")){const Ut=Ke.match(/z/g).length;let ki;const oi={timeZone:{}};oi.numMapper=cn.getNumberMapper(we.parserObject,cn.getNumberingSystem(Re)),oi.timeZone=J("dates.timeZoneNames",we.parserObject);const ss=(new Date).getTimezoneOffset();let zi=Ut<4?"+H;-H":oi.timeZone.hourFormat;zi=zi.replace(/:/g,oi.numMapper.timeSeparator),0===ss?ki=oi.timeZone.gmtZeroFormat:(ki=bS.getTimeZoneValue(ss,zi),ki=oi.timeZone.gmtFormat.replace(/\{0\}/,ki)),Ke=Ke.replace(/[z]+/,'"'+ki+'"')}Ke=Ke.replace(/ $/,"")}return Ke},n.getActualNumberFormat=function ri(Ce,ke,Re,me){const we=p(Re,Ce,"",!0),Ke={custom:!0};let ki;const oi={},os=(ke.format||"").match(n.currencyFormatRegex),zi=(n.formatRegex.test(ke.format)&&D(ke.format||"N"),{});if(os){zi.numberMapper=cn.getNumberMapper(we.parserObject,cn.getNumberingSystem(Re),!0);const oe=H(we.numericObject,ke.currency||yg,ke.altSymbol);let pe=y("currency",zi.numberMapper.numberSystem,we.numericObject,/a/i.test(ke.format));pe=pe.replace(/\u00A4/g,oe);const nt=pe.split(";");oi.hasNegativePattern=nt.length>1,oi.nData=L(nt[1]||"-"+nt[0],!0,oe),oi.pData=L(nt[0],!1,oe),!os[2]&&!ke.minimumFractionDigits&&!ke.maximumFractionDigits&&(ki=L(pe.split(";")[0],!0,"",!0).minimumFraction)}let Vt;if(n.formatRegex.test(ke.format)||!ke.format){if(ut(Ke,D(ke.format||"N")),Ke.custom=!1,Vt="###0",(Ke.fractionDigits||ke.minimumFractionDigits||ke.maximumFractionDigits||ki)&&(Ke.fractionDigits&&(ke.minimumFractionDigits=ke.maximumFractionDigits=Ke.fractionDigits),Vt=jt(Vt,ki||Ke.fractionDigits||ke.minimumFractionDigits||0,ke.maximumFractionDigits||0)),ke.minimumIntegerDigits&&(Vt=Ai(Vt,ke.minimumIntegerDigits)),ke.useGrouping&&(Vt=rr(Vt)),"currency"===Ke.type){const oe=Vt;Vt=oi.pData.nlead+oe+oi.pData.nend,oi.hasNegativePattern&&(Vt+=";"+oi.nData.nlead+oe+oi.nData.nend)}"percent"===Ke.type&&(Vt+=" %")}else Vt=ke.format.replace(/'/g,'"');return Object.keys(zi).length>0&&(Vt=me?Vt:function ot(Ce,ke){if(-1!==Ce.indexOf(",")){let Re=Ce.split(",");Ce=Re[0]+J("numberMapper.numberSymbols.group",ke)+Re[1].replace(".",J("numberMapper.numberSymbols.decimal",ke))}else Ce=Ce.replace(".",J("numberMapper.numberSymbols.decimal",ke));return Ce}(Vt,zi)),Vt},n.fractionDigitsPattern=jt,n.minimumIntegerPattern=Ai,n.groupingPattern=rr,n.getWeekData=function mt(Ce,ke){let Re="sun";const me=J("supplemental.weekData.firstDay",ke);let we=Ce;return/en-/.test(we)&&(we=we.slice(3)),we=we.slice(0,2).toUpperCase()+we.substr(2),me&&(Re=me[we]||me[we.slice(0,2)]||"sun"),o[Re]},n.replaceBlazorCurrency=function yt(Ce,ke,Re){const me=function mg(n){return J(n||"",mS)}(Re);if(ke!==me)for(const we of Ce)we.nend=we.nend.replace(ke,me),we.nlead=we.nlead.replace(ke,me)},n.getWeekOfYear=function st(Ce){const ke=new Date(Ce.getFullYear(),0,1);let me,Re=ke.getDay();Re=Re>=0?Re:Re+7;const we=Math.floor((Ce.getTime()-ke.getTime()-6e4*(Ce.getTimezoneOffset()-ke.getTimezoneOffset()))/864e5)+1;if(Re<4){if(me=Math.floor((we+Re-1)/7)+1,me>52){let Ut=new Date(Ce.getFullYear()+1,0,1).getDay();Ut=Ut>=0?Ut:Ut+7,me=Ut<4?1:53}}else me=Math.floor((we+Re-1)/7);return me}}(mi||(mi={}));const wh=/^(.*?):[ \t]*([^\r\n]*)$/gm;class Ep{constructor(e,t,i,s){this.mode=!0,this.emitError=!0,this.options={},"string"==typeof e?(this.url=e,this.type=t?t.toUpperCase():"GET",this.mode=!!m(i)||i):"object"==typeof e&&(this.options=e,qc(this,this.options)),this.type=this.type?this.type.toUpperCase():"GET",this.contentType=void 0!==this.contentType?this.contentType:s}send(e){this.data=m(e)?this.data:e;const t={cancel:!1,httpRequest:null};return new Promise((s,r)=>{this.httpRequest=new XMLHttpRequest,this.httpRequest.onreadystatechange=()=>{this.stateChange(s,r)},m(this.onLoad)||(this.httpRequest.onload=this.onLoad),m(this.onProgress)||(this.httpRequest.onprogress=this.onProgress),m(this.onAbort)||(this.httpRequest.onabort=this.onAbort),m(this.onError)||(this.httpRequest.onerror=this.onError),m(this.onUploadProgress)||(this.httpRequest.upload.onprogress=this.onUploadProgress),this.httpRequest.open(this.type,this.url,this.mode),!m(this.data)&&null!==this.contentType&&this.httpRequest.setRequestHeader("Content-Type",this.contentType||"application/json; charset=utf-8"),this.beforeSend&&(t.httpRequest=this.httpRequest,this.beforeSend(t)),t.cancel||this.httpRequest.send(m(this.data)?null:this.data)})}successHandler(e){return this.onSuccess&&this.onSuccess(e,this),e}failureHandler(e){return this.onFailure&&this.onFailure(this.httpRequest),e}stateChange(e,t){let i=this.httpRequest.responseText;if(this.dataType&&"json"===this.dataType.toLowerCase())if(""===i)i=void 0;else try{i=JSON.parse(i)}catch(s){}4===this.httpRequest.readyState&&(this.httpRequest.status>=200&&this.httpRequest.status<=299||304===this.httpRequest.status?e(this.successHandler(i)):this.emitError?t(new Error(this.failureHandler(this.httpRequest.statusText))):e())}getResponseHeader(e){let t,i;t={};let s=wh.exec(this.httpRequest.getAllResponseHeaders());for(;s;)t[s[1].toLowerCase()]=s[2],s=wh.exec(this.httpRequest.getAllResponseHeaders());return i=t[e.toLowerCase()],m(i)?null:i}}const vM=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,xV=/msie|trident/i,jT=/Trident\/7\./,bM=/(ipad|iphone|ipod touch)/i,CM=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,EM=/android/i,IS=/trident|windows phone|edge/i,wM=/(version)[ /]([\w.]+)/i,UT={OPERA:/(opera|opr)(?:.*version|)[ /]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ /]([\w.]+)/i,CHROME:/(chrome|crios)[ /]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ /]([\w.]+)/i,SAFARI:/(safari)[ /]([\w.]+)/i,WEBKIT:/(webkit)[ /]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};"undefined"!=typeof window&&(window.browserDetails=window.browserDetails||{});class Q{static extractBrowserDetail(){const e={culture:{}},t=Object.keys(UT);let i=[];for(const s of t)if(i=Q.userAgent.match(UT[s]),i){if(e.name="opr"===i[1].toLowerCase()?"opera":i[1].toLowerCase(),e.name="crios"===i[1].toLowerCase()?"chrome":e.name,e.version=i[2],e.culture.name=e.culture.language=navigator.language,Q.userAgent.match(jT)){e.name="msie";break}const r=Q.userAgent.match(wM);"safari"===e.name&&r&&(e.version=r[2]);break}return e}static getEvent(e){const t={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return Q.isPointer?t[e].isPointer:Q.isTouch?t[e].isTouch+(Q.isDevice?"":" "+t[e].isDevice):t[e].isDevice}static getTouchStartEvent(){return Q.getEvent("start")}static getTouchEndEvent(){return Q.getEvent("end")}static getTouchMoveEvent(){return Q.getEvent("move")}static getTouchCancelEvent(){return Q.getEvent("cancel")}static getValue(e,t){const i=window.browserDetails;return void 0===i[e]?i[e]=t.test(Q.userAgent):("MacIntel"===navigator.platform&&navigator.maxTouchPoints>1&&!0===Q.isTouch&&(i.isIos=!0,i.isDevice=!0,i.isTouch=!0,i.isPointer=!0),i[e])}static set userAgent(e){Q.uA=e,window.browserDetails={}}static get userAgent(){return Q.uA}static get info(){return Jt(window.browserDetails.info)?window.browserDetails.info=Q.extractBrowserDetail():window.browserDetails.info}static get isIE(){return Q.getValue("isIE",xV)}static get isTouch(){return Jt(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window.navigator||window&&window.navigator&&window.navigator.maxTouchPoints>0||"ontouchstart"in window:window.browserDetails.isTouch}static get isPointer(){return Jt(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer}static get isMSPointer(){return Jt(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer}static get isDevice(){return Q.getValue("isDevice",vM)}static get isIos(){return Q.getValue("isIos",bM)}static get isIos7(){return Q.getValue("isIos7",CM)}static get isAndroid(){return Q.getValue("isAndroid",EM)}static get isWebView(){return Jt(window.browserDetails.isWebView)&&(window.browserDetails.isWebView=!(Jt(window.cordova)&&Jt(window.PhoneGap)&&Jt(window.phonegap)&&"object"!==window.forge)),window.browserDetails.isWebView}static get isWindows(){return Q.getValue("isWindows",IS)}static get touchStartEvent(){return Jt(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=Q.getTouchStartEvent():window.browserDetails.touchStartEvent}static get touchMoveEvent(){return Jt(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=Q.getTouchMoveEvent():window.browserDetails.touchMoveEvent}static get touchEndEvent(){return Jt(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=Q.getTouchEndEvent():window.browserDetails.touchEndEvent}static get touchCancelEvent(){return Jt(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=Q.getTouchCancelEvent():window.browserDetails.touchCancelEvent}}Q.uA="undefined"!=typeof navigator?navigator.userAgent:"";class O{static addOrGetEventData(e){return"__eventList"in e?e.__eventList.events:(e.__eventList={},e.__eventList.events=[])}static add(e,t,i,s,r){const o=O.addOrGetEventData(e);let a;a=r?function bp(n,e){let t;return function(){const i=arguments,s=()=>(t=null,n.apply(this,i));clearTimeout(t),t=setTimeout(s,e)}}(i,r):i,s&&(a=a.bind(s));const u=t.split(" ");for(let p=0;p<u.length;p++)o.push({name:u[p],listener:i,debounce:a}),Q.isIE?e.addEventListener(u[p],a):e.addEventListener(u[p],a,{passive:!1});return a}static remove(e,t,i){const s=O.addOrGetEventData(e),r=t.split(" ");for(let o=0;o<r.length;o++){let u,a=-1;s&&0!==s.length&&s.some((p,y)=>p.name===r[o]&&p.listener===i&&(a=y,u=p.debounce,!0)),-1!==a&&s.splice(a,1),u&&e.removeEventListener(r[o],u)}}static clearEvents(e){let t,i;t=O.addOrGetEventData(e),i=ut([],i,t);for(let s=0;s<i.length;s++)e.removeEventListener(i[s].name,i[s].debounce),t.shift()}static trigger(e,t,i){const s=O.addOrGetEventData(e);for(const r of s)r.name===t&&r.debounce.call(this,i)}}const SM=/^svg|^path|^g/;function Ds(n,e){const t=SM.test(n)?document.createElementNS("http://www.w3.org/2000/svg",n):document.createElement(n);return void 0===e||(t.innerHTML=e.innerHTML?e.innerHTML:"",void 0!==e.className&&(t.className=e.className),void 0!==e.id&&(t.id=e.id),void 0!==e.styles&&t.setAttribute("style",e.styles),void 0!==e.attrs&&bt(t,e.attrs)),t}function j(n,e){const t=zT(e);for(const i of n)for(const s of t)if(Ed(i)){const r=J("attributes.className",i);m(r)?pi("attributes.className",s,i):new RegExp("\\b"+s+"\\b","i").test(r)||pi("attributes.className",r+" "+s,i)}else i.classList.contains(s)||i.classList.add(s);return n}function Y(n,e){const t=zT(e);for(const i of n){const s=Ed(i);if(s?J("attributes.className",i):""!==i.className)for(const o of t)if(s){const u=J("attributes.className",i).split(" "),p=u.indexOf(o);-1!==p&&u.splice(p,1),pi("attributes.className",u.join(" "),i)}else i.classList.remove(o)}return n}function zT(n){let e=[];return"string"==typeof n?e.push(n):e=n,e}function zn(n){return""===n.style.visibility&&n.offsetWidth>0}function Tr(n,e,t){const i=document.createDocumentFragment();for(const s of n)i.appendChild(s);return e.insertBefore(i,e.firstElementChild),t&&WT(e),n}function Pi(n,e,t){const i=document.createDocumentFragment();for(const s of n)i.appendChild(s);return e.appendChild(i),t&&WT(e),n}function WT(n){n.querySelectorAll("script").forEach(t=>{const i=document.createElement("script");i.text=t.innerHTML,document.head.appendChild(i),ye(i)})}function ye(n){const e=n.parentNode;if(e)return e.removeChild(n)}function Ms(n){const e=n.parentNode;O.clearEvents(n),e.removeChild(n)}function bt(n,e){const t=Object.keys(e),i=n;for(const s of t)if(Ed(i)){let r=s;"tabindex"===s&&(r="tabIndex"),i.attributes[r]=e[s]}else i.setAttribute(s,e[s]);return i}function X(n,e=document,t){return n=bu(n),e.querySelector(n)}function at(n,e=document,t){return n=bu(n),e.querySelectorAll(n)}function bu(n){const e=/(!|"|\$|%|&|'|\(|\)|\*|\/|:|;|<|=|\?|@|\]|\^|`|{|}|\||\+|~)/g;if(n.match(/#[0-9]/g)||n.match(e)){const t=n.split(",");for(let i=0;i<t.length;i++){const s=t[i].split(" ");for(let r=0;r<s.length;r++)if(s[r].indexOf("#")>-1&&!s[r].match(/\[.*\]/)){const o=s[r].split("#");if(o[1].match(/^\d/)||o[1].match(e)){const a=s[r].split(".");a[0]=a[0].replace(/#/,"[id='")+"']",s[r]=a.join(".")}}t[i]=s.join(" ")}return t.join(",")}return n}function ae(n,e){let t=n;if("function"==typeof t.closest)return t.closest(e);for(;t&&1===t.nodeType;){if(vg(t,e))return t;t=t.parentNode}return null}function It(n,e){void 0!==e&&Object.keys(e).forEach(t=>{n.style[t]=e[t]})}function ua(n,e,t){j([n],e),Y([n],t)}function vg(n,e){let t=n.matches||n.msMatchesSelector||n.webkitMatchesSelector;return t?t.call(n,e):-1!==[].indexOf.call(document.querySelectorAll(e),n)}const xS=new RegExp("]");class Gc{constructor(e,t){this.isRendered=!1,this.isComplexArraySetter=!1,this.isServerRendered=!1,this.allowServerDataBinding=!0,this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.bulkChanges={},this.refreshing=!1,this.ignoreCollectionWatch=!1,this.finalUpdate=()=>{},this.childChangedProperties={},this.modelObserver=new u0(this),Jt(t)||(this.element="string"==typeof t?document.querySelector(t):t,m(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),Jt(e)||this.setProperties(e,!0),this.isDestroyed=!1}setProperties(e,t){const i=this.isProtectedOnChange;this.isProtectedOnChange=!!t,qc(this,e),!0!==t&&(qc(this.changedProperties,e),this.dataBind()),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=i}static callChildDataBind(e,t){const i=Object.keys(e);for(const s of i)if(t[s]instanceof Array)for(const r of t[s])void 0!==r.dataBind&&r.dataBind();else t[s].dataBind()}clearChanges(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}}dataBind(){if(Gc.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){const e=this.isProtectedOnChange,t=this.changedProperties,i=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(t,i),this.isProtectedOnChange=e}}serverDataBind(e){}saveChanges(e,t,i){this.isProtectedOnChange||(this.oldProperties[e]=i,this.changedProperties[e]=t,this.finalUpdate(),this.finalUpdate=function pS(n){let e;const t=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(t);let s="ej2"+function RT(n){let e="";for(let t=0;t<5;t++)e+=(t?",":"")+n[t];return e}(t),r=o=>{o.source===window&&"string"==typeof o.data&&o.data.length<=32&&o.data===s&&(n(),e())};return window.addEventListener("message",r,!1),window.postMessage(s,"*"),e=()=>{window.removeEventListener("message",r),n=r=s=void 0}}(this.dataBind.bind(this)))}addEventListener(e,t){this.modelObserver.on(e,t)}removeEventListener(e,t){this.modelObserver.off(e,t)}trigger(e,t,i,s){if(!0!==this.isDestroyed){const r=this.isProtectedOnChange;this.isProtectedOnChange=!1;let o=this.modelObserver.notify(e,t,i,s);if(xS.test(e)){const a=J(e,this);if(a)if(window.Blazor){const p=a.call(this,t);p&&"function"==typeof p.then?i?p.then(y=>{i&&(y="string"==typeof y&&this.modelObserver.isJson(y)?JSON.parse(y):y,i.call(this,y))}).catch(y=>{s&&(y="string"==typeof y&&this.modelObserver.isJson(y)?JSON.parse(y):y,s.call(this,y))}):o=p:i&&i.call(this,t)}else a.call(this,t),i&&i.call(this,t);else i&&i.call(this,t)}return this.isProtectedOnChange=r,o}}addInstance(){const e="e-"+this.getModuleName().toLowerCase();j([this.element],["e-lib",e]),m(this.element.ej2_instances)?pi("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)}destroy(){this.element.ej2_instances=this.element.ej2_instances.filter(e=>e!==this),Y([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&Y([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0}}function Oo(n,e){let t,i;const s="string"==typeof n?document.getElementById(n):n;for(i=0;i<s.ej2_instances.length;i++)if(t=s.ej2_instances[i],"string"==typeof e){if(e===t.getModuleName())return t}else if(t instanceof e)return t}function g0(n,e,t,i){return(!n.properties.hasOwnProperty(e)||!(n.properties[e]instanceof i))&&(n.properties[e]=h0(i,[n,e,t])),n.properties[e]}function Bf(n,e,t,i,s,r){const o=[],a=t?t.length:0;for(let u=0;u<a;u++){let p=i;if(r&&(p=i(t[u],n)),s){const y=h0(p,[n,e,{},!0]);y.setProperties(t[u],!0),o.push(y)}else o.push(h0(p,[n,e,t[u],!1]))}return o}function $T(n,e){return function(){return this.properties.hasOwnProperty(e)||(this.properties[e]=n),this.properties[e]}}function IM(n,e){return function(t){if(this.properties[e]!==t){let i=this.properties.hasOwnProperty(e)?this.properties[e]:n;this.saveChanges(e,t,i),this.properties[e]=t}}}function GT(n,e,t){return function(){return g0(this,e,n,t)}}function bg(n,e,t){return function(i){g0(this,e,n,t).setProperties(i)}}function TM(n,e,t){return function(){if(!this.properties.hasOwnProperty(e)){const s=Bf(this,e,n,t,!1);this.properties[e]=s}const i=void 0!==this.controlParent&&this.controlParent.ignoreCollectionWatch||this.ignoreCollectionWatch;return!this.properties[e].hasOwnProperty("push")&&!i&&["push","pop"].forEach(s=>{const r={value:kM(s,e,0,this.properties[e]).bind(this),configurable:!0};Object.defineProperty(this.properties[e],s,r)}),this.properties[e].hasOwnProperty("isComplexArray")||Object.defineProperty(this.properties[e],"isComplexArray",{value:!0}),this.properties[e]}}function Cg(n,e,t){return function(i){this.isComplexArraySetter=!0;const s=Bf(this,e,n,t,!1),r=Bf(this,e,i,t,!0);this.isComplexArraySetter=!1,this.saveChanges(e,r,s),this.properties[e]=r}}function kM(n,e,t,i){return function(...s){const r=this.propName?this.getParentKey()+"."+e+"-":e+"-";switch(n){case"push":for(let a=0;a<s.length;a++){Array.prototype[n].apply(i,[s[a]]);const u=KT(r+(i.length-1),s[a],!this.controlParent,n);this.serverDataBind(u,s[a],!1,n)}break;case"pop":Array.prototype[n].apply(i);let o=KT(r+i.length,null,!this.controlParent,n);this.serverDataBind(o,{ejsAction:"pop"},!1,n)}return i}}function KT(n,e,t,i){let s=n;return t&&(s={},s[n]=e,e&&"object"==typeof e)&&(s[n].ejsAction=i),s}function A(n){return(e,t)=>{const i={set:IM(n,t),get:$T(n,t),enumerable:!0,configurable:!0};Object.defineProperty(e,t,i),Eg(e,t,"prop",n)}}function Ps(n,e){return(t,i)=>{const s={set:bg(n,i,e),get:GT(n,i,e),enumerable:!0,configurable:!0};Object.defineProperty(t,i,s),Eg(t,i,"complexProp",n,e)}}function cl(n,e){return(t,i)=>{const s={set:Cg(n,i,e),get:TM(n,i,e),enumerable:!0,configurable:!0};Object.defineProperty(t,i,s),Eg(t,i,"colProp",n,e)}}function Z(){return(n,e)=>{const t={set:function(i){const s=this.properties[e];if(s!==i){const r=TS(this,e);!1===Jt(s)&&r.context.removeEventListener(r.prefix,s),r.context.addEventListener(r.prefix,i),this.properties[e]=i}},get:$T(void 0,e),enumerable:!0,configurable:!0};Object.defineProperty(n,e,t),Eg(n,e,"event")}}function ts(n){}function Eg(n,e,t,i,s){Jt(n.propList)&&(n.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),n.propList[t+"s"].push({propertyName:e,defaultValue:i,type:s}),n.propList[t+"Names"].push(e)}function TS(n,e){if(!1===n.hasOwnProperty("parentObj"))return{context:n,prefix:e};{const t=J("propName",n);return t&&(e=t+"-"+e),TS(J("parentObj",n),e)}}var Vf,wp=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let Wn=Vf=class extends Gc{constructor(e){super(e,void 0),this.easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"}}animate(e,t){const i=this.getModel(t=t||{});if("string"==typeof e){const s=Array.prototype.slice.call(at(e,document));for(const r of s)i.element=r,Vf.delayAnimation(i)}else i.element=e,Vf.delayAnimation(i)}static stop(e,t){e.style.animation="",e.removeAttribute("e-animate");const i=e.getAttribute("e-animation-id");if(i){const s=parseInt(i,10);cancelAnimationFrame(s),e.removeAttribute("e-animation-id")}t&&t.end&&t.end.call(this,t)}static delayAnimation(e){e.delay?setTimeout(()=>{Vf.applyAnimation(e)},e.delay):Vf.applyAnimation(e)}static applyAnimation(e){e.timeStamp=0;let t=0,i=0,s=0;const r=e.duration;e.element.setAttribute("e-animate","true");const o=a=>{try{if(a){s=0===s?a:s,e.timeStamp=a+e.timeStamp-s,s=a,!t&&e.begin&&e.begin.call(this,e),t+=1;const u=e.timeStamp/t;e.timeStamp<r&&e.timeStamp+u<r&&e.element.getAttribute("e-animate")?(e.element.style.animation=e.name+" "+e.duration+"ms "+e.timingFunction,e.progress&&e.progress.call(this,e),requestAnimationFrame(o)):(cancelAnimationFrame(i),e.element.removeAttribute("e-animation-id"),e.element.removeAttribute("e-animate"),e.element.style.animation="",e.end&&e.end.call(this,e))}else i=requestAnimationFrame(o),e.element.setAttribute("e-animation-id",i.toString())}catch(u){cancelAnimationFrame(i),e.element.removeAttribute("e-animation-id"),e.fail&&e.fail.call(this,u)}};o()}getModel(e){return{name:e.name||this.name,delay:e.delay||this.delay,duration:void 0!==e.duration?e.duration:this.duration,begin:e.begin||this.begin,end:e.end||this.end,fail:e.fail||this.fail,progress:e.progress||this.progress,timingFunction:this.easing[e.timingFunction]?this.easing[e.timingFunction]:e.timingFunction||this.easing[this.timingFunction]}}onPropertyChanged(e,t){}getModuleName(){return"animation"}destroy(){}};function da(n,e,t){const i=function OV(n){return{selector:n&&n.selector?n.selector:null,ignore:n&&n.ignore?n.ignore:null,rippleFlag:n&&n.rippleFlag,isCenterRipple:n&&n.isCenterRipple,duration:n&&n.duration?n.duration:350}}(e);return!1===i.rippleFlag||void 0===i.rippleFlag&&!Sh?()=>{}:(n.setAttribute("data-ripple","true"),O.add(n,"mousedown",PM,{parent:n,rippleOptions:i}),O.add(n,"mouseup",y0,{parent:n,rippleOptions:i,done:t}),O.add(n,"mouseleave",wg,{parent:n,rippleOptions:i}),Q.isPointer&&O.add(n,"transitionend",wg,{parent:n,rippleOptions:i}),()=>{n.removeAttribute("data-ripple"),O.remove(n,"mousedown",PM),O.remove(n,"mouseup",y0),O.remove(n,"mouseleave",wg),O.remove(n,"transitionend",wg)})}function PM(n){const e=n.target,t=this.rippleOptions.selector,i=t?ae(e,t):e;if(!i||this.rippleOptions&&ae(e,this.rippleOptions.ignore))return;const s=i.getBoundingClientRect(),r=n.pageX-document.body.scrollLeft,o=n.pageY-(!document.body.scrollTop&&document.documentElement?document.documentElement.scrollTop:document.body.scrollTop),a=Math.max(Math.abs(r-s.left),Math.abs(r-s.right)),u=Math.max(Math.abs(o-s.top),Math.abs(o-s.bottom)),p=Math.sqrt(a*a+u*u);let y=2*p+"px",E=r-s.left-p,_=o-s.top-p;this.rippleOptions&&this.rippleOptions.isCenterRipple&&(E=0,_=0,y="100%"),i.classList.add("e-ripple");const V=Ds("div",{className:"e-ripple-element",styles:"width: "+y+";height: "+y+";left: "+E+"px;top: "+_+"px;transition-duration: "+this.rippleOptions.duration.toString()+"ms;"});i.appendChild(V),window.getComputedStyle(V).getPropertyValue("opacity"),V.style.transform="scale(1)",i!==this.parent&&O.add(i,"mouseleave",wg,{parent:this.parent,rippleOptions:this.rippleOptions})}function y0(n){AS(n,this)}function wg(n){AS(n,this)}function AS(n,e){const t=e.rippleOptions.duration,i=n.target,s=e.rippleOptions.selector,r=s?ae(i,s):i;if(!r||r&&-1===r.className.indexOf("e-ripple"))return;const o=at(".e-ripple-element",r),a=o[o.length-1];a&&(a.style.opacity="0.5"),e.parent!==r&&O.remove(r,"mouseleave",wg),setTimeout(()=>{a&&a.parentNode&&a.parentNode.removeChild(a),r.getElementsByClassName("e-ripple-element").length||r.classList.remove("e-ripple"),e.done&&e.done(n)},t)}wp([A("FadeIn")],Wn.prototype,"name",void 0),wp([A(400)],Wn.prototype,"duration",void 0),wp([A("ease")],Wn.prototype,"timingFunction",void 0),wp([A(0)],Wn.prototype,"delay",void 0),wp([Z()],Wn.prototype,"progress",void 0),wp([Z()],Wn.prototype,"begin",void 0),wp([Z()],Wn.prototype,"end",void 0),wp([Z()],Wn.prototype,"fail",void 0),Wn=Vf=wp([ts],Wn);let Sh=!1;class MV{constructor(e){this.loadedModules=[],this.parent=e}inject(e,t){const i=e.length;if(0!==i){this.loadedModules.length&&this.clearUnusedModule(e);for(let s=0;s<i;s++){const r=e[s];for(const o of t){const a=r.member;if(o.prototype.getModuleName()===r.member&&!this.isModuleLoaded(a)){const u=h0(o,r.args),p=this.getMemberName(a);pi(p,r.isProperty?o:u,this.parent);const y=r;y.member=p,this.loadedModules.push(y)}}}}else this.clean()}clean(){for(const e of this.loadedModules)e.isProperty||J(e.member,this.parent).destroy();this.loadedModules=[]}clearUnusedModule(e){const t=e.map(s=>this.getMemberName(s.member)),i=this.loadedModules.filter(s=>-1===t.indexOf(s.member));for(const s of i)s.isProperty||J(s.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(s),1),MT(this.parent,s.member)}getMemberName(e){return e[0].toLowerCase()+e.substring(1)+"Module"}isModuleLoaded(e){for(const t of this.loadedModules)if(t.member===this.getMemberName(e))return!0;return!1}}class Is{constructor(e,t,i,s){this.isComplexArraySetter=!1,this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=()=>{},this.callChildDataBind=J("callChildDataBind",Gc),this.parentObj=e,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=t,this.isParentArray=s,this.setProperties(i,!0)}updateChange(e,t){!0===e?this.parentObj.childChangedProperties[t]=e:delete this.parentObj.childChangedProperties[t],this.parentObj.updateChange&&this.parentObj.updateChange(e,this.parentObj.propName)}updateTimeOut(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{const e=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=()=>{clearTimeout(e)}}}clearChanges(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}}setProperties(e,t){!0===t?(qc(this,e),this.updateChange(!1,this.propName),this.clearChanges()):qc(this,e)}dataBind(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){const e=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(pi(this.propName+"."+e,this.changedProperties,this.parentObj.changedProperties),pi(this.propName+"."+e,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()}saveChanges(e,t,i,s){this.controlParent.isProtectedOnChange||(s||this.serverDataBind(e,t,!0),this.oldProperties[e]=i,this.changedProperties[e]=t,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())}serverDataBind(e,t,i,s){0}getParentKey(e){let t="",i=this.propName;if(this.isParentArray){t=this.parentObj[this.propName].indexOf(this);let s=this.parentObj[this.propName].length;s=e?s:s>0?s-1:0,t=-1!==t?"-"+t:"-"+s,i+=t}return this.controlParent!==this.parentObj&&(i=this.parentObj.getParentKey()+"."+this.propName+t),i}}var Nv=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let b0,v0=0,XT=0,Ls=class extends Gc{constructor(e,t){super(e,t),this.randomId=function aM(){if("undefined"==typeof window)return;let n=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(n)}(),this.isStringTemplate=!1,this.needsID=!1,this.isReactHybrid=!1,m(this.enableRtl)&&this.setProperties({enableRtl:false},!0),m(this.locale)&&this.setProperties({locale:Ff},!0),this.moduleLoader=new MV(this),this.localObserver=new u0(this),Cp.on("notifyExternalChange",this.detectFunction,this,this.randomId),Jt(t)||this.appendTo()}requiredModules(){return[]}destroy(){this.isDestroyed||(this.enablePersistence&&this.setPersistData(),this.localObserver.destroy(),!this.refreshing&&(Y([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),super.destroy(),this.moduleLoader.clean(),Cp.off("notifyExternalChange",this.detectFunction,this.randomId)))}refresh(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new u0(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1}accessMount(){this.mount&&!this.isReactHybrid&&this.mount()}getRootElement(){return this.isReactHybrid?this.actualElement:this.element}getLocalData(){const e=this.getModuleName()+this.element.id;return window.localStorage.getItem(e)}appendTo(e){if(m(e)||"string"!=typeof e?m(e)||(this.element=e):this.element=X(e,document),!m(this.element)){const t="e-"+this.getModuleName().toLowerCase();j([this.element],["e-control",t]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),window.addEventListener("unload",this.setPersistData.bind(this)));const i=J("ej2_instances",this.element);(!i||-1===i.indexOf(this))&&super.addInstance(),this.preRender(),this.injectModules(),this.render(),this.mount?this.accessMount():this.trigger("created")}}renderComplete(e){this.isRendered=!0}dataBind(){this.injectModules(),super.dataBind()}on(e,t,i){if("string"==typeof e)this.localObserver.on(e,t,i);else for(const s of e)this.localObserver.on(s.event,s.handler,s.context)}off(e,t){if("string"==typeof e)this.localObserver.off(e,t);else for(const i of e)this.localObserver.off(i.event,i.handler)}notify(e,t){!0!==this.isDestroyed&&this.localObserver.notify(e,t)}getInjectedModules(){return this.injectedModules}static Inject(...e){this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(let t=0;t<e.length;t++)-1===this.prototype.injectedModules.indexOf(e[t])&&this.prototype.injectedModules.push(e[t])}createElement(e,t,i){return Ds(e,t)}triggerStateChange(e,t){this.isReactHybrid&&(this.setState(),this.currentContext={calls:e,args:t})}injectModules(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)}detectFunction(e){const t=Object.keys(e);t.length&&(this[t[0]]=e[t[0]])}mergePersistData(){let e;e=window.localStorage.getItem(this.getModuleName()+this.element.id),m(e)||""===e||this.setProperties(JSON.parse(e),!0)}setPersistData(){this.isDestroyed||window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData())}appendReactElement(e,t){}renderReactTemplates(){}clearTemplate(e,t){}getUniqueID(e){return this.isHistoryChanged()&&(v0=0),b0=this.pageID(location.href),XT=history.length,e+"_"+b0+"_"+v0++}pageID(e){let t=0;if(0===e.length)return t;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t&=t;return Math.abs(t)}isHistoryChanged(){return b0!==this.pageID(location.href)||XT!==history.length}addOnPersist(e){const t={};for(const i of e){let s;s=J(i,this),Jt(s)||pi(i,this.getActualProperties(s),t)}return JSON.stringify(t,(i,s)=>this.getActualProperties(s))}getActualProperties(e){return e instanceof Is?J("properties",e):e}ignoreOnPersist(e){return JSON.stringify(this.iterateJsonProperties(this.properties,e))}iterateJsonProperties(e,t){const i={};for(const s of Object.keys(e))if(-1===t.indexOf(s)){const r=e[s];if("object"!=typeof r||r instanceof Array)i[s]=r;else{const o=t.filter(a=>new RegExp(s+".").test(a)).map(a=>a.replace(s+".",""));i[s]=this.iterateJsonProperties(this.getActualProperties(r),o)}}return i}};Nv([A(!1)],Ls.prototype,"enablePersistence",void 0),Nv([A()],Ls.prototype,"enableRtl",void 0),Nv([A()],Ls.prototype,"locale",void 0),Ls=Nv([ts],Ls),"undefined"!=typeof window&&window.addEventListener("popstate",()=>{v0=0});var Hf,Mn=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const RM={left:0,top:0,bottom:0,right:0},kS={isDragged:!1};class OS extends Is{}Mn([A(0)],OS.prototype,"left",void 0),Mn([A(0)],OS.prototype,"top",void 0);let Us=Hf=class extends Gc{constructor(e,t){super(t,e),this.dragLimit=Hf.getDefaultPosition(),this.borderWidth=Hf.getDefaultPosition(),this.padding=Hf.getDefaultPosition(),this.diffX=0,this.prevLeft=0,this.prevTop=0,this.dragProcessStarted=!1,this.eleTop=0,this.tapHoldTimer=0,this.externalInitialize=!1,this.diffY=0,this.parentScrollX=0,this.parentScrollY=0,this.droppables={},this.bind()}bind(){this.toggleEvents(),Q.isIE&&j([this.element],"e-block-touch"),this.droppables[this.scope]={}}static getDefaultPosition(){return ut({},RM)}toggleEvents(e){let t;Jt(this.handle)||(t=X(this.handle,this.element));let i=this.enableTapHold&&Q.isDevice&&Q.isTouch?this.mobileInitialize:this.initialize;e?O.remove(t||this.element,Q.touchStartEvent,i):O.add(t||this.element,Q.touchStartEvent,i,this)}mobileInitialize(e){let t=e.currentTarget;this.tapHoldTimer=setTimeout(()=>{this.externalInitialize=!0,this.removeTapholdTimer(),this.initialize(e,t)},this.tapHoldThreshold),O.add(document,Q.touchMoveEvent,this.removeTapholdTimer,this),O.add(document,Q.touchEndEvent,this.removeTapholdTimer,this)}removeTapholdTimer(){clearTimeout(this.tapHoldTimer),O.remove(document,Q.touchMoveEvent,this.removeTapholdTimer),O.remove(document,Q.touchEndEvent,this.removeTapholdTimer)}getScrollableParent(e,t){return m(e)?null:e[{vertical:"scrollHeight",horizontal:"scrollWidth"}[t]]>e[{vertical:"clientHeight",horizontal:"clientWidth"}[t]]&&("vertical"===t?e.scrollTop>0:e.scrollLeft>0)?("vertical"===t?(this.parentScrollY=this.parentScrollY+(0===this.parentScrollY?e.scrollTop:e.scrollTop-this.parentScrollY),this.tempScrollHeight=e.scrollHeight):(this.parentScrollX=this.parentScrollX+(0===this.parentScrollX?e.scrollLeft:e.scrollLeft-this.parentScrollX),this.tempScrollWidth=e.scrollWidth),m(e)?e:this.getScrollableParent(e.parentNode,t)):this.getScrollableParent(e.parentNode,t)}getScrollableValues(){this.parentScrollX=0,this.parentScrollY=0,this.element.classList.contains("e-dialog")&&this.element.classList.contains("e-dlg-modal"),this.getScrollableParent(this.element.parentNode,"vertical"),this.getScrollableParent(this.element.parentNode,"horizontal")}initialize(e,t){if(this.currentStateTarget=e.target,this.isDragStarted())return;if(this.isDragStarted(!0),this.externalInitialize=!1,this.target=e.currentTarget||t,this.dragProcessStarted=!1,this.abort){let s=this.abort;"string"==typeof s&&(s=[s]);for(let r=0;r<s.length;r++)if(!m(ae(e.target,s[r])))return void(this.isDragStarted()&&this.isDragStarted(!0))}this.preventDefault&&!Jt(e.changedTouches)&&"touchstart"!==e.type&&e.preventDefault(),this.element.setAttribute("aria-grabbed","true");let i=this.getCoordinates(e);if(this.initialPosition={x:i.pageX,y:i.pageY},!this.clone){let s=this.element.getBoundingClientRect();this.getScrollableValues(),e.clientX===e.pageX&&(this.parentScrollX=0),e.clientY===e.pageY&&(this.parentScrollY=0),this.relativeXPosition=i.pageX-(s.left+this.parentScrollX),this.relativeYPosition=i.pageY-(s.top+this.parentScrollY)}this.externalInitialize?this.intDragStart(e):(O.add(document,Q.touchMoveEvent,this.intDragStart,this),O.add(document,Q.touchEndEvent,this.intDestroy,this)),this.toggleEvents(!0),"touchstart"!==e.type&&this.isPreventSelect&&document.body.classList.add("e-prevent-select"),this.externalInitialize=!1,O.trigger(document.documentElement,Q.touchStartEvent,e)}intDragStart(e){this.removeTapholdTimer();let t=!Jt(e.changedTouches);if(t&&1!==e.changedTouches.length)return;t&&e.preventDefault();let s,i=this.getCoordinates(e),r=getComputedStyle(this.element);this.margin={left:parseInt(r.marginLeft,10),top:parseInt(r.marginTop,10),right:parseInt(r.marginRight,10),bottom:parseInt(r.marginBottom,10)};let o=this.element;if(this.clone&&this.dragTarget){let y=ae(e.target,this.dragTarget);m(y)||(o=y)}this.isReplaceDragEle&&(o=this.currentStateCheck(e.target,o)),this.offset=this.calculateParentPosition(o),this.position=this.getMousePosition(e,this.isDragScroll);let a=this.initialPosition.x-i.pageX,u=this.initialPosition.y-i.pageY;if(Math.sqrt(a*a+u*u)>=this.distance||this.externalInitialize){let y=this.getHelperElement(e);if(!y||m(y))return;let E=this.helperElement=y;if(this.parentClientRect=this.calculateParentPosition(E.offsetParent),this.dragStart){let H={event:e,element:o,target:this.getProperTargetElement(e),bindEvents:null,dragElement:E};this.trigger("dragStart",H)}this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0}),s={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top},this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top),this.getScrollableValues();let _=getComputedStyle(o),D=parseFloat(_.marginTop);this.clone&&0!==D&&(s.top+=D),this.eleTop=isNaN(parseFloat(_.top))?0:parseFloat(_.top)-this.offset.top,this.enableScrollHandler&&!this.clone&&(s.top-=this.parentScrollY,s.left-=this.parentScrollX);let L=this.getProcessedPositionValue({top:s.top-this.diffY+"px",left:s.left-this.diffX+"px"});this.dragElePosition={top:s.top,left:s.left},It(E,this.getDragPosition({position:"absolute",left:L.left,top:L.top})),O.remove(document,Q.touchMoveEvent,this.intDragStart),O.remove(document,Q.touchEndEvent,this.intDestroy),this.bindDragEvents(E)}}bindDragEvents(e){zn(e)?(O.add(document,Q.touchMoveEvent,this.intDrag,this),O.add(document,Q.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,e)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))}elementInViewport(e){for(this.top=e.offsetTop,this.left=e.offsetLeft,this.width=e.offsetWidth,this.height=e.offsetHeight;e.offsetParent;)this.top+=(e=e.offsetParent).offsetTop,this.left+=e.offsetLeft;return this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&this.top+this.height<=window.pageYOffset+window.innerHeight&&this.left+this.width<=window.pageXOffset+window.innerWidth}getProcessedPositionValue(e){return this.queryPositionInfo?this.queryPositionInfo(e):e}calculateParentPosition(e){if(m(e))return{left:0,top:0};let t=e.getBoundingClientRect(),i=getComputedStyle(e);return{left:t.left+window.pageXOffset-parseInt(i.marginLeft,10),top:t.top+window.pageYOffset-parseInt(i.marginTop,10)}}intDrag(e){if(!Jt(e.changedTouches)&&1!==e.changedTouches.length)return;let t,i;this.position=this.getMousePosition(e,this.isDragScroll);let s=this.getDocumentWidthHeight("Height");s<this.position.top&&(this.position.top=s);let r=this.getDocumentWidthHeight("Width");if(r<this.position.left&&(this.position.left=r),this.drag){let ot=this.getProperTargetElement(e);this.trigger("drag",{event:e,element:this.element,target:ot})}let o=this.checkTargetElement(e);if(o.target&&o.instance){let ot=!0;this.hoverObject&&(this.hoverObject.instance!==o.instance?this.triggerOutFunction(e,o):ot=!1),ot&&(o.instance.dragData[this.scope]=this.droppables[this.scope],o.instance.intOver(e,o.target),this.hoverObject=o)}else this.hoverObject&&this.triggerOutFunction(e,o);let a=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);let u=this.parentClientRect.left,p=this.parentClientRect.top,y=this.getCoordinates(e),E=y.pageX,_=y.pageY,D=this.position.left-this.diffX,L=this.position.top-this.diffY,V=getComputedStyle(a);if(this.dragArea){if(this.pageX!==E||this.skipDistanceCheck){let ot=a.offsetWidth+(parseFloat(V.marginLeft)+parseFloat(V.marginRight));t=this.dragLimit.left>D&&D>0?this.dragLimit.left:this.dragLimit.right+window.pageXOffset<D+ot&&D>0?D-(D-this.dragLimit.right)+window.pageXOffset-ot:D<0?this.dragLimit.left:D}if(this.pageY!==_||this.skipDistanceCheck){let ot=a.offsetHeight+(parseFloat(V.marginTop)+parseFloat(V.marginBottom));i=this.dragLimit.top>L&&L>0?this.dragLimit.top:this.dragLimit.bottom+window.pageYOffset<L+ot&&L>0?L-(L-this.dragLimit.bottom)+window.pageYOffset-ot:L<0?this.dragLimit.top:L}}else t=D,i=L;let _e,re,H=p+this.borderWidth.top,se=u+this.borderWidth.left;this.dragProcessStarted&&(m(i)&&(i=this.prevTop),m(t)&&(t=this.prevLeft)),this.dragArea?(this.dragLimit.top=this.clone?this.dragLimit.top:0,_e=i-H<0?this.dragLimit.top:i-H,re=t-se<0?this.dragElePosition.left:t-se):(_e=i-H,re=t-se);let Ae=parseFloat(getComputedStyle(this.element).marginTop);if(Ae>0&&(this.clone&&(_e+=Ae,L<0&&(Ae+L>=0?_e=Ae+L:_e-=Ae),_e=this.dragLimit.bottom<_e?this.dragLimit.bottom:_e),i-H<0))if(L+Ae+(a.offsetHeight-H)>=0){let ot=this.dragLimit.top+L-H;ot+Ae+H<0?_e-=Ae+H:_e=ot}else _e-=Ae+H;this.enableScrollHandler&&!this.clone&&(_e-=this.parentScrollY,re-=this.parentScrollX);let gt=this.getProcessedPositionValue({top:_e+"px",left:re+"px"});It(a,this.getDragPosition(gt)),!this.elementInViewport(a)&&this.enableAutoScroll&&this.helperElement.scrollIntoView(),this.dragProcessStarted=!0,this.prevLeft=t,this.prevTop=i,this.position.left=t,this.position.top=i,this.pageX=E,this.pageY=_}triggerOutFunction(e,t){this.hoverObject.instance.intOut(e,t.target),this.hoverObject.instance.dragData[this.scope]=null,this.hoverObject=null}getDragPosition(e){let t=ut({},e);return this.axis&&("x"===this.axis?delete t.top:"y"===this.axis&&delete t.left),t}getDocumentWidthHeight(e){let t=document.body,i=document.documentElement;return Math.max(t["scroll"+e],i["scroll"+e],t["offset"+e],i["offset"+e],i["client"+e])}intDragStop(e){if(this.dragProcessStarted=!1,!Jt(e.changedTouches)&&1!==e.changedTouches.length)return;if(-1!==["touchend","pointerup","mouseup"].indexOf(e.type)){if(this.dragStop){let s=this.getProperTargetElement(e);this.trigger("dragStop",{event:e,element:this.element,target:s,helper:this.helperElement})}this.intDestroy(e)}else this.element.setAttribute("aria-grabbed","false");let i=this.checkTargetElement(e);i.target&&i.instance&&(i.instance.dragStopCalled=!0,i.instance.dragData[this.scope]=this.droppables[this.scope],i.instance.intDrop(e,i.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select")}intDestroy(e){this.dragProcessStarted=!1,this.toggleEvents(),document.body.classList.remove("e-prevent-select"),this.element.setAttribute("aria-grabbed","false"),O.remove(document,Q.touchMoveEvent,this.intDragStart),O.remove(document,Q.touchEndEvent,this.intDragStop),O.remove(document,Q.touchEndEvent,this.intDestroy),O.remove(document,Q.touchMoveEvent,this.intDrag),this.isDragStarted()&&this.isDragStarted(!0)}onPropertyChanged(e,t){}getModuleName(){return"draggable"}isDragStarted(e){return e&&(kS.isDragged=!kS.isDragged),kS.isDragged}setDragArea(){let e,t,r,i=0,s=0;if(r="string"==typeof this.dragArea?X(this.dragArea):this.dragArea,r){let a=r.getBoundingClientRect();e=r.scrollWidth?r.scrollWidth:a.right-a.left,t=r.scrollHeight?r.scrollHeight:a.bottom-a.top;let u=["Top","Left","Bottom","Right"],p=getComputedStyle(r);for(let y=0;y<u.length;y++){let E=u[y],_=p["border"+E+"Width"],D=p["padding"+E],L=E.toLowerCase();this.borderWidth[L]=isNaN(parseFloat(_))?0:parseFloat(_),this.padding[L]=isNaN(parseFloat(D))?0:parseFloat(D)}i=a.top,s=a.left,this.dragLimit.left=s+this.borderWidth.left+this.padding.left,this.dragLimit.top=r.offsetTop+this.borderWidth.top+this.padding.top,this.dragLimit.right=s+e-(this.borderWidth.right+this.padding.right),this.dragLimit.bottom=i+t-(this.borderWidth.bottom+this.padding.bottom)}}getProperTargetElement(e){let i,t=this.getCoordinates(e),s=this.helperElement.style.pointerEvents||"";return Pv(e.target,this.helperElement)||-1!==e.type.indexOf("touch")?(this.helperElement.style.pointerEvents="none",i=document.elementFromPoint(t.clientX,t.clientY),this.helperElement.style.pointerEvents=s):i=e.target,i}currentStateCheck(e,t){let i;return i=m(this.currentStateTarget)||this.currentStateTarget===e?m(t)?e:t:this.currentStateTarget,i}getMousePosition(e,t){let r,o,i=void 0!==e.srcElement?e.srcElement:e.target,s=this.getCoordinates(e),a=m(i.offsetParent);return t?(r=this.clone?s.pageX:s.pageX+(a?0:i.offsetParent.scrollLeft)-this.relativeXPosition,o=this.clone?s.pageY:s.pageY+(a?0:i.offsetParent.scrollTop)-this.relativeYPosition):(r=this.clone?s.pageX:s.pageX+window.pageXOffset-this.relativeXPosition,o=this.clone?s.pageY:s.pageY+window.pageYOffset-this.relativeYPosition),{left:r-(this.margin.left+this.cursorAt.left),top:o-(this.margin.top+this.cursorAt.top)}}getCoordinates(e){return e.type.indexOf("touch")>-1?e.changedTouches[0]:e}getHelperElement(e){let t;return this.clone?this.helper?t=this.helper({sender:e,element:this.target}):(t=Ds("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(t)):t=this.element,t}setGlobalDroppables(e,t,i){this.droppables[this.scope]=e?null:{draggable:t,helper:i,draggedElement:this.element}}checkTargetElement(e){let t=this.getProperTargetElement(e),i=this.getDropInstance(t);if(!i&&t&&!m(t.parentNode)){let s=ae(t.parentNode,".e-droppable")||t.parentElement;s&&(i=this.getDropInstance(s))}return{target:t,instance:i}}getDropInstance(e){let i,s=e&&e.ej2_instances;if(s)for(let r of s)if("droppable"===r.getModuleName()){i=r;break}return i}destroy(){this.toggleEvents(!0),super.destroy()}};Mn([Ps({},OS)],Us.prototype,"cursorAt",void 0),Mn([A(!0)],Us.prototype,"clone",void 0),Mn([A()],Us.prototype,"dragArea",void 0),Mn([A()],Us.prototype,"isDragScroll",void 0),Mn([A()],Us.prototype,"isReplaceDragEle",void 0),Mn([A(!0)],Us.prototype,"isPreventSelect",void 0),Mn([Z()],Us.prototype,"drag",void 0),Mn([Z()],Us.prototype,"dragStart",void 0),Mn([Z()],Us.prototype,"dragStop",void 0),Mn([A(1)],Us.prototype,"distance",void 0),Mn([A()],Us.prototype,"handle",void 0),Mn([A()],Us.prototype,"abort",void 0),Mn([A()],Us.prototype,"helper",void 0),Mn([A("default")],Us.prototype,"scope",void 0),Mn([A("")],Us.prototype,"dragTarget",void 0),Mn([A()],Us.prototype,"axis",void 0),Mn([A()],Us.prototype,"queryPositionInfo",void 0),Mn([A(!1)],Us.prototype,"enableTailMode",void 0),Mn([A(!1)],Us.prototype,"skipDistanceCheck",void 0),Mn([A(!0)],Us.prototype,"preventDefault",void 0),Mn([A(!1)],Us.prototype,"enableAutoScroll",void 0),Mn([A(!1)],Us.prototype,"enableTapHold",void 0),Mn([A(750)],Us.prototype,"tapHoldThreshold",void 0),Mn([A(!1)],Us.prototype,"enableScrollHandler",void 0),Us=Hf=Mn([ts],Us);var Sg=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let Sp=class extends Gc{constructor(e,t){super(t,e),this.mouseOver=!1,this.dragData={},this.dragStopCalled=!1,this.bind()}bind(){this.wireEvents()}wireEvents(){O.add(this.element,Q.touchEndEvent,this.intDrop,this)}onPropertyChanged(e,t){}getModuleName(){return"droppable"}intOver(e,t){this.mouseOver||(this.trigger("over",{event:e,target:t,dragData:this.dragData[this.scope]}),this.mouseOver=!0)}intOut(e,t){this.mouseOver&&(this.trigger("out",{evt:e,target:t}),this.mouseOver=!1)}intDrop(e,t){if(!this.dragStopCalled)return;this.dragStopCalled=!1;let i=!0;const s=this.dragData[this.scope],r=!!s&&s.helper&&zn(s.helper);let o;r&&(o=this.isDropArea(e,s.helper,t),this.accept&&(i=vg(s.helper,this.accept))),r&&this.drop&&o.canDrop&&i&&this.trigger("drop",{event:e,target:o.target,droppedElement:s.helper,dragData:s}),this.mouseOver=!1}isDropArea(e,t,i){const s={canDrop:!0,target:i||e.target},r="touchend"===e.type;if(r||s.target===t){t.style.display="none";const o=r?e.changedTouches[0]:e,a=document.elementFromPoint(o.clientX,o.clientY);s.canDrop=!1,s.canDrop=Pv(a,this.element),s.canDrop&&(s.target=a),t.style.display=""}return s}destroy(){O.remove(this.element,Q.touchEndEvent,this.intDrop),super.destroy()}};Sg([A()],Sp.prototype,"accept",void 0),Sg([A("default")],Sp.prototype,"scope",void 0),Sg([Z()],Sp.prototype,"drop",void 0),Sg([Z()],Sp.prototype,"over",void 0),Sg([Z()],Sp.prototype,"out",void 0),Sp=Sg([ts],Sp);var Cu,jf=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const NM={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222};let Pn=Cu=class extends Gc{constructor(e,t){super(t,e),this.keyPressHandler=i=>{const s=i.altKey,r=i.ctrlKey,o=i.shiftKey,a=i.which,u=Object.keys(this.keyConfigs);for(const p of u){const y=this.keyConfigs[p].split(",");for(const E of y){const _=Cu.getKeyConfigData(E.trim());s===_.altKey&&r===_.ctrlKey&&o===_.shiftKey&&a===_.keyCode&&(i.action=p,this.keyAction&&this.keyAction(i))}}},this.bind()}destroy(){this.unwireEvents(),super.destroy()}onPropertyChanged(e,t){}bind(){this.wireEvents()}getModuleName(){return"keyboard"}wireEvents(){this.element.addEventListener(this.eventName,this.keyPressHandler)}unwireEvents(){this.element.removeEventListener(this.eventName,this.keyPressHandler)}static getKeyConfigData(e){if(e in this.configCache)return this.configCache[e];const t=e.toLowerCase().split("+"),i={altKey:-1!==t.indexOf("alt"),ctrlKey:-1!==t.indexOf("ctrl"),shiftKey:-1!==t.indexOf("shift"),keyCode:null};return i.keyCode=t[t.length-1].length>1&&Number(t[t.length-1])?Number(t[t.length-1]):Cu.getKeyCode(t[t.length-1]),Cu.configCache[e]=i,i}static getKeyCode(e){return NM[e]||e.toUpperCase().charCodeAt(0)}};Pn.configCache={},jf([A({})],Pn.prototype,"keyConfigs",void 0),jf([A("keyup")],Pn.prototype,"eventName",void 0),jf([Z()],Pn.prototype,"keyAction",void 0),Pn=Cu=jf([ts],Pn);let Xr=(()=>{class n{constructor(t,i,s){this.controlName=t,this.localeStrings=i,this.setLocale(s||Ff)}setLocale(t){const i=this.intGetControlConstant(n.locale,t);this.currentLocale=i||this.localeStrings}static load(t){this.locale=ut(this.locale,t,{},!0)}getConstant(t){return m(this.currentLocale[t])?this.localeStrings[t]||"":this.currentLocale[t]}intGetControlConstant(t,i){return t[i]?t[i][this.controlName]:null}}return n.locale={},n})();var Sd=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class C0 extends Is{}Sd([A(50)],C0.prototype,"swipeThresholdDistance",void 0);const Eu=/(Up|Down)/;let Sn=class extends Gc{constructor(e,t){super(t,e),this.touchAction=!0,this.tapCount=0,this.startEvent=i=>{if(!0===this.touchAction){const s=this.updateChangeTouches(i);void 0!==i.changedTouches&&(this.touchAction=!1),this.isTouchMoved=!1,this.movedDirection="",this.startPoint=this.lastMovedPoint={clientX:s.clientX,clientY:s.clientY},this.startEventData=s,this.hScrollLocked=this.vScrollLocked=!1,this.tStampStart=Date.now(),this.timeOutTapHold=setTimeout(()=>{this.tapHoldEvent(i)},this.tapHoldThreshold),O.add(this.element,Q.touchMoveEvent,this.moveEvent,this),O.add(this.element,Q.touchEndEvent,this.endEvent,this),O.add(this.element,Q.touchCancelEvent,this.cancelEvent,this)}},this.moveEvent=i=>{const s=this.updateChangeTouches(i);this.movedPoint=s,this.isTouchMoved=!(s.clientX===this.startPoint.clientX&&s.clientY===this.startPoint.clientY);let r={};this.isTouchMoved&&(clearTimeout(this.timeOutTapHold),this.calcScrollPoints(i),r=ut(r,{},{startEvents:this.startEventData,originalEvent:i,startX:this.startPoint.clientX,startY:this.startPoint.clientY,distanceX:this.distanceX,distanceY:this.distanceY,scrollDirection:this.scrollDirection,velocity:this.getVelocity(s)}),this.trigger("scroll",r),this.lastMovedPoint={clientX:s.clientX,clientY:s.clientY})},this.cancelEvent=i=>{clearTimeout(this.timeOutTapHold),clearTimeout(this.timeOutTap),this.tapCount=0,this.swipeFn(i),O.remove(this.element,Q.touchCancelEvent,this.cancelEvent)},this.endEvent=i=>{this.swipeFn(i),this.isTouchMoved||"function"==typeof this.tap&&(this.trigger("tap",{originalEvent:i,tapCount:++this.tapCount}),this.timeOutTap=setTimeout(()=>{this.tapCount=0},this.tapThreshold)),this.modeclear()},this.swipeFn=i=>{clearTimeout(this.timeOutTapHold),clearTimeout(this.timeOutTap);const s=this.updateChangeTouches(i);let r=s.clientX-this.startPoint.clientX,o=s.clientY-this.startPoint.clientY;r=Math.floor(r<0?-1*r:r),o=Math.floor(o<0?-1*o:r),this.isTouchMoved=r>1||o>1,this.endPoint=s,this.calcPoints(i);const a={originalEvent:i,startEvents:this.startEventData,startX:this.startPoint.clientX,startY:this.startPoint.clientY,distanceX:this.distanceX,distanceY:this.distanceY,swipeDirection:this.movedDirection,velocity:this.getVelocity(s)};if(this.isTouchMoved){let u;const p=this.swipeSettings.swipeThresholdDistance;u=ut(u,this.defaultArgs,a);let y=!1;const E=this.element,_=this.isScrollable(E),D=Eu.test(this.movedDirection);(p<this.distanceX&&!D||p<this.distanceY&&D)&&(y=!_||this.checkSwipe(E,D)),y&&this.trigger("swipe",u)}this.modeclear()},this.modeclear=()=>{this.modeClear=setTimeout(()=>{this.touchAction=!0},"function"!=typeof this.tap?0:20),this.lastTapTime=(new Date).getTime(),O.remove(this.element,Q.touchMoveEvent,this.moveEvent),O.remove(this.element,Q.touchEndEvent,this.endEvent),O.remove(this.element,Q.touchCancelEvent,this.cancelEvent)},this.bind()}onPropertyChanged(e,t){}bind(){this.wireEvents(),Q.isIE&&this.element.classList.add("e-block-touch")}destroy(){this.unwireEvents(),super.destroy()}wireEvents(){O.add(this.element,Q.touchStartEvent,this.startEvent,this)}unwireEvents(){O.remove(this.element,Q.touchStartEvent,this.startEvent)}getModuleName(){return"touch"}isScrollable(e){const t=getComputedStyle(e);return!!/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}tapHoldEvent(e){let t;this.tapCount=0,this.touchAction=!0,O.remove(this.element,Q.touchMoveEvent,this.moveEvent),O.remove(this.element,Q.touchEndEvent,this.endEvent),t={originalEvent:e},this.trigger("tapHold",t),O.remove(this.element,Q.touchCancelEvent,this.cancelEvent)}calcPoints(e){const t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.startPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.startPoint.clientY)),this.movedDirection=this.distanceX>this.distanceY?t.clientX>this.startPoint.clientX?"Right":"Left":t.clientY<this.startPoint.clientY?"Up":"Down"}calcScrollPoints(e){const t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.lastMovedPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.lastMovedPoint.clientY)),(this.distanceX>this.distanceY||!0===this.hScrollLocked)&&!1===this.vScrollLocked?(this.scrollDirection=t.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=t.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)}getVelocity(e){const t=e.clientX,i=e.clientY,s=Date.now(),r=t-this.startPoint.clientX,o=i-this.startPoint.clientX,a=s-this.tStampStart;return Math.sqrt(r*r+o*o)/a}checkSwipe(e,t){const i=["scroll","offset"],s=t?["Height","Top"]:["Width","Left"];return e[i[0]+s[0]]<=e[i[1]+s[0]]||0===e[i[0]+s[1]]||e[i[1]+s[0]]+e[i[0]+s[1]]>=e[i[0]+s[0]]}updateChangeTouches(e){return e.changedTouches&&0!==e.changedTouches.length?e.changedTouches[0]:e}};Sd([Z()],Sn.prototype,"tap",void 0),Sd([Z()],Sn.prototype,"tapHold",void 0),Sd([Z()],Sn.prototype,"swipe",void 0),Sd([Z()],Sn.prototype,"scroll",void 0),Sd([A(350)],Sn.prototype,"tapThreshold",void 0),Sd([A(750)],Sn.prototype,"tapHoldThreshold",void 0),Sd([Ps({},C0)],Sn.prototype,"swipeSettings",void 0),Sn=Sd([ts],Sn);const Pa=new RegExp("\\n|\\r|\\s\\s+","g"),Uf=new RegExp(/'|"/g),E0=new RegExp("if ?\\("),Yc=new RegExp("else if ?\\("),w0=new RegExp("else"),_g=new RegExp("for ?\\("),zf=new RegExp("(/if|/for)"),Ig=new RegExp("\\((.*)\\)",""),_p=new RegExp("^[0-9]+$","g"),xg=new RegExp("[\\w\"'.\\s+]+","g"),Tg=new RegExp('"(.*?)"',"g"),Ag=new RegExp("[\\w\"'@#$.\\s-+]+","g");let Dg=new RegExp("\\${([^}]*)}","g");const kg=/^\..*/gm,S0=/\\/gi,QT=/\\\\/gi,JT=new RegExp("[\\w\"'@#$.\\s+]+","g"),eA=/\window\./gm;function Wf(n,e,t,i,s){return!e||_p.test(n)||-1!==i.indexOf(n.split(".")[0])||s?n:t+"."+n}function _0(n,e,t,i){return e&&!_p.test(n)&&-1===i.indexOf(n.split(".")[0])?t+'["'+n:n}function nA(n){return n.match(QT)||(n=n.replace(S0,"\\\\")),n}function MS(n,e,t,i){if(n=n.trim(),/\window\./gm.test(n))return n;{const r=/'|"/gm;return/@|\$|#/gm.test(n)&&(n=_0(n,-1===t.indexOf(n),e,t)+'"]'),kg.test(n)?function sA(n,e,t,i){return!e||_p.test(n)||-1!==i.indexOf(n.split(".")[0])||/^\..*/gm.test(n)?n:t+"."+n}(n,!r.test(n)&&-1===t.indexOf(n),e,t):Wf(n,!r.test(n)&&-1===t.indexOf(n),e,t,i)}}const FM=/^[\n\r.]+<tr|^<tr/,rA=/^[\n\r.]+<svg|^<path|^<g/;function oA(){return"-"+Math.random().toString(36).substr(2,5)}function xs(n,e,t){const i=lA.compile(n,e,t);return(s,r,o,a,u,p,y)=>{const E=i(s,r,o,y);return"string"==typeof E?rA.test(E)?Ds("svg",{innerHTML:E}).childNodes:Ds(FM.test(E)?"table":"div",{innerHTML:E}).childNodes:E}}const lA={compile:(new class HM{compile(e,t={},i){return function tA(n,e,t){const i="data",s=function iA(n,e,t,i){let s=0;const r=[],o=n.match(/class="([^"]+|)\s{2}/g);let a="";return o&&o.forEach(u=>{a=u.replace(/\s\s+/g," "),n=n.replace(u,a)}),n.replace(Pa,"").replace(Tg,"'$1'").replace(Dg,(u,p,y,E)=>{const D=p.match(Ig);if(D){const L=D[1];if(Yc.test(p))p='";} '+p.replace(D[1],L.replace(xg,V=>Wf(V=V.trim(),!Uf.test(V)&&-1===r.indexOf(V),e,r,i)))+'{ \n str = str + "';else if(E0.test(p))p='"; '+p.replace(D[1],L.replace(Ag,V=>MS(V,e,r,i)))+'{ \n str = str + "';else if(_g.test(p)){const V=D[1].split(" of ");p='"; '+p.replace(D[1],H=>(r.push(V[0]),r.push(V[0]+"Index"),s+=1,"var i"+s+"=0; i"+s+" < "+Wf(V[1],!0,e,r,i)+".length; i"+s+"++"))+"{ \n "+V[0]+"= "+Wf(V[1],!0,e,r,i)+"[i"+s+"]; \n var "+V[0]+"Index=i"+s+'; \n str = str + "'}else{const V=p.split("(");let H=t&&t.hasOwnProperty(V[0])?"this.":"global";H=/\./.test(V[0])?"":H;const se=D[1].split(",");0!==D[1].length&&!/data/.test(se[0])&&!/window./.test(se[0])&&(D[1]="global"===H?e+"."+D[1]:D[1]);const _e=/@|\$|#/gm,re=/\]\./gm;eA.test(p)&&re.test(p)||_e.test(p)?/@|\$|#|\]\./gm.test(p)&&(p='"+ '+("global"===H?"":H)+p.replace(D[1],L.replace(JT,gt=>MS(gt,e,r,i)))+'+ "'):p='" + '+("global"===H?"":H)+p.replace(L,Wf(D[1].replace(/,( |)data.|,/gi,","+e+".").replace(/,( |)data.window/gi,",window"),"global"!==H,e,r,i))+'+"'}}else w0.test(p)?p='"; '+p.replace(w0,'} else { \n str = str + "'):p.match(zf)?p=p.replace(zf,'"; \n } \n str = str + "'):/@|#|\$/gm.test(p)?(p.match(S0)&&(p=nA(p)),p='"+'+_0(p,-1===r.indexOf(p),e,r)+'"]+"'):p=p.match(S0)?'"+'+_0(p=nA(p),-1===r.indexOf(p),e,r)+'"]+"':'"+'+Wf(p.replace(/,/gi,"+"+e+"."),-1===r.indexOf(p),e,r,i)+'+"';return p})}(n,i,e,t);return new Function(i,'var str="'+s+"\";var valueRegEx = (/value=\\'([A-Za-z0-9 _]*)((.)([\\w)(!-;?-\u25a0\\s]+)['])/g);\n    var hrefRegex = (/(?:href)([\\s='\"./]+)([\\w-./?=&\\\\#\"]+)((.)([\\w)(!-;/?-\u25a0\\s]+)['])/g);\n    if((str.match(valueRegEx)) && (str.match('svg') === null)){\n        var check = str.match(valueRegEx);\n        var str1 = str;\n        for (var i=0; i < check.length; i++) {\n            var check1 = str.match(valueRegEx)[i].split('value=')[1];\n            var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n            change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n            str1 = str1.replace(check1, change);\n        }\n        str = str.replace(str, str1);\n    }\n    else if (str.match(/(?:href='')/) === null) {\n        if((str.match(hrefRegex)) && (str.match('svg') === null)) {\n            var check = str.match(hrefRegex);\n            var str1 = str;\n            for (var i=0; i < check.length; i++) {\n                var check1 = str.match(hrefRegex)[i].split('href=')[1];\n                var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n                change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n                str1 = str1.replace(check1, change);\n            }\n            str = str.replace(str, str1);\n        }\n    }\n     return str;").bind(e)}(e,t)}}).compile},jM=["script","style","iframe[src]",'link[href*="javascript:"]','object[type="text/x-scriptlet"]','object[data^="data:text/html;base64"]','img[src^="data:text/html;base64"]','[src^="javascript:"]','[dynsrc^="javascript:"]','[lowsrc^="javascript:"]','[type^="application/x-shockwave-flash"]'],PS=[{attribute:"href",selector:'[href*="javascript:"]'},{attribute:"background",selector:'[background^="javascript:"]'},{attribute:"style",selector:'[style*="javascript:"]'},{attribute:"style",selector:'[style*="expression("]'},{attribute:"href",selector:'a[href^="data:text/html;base64"]'}],I0=["onchange","onclick","onmouseover","onmouseout","onkeydown","onload","onerror","onblur","onfocus","onbeforeload","onbeforeunload","onkeyup","onsubmit","onafterprint","onbeforeonload","onbeforeprint","onblur","oncanplay","oncanplaythrough","onchange","onclick","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onerror","onfocus","onformchange","onforminput","onhaschange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onoffline","onoine","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreadystatechange","onredo","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","onundo","onunload","onvolumechange","onwaiting","onmouseenter","onmouseleave","onmousewheel","onstart","onpropertychange"];class _n{static beforeSanitize(){return{selectors:{tags:jM,attributes:PS}}}static sanitize(e){const t=this.beforeSanitize();return this.serializeValue(t,e)}static serializeValue(e,t){this.removeAttrs=e.selectors.attributes,this.removeTags=e.selectors.tags,this.wrapElement=document.createElement("div"),this.wrapElement.innerHTML=t,this.removeXssTags(),this.removeJsEvents(),this.removeXssAttrs();const i=this.wrapElement.innerHTML;return this.removeElement(),i}static removeElement(){const e=this.wrapElement.children;for(let t=0;t<e.length;t++){const i=e[t].attributes;for(let s=0;s<i.length;s++)this.wrapElement.children[t].removeAttribute(i[s].localName)}}static removeXssTags(){const e=this.wrapElement.querySelectorAll(this.removeTags.join(","));e.length>0&&e.forEach(t=>{ye(t)})}static removeJsEvents(){const e=this.wrapElement.querySelectorAll("["+I0.join("],[")+"]");e.length>0&&e.forEach(t=>{I0.forEach(i=>{t.hasAttribute(i)&&t.removeAttribute(i)})})}static removeXssAttrs(){this.removeAttrs.forEach((e,t)=>{const i=this.wrapElement.querySelectorAll(e.selector);i.length>0&&i.forEach(s=>{s.removeAttribute(e.attribute)})})}}function cA(n,e,t,i,s,r){let o=i;if(i.tagName===e){const a=J("ej2_instances",i);o=n("input",{attrs:{type:t}});const u=["change","cssClass","label","labelPosition","id"];for(let p=0,y=i.attributes.length;p<y;p++)-1===u.indexOf(i.attributes[p].nodeName)&&o.setAttribute(i.attributes[p].nodeName,i.attributes[p].nodeValue);bt(i,{class:s,role:r,"aria-checked":"false"}),i.appendChild(o),pi("ej2_instances",a,o),MT(i,"ej2_instances")}return o}function LV(n){let e;const t=n.childNodes;for(let i=0;i<t.length;i++)if(e=t[i],3===e.nodeType)return e;return null}function x0(n,e=!1,t={}){const i=n("div",{className:"e-checkbox-wrapper e-css"});if(t.cssClass&&j([i],t.cssClass.split(" ")),t.enableRtl&&i.classList.add("e-rtl"),e){const r=n("span",{className:"e-ripple-container"});da(r,{isCenterRipple:!0,duration:400}),i.appendChild(r)}const s=n("span",{className:"e-frame e-icons"});if(t.checked&&s.classList.add("e-check"),i.appendChild(s),t.label){const r=n("span",{className:"e-label"});t.disableHtmlEncode?r.textContent=t.label:r.innerHTML=t.label,i.appendChild(r)}return i}function T0(n,e){if(e){const t=document.createEvent("MouseEvents");t.initEvent(n.type,!1,!0),e.dispatchEvent(t)}}function hA(n,e){n.element.getAttribute("ejs-for")&&e.appendChild(n.createElement("input",{attrs:{name:n.name||n.element.name,value:"false",type:"hidden"}}))}var La=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};new u0;let Ip=(()=>{let n=class extends Ls{constructor(t,i){super(t,i)}preRender(){}render(){this.initialize(),this.removeRippleEffect=da(this.element,{selector:".e-btn"}),this.renderComplete()}initialize(){if(this.cssClass&&j([this.element],this.cssClass.split(" ")),this.isPrimary&&this.element.classList.add("e-primary"),this.content){const t=this.enableHtmlSanitizer?_n.sanitize(this.content):this.content;this.element.innerHTML=t}this.setIconCss(),this.enableRtl&&this.element.classList.add("e-rtl"),this.disabled?this.controlStatus(this.disabled):this.wireEvents()}controlStatus(t){this.element.disabled=t}setIconCss(){if(this.iconCss){const t=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(t.classList.add("e-icon-"+this.iconPosition.toLowerCase()),("Top"===this.iconPosition||"Bottom"===this.iconPosition)&&this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add("e-icon-btn");const i=this.element.childNodes[0];!i||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?this.element.appendChild(t):this.element.insertBefore(t,i)}}wireEvents(){this.isToggle&&O.add(this.element,"click",this.btnClickHandler,this)}unWireEvents(){this.isToggle&&O.remove(this.element,"click",this.btnClickHandler)}btnClickHandler(){this.element.classList.contains("e-active")?this.element.classList.remove("e-active"):this.element.classList.add("e-active")}destroy(){let t=["e-primary","e-rtl","e-icon-btn","e-success","e-info","e-danger","e-warning","e-flat","e-outline","e-small","e-bigger","e-active","e-round","e-top-icon-btn","e-bottom-icon-btn"];this.cssClass&&(t=t.concat(this.cssClass.split(" "))),super.destroy(),Y([this.element],t),this.element.getAttribute("class")||this.element.removeAttribute("class"),this.disabled&&this.element.removeAttribute("disabled"),this.content&&(this.element.innerHTML=this.element.innerHTML.replace(this.content,""));const i=this.element.querySelector("span.e-btn-icon");i&&ye(i),this.unWireEvents(),Sh&&this.removeRippleEffect()}getModuleName(){return"btn"}getPersistData(){return this.addOnPersist([])}static Inject(){}onPropertyChanged(t,i){let s=this.element.querySelector("span.e-btn-icon");for(const r of Object.keys(t))switch(r){case"isPrimary":t.isPrimary?this.element.classList.add("e-primary"):this.element.classList.remove("e-primary");break;case"disabled":this.controlStatus(t.disabled);break;case"iconCss":s?t.iconCss?(s.className="e-btn-icon "+t.iconCss,this.element.textContent.trim()&&s.classList.add("Left"===this.iconPosition?"e-icon-left":"e-icon-right")):ye(s):this.setIconCss();break;case"iconPosition":Y([this.element],["e-top-icon-btn","e-bottom-icon-btn"]),s=this.element.querySelector("span.e-btn-icon"),s&&ye(s),this.setIconCss();break;case"cssClass":i.cssClass&&Y([this.element],i.cssClass.split(" ")),t.cssClass&&j([this.element],t.cssClass.split(" "));break;case"enableRtl":t.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl");break;case"content":LV(this.element)||this.element.classList.remove("e-icon-btn"),this.enableHtmlSanitizer&&(t.content=_n.sanitize(t.content)),this.element.innerHTML=t.content,this.setIconCss();break;case"isToggle":t.isToggle?O.add(this.element,"click",this.btnClickHandler,this):(O.remove(this.element,"click",this.btnClickHandler),Y([this.element],["e-active"]))}}click(){this.element.click()}focusIn(){this.element.focus()}};return La([A("Left")],n.prototype,"iconPosition",void 0),La([A("")],n.prototype,"iconCss",void 0),La([A(!1)],n.prototype,"disabled",void 0),La([A(!1)],n.prototype,"isPrimary",void 0),La([A("")],n.prototype,"cssClass",void 0),La([A("")],n.prototype,"content",void 0),La([A(!1)],n.prototype,"isToggle",void 0),La([A()],n.prototype,"locale",void 0),La([A(!1)],n.prototype,"enableHtmlSanitizer",void 0),La([Z()],n.prototype,"created",void 0),n=La([ts],n),n})();var Ll=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const Og="e-check",uA="e-checkbox-disabled",Mg="e-frame",LS="e-stop",RS="e-label",A0="e-ripple-container",NS="e-ripple-check",FS="e-ripple-stop",D0="e-rtl",BS="e-checkbox-wrapper",dA=["title","class","style","disabled","readonly","name","value"];let Ra=class extends Ls{constructor(e,t){super(e,t),this.isFocused=!1,this.isMouseClick=!1,this.clickTriggered=!1}changeState(e){let t,i;const s=this.getWrapper().getElementsByClassName(Mg)[0];Sh&&(i=this.getWrapper().getElementsByClassName(A0)[0]),"check"===e?(s.classList.remove(LS),s.classList.add(Og),i&&(i.classList.remove(FS),i.classList.add(NS)),t="true",this.element.checked=!0):"uncheck"===e?(Y([s],[Og,LS]),i&&Y([i],[NS,FS]),t="false",this.element.checked=!1):(s.classList.remove(Og),s.classList.add(LS),i&&(i.classList.remove(NS),i.classList.add(FS)),t="mixed",this.element.indeterminate=!0),this.getWrapper().setAttribute("aria-checked",t)}clickHandler(e){if("INPUT"===e.target.tagName&&this.clickTriggered)return void(this.clickTriggered=!1);("SPAN"===e.target.tagName||"LABEL"===e.target.tagName)&&(this.clickTriggered=!0),this.isMouseClick&&(this.focusOutHandler(),this.isMouseClick=!1),this.indeterminate?(this.changeState(this.checked?"check":"uncheck"),this.indeterminate=!1,this.element.indeterminate=!1):this.checked?(this.changeState("uncheck"),this.checked=!1):(this.changeState("check"),this.checked=!0);const t={checked:this.updateVueArrayModel(!1),event:e};this.trigger("change",t),e.stopPropagation()}destroy(){let e=this.getWrapper();super.destroy(),this.wrapper&&(e=this.wrapper,this.disabled||this.unWireEvents(),"INPUT"===this.tagName?(this.getWrapper()&&e.parentNode&&e.parentNode.insertBefore(this.element,e),ye(e),this.element.checked=!1,this.indeterminate&&(this.element.indeterminate=!1),["name","value","disabled"].forEach(t=>{this.element.removeAttribute(t)})):(["role","aria-checked","class"].forEach(t=>{e.removeAttribute(t)}),e.innerHTML=""))}focusHandler(){this.isFocused=!0}focusOutHandler(){const e=this.getWrapper();e&&e.classList.remove("e-focus"),this.isFocused=!1}getModuleName(){return"checkbox"}getPersistData(){return this.addOnPersist(["checked","indeterminate"])}getWrapper(){return this.element&&this.element.parentElement?this.element.parentElement.parentElement:null}initialize(){m(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.name&&this.element.setAttribute("name",this.name),this.value&&(this.element.setAttribute("value",this.value),this.isVue&&"boolean"==typeof this.value&&!0===this.value&&this.setProperties({checked:!0},!0)),this.checked&&this.changeState("check"),this.indeterminate&&this.changeState(),this.disabled&&this.setDisabled()}initWrapper(){let e=this.element.parentElement;e.classList.contains(BS)||(e=this.createElement("div",{className:BS,attrs:{role:"checkbox","aria-checked":"false"}}),this.element.parentNode.insertBefore(e,this.element));const t=this.createElement("label",{attrs:{for:this.element.id}}),i=this.createElement("span",{className:"e-icons "+Mg});if(e.classList.add("e-wrapper"),this.enableRtl&&e.classList.add(D0),this.cssClass&&j([e],this.cssClass.split(" ")),e.appendChild(t),t.appendChild(this.element),hA(this,t),t.appendChild(i),Sh){const s=this.createElement("span",{className:A0});"Before"===this.labelPosition?t.appendChild(s):t.insertBefore(s,i),da(s,{duration:400,isCenterRipple:!0})}this.label&&this.setText(this.label)}keyUpHandler(){this.isFocused&&this.getWrapper().classList.add("e-focus")}labelMouseDownHandler(e){this.isMouseClick=!0,T0(e,this.getWrapper().getElementsByClassName(A0)[0])}labelMouseUpHandler(e){this.isMouseClick=!0;const t=this.getWrapper().getElementsByClassName(A0)[0];if(t){const i=t.querySelectorAll(".e-ripple-element");for(let s=0;s<i.length-1;s++)t.removeChild(t.childNodes[s]);T0(e,t)}}onPropertyChanged(e,t){const i=this.getWrapper();for(const s of Object.keys(e))switch(s){case"checked":this.indeterminate=!1,this.element.indeterminate=!1,this.changeState(e.checked?"check":"uncheck");break;case"indeterminate":e.indeterminate?this.changeState():(this.element.indeterminate=!1,this.changeState(this.checked?"check":"uncheck"));break;case"disabled":e.disabled?(this.setDisabled(),this.wrapper=this.getWrapper(),this.unWireEvents()):(this.element.disabled=!1,i.classList.remove(uA),i.setAttribute("aria-disabled","false"),this.wireEvents());break;case"cssClass":t.cssClass&&Y([i],t.cssClass.split(" ")),e.cssClass&&j([i],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?i.classList.add(D0):i.classList.remove(D0);break;case"label":this.setText(e.label);break;case"labelPosition":{const r=i.getElementsByClassName(RS)[0],o=i.getElementsByTagName("label")[0];ye(r),"After"===e.labelPosition?o.appendChild(r):o.insertBefore(r,i.getElementsByClassName(Mg)[0]);break}case"name":this.element.setAttribute("name",e.name);break;case"value":if(this.isVue&&"object"==typeof e.value)break;this.element.setAttribute("value",e.value);break;case"htmlAttributes":this.updateHtmlAttributeToWrapper()}}preRender(){let e=this.element;this.tagName=this.element.tagName,e=cA(this.createElement,"EJS-CHECKBOX","checkbox",e,BS,"checkbox"),this.element=e,"checkbox"!==this.element.getAttribute("type")&&this.element.setAttribute("type","checkbox"),this.element.id||(this.element.id=Ks("e-"+this.getModuleName()))}render(){this.initWrapper(),this.initialize(),this.disabled||this.wireEvents(),this.updateHtmlAttributeToWrapper(),this.updateVueArrayModel(!0),this.renderComplete(),this.wrapper=this.getWrapper()}setDisabled(){const e=this.getWrapper();this.element.disabled=!0,e.classList.add(uA),e.setAttribute("aria-disabled","true")}setText(e){const t=this.getWrapper();if(!t)return;let i=t.getElementsByClassName(RS)[0];if(i)i.textContent=e;else{e=this.enableHtmlSanitizer?_n.sanitize(e):e,i=this.createElement("span",{className:RS,innerHTML:e});const s=t.getElementsByTagName("label")[0];"Before"===this.labelPosition?s.insertBefore(i,t.getElementsByClassName(Mg)[0]):s.appendChild(i)}}changeHandler(e){e.stopPropagation()}formResetHandler(){this.checked=this.initialCheckedValue,this.element.checked=this.initialCheckedValue}unWireEvents(){const e=this.wrapper;O.remove(e,"click",this.clickHandler),O.remove(this.element,"keyup",this.keyUpHandler),O.remove(this.element,"focus",this.focusHandler),O.remove(this.element,"focusout",this.focusOutHandler);const t=e.getElementsByTagName("label")[0];O.remove(t,"mousedown",this.labelMouseDownHandler),O.remove(t,"mouseup",this.labelMouseUpHandler);const i=ae(this.element,"form");i&&O.remove(i,"reset",this.formResetHandler),"EJS-CHECKBOX"===this.tagName&&O.remove(this.element,"change",this.changeHandler)}wireEvents(){const e=this.getWrapper();O.add(e,"click",this.clickHandler,this),O.add(this.element,"keyup",this.keyUpHandler,this),O.add(this.element,"focus",this.focusHandler,this),O.add(this.element,"focusout",this.focusOutHandler,this);const t=e.getElementsByTagName("label")[0];O.add(t,"mousedown",this.labelMouseDownHandler,this),O.add(t,"mouseup",this.labelMouseUpHandler,this);const i=ae(this.element,"form");i&&O.add(i,"reset",this.formResetHandler,this),"EJS-CHECKBOX"===this.tagName&&O.add(this.element,"change",this.changeHandler,this)}updateVueArrayModel(e){if(this.isVue&&"object"==typeof this.value){const t=this.element.value;if(t&&this.value){if(!e){const i=this.value.indexOf(t);return this.checked?i<0&&this.value.push(t):i>-1&&this.value.splice(i,1),this.value}for(let i=0;i<this.value.length;i++)t===this.value[i]&&(this.changeState("check"),this.setProperties({checked:!0},!0))}}return this.element.checked}updateHtmlAttributeToWrapper(){if(!m(this.htmlAttributes))for(const e of Object.keys(this.htmlAttributes))if(dA.indexOf(e)>-1){const t=this.getWrapper();"class"===e?j([t],this.htmlAttributes[e].split(" ")):"title"===e?t.setAttribute(e,this.htmlAttributes[e]):"style"===e?this.getWrapper().getElementsByClassName(Mg)[0].setAttribute(e,this.htmlAttributes[e]):this.element.setAttribute(e,this.htmlAttributes[e])}}click(){this.element.click()}focusIn(){this.element.focus()}};Ll([Z()],Ra.prototype,"change",void 0),Ll([Z()],Ra.prototype,"created",void 0),Ll([A(!1)],Ra.prototype,"checked",void 0),Ll([A("")],Ra.prototype,"cssClass",void 0),Ll([A(!1)],Ra.prototype,"disabled",void 0),Ll([A(!1)],Ra.prototype,"indeterminate",void 0),Ll([A("")],Ra.prototype,"label",void 0),Ll([A("After")],Ra.prototype,"labelPosition",void 0),Ll([A("")],Ra.prototype,"name",void 0),Ll([A("")],Ra.prototype,"value",void 0),Ll([A(!1)],Ra.prototype,"enableHtmlSanitizer",void 0),Ll([A({})],Ra.prototype,"htmlAttributes",void 0),Ra=Ll([ts],Ra);var pA,Rl=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const Fv="e-label",fA="e-ripple-container",mA="e-rtl",qf="e-radio-wrapper",gA=["title","class","style","disabled","readonly","name","value"];let Na=pA=class extends Ls{constructor(e,t){super(e,t),this.isFocused=!1}changeHandler(e){this.checked=!0,this.dataBind();let t=this.element.getAttribute("value");t=this.isVue&&t?this.element.value:this.value,this.trigger("change",{value:t,event:e}),"EJS-RADIOBUTTON"===this.tagName&&e.stopPropagation()}updateChange(){let e,t;const i=this.getRadioGroup();for(let s=0;s<i.length;s++)e=i[s],e!==this.element&&(t=ac(e,pA),t.checked=!1,"EJS-RADIOBUTTON"===this.tagName&&(t.angularValue=this.value))}destroy(){const e=this.wrapper;super.destroy(),e&&(this.disabled||this.unWireEvents(),"INPUT"===this.tagName?(e.parentNode&&e.parentNode.insertBefore(this.element,e),ye(e),this.element.checked=!1,["name","value","disabled"].forEach(t=>{this.element.removeAttribute(t)})):(["role","aria-checked","class"].forEach(t=>{e.removeAttribute(t)}),e.innerHTML=""))}focusHandler(){this.isFocused=!0}focusOutHandler(){const e=this.getLabel();e&&e.classList.remove("e-focus")}getModuleName(){return"radio"}getSelectedValue(){let e;const t=this.getRadioGroup();for(let i=0,s=t.length;i<s;i++)if(e=t[i],e.checked)return e.value;return""}getRadioGroup(){return document.querySelectorAll('input.e-radio[name="'+this.element.getAttribute("name")+'"]')}getPersistData(){return this.addOnPersist(["checked"])}getWrapper(){return this.element?this.element.parentElement:null}getLabel(){return this.element?this.element.nextElementSibling:null}initialize(){m(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.initWrapper(),this.updateHtmlAttribute(),this.name&&this.element.setAttribute("name",this.name);const e=this.element.getAttribute("value");this.isVue&&e&&e===this.value&&(this.checked=!0),(this.isVue?this.value&&!e:this.value)&&this.element.setAttribute("value",this.value),this.checked&&(this.element.checked=!0),this.disabled&&this.setDisabled()}initWrapper(){let e,t=this.element.parentElement;t.classList.contains(qf)||(t=this.createElement("div",{className:qf}),this.element.parentNode.insertBefore(t,this.element));const i=this.createElement("label",{attrs:{for:this.element.id}});t.appendChild(this.element),t.appendChild(i),Sh&&(e=this.createElement("span",{className:fA}),i.appendChild(e),da(e,{duration:400,isCenterRipple:!0})),t.classList.add("e-wrapper"),this.enableRtl&&i.classList.add(mA),this.cssClass&&j([t],this.cssClass.split(" ")),this.label&&this.setText(this.label)}keyUpHandler(){this.isFocused&&this.getLabel().classList.add("e-focus")}labelRippleHandler(e){T0(e,this.getLabel().getElementsByClassName(fA)[0])}formResetHandler(){this.checked=this.initialCheckedValue,this.initialCheckedValue&&bt(this.element,{checked:"true"})}onPropertyChanged(e,t){const i=this.getWrapper(),s=this.getLabel();for(const r of Object.keys(e))switch(r){case"checked":e.checked&&this.updateChange(),this.element.checked=e.checked;break;case"disabled":e.disabled?(this.setDisabled(),this.unWireEvents()):(this.element.disabled=!1,this.wireEvents());break;case"cssClass":t.cssClass&&Y([i],t.cssClass.split(" ")),e.cssClass&&j([i],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?s.classList.add(mA):s.classList.remove(mA);break;case"label":this.setText(e.label);break;case"labelPosition":"Before"===e.labelPosition?s.classList.add("e-right"):s.classList.remove("e-right");break;case"name":this.element.setAttribute("name",e.name);break;case"value":if(!m(this.htmlAttributes)&&this.htmlAttributes.value)break;this.element.setAttribute("value",e.value);break;case"htmlAttributes":this.updateHtmlAttribute()}}preRender(){let e=this.element;if(this.formElement=ae(this.element,"form"),this.tagName=this.element.tagName,e=cA(this.createElement,"EJS-RADIOBUTTON","radio",e,qf,"radio"),this.element=e,"radio"!==this.element.getAttribute("type")&&this.element.setAttribute("type","radio"),this.element.id||(this.element.id=Ks("e-"+this.getModuleName())),"EJS-RADIOBUTTON"===this.tagName){const t=this.element.getAttribute("formcontrolname");t&&(this.setProperties({name:t},!0),this.element.setAttribute("name",t))}}render(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete(),this.wrapper=this.getWrapper()}setDisabled(){this.element.disabled=!0}setText(e){const t=this.getLabel();let i=t.getElementsByClassName(Fv)[0];i?i.textContent=e:(e=this.enableHtmlSanitizer?_n.sanitize(e):e,i=this.createElement("span",{className:Fv,innerHTML:e}),t.appendChild(i)),"Before"===this.labelPosition?this.getLabel().classList.add("e-right"):this.getLabel().classList.remove("e-right")}updateHtmlAttribute(){if(!m(this.htmlAttributes))for(const e of Object.keys(this.htmlAttributes))if(gA.indexOf(e)>-1){const t=this.element.parentElement;"class"===e?j([t],this.htmlAttributes[e].split(" ")):"title"===e||"style"===e?t.setAttribute(e,this.htmlAttributes[e]):this.element.setAttribute(e,this.htmlAttributes[e])}}unWireEvents(){const e=this.wrapper;O.remove(this.element,"change",this.changeHandler),O.remove(this.element,"focus",this.focusHandler),O.remove(this.element,"focusout",this.focusOutHandler),O.remove(this.element,"keyup",this.keyUpHandler);const t=e.getElementsByTagName("label")[0];t&&(O.remove(t,"mousedown",this.labelRippleHandler),O.remove(t,"mouseup",this.labelRippleHandler)),this.formElement&&O.remove(this.formElement,"reset",this.formResetHandler)}wireEvents(){const e=this.getLabel();O.add(this.element,"change",this.changeHandler,this),O.add(this.element,"keyup",this.keyUpHandler,this),O.add(this.element,"focus",this.focusHandler,this),O.add(this.element,"focusout",this.focusOutHandler,this);const t=e.getElementsByClassName(Fv)[0];t&&(O.add(t,"mousedown",this.labelRippleHandler,this),O.add(t,"mouseup",this.labelRippleHandler,this)),this.formElement&&O.add(this.formElement,"reset",this.formResetHandler,this)}click(){this.element.click()}focusIn(){this.element.focus()}};Rl([Z()],Na.prototype,"change",void 0),Rl([Z()],Na.prototype,"created",void 0),Rl([A(!1)],Na.prototype,"checked",void 0),Rl([A("")],Na.prototype,"cssClass",void 0),Rl([A(!1)],Na.prototype,"disabled",void 0),Rl([A("")],Na.prototype,"label",void 0),Rl([A("After")],Na.prototype,"labelPosition",void 0),Rl([A("")],Na.prototype,"name",void 0),Rl([A("")],Na.prototype,"value",void 0),Rl([A(!1)],Na.prototype,"enableHtmlSanitizer",void 0),Rl([A({})],Na.prototype,"htmlAttributes",void 0),Na=pA=Rl([ts],Na);var Kc=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const yA="e-switch-disabled",Pg="e-ripple-container",k0="e-ripple-check",O0="e-rtl",vA="e-switch-wrapper",bA="e-switch-active";let hc=class extends Ls{constructor(e,t){super(e,t),this.isFocused=!1,this.isDrag=!1}changeState(e){let t,i;const s=this.getWrapper(),r=s.querySelector(".e-switch-inner"),o=s.querySelector(".e-switch-handle");Sh&&(i=s.getElementsByClassName(Pg)[0]),e?(j([r,o],bA),t="true",this.element.checked=!0,this.checked=!0,i&&j([i],[k0])):(Y([r,o],bA),t="false",this.element.checked=!1,this.checked=!1,i&&Y([i],[k0])),s.setAttribute("aria-checked",t)}clickHandler(e){this.isDrag=!1,this.focusOutHandler(),this.changeState(!this.checked),this.element.focus(),this.trigger("change",{checked:this.element.checked,event:e})}destroy(){super.destroy(),this.disabled||this.unWireEvents(),function RV(n,e,t){"INPUT"===t?(e.parentNode.insertBefore(n.element,e),ye(e),n.element.checked=!1,["name","value","disabled"].forEach(i=>{n.element.removeAttribute(i)})):(["role","aria-checked","class"].forEach(i=>{e.removeAttribute(i)}),e.innerHTML="")}(this,this.getWrapper(),this.tagName)}focusHandler(){this.isFocused=!0}focusOutHandler(){this.getWrapper().classList.remove("e-focus")}getModuleName(){return"switch"}getPersistData(){return this.addOnPersist(["checked"])}getWrapper(){return this.element.parentElement}initialize(){m(this.initialSwitchCheckedValue)&&(this.initialSwitchCheckedValue=this.checked),this.name&&this.element.setAttribute("name",this.name),this.value&&this.element.setAttribute("value",this.value),this.checked&&this.changeState(!0),this.disabled&&this.setDisabled(),(this.onLabel||this.offLabel)&&this.setLabel(this.onLabel,this.offLabel)}initWrapper(){let e=this.element.parentElement;e.classList.contains(vA)||(e=this.createElement("div",{className:vA,attrs:{role:"switch","aria-checked":"false"}}),this.element.parentNode.insertBefore(e,this.element));const t=this.createElement("span",{className:"e-switch-inner"}),i=this.createElement("span",{className:"e-switch-on"}),s=this.createElement("span",{className:"e-switch-off"}),r=this.createElement("span",{className:"e-switch-handle"});if(e.appendChild(this.element),hA(this,e),t.appendChild(i),t.appendChild(s),e.appendChild(t),e.appendChild(r),Sh){const o=this.createElement("span",{className:Pg});r.appendChild(o),da(o,{duration:400,isCenterRipple:!0})}e.classList.add("e-wrapper"),this.enableRtl&&e.classList.add(O0),this.cssClass&&j([e],this.cssClass.split(" "))}onPropertyChanged(e,t){const i=this.getWrapper();for(const s of Object.keys(e))switch(s){case"checked":this.changeState(e.checked);break;case"disabled":e.disabled?(this.setDisabled(),this.unWireEvents()):(this.element.disabled=!1,i.classList.remove(yA),i.setAttribute("aria-disabled","false"),this.wireEvents());break;case"value":this.element.setAttribute("value",e.value);break;case"name":this.element.setAttribute("name",e.name);break;case"onLabel":case"offLabel":this.setLabel(e.onLabel,e.offLabel);break;case"enableRtl":e.enableRtl?i.classList.add(O0):i.classList.remove(O0);break;case"cssClass":t.cssClass&&Y([i],t.cssClass.split(" ")),e.cssClass&&j([i],e.cssClass.split(" "))}}preRender(){const e=this.element;this.formElement=ae(this.element,"form"),this.tagName=this.element.tagName,function UM(n,e,t,i,s){i=cA(n.createElement,e,"checkbox",i,t,s),n.element=i,"checkbox"!==n.element.getAttribute("type")&&n.element.setAttribute("type","checkbox"),n.element.id||(n.element.id=Ks("e-"+s))}(this,"EJS-SWITCH",vA,e,this.getModuleName())}render(){this.initWrapper(),this.initialize(),this.disabled||this.wireEvents(),this.renderComplete()}rippleHandler(e){T0(e,this.getWrapper().getElementsByClassName(Pg)[0]),"mousedown"===e.type&&e.currentTarget.classList.contains("e-switch-wrapper")&&1===e.which&&(this.isDrag=!0,this.isFocused=!1)}rippleTouchHandler(e){const t=this.getWrapper().getElementsByClassName(Pg)[0];if(t){const i=document.createEvent("MouseEvents");i.initEvent(e,!1,!0),t.dispatchEvent(i)}}setDisabled(){const e=this.getWrapper();this.element.disabled=!0,e.classList.add(yA),e.setAttribute("aria-disabled","true")}setLabel(e,t){const i=this.getWrapper();e&&(i.querySelector(".e-switch-on").textContent=e),t&&(i.querySelector(".e-switch-off").textContent=t)}switchFocusHandler(){this.isFocused&&this.getWrapper().classList.add("e-focus")}switchMouseUp(e){const t=e.target;"touchmove"===e.type&&e.preventDefault(),"touchstart"===e.type&&(this.isDrag=!0,this.rippleTouchHandler("mousedown")),this.isDrag&&("mouseup"===e.type&&t.className.indexOf("e-switch")<0||"touchend"===e.type)&&(this.clickHandler(e),this.rippleTouchHandler("mouseup"),e.preventDefault())}formResetHandler(){this.checked=this.initialSwitchCheckedValue,this.element.checked=this.initialSwitchCheckedValue}toggle(){this.clickHandler()}wireEvents(){const e=this.getWrapper();this.delegateMouseUpHandler=this.switchMouseUp.bind(this),this.delegateKeyUpHandler=this.switchFocusHandler.bind(this),O.add(e,"click",this.clickHandler,this),O.add(this.element,"focus",this.focusHandler,this),O.add(this.element,"focusout",this.focusOutHandler,this),O.add(this.element,"mouseup",this.delegateMouseUpHandler,this),O.add(this.element,"keyup",this.delegateKeyUpHandler,this),O.add(e,"mousedown mouseup",this.rippleHandler,this),O.add(e,"touchstart touchmove touchend",this.switchMouseUp,this),this.formElement&&O.add(this.formElement,"reset",this.formResetHandler,this)}unWireEvents(){const e=this.getWrapper();O.remove(e,"click",this.clickHandler),O.remove(this.element,"focus",this.focusHandler),O.remove(this.element,"focusout",this.focusOutHandler),O.remove(this.element,"mouseup",this.delegateMouseUpHandler),O.remove(this.element,"keyup",this.delegateKeyUpHandler),O.remove(e,"mousedown mouseup",this.rippleHandler),O.remove(e,"touchstart touchmove touchend",this.switchMouseUp),this.formElement&&O.remove(this.formElement,"reset",this.formResetHandler)}click(){this.element.click()}focusIn(){this.element.focus()}};Kc([Z()],hc.prototype,"change",void 0),Kc([Z()],hc.prototype,"created",void 0),Kc([A(!1)],hc.prototype,"checked",void 0),Kc([A("")],hc.prototype,"cssClass",void 0),Kc([A(!1)],hc.prototype,"disabled",void 0),Kc([A("")],hc.prototype,"name",void 0),Kc([A("")],hc.prototype,"onLabel",void 0),Kc([A("")],hc.prototype,"offLabel",void 0),Kc([A("")],hc.prototype,"value",void 0),hc=Kc([ts],hc);var uo=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const Li={chipSet:"e-chip-set",chip:"e-chip",avatar:"e-chip-avatar",text:"e-chip-text",icon:"e-chip-icon",delete:"e-chip-delete",deleteIcon:"e-dlt-btn",multiSelection:"e-multi-selection",singleSelection:"e-selection",active:"e-active",chipWrapper:"e-chip-avatar-wrap",iconWrapper:"e-chip-icon-wrap",focused:"e-focused",disabled:"e-disabled",rtl:"e-rtl"};let Hr=class extends Ls{constructor(e,t){super(e,t),this.multiSelectedChip=[]}preRender(){}chipType(){return this.chips&&this.chips.length&&this.chips.length>0}render(){this.type=this.chips.length?"chipset":this.text||this.element.innerText?"chip":"chipset",this.setAttributes(),this.createChip(),this.setRtl(),this.select(this.selectedChips,void 0),this.wireEvent(!1),this.rippleFunction=da(this.element,{selector:".e-chip"}),this.renderComplete()}createChip(){this.innerText=this.element.innerText&&0!==this.element.innerText.length?this.element.innerText.trim():this.element.innerText,this.element.innerHTML="",this.chipCreation("chip"===this.type?[this.innerText?this.innerText:this.text]:this.chips)}setAttributes(){"chip"===this.type?(this.element.tabIndex=0,this.element.setAttribute("role","option")):(this.element.classList.add(Li.chipSet),this.element.setAttribute("role","listbox"),"Multiple"===this.selection?(this.element.classList.add(Li.multiSelection),this.element.setAttribute("aria-multiselectable","true")):"Single"===this.selection?(this.element.classList.add(Li.singleSelection),this.element.setAttribute("aria-multiselectable","false")):this.element.setAttribute("aria-multiselectable","false"))}setRtl(){this.element.classList[this.enableRtl?"add":"remove"](Li.rtl)}chipCreation(e){let t=[];for(let i=0;i<e.length;i++){const s=this.getFieldValues(e[i]),r=this.elementCreation(s),o=(Li.chip+" "+(s.enabled?" ":Li.disabled)+" "+(s.avatarIconCss||s.avatarText?Li.chipWrapper:s.leadingIconCss?Li.iconWrapper:" ")+" "+s.cssClass).split(" ").filter(a=>a);if(this.chipType()){const a=this.createElement("DIV",{className:o.join(" "),attrs:{tabIndex:"0",role:"option","aria-label":s.text,"aria-selected":"false"}});s.value&&a.setAttribute("data-value",s.value.toString()),Pi(r,a),t.push(a)}else t=r,j([this.element],o),this.element.setAttribute("aria-label",s.text),s.value&&this.element.setAttribute("data-value",s.value.toString())}Pi(t,this.element)}getFieldValues(e){const t="false"!==this.enabled.toString();return{text:"object"==typeof e?e.text?e.text.toString():this.text.toString():this.chipType()?e.toString():this.innerText?this.innerText:this.text.toString(),cssClass:"object"==typeof e&&e.cssClass?e.cssClass.toString():this.cssClass.toString(),leadingIconCss:"object"==typeof e&&e.leadingIconCss?e.leadingIconCss.toString():this.leadingIconCss.toString(),avatarIconCss:"object"==typeof e&&e.avatarIconCss?e.avatarIconCss.toString():this.avatarIconCss.toString(),avatarText:"object"==typeof e&&e.avatarText?e.avatarText.toString():this.avatarText.toString(),trailingIconCss:"object"==typeof e&&e.trailingIconCss?e.trailingIconCss.toString():this.trailingIconCss.toString(),enabled:"object"==typeof e?m(e.enabled)?t:"false"!==e.enabled.toString():t,value:"object"==typeof e&&e.value?e.value.toString():null,leadingIconUrl:"object"==typeof e&&e.leadingIconUrl?e.leadingIconUrl.toString():this.leadingIconUrl,trailingIconUrl:"object"==typeof e&&e.trailingIconUrl?e.trailingIconUrl.toString():this.trailingIconUrl}}elementCreation(e){const t=[];if(e.avatarText||e.avatarIconCss){const s=(Li.avatar+" "+e.avatarIconCss).trim(),r=this.createElement("span",{className:s});r.innerText=e.avatarText,t.push(r)}else if(e.leadingIconCss){const s=(Li.icon+" "+e.leadingIconCss).trim(),r=this.createElement("span",{className:s});t.push(r)}else if(e.leadingIconUrl){const s=(Li.avatar+" image-url").trim(),r=this.createElement("span",{className:s});r.style.backgroundImage="url("+e.leadingIconUrl+")",t.push(r)}const i=this.createElement("span",{className:Li.text});if(i.innerText=e.text,t.push(i),e.trailingIconCss||this.chipType()&&this.enableDelete){const s=(Li.delete+" "+(e.trailingIconCss?e.trailingIconCss:Li.deleteIcon)).trim(),r=this.createElement("span",{className:s});t.push(r)}else if(e.trailingIconUrl){const s="trailing-icon-url".trim(),r=this.createElement("span",{className:s});r.style.backgroundImage="url("+e.trailingIconUrl+")",t.push(r)}return t}find(e){let t;const i=e instanceof HTMLElement?e:this.element.querySelectorAll("."+Li.chip)[e];return i&&this.chipType()&&(t={text:void 0,index:void 0,element:void 0,data:void 0},t.index=Array.prototype.slice.call(this.element.querySelectorAll("."+Li.chip)).indexOf(i),t.text="object"==typeof this.chips[t.index]?this.chips[t.index].text?this.chips[t.index].text.toString():"":this.chips[t.index].toString(),t.data=this.chips[t.index],t.element=i),t}add(e){if("chip"!==this.type){const t=e instanceof Array?e:[e];this.chips.push(...t),this.chipCreation(t)}}select(e,t){this.onSelect(e,!1,t)}multiSelection(e){const t=this.element.querySelectorAll(".e-chip");for(let i=0;i<e.length;i++)if("string"==typeof e[i]){for(let s=0;s<t.length;s++)if(e[i]!==s&&e[i]===t[s].attributes[5].value){this.multiSelectedChip.push(s);break}}else this.multiSelectedChip.push(e[i])}onSelect(e,t,i){let s,r,o;if(this.chipType()&&"None"!==this.selection){if(t){const u=this.element.querySelectorAll("."+Li.chip);for(let p=0;p<u.length;p++)u[p].setAttribute("aria-selected","false"),u[p].classList.remove(Li.active)}const a=e instanceof Array?e:[e];for(let u=0;u<a.length;u++){let p=a[u]instanceof HTMLElement?a[u]:this.element.querySelectorAll("."+Li.chip)[a[u]];if("index"!==i)for(let y=0;y<this.chips.length;y++){r=this.element.querySelectorAll("."+Li.chip)[y];const E=this.getFieldValues(this.chips[y]);"value"===i?null!==E.value&&(o=r.dataset.value):"text"===i&&(o=r.innerText),o===a[u].toString()&&(s=y,p=this.element.querySelectorAll("."+Li.chip)[s])}p instanceof HTMLElement&&this.selectionHandler(p)}}}remove(e){if(this.chipType()){const t=e instanceof Array?e:[e],i=[],s=this.element.querySelectorAll("."+Li.chip);t.forEach(r=>{const o=r instanceof HTMLElement?r:s[r];o instanceof HTMLElement&&i.push(o)}),i.forEach(r=>{const o=this.element.querySelectorAll("."+Li.chip),a=Array.prototype.slice.call(o).indexOf(r);this.deleteHandler(r,a)})}}getSelectedChips(){let e;if(this.chipType()&&"None"!==this.selection){const t={texts:[],Indexes:[],data:[],elements:[]},i=this.element.querySelectorAll("."+Li.active);for(let r=0;r<i.length;r++){const o=i[r];t.elements.push(o);const a=Array.prototype.slice.call(this.element.querySelectorAll("."+Li.chip)).indexOf(o);t.Indexes.push(a),t.data.push(this.chips[a]);const u="object"==typeof this.chips[a]?this.chips[a].text?this.chips[a].text.toString():null:this.chips[a].toString();t.texts.push(u)}const s={text:t.texts[0],index:t.Indexes[0],data:t.data[0],element:t.elements[0]};e=m(s.index)?void 0:"Multiple"===this.selection?t:s}return e}wireEvent(e){e?(O.remove(this.element,"click",this.clickHandler),O.remove(this.element,"focusout",this.focusOutHandler),O.remove(this.element,"keydown",this.keyHandler),O.remove(this.element,"keyup",this.keyHandler)):(O.add(this.element,"click",this.clickHandler,this),O.add(this.element,"focusout",this.focusOutHandler,this),O.add(this.element,"keydown",this.keyHandler,this),O.add(this.element,"keyup",this.keyHandler,this))}keyHandler(e){e.target.classList.contains(Li.chip)&&("keydown"===e.type?13===e.keyCode?this.clickHandler(e):46===e.keyCode&&this.enableDelete&&this.clickHandler(e,!0):9===e.keyCode&&this.focusInHandler(e.target))}focusInHandler(e){e.classList.contains(Li.focused)||e.classList.add(Li.focused)}focusOutHandler(e){const t=ae(e.target,"."+Li.chip),i=this.chipType()?this.element.querySelector("."+Li.focused):this.element.classList.contains(Li.focused)?this.element:null;t&&i&&i.classList.remove(Li.focused)}clickHandler(e,t=!1){const i=ae(e.target,"."+Li.chip);if(i){let s;if(this.chipType())s=this.find(i);else{const r=Array.prototype.slice.call(this.element.querySelectorAll("."+Li.chip)).indexOf(i);s={text:this.innerText?this.innerText:this.text,element:i,data:this.text,index:r}}s.event=e,s.cancel=!1,this.trigger("beforeClick",s,r=>{r.cancel||this.clickEventHandler(r.element,e,t)})}}clickEventHandler(e,t,i){if(this.chipType()){const s=this.find(e);s.event=t,(t.target.classList.contains(Li.deleteIcon)?t.target:i?e.querySelector("."+Li.deleteIcon):void 0)&&this.enableDelete?(s.cancel=!1,this.trigger("delete",s,a=>{a.cancel||(this.deleteHandler(a.element,a.index),this.selectionHandler(e),s.selected=a.element.classList.contains(Li.active),this.trigger("click",s))})):"None"!==this.selection?(this.selectionHandler(e),s.selected=e.classList.contains(Li.active),this.trigger("click",s)):(this.focusInHandler(e),this.trigger("click",s))}else this.focusInHandler(e),this.trigger("click",{text:this.innerText?this.innerText:this.text,element:e,data:this.text,event:t})}selectionHandler(e){if("Single"===this.selection){const t=this.element.querySelector("."+Li.active);t&&t!==e&&(t.classList.remove(Li.active),t.setAttribute("aria-selected","false")),this.setProperties({selectedChips:null},!0)}else this.setProperties({selectedChips:[]},!0);e.classList.contains(Li.active)?(e.classList.remove(Li.active),e.setAttribute("aria-selected","false")):(e.classList.add(Li.active),e.setAttribute("aria-selected","true")),this.updateSelectedChips()}updateSelectedChips(){const e=this.element.querySelectorAll(".e-chip"),t=[],i=[];let r,s=null;for(let o=0;o<e.length;o++){const a=this.element.querySelectorAll(".e-chip")[o];if("true"===a.getAttribute("aria-selected")){if(r=a.getAttribute("data-value"),"Single"===this.selection&&a.classList.contains("e-active")){s=r||o;break}s=r?i.push(r):t.push(o)}}this.setProperties({selectedChips:"Single"===this.selection?s:r?i:t},!0)}deleteHandler(e,t){const i=this.find(e);this.chips.splice(t,1),this.setProperties({chips:this.chips},!0),ye(e),this.trigger("deleted",i)}destroy(){Y([this.element],[Li.chipSet,Li.chip,Li.rtl,Li.multiSelection,Li.singleSelection,Li.disabled,Li.chipWrapper,Li.iconWrapper,Li.active,Li.focused].concat(this.cssClass.toString().split(" ").filter(e=>e))),this.removeMultipleAttributes(["tabindex","role","aria-label","aria-multiselectable"],this.element),this.wireEvent(!0),this.rippleFunction(),super.destroy(),this.element.innerHTML="",this.element.innerText=this.innerText}removeMultipleAttributes(e,t){e.forEach(i=>{t.removeAttribute(i)})}getPersistData(){return this.addOnPersist([])}getModuleName(){return"chip-list"}onPropertyChanged(e,t){let i;for(const s of Object.keys(e))switch(s){case"chips":case"text":case"avatarText":case"avatarIconCss":case"leadingIconCss":case"trailingIconCss":case"selection":case"enableDelete":case"enabled":this.refresh();break;case"cssClass":this.chipType()?this.refresh():(Y([this.element],t.cssClass.toString().split(" ").filter(r=>r)),j([this.element],e.cssClass.toString().split(" ").filter(r=>r)));break;case"selectedChips":Y(this.element.querySelectorAll(".e-active"),"e-active"),"Multiple"===this.selection?(this.multiSelectedChip=[],this.multiSelection(e.selectedChips),this.onSelect(this.multiSelectedChip,!0,i),this.updateSelectedChips()):this.onSelect(e.selectedChips,!0,i);break;case"enableRtl":this.setRtl()}}};uo([A([])],Hr.prototype,"chips",void 0),uo([A("")],Hr.prototype,"text",void 0),uo([A("")],Hr.prototype,"avatarText",void 0),uo([A("")],Hr.prototype,"avatarIconCss",void 0),uo([A("")],Hr.prototype,"leadingIconCss",void 0),uo([A("")],Hr.prototype,"trailingIconCss",void 0),uo([A("")],Hr.prototype,"leadingIconUrl",void 0),uo([A("")],Hr.prototype,"trailingIconUrl",void 0),uo([A("")],Hr.prototype,"cssClass",void 0),uo([A(!0)],Hr.prototype,"enabled",void 0),uo([A([])],Hr.prototype,"selectedChips",void 0),uo([A("None")],Hr.prototype,"selection",void 0),uo([A(!1)],Hr.prototype,"enableDelete",void 0),uo([Z()],Hr.prototype,"created",void 0),uo([Z()],Hr.prototype,"click",void 0),uo([Z()],Hr.prototype,"beforeClick",void 0),uo([Z()],Hr.prototype,"delete",void 0),uo([Z()],Hr.prototype,"deleted",void 0),Hr=uo([ts],Hr);let Ih,xp,Lg,Rg,Tp,Nl,VS=!1;function Mo(n,e,t,i,s){return xp=void 0,xp=s,VS=!!i,n?(e||(e="left"),t||(t="top"),Rg=n.ownerDocument,Lg=n,function zM(n,e,t){switch(Ih=Lg.getBoundingClientRect(),e+n){case"topcenter":xh(L0(),t),wu(Vv(),t);break;case"topright":xh(P0(),t),wu(Vv(),t);break;case"centercenter":xh(L0(),t),wu(Bv(),t);break;case"centerright":xh(P0(),t),wu(Bv(),t);break;case"centerleft":xh(Hv(),t),wu(Bv(),t);break;case"bottomcenter":xh(L0(),t),wu(M0(),t);break;case"bottomright":xh(P0(),t),wu(M0(),t);break;case"bottomleft":xh(Hv(),t),wu(M0(),t);break;default:xh(Hv(),t),wu(Vv(),t)}return t}(e.toLowerCase(),t.toLowerCase(),{left:0,top:0})):{left:0,top:0}}function xh(n,e){e.left=n}function wu(n,e){e.top=n}function HS(){return Rg.documentElement.scrollTop||Rg.body.scrollTop}function jS(){return Rg.documentElement.scrollLeft||Rg.body.scrollLeft}function M0(){return VS?Ih.bottom:Ih.bottom+HS()}function Bv(){return Vv()+Ih.height/2}function Vv(){return VS?Ih.top:Ih.top+HS()}function Hv(){return Ih.left+jS()}function P0(){const n=Lg&&Lg.classList.contains("e-date-range-wrapper")?xp?xp.width:0:xp&&Ih.width>=xp.width?xp.width:0;return Ih.right+jS()-n}function L0(){return Hv()+Ih.width/2}function R0(n,e=null,t={X:!1,Y:!1},i){if(!t.Y&&!t.X)return{left:0,top:0};const s=n.getBoundingClientRect();if(Nl=e,Tp=n.ownerDocument,i||(i=Mo(n,"left","top")),t.X){const r=Nl?_A():$M(),o=Ap(),a=qS(),u=o-i.left,p=i.left+s.width-a;s.width>r?i.left=u>0&&p<=0?a-s.width:p>0&&u<=0?o:u>p?a-s.width:o:u>0?i.left+=u:p>0&&(i.left-=p)}if(t.Y){const r=Nl?zS():GS(),o=F0(),a=$S(),u=o-i.top,p=i.top+s.height-a;s.height>r?i.top=u>0&&p<=0?a-s.height:p>0&&u<=0?o:u>p?a-s.height:o:u>0?i.top+=u:p>0&&(i.top-=p)}return i}function Id(n,e=null,t,i){const s=Mo(n,"left","top");t&&(s.left=t),i&&(s.top=i);const r=[];Nl=e,Tp=n.ownerDocument;const o=n.getBoundingClientRect(),u=s.left,p=s.left+o.width,E=SA(s.top,s.top+o.height),_=wA(u,p);return E.topSide&&r.push("top"),_.rightSide&&r.push("right"),_.leftSide&&r.push("left"),E.bottomSide&&r.push("bottom"),r}function FV(n,e,t,i,s,r,o=null,a={X:!0,Y:!0},u){if(!(e&&n&&s&&r&&(a.X||a.Y)))return;const p={TL:null,TR:null,BL:null,BR:null},y={TL:null,TR:null,BL:null,BR:null};let E;if("none"===window.getComputedStyle(n).display){const D=n.style.visibility;n.style.visibility="hidden",n.style.display="block",E=n.getBoundingClientRect(),n.style.removeProperty("display"),n.style.visibility=D}else E=n.getBoundingClientRect();const _={posX:s,posY:r,offsetX:t,offsetY:i,position:{left:0,top:0}};Nl=o,Tp=e.ownerDocument,function qM(n,e,t,i,s){t.position=Mo(n,t.posX,t.posY,i,s),e.TL=Mo(n,"left","top",i,s),e.TR=Mo(n,"right","top",i,s),e.BR=Mo(n,"left","bottom",i,s),e.BL=Mo(n,"right","bottom",i,s)}(e,p,_,u,E),N0(y,_,E),a.X&&po(e,y,p,_,E,!0),a.Y&&p.TL.top>-1&&US(e,y,p,_,E,!0),function WM(n,e,t){let i=0,s=0;if(null!=n.offsetParent&&("absolute"===getComputedStyle(n.offsetParent).position||"relative"===getComputedStyle(n.offsetParent).position)){const r=Mo(n.offsetParent,"left","top",!1,t);i=r.left,s=r.top}n.style.top=e.position.top+e.offsetY-s+"px",n.style.left=e.position.left+e.offsetX-i+"px"}(n,_,E)}function N0(n,e,t){n.TL={top:e.position.top+e.offsetY,left:e.position.left+e.offsetX},n.TR={top:n.TL.top,left:n.TL.left+t.width},n.BL={top:n.TL.top+t.height,left:n.TL.left},n.BR={top:n.TL.top+t.height,left:n.TL.left+t.width}}function wA(n,e){let t=!1,i=!1;return n-B0()<Ap()&&(t=!0),e>qS()&&(i=!0),{leftSide:t,rightSide:i}}function po(n,e,t,i,s,r){const o=wA(e.TL.left,e.TR.left);t.TL.left-B0()<=Ap()&&(o.leftSide=!1),t.TR.left>qS()&&(o.rightSide=!1),(o.leftSide&&!o.rightSide||!o.leftSide&&o.rightSide)&&(i.posX="right"===i.posX?"left":"right",i.offsetX=i.offsetX+s.width,i.offsetX=-1*i.offsetX,i.position=Mo(n,i.posX,i.posY,!1),N0(e,i,s),r&&po(n,e,t,i,s,!1))}function US(n,e,t,i,s,r){const o=SA(e.TL.top,e.BL.top);t.TL.top-jv()<=F0()&&(o.topSide=!1),t.BL.top>=$S()&&n.getBoundingClientRect().bottom<window.innerHeight&&(o.bottomSide=!1),(o.topSide&&!o.bottomSide||!o.topSide&&o.bottomSide)&&(i.posY="top"===i.posY?"bottom":"top",i.offsetY=i.offsetY+s.height,i.offsetY=-1*i.offsetY,i.position=Mo(n,i.posX,i.posY,!1,s),N0(e,i,s),r&&US(n,e,t,i,s,!1))}function SA(n,e){let t=!1,i=!1;return n-jv()<F0()&&(t=!0),e>$S()&&(i=!0),{topSide:t,bottomSide:i}}function _A(){return Nl.getBoundingClientRect().width}function zS(){return Nl.getBoundingClientRect().height}function IA(){return Nl.getBoundingClientRect().left}function WS(){return Nl.getBoundingClientRect().top}function F0(){return Nl?WS():0}function Ap(){return Nl?IA():0}function qS(){return Nl?B0()+IA()+_A():B0()+$M()}function $S(){return Nl?jv()+WS()+zS():jv()+GS()}function jv(){return Tp.documentElement.scrollTop||Tp.body.scrollTop}function B0(){return Tp.documentElement.scrollLeft||Tp.body.scrollLeft}function GS(){return window.innerHeight}function $M(){const n=window.innerWidth;let e=document.documentElement.getBoundingClientRect();return n-(n-(m(document.documentElement)?0:e.width))}var jr=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let V0=(()=>{class n extends Is{}return jr([A("left")],n.prototype,"X",void 0),jr([A("top")],n.prototype,"Y",void 0),n})();const In_OPEN="e-popup-open",In_CLOSE="e-popup-close";let Th=(()=>{let n=class extends Ls{constructor(t,i){super(i,t)}onPropertyChanged(t,i){for(const s of Object.keys(t))switch(s){case"width":It(this.element,{width:ct(t.width)});break;case"height":It(this.element,{height:ct(t.height)});break;case"zIndex":It(this.element,{zIndex:t.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":let r=t.offsetX-i.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+r).toString()+"px";break;case"offsetY":let o=t.offsetY-i.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+o).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==t.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}}getModuleName(){return"popup"}resolveCollision(){this.checkCollision()}getPersistData(){return this.addOnPersist([])}destroy(){this.element.classList.remove("e-popup","e-rtl",In_OPEN,In_CLOSE),this.unwireEvents(),super.destroy()}render(){this.element.classList.add("e-popup");const t={};1e3!==this.zIndex&&(t.zIndex=this.zIndex),"auto"!==this.width&&(t.width=ct(this.width)),"auto"!==this.height&&(t.height=ct(this.height)),It(this.element,t),this.fixedParent=!1,this.setEnableRtl(),this.setContent()}wireEvents(){Q.isDevice&&O.add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()}wireScrollEvents(){if(this.getRelateToElement())for(const t of this.getScrollableParent(this.getRelateToElement()))O.add(t,"scroll",this.scrollRefresh,this)}unwireEvents(){Q.isDevice&&O.remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()}unwireScrollEvents(){if(this.getRelateToElement())for(const t of this.getScrollableParent(this.getRelateToElement()))O.remove(t,"scroll",this.scrollRefresh)}getRelateToElement(){const t=""===this.relateTo||m(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:t},!0),"string"==typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo}scrollRefresh(t){if("reposition"===this.actionOnScroll?!m(this.element)&&!(this.element.offsetParent===t.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==t.target.parentElement)&&this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){const i=this.isElementOnViewport(this.getRelateToElement(),t.target);i||this.targetInvisibleStatus?i&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}}isElementOnViewport(t,i){const s=this.getScrollableParent(t);for(let r=0;r<s.length;r++)if(!this.isElementVisible(t,s[r]))return!1;return!0}isElementVisible(t,i){const s=this.checkGetBoundingClientRect(t);if(!s.height||!s.width)return!1;if(m(this.checkGetBoundingClientRect(i))){const r=window,o={top:r.scrollY,left:r.scrollX,right:r.scrollX+r.outerWidth,bottom:r.scrollY+r.outerHeight},a=Mo(t),u={top:a.top,left:a.left,right:a.left+s.width,bottom:a.top+s.height},p={top:o.bottom-u.top,left:o.right-u.left,bottom:u.bottom-o.top,right:u.right-o.left};return p.top>0&&p.left>0&&p.right>0&&p.bottom>0}{const r=i.getBoundingClientRect();return!(s.bottom<r.top||s.bottom>r.bottom||s.right>r.right||s.left<r.left)}}preRender(){}setEnableRtl(){this.reposition(),this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}setContent(){if(!m(this.content))if(this.element.innerHTML="","string"==typeof this.content)this.element.textContent=this.content;else{const t=this.getRelateToElement(),i=this.content.props;(!t.classList.contains("e-dropdown-btn")||m(i))&&this.element.appendChild(this.content)}}orientationOnChange(){setTimeout(()=>{this.refreshPosition()},200)}refreshPosition(t,i){m(t)||this.checkFixedParent(t),this.reposition(),i||this.checkCollision()}reposition(){let t,i;const s=this.getRelateToElement();if("number"==typeof this.position.X&&"number"==typeof this.position.Y)t={left:this.position.X,top:this.position.Y};else if("string"==typeof this.position.X&&"number"==typeof this.position.Y||"number"==typeof this.position.X&&"string"==typeof this.position.Y){let r;const o=this.element.style.display;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(r=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),i=this.getAnchorPosition(s,this.element,this.position,this.offsetX,this.offsetY),t="string"==typeof this.position.X?{left:i.left,top:this.position.Y}:{left:this.position.X,top:i.top},this.element.style.display=o,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=r)}else if(s){const r=this.element.style.display;this.element.style.display="block",t=this.getAnchorPosition(s,this.element,this.position,this.offsetX,this.offsetY),this.element.style.display=r}else t={left:0,top:0};m(t)||(this.element.style.left=t.left+"px",this.element.style.top=t.top+"px")}checkGetBoundingClientRect(t){let i;try{return i=t.getBoundingClientRect(),i}catch(s){return null}}getAnchorPosition(t,i,s,r,o){const a=this.checkGetBoundingClientRect(i),u=this.checkGetBoundingClientRect(t);if(m(a)||m(u))return null;const p=t;let y={left:0,top:0};switch(i.offsetParent&&"BODY"===i.offsetParent.tagName&&"BODY"===t.tagName?y=Mo(t):(i.classList.contains("e-dlg-modal")&&"BODY"!==p.tagName&&(i=i.parentElement),y=function EA(n,e){let t=!1;const i={left:0,top:0},s=n;if(!n||!e)return i;for(m(e.offsetParent)&&"fixed"===e.style.position&&(t=!0);(e.offsetParent||t)&&n&&e.offsetParent!==n;)i.left+=n.offsetLeft,i.top+=n.offsetTop,n=n.offsetParent;for(n=s;(e.offsetParent||t)&&n&&e.offsetParent!==n;)i.left-=n.scrollLeft,i.top-=n.scrollTop,n=n.parentElement;return i}(p,i)),s.X){default:case"left":break;case"center":i.classList.contains("e-dlg-modal")&&"BODY"===p.tagName&&"container"===this.targetType?y.left+=window.innerWidth/2-a.width/2:y.left+="container"===this.targetType?u.width/2-a.width/2:u.width/2;break;case"right":i.classList.contains("e-dlg-modal")&&"BODY"===p.tagName&&"container"===this.targetType?y.left+=window.innerWidth-a.width:y.left+="container"===this.targetType?u.width-a.width:u.width}switch(s.Y){default:case"top":break;case"center":i.classList.contains("e-dlg-modal")&&"BODY"===p.tagName&&"container"===this.targetType?y.top+=window.innerHeight/2-a.height/2:y.top+="container"===this.targetType?u.height/2-a.height/2:u.height/2;break;case"bottom":i.classList.contains("e-dlg-modal")&&"BODY"===p.tagName&&"container"===this.targetType?y.top+=window.innerHeight-a.height:y.top+="container"===this.targetType?u.height-a.height:u.height}return y.left+=r,y.top+=o,y}callFlip(t){const i=this.getRelateToElement();FV(this.element,i,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,t,this.fixedParent)}callFit(t){if(0!==Id(this.element,this.viewPortElement).length)if(m(this.viewPortElement)){const i=R0(this.element,this.viewPortElement,t);t.X&&(this.element.style.left=i.left+"px"),t.Y&&(this.element.style.top=i.top+"px")}else{const i=this.checkGetBoundingClientRect(this.element),s=this.checkGetBoundingClientRect(this.viewPortElement);if(m(i)||m(s))return null;t&&!0===t.Y&&(s.top>i.top?this.element.style.top="0px":s.bottom<i.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(i.bottom-s.bottom)+"px")),t&&!0===t.X&&(s.right<i.right?this.element.style.left=parseInt(this.element.style.left,10)-(i.right-s.right)+"px":s.left>i.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(s.left-i.left)+"px"))}}checkCollision(){const t=this.collision.X,i=this.collision.Y;"none"===t&&"none"===i||("flip"===t&&"flip"===i?this.callFlip({X:!0,Y:!0}):"fit"===t&&"fit"===i?this.callFit({X:!0,Y:!0}):("flip"===t?this.callFlip({X:!0,Y:!1}):"flip"===i&&this.callFlip({Y:!0,X:!1}),"fit"===t?this.callFit({X:!0,Y:!1}):"fit"===i&&this.callFit({X:!1,Y:!0})))}show(t,i){if(this.wireEvents(),1e3===this.zIndex||!m(i)){const s=m(i)?this.element:i;this.zIndex=pa(s),It(this.element,{zIndex:this.zIndex})}t=m(t)||"object"!=typeof t?this.showAnimation:t,("none"!==this.collision.X||"none"!==this.collision.Y)&&(Y([this.element],In_CLOSE),j([this.element],In_OPEN),this.checkCollision(),Y([this.element],In_OPEN),j([this.element],In_CLOSE)),m(t)?(Y([this.element],In_CLOSE),j([this.element],In_OPEN),this.trigger("open")):(t.begin=()=>{this.isDestroyed||(Y([this.element],In_CLOSE),j([this.element],In_OPEN))},t.end=()=>{this.isDestroyed||this.trigger("open")},new Wn(t).animate(this.element))}hide(t){t=m(t)||"object"!=typeof t?this.hideAnimation:t,m(t)?(Y([this.element],In_OPEN),j([this.element],In_CLOSE),this.trigger("close")):(t.end=()=>{this.isDestroyed||(Y([this.element],In_OPEN),j([this.element],In_CLOSE),this.trigger("close"))},new Wn(t).animate(this.element)),this.unwireEvents()}getScrollableParent(t){return this.checkFixedParent(t),YS(t,this.fixedParent)}checkFixedParent(t){let i=t.parentElement;for(;i&&"HTML"!==i.tagName;){const s=getComputedStyle(i);"fixed"===s.position&&!m(this.element)&&this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&(this.element.style.top=window.scrollY>parseInt(this.element.style.top)?ct(window.scrollY-parseInt(this.element.style.top)):ct(parseInt(this.element.style.top)-window.scrollY),this.element.style.position="fixed",this.fixedParent=!0),i=i.parentElement,!m(this.element)&&m(this.element.offsetParent)&&"fixed"===s.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}}};return jr([A("auto")],n.prototype,"height",void 0),jr([A("auto")],n.prototype,"width",void 0),jr([A(null)],n.prototype,"content",void 0),jr([A("container")],n.prototype,"targetType",void 0),jr([A(null)],n.prototype,"viewPortElement",void 0),jr([A({X:"none",Y:"none"})],n.prototype,"collision",void 0),jr([A("")],n.prototype,"relateTo",void 0),jr([Ps({},V0)],n.prototype,"position",void 0),jr([A(0)],n.prototype,"offsetX",void 0),jr([A(0)],n.prototype,"offsetY",void 0),jr([A(1e3)],n.prototype,"zIndex",void 0),jr([A(!1)],n.prototype,"enableRtl",void 0),jr([A("reposition")],n.prototype,"actionOnScroll",void 0),jr([A(null)],n.prototype,"showAnimation",void 0),jr([A(null)],n.prototype,"hideAnimation",void 0),jr([Z()],n.prototype,"open",void 0),jr([Z()],n.prototype,"close",void 0),jr([Z()],n.prototype,"targetExitViewport",void 0),n=jr([ts],n),n})();function YS(n,e){const t=getComputedStyle(n),i=[],s=/(auto|scroll)/;let r=n.parentElement;for(;r&&"HTML"!==r.tagName;){const o=getComputedStyle(r);!("absolute"===t.position&&"static"===o.position)&&s.test(o.overflow+o.overflowY+o.overflowX)&&i.push(r),r=r.parentElement}return e||i.push(document),i}function pa(n){let e=n.parentElement;const t=[];for(;e&&"BODY"!==e.tagName;){const a=document.defaultView.getComputedStyle(e,null).getPropertyValue("z-index"),u=document.defaultView.getComputedStyle(e,null).getPropertyValue("position");"auto"!==a&&"static"!==u&&t.push(a),e=e.parentElement}const i=[];for(let a=0;a<document.body.children.length;a++)if(!n.isEqualNode(document.body.children[a])){const u=document.defaultView.getComputedStyle(document.body.children[a],null).getPropertyValue("z-index"),p=document.defaultView.getComputedStyle(document.body.children[a],null).getPropertyValue("position");"auto"!==u&&"static"!==p&&i.push(u)}i.push("999");const s=[];if(!m(n.parentElement)&&"BODY"!==n.parentElement.tagName){const a=[].slice.call(n.parentElement.children);for(let u=0;u<a.length;u++)if(!n.isEqualNode(a[u])){const p=document.defaultView.getComputedStyle(a[u],null).getPropertyValue("z-index"),y=document.defaultView.getComputedStyle(a[u],null).getPropertyValue("position");"auto"!==p&&"static"!==y&&s.push(p)}}const r=t.concat(i,s),o=Math.max.apply(Math,r)+1;return o>2147483647?2147483647:o}const uc=["north-west","north","north-east","west","east","south-west","south","south-east"],Uv="e-resize-handle",Dp="e-focused-handle",xA=["e-restrict-left"],TA="e-resize-viewport",YM=["north","west","east","south"];let zs,Fl,Fg,xd,j0,Ah,gs,Td,Ad,KS=0,H0=0,AA=0,ZS=0,Ng=0,kp=0,Bg=null,U0=null,z0=null,zv=!0,XS=0,W0=!0;function ZM(n){QS();const e=Ds("span",{attrs:{unselectable:"on",contenteditable:"false"}});e.setAttribute("class","e-dialog-border-resize e-"+n),"south"===n&&(e.style.height="2px",e.style.width="100%",e.style.bottom="0px",e.style.left="0px"),"north"===n&&(e.style.height="2px",e.style.width="100%",e.style.top="0px",e.style.left="0px"),"east"===n&&(e.style.height="100%",e.style.width="2px",e.style.right="0px",e.style.top="0px"),"west"===n&&(e.style.height="100%",e.style.width="2px",e.style.left="0px",e.style.top="0px"),zs.appendChild(e)}function DA(n){let e;return m(n)||(e="string"==typeof n?document.querySelector(n):n),e}function kA(n){m(n)&&(n=this);const e=zs.querySelectorAll("."+Uv);for(let i=0;i<e.length;i++)Fl=e[i],O.add(Fl,"mousedown",MA,n),O.add(Fl,"msie"===Q.info.name?"pointerdown":"touchstart",PA,n);const t=zs.querySelectorAll(".e-dialog-border-resize");if(!m(t))for(let i=0;i<t.length;i++)Fl=t[i],O.add(Fl,"mousedown",MA,n),O.add(Fl,"msie"===Q.info.name?"pointerdown":"touchstart",PA,n)}function OA(n){return n.indexOf("mouse")>-1?"mouse":"touch"}function MA(n){if(n.preventDefault(),zs=n.target.parentElement,QS(),Ng=n.pageX,kp=n.pageY,n.target.classList.add(Dp),!m(Bg)&&(Ad=this,!0===Bg(n,Ad)))return;this.targetEle&&zs&&zs.querySelector(".e-dlg-resizable")&&(gs=null,Ah=this.targetEle.clientWidth,xd=this.targetEle.clientHeight);const e=m(gs)?document:gs;O.add(e,"mousemove",Wv,this),O.add(document,"mouseup",q0,this);for(let t=0;t<xA.length;t++)zv=!zs.classList.contains(xA[t])}function q0(n){const e="msie"===Q.info.name?"pointermove":"touchmove",t="msie"===Q.info.name?"pointerup":"touchend",i=m(gs)?document:gs,s="msie"===Q.info.name?"pointerdown":"touchstart";O.remove(i,"mousemove",Wv),O.remove(i,e,Wv),O.remove(i,s,Wv),m(document.body.querySelector("."+Dp))||document.body.querySelector("."+Dp).classList.remove(Dp),m(z0)||(Ad=this,z0(n,Ad)),O.remove(document,"mouseup",q0),O.remove(document,t,q0)}function QS(){KS=parseFloat(getComputedStyle(zs,null).getPropertyValue("width").replace("px","")),H0=parseFloat(getComputedStyle(zs,null).getPropertyValue("height").replace("px","")),AA=zs.getBoundingClientRect().left,ZS=zs.getBoundingClientRect().top}function PA(n){zs=n.target.parentElement,QS();const e=n.touches?n.changedTouches[0]:n;if(Ng=e.pageX,kp=e.pageY,!m(Bg)&&(Ad=this,!0===Bg(n,Ad)))return;const t="msie"===Q.info.name?"pointermove":"touchmove",i="msie"===Q.info.name?"pointerup":"touchend",s=m(gs)?document:gs;O.add(s,t,Wv,this),O.add(document,i,q0)}function Wv(n){if(n.target.classList.contains(Uv)&&n.target.classList.contains(Dp)?Fl=n.target:m(document.body.querySelector("."+Dp))||(Fl=document.body.querySelector("."+Dp)),!m(Fl)){let e="";for(let t=0;t<uc.length;t++)Fl.classList.contains("e-"+uc[t])&&(e=uc[t]);switch(m(U0)||(Ad=this,U0(n,Ad)),e){case"south":JS(n);break;case"north":e_(n);break;case"west":t_(n);break;case"east":i_(n);break;case"south-east":JS(n),i_(n);break;case"south-west":JS(n),t_(n);break;case"north-east":e_(n),i_(n);break;case"north-west":e_(n),t_(n)}}}function Op(n){return n.getBoundingClientRect()}function JS(n){const e=document.documentElement.clientHeight;let t=!1;const s=(n.touches?n.changedTouches[0]:n).pageY,r=Op(zs);let o;m(gs)||(o=Op(gs)),m(gs)?m(gs)&&(e-s>=0||r.top<0)&&(t=!0):t=!0;let a=H0+(s-kp);a=a>Fg?a:Fg;let u=0;m(gs)||(u=o.top);const p=m(gs)?0:gs.offsetHeight-gs.clientHeight;let y=r.top-u-p/2;if(y=y<0?0:y,r.top>0&&y+a>xd){if(t=!1,zs.classList.contains(TA))return;return void(zs.style.height=xd-parseInt(y.toString(),10)+"px")}let E=0;if(t){r.top<0&&e+(r.height+r.top)>0&&(E=r.top,a+E<=30&&(a=r.height-(r.height+r.top)+30)),a+r.top>=xd&&(zs.style.height=r.height+(e-(r.height+r.top))+"px");const _=m(gs)?E:y;a>=Fg&&a+_<=xd&&(zs.style.height=a+"px")}}function e_(n){let t,e=!1;const i="mouse"===OA(n.type)?n.pageY:n.touches[0].pageY,s=Op(zs);m(gs)||(t=Op(gs)),(!m(gs)&&s.top-t.top>0||m(gs)&&i>0)&&(e=!0);const r=H0-(i-kp);if(e&&r>=Fg&&r<=xd){let o=0;m(gs)||(o=t.top);let a=ZS-o+(i-kp);a=a>0?a:1,zs.style.height=r+"px",zs.style.top=a+"px"}}function t_(n){const e=document.documentElement.clientWidth;let i,t=!1;m(gs)||(i=Op(gs));const s="mouse"===OA(n.type)?n.pageX:n.touches[0].pageX,r=Op(zs),o=m(gs)?0:gs.offsetWidth-gs.clientWidth;let a=m(gs)?0:i.left,u=m(gs)?0:i.width;m(Td)&&(m(gs)?Td=e:(Td=r.left-a-o/2+r.width,Td+=u-o-Td)),(!m(gs)&&Math.floor(r.left-i.left+r.width+(i.right-r.right))-o<=Ah||m(gs)&&s>=0)&&(t=!0);let p=KS-(s-Ng);if(zv&&(p=p>Td?Td:p),t&&p>=j0&&p<=Ah){let y=0;m(gs)||(y=i.left);let E=AA-y+(s-Ng);E=E>0?E:1,p!==XS&&W0&&(zs.style.width=p+"px"),zv&&(zs.style.left=E+"px",W0=1!==E)}XS=p}function i_(n){const e=document.documentElement.clientWidth;let i,t=!1;m(gs)||(i=Op(gs));const r=(n.touches?n.changedTouches[0]:n).pageX,o=Op(zs);(!m(gs)&&(o.left-i.left+o.width<=Ah||o.right-i.left>=o.width)||m(gs)&&e-r>0)&&(t=!0);const a=KS+(r-Ng);let u=0;if(m(gs)||(u=i.left),o.left-u+a>Ah){if(t=!1,zs.classList.contains(TA))return;zs.style.width=Ah-(o.left-u)+"px"}t&&a>=j0&&a<=Ah&&(zs.style.width=a+"px")}function s_(){const n=zs.querySelectorAll("."+Uv);for(let t=0;t<n.length;t++)ye(n[t]);const e=zs.querySelectorAll(".e-dialog-border-resize");if(!m(e))for(let t=0;t<e.length;t++)ye(e[t])}var ls=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class Vg extends Is{}ls([A(!0)],Vg.prototype,"isFlat",void 0),ls([A()],Vg.prototype,"buttonModel",void 0),ls([A("Button")],Vg.prototype,"type",void 0),ls([Z()],Vg.prototype,"click",void 0);class qv extends Is{}ls([A("Fade")],qv.prototype,"effect",void 0),ls([A(400)],qv.prototype,"duration",void 0),ls([A(0)],qv.prototype,"delay",void 0);const $v="e-dialog",$0="e-rtl",G0="e-dlg-header-content",n_="e-dlg-header",Hg="e-footer-content",Y0="e-dlg-modal",Mp="e-icon-dlg-close",_u="e-dlg-target",Iu="e-scroll-disabled",o_="e-device",a_="e-dlg-fullscreen",Ri="e-dlg-closeicon-btn",NA="e-popup-open",l_="Information",Gv="e-scroll-disabled",FA="e-alert-dialog",Yv="e-confirm-dialog",Ug="e-dlg-resizable",tr="e-restrict-left",iP="e-resize-viewport",c_="user action";let ws=class extends Ls{constructor(e,t){super(e,t),this.dlgClosedBy=c_}render(){this.initialize(),this.initRender(),this.wireEvents(),"100%"===this.width&&(this.element.style.width=""),""!==this.minHeight&&(this.element.style.minHeight=ct(this.minHeight)),this.enableResize&&(this.setResize(),"None"===this.animationSettings.effect&&this.getMinHeight()),this.renderComplete()}preRender(){if(this.headerContent=null,this.allowMaxHeight=!0,this.preventVisibility=!0,this.clonedEle=this.element.cloneNode(!0),this.closeIconClickEventHandler=t=>{this.dlgClosedBy="close icon",this.hide(t)},this.dlgOverlayClickEventHandler=t=>{this.dlgClosedBy="overlayClick",t.preventFocus=!1,this.trigger("overlayClick",t,i=>{i.preventFocus||this.focusContent(),this.dlgClosedBy=c_})},this.l10n=new Xr("dialog",{close:"Close"},this.locale),this.checkPositionData(),m(this.target)){const t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.target=document.body,this.isProtectedOnChange=t}}isNumberValue(e){return/^[-+]?\d*\.?\d+$/.test(e)}checkPositionData(){if(!m(this.position)){if(!m(this.position.X)&&"number"!=typeof this.position.X&&this.isNumberValue(this.position.X)){const t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.X=parseFloat(this.position.X),this.isProtectedOnChange=t}if(!m(this.position.Y)&&"number"!=typeof this.position.Y&&this.isNumberValue(this.position.Y)){const t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.Y=parseFloat(this.position.Y),this.isProtectedOnChange=t}}}getEle(e,t){let i;for(let s=0;s<e.length;s++)if(e[s].classList.contains(t)){i=e[s];break}return i}getMinHeight(){let e="0px",t="0px";m(this.element.querySelector("."+G0))||(e=getComputedStyle(this.headerContent).height);const i=this.getEle(this.element.children,Hg);m(i)||(t=getComputedStyle(i).height);const s=parseInt(e.slice(0,e.indexOf("p")),10),r=parseInt(t.slice(0,t.indexOf("p")),10);return function XM(n){Fg=n}(s+30+(isNaN(r)?0:r)),s+30+r}onResizeStart(e,t){return t.trigger("resizeStart",e),e.cancel}onResizing(e,t){t.trigger("resizing",e)}onResizeComplete(e,t){t.trigger("resizeStop",e)}setResize(){if(this.enableResize){if(this.isBlazorServerRender()&&!m(this.element.querySelector(".e-icons.e-resize-handle")))return;this.element.classList.add(Ug);const e=getComputedStyle(this.element).minHeight,t=getComputedStyle(this.element).minWidth;let i="";for(let s=0;s<this.resizeHandles.length;s++){if("All"===this.resizeHandles[s]){i="south north east west north-east north-west south-east south-west";break}{let r="";switch(this.resizeHandles[s].toString()){case"SouthEast":r="south-east";break;case"SouthWest":r="south-west";break;case"NorthEast":r="north-east";break;case"NorthWest":r="north-west";break;default:r=this.resizeHandles[s].toString()}i+=r.toLocaleLowerCase()+" "}}this.enableRtl&&"south-east"===i.trim()?i="south-west":this.enableRtl&&"south-west"===i.trim()&&(i="south-east"),this.isModal&&this.enableRtl?this.element.classList.add(tr):this.isModal&&this.target===document.body&&this.element.classList.add(iP),function KM(n){Bg=n.resizeBegin,U0=n.resizing,z0=n.resizeComplete,zs=DA(n.element),gs=DA(n.boundary);const e=n.direction.split(" ");for(let t=0;t<e.length;t++)if(YM.indexOf(e[t])>=0&&e[t])ZM(e[t]);else if(""!==e[t].trim()){const i=Ds("div",{className:"e-icons "+Uv+" e-"+e[t]});zs.appendChild(i)}Fg=n.minHeight,j0=n.minWidth,Ah=n.maxWidth,xd=n.maxHeight,n.proxy&&n.proxy.element&&n.proxy.element.classList.contains("e-dialog")?kA(n.proxy):kA()}({element:this.element,direction:i,minHeight:parseInt(e.slice(0,t.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(t.slice(0,t.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:this.target===document.body?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this}),this.wireWindowResizeEvent()}else s_(),this.unWireWindowResizeEvent(),this.element.classList.remove(this.isModal?tr:iP),this.element.classList.remove(Ug)}getFocusElement(e){const i=e.querySelectorAll('input,select,textarea,button:enabled,a,[contenteditable="true"],[tabindex]');return{element:i[i.length-1]}}keyDown(e){if(9===e.keyCode&&this.isModal){let r;m(this.btnObj)||(r=this.btnObj[this.btnObj.length-1]),m(this.btnObj)&&!m(this.ftrTemplateContent)&&(r=this.getFocusElement(this.ftrTemplateContent)),m(this.btnObj)&&m(this.ftrTemplateContent)&&!m(this.contentEle)&&(r=this.getFocusElement(this.contentEle)),!m(r)&&document.activeElement===r.element&&!e.shiftKey&&(e.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&e.shiftKey&&(e.preventDefault(),m(r)||r.element.focus())}const t=document.activeElement,i=["input","textarea"].indexOf(t.tagName.toLowerCase())>-1;let s=!1;if(i||(s=t.hasAttribute("contenteditable")&&"true"===t.getAttribute("contenteditable")),27===e.keyCode&&this.closeOnEscape&&(this.dlgClosedBy="escape",document.querySelector(".e-popup-open:not(.e-dialog)")||this.hide(e)),13===e.keyCode&&!e.ctrlKey&&"textarea"!==t.tagName.toLowerCase()&&i&&!m(this.primaryButtonEle)||13===e.keyCode&&e.ctrlKey&&("textarea"===t.tagName.toLowerCase()||s)&&!m(this.primaryButtonEle)){let r;this.buttons.some((a,u)=>{r=u;let p=a.buttonModel;return!m(p)&&!0===p.isPrimary})&&"function"==typeof this.buttons[r].click&&setTimeout(()=>{this.buttons[r].click.call(this,e)})}}initialize(){m(this.target)||(this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target),this.isBlazorServerRender()||j([this.element],$v),Q.isDevice&&j([this.element],o_),this.isBlazorServerRender()||this.setCSSClass(),this.setMaxHeight()}initRender(){if(this.initialRender=!0,this.isBlazorServerRender()||bt(this.element,{role:"dialog"}),1e3===this.zIndex?(this.setzIndex(this.element,!1),this.calculatezIndex=!0):this.calculatezIndex=!1,this.isBlazorServerRender()&&m(this.headerContent)&&(this.headerContent=this.element.getElementsByClassName("e-dlg-header-content")[0]),this.isBlazorServerRender()&&m(this.contentEle)&&(this.contentEle=this.element.querySelector("#"+this.element.id+"_dialog-content")),this.isBlazorServerRender()||(this.setTargetContent(),""!==this.header&&!m(this.header)&&this.setHeader(),this.renderCloseIcon(),this.setContent(),""===this.footerTemplate||m(this.footerTemplate)?m(this.buttons[0].buttonModel)||this.setButton():this.setFooterTemplate()),this.isBlazorServerRender()&&!m(this.buttons[0].buttonModel)&&""===this.footerTemplate&&this.setButton(),this.allowDragging&&!m(this.headerContent)&&this.setAllowDragging(),this.isBlazorServerRender()||(bt(this.element,{"aria-modal":this.isModal?"true":"false"}),this.isModal&&this.setIsModal()),this.isBlazorServerRender()&&m(this.dlgContainer)){this.dlgContainer=this.element.parentElement;for(let e=0,t=this.dlgContainer.children;e<t.length;e++)t[e].classList.contains("e-dlg-overlay")&&(this.dlgOverlay=t[e])}if(!0!==this.element.classList.contains(FA)&&!0!==this.element.classList.contains(Yv)&&!m(this.element.parentElement)){const e=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=this.createElement("div",{className:"e-dlg-ref-element"}),e.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}m(this.targetEle)||this.targetEle.appendChild(this.isModal?this.dlgContainer:this.element),this.popupObj=new Th(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.target,actionOnScroll:"none",enableRtl:this.enableRtl,open:e=>{const t={container:this.isModal?this.dlgContainer:this.element,element:this.element,target:this.target,preventFocus:!1};this.enableResize&&this.resetResizeIcon(),this.trigger("open",t,i=>{i.preventFocus||this.focusContent()})},close:e=>{this.isModal&&j([this.dlgOverlay],"e-fade"),this.unBindEvent(this.element),this.isModal&&(this.dlgContainer.style.display="none"),this.trigger("close",this.closeArgs);const t=document.activeElement;!m(t)&&!m(t.blur)&&t.blur(),!m(this.storeActiveElement)&&!m(this.storeActiveElement.focus)&&this.storeActiveElement.focus()}}),this.positionChange(),this.setEnableRTL(),this.isBlazorServerRender()||(j([this.element],"e-popup-close"),this.isModal&&this.setOverlayZindex()),this.visible?this.show():this.isModal&&(this.dlgOverlay.style.display="none"),this.initialRender=!1}resetResizeIcon(){const e=this.getMinHeight();if(this.targetEle.offsetHeight<e){const i=this.element.querySelector("."+(this.enableRtl?"e-south-west":"e-south-east"));m(i)||(i.style.bottom="-"+e.toString()+"px")}}setOverlayZindex(e){let t;t=m(e)?parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:e,this.dlgOverlay.style.zIndex=(t-1).toString(),this.dlgContainer.style.zIndex=t.toString()}positionChange(){this.isModal&&(isNaN(parseFloat(this.position.X))||isNaN(parseFloat(this.position.Y)))?!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()}setPopupPosition(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})}setAllowDragging(){this.dragObj=new Us(this.element,{clone:!1,isDragScroll:!0,abort:".e-dlg-closeicon-btn",handle:".e-dlg-header-content",dragStart:t=>{this.trigger("dragStart",t,i=>{})},dragStop:t=>{this.isModal&&(m(this.position)||this.dlgContainer.classList.remove("e-dlg-"+this.position.X+"-"+this.position.Y),this.element.style.position="relative"),this.trigger("dragStop",t),this.element.classList.remove(tr)},drag:t=>{this.trigger("drag",t)}}),m(this.targetEle)||(this.dragObj.dragArea=this.targetEle)}setButton(){if(!this.isBlazorServerRender()){this.buttonContent=[],this.btnObj=[];for(let t=0;t<this.buttons.length;t++){const i=m(this.buttons[t].type)?"button":this.buttons[t].type.toLowerCase(),s=this.createElement("button",{attrs:{type:i}});this.buttonContent.push(s.outerHTML)}this.setFooterTemplate()}let e;for(let t=0,i=this.element.children;t<i.length;t++)i[t].classList.contains(Hg)&&(e=i[t].querySelectorAll("button"));for(let t=0;t<this.buttons.length;t++)this.isBlazorServerRender()||(this.btnObj[t]=new Ip(this.buttons[t].buttonModel)),this.isBlazorServerRender()&&(this.ftrTemplateContent=this.element.querySelector("."+Hg)),!m(this.ftrTemplateContent)&&e.length>0&&("function"==typeof this.buttons[t].click&&O.add(e[t],"click",this.buttons[t].click,this),"object"==typeof this.buttons[t].click&&O.add(e[t],"click",this.buttonClickHandler.bind(this,t),this)),!this.isBlazorServerRender()&&!m(this.ftrTemplateContent)&&(this.btnObj[t].appendTo(this.ftrTemplateContent.children[t]),this.buttons[t].isFlat&&this.btnObj[t].element.classList.add("e-flat"),this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0])}buttonClickHandler(e){this.trigger("buttons["+e+"].click",{})}setContent(){bt(this.element,{"aria-describedby":this.element.id+"_dialog-content"}),this.contentEle=this.createElement("div",{className:"e-dlg-content",id:this.element.id+"_dialog-content"}),this.innerContentElement?this.contentEle.appendChild(this.innerContentElement):(!m(this.content)&&""!==this.content||!this.initialRender)&&("string"!=typeof this.content?this.content instanceof HTMLElement?this.contentEle.appendChild(this.content):this.setTemplate(this.content,this.contentEle,"content"):this.contentEle.innerHTML=this.sanitizeHelper(this.content)),m(this.headerContent)?this.element.insertBefore(this.contentEle,this.element.children[0]):this.element.insertBefore(this.contentEle,this.element.children[1]),"auto"===this.height&&(!this.isBlazorServerRender()&&Q.isIE&&""===this.element.style.width&&!m(this.width)&&(this.element.style.width=ct(this.width)),this.setMaxHeight())}setTemplate(e,t,i){let s,r,o;r=t.classList.contains(n_)?this.element.id+"header":t.classList.contains(Hg)?this.element.id+"footerTemplate":this.element.id+"content",m(e.outerHTML)?"string"!=typeof e?(s=xs(e),o=e):t.innerHTML=this.sanitizeHelper(e):t.appendChild(e);const a=[];if(!m(s)){const u=!0;for(const p of s({},this,i,r,u))a.push(p);Pi([].slice.call(a),t)}}sanitizeHelper(e){if(this.enableHtmlSanitizer){const t=_n.beforeSanitize();ut(t,t,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",t),t.cancel&&!m(t.helper)?e=t.helper(e):t.cancel||(e=_n.serializeValue(t,e))}return e}setMaxHeight(){if(!this.allowMaxHeight)return;const e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!m(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=e,Q.isIE&&"auto"===this.height&&!m(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}setEnableRTL(){this.isBlazorServerRender()||(this.enableRtl?j([this.element],$0):Y([this.element],$0)),m(this.element.querySelector(".e-resize-handle"))||(s_(),this.setResize())}setTargetContent(){if(m(this.content)||""===this.content){const e=""!==this.element.innerHTML.replace(/\s|<(\/?|\/?)(!--!--)>/g,"");(this.element.children.length>0||e)&&(this.innerContentElement=document.createDocumentFragment(),[].slice.call(this.element.childNodes).forEach(t=>{8!==t.nodeType&&this.innerContentElement.appendChild(t)}))}}setHeader(){this.headerEle?this.headerEle.innerHTML="":this.headerEle=this.createElement("div",{id:this.element.id+"_title",className:n_}),this.createHeaderContent(),this.headerContent.appendChild(this.headerEle),this.setTemplate(this.header,this.headerEle,"header"),bt(this.element,{"aria-labelledby":this.element.id}),this.element.insertBefore(this.headerContent,this.element.children[0])}setFooterTemplate(){this.ftrTemplateContent?this.ftrTemplateContent.innerHTML="":this.ftrTemplateContent=this.createElement("div",{className:Hg}),""===this.footerTemplate||m(this.footerTemplate)?this.ftrTemplateContent.innerHTML=this.buttonContent.join(""):this.setTemplate(this.footerTemplate,this.ftrTemplateContent,"footerTemplate"),this.element.appendChild(this.ftrTemplateContent)}createHeaderContent(){m(this.headerContent)&&(this.headerContent=this.createElement("div",{id:this.element.id+"_dialog-header",className:G0}))}renderCloseIcon(){this.showCloseIcon&&(this.closeIcon=this.createElement("button",{className:Ri,attrs:{type:"button"}}),this.closeIconBtnObj=new Ip({cssClass:"e-flat",iconCss:Mp+" e-icons"}),this.closeIconTitle(),m(this.headerContent)?(this.createHeaderContent(),Tr([this.closeIcon],this.headerContent),this.element.insertBefore(this.headerContent,this.element.children[0])):Tr([this.closeIcon],this.headerContent),this.closeIconBtnObj.appendTo(this.closeIcon))}closeIconTitle(){this.l10n.setLocale(this.locale);const e=this.l10n.getConstant("close");this.closeIcon.setAttribute("title",e),this.closeIcon.setAttribute("aria-label",e)}setCSSClass(e){this.cssClass&&j([this.element],this.cssClass.split(" ")),e&&Y([this.element],e.split(" "))}setIsModal(){this.dlgContainer=this.createElement("div",{className:"e-dlg-container"}),this.element.classList.remove(NA),this.element.parentNode.insertBefore(this.dlgContainer,this.element),this.dlgContainer.appendChild(this.element),j([this.element],Y0),this.dlgOverlay=this.createElement("div",{className:"e-dlg-overlay"}),this.dlgOverlay.style.zIndex=(this.zIndex-1).toString(),this.dlgContainer.appendChild(this.dlgOverlay)}getValidFocusNode(e){let t;for(let i=0;i<e.length;i++){if(t=e[i],(t.clientHeight>0||"a"===t.tagName.toLowerCase()&&t.hasAttribute("href"))&&t.tabIndex>-1&&!t.disabled&&!this.disableElement(t,'[disabled],[aria-disabled="true"],[type="hidden"]'))return t;t=null}return t}focusableElements(e){if(!m(e)){const i=e.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');return this.getValidFocusNode(i)}return null}getAutoFocusNode(e){let t=e.querySelector("."+Ri);const s=e.querySelectorAll("[autofocus]");let r=this.getValidFocusNode(s);if(m(r)){if(r=this.focusableElements(this.contentEle),!m(r))return r;if(!m(this.primaryButtonEle))return this.element.querySelector(".e-primary")}else t=r;return t}disableElement(e,t){const i=e?e.matches||e.webkitMatchesSelector||e.msGetRegionContent:null;if(i)for(;e;e=e.parentNode)if(e instanceof Element&&i.call(e,t))return e;return null}focusContent(){const e=this.getAutoFocusNode(this.element),t=m(e)?this.element:e,i=Q.userAgent;(i.indexOf("MSIE ")>0||i.indexOf("Trident/")>0)&&this.element.focus(),t.focus(),this.bindEvent(this.element)}bindEvent(e){O.add(e,"keydown",this.keyDown,this)}unBindEvent(e){O.remove(e,"keydown",this.keyDown)}updateSanitizeContent(){this.isBlazorServerRender()||(this.contentEle.innerHTML=this.sanitizeHelper(this.content))}isBlazorServerRender(){return!1}getModuleName(){return"dialog"}onPropertyChanged(e,t){if(this.element.classList.contains($v))for(const i of Object.keys(e))switch(i){case"content":m(this.content)||""===this.content?m(this.contentEle)||(ye(this.contentEle),this.contentEle=null):(this.isBlazorServerRender()&&(this.contentEle=this.element.querySelector(".e-dlg-content")),m(this.contentEle)||"dialog"===this.contentEle.getAttribute("role")?(!this.isBlazorServerRender()||m(this.element.querySelector(".e-dlg-content")))&&this.setContent():(this.isBlazorServerRender()||(this.contentEle.innerHTML=""),"function"==typeof this.content?(this.clearTemplate(["content"]),ye(this.contentEle),this.contentEle=null,this.setContent()):"string"==typeof this.content?this.isBlazorServerRender()&&""===this.contentEle.innerText?this.contentEle.insertAdjacentHTML("beforeend",this.sanitizeHelper(this.content)):this.updateSanitizeContent():this.contentEle.appendChild(this.content),this.setMaxHeight()));break;case"header":""===this.header||m(this.header)?this.headerEle&&(ye(this.headerEle),this.headerEle=null):(!this.isBlazorServerRender()||m(this.element.querySelector(".e-dlg-header-content")))&&this.setHeader();break;case"footerTemplate":if(""===this.footerTemplate||m(this.footerTemplate)){if(!this.ftrTemplateContent)return;ye(this.ftrTemplateContent),this.ftrTemplateContent=null,this.buttons=[{}]}else(!this.isBlazorServerRender()||m(this.element.querySelector(".e-footer-content")))&&this.setFooterTemplate(),this.buttons=[{}];break;case"showCloseIcon":this.element.getElementsByClassName(Mp).length>0?this.showCloseIcon||""!==this.header&&!m(this.header)?this.showCloseIcon?this.isBlazorServerRender()&&this.wireEvents():ye(this.closeIcon):(ye(this.headerContent),this.headerContent=null):(this.isBlazorServerRender()||this.renderCloseIcon(),this.wireEvents());break;case"locale":this.showCloseIcon&&this.closeIconTitle();break;case"visible":this.visible?this.show():this.hide();break;case"isModal":this.updateIsModal();break;case"height":It(this.element,{height:ct(e.height)});break;case"width":It(this.element,{width:ct(e.width)});break;case"zIndex":this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.element.style.zIndex!==this.zIndex.toString()&&(this.calculatezIndex=!1);break;case"cssClass":this.setCSSClass(t.cssClass);break;case"buttons":{const s=this.buttons.length;!m(this.ftrTemplateContent)&&!this.isBlazorServerRender()&&(ye(this.ftrTemplateContent),this.ftrTemplateContent=null);for(let r=0;r<s;r++)m(this.buttons[r].buttonModel)||(this.footerTemplate="",this.setButton());break}case"allowDragging":this.allowDragging&&!m(this.headerContent)?this.setAllowDragging():this.dragObj.destroy();break;case"target":this.setTarget(e.target);break;case"position":if(this.checkPositionData(),this.isModal){const s=m(t.position.X)?this.position.X:t.position.X,r=m(t.position.Y)?this.position.Y:t.position.Y;this.dlgContainer.classList.contains("e-dlg-"+s+"-"+r)&&this.dlgContainer.classList.remove("e-dlg-"+s+"-"+r)}this.positionChange();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize()}}setTarget(e){this.popupObj.relateTo=e,this.target=e,this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.updateIsModal(),this.enableResize&&this.setResize()}updateIsModal(){if(this.element.setAttribute("aria-modal",this.isModal?"true":"false"),this.isModal)m(this.dlgOverlay)&&(this.setIsModal(),this.element.style.top="0px",this.element.style.left="0px",m(this.targetEle)||this.targetEle.appendChild(this.dlgContainer));else{for(Y([this.element],Y0),Y([document.body],[_u,Iu]),ye(this.dlgOverlay);this.dlgContainer.firstChild;)this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild,this.dlgContainer);this.dlgContainer.parentElement.removeChild(this.dlgContainer)}this.visible&&this.show(),this.positionChange(),this.isModal&&this.dlgOverlay&&O.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)}setzIndex(e,t){const i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.zIndex=pa(e),this.isProtectedOnChange=i,t&&(this.popupObj.zIndex=this.zIndex)}windowResizeHandler(){(function QM(n){Ah=n})(this.targetEle.clientWidth),function JM(n){xd=n}(this.targetEle.clientHeight),this.setMaxHeight()}getPersistData(){return this.addOnPersist([])}destroy(){if(this.isDestroyed)return;const e=[$0,Y0,Ug,tr,a_,o_],t=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];if(Y([this.targetEle],[_u,Iu]),!m(this.element)&&this.element.classList.contains(a_)&&Y([document.body],[_u,Iu]),this.isModal&&Y([m(this.targetEle)?document.body:this.targetEle],Iu),this.unWireEvents(),!m(this.btnObj))for(let i=0;i<this.btnObj.length;i++)this.btnObj[i].destroy();if(m(this.dragObj)||this.dragObj.destroy(),!m(this.popupObj.element)&&this.popupObj.element.classList.contains("e-popup")&&this.popupObj.destroy(),Y([this.element],e),!m(this.cssClass)&&""!==this.cssClass&&Y([this.element],this.cssClass.split(" ")),!m(this.refElement)&&!m(this.refElement.parentElement)&&(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),ye(this.refElement),this.refElement=void 0),this.isModal&&!this.isBlazorServerRender()&&(ye(this.dlgOverlay),this.dlgContainer.parentNode.insertBefore(this.element,this.dlgContainer),ye(this.dlgContainer)),this.isBlazorServerRender()||(this.element.innerHTML=this.clonedEle.innerHTML),this.isBlazorServerRender()&&!m(this.element.children))for(let i=0;i<=this.element.children.length;i++)i-=i,ye(this.element.children[i]);for(let i=0;i<t.length;i++)this.element.removeAttribute(t[i]);this.isBlazorServerRender()?this.isDestroyed=!0:super.destroy(),this.isReact&&this.clearTemplate()}wireWindowResizeEvent(){window.addEventListener("resize",this.windowResizeHandler.bind(this))}unWireWindowResizeEvent(){window.removeEventListener("resize",this.windowResizeHandler.bind(this))}wireEvents(){this.isBlazorServerRender()&&this.showCloseIcon&&(this.closeIcon=this.element.getElementsByClassName("e-dlg-closeicon-btn")[0]),this.showCloseIcon&&O.add(this.closeIcon,"click",this.closeIconClickEventHandler,this),this.isModal&&this.dlgOverlay&&O.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)}unWireEvents(){if(this.showCloseIcon&&O.remove(this.closeIcon,"click",this.closeIconClickEventHandler),this.isModal&&O.remove(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler),this.buttons.length>0&&!m(this.buttons[0].buttonModel)&&""===this.footerTemplate)for(let e=0;e<this.buttons.length;e++)"function"==typeof this.buttons[e].click&&O.remove(this.ftrTemplateContent.children[e],"click",this.buttons[e].click)}refreshPosition(){this.popupObj.refreshPosition()}getDimension(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}}show(e){if(this.element.classList.contains($v)){if(!this.element.classList.contains(NA)||!m(e)){m(e)||this.fullScreen(e);const t={cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,target:this.target,maxHeight:this.element.style.maxHeight};this.trigger("beforeOpen",t,i=>{if(!i.cancel){this.element.style.maxHeight!==t.maxHeight&&(this.allowMaxHeight=!1,this.element.style.maxHeight=t.maxHeight),this.storeActiveElement=document.activeElement,this.element.tabIndex=-1,this.isModal&&!m(this.dlgOverlay)&&(this.dlgOverlay.style.display="block",this.dlgContainer.style.display="flex",Y([this.dlgOverlay],"e-fade"),m(this.targetEle)?j([document.body],[_u,Iu]):(this.dlgContainer.style.position=this.targetEle===document.body?"fixed":"absolute",this.dlgOverlay.style.position="absolute",this.element.style.position="relative",j([this.targetEle],[_u,Iu])));const s={name:this.animationSettings.effect+"In",duration:this.animationSettings.duration,delay:this.animationSettings.delay},r=this.isModal?this.element.parentElement:this.element;this.calculatezIndex&&(this.setzIndex(r,!0),It(this.element,{zIndex:this.zIndex}),this.isModal&&this.setOverlayZindex(this.zIndex)),"None"===this.animationSettings.effect?this.popupObj.show():this.popupObj.show(s),this.dialogOpen=!0;const o=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.visible=!0,this.preventVisibility=!0,this.isProtectedOnChange=o}})}this.isReact&&this.renderReactTemplates()}}hide(e){if(this.element.classList.contains($v)&&this.preventVisibility){const t={cancel:!1,isInteracted:!!e,element:this.element,target:this.target,container:this.isModal?this.dlgContainer:this.element,event:e,closedBy:this.dlgClosedBy};this.closeArgs=t,this.trigger("beforeClose",t,i=>{if(!i.cancel){this.isModal&&(m(this.targetEle)||Y([this.targetEle],[_u,Iu])),document.body.classList.contains(_u)&&document.body.classList.contains(Iu)&&Y([document.body],[_u,Iu]);const s={name:this.animationSettings.effect+"Out",duration:this.animationSettings.duration,delay:this.animationSettings.delay};"None"===this.animationSettings.effect?this.popupObj.hide():this.popupObj.hide(s),this.dialogOpen=!1;const r=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.visible=!1,this.preventVisibility=!1,this.isProtectedOnChange=r}this.dlgClosedBy=c_})}}fullScreen(e){if(e){j([this.element],a_);const s=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=m(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=s,j([document.body],[_u,Iu]),this.allowDragging&&!m(this.dragObj)&&this.dragObj.destroy()}else Y([this.element],a_),Y([document.body],[_u,Iu]),this.allowDragging&&!m(this.headerContent)&&this.setAllowDragging();return e}getButtons(e){return m(e)?this.btnObj:this.btnObj[e]}};var K0;ls([A("")],ws.prototype,"content",void 0),ls([A(!0)],ws.prototype,"enableHtmlSanitizer",void 0),ls([A(!1)],ws.prototype,"showCloseIcon",void 0),ls([A(!1)],ws.prototype,"isModal",void 0),ls([A("")],ws.prototype,"header",void 0),ls([A(!0)],ws.prototype,"visible",void 0),ls([A(!1)],ws.prototype,"enableResize",void 0),ls([A(["South-East"])],ws.prototype,"resizeHandles",void 0),ls([A("auto")],ws.prototype,"height",void 0),ls([A("")],ws.prototype,"minHeight",void 0),ls([A("100%")],ws.prototype,"width",void 0),ls([A("")],ws.prototype,"cssClass",void 0),ls([A(1e3)],ws.prototype,"zIndex",void 0),ls([A(null)],ws.prototype,"target",void 0),ls([A("")],ws.prototype,"footerTemplate",void 0),ls([A(!1)],ws.prototype,"allowDragging",void 0),ls([cl([{}],Vg)],ws.prototype,"buttons",void 0),ls([A(!0)],ws.prototype,"closeOnEscape",void 0),ls([Ps({},qv)],ws.prototype,"animationSettings",void 0),ls([Ps({X:"center",Y:"center"},V0)],ws.prototype,"position",void 0),ls([Z()],ws.prototype,"created",void 0),ls([Z()],ws.prototype,"open",void 0),ls([Z()],ws.prototype,"beforeSanitizeHtml",void 0),ls([Z()],ws.prototype,"beforeOpen",void 0),ls([Z()],ws.prototype,"close",void 0),ls([Z()],ws.prototype,"beforeClose",void 0),ls([Z()],ws.prototype,"dragStart",void 0),ls([Z()],ws.prototype,"dragStop",void 0),ls([Z()],ws.prototype,"drag",void 0),ls([Z()],ws.prototype,"overlayClick",void 0),ls([Z()],ws.prototype,"resizeStart",void 0),ls([Z()],ws.prototype,"resizing",void 0),ls([Z()],ws.prototype,"resizeStop",void 0),ls([Z()],ws.prototype,"destroyed",void 0),ws=ls([ts],ws),function(n){function i(y,E){const _=new ws(y);return _.appendTo(E),_}function o(y,E){return y.header=m(E.title)?l_:E.title,y.content=m(E.content)?"":E.content,y.isModal=!!m(E.isModal)||E.isModal,y.showCloseIcon=!m(E.showCloseIcon)&&E.showCloseIcon,y.allowDragging=!m(E.isDraggable)&&E.isDraggable,y.closeOnEscape=!m(E.closeOnEscape)&&E.closeOnEscape,y.position=m(E.position)?{X:"center",Y:"top"}:E.position,y.animationSettings=m(E.animationSettings)?{effect:"Fade",duration:400,delay:0}:E.animationSettings,y.cssClass=m(E.cssClass)?"":E.cssClass,y.zIndex=m(E.zIndex)?1e3:E.zIndex,y.open=m(E.open)?null:E.open,y}function p(y,E,_){const D=_;return m(E.text)||(D.buttonModel.content=E.text),m(E.icon)||(D.buttonModel.iconCss=E.icon),m(E.cssClass)||(D.buttonModel.cssClass=E.cssClass),m(E.click)||(D.click=E.click),D}n.alert=function e(y){const E=Ds("div",{className:FA});let _;return document.body.appendChild(E),_=i("string"==typeof y?{content:y,position:{X:"center",Y:"top"},isModal:!0,header:l_,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}]}:function s(y){let E={buttons:[]};return E=o(E,y),E=function a(y,E){const _=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return m(E.okButton)?y.buttons=_:y.buttons[0]=p(0,E.okButton,_[0]),y}(E,y),E}(y),E),_.close=()=>{y&&y.close&&y.close.apply(_),_.destroy(),_.element.classList.contains("e-dlg-modal")?(_.element.parentElement.remove(),_.target.classList.remove(Gv)):_.element.remove()},_},n.confirm=function t(y){const E=Ds("div",{className:Yv});let _;return document.body.appendChild(E),_=i("string"==typeof y?{position:{X:"center",Y:"top"},content:y,isModal:!0,header:l_,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},{buttonModel:{content:"Cancel"},click:function(){this.hide()}}]}:function r(y){let E={buttons:[]};return E=o(E,y),E=function u(y,E){const _={buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},D={buttonModel:{content:"Cancel"},click:function(){this.hide()}};return y.buttons[0]=m(E.okButton)?_:p(0,E.okButton,_),y.buttons[1]=m(E.cancelButton)?D:p(0,E.cancelButton,D),y}(E,y),E}(y),E),_.close=()=>{y&&y.close&&y.close.apply(_),_.destroy(),_.element.classList.contains("e-dlg-modal")?(_.element.parentElement.remove(),_.target.classList.remove(Gv)):_.element.remove()},_}}(K0||(K0={}));var Js=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const Wg="e-tooltip",$f="e-tooltip-wrap",qg="e-tip-content",Zv="e-arrow-tip",zA="e-arrow-tip-outer",Z0="e-arrow-tip-inner",$g="e-tip-bottom",X0="e-tip-top",u_="e-tip-left",d_="e-tip-right",Q0="e-popup",J0="e-popup-open",p_="e-popup-close",cP="e-tooltip-popup-container";class WA extends Is{}Js([A({effect:"FadeIn",duration:150,delay:0})],WA.prototype,"open",void 0),Js([A({effect:"FadeOut",duration:150,delay:0})],WA.prototype,"close",void 0);let Ns=class extends Ls{constructor(e,t){super(e,t),this.mouseMoveEvent=null,this.mouseMoveTarget=null,this.containerElement=null,this.isBodyContainer=!0}initialize(){this.formatPosition(),j([this.element],Wg)}formatPosition(){0===this.position.indexOf("Top")||0===this.position.indexOf("Bottom")?[this.tooltipPositionY,this.tooltipPositionX]=this.position.split(/(?=[A-Z])/):[this.tooltipPositionX,this.tooltipPositionY]=this.position.split(/(?=[A-Z])/)}renderArrow(){this.setTipClass(this.position);const e=this.createElement("div",{className:Zv+" "+this.tipClass});e.appendChild(this.createElement("div",{className:zA+" "+this.tipClass})),e.appendChild(this.createElement("div",{className:Z0+" "+this.tipClass})),this.tooltipEle.appendChild(e)}setTipClass(e){this.tipClass=0===e.indexOf("Right")?u_:0===e.indexOf("Bottom")?X0:0===e.indexOf("Left")?d_:$g}renderPopup(e){const t=this.mouseTrail?{top:0,left:0}:this.getTooltipPosition(e);this.tooltipEle.classList.remove("e-lib"),this.popupObj=new Th(this.tooltipEle,{height:this.height,width:this.width,position:{X:t.left,Y:t.top},enableRtl:this.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})}getTooltipPosition(e){this.tooltipEle.style.display="block";const t=Mo(e,this.tooltipPositionX,this.tooltipPositionY,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect()),i=this.calculateTooltipOffset(this.position),s=this.calculateElementPosition(t,i),a=this.collisionFlipFit(e,s[0],s[1]);return this.tooltipEle.style.display="",a}windowResize(){this.reposition(this.findTarget())}reposition(e){if(this.popupObj&&e){const t=this.getTooltipPosition(e);this.popupObj.position={X:t.left,Y:t.top},this.popupObj.dataBind()}}openPopupHandler(){!this.mouseTrail&&this.needTemplateReposition()&&this.reposition(this.findTarget()),this.trigger("afterOpen",this.tooltipEventArgs)}closePopupHandler(){this.clearTemplate(["content"]),this.clear(),this.trigger("afterClose",this.tooltipEventArgs)}calculateTooltipOffset(e){const t={top:0,left:0},i=this.tooltipEle.offsetWidth,s=this.tooltipEle.offsetHeight,r=X("."+Zv,this.tooltipEle),o=r?r.offsetWidth:0,a=r?r.offsetHeight:0;let u=this.showTipPointer?0:8;const p=a/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),y=o/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.mouseTrail&&(u+=2),e){case"RightTop":t.left+=o+u,t.top-=s-p;break;case"RightCenter":t.left+=o+u,t.top-=s/2;break;case"RightBottom":t.left+=o+u,t.top-=p;break;case"BottomRight":t.top+=a+u,t.left-=y;break;case"BottomCenter":t.top+=a+u,t.left-=i/2;break;case"BottomLeft":t.top+=a+u,t.left-=i-y;break;case"LeftBottom":t.left-=o+i+u,t.top-=p;break;case"LeftCenter":t.left-=o+i+u,t.top-=s/2;break;case"LeftTop":t.left-=o+i+u,t.top-=s-p;break;case"TopLeft":t.top-=s+a+u,t.left-=i-y;break;case"TopRight":t.top-=s+a+u,t.left-=y;break;default:t.top-=s+a+u,t.left-=i/2}return t.left+=this.offsetX,t.top+=this.offsetY,t}updateTipPosition(e){const t=at("."+Zv+",."+zA+",."+Z0,this.tooltipEle);Y(t,[$g,X0,u_,d_]),this.setTipClass(e),j(t,this.tipClass)}adjustArrow(e,t,i,s){if(!1===this.showTipPointer)return;let r,o;this.updateTipPosition(t),this.tooltipEle.style.display="block";const a=this.tooltipEle.clientWidth,u=this.tooltipEle.clientHeight,p=X("."+Zv,this.tooltipEle),y=X("."+Z0,this.tooltipEle),E=p.offsetWidth,_=p.offsetHeight;if(this.tooltipEle.style.display="",this.tipClass===$g||this.tipClass===X0){if(this.tipClass===$g?(o="99.9%",y.style.top="-"+(_-2)+"px"):(o=-(_-1)+"px",y.style.top="-"+(_-6)+"px"),e){const D="Center"!==i||a>e.offsetWidth||this.mouseTrail;r=D&&"Left"===i||!D&&"End"===this.tipPointerPosition?a-E-2+"px":D&&"Right"===i||!D&&"Start"===this.tipPointerPosition?"2px":a/2-E/2+"px"}}else{this.tipClass===d_?(r="99.9%",y.style.left="-"+(E-2)+"px"):(r=-(E-1)+"px",y.style.left=E-2-E+"px");const D="Center"!==s||u>e.offsetHeight||this.mouseTrail;o=D&&"Top"===s||!D&&"End"===this.tipPointerPosition?u-_-2+"px":D&&"Bottom"===s||!D&&"Start"===this.tipPointerPosition?"2px":u/2-_/2+"px"}p.style.top=o,p.style.left=r}renderContent(e){const t=X("."+qg,this.tooltipEle);if(this.cssClass&&j([this.tooltipEle],this.cssClass.split(" ")),e&&!m(e.getAttribute("title"))&&(e.setAttribute("data-content",e.getAttribute("title")),e.removeAttribute("title")),m(this.content))e&&!m(e.getAttribute("data-content"))&&(t.innerHTML=e.getAttribute("data-content"));else if(t.innerHTML="",this.content instanceof HTMLElement)t.appendChild(this.content);else if("string"==typeof this.content)this.enableHtmlSanitizer&&this.setProperties({content:_n.sanitize(this.content)},!0),t[this.enableHtmlParse?"innerHTML":"textContent"]=this.content;else{const s=xs(this.content)({},this,"content",this.element.id+"content",void 0,void 0,t);s&&Pi(s,t),this.renderReactTemplates()}}renderCloseIcon(){if(!this.isSticky)return;const e=this.createElement("div",{className:"e-icons e-tooltip-close"});this.tooltipEle.appendChild(e),O.add(e,Q.touchStartEvent,this.onStickyClose,this)}addDescribedBy(e,t){const i=(e.getAttribute("aria-describedby")||"").split(/\s+/);i.indexOf(t)<0&&i.push(t),bt(e,{"aria-describedby":i.join(" ").trim(),"data-tooltip-id":t})}removeDescribedBy(e){const t=e.getAttribute("data-tooltip-id"),i=(e.getAttribute("aria-describedby")||"").split(/\s+/),s=i.indexOf(t);-1!==s&&i.splice(s,1),e.removeAttribute("data-tooltip-id");const r=i.join(" ").trim();r?e.setAttribute("aria-describedby",r):e.removeAttribute("aria-describedby")}tapHoldHandler(e){clearTimeout(this.autoCloseTimer),this.targetHover(e.originalEvent)}touchEndHandler(e){this.isSticky||(this.autoCloseTimer=setTimeout(()=>{this.close()},1500))}targetClick(e){let t;t=this.target?ae(e.target,this.target):this.element,!m(t)&&(null===t.getAttribute("data-tooltip-id")?this.targetHover(e):this.isSticky||this.hideTooltip(this.animation.close,e,t))}targetHover(e){let t;if(t=this.target?ae(e.target,this.target):this.element,m(t)||null!==t.getAttribute("data-tooltip-id")&&0===this.closeDelay)return;const i=[].slice.call(at('[data-tooltip-id= "'+this.ctrlId+'_content"]',document));for(const s of i)this.restoreElement(s);this.showTooltip(t,this.animation.open,e)}mouseMoveBeforeOpen(e){this.mouseMoveEvent=e}mouseMoveBeforeRemove(){this.mouseMoveTarget&&O.remove(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen)}showTooltip(e,t,i){clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.openDelay&&this.mouseTrail&&(this.mouseMoveBeforeRemove(),this.mouseMoveTarget=e,O.add(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen,this)),this.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:e,event:i||null,element:this.tooltipEle,isInteracted:!m(i)},this.trigger("beforeRender",this.tooltipEventArgs,(r=>{this.beforeRenderCallback(r,e,i,t)}).bind(this))}beforeRenderCallback(e,t,i,s){e.cancel?(this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove()):(this.isHidden=!1,m(this.tooltipEle)?(this.ctrlId=this.element.getAttribute("id")?Ks(this.element.getAttribute("id")):Ks("tooltip"),this.tooltipEle=this.createElement("div",{className:$f+" "+Q0+" e-lib",attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"},styles:"width:"+ct(this.width)+";height:"+ct(this.height)+";position:absolute;"}),this.tooltipBeforeRender(t,this),this.tooltipAfterRender(t,i,s,this)):t&&(this.adjustArrow(t,this.position,this.tooltipPositionX,this.tooltipPositionY),this.addDescribedBy(t,this.ctrlId+"_content"),this.renderContent(t),Wn.stop(this.tooltipEle),this.reposition(t),this.tooltipAfterRender(t,i,s,this)))}appendContainer(e){"string"==typeof this.container?"body"===this.container?this.containerElement=document.body:(this.isBodyContainer=!1,this.containerElement=X(this.container,document)):this.container instanceof HTMLElement&&(this.containerElement=this.container,this.isBodyContainer="BODY"===this.containerElement.tagName),this.isBodyContainer||j([this.containerElement],cP),this.containerElement.appendChild(e.tooltipEle)}tooltipBeforeRender(e,t){e&&(Q.isDevice&&j([t.tooltipEle],"e-bigger"),"auto"!==t.width&&(t.tooltipEle.style.maxWidth=ct(t.width)),t.tooltipEle.appendChild(t.createElement("div",{className:qg})),this.appendContainer(t),Y([t.tooltipEle],"e-hidden"),t.addDescribedBy(e,t.ctrlId+"_content"),t.renderContent(e),j([t.tooltipEle],J0),t.showTipPointer&&t.renderArrow(),t.renderCloseIcon(),t.renderPopup(e),t.adjustArrow(e,t.position,t.tooltipPositionX,t.tooltipPositionY),Wn.stop(t.tooltipEle),t.reposition(e))}tooltipAfterRender(e,t,i,s){if(e){Y([s.tooltipEle],J0),j([s.tooltipEle],p_),s.tooltipEventArgs={type:t?t.type:null,cancel:!1,target:e,event:t||null,element:s.tooltipEle,isInteracted:!m(t)},s.needTemplateReposition()&&!s.mouseTrail&&(s.tooltipEle.style.display="none");const r=o=>{s.beforeOpenCallback(o,e,i,t)};s.trigger("beforeOpen",s.tooltipEventArgs,r.bind(s))}}beforeOpenCallback(e,t,i,s){if(e.cancel)this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove(),this.restoreElement(t);else{let r={name:i.effect,duration:i.duration,delay:i.delay,timingFunction:"easeOut"};"None"===i.effect&&(r=void 0),this.openDelay>0?this.showTimer=setTimeout(()=>{this.mouseTrail&&O.add(t,"mousemove touchstart mouseenter",this.onMouseMove,this),this.popupObj&&(this.popupObj.show(r,t),this.mouseMoveEvent&&this.mouseTrail&&this.onMouseMove(this.mouseMoveEvent))},this.openDelay):this.popupObj&&this.popupObj.show(r,t)}s&&this.wireMouseEvents(s,t)}needTemplateReposition(){return!m(this.viewContainerRef)&&"string"!=typeof this.viewContainerRef}checkCollision(e,t,i){const s={left:t,top:i,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},r=Id(this.tooltipEle,this.checkCollideTarget(),t,i);return r.length>0&&(s.horizontal=r.indexOf("left")>=0?"Right":r.indexOf("right")>=0?"Left":this.tooltipPositionX,s.vertical=r.indexOf("top")>=0?"Bottom":r.indexOf("bottom")>=0?"Top":this.tooltipPositionY),s}calculateElementPosition(e,t){return[this.isBodyContainer?e.left+t.left:e.left-this.containerElement.offsetLeft+t.left+window.pageXOffset+this.containerElement.scrollLeft,this.isBodyContainer?e.top+t.top:e.top-this.containerElement.offsetTop+t.top+window.pageYOffset+this.containerElement.scrollTop]}collisionFlipFit(e,t,i){const s=this.checkCollision(e,t,i);let r=s.position;this.tooltipPositionY!==s.vertical&&(r=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?s.vertical+this.tooltipPositionX:this.tooltipPositionX+s.vertical),this.tooltipPositionX!==s.horizontal&&(0===r.indexOf("Left")&&(s.vertical="LeftTop"===r||"LeftCenter"===r?"Top":"Bottom",r=s.vertical+"Left"),0===r.indexOf("Right")&&(s.vertical="RightTop"===r||"RightCenter"===r?"Top":"Bottom",r=s.vertical+"Right"),s.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:e,event:null,element:this.tooltipEle,collidedPosition:r},this.trigger("beforeCollision",this.tooltipEventArgs);const o=s.vertical,a=s.horizontal;if(s.position!==r){const y=Mo(e,a,o,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect());this.adjustArrow(e,r,a,o);const E=this.calculateTooltipOffset(r);E.top-=this.getOffSetPosition("TopBottom",r,this.offsetY),E.left-=this.getOffSetPosition("RightLeft",r,this.offsetX),s.position=r;const _=this.calculateElementPosition(y,E);s.left=_[0],s.top=_[1]}else this.adjustArrow(e,r,a,o);const u={left:s.left,top:s.top},p=this.isBodyContainer?R0(this.tooltipEle,this.checkCollideTarget(),{X:!0,Y:!1},u).left:u.left;if(this.tooltipEle.style.display="block",this.showTipPointer&&(0===r.indexOf("Bottom")||0===r.indexOf("Top"))){const y=X("."+Zv,this.tooltipEle);let E=parseInt(y.style.left,10)-(p-s.left);E<0?E=0:E+y.offsetWidth>this.tooltipEle.clientWidth&&(E=this.tooltipEle.clientWidth-y.offsetWidth),y.style.left=E.toString()+"px"}return this.tooltipEle.style.display="",u.left=p,u}getOffSetPosition(e,t,i){return-1!==e.indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!==e.indexOf(t.split(/(?=[A-Z])/)[0])?2*i:0}checkCollideTarget(){return!this.windowCollision&&this.target?this.element:null}hideTooltip(e,t,i){this.closeDelay>0?(clearTimeout(this.hideTimer),clearTimeout(this.showTimer),this.hideTimer=setTimeout(()=>{this.closeDelay&&this.tooltipEle&&this.isTooltipOpen||this.tooltipHide(e,t,i)},this.closeDelay)):this.tooltipHide(e,t,i)}tooltipHide(e,t,i){let s;s=t?this.target?i||t.target:this.element:X('[data-tooltip-id= "'+this.ctrlId+'_content"]',document),this.tooltipEventArgs={type:t?t.type:null,cancel:!1,target:s,event:t||null,element:this.tooltipEle,isInteracted:!m(t)},this.trigger("beforeClose",this.tooltipEventArgs,r=>{r.cancel?this.isHidden=!1:(this.mouseMoveBeforeRemove(),this.popupHide(e,s))})}popupHide(e,t){t&&this.restoreElement(t),this.isHidden=!0;let i={name:e.effect,duration:e.duration,delay:e.delay,timingFunction:"easeIn"};"None"===e.effect&&(i=void 0),this.popupObj&&this.popupObj.hide(i)}restoreElement(e){this.unwireMouseEvents(e),m(e.getAttribute("data-content"))||(e.setAttribute("title",e.getAttribute("data-content")),e.removeAttribute("data-content")),this.removeDescribedBy(e)}clear(){this.tooltipEle&&(Y([this.tooltipEle],p_),j([this.tooltipEle],J0)),this.isHidden&&(this.popupObj&&this.popupObj.destroy(),this.tooltipEle&&Ms(this.tooltipEle),this.tooltipEle=null,this.popupObj=null)}tooltipHover(e){this.tooltipEle&&(this.isTooltipOpen=!0)}tooltipMouseOut(e){this.isTooltipOpen=!1,this.hideTooltip(this.animation.close,e,this.findTarget())}onMouseOut(e){const t=e.relatedTarget;if(t&&!this.mouseTrail){const i=ae(t,`.${$f}.e-lib.${Q0}`);i?O.add(i,"mouseleave",this.tooltipElementMouseOut,this):(this.hideTooltip(this.animation.close,e,this.findTarget()),0===this.closeDelay&&this.clear())}else this.hideTooltip(this.animation.close,e,this.findTarget()),this.clear()}tooltipElementMouseOut(e){this.hideTooltip(this.animation.close,e,this.findTarget()),O.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()}onStickyClose(e){this.close()}onMouseMove(e){let t=0,i=0;e.type.indexOf("touch")>-1?(e.preventDefault(),t=e.touches[0].pageX,i=e.touches[0].pageY):(t=e.pageX,i=e.pageY),Wn.stop(this.tooltipEle),Y([this.tooltipEle],p_),j([this.tooltipEle],J0),this.adjustArrow(e.target,this.position,this.tooltipPositionX,this.tooltipPositionY);const s=this.calculateTooltipOffset(this.position),a=this.checkCollision(e.target,t+s.left+this.offsetX,i+s.top+this.offsetY);if(this.tooltipPositionX!==a.horizontal||this.tooltipPositionY!==a.vertical){const u=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?a.vertical+a.horizontal:a.horizontal+a.vertical;a.position=u,this.adjustArrow(e.target,a.position,a.horizontal,a.vertical);const p=this.calculateTooltipOffset(a.position);a.left=t+p.left-this.offsetX,a.top=i+p.top-this.offsetY}this.tooltipEle.style.left=a.left+"px",this.tooltipEle.style.top=a.top+"px"}keyDown(e){this.tooltipEle&&27===e.keyCode&&this.close()}touchEnd(e){this.tooltipEle&&null===ae(e.target,"."+Wg)&&!this.isSticky&&this.close()}scrollHandler(e){this.tooltipEle&&(ae(e.target,`.${$f}.e-lib.${Q0}`)||this.close())}render(){this.initialize(),this.wireEvents(this.opensOn),this.renderComplete()}preRender(){this.tipClass=$g,this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0}wireEvents(e){const t=this.getTriggerList(e);for(const i of t){if("Custom"===i)return;"Focus"===i&&this.wireFocusEvents(),"Click"===i&&O.add(this.element,Q.touchStartEvent,this.targetClick,this),"Hover"===i&&(Q.isDevice?(this.touchModule=new Sn(this.element,{tapHoldThreshold:500,tapHold:this.tapHoldHandler.bind(this)}),O.add(this.element,Q.touchEndEvent,this.touchEndHandler,this)):O.add(this.element,"mouseover",this.targetHover,this))}O.add(document,"touchend",this.touchEnd,this),O.add(document,"scroll wheel",this.scrollHandler,this),O.add(window,"resize",this.windowResize,this),O.add(document,"keydown",this.keyDown,this)}getTriggerList(e){return"Auto"===e&&(e=Q.isDevice?"Hover":"Hover Focus"),e.split(" ")}wireFocusEvents(){if(m(this.target))O.add(this.element,"focus",this.targetHover,this);else{const e=[].slice.call(at(this.target,this.element));for(const t of e)O.add(t,"focus",this.targetHover,this)}}wireMouseEvents(e,t){this.tooltipEle&&(this.isSticky||("focus"===e.type&&O.add(t,"blur",this.onMouseOut,this),"mouseover"===e.type&&O.add(t,"mouseleave",this.onMouseOut,this),this.closeDelay&&(O.add(this.tooltipEle,"mouseenter",this.tooltipHover,this),O.add(this.tooltipEle,"mouseleave",this.tooltipMouseOut,this))),this.mouseTrail&&0===this.openDelay&&O.add(t,"mousemove touchstart mouseenter",this.onMouseMove,this))}unwireEvents(e){const t=this.getTriggerList(e);for(const i of t){if("Custom"===i)return;"Focus"===i&&this.unwireFocusEvents(),"Click"===i&&O.remove(this.element,Q.touchStartEvent,this.targetClick),"Hover"===i&&(Q.isDevice?(this.touchModule&&this.touchModule.destroy(),O.remove(this.element,Q.touchEndEvent,this.touchEndHandler)):O.remove(this.element,"mouseover",this.targetHover))}O.remove(document,"touchend",this.touchEnd),O.remove(document,"scroll wheel",this.scrollHandler),O.remove(window,"resize",this.windowResize),O.remove(document,"keydown",this.keyDown)}unwireFocusEvents(){if(m(this.target))O.remove(this.element,"focus",this.targetHover);else{const e=[].slice.call(at(this.target,this.element));for(const t of e)O.remove(t,"focus",this.targetHover)}}unwireMouseEvents(e){if(!this.isSticky){const t=this.getTriggerList(this.opensOn);for(const i of t)"Focus"===i&&O.remove(e,"blur",this.onMouseOut),"Hover"===i&&!Q.isDevice&&O.remove(e,"mouseleave",this.onMouseOut);this.closeDelay&&(O.remove(e,"mouseenter",this.tooltipHover),O.remove(e,"mouseleave",this.tooltipMouseOut))}this.mouseTrail&&O.remove(e,"mousemove touchstart mouseenter",this.onMouseMove)}findTarget(){return X('[data-tooltip-id= "'+this.ctrlId+'_content"]',document)}getModuleName(){return"tooltip"}getPersistData(){return this.addOnPersist([])}onPropertyChanged(e,t){const i=this.findTarget();for(const s of Object.keys(e))switch(s){case"width":this.tooltipEle&&i&&(this.tooltipEle.style.width=this.tooltipEle.style.maxWidth=ct(e.width),this.reposition(i));break;case"height":this.tooltipEle&&i&&(this.tooltipEle.style.height=ct(e.height),this.reposition(i));break;case"content":this.tooltipEle&&this.renderContent();break;case"opensOn":this.unwireEvents(t.opensOn),this.wireEvents(e.opensOn);break;case"position":if(this.formatPosition(),this.tooltipEle&&i){const r=X("."+Z0,this.tooltipEle);r.style.top=r.style.left=null,this.reposition(i)}break;case"tipPointerPosition":this.tooltipEle&&i&&this.reposition(i);break;case"offsetX":if(this.tooltipEle){const r=e.offsetX-t.offsetX;this.tooltipEle.style.left=(parseInt(this.tooltipEle.style.left,10)+r).toString()+"px"}break;case"offsetY":if(this.tooltipEle){const r=e.offsetY-t.offsetY;this.tooltipEle.style.top=(parseInt(this.tooltipEle.style.top,10)+r).toString()+"px"}break;case"cssClass":this.tooltipEle&&(t.cssClass&&Y([this.tooltipEle],t.cssClass.split(" ")),e.cssClass&&j([this.tooltipEle],e.cssClass.split(" ")));break;case"enableRtl":this.tooltipEle&&(this.enableRtl?j([this.tooltipEle],"e-rtl"):Y([this.tooltipEle],"e-rtl"));break;case"container":m(this.containerElement)||Y([this.containerElement],cP),this.container=e.container,this.tooltipEle&&i&&(this.appendContainer(this),this.reposition(i))}}open(e,t){m(t)&&(t=this.animation.open),m(e)&&(e=this.element),"none"!==e.style.display&&this.showTooltip(e,t)}close(e){e||(e=this.animation.close),this.hideTooltip(e)}refresh(e){this.tooltipEle&&this.renderContent(e),this.popupObj&&e&&this.reposition(e)}destroy(){super.destroy(),this.tooltipEle&&Ms(this.tooltipEle),this.popupObj&&this.popupObj.destroy(),Y([this.element],Wg),this.unwireEvents(this.opensOn),this.unwireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null}};Js([A("auto")],Ns.prototype,"width",void 0),Js([A("auto")],Ns.prototype,"height",void 0),Js([A()],Ns.prototype,"content",void 0),Js([A("body")],Ns.prototype,"container",void 0),Js([A()],Ns.prototype,"target",void 0),Js([A("TopCenter")],Ns.prototype,"position",void 0),Js([A(0)],Ns.prototype,"offsetX",void 0),Js([A(0)],Ns.prototype,"offsetY",void 0),Js([A(!0)],Ns.prototype,"showTipPointer",void 0),Js([A(!0)],Ns.prototype,"enableHtmlParse",void 0),Js([A(!1)],Ns.prototype,"windowCollision",void 0),Js([A("Auto")],Ns.prototype,"tipPointerPosition",void 0),Js([A("Auto")],Ns.prototype,"opensOn",void 0),Js([A(!1)],Ns.prototype,"mouseTrail",void 0),Js([A(!1)],Ns.prototype,"isSticky",void 0),Js([Ps({},WA)],Ns.prototype,"animation",void 0),Js([A(0)],Ns.prototype,"openDelay",void 0),Js([A(0)],Ns.prototype,"closeDelay",void 0),Js([A()],Ns.prototype,"cssClass",void 0),Js([A(!1)],Ns.prototype,"enableHtmlSanitizer",void 0),Js([Z()],Ns.prototype,"beforeRender",void 0),Js([Z()],Ns.prototype,"beforeOpen",void 0),Js([Z()],Ns.prototype,"afterOpen",void 0),Js([Z()],Ns.prototype,"beforeClose",void 0),Js([Z()],Ns.prototype,"afterClose",void 0),Js([Z()],Ns.prototype,"beforeCollision",void 0),Js([Z()],Ns.prototype,"created",void 0),Js([Z()],Ns.prototype,"destroyed",void 0),Ns=Js([ts],Ns);const fo={},Qv="e-spin-show",Jv="e-spin-hide",GA="e-spin-material",YA="e-spin-fabric",m_="e-spin-tailwind",dP="e-spin-bootstrap",KA="e-spin-bootstrap4",Gf="e-spin-bootstrap5",ZA="e-spin-high-contrast",eb="e-spinner-pane",g_="e-spinner-inner",tb="e-path-circle",eE="e-spin-template";function Zc(n,e){if(!n.target)return;let t;const i=m(e)?Ds:e;let s=function AP(n,e){const t=e("div",{}),i=e("div",{});return t.classList.add(eb),i.classList.add(g_),n.appendChild(t),t.appendChild(i),{wrap:t,inner_wrap:i}}(n.target,i);if(m(n.cssClass)||s.wrap.classList.add(n.cssClass),m(n.template)&&m(null)){const r=m(n.type)?function EP(n){return window.getComputedStyle(n,":after").getPropertyValue("content").replace(/['"]+/g,"")}(s.wrap):n.type;t=function xP(n,e){let t;switch(e){case"Material":case"Fabric":case"Tailwind":case"Tailwind-dark":default:t=30;break;case"Bootstrap4":case"Bootstrap5":t=36}return n=n?parseFloat(n+""):t,"Bootstrap"===e?n:n/2}(m(n.width)?void 0:n.width,r),function JA(n,e,t,i){const s=e.querySelector("."+g_),r=s.querySelector("svg");switch(m(r)||s.removeChild(r),n){case"Material":!function gP(n,e,t){const i=Pp();fo[i]={timeOut:0,type:"Material",radius:e},C_(n,i,0,GA),iE(e,n,"Material",GA)}(s,t);break;case"Fabric":!function QA(n,e,t){const i=Pp();fo[i]={timeOut:0,type:"Fabric",radius:e},b_(n,i,YA),nE(e,n,YA)}(s,t);break;case"Bootstrap":!function wP(n,e,t){const i=Pp();fo[i]={timeOut:0,type:"Bootstrap",radius:e},function SP(n,e,t){const i=document.createElementNS("http://www.w3.org/2000/svg","svg"),s=64,r=32,o=2;i.setAttribute("id",e),i.setAttribute("class",dP),i.setAttribute("viewBox","0 0 "+s+" "+s),n.insertBefore(i,n.firstChild);for(let a=0;a<=7;a++){const u=document.createElementNS("http://www.w3.org/2000/svg","circle");u.setAttribute("class",tb+"_"+a),u.setAttribute("r",o+""),u.setAttribute("transform","translate("+r+","+r+")"),i.appendChild(u)}}(n,i),function _P(n,e){const t=n.querySelector("svg.e-spin-bootstrap"),i=0,s=0,r=24;t.style.width=t.style.height=e+"px";let o=90;for(let a=0;a<=7;a++){const u=S_(i,s,r,o),p=t.querySelector("."+tb+"_"+a);p.setAttribute("cx",u.x+""),p.setAttribute("cy",u.y+""),o=o>=360?0:o,o+=45}}(n,e)}(s,t);break;case"HighContrast":!function CP(n,e,t){const i=Pp();fo[i]={timeOut:0,type:"HighContrast",radius:e},b_(n,i,ZA),nE(e,n,ZA)}(s,t);break;case"Bootstrap4":!function yP(n,e,t){const i=Pp();fo[i]={timeOut:0,type:"Bootstrap4",radius:e},C_(n,i,0,KA),iE(e,n,"Bootstrap4",KA)}(s,t);break;case"Bootstrap5":!function v_(n,e,t){const i=Pp();fo[i]={timeOut:0,type:"Bootstrap5",radius:e},C_(n,i,0,Gf),iE(e,n,"Bootstrap5",Gf)}(s,t);break;case"Tailwind":case"Tailwind-dark":!function bP(n,e,t){const i=Pp();fo[i]={timeOut:0,type:"Tailwind",radius:e},b_(n,i,m_),nE(e,n,m_)}(s,t)}}(r,s.wrap,t),m(n.label)||function mP(n,e,t){const i=t("div",{});i.classList.add("e-spin-label"),i.innerHTML=e,n.appendChild(i)}(s.inner_wrap,n.label,i)}else{const r=m(n.template)?null:n.template;s.wrap.classList.add(eE),function tD(n,e,t){m(t)||n.classList.add(t),n.querySelector(".e-spinner-inner").innerHTML=e}(s.wrap,r,null)}s.wrap.classList.add(Jv),s=null}function IP(n,e){const t=[],i=n,s=e;let r=!1,o=1;return function a(u){t.push(u),(u!==s||1===o)&&(u<=i&&u>1&&!r?u=parseFloat((u-.2).toFixed(2)):1===u?(u=7,u=parseFloat((u+.2).toFixed(2)),r=!0):u<8&&r?8===(u=parseFloat((u+.2).toFixed(2)))&&(r=!1):u<=8&&!r&&(u=parseFloat((u-.2).toFixed(2))),++o,a(u))}(i),t}function Pp(){let n="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let t=0;t<5;t++)n+=e.charAt(Math.floor(Math.random()*e.length));return n}function b_(n,e,t,i){const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("id",e),s.setAttribute("class",t);const r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("class",tb);const o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class","e-path-arc"),n.insertBefore(s,n.firstChild),s.appendChild(r),s.appendChild(o)}function C_(n,e,t,i){const s=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("class",i),s.setAttribute("id",e),r.setAttribute("class",tb),n.insertBefore(s,n.firstChild),s.appendChild(r)}function tE(n){(function E_(n,e,t,i,s,r,o){const a=++o.globalInfo[o.uniqueID].previousId,u=(new Date).getTime(),p=e-n,y=function w_(n){return parseFloat(n)}(2*o.globalInfo[o.uniqueID].radius+""),E=iD(y),_=-90*(o.globalInfo[o.uniqueID].count||0);!function D(V){const H=Math.max(0,Math.min((new Date).getTime()-u,i));(function L(V,H){if(!m(H.querySelector("svg.e-spin-material"))&&!m(H.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))){const _e=H.querySelector("svg.e-spin-material").querySelector("path.e-path-circle");_e.setAttribute("stroke-dashoffset",sE(y,E,V,r)+""),_e.setAttribute("transform","rotate("+_+" "+y/2+" "+y/2+")")}})(t(H,n,p,i),V.container),a===V.globalInfo[V.uniqueID].previousId&&H<i?fo[V.uniqueID].timeOut=setTimeout(D.bind(null,V),1):tE(V)}(o)})(1,149,kP,1333,0,75,n),n.globalInfo[n.uniqueID].count=++n.globalInfo[n.uniqueID].count%4}function iE(n,e,t,i){const s=2*n,r=e.querySelector("svg."+i),o=r.querySelector("path.e-path-circle"),a=iD(s),u=s/2+"px";r.setAttribute("viewBox","0 0 "+s+" "+s),r.style.width=r.style.height=s+"px",r.style.transformOrigin=u+" "+u+" "+u,o.setAttribute("d",function DP(n,e){const t=n/2,i=e/2;return"M"+t+","+i+"A"+(t-i)+","+(t-i)+" 0 1 1 "+i+","+t}(s,a)),"Material"===t&&(o.setAttribute("stroke-width",a+""),o.setAttribute("stroke-dasharray",(s-a)*Math.PI*.75+""),o.setAttribute("stroke-dashoffset",sE(s,a,1,75)+""))}function iD(n){return.1*n}function sE(n,e,t,i){return(n-e)*Math.PI*(3*i/100-t/100)}function kP(n,e,t,i){const s=(n/=i)*n,r=s*n;return e+t*(6*r*s+-15*s*s+10*r)}function nE(n,e,t){const i=n,s=n,r=2*n,u=e.querySelector("."+t),p=u.querySelector(".e-path-circle"),y=u.querySelector(".e-path-arc"),E=r/2+"px";p.setAttribute("d",function OP(n,e,t){return["M",n,e,"m",-t,0,"a",t,t,0,1,0,2*t,0,"a",t,t,0,1,0,2*-t,0].join(" ")}(i,s,n)),y.setAttribute("d",function sD(n,e,t,i,s){const r=S_(n,e,t,s),o=S_(n,e,t,i);return["M",r.x,r.y,"A",t,t,0,0,0,o.x,o.y].join(" ")}(i,s,n,315,45)),u.setAttribute("viewBox","0 0 "+r+" "+r),u.style.transformOrigin=E+" "+E+" "+E,u.style.width=u.style.height=r+"px"}function S_(n,e,t,i){const s=(i-90)*Math.PI/180;return{x:n+t*Math.cos(s),y:e+t*Math.sin(s)}}function Bl(n){MP(n,!1),n=null}function MP(n,e){let t;if(n&&(t=n.classList.contains(eb)?n:n.querySelector("."+eb)),n&&t){const i=t.querySelector("."+g_);let s;if(s=e?!t.classList.contains(eE)&&!t.classList.contains(Jv):!t.classList.contains(eE)&&!t.classList.contains(Qv),s){const r=t.querySelector("svg");if(m(r))return;const o=r.getAttribute("id");switch(fo[o].isAnimate=!e,fo[o].type){case"Material":e?clearTimeout(fo[o].timeOut):function vP(n,e,t){const i={};fo[e].timeOut=0,i[e]=function TP(n,e,t,i){return{radius:e,count:t,previousId:i}}(0,t,0,0),tE({uniqueID:e,container:n,globalInfo:i,timeOutVar:0})}(i,o,fo[o].radius);break;case"Bootstrap":e?clearTimeout(fo[o].timeOut):function eD(n){const t=n.querySelector("svg.e-spin-bootstrap").getAttribute("id");for(let s=1;s<=8;s++)i(n.getElementsByClassName("e-path-circle_"+(8===s?0:s))[0],s,0,IP(s,s),t);function i(s,r,o,a,u){let p=0;!function y(E){fo[u].isAnimate&&(++p,s.setAttribute("r",E+""),p>=a.length&&(p=0),fo[u].timeOut=setTimeout(y.bind(null,a[p]),18))}(r)}}(i)}}e?ua(t,[Jv],[Qv]):ua(t,[Qv],[Jv]),n=null}}function hl(n){MP(n,!0),n=null}function hn(n){return function(e){!function sb(n,e){e.forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(i){(!n.prototype.hasOwnProperty(i)||t.isFormBase)&&(n.prototype[i]=t.prototype[i])})})}(e,n)}}function LP(n,e,t){var i={};if(n&&n.length){for(var s=0,r=n;s<r.length;s++){var o=r[s];!0===t?(e.propCollection[o]=new d.vpe(!1),e[o]=e.propCollection[o]):i[o]=new d.vpe(!1)}!0!==t&&e.setProperties(i,!0)}}function __(n,e,t){var i=Object.keys(n.registeredTemplate);if(i.length)for(var s=e&&e.filter(function(re){return!/\./g.test(re)}),r=0,o=s&&s||i;r<o.length;r++){var a=o[r];if(t&&t.length)for(var u=0;u<t.length;u++)for(var p=0;p<n.registeredTemplate.template.length;p++)n.registeredTemplate.template[p].rootNodes[0]===t[u]&&(E=n.registeredTemplate[a])[p].destroy();else if(n.registeredTemplate[a])for(var _=0,D=n.registeredTemplate[a];_<D.length;_++){var E;if(!(E=D[_]).destroyed){if(E._view){var L=E._view.renderer.parentNode(E.rootNodes[0]);if(!m(L))for(p=0;p<E.rootNodes.length;p++)L.appendChild(E.rootNodes[p])}E.destroy()}}delete n.registeredTemplate[a]}for(var V=function(re){re.instance&&re.instance.clearTemplate(e&&e.filter(function(Ae){return!!new RegExp(re.name).test(Ae)}))},H=0,se=n.tagObjects;H<se.length;H++)V(se[H])}function ys(n,e,t){for(var i=n.replace(/\[/g,".").replace(/\]/g,"").split("."),s=t||{},r=0;r<i.length;r++){var o=i[r];r+1===i.length?s[o]=void 0===e?{}:e:void 0===s[o]&&(s[o]={}),s=s[o]}return s}var RP=/Ref$/,xu=function(){function n(){this.hasChanges=!1,this.propCollection={},this.dataSource={},this.tags=[],this.tagObjects=[]}return n.prototype.ngOnInit=function(){this.registeredTemplate={};for(var e=0,t=this.tags;e<t.length;e++){var i=t[e],s=J("child"+i.substring(0,1).toUpperCase()+i.substring(1),this);s&&this.tagObjects.push({instance:s,name:i})}for(var r=Object.keys(this),o=0;o<r.length;o++){var a=J(r[o],this);"object"==typeof a&&a&&a.elementRef&&(J(-1!==r[o].indexOf("Ref")?r[o]:r[o]+"Ref",this)||pi(-1!==r[o].indexOf("Ref")?r[o]:r[o]+"Ref",a,this),J("viewContainerRef",this)&&!J("_viewContainerRef",a.elementRef.nativeElement)&&!J("propName",a.elementRef.nativeElement)&&(pi("_viewContainerRef",J("viewContainerRef",this),a.elementRef.nativeElement),pi("propName",r[o].replace("Ref",""),a.elementRef.nativeElement)))}for(var u=0,p=r=(r=Object.keys(this)).filter(function(V){return/Ref$/i.test(V)});u<p.length;u++){var E=p[u].replace("Ref","");pi(E.replace("_","."),J(E,this),this.propCollection)}var _=Object.keys(this);if(this.directivePropList){for(var D=0;D<this.directivePropList.length;D++){var L=this.directivePropList[D];-1!==_.indexOf(L)&&J(L,this)&&pi(L,J(L,this),this.propCollection)}this.hasChanges=!0}this.isInitChanges=!0},n.prototype.registerEvents=function(e){LP(e,this,!0)},n.prototype.ngOnChanges=function(e){for(var t=0,i=Object.keys(e);t<i.length;t++){var s=i[t];this.propCollection[s]=e[s].currentValue}this.isUpdated=!1,this.hasChanges=!0},n.prototype.clearTemplate=function(e){__(this,e)},n.prototype.getProperties=function(){for(var e=0,t=this.tagObjects;e<t.length;e++){var i=t[e];this.propCollection[i.name]=i.instance.getProperties()}return this.propCollection},n.prototype.isChanged=function(){var e=this.hasChanges;if(!m(this.propCollection[this.property]))for(var i=Object.keys(this.propCollection[this.property][0]),s=0;s<i.length;s++)if(!m(this.propCollection[i[s]])){var r=J(i[s],this),o=this.propCollection[this.property][0][i[s]];!m(r)&&this.propCollection[i[s]]!==r&&o!==r&&(pi(i[s],r,this.propCollection[this.property][0]),pi(i[s],r,this.propCollection),this.hasChanges=!0,this.isUpdated=!1)}for(var a=0,u=this.tagObjects;a<u.length;a++)e=e||u[a].instance.hasChanges;return e||this.hasChanges},n.prototype.ngAfterContentChecked=function(){if(this.hasChanges=this.isChanged(),this.isInitChanges||this.hasChanges)for(var e=Object.keys(this),t=0,i=e=e.filter(function(o){return RP.test(o)});t<i.length;t++){var r=i[t].replace("Ref","");pi(r.replace("_","."),J(r,this),this.propCollection)}},n.prototype.ngAfterViewChecked=function(){this.isUpdated&&(this.hasChanges=!1)},n.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},n.prototype.ngOnDestroy=function(){this.directivePropList=[]},n}(),Tu=function(){function n(e){this.list=[],this.hasChanges=!1,this.propertyName=e}return n.prototype.ngOnInit=function(){this.isInitChanges=!0},n.prototype.ngAfterContentInit=function(){var e=this,t=0;this.list=this.children.map(function(i){return i.dirIndex=t++,i.property=e.propertyName,i}),this.hasChanges=!0},n.prototype.getProperties=function(){for(var e=[],t=0,i=this.list;t<i.length;t++)e.push(i[t].getProperties());return e},n.prototype.isChanged=function(){var e=this,t=!1,i=0,s=!1,r=this.children.map(function(y){return y});if(this.list.length===this.children.length)for(var o=0;o<this.list.length;o++)this.list[o].propCollection.dataSource&&this.list[o].dataSource&&this.list[o].propCollection.dataSource!==this.list[o].dataSource&&(this.list[o].propCollection.dataSource=this.list[o].dataSource,this.list[o].hasChanges=!0),this.list[o].hasChanges!==r[o].hasChanges&&(s=!0);this.hasNewChildren=!(this.list.length===this.children.length&&!s)||null,this.hasNewChildren&&(this.list=this.children.map(function(y){return y.dirIndex=i++,y.property=e.propertyName,y}));for(var a=0,u=this.list;a<u.length;a++)t=t||u[a].hasChanges;return!!this.list.length&&t},n.prototype.clearTemplate=function(e){for(var t=this,i=0,s=this.list;i<s.length;i++)s[i].clearTemplate(e&&e.map(function(o){return new RegExp(t.propertyName).test(o)?o.replace(t.propertyName+".",""):o}))},n.prototype.ngAfterContentChecked=function(){this.hasChanges=this.isChanged();for(var e=0;e<this.list.length;e++)J("childColumns",this.list[e])&&"columns"===J("property",this.list[e])&&pi("columns",J("childColumns",this.list[e]).getProperties(),this.list[e].propCollection),this.list[e].isUpdated=!0},n.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},n.prototype.ngOnDestroy=function(){this.list=[]},n}(),fi=function(){function n(){this.isProtectedOnChange=!0,this.isFormInit=!0}return n.prototype.saveChanges=function(e,t,i){if(!this.isProtectedOnChange){this.oldProperties[e]=i,this.changedProperties[e]=t,this.finalUpdate();var s=setTimeout(this.dataBind.bind(this));this.finalUpdate=function(){clearTimeout(s)}}},n.prototype.ngOnInit=function(e){var t=e||this;t.registeredTemplate={},t.ngBoundedEvents={},t.isAngular=!0,t.isFormInit=!0,e&&(this.tags=e.tags),t.tags=this.tags||[],t.complexTemplate=this.complexTemplate||[],t.tagObjects=[],t.ngAttr=this.getAngularAttr(t.element),t.createElement=function(V,H){var se=t.srenderer?t.srenderer.createElement(V):Ds(V);return void 0===H||(se.innerHTML=H.innerHTML?H.innerHTML:"",void 0!==H.className&&(se.className=H.className),void 0!==H.id&&(se.id=H.id),void 0!==H.styles&&se.setAttribute("style",H.styles),void 0!==t.ngAttr&&se.setAttribute(t.ngAttr,""),void 0!==H.attrs&&bt(se,H.attrs)),se};for(var i=0,s=t.tags;i<s.length;i++){var r=s[i],o={instance:J("child"+r.substring(0,1).toUpperCase()+r.substring(1),t),name:r};t.tagObjects.push(o)}for(var a=Object.keys(t),u=0;u<a.length;u++){var p=J(a[u],t);"object"==typeof p&&p&&p.elementRef&&("object"==typeof p&&p&&p.elementRef&&-1!==a[u].indexOf("_")&&-1===a[u].indexOf("Ref")&&pi(a[u]+"Ref",p,t),t.viewContainerRef&&!J("_viewContainerRef",p.elementRef.nativeElement)&&!J("propName",p.elementRef.nativeElement)&&(pi("_viewContainerRef",t.viewContainerRef,p.elementRef.nativeElement),pi("propName",a[u].replace("Ref",""),p.elementRef.nativeElement)))}for(var y=0,E=a=(a=Object.keys(t)).filter(function(V){return/Ref$/i.test(V)&&/\_/i.test(V)});y<E.length;y++){var D=E[y].replace("Ref",""),L={};pi(D.replace("_","."),J(D,t),L),t.setProperties(L,!0)}},n.prototype.getAngularAttr=function(e){for(var s,t=e.attributes,i=t.length,r=0;r<i;r++)/_ngcontent/g.test(t[r].name)&&(s=t[r].name);return s},n.prototype.ngAfterViewInit=function(e){var t=e||this;/ejs-tab|ejs-accordion/g.test(t.ngEle.nativeElement.outerHTML)&&(t.ngEle.nativeElement.style.visibility="hidden");for(var s=Object.keys(t),r=0,o=s=s.filter(function(p){return/Ref$/i.test(p)});r<o.length;r++){var u=o[r].replace("Ref","");pi(u.replace("_","."),J(u+"Ref",t),t)}setTimeout(function(){("undefined"!=typeof window&&t.element||t.getModuleName().includes("btn"))&&(t.appendTo(t.element),t.ngEle.nativeElement.style.visibility="")})},n.prototype.ngOnDestroy=function(e){var t=e||this;setTimeout(function(){"undefined"!=typeof window&&t.element.classList.contains("e-control")&&(t.destroy(),t.clearTemplate(null),t.ngBoundedEvents={},t.tagObjects={},t.ngEle=null)})},n.prototype.clearTemplate=function(e,t){__(this,e,t)},n.prototype.ngAfterContentChecked=function(e){for(var t=e||this,i=0,s=t.tagObjects;i<s.length;i++){var r=s[i];if(!Jt(r.instance)&&(r.instance.isInitChanges||r.instance.hasChanges||r.instance.hasNewChildren))if(r.instance.isInitChanges){var o={},a=void 0;(u=J("instance.list",r))&&u.length&&(a=u[0].directivePropList);var p=!0;if(t.getModuleName&&"gantt"===t.getModuleName()&&(p=!1),a&&p&&-1===a.indexOf(r.instance.propertyName))for(var y=Object.keys(r.instance.list[0].propCollection),E=0;E<r.instance.list.length;E++){r.instance.list[E].propCollection[r.instance.propertyName]=[];for(var _={},D=0;D<y.length;D++)_[L=y[D]]=r.instance.list[E].propCollection[L];for(var V=0;V<r.instance.list[E].tags.length;V++){var H=r.instance.list[E].tags[V],se=J("child"+H.substring(0,1).toUpperCase()+H.substring(1),r.instance.list[E]);if(se){var _e=r.instance.list[E]["child"+H.substring(0,1).toUpperCase()+H.substring(1)];if(_e)for(var re=0;re<_e.list.length;re++){var Ae=_e.list[0].tags[0];if(Ae){var gt=J("child"+Ae.substring(0,1).toUpperCase()+Ae.substring(1),_e.list[re]);gt&&_e.list[re].tagObjects.push({instance:gt,name:Ae})}}r.instance.list[E].tagObjects.push({instance:se,name:H})}}r.instance.list[E].propCollection[r.instance.propertyName].push(_)}o[r.name]=r.instance.getProperties(),t.setProperties(o,r.instance.isInitChanges)}else{(t[r.name].length!==r.instance.list.length||/diagram|tab/.test(t.getModuleName()))&&(t[r.name]=r.instance.list);for(var ot=0,ri=r.instance.list;ot<ri.length;ot++){var u,jt=r.instance.list.indexOf(u=ri[ot]),Ai=J(r.name,t)[jt],rr=Object.keys(Ai);if(rr=rr.filter(function(Ce){return/Ref$/i.test(Ce)}),Ai.properties&&0!==Object.keys(Ai.properties).length)for(var mt=0,yt=rr;mt<yt.length;mt++){var L;L=(L=yt[mt]).replace(/Ref/,""),Ai.properties[L]=Ai.properties[L]?Ai.properties[L]:Ai.propCollection[L]}!Jt(Ai)&&!Jt(Ai.setProperties)&&(/diagram|DashboardLayout/.test(t.getModuleName())?Ai.setProperties(u.getProperties(),!0):Ai.setProperties(u.getProperties())),u.isUpdated=!0}}}},n.prototype.registerEvents=function(e){LP(e,this)},n.prototype.twoWaySetter=function(e,t){var i=J(t,this.properties);i!==e&&(this.saveChanges(t,e,i),pi(t,m(e)?null:e,this.properties),J(t+"Change",this).emit(e))},n.prototype.addTwoWay=function(e){for(var t=this,i=function(u){J(u,s),Object.defineProperty(s,u,{get:function(){return J(u,t.properties)},set:function(p){return t.twoWaySetter(p,u)}}),pi(u+"Change",new d.vpe,s)},s=this,r=0,o=e;r<o.length;r++)i(o[r])},n.prototype.addEventListener=function(e,t){var i=J(e,this);Jt(i)||(this.ngBoundedEvents[e]||(this.ngBoundedEvents[e]=new Map),this.ngBoundedEvents[e].set(t,i.subscribe(t)))},n.prototype.removeEventListener=function(e,t){Jt(J(e,this))||this.ngBoundedEvents[e].get(t).unsubscribe()},n.prototype.trigger=function(e,t,i){var s=J(e,this),r=this.isProtectedOnChange;this.isProtectedOnChange=!1,t&&(t.name=e),Jt(s)||s.next(t);var o=J("local"+e.charAt(0).toUpperCase()+e.slice(1),this);Jt(o)||o.call(this,t),this.isProtectedOnChange=r,i&&(this.preventChange=this.isPreventChange,i.call(this,t)),this.isPreventChange=!1},n}(),Vs=function(){function n(){}return n.prototype.propagateChange=function(e){},n.prototype.propagateTouch=function(){},n.prototype.localChange=function(e){var t=void 0===e.checked?e.value:e.checked;this.objCheck=Ed(t),!0===this.isUpdated&&(this.angularValue=this.oldValue),!0===this.objCheck?(this.duplicateValue=JSON.stringify(t),this.duplicateAngularValue=JSON.stringify(this.angularValue),this.duplicateValue!==this.duplicateAngularValue&&void 0!==this.propagateChange&&void 0!==t&&(this.propagateChange(t),this.angularValue=t)):t!==this.angularValue&&void 0!==this.propagateChange&&void 0!==t&&(this.propagateChange(t),this.angularValue=t)},n.prototype.registerOnChange=function(e){this.propagateChange=e},n.prototype.registerOnTouched=function(e){this.propagateTouch=e},n.prototype.twoWaySetter=function(e,t){var i=this.oldValue||J(t,this.properties),s=this.inputElement||this.element;s&&i===e&&this.value===e&&(void 0===s.value||""===s.value)||(this.saveChanges(t,e,i),pi(t,m(e)?null:e,this.properties),J(t+"Change",this).emit(e))},n.prototype.ngAfterViewInit=function(e){var t=e||this;if("undefined"!=typeof window){t.appendTo(t.element);var i=t.inputElement||t.element;i.addEventListener("focus",t.ngOnFocus.bind(t)),i.addEventListener("blur",t.ngOnBlur.bind(t))}this.isFormInit=!1},n.prototype.setDisabledState=function(e){this.enabled=!e,this.disabled=e},n.prototype.writeValue=function(e){void 0===this.checked?this.value=e:this.ngEle&&(this.checked="boolean"==typeof e?/ejs-radiobutton/g.test(this.ngEle.nativeElement.outerHTML)?e===this.value:e:e===this.value),this.angularValue=e,this.isUpdated=!0,this.preventChange=!this.isFormInit},n.prototype.ngOnFocus=function(e){!0!==this.skipFromEvent&&this.focus.emit(e)},n.prototype.ngOnBlur=function(e){this.propagateTouch(),!0!==this.skipFromEvent&&this.blur.emit(e)},n.isFormBase=!0,n}(),rE=function VM(){return lA.compile}();function Ni(n){return function(e,t){var i={set:nD(t),get:rD(t,n),enumerable:!0,configurable:!0};Object.defineProperty(e,t,i)}}function nD(n){return function(e){void 0!==e&&(pi(n+"Ref",e,this),"string"!=typeof e?(e.elementRef.nativeElement._viewContainerRef=this.viewContainerRef,e.elementRef.nativeElement.propName=n):this.saveChanges&&(this.saveChanges(n,e,void 0),this.dataBind()))}}function rD(n,e){return function(){return J(n+"Ref",this)||e}}!function aA(n){lA.compile=n.compile}({compile:function nb(n,e){if("string"==typeof n)return rE(n,e);var t=n.elementRef.nativeElement._viewContainerRef,i=n.elementRef.nativeElement.propName;return function(s,r,o){var u=t||r.viewContainerRef,p=u.createEmbeddedView(n,{$implicit:s});p.markForCheck();var y=r&&r.registeredTemplate?r.registeredTemplate:J("currentInstance.registeredTemplate",u);return void 0===y[o=o&&r.registeredTemplate?o:i]&&(y[o]=[]),y[o].push(p),p.rootNodes}}});class Fi{constructor(e){return this.subQuery=null,this.isChild=!1,this.distincts=[],this.queries=[],this.key="",this.fKey="","string"==typeof e?this.fromTable=e:e&&e instanceof Array&&(this.lookups=e),this.expands=[],this.sortedColumns=[],this.groupedColumns=[],this.subQuery=null,this.isChild=!1,this.params=[],this.lazyLoad=[],this}setKey(e){return this.key=e,this}using(e){return this.dataManager=e,this}execute(e,t,i,s){return(e=e||this.dataManager)?e.executeQuery(this,t,i,s):je.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument')}executeLocal(e){return(e=e||this.dataManager)?e.executeLocal(this):je.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument')}clone(){let e=new Fi;return e.queries=this.queries.slice(0),e.key=this.key,e.isChild=this.isChild,e.dataManager=this.dataManager,e.fromTable=this.fromTable,e.params=this.params.slice(0),e.expands=this.expands.slice(0),e.sortedColumns=this.sortedColumns.slice(0),e.groupedColumns=this.groupedColumns.slice(0),e.subQuerySelector=this.subQuerySelector,e.subQuery=this.subQuery,e.fKey=this.fKey,e.isCountRequired=this.isCountRequired,e.distincts=this.distincts.slice(0),e.lazyLoad=this.lazyLoad.slice(0),e}from(e){return this.fromTable=e,this}addParams(e,t){return this.params.push("function"==typeof t?{key:e,fn:t}:{key:e,value:t}),this}distinct(e){return this.distincts="string"==typeof e?[].slice.call([e],0):e.slice(0),this}expand(e){return this.expands="string"==typeof e?[].slice.call([e],0):e.slice(0),this}where(e,t,i,s,r){t=t?t.toLowerCase():null;let o=null;return"string"==typeof e?o=new un(e,t,i,s,r):e instanceof un&&(o=e),this.queries.push({fn:"onWhere",e:o}),this}search(e,t,i,s,r){return"string"==typeof t&&(t=[t]),(!i||"none"===i)&&(i="contains"),this.queries.push({fn:"onSearch",e:{fieldNames:t,operator:i,searchKey:e,ignoreCase:s,ignoreAccent:r,comparer:je.fnOperators[i]}}),this}sortBy(e,t,i){return this.sortByForeignKey(e,t,i)}sortByForeignKey(e,t,i,s){let o,a,r=m(s)?"ascending":s;if("string"==typeof e&&je.endsWith(e.toLowerCase()," desc")&&(e=e.replace(/ desc$/i,""),t="descending"),(!t||"string"==typeof t)&&(r=t?t.toLowerCase():"ascending",t=je.fnSort(t)),i){o=Fi.filterQueries(this.queries,"onSortBy");for(let u=0;u<o.length;u++)if(a=o[u].e.fieldName,"string"==typeof a){if(a===e)return this}else if(a instanceof Array)for(let p=0;p<a.length;p++)if(a[p]===e||e.toLowerCase()===a[p]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:e,comparer:t,direction:r}}),this}sortByDesc(e){return this.sortBy(e,"descending")}group(e,t,i){return this.sortBy(e,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:e,comparer:t||null,format:i||null}}),this}page(e,t){return this.queries.push({fn:"onPage",e:{pageIndex:e,pageSize:t}}),this}range(e,t){return this.queries.push({fn:"onRange",e:{start:e,end:t}}),this}take(e){return this.queries.push({fn:"onTake",e:{nos:e}}),this}skip(e){return this.queries.push({fn:"onSkip",e:{nos:e}}),this}select(e){return"string"==typeof e&&(e=[].slice.call([e],0)),this.queries.push({fn:"onSelect",e:{fieldNames:e}}),this}hierarchy(e,t){return this.subQuerySelector=t,this.subQuery=e,this}foreignKey(e){return this.fKey=e,this}requiresCount(){return this.isCountRequired=!0,this}aggregate(e,t){return this.queries.push({fn:"onAggregates",e:{field:t,type:e}}),this}static filterQueries(e,t){return e.filter(i=>i.fn===t)}static filterQueryLists(e,t){let i=e.filter(r=>-1!==t.indexOf(r.fn)),s={};for(let r=0;r<i.length;r++)s[i[r].fn]||(s[i[r].fn]=i[r].e);return s}}class un{constructor(e,t,i,s=!1,r){return this.ignoreAccent=!1,this.isComplex=!1,"string"==typeof e?(this.field=e,this.operator=t.toLowerCase(),this.value=i,this.ignoreCase=s,this.ignoreAccent=r,this.isComplex=!1,this.comparer=je.fnOperators.processOperator(this.operator)):(e instanceof un&&i instanceof un||i instanceof Array)&&(this.isComplex=!0,this.condition=t.toLowerCase(),this.predicates=[e],i instanceof Array?[].push.apply(this.predicates,i):this.predicates.push(i)),this}static and(...e){return un.combinePredicates([].slice.call(e,0),"and")}and(e,t,i,s,r){return un.combine(this,e,t,i,"and",s,r)}static or(...e){return un.combinePredicates([].slice.call(e,0),"or")}or(e,t,i,s,r){return un.combine(this,e,t,i,"or",s,r)}static fromJson(e){if(e instanceof Array){let i=[];for(let s=0,r=e.length;s<r;s++)i.push(this.fromJSONData(e[s]));return i}return this.fromJSONData(e)}validate(e){let i,s,t=this.predicates?this.predicates:[];if(!this.isComplex&&this.comparer)return this.comparer.call(this,je.getObject(this.field,e),this.value,this.ignoreCase,this.ignoreAccent);i="and"===this.condition;for(let r=0;r<t.length;r++)if(s=t[r].validate(e),i){if(!s)return!1}else if(s)return!0;return i}toJson(){let e,t;if(this.isComplex){e=[],t=this.predicates;for(let i=0;i<t.length;i++)e.push(t[i].toJson())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:e}}static combinePredicates(e,t){if(1===e.length){if(!(e[0]instanceof Array))return e[0];e=e[0]}return new un(e[0],t,e.slice(1))}static combine(e,t,i,s,r,o,a){return t instanceof un?un[r](e,t):"string"==typeof t?un[r](e,new un(t,i,s,o,a)):je.throwError("Predicate - "+r+" : invalid arguments")}static fromJSONData(e){let r,t=e.predicates||[],i=t.length,s=[];for(let o=0;o<i;o++)s.push(this.fromJSONData(t[o]));return r=e.isComplex?new un(s[0],e.condition,s.slice(1)):new un(e.field,e.operator,e.value,e.ignoreCase,e.ignoreAccent),r}}const oD={GroupGuid:"{271bbba0-1ee7}"};let je=(()=>{class n{static getValue(t,i){return"function"==typeof t?t.call(i||{}):t}static endsWith(t,i){return t.slice&&t.slice(-i.length)===i}static startsWith(t,i){return t.slice(0,i.length)===i}static fnSort(t){return"ascending"===(t=t?n.toLowerCase(t):"ascending")?this.fnAscending:this.fnDescending}static fnAscending(t,i){return m(t)&&m(i)||null==i?-1:"string"==typeof t?t.localeCompare(i):null==t?1:t-i}static fnDescending(t,i){return m(t)&&m(i)?-1:null==i?1:"string"==typeof t?-1*t.localeCompare(i):null==t?-1:i-t}static extractFields(t,i){let s={};for(let r=0;r<i.length;r++)s=this.setValue(i[r],this.getObject(i[r],t),s);return s}static select(t,i){let s=[];for(let r=0;r<t.length;r++)s.push(this.extractFields(t[r],i));return s}static group(t,i,s,r,o,a,u){r=r||1;let p=t,y="GroupGuid";if(p.GroupGuid===oD[y]){for(let D=0;D<p.length;D++)if(m(o))p[D].items=this.group(p[D].items,i,s,p.level+1,null,a,u),p[D].count=p[D].items.length;else{let L=-1,V=o.filter(H=>H.key===p[D].key);L=o.indexOf(V[0]),p[D].items=this.group(p[D].items,i,s,p.level+1,o[L].items,a,u),p[D].count=o[L].count}return p.childLevels+=1,p}let E={},_=[];_.GroupGuid=oD[y],_.level=r,_.childLevels=0,_.records=p;for(let D=0;D<p.length;D++){let L=this.getVal(p,D,i);if(m(a)||(L=a(L,i)),!E[L]&&(E[L]={key:L,count:0,items:[],aggregates:{},field:i},_.push(E[L]),!m(o))){let V=o.filter(H=>H.key===E[L].key);E[L].count=V[0].count}E[L].count=m(o)?E[L].count+=1:E[L].count,(!u||u&&s.length)&&E[L].items.push(p[D])}if(s&&s.length)for(let D=0;D<_.length;D++){let V,L={},H=s;for(let se=0;se<s.length;se++)if(V=n.aggregates[s[se].type],m(o))V&&(L[H[se].field+" - "+H[se].type]=V(_[D].items,H[se].field));else{let _e=o.filter(re=>re.key===_[D].key);V&&(L[H[se].field+" - "+H[se].type]=V(_e[0].items,H[se].field))}_[D].aggregates=L}if(u&&_.length&&s.length)for(let D=0;D<_.length;D++)_[D].items=[];return p.length&&_||p}static buildHierarchy(t,i,s,r,o){let a,p,u={};for(r.result&&(r=r.result),r.GroupGuid&&this.throwError("DataManager: Do not have support Grouping in hierarchy"),a=0;a<r.length;a++){let y=this.getObject(t,r[a]);p=u[y]||(u[y]=[]),p.push(r[a])}for(a=0;a<s.length;a++){let y=this.getObject(o||t,s[a]);s[a][i]=u[y]}}static getFieldList(t,i,s){if(void 0===s&&(s=""),null==i)return this.getFieldList(t,[],s);let r=t,o=Object.keys(t);for(let a of o)"object"!=typeof r[a]||r[a]instanceof Array?i.push(s+a):this.getFieldList(r[a],i,s+a+".");return i}static getObject(t,i){if(!t)return i;if(!i)return;if(-1===t.indexOf("."))return i[t];let s=i,r=t.split(".");for(let o=0;o<r.length&&null!=s;o++)s=s[r[o]];return s}static setValue(t,i,s){let u,y,r=t.toString().split("."),o=s||{},a=o,p=r.length;for(u=0;u<p;u++)y=r[u],u+1===p?a[y]=void 0===i?void 0:i:m(a[y])&&(a[y]={}),a=a[y];return o}static sort(t,i,s){if(t.length<=1)return t;let r=parseInt((t.length/2).toString(),10),o=t.slice(0,r),a=t.slice(r);return o=this.sort(o,i,s),a=this.sort(a,i,s),this.merge(o,a,i,s)}static ignoreDiacritics(t){return"string"!=typeof t?t:t.split("").map(r=>r in n.diacritics?n.diacritics[r]:r).join("")}static merge(t,i,s,r){let a,o=[];for(;t.length>0||i.length>0;)a=t.length>0&&i.length>0?r?r(this.getVal(t,0,s),this.getVal(i,0,s),t[0],i[0])<=0?t:i:t[0][s]<t[0][s]?t:i:t.length>0?t:i,o.push(a.shift());return o}static getVal(t,i,s){return s?this.getObject(s,t[i]):t[i]}static toLowerCase(t){return t?"string"==typeof t?t.toLowerCase():t.toString():0===t||!1===t?t.toString():""}static callAdaptorFunction(t,i,s,r){if(i in t){let o=t[i](s,r);m(o)||(s=o)}return s}static getAddParams(t,i,s){let r={};return n.callAdaptorFunction(t,"addParams",{dm:i,query:s,params:s.params,reqParams:r}),r}static isPlainObject(t){return!!t&&t.constructor===Object}static isCors(){let t=null;try{t=new window.XMLHttpRequest}catch(s){}return!!t&&"withCredentials"in t}static getGuid(t){let s;return(t||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,(r,o)=>{if("crypto"in window&&"getRandomValues"in crypto){let a=new Uint8Array(1);window.crypto.getRandomValues(a),s=a[0]%16|0}else s=16*Math.random()|0;return"0123456789abcdef"[19===o?3&s|8:s]})}static isNull(t){return null==t}static getItemFromComparer(t,i,s){let r,o,a,u=0,p="string"==typeof n.getVal(t,0,i);if(t.length)for(;m(r)&&u<t.length;)r=n.getVal(t,u,i),a=t[u++];for(;u<t.length;u++)o=n.getVal(t,u,i),!m(o)&&(p&&(r=+r,o=+o),s(r,o)>0&&(r=o,a=t[u]));return a}static distinct(t,i,s){s=!m(s)&&s;let o,r=[],a={};return t.forEach((u,p)=>{o="object"==typeof t[p]?n.getVal(t,p,i):t[p],o in a||(r.push(s?t[p]:o),a[o]=1)}),r}static processData(t,i){let s=this.prepareQuery(t),r=new Nt(i);t.requiresCounts&&s.requiresCount();let o=r.executeLocal(s),a={result:t.requiresCounts?o.result:o,count:o.count,aggregates:JSON.stringify(o.aggregates)};return t.requiresCounts?a:o}static prepareQuery(t){let i=new Fi;return t.select&&i.select(t.select),t.where&&n.parse.parseJson(t.where).filter(r=>{if(m(r.condition))i.where(r.field,r.operator,r.value,r.ignoreCase,r.ignoreAccent);else{let o=[];r.field?o.push(new un(r.field,r.operator,r.value,r.ignoreCase,r.ignoreAccent)):o=o.concat(this.getPredicate(r.predicates)),"or"==r.condition?i.where(un.or(o)):"and"==r.condition&&i.where(un.and(o))}}),t.search&&n.parse.parseJson(t.search).filter(r=>i.search(r.key,r.fields,r.operator,r.ignoreCase,r.ignoreAccent)),t.aggregates&&t.aggregates.filter(s=>i.aggregate(s.type,s.field)),t.sorted&&t.sorted.filter(s=>i.sortBy(s.name,s.direction)),t.skip&&i.skip(t.skip),t.take&&i.take(t.take),t.group&&t.group.filter(s=>i.group(s)),i}static getPredicate(t){let i=[];for(let s=0;s<t.length;s++){let r=t[s];if(r.field)i.push(new un(r.field,r.operator,r.value,r.ignoreCase,r.ignoreAccent));else{let o=[],a=this.getPredicate(r.predicates);for(const u of Object.keys(a))o.push(a[u]);i.push("or"==r.condition?un.or(o):un.and(o))}}return i}}return n.serverTimezoneOffset=null,n.timeZoneHandling=!0,n.throwError=e=>{try{throw new Error(e)}catch(t){throw t.message+"\n"+t.stack}},n.aggregates={sum:(e,t)=>{let s,i=0,r="number"!=typeof n.getVal(e,0,t);for(let o=0;o<e.length;o++)s=n.getVal(e,o,t),!isNaN(s)&&null!==s&&(r&&(s=+s),i+=s);return i},average:(e,t)=>n.aggregates.sum(e,t)/e.length,min:(e,t)=>{let i;return"function"==typeof t&&(i=t,t=null),n.getObject(t,n.getItemFromComparer(e,t,i||n.fnAscending))},max:(e,t)=>{let i;return"function"==typeof t&&(i=t,t=null),n.getObject(t,n.getItemFromComparer(e,t,i||n.fnDescending))},truecount:(e,t)=>new Nt(e).executeLocal((new Fi).where(t,"equal",!0,!0)).length,falsecount:(e,t)=>new Nt(e).executeLocal((new Fi).where(t,"equal",!1,!0)).length,count:(e,t)=>e.length},n.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},n.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},n.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof"},n.odv4UniOperator={"$=":"endswith","^=":"startswith","*=":"contains",endswith:"endswith",startswith:"startswith",contains:"contains"},n.diacritics={"\u24b6":"A",\uff21:"A",\u00c0:"A",\u00c1:"A",\u00c2:"A",\u1ea6:"A",\u1ea4:"A",\u1eaa:"A",\u1ea8:"A",\u00c3:"A",\u0100:"A",\u0102:"A",\u1eb0:"A",\u1eae:"A",\u1eb4:"A",\u1eb2:"A",\u0226:"A",\u01e0:"A",\u00c4:"A",\u01de:"A",\u1ea2:"A",\u00c5:"A",\u01fa:"A",\u01cd:"A",\u0200:"A",\u0202:"A",\u1ea0:"A",\u1eac:"A",\u1eb6:"A",\u1e00:"A",\u0104:"A",\u023a:"A",\u2c6f:"A",\ua732:"AA",\u00c6:"AE",\u01fc:"AE",\u01e2:"AE",\ua734:"AO",\ua736:"AU",\ua738:"AV",\ua73a:"AV",\ua73c:"AY","\u24b7":"B",\uff22:"B",\u1e02:"B",\u1e04:"B",\u1e06:"B",\u0243:"B",\u0182:"B",\u0181:"B","\u24b8":"C",\uff23:"C",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u00c7:"C",\u1e08:"C",\u0187:"C",\u023b:"C",\ua73e:"C","\u24b9":"D",\uff24:"D",\u1e0a:"D",\u010e:"D",\u1e0c:"D",\u1e10:"D",\u1e12:"D",\u1e0e:"D",\u0110:"D",\u018b:"D",\u018a:"D",\u0189:"D",\ua779:"D",\u01f1:"DZ",\u01c4:"DZ",\u01f2:"Dz",\u01c5:"Dz","\u24ba":"E",\uff25:"E",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u1ec0:"E",\u1ebe:"E",\u1ec4:"E",\u1ec2:"E",\u1ebc:"E",\u0112:"E",\u1e14:"E",\u1e16:"E",\u0114:"E",\u0116:"E",\u00cb:"E",\u1eba:"E",\u011a:"E",\u0204:"E",\u0206:"E",\u1eb8:"E",\u1ec6:"E",\u0228:"E",\u1e1c:"E",\u0118:"E",\u1e18:"E",\u1e1a:"E",\u0190:"E",\u018e:"E","\u24bb":"F",\uff26:"F",\u1e1e:"F",\u0191:"F",\ua77b:"F","\u24bc":"G",\uff27:"G",\u01f4:"G",\u011c:"G",\u1e20:"G",\u011e:"G",\u0120:"G",\u01e6:"G",\u0122:"G",\u01e4:"G",\u0193:"G",\ua7a0:"G",\ua77d:"G",\ua77e:"G","\u24bd":"H",\uff28:"H",\u0124:"H",\u1e22:"H",\u1e26:"H",\u021e:"H",\u1e24:"H",\u1e28:"H",\u1e2a:"H",\u0126:"H",\u2c67:"H",\u2c75:"H",\ua78d:"H","\u24be":"I",\uff29:"I",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u0128:"I",\u012a:"I",\u012c:"I",\u0130:"I",\u00cf:"I",\u1e2e:"I",\u1ec8:"I",\u01cf:"I",\u0208:"I",\u020a:"I",\u1eca:"I",\u012e:"I",\u1e2c:"I",\u0197:"I","\u24bf":"J",\uff2a:"J",\u0134:"J",\u0248:"J","\u24c0":"K",\uff2b:"K",\u1e30:"K",\u01e8:"K",\u1e32:"K",\u0136:"K",\u1e34:"K",\u0198:"K",\u2c69:"K",\ua740:"K",\ua742:"K",\ua744:"K",\ua7a2:"K","\u24c1":"L",\uff2c:"L",\u013f:"L",\u0139:"L",\u013d:"L",\u1e36:"L",\u1e38:"L",\u013b:"L",\u1e3c:"L",\u1e3a:"L",\u0141:"L",\u023d:"L",\u2c62:"L",\u2c60:"L",\ua748:"L",\ua746:"L",\ua780:"L",\u01c7:"LJ",\u01c8:"Lj","\u24c2":"M",\uff2d:"M",\u1e3e:"M",\u1e40:"M",\u1e42:"M",\u2c6e:"M",\u019c:"M","\u24c3":"N",\uff2e:"N",\u01f8:"N",\u0143:"N",\u00d1:"N",\u1e44:"N",\u0147:"N",\u1e46:"N",\u0145:"N",\u1e4a:"N",\u1e48:"N",\u0220:"N",\u019d:"N",\ua790:"N",\ua7a4:"N",\u01ca:"NJ",\u01cb:"Nj","\u24c4":"O",\uff2f:"O",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u1ed2:"O",\u1ed0:"O",\u1ed6:"O",\u1ed4:"O",\u00d5:"O",\u1e4c:"O",\u022c:"O",\u1e4e:"O",\u014c:"O",\u1e50:"O",\u1e52:"O",\u014e:"O",\u022e:"O",\u0230:"O",\u00d6:"O",\u022a:"O",\u1ece:"O",\u0150:"O",\u01d1:"O",\u020c:"O",\u020e:"O",\u01a0:"O",\u1edc:"O",\u1eda:"O",\u1ee0:"O",\u1ede:"O",\u1ee2:"O",\u1ecc:"O",\u1ed8:"O",\u01ea:"O",\u01ec:"O",\u00d8:"O",\u01fe:"O",\u0186:"O",\u019f:"O",\ua74a:"O",\ua74c:"O",\u01a2:"OI",\ua74e:"OO",\u0222:"OU","\u24c5":"P",\uff30:"P",\u1e54:"P",\u1e56:"P",\u01a4:"P",\u2c63:"P",\ua750:"P",\ua752:"P",\ua754:"P","\u24c6":"Q",\uff31:"Q",\ua756:"Q",\ua758:"Q",\u024a:"Q","\u24c7":"R",\uff32:"R",\u0154:"R",\u1e58:"R",\u0158:"R",\u0210:"R",\u0212:"R",\u1e5a:"R",\u1e5c:"R",\u0156:"R",\u1e5e:"R",\u024c:"R",\u2c64:"R",\ua75a:"R",\ua7a6:"R",\ua782:"R","\u24c8":"S",\uff33:"S",\u1e9e:"S",\u015a:"S",\u1e64:"S",\u015c:"S",\u1e60:"S",\u0160:"S",\u1e66:"S",\u1e62:"S",\u1e68:"S",\u0218:"S",\u015e:"S",\u2c7e:"S",\ua7a8:"S",\ua784:"S","\u24c9":"T",\uff34:"T",\u1e6a:"T",\u0164:"T",\u1e6c:"T",\u021a:"T",\u0162:"T",\u1e70:"T",\u1e6e:"T",\u0166:"T",\u01ac:"T",\u01ae:"T",\u023e:"T",\ua786:"T",\ua728:"TZ","\u24ca":"U",\uff35:"U",\u00d9:"U",\u00da:"U",\u00db:"U",\u0168:"U",\u1e78:"U",\u016a:"U",\u1e7a:"U",\u016c:"U",\u00dc:"U",\u01db:"U",\u01d7:"U",\u01d5:"U",\u01d9:"U",\u1ee6:"U",\u016e:"U",\u0170:"U",\u01d3:"U",\u0214:"U",\u0216:"U",\u01af:"U",\u1eea:"U",\u1ee8:"U",\u1eee:"U",\u1eec:"U",\u1ef0:"U",\u1ee4:"U",\u1e72:"U",\u0172:"U",\u1e76:"U",\u1e74:"U",\u0244:"U","\u24cb":"V",\uff36:"V",\u1e7c:"V",\u1e7e:"V",\u01b2:"V",\ua75e:"V",\u0245:"V",\ua760:"VY","\u24cc":"W",\uff37:"W",\u1e80:"W",\u1e82:"W",\u0174:"W",\u1e86:"W",\u1e84:"W",\u1e88:"W",\u2c72:"W","\u24cd":"X",\uff38:"X",\u1e8a:"X",\u1e8c:"X","\u24ce":"Y",\uff39:"Y",\u1ef2:"Y",\u00dd:"Y",\u0176:"Y",\u1ef8:"Y",\u0232:"Y",\u1e8e:"Y",\u0178:"Y",\u1ef6:"Y",\u1ef4:"Y",\u01b3:"Y",\u024e:"Y",\u1efe:"Y","\u24cf":"Z",\uff3a:"Z",\u0179:"Z",\u1e90:"Z",\u017b:"Z",\u017d:"Z",\u1e92:"Z",\u1e94:"Z",\u01b5:"Z",\u0224:"Z",\u2c7f:"Z",\u2c6b:"Z",\ua762:"Z","\u24d0":"a",\uff41:"a",\u1e9a:"a",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u1ea7:"a",\u1ea5:"a",\u1eab:"a",\u1ea9:"a",\u00e3:"a",\u0101:"a",\u0103:"a",\u1eb1:"a",\u1eaf:"a",\u1eb5:"a",\u1eb3:"a",\u0227:"a",\u01e1:"a",\u00e4:"a",\u01df:"a",\u1ea3:"a",\u00e5:"a",\u01fb:"a",\u01ce:"a",\u0201:"a",\u0203:"a",\u1ea1:"a",\u1ead:"a",\u1eb7:"a",\u1e01:"a",\u0105:"a",\u2c65:"a",\u0250:"a",\ua733:"aa",\u00e6:"ae",\u01fd:"ae",\u01e3:"ae",\ua735:"ao",\ua737:"au",\ua739:"av",\ua73b:"av",\ua73d:"ay","\u24d1":"b",\uff42:"b",\u1e03:"b",\u1e05:"b",\u1e07:"b",\u0180:"b",\u0183:"b",\u0253:"b","\u24d2":"c",\uff43:"c",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u00e7:"c",\u1e09:"c",\u0188:"c",\u023c:"c",\ua73f:"c",\u2184:"c","\u24d3":"d",\uff44:"d",\u1e0b:"d",\u010f:"d",\u1e0d:"d",\u1e11:"d",\u1e13:"d",\u1e0f:"d",\u0111:"d",\u018c:"d",\u0256:"d",\u0257:"d",\ua77a:"d",\u01f3:"dz",\u01c6:"dz","\u24d4":"e",\uff45:"e",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u1ec1:"e",\u1ebf:"e",\u1ec5:"e",\u1ec3:"e",\u1ebd:"e",\u0113:"e",\u1e15:"e",\u1e17:"e",\u0115:"e",\u0117:"e",\u00eb:"e",\u1ebb:"e",\u011b:"e",\u0205:"e",\u0207:"e",\u1eb9:"e",\u1ec7:"e",\u0229:"e",\u1e1d:"e",\u0119:"e",\u1e19:"e",\u1e1b:"e",\u0247:"e",\u025b:"e",\u01dd:"e","\u24d5":"f",\uff46:"f",\u1e1f:"f",\u0192:"f",\ua77c:"f","\u24d6":"g",\uff47:"g",\u01f5:"g",\u011d:"g",\u1e21:"g",\u011f:"g",\u0121:"g",\u01e7:"g",\u0123:"g",\u01e5:"g",\u0260:"g",\ua7a1:"g",\u1d79:"g",\ua77f:"g","\u24d7":"h",\uff48:"h",\u0125:"h",\u1e23:"h",\u1e27:"h",\u021f:"h",\u1e25:"h",\u1e29:"h",\u1e2b:"h",\u1e96:"h",\u0127:"h",\u2c68:"h",\u2c76:"h",\u0265:"h",\u0195:"hv","\u24d8":"i",\uff49:"i",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u0129:"i",\u012b:"i",\u012d:"i",\u00ef:"i",\u1e2f:"i",\u1ec9:"i",\u01d0:"i",\u0209:"i",\u020b:"i",\u1ecb:"i",\u012f:"i",\u1e2d:"i",\u0268:"i",\u0131:"i","\u24d9":"j",\uff4a:"j",\u0135:"j",\u01f0:"j",\u0249:"j","\u24da":"k",\uff4b:"k",\u1e31:"k",\u01e9:"k",\u1e33:"k",\u0137:"k",\u1e35:"k",\u0199:"k",\u2c6a:"k",\ua741:"k",\ua743:"k",\ua745:"k",\ua7a3:"k","\u24db":"l",\uff4c:"l",\u0140:"l",\u013a:"l",\u013e:"l",\u1e37:"l",\u1e39:"l",\u013c:"l",\u1e3d:"l",\u1e3b:"l",\u017f:"l",\u0142:"l",\u019a:"l",\u026b:"l",\u2c61:"l",\ua749:"l",\ua781:"l",\ua747:"l",\u01c9:"lj","\u24dc":"m",\uff4d:"m",\u1e3f:"m",\u1e41:"m",\u1e43:"m",\u0271:"m",\u026f:"m","\u24dd":"n",\uff4e:"n",\u01f9:"n",\u0144:"n",\u00f1:"n",\u1e45:"n",\u0148:"n",\u1e47:"n",\u0146:"n",\u1e4b:"n",\u1e49:"n",\u019e:"n",\u0272:"n",\u0149:"n",\ua791:"n",\ua7a5:"n",\u01cc:"nj","\u24de":"o",\uff4f:"o",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u1ed3:"o",\u1ed1:"o",\u1ed7:"o",\u1ed5:"o",\u00f5:"o",\u1e4d:"o",\u022d:"o",\u1e4f:"o",\u014d:"o",\u1e51:"o",\u1e53:"o",\u014f:"o",\u022f:"o",\u0231:"o",\u00f6:"o",\u022b:"o",\u1ecf:"o",\u0151:"o",\u01d2:"o",\u020d:"o",\u020f:"o",\u01a1:"o",\u1edd:"o",\u1edb:"o",\u1ee1:"o",\u1edf:"o",\u1ee3:"o",\u1ecd:"o",\u1ed9:"o",\u01eb:"o",\u01ed:"o",\u00f8:"o",\u01ff:"o",\u0254:"o",\ua74b:"o",\ua74d:"o",\u0275:"o",\u01a3:"oi",\u0223:"ou",\ua74f:"oo","\u24df":"p",\uff50:"p",\u1e55:"p",\u1e57:"p",\u01a5:"p",\u1d7d:"p",\ua751:"p",\ua753:"p",\ua755:"p","\u24e0":"q",\uff51:"q",\u024b:"q",\ua757:"q",\ua759:"q","\u24e1":"r",\uff52:"r",\u0155:"r",\u1e59:"r",\u0159:"r",\u0211:"r",\u0213:"r",\u1e5b:"r",\u1e5d:"r",\u0157:"r",\u1e5f:"r",\u024d:"r",\u027d:"r",\ua75b:"r",\ua7a7:"r",\ua783:"r","\u24e2":"s",\uff53:"s",\u00df:"s",\u015b:"s",\u1e65:"s",\u015d:"s",\u1e61:"s",\u0161:"s",\u1e67:"s",\u1e63:"s",\u1e69:"s",\u0219:"s",\u015f:"s",\u023f:"s",\ua7a9:"s",\ua785:"s",\u1e9b:"s","\u24e3":"t",\uff54:"t",\u1e6b:"t",\u1e97:"t",\u0165:"t",\u1e6d:"t",\u021b:"t",\u0163:"t",\u1e71:"t",\u1e6f:"t",\u0167:"t",\u01ad:"t",\u0288:"t",\u2c66:"t",\ua787:"t",\ua729:"tz","\u24e4":"u",\uff55:"u",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u0169:"u",\u1e79:"u",\u016b:"u",\u1e7b:"u",\u016d:"u",\u00fc:"u",\u01dc:"u",\u01d8:"u",\u01d6:"u",\u01da:"u",\u1ee7:"u",\u016f:"u",\u0171:"u",\u01d4:"u",\u0215:"u",\u0217:"u",\u01b0:"u",\u1eeb:"u",\u1ee9:"u",\u1eef:"u",\u1eed:"u",\u1ef1:"u",\u1ee5:"u",\u1e73:"u",\u0173:"u",\u1e77:"u",\u1e75:"u",\u0289:"u","\u24e5":"v",\uff56:"v",\u1e7d:"v",\u1e7f:"v",\u028b:"v",\ua75f:"v",\u028c:"v",\ua761:"vy","\u24e6":"w",\uff57:"w",\u1e81:"w",\u1e83:"w",\u0175:"w",\u1e87:"w",\u1e85:"w",\u1e98:"w",\u1e89:"w",\u2c73:"w","\u24e7":"x",\uff58:"x",\u1e8b:"x",\u1e8d:"x","\u24e8":"y",\uff59:"y",\u1ef3:"y",\u00fd:"y",\u0177:"y",\u1ef9:"y",\u0233:"y",\u1e8f:"y",\u00ff:"y",\u1ef7:"y",\u1e99:"y",\u1ef5:"y",\u01b4:"y",\u024f:"y",\u1eff:"y","\u24e9":"z",\uff5a:"z",\u017a:"z",\u1e91:"z",\u017c:"z",\u017e:"z",\u1e93:"z",\u1e95:"z",\u01b6:"z",\u0225:"z",\u0240:"z",\u2c6c:"z",\ua763:"z",\u0386:"\u0391",\u0388:"\u0395",\u0389:"\u0397",\u038a:"\u0399",\u03aa:"\u0399",\u038c:"\u039f",\u038e:"\u03a5",\u03ab:"\u03a5",\u038f:"\u03a9",\u03ac:"\u03b1",\u03ad:"\u03b5",\u03ae:"\u03b7",\u03af:"\u03b9",\u03ca:"\u03b9",\u0390:"\u03b9",\u03cc:"\u03bf",\u03cd:"\u03c5",\u03cb:"\u03c5",\u03b0:"\u03c5",\u03c9:"\u03c9",\u03c2:"\u03c3"},n.fnOperators={equal:(e,t,i,s)=>(s&&(e=n.ignoreDiacritics(e),t=n.ignoreDiacritics(t)),i?n.toLowerCase(e)===n.toLowerCase(t):e===t),notequal:(e,t,i,s)=>(s&&(e=n.ignoreDiacritics(e),t=n.ignoreDiacritics(t)),!n.fnOperators.equal(e,t,i)),lessthan:(e,t,i)=>i?n.toLowerCase(e)<n.toLowerCase(t):(m(e)&&(e=void 0),e<t),greaterthan:(e,t,i)=>i?n.toLowerCase(e)>n.toLowerCase(t):e>t,lessthanorequal:(e,t,i)=>i?n.toLowerCase(e)<=n.toLowerCase(t):(m(e)&&(e=void 0),e<=t),greaterthanorequal:(e,t,i)=>i?n.toLowerCase(e)>=n.toLowerCase(t):e>=t,contains:(e,t,i,s)=>(s&&(e=n.ignoreDiacritics(e),t=n.ignoreDiacritics(t)),i?!m(e)&&!m(t)&&-1!==n.toLowerCase(e).indexOf(n.toLowerCase(t)):!m(e)&&!m(t)&&-1!==e.toString().indexOf(t)),notnull:e=>null!==e,isnull:e=>null===e,startswith:(e,t,i,s)=>(s&&(e=n.ignoreDiacritics(e),t=n.ignoreDiacritics(t)),i?e&&t&&n.startsWith(n.toLowerCase(e),n.toLowerCase(t)):e&&t&&n.startsWith(e,t)),endswith:(e,t,i,s)=>(s&&(e=n.ignoreDiacritics(e),t=n.ignoreDiacritics(t)),i?e&&t&&n.endsWith(n.toLowerCase(e),n.toLowerCase(t)):e&&t&&n.endsWith(e,t)),processSymbols:e=>{let t=n.operatorSymbols[e];return t?n.fnOperators[t]:n.throwError("Query - Process Operator : Invalid operator")},processOperator:e=>n.fnOperators[e]||n.fnOperators.processSymbols(e)},n.parse={parseJson:e=>("string"==typeof e?e=JSON.parse(e,n.parse.jsonReviver):e instanceof Array?n.parse.iterateAndReviveArray(e):"object"==typeof e&&null!==e&&n.parse.iterateAndReviveJson(e),e),iterateAndReviveArray:e=>{for(let t=0;t<e.length;t++)"object"==typeof e[t]&&null!==e[t]?n.parse.iterateAndReviveJson(e[t]):e[t]="string"!=typeof e[t]||/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(e[t])?n.parse.parseJson(e[t]):n.parse.jsonReviver("",e[t])},iterateAndReviveJson:e=>{let t,i=Object.keys(e);for(let s of i)n.startsWith(s,"__")||(t=e[s],"object"==typeof t?t instanceof Array?n.parse.iterateAndReviveArray(t):t&&n.parse.iterateAndReviveJson(t):e[s]=n.parse.jsonReviver(e[s],t))},jsonReviver:(e,t)=>{if("string"==typeof t){let i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(t),s=n.timeZoneHandling?n.serverTimezoneOffset:null;if(i)return n.dateParse.toTimeZone(new Date(parseInt(i[1],10)),s,!0);if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(t)){let r=t.indexOf("Z")>-1||t.indexOf("z")>-1,o=t.split(/[^0-9.]/);if(r)t=n.dateParse.toTimeZone(new Date(parseInt(o[0],10),parseInt(o[1],10)-1,parseInt(o[2],10),parseInt(o[3],10),parseInt(o[4],10),parseInt(o[5],10)),n.serverTimezoneOffset,!1);else{let a=new Date(parseInt(o[0],10),parseInt(o[1],10)-1,parseInt(o[2],10),parseInt(o[3],10),parseInt(o[4],10),parseInt(o[5],10)),u=parseInt(o[6],10),p=parseInt(o[7],10);if(isNaN(u)&&isNaN(p))return a;t.indexOf("+")>-1?a.setHours(a.getHours()-u,a.getMinutes()-p):a.setHours(a.getHours()+u,a.getMinutes()+p),t=n.dateParse.toTimeZone(a,n.serverTimezoneOffset,!1)}null==n.serverTimezoneOffset&&(t=n.dateParse.addSelfOffset(t))}}return t},isJson:e=>"string"==typeof e[0]?e:n.parse.parseJson(e),isGuid:e=>null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(e),replacer:(e,t)=>n.isPlainObject(e)?n.parse.jsonReplacer(e,t):e instanceof Array?n.parse.arrayReplacer(e):e instanceof Date?n.parse.jsonReplacer({val:e},t).val:e,jsonReplacer:(e,t)=>{let i,s=Object.keys(e);for(let r of s){if(i=e[r],!(i instanceof Date))continue;let o=i;null==n.serverTimezoneOffset?e[r]=n.dateParse.toTimeZone(o,null).toJSON():(o=new Date(+o+36e5*n.serverTimezoneOffset),e[r]=n.dateParse.toTimeZone(n.dateParse.addSelfOffset(o),null).toJSON())}return e},arrayReplacer:e=>{for(let t=0;t<e.length;t++)n.isPlainObject(e[t])?e[t]=n.parse.jsonReplacer(e[t]):e[t]instanceof Date&&(e[t]=n.parse.jsonReplacer({date:e[t]}).date);return e},jsonDateReplacer:(e,t)=>{if("value"===e&&t){if("string"==typeof t){let i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(t);if(i)t=n.dateParse.toTimeZone(new Date(parseInt(i[1],10)),null,!0);else if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(t)){let s=t.split(/[^0-9]/);t=n.dateParse.toTimeZone(new Date(parseInt(s[0],10),parseInt(s[1],10)-1,parseInt(s[2],10),parseInt(s[3],10),parseInt(s[4],10),parseInt(s[5],10)),null,!0)}}if(t instanceof Date)return t=n.dateParse.addSelfOffset(t),null===n.serverTimezoneOffset?n.dateParse.toTimeZone(n.dateParse.addSelfOffset(t),null).toJSON():(t=n.dateParse.toTimeZone(t,t.getTimezoneOffset()/60*2-n.serverTimezoneOffset,!1)).toJSON()}return t}},n.dateParse={addSelfOffset:e=>new Date(+e-6e4*e.getTimezoneOffset()),toUTC:e=>new Date(+e+6e4*e.getTimezoneOffset()),toTimeZone:(e,t,i)=>{if(null===t)return e;let s=i?n.dateParse.toUTC(e):e;return new Date(+s-36e5*t)},toLocalTime:e=>{let t=e,i=-t.getTimezoneOffset(),s=i>=0?"+":"-",r=a=>{let u=Math.floor(Math.abs(a));return(u<10?"0":"")+u};return t.getFullYear()+"-"+r(t.getMonth()+1)+"-"+r(t.getDate())+"T"+r(t.getHours())+":"+r(t.getMinutes())+":"+r(t.getSeconds())+s+r(i/60)+":"+r(i%60)}},n})();const FP={GroupGuid:"{271bbba0-1ee7}"};class I_{constructor(e){this.options={from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",expand:"expand"},this.type=I_,this.dataSource=e,this.pvt={}}processResponse(e,t,i,s){return e}}class x_ extends I_{processQuery(e,t){let o,a,E,i=e.dataSource.json.slice(0),s=i.length,r=!0,u={},p=0,y=[];for(let D=0;D<t.lazyLoad.length;D++)p++,u[t.lazyLoad[D].key]=t.lazyLoad[D].value;let _={};for(let D=0;D<t.queries.length;D++)a=t.queries[D],"onPage"!==a.fn&&"onGroup"!==a.fn||!t.lazyLoad.length?(o=this[a.fn].call(this,i,a.e,t),"onAggregates"===a.fn?_[a.e.field+" - "+a.e.type]=o:i=void 0!==o?o:i,("onPage"===a.fn||"onSkip"===a.fn||"onTake"===a.fn||"onRange"===a.fn)&&(r=!1),r&&(s=i.length)):("onGroup"===a.fn&&y.push(a.e),"onPage"===a.fn&&(E=a.e));if(p){let L=this.lazyLoadGroup({query:t,lazyLoad:u,result:i,group:y,page:E});i=L.result,s=L.count}return t.isCountRequired&&(i={result:i,count:s,aggregates:_}),i}lazyLoadGroup(e){let t=0,i=this.getAggregate(e.query),s=e.result;if(m(e.lazyLoad.onDemandGroupInfo)){s=je.group(s,e.group[0].fieldName,i,null,null,e.group[0].comparer,!0),t=s.length;let o=s;e.page&&(s=this.onPage(s,e.page,e.query)),this.formGroupResult(s,o)}else{let r=e.lazyLoad.onDemandGroupInfo;for(let a=r.where.length-1;a>=0;a--)s=this.onWhere(s,r.where[a]);e.group.length!==r.level&&(s=je.group(s,e.group[r.level].fieldName,i,null,null,e.group[0].comparer,!0)),t=s.length;let o=s;s=s.slice(r.skip),s=s.slice(0,r.take),e.group.length!==r.level&&this.formGroupResult(s,o)}return{result:s,count:t}}formGroupResult(e,t){if(e.length&&t.length){let i="GroupGuid",s="childLevels",r="level",o="records";e[i]=t[i],e[s]=t[s],e[r]=t[r],e[o]=t[o]}return e}getAggregate(e){let t=Fi.filterQueries(e.queries,"onAggregates"),i=[];if(t.length){let s;for(let r=0;r<t.length;r++)s=t[r].e,i.push({type:s.type,field:je.getValue(s.field,e)})}return i}batchRequest(e,t,i){let s,r=t.deletedRecords.length;for(s=0;s<t.addedRecords.length;s++)this.insert(e,t.addedRecords[s]);for(s=0;s<t.changedRecords.length;s++)this.update(e,i.key,t.changedRecords[s]);for(s=0;s<r;s++)this.remove(e,i.key,t.deletedRecords[s]);return t}onWhere(e,t){return e&&e.length?e.filter(i=>{if(t)return t.validate(i)}):e}onAggregates(e,t){let i=je.aggregates[t.type];return e&&i&&0!==e.length?i(e,t.field):null}onSearch(e,t){return e&&e.length?(0===t.fieldNames.length&&je.getFieldList(e[0],t.fieldNames),e.filter(i=>{for(let s=0;s<t.fieldNames.length;s++)if(t.comparer.call(i,je.getObject(t.fieldNames[s],i),t.searchKey,t.ignoreCase,t.ignoreAccent))return!0;return!1})):e}onSortBy(e,t,i){if(!e||!e.length)return e;let s,r=je.getValue(t.fieldName,i);if(!r)return e.sort(t.comparer);if(r instanceof Array){r=r.slice(0);for(let o=r.length-1;o>=0;o--)!r[o]||(s=t.comparer,je.endsWith(r[o]," desc")&&(s=je.fnSort("descending"),r[o]=r[o].replace(" desc","")),e=je.sort(e,r[o],s));return e}return je.sort(e,r,t.comparer)}onGroup(e,t,i){if(!e||!e.length)return e;let s=this.getAggregate(i);return je.group(e,je.getValue(t.fieldName,i),s,null,null,t.comparer)}onPage(e,t,i){let s=je.getValue(t.pageSize,i),r=(je.getValue(t.pageIndex,i)-1)*s;return e&&e.length?e.slice(r,r+s):e}onRange(e,t){return e&&e.length?e.slice(je.getValue(t.start),je.getValue(t.end)):e}onTake(e,t){return e&&e.length?e.slice(0,je.getValue(t.nos)):e}onSkip(e,t){return e&&e.length?e.slice(je.getValue(t.nos)):e}onSelect(e,t){return e&&e.length?je.select(e,je.getValue(t.fieldNames)):e}insert(e,t,i,s,r){return m(r)?e.dataSource.json.push(t):e.dataSource.json.splice(r,0,t)}remove(e,t,i,s){let o,r=e.dataSource.json;for("object"==typeof i&&!(i instanceof Date)&&(i=je.getObject(t,i)),o=0;o<r.length&&je.getObject(t,r[o])!==i;o++);return o!==r.length?r.splice(o,1):null}update(e,t,i,s){let o,a,r=e.dataSource.json;for(m(t)||(a=J(t,i)),o=0;o<r.length&&(m(t)||J(t,r[o])!==a);o++);return o<r.length?qc(r[o],i):null}}class Kg extends I_{processQuery(e,t,i){let u,p,s=this.getQueryRequest(t),r=Fi.filterQueryLists(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),o=t.params,a=e.dataSource.url,y=null,E=this.options,_={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};"onPage"in r?(u=r.onPage,p=je.getValue(u.pageIndex,t),y=je.getValue(u.pageSize,t),p=(p-1)*y):"onRange"in r&&(u=r.onRange,p=u.start,y=u.end-u.start);for(let H=0;H<s.sorts.length;H++)u=je.getValue(s.sorts[H].e.fieldName,t),_.sorts.push(je.callAdaptorFunction(this,"onEachSort",{name:u,direction:s.sorts[H].e.direction},t));i&&(u=this.getFiltersFrom(i,t),u&&_.filters.push(je.callAdaptorFunction(this,"onEachWhere",u.toJson(),t)));for(let H=0;H<s.filters.length;H++){let se=je.callAdaptorFunction(this,"onEachWhere",s.filters[H].e.toJson(),t);this.getModuleName&&"ODataV4Adaptor"===this.getModuleName()&&!m(s.filters[H].e.key)&&s.filters.length>1&&(se="("+se+")"),_.filters.push(se);let _e="object"==typeof _.filters[H]?Object.keys(_.filters[H]):[];for(let re of _e)je.isNull(_[re])&&delete _[re]}for(let H=0;H<s.searches.length;H++)u=s.searches[H].e,_.searches.push(je.callAdaptorFunction(this,"onEachSearch",{fields:u.fieldNames,operator:u.operator,key:u.searchKey,ignoreCase:u.ignoreCase},t));for(let H=0;H<s.groups.length;H++)_.groups.push(je.getValue(s.groups[H].e.fieldName,t));for(let H=0;H<s.aggregates.length;H++)u=s.aggregates[H].e,_.aggregates.push({type:u.type,field:je.getValue(u.field,t)});let D={};if(this.getRequestQuery(E,t,r,_,D),je.callAdaptorFunction(this,"addParams",{dm:e,query:t,params:o,reqParams:D}),t.lazyLoad.length)for(let H=0;H<t.lazyLoad.length;H++)D[t.lazyLoad[H].key]=t.lazyLoad[H].value;let L=Object.keys(D);for(let H of L)(je.isNull(D[H])||""===D[H]||0===D[H].length)&&delete D[H];(!(E.skip in D)||!(E.take in D))&&null!==y&&(D[E.skip]=je.callAdaptorFunction(this,"onSkip",p,t),D[E.take]=je.callAdaptorFunction(this,"onTake",y,t));let V=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(D,je.parse.jsonDateReplacer),url:a,pvtData:V,type:"POST",contentType:"application/json; charset=utf-8"}:(u=this.convertToQueryString(D,t,e),u=(-1!==e.dataSource.url.indexOf("?")?"&":"/")+u,{type:"GET",url:u.length?a.replace(/\/*$/,u):a,pvtData:V})}getRequestQuery(e,t,i,s,r){let a=r;a[e.from]=t.fromTable,e.apply&&t.distincts.length&&(a[e.apply]="onDistinct"in this?je.callAdaptorFunction(this,"onDistinct",t.distincts):""),!t.distincts.length&&e.expand&&(a[e.expand]="onExpand"in this&&"onSelect"in i?je.callAdaptorFunction(this,"onExpand",{selects:je.getValue(i.onSelect.fieldNames,t),expands:t.expands},t):t.expands),a[e.select]="onSelect"in i&&!t.distincts.length?je.callAdaptorFunction(this,"onSelect",je.getValue(i.onSelect.fieldNames,t),t):"",a[e.count]=t.isCountRequired?je.callAdaptorFunction(this,"onCount",t.isCountRequired,t):"",a[e.search]=s.searches.length?je.callAdaptorFunction(this,"onSearch",s.searches,t):"",a[e.skip]="onSkip"in i?je.callAdaptorFunction(this,"onSkip",je.getValue(i.onSkip.nos,t),t):"",a[e.take]="onTake"in i?je.callAdaptorFunction(this,"onTake",je.getValue(i.onTake.nos,t),t):"",a[e.where]=s.filters.length||s.searches.length?je.callAdaptorFunction(this,"onWhere",s.filters,t):"",a[e.sortBy]=s.sorts.length?je.callAdaptorFunction(this,"onSortBy",s.sorts,t):"",a[e.group]=s.groups.length?je.callAdaptorFunction(this,"onGroup",s.groups,t):"",a[e.aggregates]=s.aggregates.length?je.callAdaptorFunction(this,"onAggregates",s.aggregates,t):"",a.param=[]}convertToQueryString(e,t,i){return""}processResponse(e,t,i,s,r,o){if(s&&s.getResponseHeader("Content-Type")&&-1!==s.getResponseHeader("Content-Type").indexOf("application/json")){let D=je.timeZoneHandling;t&&!t.timeZoneHandling&&(je.timeZoneHandling=!1),e=je.parse.parseJson(e),je.timeZoneHandling=D}let a=r,u=a.pvtData||{},p=e?e.groupDs:[];if(s&&s.getResponseHeader("Content-Type")&&-1!==s.getResponseHeader("Content-Type").indexOf("xml"))return i.isCountRequired?{result:[],count:0}:[];let y=JSON.parse(a.data);if(y&&"batch"===y.action&&e&&e.addedRecords)return o.addedRecords=e.addedRecords,o;e&&e.d&&(e=e.d);let E={};e&&"count"in e&&(E.count=e.count),E.result=e&&e.result?e.result:e;let _=!1;if(Array.isArray(e.result)&&e.result.length){let D="key",L="value",V="level";if(m(e.result[0][D])||(E.result=this.formRemoteGroupedData(E.result,1,u.groups.length-1)),i&&i.lazyLoad.length&&u.groups.length)for(let H=0;H<i.lazyLoad.length;H++)"onDemandGroupInfo"===i.lazyLoad[H][D]&&u.groups.length===i.lazyLoad[H][L][V]&&(_=!0)}return _||this.getAggregateResult(u,e,E,p,i),je.isNull(E.count)?E.result:{result:E.result,count:E.count,aggregates:E.aggregates}}formRemoteGroupedData(e,t,i){for(let u=0;u<e.length;u++)e[u].items.length&&Object.keys(e[u].items[0]).indexOf("key")>-1&&this.formRemoteGroupedData(e[u].items,t+1,i-1);let s="GroupGuid",a="records";return e[s]=FP[s],e.level=t,e.childLevels=i,e[a]=e[0].items.length?this.getGroupedRecords(e,!m(e[0].items[a])):[],e}getGroupedRecords(e,t){let i=[];for(let r=0;r<e.length;r++)if(t)i=i.concat(e[r].items.records);else for(let o=0;o<e[r].items.length;o++)i.push(e[r].items[o]);return i}onGroup(e){return this.pvt.groups=e,e}onAggregates(e){this.pvt.aggregates=e}batchRequest(e,t,i,s,r){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(ut({},{changed:t.changedRecords,added:t.addedRecords,deleted:t.deletedRecords,action:"batch",table:i[void 0],key:i[void 0]},je.getAddParams(this,e,s)))}}beforeSend(e,t){}insert(e,t,i,s){return{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(ut({},{value:t,table:i,action:"insert"},je.getAddParams(this,e,s)))}}remove(e,t,i,s,r){return{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(ut({},{key:i,keyColumn:t,table:s,action:"remove"},je.getAddParams(this,e,r)))}}update(e,t,i,s,r){return{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(ut({},{value:i,action:"update",keyColumn:t,key:je.getObject(t,i),table:s},je.getAddParams(this,e,r)))}}getFiltersFrom(e,t){let s,i=t.fKey,r=i,o=t.key,a=[];"object"!=typeof e[0]&&(r=null);for(let u=0;u<e.length;u++)s="object"==typeof e[0]?je.getObject(o||r,e[u]):e[u],a.push(new un(i,"equal",s));return un.or(a)}getAggregateResult(e,t,i,s,r){let o=t;if(t&&t.result&&(o=t.result),e&&e.aggregates&&e.aggregates.length){let y,p=e.aggregates,E=o,_={};t.aggregate&&(E=t.aggregate);for(let D=0;D<p.length;D++)y=je.aggregates[p[D].type],y&&(_[p[D].field+" - "+p[D].type]=y(E,p[D].field));i.aggregates=_}let u=Array.isArray(t.result)&&t.result.length&&!m(t.result[0].key);if(e&&e.groups&&e.groups.length&&!u){let p=e.groups;for(let y=0;y<p.length;y++){let E=null;m(s)||(s=je.group(s,p[y]));let _=Fi.filterQueries(r.queries,"onGroup")[y].e;o=je.group(o,p[y],e.aggregates,E,s,_.comparer)}i.result=o}return i}getQueryRequest(e){let t={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return t.sorts=Fi.filterQueries(e.queries,"onSortBy"),t.groups=Fi.filterQueries(e.queries,"onGroup"),t.filters=Fi.filterQueries(e.queries,"onWhere"),t.searches=Fi.filterQueries(e.queries,"onSearch"),t.aggregates=Fi.filterQueries(e.queries,"onAggregates"),t}addParams(e){let t=e.reqParams;e.params.length&&(t.params={});for(let i of e.params){if(t[i.key])throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");t[i.key]=i.value,i.fn&&(t[i.key]=i.fn.call(e.query,i.key,e.query,e.dm)),t.params[i.key]=t[i.key]}}}class Vl extends Kg{constructor(e){super(),this.options=ut({},this.options,{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PUT"}),ut(this.options,e||{})}getModuleName(){return"ODataAdaptor"}onPredicate(e,t,i){let r,o,s="",a=e.value,u=typeof a,p=e.field?Vl.getField(e.field):null;if(a instanceof Date&&(a="datetime'"+je.parse.replacer(a)+"'"),"string"===u&&(a=a.replace(/'/g,"''"),e.ignoreCase&&(a=a.toLowerCase()),a=encodeURIComponent(a),a="'"+a+"'",i&&(p="cast("+p+", 'Edm.String')"),je.parse.isGuid(a)&&(o="guid"),e.ignoreCase&&(o||(p="tolower("+p+")"),a=a.toLowerCase())),r=je.odBiOperator[e.operator],r)return s+=p,s+=r,o&&(s+=o),s+a;if(r=m(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?je.odUniOperator[e.operator]:je.odv4UniOperator[e.operator],"substringof"===r){let y=a;a=p,p=y}return s+=r+"(",s+=p+",",o&&(s+=o),s+=a+")",s}addParams(e){super.addParams(e),delete e.reqParams.params}onComplexPredicate(e,t,i){let s=[];for(let r=0;r<e.predicates.length;r++)s.push("("+this.onEachWhere(e.predicates[r],t,i)+")");return s.join(" "+e.condition+" ")}onEachWhere(e,t,i){return e.isComplex?this.onComplexPredicate(e,t,i):this.onPredicate(e,t,i)}onWhere(e){return this.pvt.search&&e.push(this.onEachWhere(this.pvt.search,null,!0)),e.join(" and ")}onEachSearch(e){e.fields&&0===e.fields.length&&je.throwError("Query() - Search : oData search requires list of field names to search");let t=this.pvt.search||[];for(let i=0;i<e.fields.length;i++)t.push(new un(e.fields[i],e.operator,e.key,e.ignoreCase));this.pvt.search=t}onSearch(e){return this.pvt.search=un.or(this.pvt.search),""}onEachSort(e){let t=[];if(e.name instanceof Array)for(let i=0;i<e.name.length;i++)t.push(Vl.getField(e.name[i])+("descending"===e.direction?" desc":""));else t.push(Vl.getField(e.name)+("descending"===e.direction?" desc":""));return t.join(",")}onSortBy(e){return e.reverse().join(",")}onGroup(e){return this.pvt.groups=e,[]}onSelect(e){for(let t=0;t<e.length;t++)e[t]=Vl.getField(e[t]);return e.join(",")}onAggregates(e){return this.pvt.aggregates=e,""}onCount(e){return!0===e?"allpages":""}beforeSend(e,t,i){je.endsWith(i.url,this.options.batch)&&"post"===i.type.toLowerCase()?(t.setRequestHeader("Accept",this.options.multipartAccept),t.setRequestHeader("DataServiceVersion","2.0"),t.overrideMimeType("text/plain; charset=x-user-defined")):t.setRequestHeader("Accept",this.options.accept),t.setRequestHeader("DataServiceVersion","2.0"),t.setRequestHeader("MaxDataServiceVersion","2.0")}processResponse(e,t,i,s,r,o){let a="odata.metadata";if(r&&"GET"===r.type&&!this.rootUrl&&e[a]){let V=e[a].split("/$metadata#");this.rootUrl=V[0],this.resourceTableName=V[1]}if(!m(e.d)){let V=i&&i.isCountRequired?e.d.results:e.d,H="__metadata";if(!m(V))for(let se=0;se<V.length;se++)m(V[se][H])||delete V[se][H]}let p=r&&r.pvtData,y=this.processBatchResponse(e,i,s,r,o);if(y)return y;let E=s&&r.getResponseHeader("DataServiceVersion"),_=null,D=E&&parseInt(E,10)||2;if(i&&i.isCountRequired){let V="__count";(e[V]||e["odata.count"])&&(_=e[V]||e["odata.count"]),e.d&&(e=e.d),(e[V]||e["odata.count"])&&(_=e[V]||e["odata.count"])}3===D&&e.value&&(e=e.value),e.d&&(e=e.d),D<3&&e.results&&(e=e.results);let L={};return L.count=_,L.result=e,this.getAggregateResult(p,e,L,null,i),je.isNull(_)?L.result:{result:L.result,count:L.count,aggregates:L.aggregates}}convertToQueryString(e,t,i){let s=[],r="table",o=e[r]||"";delete e[r],i.dataSource.requiresFormat&&(e.$format="json");let u=Object.keys(e);for(let p of u)s.push(p+"="+e[p]);return s=s.join("&"),i.dataSource.url&&-1!==i.dataSource.url.indexOf("?")&&!o?s:s.length?o+"?"+s:o||""}localTimeReplacer(e,t){for(let i of m(t)?[]:Object.keys(t))t[i]instanceof Date&&(t[i]=je.dateParse.toLocalTime(t[i]));return t}insert(e,t,i){return{url:(e.dataSource.insertUrl||e.dataSource.url).replace(/\/*$/,i?"/"+i:""),data:JSON.stringify(t,this.options.localTime?this.localTimeReplacer:null)}}remove(e,t,i,s){let r;return r="string"!=typeof i||je.parse.isGuid(i)?`(${i})`:`('${i}')`,{type:"DELETE",url:(e.dataSource.removeUrl||e.dataSource.url).replace(/\/*$/,s?"/"+s:"")+r}}update(e,t,i,s,r,o){let a;return"PATCH"===this.options.updateType&&!m(o)&&(i=this.compareAndRemove(i,o,t)),a="string"!=typeof i[t]||je.parse.isGuid(i[t])?`(${i[t]})`:`('${i[t]}')`,{type:this.options.updateType,url:(e.dataSource.updateUrl||e.dataSource.url).replace(/\/*$/,s?"/"+s:"")+a,data:JSON.stringify(i,this.options.localTime?this.localTimeReplacer:null),accept:this.options.accept}}batchRequest(e,t,i,s,r){let o=i.guid=je.getGuid(this.options.batchPre),a=this.rootUrl?this.rootUrl+"/"+this.options.batch:e.dataSource.url.replace(/\/*$/,"/"+this.options.batch);i.url=this.resourceTableName?this.resourceTableName:i.url;let u={url:i.url,key:i.key,cid:1,cSet:je.getGuid(this.options.changeSet)},p="--"+o+"\n";return p+="Content-Type: multipart/mixed; boundary="+u.cSet.replace("--","")+"\n",this.pvt.changeSet=0,p+=this.generateInsertRequest(t.addedRecords,u,e),p+=this.generateUpdateRequest(t.changedRecords,u,e,r?r.changedRecords:[]),p+=this.generateDeleteRequest(t.deletedRecords,u,e),p+=u.cSet+"--\n",p+="--"+o+"--",{type:"POST",url:a,dataType:"json",contentType:"multipart/mixed; charset=UTF-8;boundary="+o,data:p}}generateDeleteRequest(e,t,i){if(!e)return"";let s="";return s=this.generateBodyContent(e,t,{method:"DELETE ",url:(o,a,u)=>{let p=je.getObject(u,o[a]);return"number"==typeof p||je.parse.isGuid(p)?"("+p+")":p instanceof Date?"("+o[a][u].toJSON()+")":`('${p}')`},data:(o,a)=>""},i),s+"\n"}generateInsertRequest(e,t,i){if(!e)return"";let s="";return s=this.generateBodyContent(e,t,{method:"POST ",url:(o,a,u)=>"",data:(o,a)=>JSON.stringify(o[a])+"\n\n"},i),s}generateUpdateRequest(e,t,i,s){if(!e)return"";let r="";return e.forEach(a=>a=this.compareAndRemove(a,s.filter(u=>je.getObject(t.key,u)===je.getObject(t.key,a))[0],t.key)),r=this.generateBodyContent(e,t,{method:this.options.updateType+" ",url:(a,u,p)=>"number"==typeof a[u][p]||je.parse.isGuid(a[u][p])?"("+a[u][p]+")":a[u][p]instanceof Date?"("+a[u][p].toJSON()+")":`('${a[u][p]}')`,data:(a,u)=>JSON.stringify(a[u])+"\n\n"},i),r}static getField(e){return e.replace(/\./g,"/")}generateBodyContent(e,t,i,s){let r="";for(let o=0;o<e.length;o++)r+="\n"+t.cSet+"\n",r+=this.options.changeSetContent+"\n\n",r+=i.method,"POST "===i.method?r+=(s.dataSource.insertUrl||s.dataSource.crudUrl||t.url)+i.url(e,o,t.key)+" HTTP/1.1\n":"PUT "===i.method||"PATCH "===i.method?r+=(s.dataSource.updateUrl||s.dataSource.crudUrl||t.url)+i.url(e,o,t.key)+" HTTP/1.1\n":"DELETE "===i.method&&(r+=(s.dataSource.removeUrl||s.dataSource.crudUrl||t.url)+i.url(e,o,t.key)+" HTTP/1.1\n"),r+="Accept: "+this.options.accept+"\n",r+="Content-Id: "+this.pvt.changeSet+++"\n",r+=this.options.batchChangeSetContentType+"\n",m(e[o]["@odata.etag"])?r+="\n":(r+="If-Match: "+e[o]["@odata.etag"]+"\n\n",delete e[o]["@odata.etag"]),r+=i.data(e,o);return r}processBatchResponse(e,t,i,s,r){if(i&&i.getResponseHeader("Content-Type")&&-1!==i.getResponseHeader("Content-Type").indexOf("xml"))return t.isCountRequired?{result:[],count:0}:[];if(s&&this.options.batch&&je.endsWith(s.url,this.options.batch)&&"post"===s.type.toLowerCase()){let a,u,o=i.getResponseHeader("Content-Type"),p=e+"";if(o=o.substring(o.indexOf("=batchresponse")+1),p=p.split(o),p.length<2)return{};p=p[1];let y=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(p);y&&p.replace(y[0],""),p=p.split(y?y[1]:"");for(let _=p.length;_>-1;_--)!/\bContent-ID:/i.test(p[_])||!/\bHTTP.+201/.test(p[_])||(a=parseInt(/\bContent-ID: (\d+)/i.exec(p[_])[1],10),r.addedRecords[a]&&(u=je.parse.parseJson(/^\{.+\}/m.exec(p[_])[0]),ut({},r.addedRecords[a],this.processResponse(u))));return r}return null}compareAndRemove(e,t,i){return m(t)||Object.keys(e).forEach(s=>{s!==i&&"@odata.etag"!==s&&(je.isPlainObject(e[s])?(this.compareAndRemove(e[s],t[s]),0===Object.keys(e[s]).filter(o=>"@odata.etag"!==o).length&&delete e[s]):(e[s]===t[s]||e[s]&&t[s]&&e[s].valueOf()===t[s].valueOf())&&delete e[s])}),e}}class aD extends x_{constructor(){super(),pi("beforeSend",Kg.prototype.beforeSend,this)}insert(e,t,i,s,r){return this.pvt.position=r,this.updateType="add",{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(ut({},{value:t,table:i,action:"insert"},je.getAddParams(this,e,s)))}}remove(e,t,i,s,r){return super.remove(e,t,i),{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(ut({},{key:i,keyColumn:t,table:s,action:"remove"},je.getAddParams(this,e,r)))}}update(e,t,i,s,r){return this.updateType="update",this.updateKey=t,{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(ut({},{value:i,action:"update",keyColumn:t,key:i[t],table:s},je.getAddParams(this,e,r)))}}processResponse(e,t,i,s,r,o,a){let u;if(e="batch"===(r?JSON.parse(r.data):e).action?je.parse.parseJson(e):e,"add"===this.updateType&&super.insert(t,e,null,null,this.pvt.position),"update"===this.updateType&&super.update(t,this.updateKey,e),this.updateType=void 0,e.added)for(u=0;u<e.added.length;u++)super.insert(t,e.added[u]);if(e.changed)for(u=0;u<e.changed.length;u++)super.update(t,a.key,e.changed[u]);if(e.deleted)for(u=0;u<e.deleted.length;u++)super.remove(t,a.key,e.deleted[u]);return e}batchRequest(e,t,i,s,r){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(ut({},{changed:t.changedRecords,added:t.addedRecords,deleted:t.deletedRecords,action:"batch",table:i.url,key:i.key},je.getAddParams(this,e,s)))}}addParams(e){(new Kg).addParams(e)}}class VP extends Kg{constructor(e){super(),this.options=ut({},this.options,{getData:new Function,addRecord:new Function,updateRecord:new Function,deleteRecord:new Function,batchUpdate:new Function}),ut(this.options,e||{})}getModuleName(){return"CustomDataAdaptor"}}class lD extends Kg{constructor(e,t,i){super(),this.isCrudAction=!1,this.isInsertAction=!1,m(e)||(this.cacheAdaptor=e),this.pageSize=i,this.guidId=je.getGuid("cacheAdaptor"),window.localStorage.setItem(this.guidId,JSON.stringify({keys:[],results:[]}));let r=this.guidId;m(t)||setInterval(()=>{let o;o=je.parse.parseJson(window.localStorage.getItem(r));let a=[];for(let u=0;u<o.results.length;u++){let p=+new Date,y=+new Date(o.results[u].timeStamp);o.results[u].timeStamp=p-y,p-y>t&&a.push(u)}for(let u=0;u<a.length;u++)o.results.splice(a[u],1),o.keys.splice(a[u],1);window.localStorage.removeItem(r),window.localStorage.setItem(r,JSON.stringify(o))},t)}generateKey(e,t){let i=this.getQueryRequest(t),s=Fi.filterQueryLists(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),r=e,o="onPage";o in s&&(r+=s[o].pageIndex),i.sorts.forEach(a=>{r+=a.e.direction+a.e.fieldName}),i.groups.forEach(a=>{r+=a.e.fieldName}),i.searches.forEach(a=>{r+=a.e.searchKey});for(let a=0;a<i.filters.length;a++){let u=i.filters[a];if(u.e.isComplex){let p=t.clone();p.queries=[];for(let y=0;y<u.e.predicates.length;y++)p.queries.push({fn:"onWhere",e:u.e.predicates[y],filter:t.queries.filter});r+=u.e.condition+this.generateKey(e,p)}else r+=u.e.field+u.e.operator+u.e.value}return r}processQuery(e,t,i){let r,s=this.generateKey(e.dataSource.url,t);r=je.parse.parseJson(window.localStorage.getItem(this.guidId));let o=r?r.results[r.keys.indexOf(s)]:null;return null==o||this.isCrudAction||this.isInsertAction?(this.isCrudAction=null,this.isInsertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):o}processResponse(e,t,i,s,r,o){if(this.isInsertAction||r&&this.cacheAdaptor.options.batch&&je.endsWith(r.url,this.cacheAdaptor.options.batch)&&"post"===r.type.toLowerCase())return this.cacheAdaptor.processResponse(e,t,i,s,r,o);e=this.cacheAdaptor.processResponse.apply(this.cacheAdaptor,[].slice.call(arguments,0));let a=i?this.generateKey(t.dataSource.url,i):t.dataSource.url,u={};u=je.parse.parseJson(window.localStorage.getItem(this.guidId));let p=u.keys.indexOf(a);for(-1!==p&&(u.results.splice(p,1),u.keys.splice(p,1)),u.results[u.keys.push(a)-1]={keys:a,result:e.result,timeStamp:new Date,count:e.count};u.results.length>this.pageSize;)u.results.splice(0,1),u.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(u)),e}beforeSend(e,t,i){!m(this.cacheAdaptor.options.batch)&&je.endsWith(i.url,this.cacheAdaptor.options.batch)&&"post"===i.type.toLowerCase()&&t.setRequestHeader("Accept",this.cacheAdaptor.options.multipartAccept),e.dataSource.crossDomain||t.setRequestHeader("Accept",this.cacheAdaptor.options.accept)}update(e,t,i,s){return this.isCrudAction=!0,this.cacheAdaptor.update(e,t,i,s)}insert(e,t,i){return this.isInsertAction=!0,this.cacheAdaptor.insert(e,t,i)}remove(e,t,i,s){return this.isCrudAction=!0,this.cacheAdaptor.remove(e,t,i,s)}batchRequest(e,t,i){return this.cacheAdaptor.batchRequest(e,t,i)}}class Nt{constructor(e,t,i){let s;return this.dateParse=!0,this.timeZoneHandling=!0,this.requests=[],!e&&!this.dataSource&&(e=[]),i=i||e.adaptor,e&&!1===e.timeZoneHandling&&(this.timeZoneHandling=e.timeZoneHandling),e instanceof Array?s={json:e,offline:!0}:"object"==typeof e?(e.json||(e.json=[]),s={url:e.url,insertUrl:e.insertUrl,removeUrl:e.removeUrl,updateUrl:e.updateUrl,crudUrl:e.crudUrl,batchUrl:e.batchUrl,json:e.json,headers:e.headers,accept:e.accept,data:e.data,timeTillExpiration:e.timeTillExpiration,cachingPageSize:e.cachingPageSize,enableCaching:e.enableCaching,requestType:e.requestType,key:e.key,crossDomain:e.crossDomain,jsonp:e.jsonp,dataType:e.dataType,offline:void 0!==e.offline?e.offline:!(e.adaptor instanceof aD||e.adaptor instanceof VP||e.url),requiresFormat:e.requiresFormat}):je.throwError("DataManager: Invalid arguments"),void 0===s.requiresFormat&&!je.isCors()&&(s.requiresFormat=!!m(s.crossDomain)||s.crossDomain),void 0===s.dataType&&(s.dataType="json"),this.dataSource=s,this.defaultQuery=t,s.url&&s.offline&&!s.json.length?(this.isDataAvailable=!1,this.adaptor=i||new Vl,this.dataSource.offline=!1,this.ready=this.executeQuery(t||new Fi),this.ready.then(r=>{this.dataSource.offline=!0,this.isDataAvailable=!0,s.json=r.result,this.adaptor=new x_})):this.adaptor=s.offline?new x_:new Vl,!s.jsonp&&this.adaptor instanceof Vl&&(s.jsonp="callback"),this.adaptor=i||this.adaptor,s.enableCaching&&(this.adaptor=new lD(this.adaptor,s.timeTillExpiration,s.cachingPageSize)),this}setDefaultQuery(e){return this.defaultQuery=e,this}executeLocal(e){!this.defaultQuery&&!(e instanceof Fi)&&je.throwError("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||je.throwError("DataManager - executeLocal() : Json data is required to execute");let t=this.adaptor.processQuery(this,e=e||this.defaultQuery);if(e.subQuery){let i=e.subQuery.fromTable,s=e.subQuery.lookups,r=e.isCountRequired?t.result:t;s&&s instanceof Array&&je.buildHierarchy(e.subQuery.fKey,i,r,s,e.subQuery.key);for(let o=0;o<r.length;o++)r[o][i]instanceof Array&&(r[o]=ut({},{},r[o]),r[o][i]=this.adaptor.processResponse(e.subQuery.using(new Nt(r[o][i].slice(0))).executeLocal(),this,e))}return this.adaptor.processResponse(t,this,e)}executeQuery(e,t,i,s){let r="makeRequest";"function"==typeof e&&(s=i,i=t,t=e,e=null),e||(e=this.defaultQuery),e instanceof Fi||je.throwError("DataManager - executeQuery() : A query is required to execute");let o=new ob,a={query:e};if(!this.dataSource.offline&&void 0!==this.dataSource.url&&""!==this.dataSource.url||!m(this.adaptor[r])||this.isCustomDataAdaptor(this.adaptor)){let u=this.adaptor.processQuery(this,e);m(this.adaptor[r])?!m(u.url)||this.isCustomDataAdaptor(this.adaptor)?this.makeRequest(u,o,a,e):(a=Nt.getDeferedArgs(e,u,a),o.resolve(a)):this.adaptor[r](u,o,a,e)}else Nt.nextTick(()=>{let u=this.executeLocal(e);a=Nt.getDeferedArgs(e,u,a),o.resolve(a)});return(t||i)&&o.promise.then(t,i),s&&o.promise.then(s,s),o.promise}static getDeferedArgs(e,t,i){return e.isCountRequired?(i.result=t.result,i.count=t.count,i.aggregates=t.aggregates):i.result=t,i}static nextTick(e){(window.setImmediate||window.setTimeout)(e,0)}extendRequest(e,t,i){return ut({},{type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,processData:!1,onSuccess:t,onFailure:i},e)}makeRequest(e,t,i,s){let r=!!s.subQuerySelector,o=E=>{i.error=E,t.reject(i)},a=(E,_,D,L,V,H,se)=>{i.xhr=D,i.count=_?parseInt(_.toString(),10):0,i.result=E,i.request=L,i.aggregates=H,i.actual=V,i.virtualSelectRecords=se,t.resolve(i)},u=(E,_)=>{let D=new ob,L={parent:i};s.subQuery.isChild=!0;let V=this.adaptor.processQuery(this,s.subQuery,E?this.adaptor.processResponse(E):_),H=this.makeRequest(V,D,L,s.subQuery);return r||D.then(se=>{E&&(je.buildHierarchy(s.subQuery.fKey,s.subQuery.fromTable,E,se,s.subQuery.key),a(E,se.count,se.xhr))},o),H},y=this.extendRequest(e,(E,_)=>{if(this.isGraphQLAdaptor(this.adaptor)&&!m(E.errors))return o(E.errors);this.isCustomDataAdaptor(this.adaptor)&&(_=ut({},this.ajaxReqOption,_)),-1===_.httpRequest.getResponseHeader("Content-Type").indexOf("xml")&&this.dateParse&&(E=je.parse.parseJson(E));let D=this.adaptor.processResponse(E,this,s,_.httpRequest,_),L=0,V=null,se=E.virtualSelectRecords;s.isCountRequired&&(L=D.count,V=D.aggregates,D=D.result),s.subQuery?r||u(D,_):a(D,L,_.httpRequest,_.type,E,V,se)},o);if(this.isCustomDataAdaptor(this.adaptor))this.ajaxReqOption=y,this.adaptor.options.getData({data:y.data,onSuccess:y.onSuccess,onFailure:y.onFailure});else{let E=new Ep(y);E.beforeSend=()=>{this.beforeSend(E.httpRequest,E)},y=E.send(),y.catch(_=>!0),this.requests.push(E)}if(r){let E,_=s.subQuerySelector.call(this,{query:s.subQuery,parent:s});_&&_.length?(E=Promise.all([y,u(null,_)]),E.then((...D)=>{let L=D[0],V=this.adaptor.processResponse(L[0],this,s,this.requests[0].httpRequest,this.requests[0]),H=0;s.isCountRequired&&(H=V.count,V=V.result);let se=this.adaptor.processResponse(L[1],this,s.subQuery,this.requests[1].httpRequest,this.requests[1]);H=0,s.subQuery.isCountRequired&&(H=se.count,se=se.result),je.buildHierarchy(s.subQuery.fKey,s.subQuery.fromTable,V,se,s.subQuery.key),r=!1,a(V,H,this.requests[0].httpRequest)})):r=!1}return y}beforeSend(e,t){this.adaptor.beforeSend(this,e,t);let s,i=this.dataSource.headers;for(let r=0;i&&r<i.length;r++){s=[];let o=Object.keys(i[r]);for(let a of o)s.push(a),e.setRequestHeader(a,i[r][a])}}saveChanges(e,t,i,s,r){i instanceof Fi&&(s=i,i=null);let o={url:i,key:t||this.dataSource.key},a=this.adaptor.batchRequest(this,e,o,s||new Fi,r),u="doAjaxRequest";if(this.dataSource.offline)return a;if(m(this.adaptor[u])){if(this.isCustomDataAdaptor(this.adaptor))return this.doAjaxRequest(a,this.adaptor.options.batchUpdate);{let p=new ob,y=new Ep(a);return y.beforeSend=()=>{this.beforeSend(y.httpRequest,y)},y.onSuccess=(E,_)=>{this.isGraphQLAdaptor(this.adaptor)&&(m(E.errors)||y.onFailure(JSON.stringify(E.errors))),p.resolve(this.adaptor.processResponse(E,this,null,_.httpRequest,_,e,o))},y.onFailure=E=>{p.reject([{error:E}])},y.send().catch(E=>!0),p.promise}}return this.adaptor[u](a)}insert(e,t,i,s){t instanceof Fi&&(i=t,t=null);let r=this.adaptor.insert(this,e,t,i,s),o="doAjaxRequest";return this.dataSource.offline?r:m(this.adaptor[o])?this.doAjaxRequest(r,this.adaptor.options.addRecord):this.adaptor[o](r)}remove(e,t,i,s){"object"==typeof t&&(t=je.getObject(e,t)),i instanceof Fi&&(s=i,i=null);let r=this.adaptor.remove(this,e,t,i,s),o="doAjaxRequest";return this.dataSource.offline?r:m(this.adaptor[o])?this.doAjaxRequest(r,this.adaptor.options.deleteRecord):this.adaptor[o](r)}update(e,t,i,s,r){i instanceof Fi&&(s=i,i=null);let o=this.adaptor.update(this,e,t,i,s,r),a="doAjaxRequest";return this.dataSource.offline?o:m(this.adaptor[a])?this.doAjaxRequest(o,this.adaptor.options.updateRecord):this.adaptor[a](o)}isCustomDataAdaptor(e){return this.adaptor.getModuleName&&"CustomDataAdaptor"===this.adaptor.getModuleName()}isGraphQLAdaptor(e){return this.adaptor.getModuleName&&"GraphQLAdaptor"===this.adaptor.getModuleName()}successFunc(e,t){if(this.isGraphQLAdaptor(this.adaptor)){let i=JSON.parse(e);m(i.errors)||this.failureFunc(JSON.stringify(i.errors))}this.isCustomDataAdaptor(this.adaptor)&&(t=ut({},this.ajaxReqOption,t));try{je.parse.parseJson(e)}catch(i){e=[]}e=this.adaptor.processResponse(je.parse.parseJson(e),this,null,t.httpRequest,t),this.ajaxDeffered.resolve(e)}failureFunc(e){this.ajaxDeffered.reject([{error:e}])}doAjaxRequest(e,t){if(e=ut({},{type:"POST",contentType:"application/json; charset=utf-8",processData:!1},e),this.ajaxDeffered=new ob,this.isCustomDataAdaptor(this.adaptor))this.ajaxReqOption=e,t.call(this,{data:e.data,onSuccess:this.successFunc.bind(this),onFailure:this.failureFunc.bind(this)});else{let i=new Ep(e);i.beforeSend=()=>{this.beforeSend(i.httpRequest,i)},i.onSuccess=this.successFunc.bind(this),i.onFailure=this.failureFunc.bind(this),i.send().catch(s=>!0)}return this.ajaxDeffered.promise}}class ob{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t}),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}}let li={li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"};var ds;function ab(n,e){const t={};if(m(n)||"string"==typeof n||"number"==typeof n||!m(n.isHeader))return n;for(const i of Object.keys(e)){const s=e[i],r=m(s)||"string"!=typeof s?void 0:J(s,n);m(r)||(t[s]=r)}return t}function oE(n){if(n)try{if(document.querySelector(n))return xs(document.querySelector(n).innerHTML.trim())}catch(e){return xs(n)}}!function(n){n.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null,sortBy:null};const e={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},t={showCheckBox:!1,showIcon:!1,enableHtmlSanitizer:!1,expandCollapse:!1,fields:n.defaultMappedFields,ariaAttributes:e,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right",itemNavigable:!1};function s(mt,yt,st,Ce,ke){return Ai(mt,r(mt,yt,st,Ce,ke),null,Ce)}function r(mt,yt,st,Ce,ke){const Re=[],me=ut({},t,Ce);li=ot(me.moduleName);const we=re();for(let Ke=0;Ke<yt.length;Ke++){if(m(yt[Ke]))continue;let Ut;me.itemCreating&&"function"==typeof me.itemCreating&&me.itemCreating({dataSource:yt,curData:yt[Ke],text:yt[Ke],options:me}),Ut=st?gt(mt,yt[Ke],void 0,null,null,[],null,we,Ke,Ce):jt(mt,yt[Ke],void 0,null,null,Ce,ke),me.itemCreated&&"function"==typeof me.itemCreated&&me.itemCreated({dataSource:yt,curData:yt[Ke],text:yt[Ke],item:Ut,options:me}),Re.push(Ut)}return Re}function o(mt,yt,st,Ce,ke,Re){const me=ut({},t,st);li=ot(me.moduleName);const we=!Re||"listview"!=Re.getModuleName()&&"multiselect"!=Re.getModuleName()?ut({},n.defaultMappedFields,me.fields):me.fields,Ke=ut({},e,me.ariaAttributes);let Ut,ki=[];Ce&&(Ke.level=Ce);const oi=[];let os,ss;yt&&yt.length&&!m(L(yt).item)&&!L(yt).item.hasOwnProperty(we.id)&&(Ut=re());for(let zi=0;zi<yt.length;zi++){let Vt=ab(yt[zi],we);if(m(yt[zi]))continue;me.itemCreating&&"function"==typeof me.itemCreating&&me.itemCreating({dataSource:yt,curData:yt[zi],text:Vt[we.text],options:me,fields:we});const oe=yt[zi];me.itemCreating&&"function"==typeof me.itemCreating&&(Vt=ab(yt[zi],we)),Vt.hasOwnProperty(we.id)&&!m(Vt[we.id])&&(Ut=Vt[we.id]);const pe=[];if(me.showCheckBox&&(me.itemNavigable&&(Vt[we.url]||Vt[we.urlAttributes])?ki.push(mt("input",{className:li.check,attrs:{type:"checkbox"}})):pe.push(mt("input",{className:li.check,attrs:{type:"checkbox"}}))),!0===ke)me.showIcon&&Vt.hasOwnProperty(we.iconCss)&&!m(Vt[we.iconCss])&&pe.push(mt("span",{className:li.icon+" "+Vt[we.iconCss]})),os=gt(mt,oe,Vt,we,me.itemClass,pe,!(!oe.hasOwnProperty("isHeader")||!oe.isHeader),Ut,zi,st),ss=os.querySelector("."+li.anchorWrap),me.itemNavigable&&ki.length&&Tr(ki,os.firstElementChild);else{if(os=jt(mt,oe,Vt,we,me.itemClass,st,Re),os.classList.add(li.level+"-"+Ke.level),os.setAttribute("aria-level",Ke.level.toString()),ss=os.querySelector("."+li.anchorWrap),Vt.hasOwnProperty(we.tooltip)&&os.setAttribute("title",Vt[we.tooltip]),Vt.hasOwnProperty(we.htmlAttributes)&&Vt[we.htmlAttributes]&&V(os,Vt[we.htmlAttributes]),Vt.hasOwnProperty(we.enabled)&&!1===Vt[we.enabled]&&os.classList.add(li.disabled),Vt.hasOwnProperty(we.isVisible)&&!1===Vt[we.isVisible]&&(os.style.display="none"),Vt.hasOwnProperty(we.imageUrl)&&!m(Vt[we.imageUrl])&&!me.template){const nt={src:Vt[we.imageUrl]};qc(nt,Vt[we.imageAttributes]);const qt=mt("img",{className:li.image,attrs:nt});ss?ss.insertAdjacentElement("afterbegin",qt):Tr([qt],os.firstElementChild)}if(me.showIcon&&Vt.hasOwnProperty(we.iconCss)&&!m(Vt[we.iconCss])&&!me.template){const nt=mt("div",{className:li.icon+" "+Vt[we.iconCss]});ss?ss.insertAdjacentElement("afterbegin",nt):Tr([nt],os.firstElementChild)}pe.length&&Tr(pe,os.firstElementChild),me.itemNavigable&&ki.length&&Tr(ki,os.firstElementChild),Ae(mt,Vt,we,0,me,os,Ke.level)}ss&&j([os],[li.navigable]),me.itemCreated&&"function"==typeof me.itemCreated&&me.itemCreated({dataSource:yt,curData:yt[zi],text:Vt[we.text],item:os,options:me,fields:we}),ki=[],oi.push(os)}return oi}function a(mt,yt,st,Ce,ke,Re){const me=ut({},t,st);return Ai(mt,o(mt,yt,st,Ce,ke,Re),me.listClass,st)}function p(mt,yt){if(yt&&mt){let st=yt;return st=Array.prototype.slice.call(yt),st.indexOf(mt)}}function E(mt,yt,st=new Fi){if("Ascending"===mt)st.sortBy(yt,"ascending",!0);else if("Descending"===mt)st.sortBy(yt,"descending",!0);else for(let Ce=0;Ce<st.queries.length;Ce++)"onSortBy"===st.queries[Ce].fn&&st.queries.splice(Ce,1);return st}function _(mt,yt){return new Nt(mt).executeLocal(yt)}function L(mt){for(let st=0;st<mt.length;st++)if(!m(mt[st]))return{typeof:typeof mt[st],item:mt[st]};return{typeof:null,item:null}}function V(mt,yt){const st={};qc(st,yt),st.class&&(j([mt],st.class.split(" ")),delete st.class),bt(mt,st)}function H(mt){const yt={},st=mt.attributes;for(let Ce=0;Ce<st.length;Ce++)yt[st[Ce].nodeName]=st[Ce].nodeValue;return yt}function re(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function Ae(mt,yt,st,Ce,ke,Re,me){const we=yt[st.child]||[];let Ke=yt[st.hasChildren];if(we.length&&(Ke=!0,Re.classList.add(li.hasChild),ke.processSubChild)){const Ut=a(mt,we,ke,++me);Re.appendChild(Ut)}ke.expandCollapse&&Ke&&!ke.template&&(Re.firstElementChild.classList.add(li.iconWrapper),("Left"===ke.expandIconPosition?Tr:Pi)([mt("div",{className:"e-icons "+ke.expandIconClass})],Re.querySelector("."+li.textContent)))}function gt(mt,yt,st,Ce,ke,Re,me,we,Ke,Ut){const ki=ut({},t,Ut),oi=ut({},e,ki.ariaAttributes);let zi,Vt,os=yt,ss=yt;"string"!=typeof yt&&"number"!=typeof yt&&"boolean"!=typeof yt&&(zi=yt,os="boolean"==typeof st[Ce.text]||"number"==typeof st[Ce.text]?st[Ce.text]:st[Ce.text]||"",ss=st[Ce.value]),Vt=m(zi)||m(st[Ce.id])||""===st[Ce.id]?we+"-"+Ke:we;const oe=mt("li",{className:(!0===me?li.group:li.li)+" "+(m(ke)?"":ke),id:Vt,attrs:""!==oi.groupItemRole&&""!==oi.itemRole?{role:!0===me?oi.groupItemRole:oi.itemRole}:{}});return zi&&st.hasOwnProperty(Ce.enabled)&&"false"===st[Ce.enabled].toString()&&oe.classList.add(li.disabled),me?oe.innerText=os:(oe.setAttribute("data-value",m(ss)?"null":ss),oe.setAttribute("role","option"),zi&&st.hasOwnProperty(Ce.htmlAttributes)&&st[Ce.htmlAttributes]&&V(oe,st[Ce.htmlAttributes]),Re.length&&!ki.itemNavigable&&Pi(Re,oe),zi&&(st[Ce.url]||st[Ce.urlAttributes]&&st[Ce.urlAttributes].href)?oe.appendChild(ri(mt,zi,Ce,os,Re,ki.itemNavigable)):(Re.length&&ki.itemNavigable&&Pi(Re,oe),oe.appendChild(document.createTextNode(os)))),oe}function ot(mt){return{li:`e-${mt}-item`,ul:`e-${mt}-parent e-ul`,group:`e-${mt}-group-item`,icon:`e-${mt}-icon`,text:`e-${mt}-text`,check:`e-${mt}-check`,checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:`e-${mt}-url`,collapsible:"e-icon-collapsible",disabled:"e-disabled",image:`e-${mt}-img`,iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"}}function ri(mt,yt,st,Ce,ke,Re){const me=ab(yt,st),we={href:me[st.url]};let Ke;if(me.hasOwnProperty(st.urlAttributes)&&me[st.urlAttributes]&&(qc(we,me[st.urlAttributes]),we.href=me[st.url]?me[st.url]:me[st.urlAttributes].href),Re){Ke=mt("a",{className:li.text+" "+li.url});const Ut=mt("div",{className:li.anchorWrap});ke&&ke.length&&Pi(ke,Ut),Ut.appendChild(document.createTextNode(Ce)),Pi([Ut],Ke)}else Ke=mt("a",{className:li.text+" "+li.url,innerHTML:Ce});return V(Ke,we),Ke}function jt(mt,yt,st,Ce,ke,Re,me){const we=ut({},t,Re),Ke=ut({},e,we.ariaAttributes);let ki,oi,os,Ut=yt;"string"!=typeof yt&&"number"!=typeof yt&&(os=yt,Ut=st[Ce.text]||"",ki=m(st._id)?st[Ce.id]:st._id,oi=!(!yt.hasOwnProperty("isHeader")||!yt.isHeader));const ss=mt("li",{className:(!0===oi?li.group:li.li)+" "+(m(ke)?"":ke),attrs:""!==Ke.groupItemRole&&""!==Ke.itemRole?{role:!0===oi?Ke.groupItemRole:Ke.itemRole}:{}});if(m(ki)?ss.setAttribute("data-uid",re()):ss.setAttribute("data-uid",ki),oi&&Re&&Re.groupTemplate){const zi=oE(Re.groupTemplate);if(me&&"listview"!=me.getModuleName()){const Vt=zi(yt,me,"groupTemplate",we.groupTemplateID,!!we.isStringTemplate,null,ss);Vt&&Pi(Vt,ss)}else Pi(zi(yt,me,"groupTemplate",we.groupTemplateID,!!we.isStringTemplate),ss)}else if(!oi&&Re&&Re.template){const zi=oE(Re.template);if(me&&"listview"!=me.getModuleName()){const Vt=zi(yt,me,"template",we.templateID,!!we.isStringTemplate,null,ss);Vt&&Pi(Vt,ss)}else Pi(zi(yt,me,"template",we.templateID,!!we.isStringTemplate),ss)}else{const zi=mt("div",{className:li.textContent,attrs:""!==Ke.wrapperRole?{role:Ke.wrapperRole}:{}});if(os&&(st[Ce.url]||st[Ce.urlAttributes]&&st[Ce.urlAttributes].href))zi.appendChild(ri(mt,os,Ce,Ut,null,we.itemNavigable));else{const Vt=mt("span",{className:li.text,attrs:""!==Ke.itemText?{role:Ke.itemText}:{}});Re&&Re.enableHtmlSanitizer?Vt.innerText=Ut:Vt.innerHTML=Ut,zi.appendChild(Vt)}ss.appendChild(zi)}return ss}function Ai(mt,yt,st,Ce){const ke=ut({},t,Ce),Re=ut({},e,ke.ariaAttributes);li=ot(ke.moduleName);const me=mt("ul",{className:li.ul+" "+(m(st)?"":st),attrs:""!==Re.listRole?{role:Re.listRole}:{}});return Pi(yt,me),me}n.createList=function i(mt,yt,st,Ce,ke){const Re=ut({},t,st),me=ut({},e,Re.ariaAttributes),we=L(yt).typeof;return"string"===we||"number"===we?s(mt,yt,Ce,st,ke):a(mt,yt,st,me.level,Ce,ke)},n.createListFromArray=s,n.createListItemFromArray=r,n.createListItemFromJson=o,n.createListFromJson=a,n.getSiblingLI=function u(mt,yt,st){if(li=ot(t.moduleName),!mt||!mt.length)return;let Ce,ke;const Re=Array.prototype.slice.call(mt);for(ke=yt?p(yt,Re):!0===st?Re.length:-1,Ce=Re[ke+(!0===st?-1:1)];Ce&&(!zn(Ce)||Ce.classList.contains(li.disabled));)ke+=!0===st?-1:1,Ce=Re[ke];return Ce},n.indexOf=p,n.groupDataSource=function y(mt,yt,st="None"){const Ce=ut({},n.defaultMappedFields,yt);let ke=(new Fi).group(Ce.groupBy);ke=E(st,"key",ke);const Re=_(mt,ke);mt=[];for(let me=0;me<Re.length;me++){const we=Re[me].items,Ke={},Ut="isHeader";Ke[Ce.text]=Re[me].key,Ke[Ut]=!0;let ki=Ce.text;"id"===ki&&(ki="text",Ke[ki]=Re[me].key),Ke._id="group-list-item-"+(Re[me].key?Re[me].key.toString().trim():"undefined"),Ke.items=we,mt.push(Ke);for(let oi=0;oi<we.length;oi++)mt.push(we[oi])}return mt},n.addSorting=E,n.getDataSource=_,n.createJsonFromElement=function D(mt,yt){const st=ut({},t,yt),Ce=ut({},n.defaultMappedFields,st.fields),ke=mt.cloneNode(!0),Re=[];ke.classList.add("json-parent");const me=ke.querySelectorAll(".json-parent>li");ke.classList.remove("json-parent");for(let we=0;we<me.length;we++){const Ke=me[we],Ut=Ke.querySelector("a"),ki=Ke.querySelector("ul"),oi={},os=Ut?Ut.childNodes:Ke.childNodes,ss=Object.keys(os);for(let Vt=0;Vt<os.length;Vt++)os[Number(ss[Vt])].hasChildNodes()||(oi[Ce.text]=os[Number(ss[Vt])].textContent);let zi=H(Ke);zi.id?(oi[Ce.id]=zi.id,delete zi.id):oi[Ce.id]=re(),Object.keys(zi).length&&(oi[Ce.htmlAttributes]=zi),Ut&&(zi=H(Ut),Object.keys(zi).length&&(oi[Ce.urlAttributes]=zi)),ki&&(oi[Ce.child]=D(ki,yt)),Re.push(oi)}return Re},n.renderContentTemplate=function se(mt,yt,st,Ce,ke,Re){li=ot(t.moduleName);const me=mt("ul",{className:li.ul,attrs:{role:"presentation"}}),we=ut({},t,ke),Ke=ut({},n.defaultMappedFields,Ce),Ut=oE(yt),ki=[];let oi;const os=re();for(let ss=0;ss<st.length;ss++){let zi=ab(st[ss],Ke);const Vt=st[ss],oe=Vt.isHeader;oi="string"==typeof st[ss]||"number"==typeof st[ss]?Vt:zi[Ke.value],we.itemCreating&&"function"==typeof we.itemCreating&&we.itemCreating({dataSource:st,curData:Vt,text:oi,options:we,fields:Ke}),we.itemCreating&&"function"==typeof we.itemCreating&&(zi=ab(st[ss],Ke),oi="string"==typeof st[ss]||"number"==typeof st[ss]?Vt:zi[Ke.value]);const pe=mt("li",{id:os+"-"+ss,className:oe?li.group:li.li,attrs:{role:"presentation"}});if(oe)pe.innerText="string"==typeof st[ss]||"number"==typeof st[ss]?Vt:zi[Ke.text];else{const nt=oe?we.groupTemplateID:we.templateID;if(oe)if(Re&&"listview"!=Re.getModuleName()){const qt=Ut(Vt,Re,"headerTemplate",nt,!!we.isStringTemplate,null,pe);qt&&Pi(qt,pe)}else Pi(Ut(Vt,Re,"headerTemplate",nt,!!we.isStringTemplate),pe);else if(Re&&"listview"!=Re.getModuleName()){const qt=Ut(Vt,Re,"template",nt,!!we.isStringTemplate,null,pe);qt&&Pi(qt,pe)}else Pi(Ut(Vt,Re,"template",nt,!!we.isStringTemplate),pe);pe.setAttribute("data-value",m(oi)?"null":oi),pe.setAttribute("role","option")}we.itemCreated&&"function"==typeof we.itemCreated&&we.itemCreated({dataSource:st,curData:Vt,text:oi,item:pe,options:we,fields:Ke}),ki.push(pe)}return Pi(ki,me),me},n.renderGroupTemplate=function _e(mt,yt,st,Ce,ke,Re){const me=oE(mt),we=ut({},n.defaultMappedFields,st),Ke=ut({},t,ke),Ut=we.groupBy;for(const ki of Ce){const oi={};if(oi[Ut]=ki.textContent,ki.innerHTML="",Re&&"listview"!=Re.getModuleName()){const os=me(oi,Re,"groupTemplate",Ke.groupTemplateID,!!Ke.isStringTemplate,null,ki);os&&Pi(os,ki)}else Pi(me(oi,Re,"groupTemplate",Ke.groupTemplateID,!!Ke.isStringTemplate),ki)}return Ce},n.generateId=re,n.generateUL=Ai,n.generateIcon=function rr(mt,yt,st,Ce){const ke=ut({},t,Ce);return li=ot(ke.moduleName),("Left"===ke.expandIconPosition?Tr:Pi)([mt("div",{className:"e-icons "+ke.expandIconClass+" "+(m(st)?"":st)})],yt.querySelector("."+li.textContent)),yt}}(ds||(ds={}));var A_,Dh=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let dc=A_=class extends Gc{constructor(e,t){super(t,e),this.getHelper=i=>{let r,s=this.getSortableElement(i.sender.target);return!!this.isValidTarget(s,this)&&(this.helper?r=this.helper({sender:s,element:i.element}):(r=s.cloneNode(!0),r.style.width=`${s.offsetWidth}px`,r.style.height=`${s.offsetHeight}px`),j([r],["e-sortableclone"]),document.body.appendChild(r),r)},this.onDrag=i=>{this.trigger("drag",{event:i.event,element:this.element,target:i.target});let s=this.getSortableInstance(i.target),r=this.getSortableElement(i.target,s);if((this.isValidTarget(r,s)||i.target.className.indexOf("e-list-group-item")>-1)&&(this.curTarget!==r||!m(s.placeHolder))&&(!s.placeHolderElement||s.placeHolderElement!==i.target)){if(i.target.className.indexOf("e-list-group-item")>-1&&(r=i.target),this.curTarget=r,this.target===r)return;let o=this.getIndex(s.placeHolderElement,s);const a=this.getPlaceHolder(r,s);let u;if(a){o=m(o)?this.getIndex(this.target):o,u=this.getIndex(r,s,i.event);const p=this.isPlaceHolderPresent(s);if(p&&o===u)return;p&&Ms(s.placeHolderElement),s.placeHolderElement=a,i.target.className.indexOf("e-list-group-item")>-1?s.element.insertBefore(s.placeHolderElement,s.element.children[u]):s.element!==this.element&&u===s.element.childElementCount?s.element.appendChild(s.placeHolderElement):s.element.insertBefore(s.placeHolderElement,s.element.children[u]),this.refreshDisabled(o,u,s)}else{o=m(o)?this.getIndex(this.target):this.getIndex(r,s)<o||!o?o:o-1,u=this.getIndex(r,s);const p=s.element!==this.element?u:o<u?u+1:u;this.updateItemClass(s),s.element.insertBefore(this.target,s.element.children[p]),this.refreshDisabled(o,u,s),this.curTarget=this.target,this.trigger("drop",{droppedElement:this.target,element:s.element,previousIndex:o,currentIndex:u,target:i.target,helper:document.getElementsByClassName("e-sortableclone")[0],event:i.event,scope:this.scope})}}if(s=this.getSortableInstance(this.curTarget),m(r)&&i.target!==s.placeHolderElement)this.isPlaceHolderPresent(s)&&this.removePlaceHolder(s);else{let a;[].slice.call(document.getElementsByClassName("e-sortable-placeholder")).forEach(u=>{a=this.getSortableInstance(u),a.element&&a!==s&&this.removePlaceHolder(a)})}},this.onDragStart=i=>{this.target=this.getSortableElement(i.target);let s=!1;this.target.classList.add("e-grabbed"),this.curTarget=this.target,i.helper=document.getElementsByClassName("e-sortableclone")[0],this.trigger("beforeDragStart",{cancel:!1,element:this.element,target:this.target},o=>{o.cancel&&(s=o.cancel,this.onDragStop(i))}),!s&&this.trigger("dragStart",Ft?{event:i.event,element:this.element,target:this.target,bindEvents:i.bindEvents,dragElement:i.dragElement}:{event:i.event,element:this.element,target:this.target})},this.onDragStop=i=>{let r,o,a,s=this.getSortableInstance(this.curTarget);r=this.getIndex(this.target);const u=this.isPlaceHolderPresent(s);if(u){const p=this.getIndex(s.placeHolderElement,s);this.trigger("beforeDrop",{previousIndex:r,currentIndex:p,target:i.target,droppedElement:this.target,helper:i.helper,cancel:!1,handled:!1},E=>{if(!E.cancel){if(a=E.handled,this.updateItemClass(s),E.handled){const D=this.target.cloneNode(!0);this.target.classList.remove("e-grabbed"),this.target=D}s.element.insertBefore(this.target,s.placeHolderElement);const _=this.getIndex(this.target,s);r=this===s&&r-_>1?r-1:r,this.trigger("drop",{event:i.event,element:s.element,previousIndex:r,currentIndex:_,target:i.target,helper:i.helper,droppedElement:this.target,scopeName:this.scope,handled:a})}Ms(s.placeHolderElement)})}s=this.getSortableInstance(i.target),o=s.element.childElementCount,r=this.getIndex(this.target),(s.element===i.target||!u&&this.curTarget===this.target)&&this.trigger("beforeDrop",{previousIndex:r,currentIndex:this.curTarget===this.target?r:o,target:i.target,droppedElement:this.target,helper:i.helper,cancel:!1},y=>{s.element===i.target&&!y.cancel&&(this.updateItemClass(s),s.element.appendChild(this.target),this.trigger("drop",{event:i.event,element:s.element,previousIndex:r,currentIndex:o,target:i.target,helper:i.helper,droppedElement:this.target,scopeName:this.scope}))}),this.target.classList.remove("e-grabbed"),this.target=null,this.curTarget=null,Ms(i.helper),Oo(this.element,Us).intDestroy(i.event)},this.bind()}bind(){this.element.id||(this.element.id=Ks("sortable")),this.itemClass||(this.itemClass="e-sort-item",this.dataBind()),this.initializeDraggable()}initializeDraggable(){new Us(this.element,{helper:this.getHelper,dragStart:this.onDragStart,drag:this.onDrag,dragStop:this.onDragStop,dragTarget:`.${this.itemClass}`,enableTapHold:!0,tapHoldThreshold:200,queryPositionInfo:this.queryPositionInfo,distance:5})}getPlaceHolder(e,t){if(t.placeHolder){const i=t.placeHolder({element:t.element,grabbedElement:this.target,target:e});return i.classList.add("e-sortable-placeholder"),i}return null}isValidTarget(e,t){return e&&Pv(e,t.element)&&e.classList.contains(t.itemClass)&&!e.classList.contains("e-disabled")}removePlaceHolder(e){Ms(e.placeHolderElement),e.placeHolderElement=null}updateItemClass(e){this!==e&&(this.target.classList.remove(this.itemClass),this.target.classList.add(e.itemClass))}getSortableInstance(e){if(e=ae(e,`.e-${this.getModuleName()}`)){const t=Oo(e,A_);return t.scope&&this.scope&&t.scope===this.scope?t:this}return this}refreshDisabled(e,t,i){if(i===this){let s;const r=e<t;let o,a=r?e:t;const u=r?t:e;for(;a<=u;)s=this.element.children[a],s.classList.contains("e-disabled")?(o=this.getIndex(s),this.element.insertBefore(s,this.element.children[r?o+2:o-1]),a=r?o+2:o+1):a++}}getIndex(e,t=this,i){let s,r;return[].slice.call(t.element.children).forEach((o,a)=>{if(o.classList.contains("e-sortable-placeholder")&&(r=!0),o!==e);else if(s=a,!m(i)){r&&(s-=1);const u=e.getBoundingClientRect();s=i.clientY<=u.bottom-(u.bottom-u.top)/2?s:s+1}}),s}getSortableElement(e,t=this){return ae(e,`.${t.itemClass}`)}queryPositionInfo(e){return e.left=pageXOffset?parseFloat(e.left)-pageXOffset+"px":e.left,e.top=pageYOffset?parseFloat(e.top)-pageYOffset+"px":e.top,e}isPlaceHolderPresent(e){return e.placeHolderElement&&!!ae(e.placeHolderElement,`#${e.element.id}`)}moveTo(e,t,i){lE(this.element,e,t,i)}destroy(){"e-sort-item"===this.itemClass&&(this.itemClass=null,this.dataBind()),Oo(this.element,Us).destroy(),super.destroy()}getModuleName(){return"sortable"}onPropertyChanged(e,t){for(const i of Object.keys(e))"itemClass"===i&&[].slice.call(this.element.children).forEach(s=>{s.classList.contains(t.itemClass)&&s.classList.remove(t.itemClass),e.itemClass&&s.classList.add(e.itemClass)})}};function lE(n,e,t,i){let s=[];if(e||(e=n),t&&t.length?t.forEach(r=>{s.push(n.children[r])}):s=[].slice.call(n.children),m(i))s.forEach(r=>{e.appendChild(r)});else{const r=e.children[i];s.forEach(o=>{e.insertBefore(o,r)})}}Dh([A(!1)],dc.prototype,"enableAnimation",void 0),Dh([A(null)],dc.prototype,"itemClass",void 0),Dh([A(null)],dc.prototype,"scope",void 0),Dh([A()],dc.prototype,"helper",void 0),Dh([A()],dc.prototype,"placeHolder",void 0),Dh([Z()],dc.prototype,"drag",void 0),Dh([Z()],dc.prototype,"beforeDragStart",void 0),Dh([Z()],dc.prototype,"dragStart",void 0),Dh([Z()],dc.prototype,"beforeDrop",void 0),Dh([Z()],dc.prototype,"drop",void 0),dc=A_=Dh([ts],dc);var Zg=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};function lb(n,e){const t=ut({},n);for(const i of Object.keys(t))e.indexOf(i)<0&&MT(t,i);return t}function zP(n,e){const t=40===e?0:n.childElementCount-1;let s,i=t;const r=n.querySelector(".e-selected");r&&r.classList.remove("e-selected");for(let o=0,a=n.children.length;o<a;o++)n.children[o].classList.contains("e-focused")&&(s=n.children[o],i=o,s.classList.remove("e-focused"),40===e?i++:i--,i===(40===e?n.childElementCount:-1)&&(i=t));s=n.children[i],i=Xg(n,s,i,e),-1!==i&&(j([n.children[i]],"e-focused"),n.children[i].focus())}function Xg(n,e,t,i,s=0){if((e.classList.contains("e-separator")||e.classList.contains("e-disabled"))&&(t===(40===i?n.childElementCount-1:0)?t=40===i?0:n.childElementCount-1:40===i?t++:t--),(e=n.children[t]).classList.contains("e-separator")||e.classList.contains("e-disabled")){if(++s===n.childElementCount)return-1;t=Xg(n,e,t,i,s)}return t}let cb=(()=>{class n extends Is{}return Zg([A("")],n.prototype,"iconCss",void 0),Zg([A("")],n.prototype,"id",void 0),Zg([A(!1)],n.prototype,"separator",void 0),Zg([A("")],n.prototype,"text",void 0),Zg([A("")],n.prototype,"url",void 0),Zg([A(!1)],n.prototype,"disabled",void 0),n})();var qn=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let Ur=class extends Ls{constructor(e,t){super(e,t),this.isPopupCreated=!0}preRender(){}getPersistData(){return this.addOnPersist([])}toggle(){this.canOpen()?this.openPopUp():this.closePopup()}render(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete()}addItems(e,t){let i,s=this.items.length;for(let r=0,o=this.items.length;r<o;r++)if(t===this.items[r].text){s=r;break}for(let r=e.length-1;r>=0;r--)i=new cb(this,"items",e[r],!0),this.items.splice(s,0,i);this.canOpen()||this.createItems()}removeItems(e,t){let i=!1;for(let s=0,r=e.length;s<r;s++)for(let o=0,a=this.items.length;o<a;o++)if(e[s]===(t?this.items[o].id:this.items[o].text)){this.items.splice(o,1),i=!0;break}i&&this.getULElement()&&this.createItems()}createPopup(){const e=this.createElement("div",{className:"e-dropdown-popup",id:this.element.id+"-popup"});document.body.appendChild(e),this.dropDown=new Th(e,{relateTo:this.element,collision:{X:"fit",Y:"flip"},position:{X:"left",Y:"bottom"},targetType:"relative",content:this.target?this.getTargetElement():"",enableRtl:this.enableRtl}),"fixed"===this.dropDown.element.style.position&&this.dropDown.refreshPosition(this.element),this.dropDown.hide(),bt(this.element,{"aria-haspopup":this.items.length||this.target?"true":"false","aria-expanded":"false","aria-owns":this.getPopUpElement().id,type:"button","aria-label":this.element.textContent+" dropdownbutton"}),this.cssClass&&j([e],this.cssClass.split(" ")),this.isPopupCreated=!0}getTargetElement(){return"string"==typeof this.target?X(this.target):this.target}createItems(e){const t=this.items,i=this.hasIcon(this.items,"iconCss");let s,r,o,a,u=this.getULElement();u?u.innerHTML="":u=this.createElement("ul",{attrs:{role:"menu",tabindex:"0"}});for(let p=0;p<t.length;p++){r=t[p];const y=this.enableHtmlSanitizer?_n.sanitize(r.text):r.text;o=this.createElement("li",{innerHTML:r.url?"":y,className:r.separator?"e-item e-separator":"e-item",attrs:{role:"menuItem",tabindex:"-1"},id:r.id?r.id:Ks("e-"+this.getModuleName()+"-item")}),r.url&&(o.appendChild(this.createAnchor(r)),o.classList.add("e-url")),r.iconCss?(s=this.createElement("span",{className:"e-menu-icon "+r.iconCss}),r.url?o.childNodes[0].appendChild(s):o.insertBefore(s,o.childNodes[0])):i&&!r.separator&&o.classList.add("e-blank-icon"),r.disabled&&o.classList.add("e-disabled"),a={item:r,element:o},this.trigger("beforeItemRender",a),u.appendChild(o)}e&&this.getPopUpElement().appendChild(u),i&&function WP(n){const e=[].slice.call(n.getElementsByClassName("e-blank-icon"));if(!e.length)return;let t=n.querySelector(".e-item:not(.e-blank-icon):not(.e-separator)");if(m(t))return;t.classList.contains("e-url")&&(t=t.querySelector(".e-menu-url"));const i=t.querySelector(".e-menu-icon");let s;const r=n.classList.contains("e-rtl");s=r?{padding:"paddingRight",margin:"marginLeft"}:{padding:"paddingLeft",margin:"marginRight"};let o=`${parseInt(getComputedStyle(i).fontSize,10)+parseInt(getComputedStyle(i)[s.margin],10)+parseInt(getComputedStyle(t).paddingLeft,10)}px`;e.forEach(a=>{a.classList.contains("e-url")?a.querySelector(".e-menu-url").style[s.padding]=o:a.style[s.padding]=o})}(this.getPopUpElement())}hasIcon(e,t){for(let i=0,s=e.length;i<s;i++)if(e[i][t])return!0;return!1}createAnchor(e){const t=this.enableHtmlSanitizer?_n.sanitize(e.text):e.text;return this.createElement("a",{className:"e-menu-text e-menu-url",innerHTML:t,attrs:{href:e.url}})}initialize(){this.button=new Ip({iconCss:this.iconCss,iconPosition:this.iconPosition,cssClass:this.cssClass,content:this.content,disabled:this.disabled,enableRtl:this.enableRtl,enablePersistence:this.enablePersistence}),this.button.createElement=this.createElement,this.button.appendTo(this.element),this.element.id||(this.element.id=Ks("e-"+this.getModuleName())),this.appendArrowSpan(),this.setActiveElem([this.element]),this.target&&!this.isColorPicker()||!this.createPopupOnClick?this.createPopup():this.isPopupCreated=!1}isColorPicker(){if(!this.element)return!1;const e=this.element.previousSibling;return!!(e&&e.classList&&e.classList.contains("e-split-colorpicker"))}appendArrowSpan(){this.element.appendChild(this.createElement("span",{className:"e-btn-icon e-icons e-icon-"+(this.cssClass.indexOf("e-vertical")>-1?"bottom":"right")+" e-caret"}))}setActiveElem(e){this.activeElem=e}getModuleName(){return"dropdown-btn"}canOpen(){let e=!1;return this.isPopupCreated&&(e=this.getPopUpElement().classList.contains("e-popup-close")),e}destroy(){if(super.destroy(),"dropdown-btn"===this.getModuleName()){let e;this.element.querySelector("span.e-caret")&&ye(this.element.querySelector("span.e-caret")),this.cssClass&&(e=this.cssClass.split(" ")),this.button.destroy(),e&&Y([this.element],e),Y(this.activeElem,["e-active"]),(this.element.getAttribute("class")?["aria-haspopup","aria-expanded","aria-owns","type"]:["aria-haspopup","aria-expanded","aria-owns","type","class"]).forEach(i=>{this.element.removeAttribute(i)}),this.popupUnWireEvents(),this.destroyPopup(),this.isPopupCreated=!1,this.disabled||this.unWireEvents()}}destroyPopup(){if(this.isPopupCreated){if(this.dropDown.destroy(),this.getPopUpElement()){const e=document.getElementById(this.getPopUpElement().id);e&&(Y([e],["e-popup-open","e-popup-close"]),ye(e))}O.remove(this.getPopUpElement(),"click",this.clickHandler),O.remove(this.getPopUpElement(),"keydown",this.keyBoardHandler),this.isPopupCreated&&(this.dropDown=void 0)}this.isPopupCreated=!1}getPopUpElement(){let e=null;return this.dropDown&&(e=this.dropDown.element),e}getULElement(){let e=null;return this.getPopUpElement()&&(e=this.getPopUpElement().children[0]),e}wireEvents(){this.delegateMousedownHandler=this.mousedownHandler.bind(this),this.createPopupOnClick||O.add(document,"mousedown touchstart",this.delegateMousedownHandler,this),O.add(this.element,"click",this.clickHandler,this),O.add(this.element,"keydown",this.keyBoardHandler,this)}popupWireEvents(){const e=this.getPopUpElement();this.createPopupOnClick&&O.add(document,"mousedown touchstart",this.delegateMousedownHandler,this),e&&(O.add(e,"click",this.clickHandler,this),O.add(e,"keydown",this.keyBoardHandler,this)),this.rippleFn=da(e,{selector:".e-item"})}popupUnWireEvents(){const e=this.getPopUpElement();this.createPopupOnClick&&O.remove(document,"mousedown touchstart",this.delegateMousedownHandler),e&&e.parentElement&&(O.remove(e,"click",this.clickHandler),O.remove(e,"keydown",this.keyBoardHandler))}keyBoardHandler(e){if(e.target!==this.element||9!==e.keyCode&&(e.altKey||40!==e.keyCode)&&38!==e.keyCode)switch(e.keyCode){case 38:case 40:!e.altKey||38!==e.keyCode&&40!==e.keyCode?this.upDownKeyHandler(e):this.keyEventHandler(e);break;case 9:case 13:case 27:case 32:this.keyEventHandler(e)}}upDownKeyHandler(e){this.target&&(38===e.keyCode||40===e.keyCode)||(e.preventDefault(),zP(this.getULElement(),e.keyCode))}keyEventHandler(e){this.target&&(13===e.keyCode||9===e.keyCode)||e.target&&e.target.className.indexOf("e-edit-template")>-1&&32===e.keyCode||(9!==e.keyCode&&e.preventDefault(),27===e.keyCode||38===e.keyCode||9===e.keyCode?this.canOpen()||this.closePopup(e,this.element):this.clickHandler(e))}getLI(e){return"LI"===e.tagName?e:ae(e,"li")}mousedownHandler(e){const t=e.target;this.dropDown&&!this.canOpen()&&!ae(t,'[id="'+this.getPopUpElement().id+'"]')&&!ae(t,'[id="'+this.element.id+'"]')&&this.closePopup(e)}clickHandler(e){const t=e.target;if(ae(t,'[id="'+this.element.id+'"]'))!this.createPopupOnClick||this.target&&!this.isColorPicker()?this.getPopUpElement().classList.contains("e-popup-close")?this.openPopUp(e):this.closePopup(e):this.isPopupCreated?this.closePopup(e,this.activeElem[0]):(this.createPopup(),this.openPopUp(e));else if(ae(t,'[id="'+this.getPopUpElement().id+'"]')){let i,s,r;const o=this.getLI(t);o&&(s=Array.prototype.indexOf.call(this.getULElement().children,o),r=this.items[s],r&&(i={element:o,item:r},this.trigger("select",i)),this.closePopup(e,this.activeElem[0]))}}openPopUp(e=null){const t=this.getPopUpElement();if(this.target)if(this.activeElem.length>1){let r=Oo(this.activeElem[0],"split-btn");r.isReact&&t.childNodes.length<1&&r.appendReactElement(this.getTargetElement(),this.getPopUpElement())}else this.isReact&&t.childNodes.length<1&&this.appendReactElement(this.getTargetElement(),this.getPopUpElement());else this.createItems(!0);const i=this.getULElement();this.popupWireEvents(),this.trigger("beforeOpen",{element:i,items:this.items,event:e,cancel:!1},r=>{if(!r.cancel){const o=this.getULElement();this.dropDown.show(null,this.element),j([this.element],"e-active"),this.element.setAttribute("aria-expanded","true"),o.focus(),this.trigger("open",{element:o,items:this.items})}})}closePopup(e=null,t){const s={element:this.getULElement(),items:this.items,event:e,cancel:!1};let r=this.getPopUpElement();r&&O.remove(r,"keydown",this.keyBoardHandler),this.trigger("beforeClose",s,o=>{if(!o.cancel){this.popupUnWireEvents();const a=this.getULElement(),u=a.querySelector(".e-selected");u&&u.classList.remove("e-selected"),this.dropDown.hide(),Y(this.activeElem,"e-active"),this.element.setAttribute("aria-expanded","false"),t&&t.focus(),this.trigger("close",{element:a,items:this.items}),!this.target&&a&&ye(a),(!this.target||this.isColorPicker())&&this.createPopupOnClick&&this.destroyPopup(),this.target&&(this.isPopupCreated=!this.createPopupOnClick)}})}unWireEvents(){this.createPopupOnClick||O.remove(document,"mousedown touchstart",this.delegateMousedownHandler),O.remove(this.element,"click",this.clickHandler),O.remove(this.element,"keydown",this.keyBoardHandler),this.isPopupCreated&&(O.remove(this.getPopUpElement(),"click",this.clickHandler),O.remove(this.getPopUpElement(),"keydown",this.keyBoardHandler))}onPropertyChanged(e,t){let s;this.button.setProperties(lb(e,["content","cssClass","iconCss","iconPosition","disabled","enableRtl"])),this.isPopupCreated&&(s=this.getPopUpElement(),this.dropDown.setProperties(lb(e,["enableRtl"])));for(const r of Object.keys(e))switch(r){case"content":this.element.querySelector("span.e-caret")||this.appendArrowSpan();break;case"disabled":e.disabled?(this.unWireEvents(),this.isPopupCreated&&!this.canOpen()&&this.closePopup()):this.wireEvents();break;case"cssClass":e.cssClass.indexOf("e-vertical")>-1&&ua(this.element.querySelector("span.e-caret"),["e-icon-bottom"],["e-icon-right"]),this.isPopupCreated&&(t.cssClass&&Y([s],t.cssClass.split(" ")),e.cssClass&&j([s],e.cssClass.split(" ")));break;case"target":this.dropDown.content=this.getTargetElement(),this.dropDown.dataBind();break;case"items":this.isPopupCreated&&this.getULElement()&&this.createItems();break;case"createPopupOnClick":e.createPopupOnClick?this.destroyPopup():this.createPopup()}}focusIn(){this.element.focus()}};qn([A("")],Ur.prototype,"content",void 0),qn([A("")],Ur.prototype,"cssClass",void 0),qn([A(!1)],Ur.prototype,"disabled",void 0),qn([A("")],Ur.prototype,"iconCss",void 0),qn([A("Left")],Ur.prototype,"iconPosition",void 0),qn([A(!1)],Ur.prototype,"enableHtmlSanitizer",void 0),qn([cl([],cb)],Ur.prototype,"items",void 0),qn([A(!1)],Ur.prototype,"createPopupOnClick",void 0),qn([A("")],Ur.prototype,"target",void 0),qn([Z()],Ur.prototype,"beforeItemRender",void 0),qn([Z()],Ur.prototype,"beforeOpen",void 0),qn([Z()],Ur.prototype,"beforeClose",void 0),qn([Z()],Ur.prototype,"close",void 0),qn([Z()],Ur.prototype,"open",void 0),qn([Z()],Ur.prototype,"select",void 0),qn([Z()],Ur.prototype,"created",void 0),Ur=qn([ts],Ur);var Qr=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const cE="e-rtl",D_="EJS-SPLITBUTTON";let Po=class extends Ur{constructor(e,t){super(e,t)}preRender(){let e=this.element;if(e.tagName===D_){const t=J("ej2_instances",e),i=this.createElement("button",{attrs:{type:"button"}}),s=this.createElement(D_,{className:"e-"+this.getModuleName()+"-wrapper"});for(let r=0,o=e.attributes.length;r<o;r++)i.setAttribute(e.attributes[r].nodeName,e.attributes[r].nodeValue);e.parentNode.insertBefore(s,e),ye(e),e=i,s.appendChild(e),pi("ej2_instances",t,e),this.wrapper=s,this.element=e}this.element.id||(this.element.id=Ks("e-"+this.getModuleName()))}render(){this.initWrapper(),this.createPrimaryButton(),this.renderControl()}renderControl(){this.createSecondaryButton(),this.setActiveElem([this.element,this.secondaryBtnObj.element]),this.setAria(),this.wireEvents(),this.renderComplete()}addItems(e,t){super.addItems(e,t),this.secondaryBtnObj.items=this.items}removeItems(e,t){super.removeItems(e,t),this.secondaryBtnObj.items=this.items}initWrapper(){this.wrapper||(this.wrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.element.parentNode.insertBefore(this.wrapper,this.element)),this.element.classList.remove("e-"+this.getModuleName()),this.enableRtl&&this.wrapper.classList.add(cE),this.cssClass&&j([this.wrapper],this.cssClass.split(" "))}createPrimaryButton(){this.primaryBtnObj=new Ip({cssClass:this.cssClass,enableRtl:this.enableRtl,iconCss:this.iconCss,iconPosition:this.iconPosition,content:this.content,disabled:this.disabled}),this.primaryBtnObj.createElement=this.createElement,this.primaryBtnObj.appendTo(this.element),this.element.classList.add("e-"+this.getModuleName()),this.element.type="button",this.wrapper.appendChild(this.element)}createSecondaryButton(){const e=this.createElement("button",{className:"e-icon-btn",attrs:{tabindex:"-1"},id:this.element.id+"_dropdownbtn"});this.wrapper.appendChild(e);const t={cssClass:this.cssClass,disabled:this.disabled,enableRtl:this.enableRtl,items:this.items,target:this.target,createPopupOnClick:this.createPopupOnClick};t.beforeItemRender=i=>{this.createPopupOnClick&&(this.secondaryBtnObj.dropDown.relateTo=this.wrapper,this.dropDown=this.secondaryBtnObj.dropDown),this.trigger("beforeItemRender",i)},t.open=i=>{this.trigger("open",i)},t.close=i=>{this.trigger("close",i)},t.select=i=>{this.trigger("select",i)},t.beforeOpen=i=>{const s=new Yf;return this.trigger("beforeOpen",i,r=>{s.resolve(r)}),s},t.beforeClose=i=>{const s=new Yf;return this.trigger("beforeClose",i,r=>{s.resolve(r)}),s},this.secondaryBtnObj=new Ur(t),this.secondaryBtnObj.createElement=this.createElement,this.secondaryBtnObj.appendTo(e),this.createPopupOnClick||(this.secondaryBtnObj.dropDown.relateTo=this.wrapper,this.dropDown=this.secondaryBtnObj.dropDown),this.secondaryBtnObj.activeElem=[this.element,this.secondaryBtnObj.element],this.secondaryBtnObj.element.querySelector(".e-btn-icon").classList.remove("e-icon-right")}setAria(){bt(this.element,{"aria-expanded":"false","aria-haspopup":"true","aria-label":this.element.textContent+" splitbutton","aria-owns":this.element.id+"_dropdownbtn-popup"})}getModuleName(){return"split-btn"}toggle(){this.secondaryBtnObj.toggle()}destroy(){let e=[cE];if(this.cssClass&&(e=e.concat(this.cssClass.split(" "))),this.element){const t=document.getElementById(this.element.id);t&&t.parentElement===this.wrapper&&(this.wrapper.tagName===D_?(this.wrapper.innerHTML="",Y([this.wrapper],["e-rtl","e-"+this.getModuleName()+"-wrapper"]),Y([this.wrapper],this.cssClass.split(" "))):(Y([this.element],e),["aria-label","aria-haspopup","aria-expanded","aria-owns","type"].forEach(i=>{this.element.removeAttribute(i)}),this.wrapper.parentNode.insertBefore(this.element,this.wrapper),Ms(this.wrapper)),this.unWireEvents())}this.primaryBtnObj.destroy(),this.secondaryBtnObj.destroy(),super.destroy(),this.element.getAttribute("class")||this.element.removeAttribute("class")}wireEvents(){O.add(this.element,"click",this.primaryBtnClickHandler,this),new Pn(this.element,{keyAction:this.btnKeyBoardHandler.bind(this),keyConfigs:{altdownarrow:"alt+downarrow"}})}unWireEvents(){O.remove(this.element,"click",this.primaryBtnClickHandler),ac(this.element,Pn).destroy()}primaryBtnClickHandler(){this.trigger("click",{element:this.element})}btnKeyBoardHandler(e){"altdownarrow"===e.action&&this.clickHandler(e)}onPropertyChanged(e,t){let i=["content","iconCss","iconPosition","cssClass","disabled","enableRtl"];this.primaryBtnObj.setProperties(lb(e,i)),i=["beforeOpen","beforeItemRender","select","open","close","cssClass","disabled","enableRtl","createPopupOnClick"],Object.keys(e).indexOf("items")>-1&&(this.secondaryBtnObj.items=e.items,this.secondaryBtnObj.dataBind()),this.secondaryBtnObj.setProperties(lb(e,i));for(const s of Object.keys(e))switch(s){case"cssClass":t.cssClass&&Y([this.wrapper],t.cssClass.split(" ")),j([this.wrapper],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?j([this.wrapper],cE):Y([this.wrapper],cE)}}focusIn(){this.element.focus()}};Qr([A("")],Po.prototype,"content",void 0),Qr([A("")],Po.prototype,"cssClass",void 0),Qr([A(!1)],Po.prototype,"disabled",void 0),Qr([A("")],Po.prototype,"iconCss",void 0),Qr([A("Left")],Po.prototype,"iconPosition",void 0),Qr([A(!1)],Po.prototype,"createPopupOnClick",void 0),Qr([cl([],cb)],Po.prototype,"items",void 0),Qr([A("")],Po.prototype,"target",void 0),Qr([Z()],Po.prototype,"beforeItemRender",void 0),Qr([Z()],Po.prototype,"beforeOpen",void 0),Qr([Z()],Po.prototype,"beforeClose",void 0),Qr([Z()],Po.prototype,"click",void 0),Qr([Z()],Po.prototype,"close",void 0),Qr([Z()],Po.prototype,"open",void 0),Qr([Z()],Po.prototype,"select",void 0),Qr([Z()],Po.prototype,"created",void 0),Po=Qr([ts],Po);class Yf{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t}),this.catch=this.promise.catch.bind(this.promise),this.then=this.promise.then.bind(this.promise)}}var lr=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const O_="e-hide-spinner",M_="e-progress",Qg="e-progress-active",Dd="e-btn-content";class hb extends Is{}lr([A(null)],hb.prototype,"template",void 0),lr([A(16)],hb.prototype,"width",void 0),lr([A("Left")],hb.prototype,"position",void 0);class hE extends Is{}lr([A(400)],hE.prototype,"duration",void 0),lr([A("None")],hE.prototype,"effect",void 0),lr([A("ease")],hE.prototype,"easing",void 0);let Lo=class extends Ip{constructor(e,t){super(e,t),this.step=1}preRender(){super.preRender()}render(){super.render(),this.init(),this.wireEvents(),this.setAria(),this.renderComplete()}start(e){this.isPaused=!1,this.startProgress(e||this.percent,this.progressTime)}stop(){this.isPaused=!0,cancelAnimationFrame(this.timerId)}progressComplete(){this.isPaused=!1,this.finishProgress()}getModuleName(){return"progress-btn"}destroy(){let e=[O_,Qg,"e-round-corner","e-"+super.getModuleName(),"e-spin-"+this.spinSettings.position.toLowerCase()];super.destroy(),this.unWireEvents(),this.element.innerHTML="",this.cssClass&&(e=e.concat(this.cssClass.split(" "))),Y([this.element],e),(this.element.getAttribute("class")?["aria-label","aria-valuemin","aria-valuemax","aria-valuenow"]:["aria-label","aria-valuemin","aria-valuemax","aria-valuenow","class"]).forEach(i=>{this.element.removeAttribute(i)}),this.disabled&&this.element.removeAttribute("disabled")}init(){this.element.classList.add("e-"+super.getModuleName()),this.setContent(),this.createSpinner(),this.enableProgress&&this.createProgress()}createSpinner(){const e=this.createElement("span",{className:"e-spinner"});this.setSpinPosition(e),Zc({target:e,width:this.spinSettings.width||16,template:this.spinSettings.template},this.createElement)}getSpinner(){return this.element.getElementsByClassName("e-spinner")[0]}getProgress(){return this.element.getElementsByClassName(M_)[0]}setSpinPosition(e){const t=this.spinSettings.position||"Left";"Left"===t||"Top"===t?this.element.insertBefore(e,this.element.getElementsByClassName(Dd)[0]):this.element.appendChild(e),this.element.classList.add("e-spin-"+t.toLowerCase())}createProgress(){this.element.appendChild(this.createElement("span",{className:M_}))}setContent(){let e;e=this.element.innerHTML,this.enableHtmlSanitizer&&(e=_n.sanitize(this.element.innerHTML)),this.element.innerHTML="",this.element.appendChild(this.createElement("span",{className:Dd,innerHTML:e}))}setContentIcon(e){const t=this.createElement("span",{className:Dd,innerHTML:e});if(this.iconCss){const i=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(i.classList.add("e-icon-"+this.iconPosition.toLowerCase()),("Top"===this.iconPosition||"Bottom"===this.iconPosition)&&this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add("e-icon-btn");const s=t.childNodes[0];!s||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?t.appendChild(i):t.insertBefore(i,s)}this.element.appendChild(t)}clickHandler(){this.element.classList.contains(Qg)||this.startProgress()}startProgress(e,t){const i=this.element.classList,s=i.contains("e-vertical");i.add(Qg),i.contains(O_)||Bl(this.element),this.startAnimate(Date.now(),t||0,t?Date.now()-1*this.duration/100:Date.now(),e||0,0,this.step,0,s),this.startContAnimate()}startAnimate(e,t,i,s,r,o,a,u){try{const p=e-i,y=this.duration*o/100,E=p?p<y?p-y:p%y:0;this.progressTime=t=t+p-E,i=e-E,s+=(p-E)/this.duration*100;const _={percent:r=(t-a)%y==0||100===s?s:r,currentDuration:t,step:o};this.eIsVertical=u,this.trigger(0===s?"begin":100===s||t===this.duration?"end":"progress",_,D=>{this.successCallback(D,s,r,t,a,E,i)})}catch(p){cancelAnimationFrame(this.timerId),this.trigger("fail",p)}}successCallback(e,t,i,s,r,o,a){let u=t,p=i;const y=o,E=s;let _=r;const D=a,L=this.eIsVertical;u!==e.percent&&e.percent!==p&&(u=e.percent),this.percent=u,this.step=e.step,((E-_)%(this.duration*e.step/100)==0||100===u)&&(this.timerId=requestAnimationFrame(()=>{this.enableProgress&&(this.getProgress().style[L?"height":"width"]=u+"%"),this.element.setAttribute("aria-valuenow",u.toString())}),p=u,_=E),this.isPaused||(this.interval=E<this.duration&&u<100?window.setTimeout(()=>{this.startAnimate(Date.now(),E,D,u,p,e.step,_,L)},this.duration/100-y):window.setTimeout(()=>{this.progressTime=this.percent=0,this.enableProgress&&(this.getProgress().style[L?"height":"width"]="0%"),this.element.setAttribute("aria-valuenow","0"),this.hideSpin()},100))}startContAnimate(){const e=this.element.getElementsByClassName(Dd)[0];"None"!==this.animationSettings.effect?new Wn({}).animate(e,{duration:this.animationSettings.duration,name:"Progress"+this.animationSettings.effect,timingFunction:this.animationSettings.easing,begin:()=>{"Center"===this.spinSettings.position&&this.setSpinnerSize()},end:()=>{e.classList.add("e-animate-end")}}):"Center"===this.spinSettings.position&&this.setSpinnerSize()}finishProgress(){const e=this.element.classList,t=e.contains("e-vertical");e.add(Qg);for(let r=this.percent;r<100;r++)r+=10,r>100&&(r=100),this.enableProgress&&(this.getProgress().style[t?"height":"width"]=this.percent<100?r+"%":"100%");this.element.setAttribute("aria-valuenow","0"),this.hideSpin();const s={step:this.step,currentDuration:this.progressTime,percent:100};clearTimeout(this.interval),this.trigger("end",s),this.progressTime=this.percent=0}setSpinnerSize(){const e=this.element.getElementsByClassName(Dd)[0],t=this.getSpinner();t.style.width=Math.max(t.offsetWidth,e.offsetWidth)+"px",t.style.height=Math.max(t.offsetHeight,e.offsetHeight)+"px",e.classList.add("e-cont-animate")}hideSpin(){const e=this.element.getElementsByClassName(Dd)[0];if(this.element.classList.contains(O_)||hl(this.element),this.element.classList.remove(Qg),"None"!==this.animationSettings.effect&&e.classList.remove("e-animate-end"),"Center"===this.spinSettings.position){const t=this.getSpinner();e.classList.remove("e-cont-animate"),t.style.width="auto",t.style.height="auto"}}setIconSpan(){const e=this.element.getElementsByClassName(Dd)[0],t=this.element.getElementsByClassName("e-btn-icon")[0];!e.childNodes[0]||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?e.appendChild(t):e.insertBefore(t,e.childNodes[0])}setAria(){bt(this.element,{"aria-label":this.element.textContent+" progress","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":"0"})}wireEvents(){O.add(this.element,"click",this.clickHandler,this)}unWireEvents(){O.remove(this.element,"click",this.clickHandler)}onPropertyChanged(e,t){const i=this.element;let s=!1;this.element.querySelector(".e-spinner-pane").classList.contains("e-spin-show")&&(s=!0),super.onPropertyChanged(e,t);for(const o of Object.keys(e))switch(o){case"content":this.setContent(),this.createSpinner(),s&&(Bl(this.element),s=!1),this.enableProgress&&this.createProgress(),i.setAttribute("aria-label",i.textContent+" progress");break;case"iconCss":t.iconCss||this.setIconSpan();break;case"iconPosition":this.setIconSpan();break;case"enableProgress":e.enableProgress?this.createProgress():Ms(this.getProgress());break;case"spinSettings":e.spinSettings.position&&(i.classList.remove("e-spin-"+t.spinSettings.position.toLowerCase()),this.setSpinPosition(this.getSpinner())),(e.spinSettings.template||e.spinSettings.width)&&(i.removeChild(this.getSpinner()),this.createSpinner())}}focusIn(){this.element.focus()}};lr([A(!1)],Lo.prototype,"enableProgress",void 0),lr([A(2e3)],Lo.prototype,"duration",void 0),lr([A("Left")],Lo.prototype,"iconPosition",void 0),lr([A("")],Lo.prototype,"iconCss",void 0),lr([A(!1)],Lo.prototype,"disabled",void 0),lr([A(!1)],Lo.prototype,"isPrimary",void 0),lr([A("")],Lo.prototype,"cssClass",void 0),lr([A("")],Lo.prototype,"content",void 0),lr([A(!1)],Lo.prototype,"isToggle",void 0),lr([A(!1)],Lo.prototype,"enableHtmlSanitizer",void 0),lr([Ps({},hb)],Lo.prototype,"spinSettings",void 0),lr([Ps({},hE)],Lo.prototype,"animationSettings",void 0),lr([Z()],Lo.prototype,"created",void 0),lr([Z()],Lo.prototype,"begin",void 0),lr([Z()],Lo.prototype,"progress",void 0),lr([Z()],Lo.prototype,"end",void 0),lr([Z()],Lo.prototype,"fail",void 0),Lo=lr([ts],Lo);var ft;!function(n){let e,t=!0;function s(oe){r(oe.floatLabelType,oe.element),oe.element.addEventListener("focus",function(){const pe=V(this);(pe.classList.contains("e-input-group")||pe.classList.contains("e-outline")||pe.classList.contains("e-filled"))&&pe.classList.add("e-input-focus")}),oe.element.addEventListener("blur",function(){const pe=V(this);(pe.classList.contains("e-input-group")||pe.classList.contains("e-outline")||pe.classList.contains("e-filled"))&&pe.classList.remove("e-input-focus")}),oe.element.addEventListener("input",()=>{r(e,oe.element)})}function r(oe,pe){const nt=pe.value;""!==nt&&!m(nt)&&pe.parentElement?pe.parentElement.classList.add("e-valid-input"):"Always"!==oe&&pe.parentElement&&pe.parentElement.classList.remove("e-valid-input")}function o(){const oe=V(this).getElementsByClassName("e-float-text")[0];m(oe)||(j([oe],"e-label-top"),oe.classList.contains("e-label-bottom")&&Y([oe],"e-label-bottom"))}function a(){const oe=V(this);if(oe.getElementsByTagName("textarea")[0]?""===oe.getElementsByTagName("textarea")[0].value:""===oe.getElementsByTagName("input")[0].value){const pe=oe.getElementsByClassName("e-float-text")[0];m(pe)||(pe.classList.contains("e-label-top")&&Y([pe],"e-label-top"),j([pe],"e-label-bottom"))}}function u(oe){oe.addEventListener("focus",o),oe.addEventListener("blur",a)}function y(oe,pe,nt){const qt=m(nt)?Ds:nt;"Auto"===oe.floatLabelType&&u(oe.element),m(pe.container)?(pe.container=re(oe,"e-float-input","e-float-custom-tag","div",qt),oe.element.parentNode&&oe.element.parentNode.insertBefore(pe.container,oe.element)):(m(oe.customTag)||pe.container.classList.add("e-float-custom-tag"),pe.container.classList.add("e-float-input"));const fs=qt("span",{className:"e-float-line"}),hi=qt("label",{className:"e-float-text"});if(!m(oe.element.id)&&""!==oe.element.id&&(hi.id="label_"+oe.element.id.replace(/ /g,"_"),bt(oe.element,{"aria-labelledby":hi.id})),!m(oe.element.placeholder)&&""!==oe.element.placeholder&&(hi.innerText=Ae(oe.element.placeholder),oe.element.removeAttribute("placeholder")),!m(oe.properties)&&!m(oe.properties.placeholder)&&""!==oe.properties.placeholder&&(hi.innerText=Ae(oe.properties.placeholder)),hi.innerText||pe.container.classList.add("e-no-float-label"),pe.container.classList.contains("e-float-icon-left")){const Ws=pe.container.querySelector(".e-input-in-wrap");Ws.appendChild(oe.element),Ws.appendChild(fs),Ws.appendChild(hi)}else pe.container.appendChild(oe.element),pe.container.appendChild(fs),pe.container.appendChild(hi);L(oe.element.value,hi),"Always"===oe.floatLabelType&&(hi.classList.contains("e-label-bottom")&&Y([hi],"e-label-bottom"),j([hi],"e-label-top")),"Auto"===oe.floatLabelType&&(oe.element.addEventListener("input",Ws=>{L(oe.element.value,hi,oe.element)}),oe.element.addEventListener("blur",Ws=>{L(oe.element.value,hi)})),m(oe.element.getAttribute("id"))||hi.setAttribute("for",oe.element.getAttribute("id"))}function E(oe,pe){"Always"===oe&&pe.classList.contains("e-outline")&&pe.classList.add("e-valid-input")}function D(oe,pe){oe?Y([pe],"e-clear-icon-hide"):j([pe],"e-clear-icon-hide")}function L(oe,pe,nt=null){oe?(j([pe],"e-label-top"),pe.classList.contains("e-label-bottom")&&Y([pe],"e-label-bottom")):(null==nt||nt!==document.activeElement)&&(pe.classList.contains("e-label-top")&&Y([pe],"e-label-top"),j([pe],"e-label-bottom"))}function V(oe){let pe=m(oe.parentNode)?oe:oe.parentNode;return pe&&pe.classList.contains("e-input-in-wrap")&&(pe=pe.parentNode),pe}function se(oe,pe,nt){(null==t||t)&&pe.addEventListener("click",qt=>{oe.classList.contains("e-disabled")||oe.readOnly||(qt.preventDefault(),oe!==document.activeElement&&oe.focus(),oe.value="",j([pe],"e-clear-icon-hide"))}),oe.addEventListener("input",qt=>{D(oe.value,pe)}),oe.addEventListener("focus",qt=>{D(oe.value,pe)}),oe.addEventListener("blur",qt=>{setTimeout(()=>{j([pe],"e-clear-icon-hide")},200)})}function _e(oe,pe){if(V(oe).classList.contains("e-float-input")&&"Auto"===pe){const qt=V(oe).getElementsByClassName("e-float-text")[0];L(oe.value,qt,oe)}}function re(oe,pe,nt,qt,fs){const hi=m(fs)?Ds:fs;let Ws;return m(oe.customTag)?Ws=hi(qt,{className:pe}):(Ws=hi(oe.customTag,{className:pe}),Ws.classList.add(nt)),Ws.classList.add("e-control-wrapper"),Ws}function Ae(oe){let pe="";if(!m(oe)&&""!==oe){const nt=document.createElement("span");nt.innerHTML='<input  placeholder="'+oe+'"/>',pe=nt.children[0].placeholder}return pe}function ot(oe,pe,nt){!m(nt)&&""!==nt&&Y(pe,nt.split(" ")),!m(oe)&&""!==oe&&j(pe,oe.split(" "))}function jt(oe,pe){oe=Ae(oe);const nt=V(pe);nt.classList.contains("e-float-input")?m(oe)||""===oe?(nt.classList.add("e-no-float-label"),nt.getElementsByClassName("e-float-text")[0].textContent=""):(nt.getElementsByClassName("e-float-text")[0].textContent=oe,nt.classList.remove("e-no-float-label"),pe.removeAttribute("placeholder")):m(oe)||""===oe?(pe.removeAttribute("placeholder"),pe.removeAttribute("aria-placeholder")):bt(pe,{placeholder:oe,"aria-placeholder":oe})}function Ai(oe,pe,nt){oe?bt(pe,{readonly:""}):pe.removeAttribute("readonly"),m(nt)||_e(pe,nt)}function rr(oe,pe){oe?j(pe,"e-rtl"):Y(pe,"e-rtl")}function mt(oe,pe,nt,qt){const fs={disabled:"disabled","aria-disabled":"true"},hi=!m(qt);oe?(pe.classList.remove("e-disabled"),st(fs,pe),hi&&Y([qt],"e-disabled")):(pe.classList.add("e-disabled"),Ce(fs,pe),hi&&j([qt],"e-disabled")),m(nt)||_e(pe,nt)}function yt(oe,pe,nt,qt,fs){const hi=m(fs)?Ds:fs;oe?nt.clearButton=function H(oe,pe,nt,qt){const hi=(m(qt)?Ds:qt)("span",{className:"e-clear-icon"}),Ws=pe.container;return m(nt)?(pe.container.classList.contains("e-float-input")?pe.container.querySelector(".e-float-text"):oe).insertAdjacentElement("afterend",hi):Ws.appendChild(hi),!m(Ws)&&Ws.classList.contains("e-float-input")&&j([Ws],"e-input-group"),j([hi],"e-clear-icon-hide"),se(oe,hi),hi.setAttribute("aria-label","close"),hi}(pe,nt,qt,hi):(Ms(nt.clearButton),nt.clearButton=null)}function st(oe,pe){for(const nt of Object.keys(oe)){const qt=V(pe);"disabled"===nt&&pe.classList.remove("e-disabled"),"disabled"===nt&&qt.classList.contains("e-input-group")&&qt.classList.remove("e-disabled"),"placeholder"===nt&&qt.classList.contains("e-float-input")?qt.getElementsByClassName("e-float-text")[0].textContent="":pe.removeAttribute(nt)}}function Ce(oe,pe){for(const nt of Object.keys(oe)){const qt=V(pe);"disabled"===nt&&pe.classList.add("e-disabled"),"disabled"===nt&&qt.classList.contains("e-input-group")&&qt.classList.add("e-disabled"),"placeholder"===nt&&qt.classList.contains("e-float-input")?qt.getElementsByClassName("e-float-text")[0].textContent=oe[nt]:pe.setAttribute(nt,oe[nt])}}function we(oe,pe,nt){const qt=[];qt.push(nt);const fs=m(nt)?pe.querySelectorAll(".e-input-group-icon"):qt;if(oe&&fs.length>0)for(let hi=0;hi<fs.length;hi++)fs[hi].addEventListener("mousedown",Ut,!1),fs[hi].addEventListener("mouseup",ki,!1);else if(fs.length>0)for(let hi=0;hi<fs.length;hi++)fs[hi].removeEventListener("mousedown",Ut,this),fs[hi].removeEventListener("mouseup",ki,this)}function Ut(){let pe=this.parentElement;for(;!pe.classList.contains("e-input-group");)pe=pe.parentElement;!function Ke(oe,pe){!oe.classList.contains("e-disabled")&&!oe.querySelector("input").readOnly&&pe.classList.add("e-input-btn-ripple")}(pe,this)}function ki(){const oe=this;setTimeout(()=>{oe.classList.remove("e-input-btn-ripple")},500)}function oi(oe,pe){const nt=pe("span",{className:oe});return nt.classList.add("e-input-group-icon"),nt}function ss(oe,pe,nt,qt){const fs=m(qt)?Ds:qt,hi=oi(oe,fs);pe.classList.add("e-float-icon-left");let Ws=pe.querySelector(".e-input-in-wrap");if(m(Ws)){Ws=fs("span",{className:"e-input-in-wrap"}),nt.parentNode.insertBefore(Ws,nt);const nT=pe.querySelectorAll(nt.tagName+" ~ *");Ws.appendChild(nt);for(let jh=0;jh<nT.length;jh++)Ws.appendChild(nT[jh])}return Ws.parentNode.insertBefore(hi,Ws),pe.classList.contains("e-input-group")||pe.classList.add("e-input-group"),we(!0,pe,hi),hi}function zi(oe,pe,nt){const fs=oi(oe,m(nt)?Ds:nt);return pe.classList.contains("e-input-group")||pe.classList.add("e-input-group"),(pe.classList.contains("e-float-icon-left")?pe.querySelector(".e-input-in-wrap"):pe).appendChild(fs),we(!0,pe,fs),fs}function Vt(oe,pe){"hidden"===pe.type?oe.classList.add("e-hidden"):oe.classList.contains("e-hidden")&&oe.classList.remove("e-hidden")}n.createInput=function i(oe,pe){const nt=m(pe)?Ds:pe;let qt={container:null,buttons:[],clearButton:null};if(e=oe.floatLabelType,t=oe.bindClearAction,m(oe.floatLabelType)||"Never"===oe.floatLabelType?(qt.container=re(oe,"e-input-group","e-input-custom-tag","span",nt),oe.element.parentNode.insertBefore(qt.container,oe.element),j([oe.element],"e-input"),qt.container.appendChild(oe.element)):y(oe,qt,nt),s(oe),!m(oe.properties)&&!m(oe.properties.showClearButton)&&oe.properties.showClearButton&&"TEXTAREA"!==oe.element.tagName&&(yt(oe.properties.showClearButton,oe.element,qt,!0,nt),qt.clearButton.setAttribute("role","button"),qt.container.classList.contains("e-float-input")&&j([qt.container],"e-input-group")),!m(oe.buttons)&&"TEXTAREA"!==oe.element.tagName)for(let fs=0;fs<oe.buttons.length;fs++)qt.buttons.push(zi(oe.buttons[fs],qt.container,nt));return!m(oe.element)&&"TEXTAREA"===oe.element.tagName&&j([qt.container],"e-multi-line-input"),Vt(qt.container,oe.element),qt=function _(oe,pe){if(!m(oe.properties))for(const nt of Object.keys(oe.properties))switch(nt){case"cssClass":ot(oe.properties.cssClass,[pe.container]),E(oe.floatLabelType,pe.container);break;case"enabled":mt(oe.properties.enabled,oe.element,oe.floatLabelType,pe.container);break;case"enableRtl":rr(oe.properties.enableRtl,[pe.container]);break;case"placeholder":jt(oe.properties.placeholder,oe.element);break;case"readonly":Ai(oe.properties.readonly,oe.element)}return pe}(oe,qt),qt},n.bindInitialEvent=s,n.wireFloatingEvents=u,n.wireClearBtnEvents=se,n.setValue=function gt(oe,pe,nt,qt){if(pe.value=oe,!m(nt)&&"Auto"===nt&&_e(pe,nt),!m(qt)&&qt){const fs=V(pe);if(!m(fs)){const hi=fs.getElementsByClassName("e-clear-icon")[0];m(hi)||(pe.value&&fs.classList.contains("e-input-focus")?Y([hi],"e-clear-icon-hide"):j([hi],"e-clear-icon-hide"))}}r(nt,pe)},n.setCssClass=ot,n.setWidth=function ri(oe,pe){"number"==typeof oe?pe.style.width=ct(oe):"string"==typeof oe&&(pe.style.width=oe.match(/px|%|em/)?oe:ct(oe))},n.setPlaceholder=jt,n.setReadonly=Ai,n.setEnableRtl=rr,n.setEnabled=mt,n.setClearButton=yt,n.removeAttributes=st,n.addAttributes=Ce,n.removeFloating=function ke(oe){const pe=oe.container;if(!m(pe)&&pe.classList.contains("e-float-input")){const nt=pe.querySelector("textarea")?pe.querySelector("textarea"):pe.querySelector("input"),qt=pe.querySelector(".e-float-text").textContent,fs=null!==pe.querySelector(".e-clear-icon");ye(pe.querySelector(".e-float-line")),ye(pe.querySelector(".e-float-text")),ua(pe,["e-input-group"],["e-float-input"]),function p(oe){oe.removeEventListener("focus",o),oe.removeEventListener("blur",a)}(nt),bt(nt,{placeholder:qt}),nt.classList.add("e-input"),!fs&&"INPUT"===nt.tagName&&nt.removeAttribute("required")}},n.addFloating=function Re(oe,pe,nt,qt){const fs=m(qt)?Ds:qt,hi=ae(oe,".e-input-group");if(e=pe,"Never"!==pe){let Ws=hi.tagName;Ws="DIV"!==Ws&&"SPAN"!==Ws?Ws:null;const nT={element:oe,floatLabelType:pe,customTag:Ws,properties:{placeholder:nt}};let jh=hi.querySelector(".e-clear-icon");const Pte={container:hi};oe.classList.remove("e-input"),y(nT,Pte,fs);const mV=hi.classList.contains("e-float-icon-left");if(m(jh)&&(jh=mV?hi.querySelector(".e-input-in-wrap").querySelector(".e-input-group-icon"):hi.querySelector(".e-input-group-icon")),m(jh))mV&&(jh=hi.querySelector(".e-input-group-icon")),m(jh)&&hi.classList.remove("e-input-group");else{const aq=hi.querySelector(".e-float-line"),Lte=hi.querySelector(".e-float-text"),gV=mV?hi.querySelector(".e-input-in-wrap"):hi;gV.insertBefore(oe,jh),gV.insertBefore(aq,jh),gV.insertBefore(Lte,jh)}}E(pe,oe.parentElement)},n.setRipple=function me(oe,pe){for(let nt=0;nt<pe.length;nt++)we(oe,pe[nt].container)},n.addIcon=function os(oe,pe,nt,qt,fs){const hi="string"==typeof pe?pe.split(","):pe;if("append"===oe.toLowerCase())for(const Ws of hi)zi(Ws,nt,fs);else for(const Ws of hi)ss(Ws,nt,qt,fs)},n.prependSpan=ss,n.appendSpan=zi,n.validateInputType=Vt}(ft||(ft={}));var xn=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const ub="e-input-group-icon",db="e-spin-up",P_="e-error",Jg="increment",pb="decrement",uD=new RegExp("^(-)?(\\d*)$"),R_="e-input-focus",mD=["title","style","class"];let fb=(()=>{let n=class extends Ls{constructor(t,i){super(t,i),this.isVue=!1,this.preventChange=!1,this.isAngular=!1,this.isDynamicChange=!1,this.numericOptions=t}preRender(){this.isPrevFocused=!1,this.decimalSeparator=".",this.intRegExp=new RegExp("/^(-)?(d*)$/"),this.isCalled=!1;const t=J("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),Y([this.cloneElement],["e-control","e-numerictextbox","e-lib"]),this.angularTagName=null,this.formEle=ae(this.element,"form"),"EJS-NUMERICTEXTBOX"===this.element.tagName){this.angularTagName=this.element.tagName;const s=this.createElement("input");let r=0;for(;r<this.element.attributes.length;r++)"id"!==this.element.attributes[r].nodeName&&(s.setAttribute(this.element.attributes[r].nodeName,this.element.attributes[r].nodeValue),s.innerHTML=this.element.innerHTML);this.element.hasAttribute("name")&&this.element.removeAttribute("name"),this.element.classList.remove("e-control","e-numerictextbox"),this.element.appendChild(s),this.element=s,pi("ej2_instances",t,this.element)}bt(this.element,{role:"spinbutton",tabindex:"0",autocomplete:"off","aria-live":"assertive"}),this.l10n=new Xr("numerictextbox",{incrementTitle:"Increment value",decrementTitle:"Decrement value",placeholder:this.placeholder},this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.isValidState=!0,this.inputStyle=null,this.inputName=null,this.cultureInfo={},this.initCultureInfo(),this.initCultureFunc(),this.prevValue=this.value,this.updateHTMLAttrToElement(),this.checkAttributes(!1),this.formEle&&(this.inputEleValue=this.value),this.validateMinMax(),this.validateStep(),null===this.placeholder&&this.updatePlaceholder()}render(){"input"===this.element.tagName.toLowerCase()&&(this.createWrapper(),this.showSpinButton&&this.spinBtnCreation(),this.setElementWidth(this.width),this.container.classList.contains("e-input-group")||this.container.classList.add("e-input-group"),this.changeValue(null===this.value||isNaN(this.value)?null:this.strictMode?this.trimValue(this.value):this.value),this.wireEvents(),null!==this.value&&!isNaN(this.value)&&this.decimals&&this.setProperties({value:this.roundNumber(this.value,this.decimals)},!0),(this.element.getAttribute("value")||this.value)&&(this.element.setAttribute("value",this.element.value),this.hiddenInput.setAttribute("value",this.hiddenInput.value)),this.elementPrevValue=this.element.value,this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),this.renderComplete())}checkAttributes(t){const i=t?m(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","step","disabled","readonly","style","name","placeholder"];for(const s of i)if(!m(this.element.getAttribute(s)))switch(s){case"disabled":if(m(this.numericOptions)||void 0===this.numericOptions.enabled||t){const r=!("disabled"===this.element.getAttribute(s)||""===this.element.getAttribute(s)||"true"===this.element.getAttribute(s));this.setProperties({enabled:r},!t)}break;case"readonly":if(m(this.numericOptions)||void 0===this.numericOptions.readonly||t){const r="readonly"===this.element.getAttribute(s)||""===this.element.getAttribute(s)||"true"===this.element.getAttribute(s);this.setProperties({readonly:r},!t)}break;case"placeholder":(m(this.numericOptions)||void 0===this.numericOptions.placeholder||t)&&this.setProperties({placeholder:this.element.placeholder},!t);break;case"value":if(m(this.numericOptions)||void 0===this.numericOptions.value||t){const r=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(s));this.setProperties(pi(s,r,{}),!t)}break;case"min":if(m(this.numericOptions)||void 0===this.numericOptions.min||t){const r=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(s));null!==r&&!isNaN(r)&&this.setProperties(pi(s,r,{}),!t)}break;case"max":if(m(this.numericOptions)||void 0===this.numericOptions.max||t){const r=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(s));null!==r&&!isNaN(r)&&this.setProperties(pi(s,r,{}),!t)}break;case"step":if(m(this.numericOptions)||void 0===this.numericOptions.step||t){const r=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(s));null!==r&&!isNaN(r)&&this.setProperties(pi(s,r,{}),!t)}break;case"style":this.inputStyle=this.element.getAttribute(s);break;case"name":this.inputName=this.element.getAttribute(s);break;default:{const r=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(s));(null!==r&&!isNaN(r)||"value"===s)&&this.setProperties(pi(s,r,{}),!0)}}}updatePlaceholder(){this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0)}initCultureFunc(){this.instance=new d0(this.locale)}initCultureInfo(){this.cultureInfo.format=this.format,null!==J("currency",this)&&(pi("currency",this.currency,this.cultureInfo),this.setProperties({currencyCode:this.currency},!0))}createWrapper(){let t=this.cssClass;!m(this.cssClass)&&""!==this.cssClass&&(t=this.getNumericValidClassList(this.cssClass));const i=ft.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:t,enableRtl:this.enableRtl,showClearButton:this.showClearButton,enabled:this.enabled}},this.createElement);this.inputWrapper=i,this.container=i.container,this.container.setAttribute("class","e-control-wrapper e-numeric "+this.container.getAttribute("class")),this.updateHTMLAttrToWrapper(),this.readonly&&bt(this.element,{"aria-readonly":"true"}),this.hiddenInput=this.createElement("input",{attrs:{type:"text",validateHidden:"true",class:"e-numeric-hidden"}}),this.inputName=null!==this.inputName?this.inputName:this.element.id,this.element.removeAttribute("name"),bt(this.hiddenInput,{name:this.inputName}),this.container.insertBefore(this.hiddenInput,this.container.childNodes[1]),this.updateDataAttribute(!1),null!==this.inputStyle&&bt(this.container,{style:this.inputStyle})}updateDataAttribute(t){let i={};if(t)i=this.htmlAttributes;else for(let s=0;s<this.element.attributes.length;s++)i[this.element.attributes[s].name]=this.element.getAttribute(this.element.attributes[s].name);for(const s of Object.keys(i))0===s.indexOf("data")&&this.hiddenInput.setAttribute(s,i[s])}updateHTMLAttrToElement(){if(!m(this.htmlAttributes))for(const t of Object.keys(this.htmlAttributes))mD.indexOf(t)<0&&this.element.setAttribute(t,this.htmlAttributes[t])}updateCssClass(t,i){ft.setCssClass(this.getNumericValidClassList(t),[this.container],this.getNumericValidClassList(i))}getNumericValidClassList(t){let i=t;return!m(t)&&""!==t&&(i=t.replace(/\s+/g," ").trim()),i}updateHTMLAttrToWrapper(){if(!m(this.htmlAttributes))for(const t of Object.keys(this.htmlAttributes))if(mD.indexOf(t)>-1)if("class"===t){const i=this.getNumericValidClassList(this.htmlAttributes[t]);""!==i&&j([this.container],i.split(" "))}else if("style"===t){let i=this.container.getAttribute(t);i=m(i)?this.htmlAttributes[t]:i+this.htmlAttributes[t],this.container.setAttribute(t,i)}else this.container.setAttribute(t,this.htmlAttributes[t])}setElementWidth(t){m(t)||("number"==typeof t?this.container.style.width=ct(t):"string"==typeof t&&(this.container.style.width=t.match(/px|%|em/)?t:ct(t)))}spinBtnCreation(){this.spinDown=ft.appendSpan(ub+" e-spin-down",this.container,this.createElement),bt(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),this.spinUp=ft.appendSpan(ub+" "+db,this.container,this.createElement),bt(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")}),this.wireSpinBtnEvents()}validateMinMax(){"number"==typeof this.min&&!isNaN(this.min)||this.setProperties({min:-Number.MAX_VALUE},!0),"number"==typeof this.max&&!isNaN(this.max)||this.setProperties({max:Number.MAX_VALUE},!0),null!==this.decimals&&(this.min!==-Number.MAX_VALUE&&this.setProperties({min:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.min))},!0),this.max!==Number.MAX_VALUE&&this.setProperties({max:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.max))},!0)),this.setProperties({min:this.min>this.max?this.max:this.min},!0),bt(this.element,{"aria-valuemin":this.min.toString(),"aria-valuemax":this.max.toString()})}formattedValue(t,i){return this.instance.getNumberFormat({maximumFractionDigits:t,minimumFractionDigits:t,useGrouping:!1})(i)}validateStep(){null!==this.decimals&&this.setProperties({step:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.step))},!0)}action(t,i){this.isInteract=!0;const s=this.isFocused?this.instance.getNumberParser({format:"n"})(this.element.value):this.value;this.changeValue(this.performAction(s,this.step,t)),this.raiseChangeEvent(i)}checkErrorClass(){this.isValidState?Y([this.container],P_):j([this.container],P_),bt(this.element,{"aria-invalid":this.isValidState?"false":"true"})}bindClearEvent(){this.showClearButton&&O.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)}resetHandler(t){t.preventDefault(),(!this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.inputWrapper.container.classList.contains("e-static-clear"))&&this.clear(t),this.isInteract=!0,this.raiseChangeEvent(t)}clear(t){if(this.setProperties({value:null},!0),this.setElementValue(""),this.hiddenInput.value="",ae(this.element,"form")){const s=this.element.nextElementSibling,r=document.createEvent("KeyboardEvent");r.initEvent("keyup",!1,!0),s.dispatchEvent(r)}}resetFormHandler(){this.updateValue("EJS-NUMERICTEXTBOX"===this.element.tagName?null:this.inputEleValue)}setSpinButton(){m(this.spinDown)||bt(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),m(this.spinUp)||bt(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")})}wireEvents(){O.add(this.element,"focus",this.focusHandler,this),O.add(this.element,"blur",this.focusOutHandler,this),O.add(this.element,"keydown",this.keyDownHandler,this),O.add(this.element,"keyup",this.keyUpHandler,this),O.add(this.element,"input",this.inputHandler,this),O.add(this.element,"keypress",this.keyPressHandler,this),O.add(this.element,"change",this.changeHandler,this),O.add(this.element,"paste",this.pasteHandler,this),this.enabled&&(this.bindClearEvent(),this.formEle&&O.add(this.formEle,"reset",this.resetFormHandler,this))}wireSpinBtnEvents(){O.add(this.spinUp,Q.touchStartEvent,this.mouseDownOnSpinner,this),O.add(this.spinDown,Q.touchStartEvent,this.mouseDownOnSpinner,this),O.add(this.spinUp,Q.touchEndEvent,this.mouseUpOnSpinner,this),O.add(this.spinDown,Q.touchEndEvent,this.mouseUpOnSpinner,this),O.add(this.spinUp,Q.touchMoveEvent,this.touchMoveOnSpinner,this),O.add(this.spinDown,Q.touchMoveEvent,this.touchMoveOnSpinner,this)}unwireEvents(){O.remove(this.element,"focus",this.focusHandler),O.remove(this.element,"blur",this.focusOutHandler),O.remove(this.element,"keyup",this.keyUpHandler),O.remove(this.element,"input",this.inputHandler),O.remove(this.element,"keydown",this.keyDownHandler),O.remove(this.element,"keypress",this.keyPressHandler),O.remove(this.element,"change",this.changeHandler),O.remove(this.element,"paste",this.pasteHandler),this.formEle&&O.remove(this.formEle,"reset",this.resetFormHandler)}unwireSpinBtnEvents(){O.remove(this.spinUp,Q.touchStartEvent,this.mouseDownOnSpinner),O.remove(this.spinDown,Q.touchStartEvent,this.mouseDownOnSpinner),O.remove(this.spinUp,Q.touchEndEvent,this.mouseUpOnSpinner),O.remove(this.spinDown,Q.touchEndEvent,this.mouseUpOnSpinner),O.remove(this.spinUp,Q.touchMoveEvent,this.touchMoveOnSpinner),O.remove(this.spinDown,Q.touchMoveEvent,this.touchMoveOnSpinner)}changeHandler(t){t.stopPropagation(),this.element.value.length||this.setProperties({value:null},!0);const i=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(i,t)}raiseChangeEvent(t){if(this.prevValue!==this.value){const i={};this.changeEventArgs={value:this.value,previousValue:this.prevValue,isInteracted:this.isInteract,isInteraction:this.isInteract,event:t},t&&(this.changeEventArgs.event=t),void 0===this.changeEventArgs.event&&(this.changeEventArgs.isInteracted=!1,this.changeEventArgs.isInteraction=!1),qc(i,this.changeEventArgs),this.prevValue=this.value,this.isInteract=!1,this.elementPrevValue=this.element.value,this.preventChange=!1,this.trigger("change",i)}}pasteHandler(){if(!this.enabled||this.readonly)return;const t=this.element.value;setTimeout(()=>{this.numericRegex().test(this.element.value)||this.setElementValue(t)})}preventHandler(){const t=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);setTimeout(()=>{if(this.element.selectionStart>0){const i=this.element.selectionStart,s=this.element.selectionStart-1,r=0,o=this.element.value.split(""),u=J("decimal",p0(this.locale)),p=u.charCodeAt(0);" "===this.element.value[s]&&this.element.selectionStart>0&&!t?(m(this.prevVal)?this.element.value=this.element.value.trim():0!==s?this.element.value=this.prevVal:0===s&&(this.element.value=this.element.value.trim()),this.element.setSelectionRange(s,s)):isNaN(parseFloat(this.element.value[this.element.selectionStart-1]))&&45!==this.element.value[this.element.selectionStart-1].charCodeAt(0)?(o.indexOf(this.element.value[this.element.selectionStart-1])!==o.lastIndexOf(this.element.value[this.element.selectionStart-1])&&this.element.value[this.element.selectionStart-1].charCodeAt(0)===p||this.element.value[this.element.selectionStart-1].charCodeAt(0)!==p)&&(this.element.value=this.element.value.substring(0,s)+this.element.value.substring(i,this.element.value.length),this.element.setSelectionRange(s,s),isNaN(parseFloat(this.element.value[this.element.selectionStart-1]))&&this.element.selectionStart>0&&this.element.value.length&&this.preventHandler()):isNaN(parseFloat(this.element.value[this.element.selectionStart-2]))&&this.element.selectionStart>1&&45!==this.element.value[this.element.selectionStart-2].charCodeAt(0)&&(o.indexOf(this.element.value[this.element.selectionStart-2])!==o.lastIndexOf(this.element.value[this.element.selectionStart-2])&&this.element.value[this.element.selectionStart-2].charCodeAt(0)===p||this.element.value[this.element.selectionStart-2].charCodeAt(0)!==p)&&(this.element.setSelectionRange(s,s),this.nextEle=this.element.value[this.element.selectionStart],this.cursorPosChanged=!0,this.preventHandler()),!0===this.cursorPosChanged&&this.element.value[this.element.selectionStart]===this.nextEle&&isNaN(parseFloat(this.element.value[this.element.selectionStart-1]))&&(this.element.setSelectionRange(this.element.selectionStart+1,this.element.selectionStart+1),this.cursorPosChanged=!1,this.nextEle=null),""===this.element.value.trim()&&this.element.setSelectionRange(r,r),this.element.selectionStart>0&&(45===this.element.value[this.element.selectionStart-1].charCodeAt(0)&&this.element.selectionStart>1&&(this.element.value=m(this.prevVal)?this.element.value:this.prevVal,this.element.setSelectionRange(this.element.selectionStart,this.element.selectionStart)),this.element.value[this.element.selectionStart-1]===u&&0===this.decimals&&this.validateDecimalOnType&&(this.element.value=this.element.value.substring(0,s)+this.element.value.substring(i,this.element.value.length))),this.prevVal=this.element.value}})}keyUpHandler(){if(!this.enabled||this.readonly)return;(!navigator.platform||!/iPad|iPhone|iPod/.test(navigator.platform))&&Q.isDevice&&this.preventHandler();let i=this.instance.getNumberParser({format:"n"})(this.element.value);if(i=null===i||isNaN(i)?null:i,this.hiddenInput.value=i||0===i?i.toString():null,ae(this.element,"form")){const r=this.element.nextElementSibling,o=document.createEvent("KeyboardEvent");o.initEvent("keyup",!1,!0),r.dispatchEvent(o)}}inputHandler(t){const i=this;if(!this.enabled||this.readonly)return;const s=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);if((navigator.userAgent.toLowerCase().indexOf("firefox")>-1||s)&&Q.isDevice&&this.preventHandler(),this.isAngular&&this.element.value!==J("decimal",p0(this.locale))&&this.element.value!==J("minusSign",p0(this.locale))){let o=this.instance.getNumberParser({format:"n"})(this.element.value);o=isNaN(o)?null:o,i.localChange({value:o}),this.preventChange=!0}if(this.isVue){let o=this.instance.getNumberParser({format:"n"})(this.element.value);const a=this.instance.getNumberParser({format:"n"})(this.elementPrevValue);new RegExp("[^1-9]+$").test(this.element.value)&&(o=this.value);const p={event:t,value:null===o||isNaN(o)?null:o,previousValue:null===a||isNaN(a)?null:a};this.preventChange=!0,this.elementPrevValue=this.element.value,this.trigger("input",p)}}keyDownHandler(t){if(!this.readonly)switch(t.keyCode){case 38:t.preventDefault(),this.action(Jg,t);break;case 40:t.preventDefault(),this.action(pb,t)}}performAction(t,i,s){(null===t||isNaN(t))&&(t=0);let r=s===Jg?t+i:t-i;return r=this.correctRounding(t,i,r),this.strictMode?this.trimValue(r):r}correctRounding(t,i,s){const r=new RegExp("[,.](.*)"),o=r.test(t.toString()),a=r.test(i.toString());if(o||a){const u=o?r.exec(t.toString())[0].length:0,p=a?r.exec(i.toString())[0].length:0,y=Math.max(u,p);return this.roundValue(s,y)}return s}roundValue(t,i){i=i||0;const s=Math.pow(10,i);return Math.round(t*=s)/s}updateValue(t,i){i&&(this.isInteract=!0),null!==t&&!isNaN(t)&&this.decimals&&(t=this.roundNumber(t,this.decimals)),this.changeValue(null===t||isNaN(t)?null:this.strictMode?this.trimValue(t):t),this.isDynamicChange||this.raiseChangeEvent(i)}updateCurrency(t,i){pi(t,i,this.cultureInfo),this.updateValue(this.value)}changeValue(t){if(t||0===t){const i=this.getNumberOfDecimals(t);this.setProperties({value:this.roundNumber(t,i)},!0)}else this.setProperties({value:t=null},!0);this.modifyText(),this.strictMode||this.validateState()}modifyText(){if(this.value||0===this.value){const t=this.formatNumber(),i=this.isFocused?t:this.instance.getNumberFormat(this.cultureInfo)(this.value);this.setElementValue(i),bt(this.element,{"aria-valuenow":t}),this.hiddenInput.value=this.value.toString(),null!==this.value&&this.serverDecimalSeparator&&(this.hiddenInput.value=this.hiddenInput.value.replace(".",this.serverDecimalSeparator))}else this.setElementValue(""),this.element.removeAttribute("aria-valuenow"),this.hiddenInput.value=null}setElementValue(t,i){ft.setValue(t,i||this.element,this.floatLabelType,this.showClearButton)}validateState(){this.isValidState=!0,(this.value||0===this.value)&&(this.isValidState=!(this.value>this.max||this.value<this.min)),this.checkErrorClass()}getNumberOfDecimals(t){let i;const s=new RegExp("[eE][-+]?([0-9]+)");let r=t.toString();if(s.test(r)){const a=s.exec(r);m(a)||(r=t.toFixed(Math.min(parseInt(a[1],10),20)))}const o=r.split(".")[1];return i=o&&o.length?o.length:0,null!==this.decimals&&(i=i<this.decimals?i:this.decimals),i}formatNumber(){const t=this.getNumberOfDecimals(this.value);return this.instance.getNumberFormat({maximumFractionDigits:t,minimumFractionDigits:t,useGrouping:!1})(this.value)}trimValue(t){return t>this.max?this.max:t<this.min?this.min:t}roundNumber(t,i){let s=t;const r=i||0,o=s.toString().split("e");s=Math.round(Number(o[0]+"e"+(o[1]?Number(o[1])+r:r)));const a=s.toString().split("e");return s=Number(a[0]+"e"+(a[1]?Number(a[1])-r:-r)),Number(s.toFixed(r))}cancelEvent(t){return t.preventDefault(),!1}keyPressHandler(t){if(!this.enabled||this.readonly)return!0;if(!Q.isDevice&&"11.0"===Q.info.version&&13===t.keyCode){const r=this.instance.getNumberParser({format:"n"})(this.element.value);return this.updateValue(r,t),!0}if(0===t.which||t.metaKey||t.ctrlKey||8===t.keyCode||13===t.keyCode)return!0;const i=String.fromCharCode(t.which);let s=this.element.value;return s=s.substring(0,this.element.selectionStart)+i+s.substring(this.element.selectionEnd),!!this.numericRegex().test(s)||(t.preventDefault(),t.stopPropagation(),!1)}numericRegex(){let i=J("decimal",p0(this.locale)),s="*";return"."===i&&(i="\\"+i),0===this.decimals&&this.validateDecimalOnType?uD:(this.decimals&&this.validateDecimalOnType&&(s="{0,"+this.decimals+"}"),new RegExp("^(-)?(((\\d+("+i+"\\d"+s+")?)|("+i+"\\d"+s+")))?$"))}mouseWheel(t){let i;t.preventDefault(),t.wheelDelta?i=t.wheelDelta/120:t.detail&&(i=-t.detail/3),i>0?this.action(Jg,t):i<0&&this.action(pb,t),this.cancelEvent(t)}focusHandler(t){if(this.focusEventArgs={event:t,value:this.value,container:this.container},this.trigger("focus",this.focusEventArgs),this.enabled&&!this.readonly){if(this.isFocused=!0,Y([this.container],P_),this.prevValue=this.value,this.value||0===this.value){const i=this.formatNumber();this.setElementValue(i),this.isPrevFocused||(Q.isDevice||"11.0"!==Q.info.version?setTimeout(()=>{this.element.setSelectionRange(0,i.length)},Q.isDevice&&Q.isIos?600:0):this.element.setSelectionRange(0,i.length))}Q.isDevice||O.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this)}}focusOutHandler(t){if(this.blurEventArgs={event:t,value:this.value,container:this.container},this.trigger("blur",this.blurEventArgs),this.enabled&&!this.readonly){if(this.isPrevFocused){if(t.preventDefault(),Q.isDevice){const s=this.element.value;this.element.focus(),this.isPrevFocused=!1;const r=this.element;setTimeout(()=>{this.setElementValue(s,r)},200)}}else{this.isFocused=!1,this.element.value.length||this.setProperties({value:null},!0);const s=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(s),Q.isDevice||O.remove(this.element,"mousewheel DOMMouseScroll",this.mouseWheel)}if(ae(this.element,"form")){const s=this.element.nextElementSibling,r=document.createEvent("FocusEvent");r.initEvent("focusout",!1,!0),s.dispatchEvent(r)}}}mouseDownOnSpinner(t){if(this.isFocused&&(this.isPrevFocused=!0,t.preventDefault()),!this.getElementData(t))return;this.getElementData(t);const s=t.currentTarget,r=s.classList.contains(db)?Jg:pb;O.add(s,"mouseleave",this.mouseUpClick,this),this.timeOut=setInterval(()=>{this.isCalled=!0,this.action(r,t)},150),O.add(document,"mouseup",this.mouseUpClick,this)}touchMoveOnSpinner(t){let i;if("touchmove"===t.type){let s=t.touches;i=s.length&&document.elementFromPoint(s[0].pageX,s[0].pageY)}else i=document.elementFromPoint(t.clientX,t.clientY);i.classList.contains(ub)||clearInterval(this.timeOut)}mouseUpOnSpinner(t){if(this.prevValue=this.value,this.isPrevFocused&&(this.element.focus(),Q.isDevice||(this.isPrevFocused=!1)),Q.isDevice||t.preventDefault(),!this.getElementData(t))return;const i=t.currentTarget,s=i.classList.contains(db)?Jg:pb;if(O.remove(i,"mouseleave",this.mouseUpClick),this.isCalled||this.action(s,t),this.isCalled=!1,O.remove(document,"mouseup",this.mouseUpClick),ae(this.element,"form")){const o=this.element.nextElementSibling,a=document.createEvent("KeyboardEvent");a.initEvent("keyup",!1,!0),o.dispatchEvent(a)}}getElementData(t){return!(t.which&&3===t.which||t.button&&2===t.button||!this.enabled||this.readonly||(clearInterval(this.timeOut),0))}floatLabelTypeUpdate(){ft.removeFloating(this.inputWrapper);const t=this.hiddenInput;this.hiddenInput.remove(),ft.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement),this.container.insertBefore(t,this.container.childNodes[1])}mouseUpClick(t){t.stopPropagation(),clearInterval(this.timeOut),this.isCalled=!1,O.remove(this.spinUp,"mouseleave",this.mouseUpClick),O.remove(this.spinDown,"mouseleave",this.mouseUpClick)}increment(t=this.step){this.isInteract=!1,this.changeValue(this.performAction(this.value,t,Jg)),this.raiseChangeEvent()}decrement(t=this.step){this.isInteract=!1,this.changeValue(this.performAction(this.value,t,pb)),this.raiseChangeEvent()}destroy(){this.unwireEvents(),ye(this.hiddenInput),this.showSpinButton&&(this.unwireSpinBtnEvents(),ye(this.spinUp),ye(this.spinDown));const t=["aria-labelledby","role","autocomplete","aria-readonly","autocorrect","aria-disabled","aria-placeholder","autocapitalize","spellcheck","aria-autocomplete","tabindex","aria-valuemin","aria-valuemax","aria-live","aria-valuenow","aria-invalid"];for(let i=0;i<t.length;i++)this.element.removeAttribute(t[i]);this.element.classList.remove("e-input"),this.container.insertAdjacentElement("afterend",this.element),ye(this.container),super.destroy()}getText(){return this.element.value}focusIn(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),j([this.container],[R_]))}focusOut(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),Y([this.container],[R_]))}getPersistData(){return this.addOnPersist(["value"])}onPropertyChanged(t,i){for(const s of Object.keys(t))switch(s){case"width":this.setElementWidth(t.width);break;case"cssClass":this.updateCssClass(t.cssClass,i.cssClass);break;case"enabled":ft.setEnabled(t.enabled,this.element);break;case"enableRtl":ft.setEnableRtl(t.enableRtl,[this.container]);break;case"readonly":ft.setReadonly(t.readonly,this.element),this.readonly?bt(this.element,{"aria-readonly":"true"}):this.element.removeAttribute("aria-readonly");break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.updateDataAttribute(!0),this.checkAttributes(!0),ft.validateInputType(this.container,this.element);break;case"placeholder":ft.setPlaceholder(t.placeholder,this.element);break;case"step":this.step=t.step,this.validateStep();break;case"showSpinButton":this.updateSpinButton(t);break;case"showClearButton":this.updateClearButton(t);break;case"floatLabelType":this.floatLabelType=t.floatLabelType,this.floatLabelTypeUpdate();break;case"value":this.isDynamicChange=(this.isAngular||this.isVue)&&this.preventChange,this.updateValue(t.value),this.isDynamicChange&&(this.preventChange=!1,this.isDynamicChange=!1);break;case"min":case"max":pi(s,J(s,t),this),this.validateMinMax(),this.updateValue(this.value);break;case"strictMode":this.strictMode=t.strictMode,this.updateValue(this.value),this.validateState();break;case"locale":this.initCultureFunc(),this.l10n.setLocale(this.locale),this.setSpinButton(),this.updatePlaceholder(),ft.setPlaceholder(this.placeholder,this.element),this.updateValue(this.value);break;case"currency":{const r=J(s,t);this.setProperties({currencyCode:r},!0),this.updateCurrency(s,r)}break;case"currencyCode":{const r=J(s,t);this.setProperties({currency:r},!0),this.updateCurrency("currency",r)}break;case"format":pi(s,J(s,t),this),this.initCultureInfo(),this.updateValue(this.value);break;case"decimals":this.decimals=t.decimals,this.updateValue(this.value)}}updateClearButton(t){ft.setClearButton(t.showClearButton,this.element,this.inputWrapper,void 0,this.createElement),this.bindClearEvent()}updateSpinButton(t){t.showSpinButton?this.spinBtnCreation():(ye(this.spinUp),ye(this.spinDown))}getModuleName(){return"numerictextbox"}};return xn([A("")],n.prototype,"cssClass",void 0),xn([A(null)],n.prototype,"value",void 0),xn([A(-Number.MAX_VALUE)],n.prototype,"min",void 0),xn([A(Number.MAX_VALUE)],n.prototype,"max",void 0),xn([A(1)],n.prototype,"step",void 0),xn([A(null)],n.prototype,"width",void 0),xn([A(null)],n.prototype,"placeholder",void 0),xn([A({})],n.prototype,"htmlAttributes",void 0),xn([A(!0)],n.prototype,"showSpinButton",void 0),xn([A(!1)],n.prototype,"readonly",void 0),xn([A(!0)],n.prototype,"enabled",void 0),xn([A(!1)],n.prototype,"showClearButton",void 0),xn([A(!1)],n.prototype,"enablePersistence",void 0),xn([A("n2")],n.prototype,"format",void 0),xn([A(null)],n.prototype,"decimals",void 0),xn([A(null)],n.prototype,"currency",void 0),xn([A(null)],n.prototype,"currencyCode",void 0),xn([A(!0)],n.prototype,"strictMode",void 0),xn([A(!1)],n.prototype,"validateDecimalOnType",void 0),xn([A("Never")],n.prototype,"floatLabelType",void 0),xn([Z()],n.prototype,"created",void 0),xn([Z()],n.prototype,"destroyed",void 0),xn([Z()],n.prototype,"change",void 0),xn([Z()],n.prototype,"focus",void 0),xn([Z()],n.prototype,"blur",void 0),n=xn([ts],n),n})();const mb="e-error",qo="e-label-top",yD={0:"[0-9]",9:"[0-9 ]","#":"[0-9 +-]",L:"[A-Za-z]","?":"[A-Za-z ]","&":"[^\x7f ]+",C:"[^\x7f]+",A:"[A-Za-z0-9]",a:"[A-Za-z0-9 ]"};function vD(){if(bt(this.element,{role:"textbox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-live":"assertive","aria-valuenow":""}),this.mask){const n=this.mask.split("]");for(let t=0;t<n.length;t++)if("\\"===n[t][n[t].length-1]){n[t]=n[t]+"]";const i=n[t].split("[");for(let s=0;s<i.length;s++)"\\"===i[s][i[s].length-1]&&(i[s]=i[s]+"["),dE.call(this,i[s])}else{const i=n[t].split("[");if(i.length>1){let s=!1;for(let r=0;r<i.length;r++)"\\"===i[r]?(this.customRegExpCollec.push("["),this.hiddenMask+=i[r]+"["):""===i[r]?s=!0:""!==i[r]&&s||r===i.length-1?(this.customRegExpCollec.push("["+i[r]+"]"),this.hiddenMask+=this.promptChar,s=!1):dE.call(this,i[r])}else dE.call(this,i[0])}if(this.escapeMaskValue=this.hiddenMask,this.promptMask=this.hiddenMask.replace(/[09?LCAa#&]/g,this.promptChar),!m(this.customCharacters))for(let t=0;t<this.promptMask.length;t++)m(this.customCharacters[this.promptMask[t]])||(this.promptMask=this.promptMask.replace(new RegExp(this.promptMask[t],"g"),this.promptChar));let e=0;if(this.hiddenMask.match(new RegExp(/\\/)))for(let t=0;t<this.hiddenMask.length;t++){let i=0;t>=1&&(i=t),e=this.hiddenMask.length-this.promptMask.length,i-=e,t>0&&"\\"!==this.hiddenMask[t-1]&&(">"===this.hiddenMask[t]||"<"===this.hiddenMask[t]||"|"===this.hiddenMask[t])&&(this.promptMask=this.promptMask.substring(0,i)+this.promptMask.substring(t+1-e,this.promptMask.length),this.escapeMaskValue=this.escapeMaskValue.substring(0,i)+this.escapeMaskValue.substring(t+1-e,this.escapeMaskValue.length)),"\\"===this.hiddenMask[t]&&(this.promptMask=this.promptMask.substring(0,i)+this.hiddenMask[t+1]+this.promptMask.substring(t+2-e,this.promptMask.length),this.escapeMaskValue=this.escapeMaskValue.substring(0,i)+this.escapeMaskValue[t+1]+this.escapeMaskValue.substring(t+2-e,this.escapeMaskValue.length))}else this.promptMask=this.promptMask.replace(/[>|<]/g,""),this.escapeMaskValue=this.hiddenMask.replace(/[>|<]/g,"");bt(this.element,{"aria-invalid":"false"})}}function GP(){dn.call(this,this.promptMask),yb.call(this,this.value)}function ty(){O.add(this.element,"keydown",_D,this),O.add(this.element,"keypress",ID,this),O.add(this.element,"keyup",z_,this),O.add(this.element,"input",j_,this),O.add(this.element,"focus",pE,this),O.add(this.element,"blur",V_,this),O.add(this.element,"paste",SD,this),O.add(this.element,"cut",H_,this),O.add(this.element,"drop",fE,this),O.add(this.element,"mousedown",B_,this),O.add(this.element,"mouseup",gb,this),this.enabled&&(uE.call(this),this.formElement&&O.add(this.formElement,"reset",CD,this))}function F_(){O.remove(this.element,"keydown",_D),O.remove(this.element,"keypress",ID),O.remove(this.element,"keyup",z_),O.remove(this.element,"input",j_),O.remove(this.element,"focus",pE),O.remove(this.element,"blur",V_),O.remove(this.element,"paste",SD),O.remove(this.element,"cut",H_),O.remove(this.element,"mousedown",B_),O.remove(this.element,"mouseup",gb),this.formElement&&O.remove(this.formElement,"reset",CD)}function uE(){this.showClearButton&&O.add(this.inputObj.clearButton,"mousedown touchstart",YP,this)}function YP(n){n.preventDefault(),(!this.inputObj.clearButton.classList.contains("e-clear-icon-hide")||this.inputObj.container.classList.contains("e-static-clear"))&&(bD.call(this,n),this.value="")}function bD(n){const e=this.element.value;dn.call(this,this.promptMask),this.redoCollec.unshift({value:this.promptMask,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),kd.call(this,n,e),this.element.setSelectionRange(0,0)}function CD(){"EJS-MASKEDTEXTBOX"===this.element.tagName?dn.call(this,this.promptMask):this.value=this.initInputValue}function ED(n){return n.value}function pc(n,e){let t="",i=0,s=!1;const r=!m(e)||m(n)||m(this)?e:n.value;if(r!==this.promptMask)for(let o=0;o<this.customRegExpCollec.length;o++)s&&(s=!1),(">"===this.customRegExpCollec[i]||"<"===this.customRegExpCollec[i]||"|"===this.customRegExpCollec[i]||"\\"===this.customRegExpCollec[i])&&(--o,s=!0),s||r[o]!==this.promptChar&&!m(this.customRegExpCollec[i])&&(this._callPasteHandler||!m(this.regExpCollec[this.customRegExpCollec[i]])||this.customRegExpCollec[i].length>2&&"["===this.customRegExpCollec[i][0]&&"]"===this.customRegExpCollec[i][this.customRegExpCollec[i].length-1]||!m(this.customCharacters)&&!m(this.customCharacters[this.customRegExpCollec[i]]))&&""!==r&&(t+=r[o]),++i;return(null===this.mask||""===this.mask&&void 0!==this.value)&&(t=r),t}function dE(n){for(let e=0;e<n.length;e++)this.hiddenMask+=n[e],"\\"!==n[e]&&this.customRegExpCollec.push(n[e])}function B_(){this.isClicked=!0}function gb(){this.isClicked=!1}function pE(n){const e=this.element;let t=0;const i=pc.call(this,e);let s=!1,r=!1,o={selectionStart:e.selectionStart,event:n,value:this.value,maskedValue:e.value,container:this.inputObj.container,selectionEnd:e.selectionEnd};if(this.isClicked||wD.call(this,o,e),this.mask&&(!(null===i||""===i)||"Always"===this.floatLabelType||null===this.placeholder||""===this.placeholder||(e.value=this.promptMask),setTimeout(()=>{if(e.selectionStart===this.promptMask.length||e.value[e.selectionStart]===this.promptChar)s=!0;else for(let a=e.selectionStart;a<this.promptMask.length;a++){if(e.value[a]===this.promptChar){s=!0;break}if(e.value[a]!==this.promptMask[a]){s=!1;break}}}),setTimeout(()=>{const a=e.selectionStart-1;if(a===this.promptMask.length-1||e.value[a]===this.promptChar)r=!0;else for(let u=a;u>=0;u--){if(e.value[u]===this.promptChar){r=!0;break}if(e.value[u]!==this.promptMask[u]){r=!1;break}}}),this.isClicked||"Always"!==this.floatLabelType&&(null===i||""===i)&&null!==this.placeholder&&""!==this.placeholder)){for(t=0;t<this.promptMask.length;t++)if(e.value[t]===this.promptChar){setTimeout(()=>{(s||r)&&(e.selectionEnd=t,e.selectionStart=t),o={selectionStart:e.selectionStart,event:n,value:this.value,maskedValue:e.value,container:this.inputObj.container,selectionEnd:e.selectionEnd},wD.call(this,o,e)});break}m(e.value.match(this.promptChar))&&(o={selectionStart:e.selectionStart,event:n,value:this.value,maskedValue:e.value,container:this.inputObj.container,selectionEnd:e.selectionEnd},wD.call(this,o,e)),this.isClicked=!1}}function wD(n,e){this.trigger("focus",n,t=>{e.selectionStart=t.selectionStart,e.selectionEnd=t.selectionEnd})}function V_(n){if(this.blurEventArgs={event:n,value:this.value,maskedValue:this.element.value,container:this.inputObj.container},this.trigger("blur",this.blurEventArgs),this.mask&&(this.isFocus=!1,this.placeholder&&this.element.value===this.promptMask&&"Always"!==this.floatLabelType)){dn.call(this,"");const e=this.element.parentNode.querySelector(".e-float-text");"Auto"===this.floatLabelType&&!m(e)&&e.classList.contains(qo)&&Y([e],qo)}}function SD(n){if(this.mask&&!this.readonly){const e=this.element.selectionStart,t=this.element.selectionEnd,i=this.element.value;dn.call(this,""),this._callPasteHandler=!0,setTimeout(()=>{let s=this.element.value.replace(/ /g,"");this.redoCollec.length>0&&this.redoCollec[0].value===this.element.value&&(s=pc.call(this,this.element)),dn.call(this,i),this.element.selectionStart=e,this.element.selectionEnd=t;let r=0;this.maskKeyPress=!0;do{Od.call(this,s[r],!1,null),++r}while(r<s.length);if(this.maskKeyPress=!1,this._callPasteHandler=!1,this.element.value===i){let o=0;this.maskKeyPress=!0;do{Od.call(this,s[o],!1,null),++o}while(o<s.length);this.maskKeyPress=!1}else kd.call(this,n,i)},1)}}function H_(n){if(this.mask&&!this.readonly){const e=this.element.value,t=this.element.selectionStart,i=this.element.selectionEnd;this.undoCollec.push({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd});const s=this.element.value.substring(0,t)+this.promptMask.substring(t,i)+this.element.value.substring(i);setTimeout(()=>{dn.call(this,s),this.element.selectionStart=this.element.selectionEnd=t,this.element.value!==e&&kd.call(this,n,null)},0)}}function fE(n){n.preventDefault()}function j_(n){if((!0!==Q.isIE||""!==this.element.value||"Never"!==this.floatLabelType)&&(ut(n,{ctrlKey:!1,keyCode:229}),this.mask)){if(""===this.element.value&&this.redoCollec.unshift({value:this.promptMask,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),1===this.element.value.length&&(this.element.value=this.element.value+this.promptMask,this.element.setSelectionRange(1,1)),this._callPasteHandler||KP.call(this,n),this.element.value.length>this.promptMask.length){const i=this.element.selectionStart,r=this.element.value.substring(i-(this.element.value.length-this.promptMask.length),i);this.maskKeyPress=!1;let o=0;do{Od.call(this,r[o],n.ctrlKey,n),++o}while(o<r.length);this.element.value!==this.preEleVal&&kd.call(this,n,null)}const t=pc.call(this,this.element);this.prevValue=t,this.value=t,""===t&&(dn.call(this,this.promptMask),this.element.setSelectionRange(0,0))}}function _D(n){if(this.mask&&!this.readonly){229!==n.keyCode&&(n.ctrlKey&&(89===n.keyCode||90===n.keyCode)&&n.preventDefault(),KP.call(this,n));const e=this.element.value;if(n.ctrlKey&&(89===n.keyCode||90===n.keyCode)){let t;90===n.keyCode&&this.undoCollec.length>0&&e!==this.undoCollec[this.undoCollec.length-1].value?(t=this.undoCollec[this.undoCollec.length-1],this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),dn.call(this,t.value),this.element.selectionStart=t.startIndex,this.element.selectionEnd=t.endIndex,this.undoCollec.splice(this.undoCollec.length-1,1)):89===n.keyCode&&this.redoCollec.length>0&&e!==this.redoCollec[0].value&&(t=this.redoCollec[0],this.undoCollec.push({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),dn.call(this,t.value),this.element.selectionStart=t.startIndex,this.element.selectionEnd=t.endIndex,this.redoCollec.splice(0,1))}}}function U_(){let n;const e=this.element.selectionStart,t=this.element.selectionEnd;this.redoCollec.length>0?(n=this.redoCollec[0],dn.call(this,n.value),n.startIndex-e==1?(this.element.selectionStart=n.startIndex,this.element.selectionEnd=n.endIndex):(this.element.selectionStart=e+1,this.element.selectionEnd=t+1)):(dn.call(this,this.promptMask),this.element.selectionStart=this.element.selectionEnd=e)}function mE(n,e,t){return"input"===t.type&&(n=!1,e=this.element.value,dn.call(this,this.promptMask),yb.call(this,e)),n}function KP(n){let t,e=!1,i=!1;this.element.value.length<this.promptMask.length&&(e=!0,t=this.element.value,e=mE.call(this,e,t,n),U_.call(this)),this.element.value.length>=this.promptMask.length&&"input"===n.type&&(e=mE.call(this,e,t,n));const s=this.element.selectionStart,r=this.element.selectionEnd;let o=this.element.selectionStart;const a=this.element.selectionEnd,u=this.hiddenMask.replace(/[>|\\<]/g,"");let p=u[o-1];const y=this.element.selectionEnd;if(e||8===n.keyCode||46===n.keyCode){this.undoCollec.push({value:this.element.value,startIndex:this.element.selectionStart,endIndex:a});let E=!1;const _=this.element.value;if(o>0||(8===n.keyCode||46===n.keyCode)&&o<this.element.value.length&&this.element.selectionEnd-o!==this.element.value.length){let D=o;o!==a?(o=a,46===n.keyCode&&(E=!0)):46===n.keyCode?++D:--D;for(let L=o;8===n.keyCode||e||E?L>D:L<D;8===n.keyCode||e||E?L--:L++)for(let V=o;8===n.keyCode||e||E?V>0:V<this.element.value.length;8===n.keyCode||e||E?V--:V++){let H;(8===n.keyCode||E)&&(s!==r&&s!==o||s===r)||e?(p=u[V-1],H=o-1):(p=u[V],H=o,++o);let se=this.element.value[H];if(m(this.regExpCollec[p])&&!m(this.customCharacters)&&m(this.customCharacters[p])&&this.hiddenMask[H]!==this.promptChar&&"["!==this.customRegExpCollec[H][0]&&"]"!==this.customRegExpCollec[H][this.customRegExpCollec[H].length-1]||this.promptMask[H]!==this.promptChar&&m(this.customCharacters))this.element.selectionStart=this.element.selectionEnd=H,n.preventDefault(),46===n.keyCode&&!E&&++this.element.selectionStart;else{const _e=this.element.value,re=this.promptChar,Ae=_e.substring(0,H)+re+_e.substring(o,_e.length);dn.call(this,Ae),n.preventDefault(),46===n.keyCode&&!E&&H++,this.element.selectionStart=this.element.selectionEnd=H,i=!0}if(o=this.element.selectionStart,!i&&8===n.keyCode||E||!i&&46!==n.keyCode?H=o-1:(H=o,i=!1),se=this.element.value[H],s!==r&&this.element.selectionStart===s||this.promptMask[H]===this.promptChar||se!==this.promptMask[H]&&this.promptMask[H]!==this.promptChar&&!m(this.customCharacters))break}}46===n.keyCode&&E&&i&&(this.element.selectionStart=this.element.selectionEnd=y),0===this.element.selectionStart&&this.element.selectionEnd===this.element.value.length&&(dn.call(this,this.promptMask),n.preventDefault(),this.element.selectionStart=this.element.selectionEnd=o),this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),this.element.value!==_&&kd.call(this,n,t)}}function ID(n){if(this.mask&&!this.readonly){const e=this.element.value;if(!n.ctrlKey||n.ctrlKey&&"KeyA"!==n.code&&"KeyY"!==n.code&&"KeyZ"!==n.code&&"KeyX"!==n.code&&"KeyC"!==n.code&&"KeyV"!==n.code){this.maskKeyPress=!0;let t=n.key;"Spacebar"===t&&(t=String.fromCharCode(n.keyCode)),t?t&&1===t.length&&(Od.call(this,t,n.ctrlKey,n),n.preventDefault()):(this.isIosInvalid=!0,Od.call(this,String.fromCharCode(n.keyCode),n.ctrlKey,n),n.preventDefault(),this.isIosInvalid=!1),32===n.keyCode&&" "===t&&" "===this.promptChar&&(this.element.selectionStart=this.element.selectionEnd=this.element.selectionStart-t.length)}this.element.value!==e&&kd.call(this,n,e)}}function kd(n,e){const t=this.isProtectedOnChange;if(!m(this.changeEventArgs)&&!this.isInitial){const i={};this.changeEventArgs={value:this.element.value,maskedValue:this.element.value,isInteraction:!1,isInteracted:!1},this.mask&&(this.changeEventArgs.value=pc.call(this,this.element)),m(n)||(this.changeEventArgs.isInteracted=!0,this.changeEventArgs.isInteraction=!0,this.changeEventArgs.event=n),this.isProtectedOnChange=!0,this.value=this.changeEventArgs.value,this.isProtectedOnChange=t,qc(i,this.changeEventArgs),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",i)}this.preEleVal=this.element.value,this.prevValue=pc.call(this,this.element),bt(this.element,{"aria-valuenow":this.element.value})}function z_(n){if(this.mask&&!this.readonly){let e;if(this.maskKeyPress||229!==n.keyCode)q_.call(this);else{let i;if(1===this.element.value.length&&(this.element.value=this.element.value+this.promptMask,this.element.setSelectionRange(1,1)),this.element.value.length>this.promptMask.length){const s=this.element.selectionStart,r=this.element.value.length-this.promptMask.length;let o=this.element.value.substring(s-r,s);if(this.undoCollec.length>0){e=this.undoCollec[this.undoCollec.length-1];const a=this.element.selectionStart;i=e.value;const u=e.value.substring(a-r,a);e=this.redoCollec[0],o=o.trim();const p=Q.isAndroid&&""===o;p||u===o||e.value.substring(a-r,a)===o?p&&AD.call(this,n,a-1,this.element.selectionEnd-1,o,n.ctrlKey,!1):Od.call(this,o,n.ctrlKey,n)}else i=this.promptMask,Od.call(this,o,n.ctrlKey,n);this.maskKeyPress=!1,kd.call(this,n,i)}}const t=pc.call(this,this.element);(0!==this.element.selectionStart||this.promptMask!==this.element.value||""!==t||""===t&&this.value!==t)&&(this.prevValue=t,this.value=t)}else kd.call(this,n);if(0===this.element.selectionStart&&0===this.element.selectionEnd){const e=this.element;setTimeout(()=>{e.setSelectionRange(0,0)},0)}}function xD(n){if(n.length>1&&this.promptMask.length+n.length<this.element.value.length){const e=this.redoCollec[0].value.substring(0,this.redoCollec[0].startIndex)+n+this.redoCollec[0].value.substring(this.redoCollec[0].startIndex,this.redoCollec[0].value.length);dn.call(this,e),this.element.selectionStart=this.element.selectionEnd=this.redoCollec[0].startIndex+n.length}this.element.selectionStart=this.element.selectionStart-n.length,this.element.selectionEnd=this.element.selectionEnd-n.length}function ZP(n){this.maskKeyPress||xD.call(this,n)}function Od(n,e,t){if(ZP.call(this,n),m(this)||m(n))return;let i=this.element.selectionStart;const s=i;let r,o=!1;const a=this.element.value;let u,p=!1,y=!1;for(let E=0;E<n.length;E++){const _=n[E];if(i=this.element.selectionStart,!this.maskKeyPress&&s===i&&(i+=E),!this.maskKeyPress||i<this.promptMask.length){for(let D=i;D<this.promptMask.length;D++)r=this.escapeMaskValue[i],"\\"===this.hiddenMask[i]&&this.hiddenMask[i+1]===n&&(y=!0),(m(this.regExpCollec[r])&&(m(this.customCharacters)||!m(this.customCharacters)&&m(this.customCharacters[r]))&&this.hiddenMask[i]!==this.promptChar&&"["!==this.customRegExpCollec[i][0]&&"]"!==this.customRegExpCollec[i][this.customRegExpCollec[i].length-1]||this.promptMask[i]!==this.promptChar&&m(this.customCharacters)||this.promptChar===r&&this.escapeMaskValue===this.mask)&&(this.element.selectionStart=this.element.selectionEnd=i+1,i=this.element.selectionStart,r=this.hiddenMask[i]);if(m(this.customCharacters)||m(this.customCharacters[r]))(!m(this.regExpCollec[r])&&_.match(new RegExp(this.regExpCollec[r]))&&this.promptMask[i]===this.promptChar||this.promptMask[i]===this.promptChar&&"["===this.customRegExpCollec[i][0]&&"]"===this.customRegExpCollec[i][this.customRegExpCollec[i].length-1]&&_.match(new RegExp(this.customRegExpCollec[i])))&&(o=!0);else{const L=this.customCharacters[r].split(",");for(let V=0;V<L.length;V++)if(_.match(new RegExp("["+L[V]+"]"))){o=!0;break}}if((!this.maskKeyPress||i<this.hiddenMask.length)&&o){if(0===E)if(this.maskKeyPress)this.undoCollec.push({value:a,startIndex:i,endIndex:i});else{const D=this.element.selectionStart,L=this.element.selectionEnd;this.redoCollec.length>0?(u=this.redoCollec[0].value,dn.call(this,u),this.undoCollec.push(this.redoCollec[0])):(this.undoCollec.push({value:this.promptMask,startIndex:i,endIndex:i}),u=this.promptMask,dn.call(this,u)),this.element.selectionStart=D,this.element.selectionEnd=L}i=this.element.selectionStart,TD.call(this,t,i,_,u,y),p=!0,E===n.length-1&&this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),o=!1}else i=this.element.selectionStart,AD.call(this,t,i,s,n,e,p);E===n.length-1&&!o&&(!Q.isAndroid||Q.isAndroid&&i<this.promptMask.length)&&this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd})}else 1===n.length&&!e&&!m(t)&&W_.call(this)}}function TD(n,e,t,i,s){if(this.hiddenMask.length>this.promptMask.length&&(t=XP.call(this,t,this.element.value)),!s){const r=this.element.value,o=r.substring(0,e)+t+r.substring(e+1,r.length);dn.call(this,o),this.element.selectionStart=this.element.selectionEnd=e+1}}function AD(n,e,t,i,s,r){if(!this.maskKeyPress){const o=this.element.value;e>=this.promptMask.length?dn.call(this,o.substring(0,e)):(dn.call(this,t===e?o.substring(0,e)+o.substring(e+1,o.length):this.promptMask.length===this.element.value.length?o.substring(0,e)+o.substring(e,o.length):o.substring(0,t)+o.substring(t+1,o.length)),this.element.selectionStart=this.element.selectionEnd=r||this.element.value[t]!==this.promptChar?e:t),W_.call(this)}1===i.length&&!s&&!m(n)&&W_.call(this)}function W_(){const n=this.element.parentNode;let e=200;n.classList.contains("e-input-group")||n.classList.contains("e-float-input")?j([n],mb):j([this.element],mb),!0===this.isIosInvalid&&(e=400),bt(this.element,{"aria-invalid":"true"}),setTimeout(()=>{this.maskKeyPress||q_.call(this)},e)}function q_(){const n=this.element.parentNode;m(n)||Y([n],mb),Y([this.element],mb),bt(this.element,{"aria-invalid":"false"})}function XP(n,e){let t,i,s=e,r=0;for(i=0;i<this.hiddenMask.length;i++)if("\\"===this.hiddenMask[i]&&(t=s.substring(0,i)+"\\"+s.substring(i,s.length)),(">"===this.hiddenMask[i]||"<"===this.hiddenMask[i]||"|"===this.hiddenMask[i])&&(this.hiddenMask[i]!==s[i]&&(t=s.substring(0,i)+this.hiddenMask[i]+s.substring(i,s.length)),++r),t){if(t[i]===this.promptChar&&i>this.element.selectionStart||this.element.value.indexOf(this.promptChar)<0&&this.element.selectionStart+r===i){r=0;break}s=t}for(;i>=0&&t;){if(0===i||"\\"!==t[i-1]){if(">"===t[i]){n=n.toUpperCase();break}if("<"===t[i]){n=n.toLowerCase();break}if("|"===t[i])break}--i}return n}function yb(n){if(this.mask&&void 0!==n&&(void 0===this.prevValue||this.prevValue!==n)){if(this.maskKeyPress=!0,dn.call(this,this.promptMask),""!==n&&!(null===n&&"Never"===this.floatLabelType&&this.placeholder)&&(this.element.selectionStart=0,this.element.selectionEnd=0),null!==n)for(let i=0;i<n.length;i++)Od.call(this,n[i],!1,null);const e=pc.call(this,this.element);this.prevValue=e,this.value=e,kd.call(this,null,null),this.maskKeyPress=!1;const t=this.element.parentNode.querySelector(".e-float-text");this.element.value===this.promptMask&&"Auto"===this.floatLabelType&&this.placeholder&&!m(t)&&t.classList.contains(qo)&&!this.isFocus&&(Y([t],qo),j([t],"e-label-bottom"),dn.call(this,""))}(null===this.mask||""===this.mask&&void 0!==this.value)&&dn.call(this,this.value)}function dn(n,e){!this.isFocus&&"Auto"===this.floatLabelType&&this.placeholder&&m(this.value)&&(n="");const t=pc.call(this,e||this.element,n);null===t||""===t?(ft.setValue(n,e||this.element,this.floatLabelType,!1),this.showClearButton&&this.inputObj.clearButton.classList.add("e-clear-icon-hide")):ft.setValue(n,e||this.element,this.floatLabelType,this.showClearButton)}var $o=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const tL="e-input-focus",iL=["title","style","class"];let mo=class extends Ls{constructor(e,t){super(e,t),this.initInputValue="",this.isAngular=!1,this.preventChange=!1,this.isClicked=!1,this.maskOptions=e}getModuleName(){return"maskedtextbox"}preRender(){this.promptMask="",this.hiddenMask="",this.escapeMaskValue="",this.regExpCollec=yD,this.customRegExpCollec=[],this.undoCollec=[],this.redoCollec=[],this.changeEventArgs={},this.focusEventArgs={},this.blurEventArgs={},this.maskKeyPress=!1,this.isFocus=!1,this.isInitial=!1,this.isIosInvalid=!1;const e=J("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),Y([this.cloneElement],["e-control","e-maskedtextbox","e-lib"]),this.angularTagName=null,this.formElement=ae(this.element,"form"),"EJS-MASKEDTEXTBOX"===this.element.tagName){this.angularTagName=this.element.tagName;const t=this.createElement("input");for(let i=0;i<this.element.attributes.length;i++)t.setAttribute(this.element.attributes[i].nodeName,this.element.attributes[i].nodeValue),t.innerHTML=this.element.innerHTML;this.element.hasAttribute("id")&&this.element.removeAttribute("id"),this.element.classList.remove("e-control","e-maskedtextbox"),this.element.classList.add("e-mask-container"),this.element.appendChild(t),this.element=t,pi("ej2_instances",e,this.element)}this.updateHTMLAttrToElement(),this.checkHtmlAttributes(!1),this.formElement&&(this.initInputValue=this.value)}getPersistData(){return this.addOnPersist(["value"])}render(){"input"===this.element.tagName.toLowerCase()&&("Never"===this.floatLabelType&&j([this.element],"e-input"),this.createWrapper(),this.updateHTMLAttrToWrapper(),""===this.element.name&&this.element.setAttribute("name",this.element.id),this.isInitial=!0,this.resetMaskedTextBox(),this.isInitial=!1,this.setMaskPlaceholder(!0,!1),this.setWidth(this.width),this.preEleVal=this.element.value,!Q.isDevice&&("11.0"===Q.info.version||"edge"===Q.info.name)&&this.element.blur(),Q.isDevice&&Q.isIos&&this.element.blur(),(this.element.getAttribute("value")||this.value)&&this.element.setAttribute("value",this.element.value),this.renderComplete())}updateHTMLAttrToElement(){if(!m(this.htmlAttributes))for(const e of Object.keys(this.htmlAttributes))iL.indexOf(e)<0&&this.element.setAttribute(e,this.htmlAttributes[e])}updateCssClass(e,t){ft.setCssClass(this.getValidClassList(e),[this.inputObj.container],this.getValidClassList(t))}getValidClassList(e){let t=e;return!m(e)&&""!==e&&(t=e.replace(/\s+/g," ").trim()),t}updateHTMLAttrToWrapper(){if(!m(this.htmlAttributes))for(const e of Object.keys(this.htmlAttributes))if(iL.indexOf(e)>-1)if("class"===e){const t=this.htmlAttributes[e].replace(/\s+/g," ").trim();""!==t&&j([this.inputObj.container],t.split(" "))}else if("style"===e){let t=this.inputObj.container.getAttribute(e);t=m(t)?this.htmlAttributes[e]:t+this.htmlAttributes[e],this.inputObj.container.setAttribute(e,t)}else this.inputObj.container.setAttribute(e,this.htmlAttributes[e])}resetMaskedTextBox(){this.promptMask="",this.hiddenMask="",this.escapeMaskValue="",this.customRegExpCollec=[],this.undoCollec=[],this.redoCollec=[],this.promptChar.length>1&&(this.promptChar=this.promptChar[0]),vD.call(this),GP.call(this),(null===this.mask||""===this.mask&&void 0!==this.value)&&dn.call(this,this.value);const e=pc.call(this,this.element);this.prevValue=e,this.value=e,this.isInitial||F_.call(this),ty.call(this)}setMaskPlaceholder(e,t){(t||this.placeholder)&&(ft.setPlaceholder(this.placeholder,this.element),(this.element.value===this.promptMask&&e&&"Always"!==this.floatLabelType||this.element.value===this.promptMask&&"Never"===this.floatLabelType)&&dn.call(this,""))}setWidth(e){if(!m(e))if("number"==typeof e)this.inputObj.container.style.width=ct(e),this.element.style.width=ct(e);else if("string"==typeof e){const t=e.match(/px|%|em/)?e:ct(e);this.inputObj.container.style.width=t,this.element.style.width=t}}checkHtmlAttributes(e){const t=e?m(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["placeholder","disabled","value","readonly"];for(const i of t)if(!m(this.element.getAttribute(i)))switch(i){case"placeholder":(m(this.maskOptions)||void 0===this.maskOptions.placeholder||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"disabled":if(m(this.maskOptions)||void 0===this.maskOptions.enabled||e){const s=!("disabled"===this.element.getAttribute(i)||""===this.element.getAttribute(i)||"true"===this.element.getAttribute(i));this.setProperties({enabled:s},!e)}break;case"value":(m(this.maskOptions)||void 0===this.maskOptions.value||e)&&this.setProperties({value:this.element.value},!e);break;case"readonly":if(m(this.maskOptions)||void 0===this.maskOptions.readonly||e){const s="readonly"===this.element.getAttribute(i)||""===this.element.getAttribute(i)||"true"===this.element.getAttribute(i);this.setProperties({readonly:s},!e)}}}createWrapper(){let e=this.cssClass;!m(this.cssClass)&&""!==this.cssClass&&(e=this.getValidClassList(this.cssClass)),this.inputObj=ft.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{enableRtl:this.enableRtl,cssClass:e,enabled:this.enabled,readonly:this.readonly,placeholder:this.placeholder,showClearButton:this.showClearButton}},this.createElement),this.inputObj.container.setAttribute("class","e-control-wrapper e-mask "+this.inputObj.container.getAttribute("class"))}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"value":yb.call(this,this.value),this.placeholder&&this.setMaskPlaceholder(!1,!1);break;case"placeholder":this.setMaskPlaceholder(!0,!0);break;case"width":this.setWidth(e.width);break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"enabled":ft.setEnabled(e.enabled,this.element,this.floatLabelType,this.inputObj.container);break;case"readonly":ft.setReadonly(e.readonly,this.element);break;case"enableRtl":ft.setEnableRtl(e.enableRtl,[this.inputObj.container]);break;case"customCharacters":this.customCharacters=e.customCharacters,this.resetMaskedTextBox();break;case"showClearButton":ft.setClearButton(e.showClearButton,this.element,this.inputObj,void 0,this.createElement),uE.call(this);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,ft.removeFloating(this.inputObj),ft.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement);break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkHtmlAttributes(!0);break;case"mask":{const s=this.value;this.mask=e.mask,this.updateValue(s)}break;case"promptChar":{e.promptChar.length>1&&(e.promptChar=e.promptChar[0]),this.promptChar=e.promptChar?e.promptChar:"_";let s=this.element.value.replace(new RegExp("["+t.promptChar+"]","g"),this.promptChar);this.promptMask===this.element.value&&(s=this.promptMask.replace(new RegExp("["+t.promptChar+"]","g"),this.promptChar)),this.promptMask=this.promptMask.replace(new RegExp("["+t.promptChar+"]","g"),this.promptChar),this.undoCollec=this.redoCollec=[],dn.call(this,s);break}}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange}updateValue(e){this.resetMaskedTextBox(),yb.call(this,e)}getMaskedValue(){return ED.call(this,this.element)}focusIn(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),j([this.inputObj.container],[tL]))}focusOut(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),Y([this.inputObj.container],[tL]))}destroy(){F_.call(this);const e=["aria-labelledby","role","autocomplete","aria-readonly","autocorrect","aria-disabled","aria-placeholder","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-valuenow","aria-invalid"];for(let t=0;t<e.length;t++)this.element.removeAttribute(e[t]);this.element.classList.remove("e-input"),this.inputObj.container.insertAdjacentElement("afterend",this.element),ye(this.inputObj.container),super.destroy()}};$o([A(null)],mo.prototype,"cssClass",void 0),$o([A(null)],mo.prototype,"width",void 0),$o([A(null)],mo.prototype,"placeholder",void 0),$o([A("Never")],mo.prototype,"floatLabelType",void 0),$o([A({})],mo.prototype,"htmlAttributes",void 0),$o([A(!0)],mo.prototype,"enabled",void 0),$o([A(!1)],mo.prototype,"readonly",void 0),$o([A(!1)],mo.prototype,"showClearButton",void 0),$o([A(!1)],mo.prototype,"enablePersistence",void 0),$o([A(null)],mo.prototype,"mask",void 0),$o([A("_")],mo.prototype,"promptChar",void 0),$o([A(null)],mo.prototype,"value",void 0),$o([A(null)],mo.prototype,"customCharacters",void 0),$o([Z()],mo.prototype,"created",void 0),$o([Z()],mo.prototype,"destroyed",void 0),$o([Z()],mo.prototype,"change",void 0),$o([Z()],mo.prototype,"focus",void 0),$o([Z()],mo.prototype,"blur",void 0),mo=$o([ts],mo);var Ki=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class vb extends Is{}Ki([A("None")],vb.prototype,"placement",void 0),Ki([A(10)],vb.prototype,"largeStep",void 0),Ki([A(1)],vb.prototype,"smallStep",void 0),Ki([A(!1)],vb.prototype,"showSmallTicks",void 0),Ki([A(null)],vb.prototype,"format",void 0);class iy extends Is{}Ki([A(null)],iy.prototype,"color",void 0),Ki([A(null)],iy.prototype,"start",void 0),Ki([A(null)],iy.prototype,"end",void 0);class fc extends Is{}Ki([A(!1)],fc.prototype,"enabled",void 0),Ki([A(null)],fc.prototype,"minStart",void 0),Ki([A(null)],fc.prototype,"minEnd",void 0),Ki([A(null)],fc.prototype,"maxStart",void 0),Ki([A(null)],fc.prototype,"maxEnd",void 0),Ki([A(!1)],fc.prototype,"startHandleFixed",void 0),Ki([A(!1)],fc.prototype,"endHandleFixed",void 0);class Kf extends Is{}Ki([A("")],Kf.prototype,"cssClass",void 0),Ki([A("Before")],Kf.prototype,"placement",void 0),Ki([A("Focus")],Kf.prototype,"showOn",void 0),Ki([A(!1)],Kf.prototype,"isVisible",void 0),Ki([A(null)],Kf.prototype,"format",void 0);let pn=class extends Ls{constructor(e,t){super(e,t),this.horDir="left",this.verDir="bottom",this.transition={handle:"left .4s cubic-bezier(.25, .8, .25, 1), right .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1) , bottom .4s cubic-bezier(.25, .8, .25, 1)",rangeBar:"all .4s cubic-bezier(.25, .8, .25, 1)"},this.transitionOnMaterialTooltip={handle:"left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, top 1ms ease-out",rangeBar:"left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, width 1ms ease-out, height 1ms ease-out"},this.scaleTransform="transform .4s cubic-bezier(.25, .8, .25, 1)",this.customAriaText=null,this.drag=!0,this.isDragComplete=!1,this.initialTooltip=!0}preRender(){this.l10n=new Xr("slider",{incrementTitle:"Increase",decrementTitle:"Decrease"},this.locale),this.isElementFocused=!1,this.tickElementCollection=[],this.tooltipFormatInfo={},this.ticksFormatInfo={},this.initCultureInfo(),this.initCultureFunc(),this.formChecker()}formChecker(){const e=ae(this.element,"form");e?(this.isForm=!0,m(this.formResetValue)||this.setProperties({value:this.formResetValue},!0),this.formResetValue=this.value,"Range"!==this.type||!m(this.formResetValue)&&"object"==typeof this.formResetValue?m(this.formResetValue)&&(this.formResetValue=parseFloat(ct(this.min))):this.formResetValue=[parseFloat(ct(this.min)),parseFloat(ct(this.max))],this.formElement=e):this.isForm=!1}initCultureFunc(){this.internationalization=new d0(this.locale)}initCultureInfo(){this.tooltipFormatInfo.format=m(this.tooltip.format)?null:this.tooltip.format,this.ticksFormatInfo.format=m(this.ticks.format)?null:this.ticks.format}formatString(e,t){let i=null,s=null;if(e||0===e){i=this.formatNumber(e);const r=this.numberOfDecimals(e);s=this.internationalization.getNumberFormat(t)(this.makeRoundNumber(e,r))}return{elementVal:i,formatString:s}}formatNumber(e){const t=this.numberOfDecimals(e);return this.internationalization.getNumberFormat({maximumFractionDigits:t,minimumFractionDigits:t,useGrouping:!1})(e)}numberOfDecimals(e){const t=e.toString().split(".")[1];return t&&t.length?t.length:0}makeRoundNumber(e,t){return Number(e.toFixed(t||0))}fractionalToInteger(e){e=0===this.numberOfDecimals(e)?Number(e).toFixed(this.noOfDecimals):e;let t=1;for(let i=0;i<this.noOfDecimals;i++)t*=10;return Number((e*t).toFixed(0))}render(){this.initialize(),this.initRender(),this.wireEvents(),this.setZindex(),this.renderComplete(),"EJS-SLIDER"===this.element.tagName&&"none"==this.getTheme(this.sliderContainer)&&setTimeout(()=>{this.refresh()},0)}initialize(){j([this.element],"e-slider"),this.setCSSClass()}setElementWidth(e){m(e)||("number"==typeof e?this.sliderContainer.style.width=ct(e):"string"==typeof e&&(this.sliderContainer.style.width=e.match(/px|%|em/)?e:ct(e)))}setCSSClass(e){e&&Y([this.element],e.split(" ")),this.cssClass&&j([this.element],this.cssClass.split(" "))}setEnabled(){this.enabled?(Y([this.sliderContainer],["e-disabled"]),this.tooltip.isVisible&&this.tooltipElement&&"Always"===this.tooltip.showOn&&this.tooltipElement.classList.remove("e-disabled"),this.wireEvents()):(j([this.sliderContainer],["e-disabled"]),this.tooltip.isVisible&&this.tooltipElement&&"Always"===this.tooltip.showOn&&this.tooltipElement.classList.add("e-disabled"),this.unwireEvents())}getTheme(e){return window.getComputedStyle(e,":after").getPropertyValue("content").replace(/['"]+/g,"")}initRender(){this.sliderContainer=this.createElement("div",{className:"e-slider-container e-control-wrapper"}),this.element.parentNode.insertBefore(this.sliderContainer,this.element),this.sliderContainer.appendChild(this.element),this.sliderTrack=this.createElement("div",{className:"e-slider-track"}),this.element.appendChild(this.sliderTrack),this.setElementWidth(this.width),this.element.tabIndex=-1,this.getThemeInitialization(),this.setHandler(),this.createRangeBar(),this.limits.enabled&&this.createLimitBar(),this.setOrientClass(),this.hiddenInput=this.createElement("input",{attrs:{type:"hidden",value:m(this.value)?this.min.toString():this.value.toString(),name:this.element.getAttribute("name")||this.element.getAttribute("id")||"_"+(1e3*Math.random()).toFixed(0)+"slider",class:"e-slider-input"}}),this.hiddenInput.tabIndex=-1,this.sliderContainer.appendChild(this.hiddenInput),this.showButtons&&this.setButtons(),this.setEnableRTL(),"Range"===this.type?this.rangeValueUpdate():this.value=m(this.value)?parseFloat(ct(this.min.toString())):this.value,this.previousVal="Range"!==this.type?this.checkHandleValue(parseFloat(ct(this.value.toString()))):[this.checkHandleValue(parseFloat(ct(this.value[0].toString()))),this.checkHandleValue(parseFloat(ct(this.value[1].toString())))],this.previousChanged=this.previousVal,m(this.element.hasAttribute("name"))||this.element.removeAttribute("name"),this.setValue(),this.limits.enabled&&this.setLimitBar(),"None"!==this.ticks.placement&&this.renderScale(),this.tooltip.isVisible&&this.renderTooltip(),this.enabled?Y([this.sliderContainer],["e-disabled"]):j([this.sliderContainer],["e-disabled"]),this.readonly?j([this.sliderContainer],["e-read-only"]):Y([this.sliderContainer],["e-read-only"])}getThemeInitialization(){this.isMaterial="material"===this.getTheme(this.sliderContainer)||"material-dark"===this.getTheme(this.sliderContainer),this.isBootstrap="bootstrap"===this.getTheme(this.sliderContainer)||"bootstrap-dark"===this.getTheme(this.sliderContainer),this.isBootstrap4="bootstrap4"===this.getTheme(this.sliderContainer),this.isTailwind="tailwind"===this.getTheme(this.sliderContainer)||"tailwind-dark"===this.getTheme(this.sliderContainer),this.isBootstrap5="bootstrap5"===this.getTheme(this.sliderContainer),this.isMaterialTooltip=this.isMaterial&&"Range"!==this.type&&this.tooltip.isVisible}createRangeBar(){"Default"!==this.type&&(this.rangeBar=this.createElement("div",{attrs:{class:"e-range"}}),this.element.appendChild(this.rangeBar),this.drag&&"Range"===this.type&&this.rangeBar.classList.add("Horizontal"===this.orientation?"e-drag-horizontal":"e-drag-vertical"))}createLimitBar(){let e="Range"!==this.type?"e-limit-bar":"e-limit-first";e+=" e-limits",this.limitBarFirst=this.createElement("div",{attrs:{class:e}}),this.element.appendChild(this.limitBarFirst),"Range"===this.type&&(this.limitBarSecond=this.createElement("div",{attrs:{class:"e-limit-second e-limits"}}),this.element.appendChild(this.limitBarSecond))}setOrientClass(){"Vertical"!==this.orientation?(this.sliderContainer.classList.remove("e-vertical"),this.sliderContainer.classList.add("e-horizontal"),this.firstHandle.setAttribute("aria-orientation","horizontal"),"Range"===this.type&&this.secondHandle.setAttribute("aria-orientation","horizontal")):(this.sliderContainer.classList.remove("e-horizontal"),this.sliderContainer.classList.add("e-vertical"),this.firstHandle.setAttribute("aria-orientation","vertical"),"Range"===this.type&&this.secondHandle.setAttribute("aria-orientation","vertical"))}setAriaAttributes(e){let t=this.min,i=this.max;!m(this.customValues)&&this.customValues.length>0&&(t=this.customValues[0],i=this.customValues[this.customValues.length-1]),"Range"!==this.type?bt(e,{"aria-valuemin":t.toString(),"aria-valuemax":i.toString()}):(!m(this.customValues)&&this.customValues.length>0?[[t.toString(),this.customValues[this.value[1]].toString()],[this.customValues[this.value[0]].toString(),i.toString()]]:[[t.toString(),this.value[1].toString()],[this.value[0].toString(),i.toString()]]).forEach((r,o)=>{const a=0===o?this.firstHandle:this.secondHandle;a&&bt(a,{"aria-valuemin":r[0],"aria-valuemax":r[1]})})}createSecondHandle(){this.secondHandle=this.createElement("div",{attrs:{class:"e-handle",role:"slider",tabIndex:"0"}}),this.secondHandle.classList.add("e-handle-second"),this.element.appendChild(this.secondHandle)}createFirstHandle(){this.firstHandle=this.createElement("div",{attrs:{class:"e-handle",role:"slider",tabIndex:"0"}}),this.firstHandle.classList.add("e-handle-first"),this.element.appendChild(this.firstHandle),this.isMaterialTooltip&&(this.materialHandle=this.createElement("div",{attrs:{class:"e-handle e-material-handle"}}),this.element.appendChild(this.materialHandle))}wireFirstHandleEvt(e){e?(O.remove(this.firstHandle,"mousedown touchstart",this.handleFocus),O.remove(this.firstHandle,"transitionend",this.transitionEnd),O.remove(this.firstHandle,"mouseenter touchenter",this.handleOver),O.remove(this.firstHandle,"mouseleave touchend",this.handleLeave)):(O.add(this.firstHandle,"mousedown touchstart",this.handleFocus,this),O.add(this.firstHandle,"transitionend",this.transitionEnd,this),O.add(this.firstHandle,"mouseenter touchenter",this.handleOver,this),O.add(this.firstHandle,"mouseleave touchend",this.handleLeave,this))}wireSecondHandleEvt(e){e?(O.remove(this.secondHandle,"mousedown touchstart",this.handleFocus),O.remove(this.secondHandle,"transitionend",this.transitionEnd),O.remove(this.secondHandle,"mouseenter touchenter",this.handleOver),O.remove(this.secondHandle,"mouseleave touchend",this.handleLeave)):(O.add(this.secondHandle,"mousedown touchstart",this.handleFocus,this),O.add(this.secondHandle,"transitionend",this.transitionEnd,this),O.add(this.secondHandle,"mouseenter touchenter",this.handleOver,this),O.add(this.secondHandle,"mouseleave touchend",this.handleLeave,this))}handleStart(){"Range"!==this.type&&(this.firstHandle.classList[0===this.handlePos1?"add":"remove"]("e-handle-start"),this.isMaterialTooltip&&(this.materialHandle.classList[0===this.handlePos1?"add":"remove"]("e-handle-start"),this.tooltipElement&&this.tooltipElement.classList[0===this.handlePos1?"add":"remove"]("e-material-tooltip-start")))}transitionEnd(e){"transform"!==e.propertyName&&(this.handleStart(),this.getHandle().style.transition="none","Default"!==this.type&&(this.rangeBar.style.transition="none"),this.isMaterial&&this.tooltip.isVisible&&"Default"===this.type&&(this.tooltipElement.style.transition=this.transition.handle),this.tooltipToggle(this.getHandle()),this.closeTooltip())}handleFocusOut(){this.firstHandle.classList.contains("e-handle-focused")&&this.firstHandle.classList.remove("e-handle-focused"),"Range"===this.type&&this.secondHandle.classList.contains("e-handle-focused")&&this.secondHandle.classList.remove("e-handle-focused")}handleFocus(e){this.focusSliderElement(),this.sliderBarClick(e),e.currentTarget===this.firstHandle?(this.firstHandle.classList.add("e-handle-focused"),this.firstHandle.classList.add("e-tab-handle")):(this.secondHandle.classList.add("e-handle-focused"),this.secondHandle.classList.add("e-tab-handle")),O.add(document,"mousemove touchmove",this.sliderBarMove,this),O.add(document,"mouseup touchend",this.sliderBarUp,this)}handleOver(e){this.tooltip.isVisible&&"Hover"===this.tooltip.showOn&&this.tooltipToggle(e.currentTarget),"Default"===this.type&&this.tooltipToggle(this.getHandle())}handleLeave(e){this.tooltip.isVisible&&"Hover"===this.tooltip.showOn&&!e.currentTarget.classList.contains("e-handle-focused")&&!e.currentTarget.classList.contains("e-tab-handle")&&this.closeTooltip()}setHandler(){this.min>this.max&&(this.min=this.max),this.createFirstHandle(),"Range"===this.type&&this.createSecondHandle()}setEnableRTL(){this.enableRtl&&"Vertical"!==this.orientation?j([this.sliderContainer],"e-rtl"):Y([this.sliderContainer],"e-rtl");let e="Vertical"!==this.orientation?this.horDir:this.verDir;this.enableRtl?(this.horDir="right",this.verDir="bottom"):(this.horDir="left",this.verDir="bottom"),e!==("Vertical"!==this.orientation?this.horDir:this.verDir)&&"Horizontal"===this.orientation&&(It(this.firstHandle,{right:"",left:"auto"}),"Range"===this.type&&It(this.secondHandle,{top:"",left:"auto"})),this.setBarColor()}tooltipValue(){let e;const t={value:this.value,text:""};this.initialTooltip&&(this.initialTooltip=!1,this.setTooltipContent(),t.text=e=this.tooltipObj.content,this.trigger("tooltipChange",t,i=>{this.addTooltipClass(i.text),e!==i.text&&(this.customAriaText=i.text,this.tooltipObj.content=i.text,this.setAriaAttrValue(this.firstHandle),"Range"===this.type&&this.setAriaAttrValue(this.secondHandle))}),this.isMaterialTooltip&&this.setPreviousVal("change",this.value))}setTooltipContent(){let e;e=this.formatContent(this.tooltipFormatInfo,!1),this.tooltipObj.content=e}formatContent(e,t){let i="",s=this.handleVal1,r=this.handleVal2;return!m(this.customValues)&&this.customValues.length>0&&(s=this.customValues[this.handleVal1],r=this.customValues[this.handleVal2]),t?("Range"===this.type?i=this.enableRtl&&"Vertical"!==this.orientation?m(this.tooltip)||m(this.tooltip.format)?r.toString()+" - "+s.toString():this.formatString(r,e).elementVal+" - "+this.formatString(s,e).elementVal:m(this.tooltip)||m(this.tooltip.format)?s.toString()+" - "+r.toString():this.formatString(s,e).elementVal+" - "+this.formatString(r,e).elementVal:m(s)||(i=m(this.tooltip)||m(this.tooltip.format)?s.toString():this.formatString(s,e).elementVal),i):("Range"===this.type?i=this.enableRtl&&"Vertical"!==this.orientation?m(e.format)?r.toString()+" - "+s.toString():this.formatString(r,e).formatString+" - "+this.formatString(s,e).formatString:m(e.format)?s.toString()+" - "+r.toString():this.formatString(s,e).formatString+" - "+this.formatString(r,e).formatString:m(s)||(i=m(e.format)?s.toString():this.formatString(s,e).formatString),i)}addTooltipClass(e){if(this.isMaterialTooltip){let t=e.toString().length;if(this.tooltipElement){let i=t>4?{oldCss:"e-material-default",newCss:"e-material-range"}:{oldCss:"e-material-range",newCss:"e-material-default"};this.tooltipElement.classList.remove(i.oldCss),this.tooltipElement.classList.contains(i.newCss)||(this.tooltipElement.classList.add(i.newCss),this.tooltipElement.style.transform=t>4?"scale(1)":this.getTooltipTransformProperties(this.previousTooltipClass).rotate)}else this.tooltipObj.cssClass="e-slider-tooltip "+(t>4?"e-material-range":"e-material-default")}}tooltipPlacement(){return"Horizontal"===this.orientation?"Before"===this.tooltip.placement?"TopCenter":"BottomCenter":"Before"===this.tooltip.placement?"LeftCenter":"RightCenter"}tooltipBeforeOpen(e){this.tooltipElement=e.element,this.tooltip.cssClass&&j([this.tooltipElement],this.tooltip.cssClass.split(" ").filter(t=>t)),e.target.removeAttribute("aria-describedby"),this.isMaterialTooltip&&(this.tooltipElement.firstElementChild.classList.add("e-material-tooltip-hide"),this.handleStart(),this.setTooltipTransform())}tooltipCollision(e){if(this.isBootstrap||this.isBootstrap4||this.isMaterial&&!this.isMaterialTooltip){const t=this.isBootstrap4?3:6;switch(e){case"TopCenter":this.tooltipObj.setProperties({offsetY:-t},!1);break;case"BottomCenter":this.tooltipObj.setProperties({offsetY:t},!1);break;case"LeftCenter":this.tooltipObj.setProperties({offsetX:-t},!1);break;case"RightCenter":this.tooltipObj.setProperties({offsetX:t},!1)}}}materialTooltipEventCallBack(e){this.sliderBarClick(e),O.add(document,"mousemove touchmove",this.sliderBarMove,this),O.add(document,"mouseup touchend",this.sliderBarUp,this)}wireMaterialTooltipEvent(e){this.isMaterialTooltip&&(e?O.remove(this.tooltipElement,"mousedown touchstart",this.materialTooltipEventCallBack):O.add(this.tooltipElement,"mousedown touchstart",this.materialTooltipEventCallBack,this))}tooltipPositionCalculation(e){let t;switch(e){case"TopCenter":t="e-slider-horizontal-before";break;case"BottomCenter":t="e-slider-horizontal-after";break;case"LeftCenter":t="e-slider-vertical-before";break;case"RightCenter":t="e-slider-vertical-after"}return t}getTooltipTransformProperties(e){let t;if(this.tooltipElement){let i="Horizontal"===this.orientation?this.tooltipElement.clientHeight+14-this.tooltipElement.clientHeight/2:this.tooltipElement.clientWidth+14-this.tooltipElement.clientWidth/2;t="Horizontal"===this.orientation?"e-slider-horizontal-before"===e?{rotate:"rotate(45deg)",translate:`translateY(${i}px)`}:{rotate:"rotate(225deg)",translate:`translateY(${-i}px)`}:"e-slider-vertical-before"===e?{rotate:"rotate(-45deg)",translate:`translateX(${i}px)`}:{rotate:"rotate(-225deg)",translate:`translateX(${-i}px)`}}return t}openMaterialTooltip(){if(this.isMaterialTooltip){this.refreshTooltip(this.firstHandle);let e=this.tooltipElement.firstElementChild;e.classList.remove("e-material-tooltip-hide"),e.classList.add("e-material-tooltip-show"),this.firstHandle.style.cursor="default",this.tooltipElement.style.transition=this.scaleTransform,this.tooltipElement.classList.add("e-material-tooltip-open"),this.materialHandle.style.transform="scale(0)",this.tooltipElement.style.transform=e.innerText.length>4?"scale(1)":this.getTooltipTransformProperties(this.previousTooltipClass).rotate,"Default"===this.type?setTimeout(()=>{this.tooltipElement.style.transition=this.transition.handle},2500):setTimeout(()=>{this.tooltipElement.style.transition="none"},2500)}}closeMaterialTooltip(){if(this.isMaterialTooltip){let e=this.tooltipElement.firstElementChild;this.tooltipElement.style.transition=this.scaleTransform,e.classList.remove("e-material-tooltip-show"),e.classList.add("e-material-tooltip-hide"),this.firstHandle.style.cursor="-webkit-grab",this.firstHandle.style.cursor="grab",this.materialHandle&&(this.materialHandle.style.transform="scale(1)"),this.tooltipElement.classList.remove("e-material-tooltip-open"),this.setTooltipTransform(),this.tooltipTarget=void 0,setTimeout(()=>{this.tooltipElement.style.transition="none"},2500)}}checkTooltipPosition(e){let t=this.tooltipPositionCalculation(e.collidedPosition);(void 0===this.tooltipCollidedPosition||this.tooltipCollidedPosition!==e.collidedPosition||!e.element.classList.contains(t))&&(this.isMaterialTooltip&&(void 0!==t&&(e.element.classList.remove(this.previousTooltipClass),e.element.classList.add(t),this.previousTooltipClass=t),e.element.style.transform&&e.element.classList.contains("e-material-tooltip-open")&&e.element.firstElementChild.innerText.length<=4&&(e.element.style.transform=this.getTooltipTransformProperties(this.previousTooltipClass).rotate)),this.tooltipCollidedPosition=e.collidedPosition),this.isMaterialTooltip&&this.tooltipElement&&-1!==this.tooltipElement.style.transform.indexOf("translate")&&this.setTooltipTransform()}setTooltipTransform(){let e=this.getTooltipTransformProperties(this.previousTooltipClass);this.tooltipElement.style.transform=this.tooltipElement.firstElementChild.innerText.length>4?`${e.translate} scale(0.01)`:`${e.translate} ${e.rotate} scale(0.01)`}renderTooltip(){this.tooltipObj=new Ns({showTipPointer:this.isBootstrap||this.isMaterial||this.isBootstrap4||this.isTailwind||this.isBootstrap5,cssClass:"e-slider-tooltip",height:this.isMaterial?30:"auto",animation:{open:{effect:"None"},close:{effect:"FadeOut",duration:500}},opensOn:"Custom",beforeOpen:this.tooltipBeforeOpen.bind(this),beforeCollision:this.checkTooltipPosition.bind(this),beforeClose:this.tooltipBeforeClose.bind(this),enableHtmlSanitizer:this.enableHtmlSanitizer}),this.tooltipObj.appendTo(this.firstHandle),this.initializeTooltipProps()}initializeTooltipProps(){this.setProperties({tooltip:{showOn:"Auto"===this.tooltip.showOn?"Hover":this.tooltip.showOn}},!0),this.tooltipObj.position=this.tooltipPlacement(),this.tooltipCollision(this.tooltipObj.position),[this.firstHandle,this.rangeBar,this.secondHandle].forEach(t=>{m(t)||(t.style.transition="none")}),this.isMaterialTooltip&&(this.sliderContainer.classList.add("e-material-slider"),this.tooltipValue(),this.tooltipObj.animation.close.effect="None",this.tooltipObj.open(this.firstHandle))}tooltipBeforeClose(){this.tooltipElement=void 0,this.tooltipCollidedPosition=void 0}setButtons(){this.firstBtn=this.createElement("div",{className:"e-slider-button e-first-button"}),this.firstBtn.appendChild(this.createElement("span",{className:"e-button-icon"})),this.isTailwind&&this.firstBtn.querySelector("span").classList.add("e-icons"),this.firstBtn.tabIndex=-1,this.secondBtn=this.createElement("div",{className:"e-slider-button e-second-button"}),this.secondBtn.appendChild(this.createElement("span",{className:"e-button-icon"})),this.isTailwind&&this.secondBtn.querySelector("span").classList.add("e-icons"),this.secondBtn.tabIndex=-1,this.sliderContainer.classList.add("e-slider-btn"),this.sliderContainer.appendChild(this.firstBtn),this.sliderContainer.appendChild(this.secondBtn),this.sliderContainer.appendChild(this.element),this.buttonTitle()}buttonTitle(){let e=this.enableRtl&&"Vertical"!==this.orientation;this.l10n.setLocale(this.locale);let t=this.l10n.getConstant("decrementTitle"),i=this.l10n.getConstant("incrementTitle");bt(e?this.secondBtn:this.firstBtn,{"aria-label":t,title:t}),bt(e?this.firstBtn:this.secondBtn,{"aria-label":i,title:i})}buttonFocusOut(){this.isMaterial&&this.getHandle().classList.remove("e-large-thumb-size")}repeatButton(e){let s,t=this.handleValueUpdate(),i=this.enableRtl&&"Vertical"!==this.orientation;e.target.parentElement.classList.contains("e-first-button")||e.target.classList.contains("e-first-button")?s=this.add(t,parseFloat(this.step.toString()),!!i):(e.target.parentElement.classList.contains("e-second-button")||e.target.classList.contains("e-second-button"))&&(s=this.add(t,parseFloat(this.step.toString()),!i)),this.limits.enabled&&(s=this.getLimitCorrectedValues(s)),s>=this.min&&s<=this.max&&(this.changeHandleValue(s),this.tooltipToggle(this.getHandle()))}repeatHandlerMouse(e){e.preventDefault(),("mousedown"===e.type||"touchstart"===e.type)&&(this.buttonClick(e),this.repeatInterval=setInterval(this.repeatButton.bind(this),180,e))}materialChange(){this.getHandle().classList.contains("e-large-thumb-size")||this.getHandle().classList.add("e-large-thumb-size")}focusHandle(){this.getHandle().classList.contains("e-tab-handle")||this.getHandle().classList.add("e-tab-handle")}repeatHandlerUp(e){this.changeEvent("changed",e),this.closeTooltip(),clearInterval(this.repeatInterval),this.getHandle().focus()}customTickCounter(e){let t=4;return!m(this.customValues)&&this.customValues.length>0&&(e>4&&(t=3),e>7&&(t=2),e>14&&(t=1),e>28&&(t=0)),t}renderScale(){let e="Vertical"===this.orientation?"v":"h";this.noOfDecimals=this.numberOfDecimals(this.step),this.ul=this.createElement("ul",{className:"e-scale e-"+e+"-scale e-tick-"+this.ticks.placement.toLowerCase(),attrs:{role:"presentation",tabIndex:"-1","aria-hidden":"true"}}),this.ul.style.zIndex="-1",Q.isAndroid&&"h"===e&&this.ul.classList.add("e-tick-pos");let t=this.ticks.smallStep;this.ticks.showSmallTicks?t<=0&&(t=parseFloat(ct(this.step))):t=this.ticks.largeStep>0?this.ticks.largeStep:parseFloat(ct(this.max))-parseFloat(ct(this.min));let i=this.fractionalToInteger(this.min),s=this.fractionalToInteger(this.max),r=this.fractionalToInteger(t),o=!m(this.customValues)&&this.customValues.length>0&&this.customValues.length-1,a=this.customTickCounter(o),u=!m(this.customValues)&&this.customValues.length>0?o*a+o:Math.abs((s-i)/r);this.element.appendChild(this.ul);let p,y=parseFloat(this.min.toString());"v"===e&&(y=parseFloat(this.max.toString()));let _,E=0,D=100/u;D===1/0&&(D=5);for(let L=0,V=!m(this.customValues)&&this.customValues.length>0?this.customValues.length-1:0,H=0;L<=u;L++){if(p=this.createElement("li",{attrs:{class:"e-tick",role:"presentation",tabIndex:"-1","aria-hidden":"true"}}),!m(this.customValues)&&this.customValues.length>0)_=L%(a+1)==0,_&&("h"===e?(y=this.customValues[H],H++):(y=this.customValues[V],V--),p.setAttribute("title",y.toString()));else if(p.setAttribute("title",y.toString()),0===this.numberOfDecimals(this.max)&&0===this.numberOfDecimals(this.min)&&0===this.numberOfDecimals(this.step))_="h"===e?(y-parseFloat(this.min.toString()))%this.ticks.largeStep==0:Math.abs(y-parseFloat(this.max.toString()))%this.ticks.largeStep==0;else{let re=this.fractionalToInteger(this.ticks.largeStep),Ae=this.fractionalToInteger(y);_="h"===e?(Ae-i)%re==0:Math.abs(Ae-parseFloat(s.toString()))%re==0}_&&p.classList.add("e-large"),"h"===e?p.style.width=D+"%":p.style.height=D+"%";let _e,se=_?"Both"===this.ticks.placement?2:1:0;if(_)for(let re=0;re<se;re++)this.createTick(p,y,D);else m(this.customValues)&&this.formatTicksValue(p,y);this.ul.appendChild(p),this.tickElementCollection.push(p),m(this.customValues)&&(_e=this.numberOfDecimals(t)>this.numberOfDecimals(y)?this.numberOfDecimals(t):this.numberOfDecimals(y),y=this.makeRoundNumber("h"===e?y+t:y-t,_e),E=this.makeRoundNumber(E+t,_e))}this.ticksAlignment(e,D)}ticksAlignment(e,t,i=!0){this.firstChild=this.ul.firstElementChild,this.lastChild=this.ul.lastElementChild,this.firstChild.classList.add("e-first-tick"),this.lastChild.classList.add("e-last-tick"),this.sliderContainer.classList.add("e-scale-"+this.ticks.placement.toLowerCase()),"h"===e?(this.firstChild.style.width=t/2+"%",this.lastChild.style.width=t/2+"%"):(this.firstChild.style.height=t/2+"%",this.lastChild.style.height=t/2+"%"),i&&this.trigger("renderedTicks",{ticksWrapper:this.ul,tickElements:this.tickElementCollection}),this.scaleAlignment()}createTick(e,t,i){let s=this.createElement("span",{className:"e-tick-value e-tick-"+this.ticks.placement.toLowerCase(),attrs:{role:"presentation",tabIndex:"-1","aria-hidden":"true"}});e.appendChild(s),m(this.customValues)?this.formatTicksValue(e,t,s,i):s.innerHTML=this.enableHtmlSanitizer?_n.sanitize(t.toString()):t.toString()}formatTicksValue(e,t,i,s){const r=this.formatNumber(t),o=m(this.ticks)||m(this.ticks.format)?r:this.formatString(t,this.ticksFormatInfo).formatString;this.trigger("renderingTicks",{value:t,text:o,tickElement:e},u=>{e.setAttribute("title",u.text.toString()),i&&(i.innerHTML=this.enableHtmlSanitizer?_n.sanitize(u.text.toString()):u.text.toString())})}scaleAlignment(){this.tickValuePosition(),"Vertical"===this.orientation?this.element.getBoundingClientRect().width<=15?this.sliderContainer.classList.add("e-small-size"):this.sliderContainer.classList.remove("e-small-size"):this.element.getBoundingClientRect().height<=15?this.sliderContainer.classList.add("e-small-size"):this.sliderContainer.classList.remove("e-small-size")}tickValuePosition(){this.firstChild=this.element.querySelector("ul").children[0];let t,i,e=this.firstChild.getBoundingClientRect(),s=this.ticks.smallStep,r=Math.abs(parseFloat(ct(this.max))-parseFloat(ct(this.min)))/s;this.firstChild.children.length>0&&(t=this.firstChild.children[0].getBoundingClientRect());let a,o=[this.sliderContainer.querySelectorAll(".e-tick.e-large .e-tick-value")];a=[].slice.call(o[0],"Both"===this.ticks.placement?2:1);let u="Vertical"===this.orientation?2*e.height:2*e.width;for(let p=0;p<this.firstChild.children.length;p++)"Vertical"===this.orientation?this.firstChild.children[p].style.top=-t.height/2+"px":this.firstChild.children[p].style.left=this.enableRtl?(u-this.firstChild.children[p].getBoundingClientRect().width)/2+"px":-t.width/2+"px";for(let p=0;p<a.length;p++)i=a[p].getBoundingClientRect(),It(a[p],"Vertical"===this.orientation?{top:(u-i.height)/2+"px"}:{left:(u-i.width)/2+"px"});this.enableRtl&&this.lastChild.children.length&&0!==r&&(this.lastChild.children[0].style.left=-this.lastChild.getBoundingClientRect().width/2+"px","Both"===this.ticks.placement&&(this.lastChild.children[1].style.left=-this.lastChild.getBoundingClientRect().width/2+"px")),0===r&&("Horizontal"===this.orientation&&(this.enableRtl?(this.firstChild.classList.remove("e-last-tick"),this.firstChild.style.right=this.firstHandle.style.right,this.firstChild.children[0].style.left=this.firstChild.getBoundingClientRect().width/2+2+"px","Both"===this.ticks.placement&&(this.firstChild.children[1].style.left=this.firstChild.getBoundingClientRect().width/2+2+"px")):(this.firstChild.classList.remove("e-last-tick"),this.firstChild.style.left=this.firstHandle.style.left)),"Vertical"===this.orientation&&this.firstChild.classList.remove("e-last-tick"))}setAriaAttrValue(e){let t;const i=!m(this.ticks)&&!m(this.ticks.format);let s=this.formatContent(i?this.tooltipFormatInfo:this.ticksFormatInfo,!1);const r=this.formatContent(i?this.ticksFormatInfo:this.tooltipFormatInfo,!0);s=this.customAriaText?this.customAriaText:s,t=2===s.split(" - ").length?s.split(" - "):[s,s],this.setAriaAttributes(e),bt(e,"Range"!==this.type?{"aria-valuenow":r,"aria-valuetext":s}:this.enableRtl?e===this.firstHandle?{"aria-valuenow":r.split(" - ")[1],"aria-valuetext":t[1]}:{"aria-valuenow":r.split(" - ")[0],"aria-valuetext":t[0]}:e===this.firstHandle?{"aria-valuenow":r.split(" - ")[0],"aria-valuetext":t[0]}:{"aria-valuenow":r.split(" - ")[1],"aria-valuetext":t[1]})}handleValueUpdate(){let e;return e="Range"===this.type?1===this.activeHandle?this.handleVal1:this.handleVal2:this.handleVal1,e}getLimitCorrectedValues(e){return"MinRange"===this.type||"Default"===this.type||1===this.activeHandle?this.getLimitValueAndPosition(e,this.limits.minStart,this.limits.minEnd)[0]:this.getLimitValueAndPosition(e,this.limits.maxStart,this.limits.maxEnd)[0]}focusSliderElement(){this.isElementFocused||(this.element.focus(),this.isElementFocused=!0)}buttonClick(e){let t;this.focusSliderElement();const i=this.enableRtl&&"Vertical"!==this.orientation,s=this.handleValueUpdate();40===e.keyCode||37===e.keyCode||e.currentTarget.classList.contains("e-first-button")?t=this.add(s,parseFloat(this.step.toString()),!!i):38===e.keyCode||39===e.keyCode||e.currentTarget.classList.contains("e-second-button")?t=this.add(s,parseFloat(this.step.toString()),!i):33===e.keyCode||e.currentTarget.classList.contains("e-first-button")?t=this.add(s,parseFloat(this.ticks.largeStep.toString()),!i):34===e.keyCode||e.currentTarget.classList.contains("e-second-button")?t=this.add(s,parseFloat(this.ticks.largeStep.toString()),!!i):36===e.keyCode?t=parseFloat(this.min.toString()):35===e.keyCode&&(t=parseFloat(this.max.toString())),this.limits.enabled&&(t=this.getLimitCorrectedValues(t)),this.changeHandleValue(t),this.isMaterial&&!this.tooltip.isVisible&&!this.getHandle().classList.contains("e-tab-handle")&&this.materialChange(),this.tooltipToggle(this.getHandle()),this.getHandle().focus(),this.focusHandle(),e.currentTarget.classList.contains("e-first-button")&&O.add(this.firstBtn,"mouseup touchend",this.buttonUp,this),e.currentTarget.classList.contains("e-second-button")&&O.add(this.secondBtn,"mouseup touchend",this.buttonUp,this)}tooltipToggle(e){this.isMaterialTooltip?this.tooltipElement.classList.contains("e-material-tooltip-open")?this.refreshTooltip(this.firstHandle):this.openMaterialTooltip():this.tooltipElement?this.refreshTooltip(e):this.openTooltip(e)}buttonUp(e){e.currentTarget.classList.contains("e-first-button")&&O.remove(this.firstBtn,"mouseup touchend",this.buttonUp),e.currentTarget.classList.contains("e-second-button")&&O.remove(this.secondBtn,"mouseup touchend",this.buttonUp)}setRangeBar(){"Horizontal"===this.orientation?"MinRange"===this.type?(this.enableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",It(this.rangeBar,{width:m(this.handlePos1)?0:this.handlePos1+"px"})):(this.enableRtl?this.rangeBar.style.right=this.handlePos1+"px":this.rangeBar.style.left=this.handlePos1+"px",It(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"})):"MinRange"===this.type?(this.rangeBar.style.bottom="0px",It(this.rangeBar,{height:m(this.handlePos1)?0:this.handlePos1+"px"})):(this.rangeBar.style.bottom=this.handlePos1+"px",It(this.rangeBar,{height:this.handlePos2-this.handlePos1+"px"}))}checkValidValueAndPos(e){return e=this.checkHandleValue(e),this.checkHandlePosition(e)}setLimitBarPositions(e,t,i,s){"Horizontal"===this.orientation?this.enableRtl?(this.limitBarFirst.style.right=e+"px",this.limitBarFirst.style.width=t-e+"px"):(this.limitBarFirst.style.left=e+"px",this.limitBarFirst.style.width=t-e+"px"):(this.limitBarFirst.style.bottom=e+"px",this.limitBarFirst.style.height=t-e+"px"),"Range"===this.type&&("Horizontal"===this.orientation?this.enableRtl?(this.limitBarSecond.style.right=i+"px",this.limitBarSecond.style.width=s-i+"px"):(this.limitBarSecond.style.left=i+"px",this.limitBarSecond.style.width=s-i+"px"):(this.limitBarSecond.style.bottom=i+"px",this.limitBarSecond.style.height=s-i+"px"))}setLimitBar(){if("Default"===this.type||"MinRange"===this.type){let e=this.getLimitValueAndPosition(this.limits.minStart,this.limits.minStart,this.limits.minEnd,!0)[0];e=this.checkValidValueAndPos(e);let t=this.getLimitValueAndPosition(this.limits.minEnd,this.limits.minStart,this.limits.minEnd,!0)[0];t=this.checkValidValueAndPos(t),this.setLimitBarPositions(e,t)}else if("Range"===this.type){let e=this.getLimitValueAndPosition(this.limits.minStart,this.limits.minStart,this.limits.minEnd,!0)[0];e=this.checkValidValueAndPos(e);let t=this.getLimitValueAndPosition(this.limits.minEnd,this.limits.minStart,this.limits.minEnd,!0)[0];t=this.checkValidValueAndPos(t);let i=this.getLimitValueAndPosition(this.limits.maxStart,this.limits.maxStart,this.limits.maxEnd,!0)[0];i=this.checkValidValueAndPos(i);let s=this.getLimitValueAndPosition(this.limits.maxEnd,this.limits.maxStart,this.limits.maxEnd,!0)[0];s=this.checkValidValueAndPos(s),this.setLimitBarPositions(e,t,i,s)}}getLimitValueAndPosition(e,t,i,s){return m(t)&&(t=this.min,m(e)&&s&&(e=t)),m(i)&&(i=this.max,m(e)&&s&&(e=i)),e<t&&(e=t),e>i&&(e=i),[e,this.checkHandlePosition(e)]}setValue(){if(!m(this.customValues)&&this.customValues.length>0&&(this.min=0,this.max=this.customValues.length-1,this.setBarColor()),this.setAriaAttributes(this.firstHandle),this.handleVal1=m(this.value)?this.checkHandleValue(parseFloat(this.min.toString())):this.checkHandleValue(parseFloat(this.value.toString())),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.preHandlePos1=this.handlePos1,this.activeHandle=m(this.activeHandle)?"Range"===this.type?2:1:this.activeHandle,"Default"===this.type||"MinRange"===this.type){if(this.limits.enabled){const e=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=e[0],this.handlePos1=e[1],this.preHandlePos1=this.handlePos1}this.setHandlePosition(null),this.handleStart(),this.value=this.handleVal1,this.setAriaAttrValue(this.firstHandle),this.changeEvent("changed",null)}else this.validateRangeValue();"Default"!==this.type&&this.setRangeBar(),this.limits.enabled&&this.setLimitBar()}rangeValueUpdate(){(null===this.value||"object"!=typeof this.value)&&(this.value=[parseFloat(ct(this.min)),parseFloat(ct(this.max))])}validateRangeValue(){this.rangeValueUpdate(),this.setRangeValue()}modifyZindex(){"Range"===this.type?1===this.activeHandle?(this.firstHandle.style.zIndex=this.zIndex+4+"",this.secondHandle.style.zIndex=this.zIndex+3+""):(this.firstHandle.style.zIndex=this.zIndex+3+"",this.secondHandle.style.zIndex=this.zIndex+4+""):this.isMaterialTooltip&&this.tooltipElement&&(this.tooltipElement.style.zIndex=pa(this.element)+"")}setHandlePosition(e){let t;const i=1===this.activeHandle?this.handlePos1:this.handlePos2;t=this.isMaterialTooltip?[this.firstHandle,this.materialHandle]:[this.getHandle()],this.handleStart(),t.forEach(s=>{"Horizontal"===this.orientation?this.enableRtl?s.style.right=`${i}px`:s.style.left=`${i}px`:s.style.bottom=`${i}px`}),this.changeEvent("change",e)}getHandle(){return 1===this.activeHandle?this.firstHandle:this.secondHandle}setRangeValue(){this.updateRangeValue(),this.activeHandle=1,this.setHandlePosition(null),this.activeHandle=2,this.setHandlePosition(null),this.activeHandle=1}changeEvent(e,t){let i="change"===e?this.previousVal:this.previousChanged;if("Range"!==this.type)this.setProperties({value:this.handleVal1},!0),i!==this.value&&(!this.isMaterialTooltip||!this.initialTooltip)&&(this.trigger(e,this.changeEventArgs(e,t)),this.initialTooltip=!0,this.setPreviousVal(e,this.value)),this.setAriaAttrValue(this.firstHandle);else{let s=this.value=[this.handleVal1,this.handleVal2];this.setProperties({value:s},!0),(i.length===this.value.length&&this.value[0]!==i[0]||this.value[1]!==i[1])&&(this.initialTooltip=!1,this.trigger(e,this.changeEventArgs(e,t)),this.initialTooltip=!0,this.setPreviousVal(e,this.value)),this.setAriaAttrValue(this.getHandle())}this.hiddenInput.value=this.value.toString()}changeEventArgs(e,t){let i;return this.tooltip.isVisible&&this.tooltipObj&&this.initialTooltip?(this.tooltipValue(),i={value:this.value,previousValue:"change"===e?this.previousVal:this.previousChanged,action:e,text:this.tooltipObj.content,isInteracted:!m(t)}):i={value:this.value,previousValue:"change"===e?this.previousVal:this.previousChanged,action:e,text:m(this.ticksFormatInfo.format)?this.value.toString():"Range"!==this.type?this.formatString(this.value,this.ticksFormatInfo).formatString:this.formatString(this.value[0],this.ticksFormatInfo).formatString+" - "+this.formatString(this.value[1],this.ticksFormatInfo).formatString,isInteracted:!m(t)},i}setPreviousVal(e,t){"change"===e?this.previousVal=t:this.previousChanged=t}updateRangeValue(){const e=this.value.toString().split(",").map(Number);if(this.value=this.enableRtl&&"Vertical"!==this.orientation||this.rtl?[e[1],e[0]]:[e[0],e[1]],this.enableRtl&&"Vertical"!==this.orientation?(this.handleVal1=this.checkHandleValue(this.value[1]),this.handleVal2=this.checkHandleValue(this.value[0])):(this.handleVal1=this.checkHandleValue(this.value[0]),this.handleVal2=this.checkHandleValue(this.value[1])),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2),this.handlePos1>this.handlePos2&&(this.handlePos1=this.handlePos2,this.handleVal1=this.handleVal2),this.preHandlePos1=this.handlePos1,this.preHandlePos2=this.handlePos2,this.limits.enabled){this.activeHandle=1;let t=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=t[0],this.handlePos1=t[1],this.preHandlePos1=this.handlePos1,this.activeHandle=2,t=this.getLimitValueAndPosition(this.handleVal2,this.limits.maxStart,this.limits.maxEnd),this.handleVal2=t[0],this.handlePos2=t[1],this.preHandlePos2=this.handlePos2}}checkHandlePosition(e){let t;return e=100*(e-parseFloat(ct(this.min)))/(parseFloat(ct(this.max))-parseFloat(ct(this.min))),t="Horizontal"===this.orientation?this.element.getBoundingClientRect().width*(e/100):this.element.getBoundingClientRect().height*(e/100),parseFloat(ct(this.max))===parseFloat(ct(this.min))&&(t="Horizontal"===this.orientation?this.element.getBoundingClientRect().width:this.element.getBoundingClientRect().height),t}checkHandleValue(e){if(this.min>this.max&&(this.min=this.max),this.min===this.max)return parseFloat(ct(this.max));let t=this.tempStartEnd();return e<t.start?e=t.start:e>t.end&&(e=t.end),e}reposition(){this.firstHandle.style.transition="none","Default"!==this.type&&(this.rangeBar.style.transition="none"),"Range"===this.type&&(this.secondHandle.style.transition="none"),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handleVal2&&(this.handlePos2=this.checkHandlePosition(this.handleVal2)),"Horizontal"===this.orientation?(this.enableRtl?this.firstHandle.style.right=`${this.handlePos1}px`:this.firstHandle.style.left=`${this.handlePos1}px`,this.isMaterialTooltip&&(this.enableRtl?this.materialHandle.style.right=`${this.handlePos1}px`:this.materialHandle.style.left=`${this.handlePos1}px`),"MinRange"===this.type?(this.enableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",It(this.rangeBar,{width:m(this.handlePos1)?0:this.handlePos1+"px"})):"Range"===this.type&&(this.enableRtl?this.secondHandle.style.right=`${this.handlePos2}px`:this.secondHandle.style.left=`${this.handlePos2}px`,this.enableRtl?this.rangeBar.style.right=this.handlePos1+"px":this.rangeBar.style.left=this.handlePos1+"px",It(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"}))):(this.firstHandle.style.bottom=`${this.handlePos1}px`,this.isMaterialTooltip&&(this.materialHandle.style.bottom=`${this.handlePos1}px`),"MinRange"===this.type?(this.rangeBar.style.bottom="0px",It(this.rangeBar,{height:m(this.handlePos1)?0:this.handlePos1+"px"})):"Range"===this.type&&(this.secondHandle.style.bottom=`${this.handlePos2}px`,this.rangeBar.style.bottom=this.handlePos1+"px",It(this.rangeBar,{height:this.handlePos2-this.handlePos1+"px"}))),this.limits.enabled&&this.setLimitBar(),"None"!==this.ticks.placement&&this.ul&&(this.removeElement(this.ul),this.ul=void 0,this.renderScale()),this.handleStart(),this.tooltip.isVisible||setTimeout(()=>{this.firstHandle.style.transition=this.scaleTransform,"Range"===this.type&&(this.secondHandle.style.transition=this.scaleTransform)}),this.refreshTooltip(this.tooltipTarget),this.setBarColor()}changeHandleValue(e){let t=null;1===this.activeHandle?(this.limits.enabled&&this.limits.startHandleFixed||(this.handleVal1=this.checkHandleValue(e),this.handlePos1=this.checkHandlePosition(this.handleVal1),"Range"===this.type&&this.handlePos1>this.handlePos2&&(this.handlePos1=this.handlePos2,this.handleVal1=this.handleVal2),this.handlePos1!==this.preHandlePos1&&(t=this.preHandlePos1=this.handlePos1)),this.modifyZindex()):(this.limits.enabled&&this.limits.endHandleFixed||(this.handleVal2=this.checkHandleValue(e),this.handlePos2=this.checkHandlePosition(this.handleVal2),"Range"===this.type&&this.handlePos2<this.handlePos1&&(this.handlePos2=this.handlePos1,this.handleVal2=this.handleVal1),this.handlePos2!==this.preHandlePos2&&(t=this.preHandlePos2=this.handlePos2)),this.modifyZindex()),null!==t&&("Default"!==this.type&&this.setRangeBar(),this.setHandlePosition(null))}tempStartEnd(){return this.min>this.max?{start:this.max,end:this.min}:{start:this.min,end:this.max}}xyToPosition(e){let t;if(this.min===this.max)return 100;if("Horizontal"===this.orientation){let s=e.x-this.element.getBoundingClientRect().left;this.val=s/(this.element.offsetWidth/100)}else{let s=e.y-this.element.getBoundingClientRect().top;this.val=100-s/(this.element.offsetHeight/100)}let i=this.stepValueCalculation(this.val);return i<0?i=0:i>100&&(i=100),this.enableRtl&&"Vertical"!==this.orientation&&(i=100-i),t="Horizontal"===this.orientation?this.element.getBoundingClientRect().width*(i/100):this.element.getBoundingClientRect().height*(i/100),t}stepValueCalculation(e){0===this.step&&(this.step=1);let t=parseFloat(ct(this.step))/((parseFloat(ct(this.max))-parseFloat(ct(this.min)))/100),i=e%Math.abs(t);return 0!==i&&(t/2>i?e-=i:e+=Math.abs(t)-i),e}add(e,t,i){let o,r=Math.pow(10,3);return o=i?(Math.round(e*r)+Math.round(t*r))/r:(Math.round(e*r)-Math.round(t*r))/r,o}positionToValue(e){let t,i=parseFloat(ct(this.max))-parseFloat(ct(this.min));return t="Horizontal"===this.orientation?e/this.element.getBoundingClientRect().width*i:e/this.element.getBoundingClientRect().height*i,this.add(t,parseFloat(this.min.toString()),!0)}sliderBarClick(e){let t;e.preventDefault(),"mousedown"===e.type||"mouseup"===e.type||"click"===e.type?t={x:e.clientX,y:e.clientY}:("touchend"===e.type||"touchstart"===e.type)&&(t={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY});let i=this.xyToPosition(t),s=this.positionToValue(i);if("Range"===this.type&&this.handlePos2-i<i-this.handlePos1){if(this.activeHandle=2,!this.limits.enabled||!this.limits.endHandleFixed){if(this.limits.enabled){let u=this.getLimitValueAndPosition(s,this.limits.maxStart,this.limits.maxEnd);s=u[0],i=u[1]}this.secondHandle.classList.add("e-handle-active"),this.handlePos2=this.preHandlePos2=i,this.handleVal2=s}this.modifyZindex(),this.secondHandle.focus()}else{if(this.activeHandle=1,!this.limits.enabled||!this.limits.startHandleFixed){if(this.limits.enabled){let u=this.getLimitValueAndPosition(s,this.limits.minStart,this.limits.minEnd);s=u[0],i=u[1]}this.firstHandle.classList.add("e-handle-active"),this.handlePos1=this.preHandlePos1=i,this.handleVal1=s}this.modifyZindex(),this.firstHandle.focus()}this.isMaterialTooltip&&this.tooltipElement.classList.add("e-tooltip-active");let r=this.element.querySelector(".e-tab-handle");if(r&&this.getHandle()!==r&&r.classList.remove("e-tab-handle"),e.target===(1===this.activeHandle?this.firstHandle:this.secondHandle))return this.isMaterial&&!this.tooltip.isVisible&&!this.getHandle().classList.contains("e-tab-handle")&&this.materialChange(),this.sliderBarUp(e),void this.tooltipToggle(this.getHandle());if(!this.checkRepeatedValue(s))return;let a=this.isMaterial&&this.tooltip.isVisible?this.transitionOnMaterialTooltip:this.transition;this.getHandle().style.transition=a.handle,"Default"!==this.type&&(this.rangeBar.style.transition=a.rangeBar),this.setHandlePosition(e),this.isMaterialTooltip&&(this.initialTooltip=!1),this.changeEvent("changed",e),"Default"!==this.type&&this.setRangeBar()}handleValueAdjust(e,t,i){1===i?(this.handleVal1=t,this.handleVal2=this.handleVal1+this.minDiff):2===i&&(this.handleVal2=t,this.handleVal1=this.handleVal2-this.minDiff),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2)}dragRangeBarMove(e){let t,i,s;if("touchmove"!==e.type&&e.preventDefault(),this.rangeBarDragged=!0,this.rangeBar.style.transition="none",this.firstHandle.style.transition="none",this.secondHandle.style.transition="none",[i,s]="mousemove"===e.type?[e.clientX,e.clientY]:[e.changedTouches[0].clientX,e.changedTouches[0].clientY],!(this.limits.enabled&&this.limits.startHandleFixed||this.limits.enabled&&this.limits.endHandleFixed)){if(t=this.enableRtl?{x:i+this.secondPartRemain,y:s+this.secondPartRemain}:{x:i-this.firstPartRemain,y:s+this.secondPartRemain},this.handlePos1=this.xyToPosition(t),this.handleVal1=this.positionToValue(this.handlePos1),t=this.enableRtl?{x:i-this.firstPartRemain,y:s-this.firstPartRemain}:{x:i+this.secondPartRemain,y:s-this.firstPartRemain},this.handlePos2=this.xyToPosition(t),this.handleVal2=this.positionToValue(this.handlePos2),this.limits.enabled){let r=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=r[0],this.handlePos1=r[1],this.handleVal1===this.limits.minEnd&&this.handleValueAdjust(this.handleVal1,this.limits.minEnd,1),this.handleVal1===this.limits.minStart&&this.handleValueAdjust(this.handleVal1,this.limits.minStart,1),r=this.getLimitValueAndPosition(this.handleVal2,this.limits.maxStart,this.limits.maxEnd),this.handleVal2=r[0],this.handlePos2=r[1],this.handleVal2===this.limits.maxStart&&this.handleValueAdjust(this.handleVal2,this.limits.maxStart,2),this.handleVal2===this.limits.maxEnd&&this.handleValueAdjust(this.handleVal2,this.limits.maxEnd,2)}this.handleVal2===this.max&&this.handleValueAdjust(this.handleVal2,this.max,2),this.handleVal1===this.min&&this.handleValueAdjust(this.handleVal1,this.min,1)}this.activeHandle=1,this.setHandlePosition(e),this.activeHandle=2,this.setHandlePosition(e),this.tooltipToggle(this.rangeBar),this.setRangeBar()}sliderBarUp(e){this.changeEvent("changed",e),this.handleFocusOut(),this.firstHandle.classList.remove("e-handle-active"),"Range"===this.type&&(this.initialTooltip=!1,this.secondHandle.classList.remove("e-handle-active")),this.closeTooltip(),this.isMaterial&&(this.getHandle().classList.remove("e-large-thumb-size"),this.isMaterialTooltip&&this.tooltipElement.classList.remove("e-tooltip-active")),O.remove(document,"mousemove touchmove",this.sliderBarMove),O.remove(document,"mouseup touchend",this.sliderBarUp)}sliderBarMove(e){let t;"touchmove"!==e.type&&e.preventDefault(),t="mousemove"===e.type?{x:e.clientX,y:e.clientY}:{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY};let i=this.xyToPosition(t),s=this.positionToValue(i);if(i=Math.round(i),"Range"!==this.type&&1===this.activeHandle){if(!this.limits.enabled||!this.limits.startHandleFixed){if(this.limits.enabled){let r=this.getLimitValueAndPosition(s,this.limits.minStart,this.limits.minEnd);i=r[1],s=r[0]}this.handlePos1=i,this.handleVal1=s}this.firstHandle.classList.add("e-handle-active")}if("Range"===this.type)if(1===this.activeHandle){if(this.firstHandle.classList.add("e-handle-active"),!(this.limits.enabled&&this.limits.startHandleFixed||(i>this.handlePos2&&(i=this.handlePos2,s=this.handleVal2),i===this.preHandlePos1))){if(this.limits.enabled){let r=this.getLimitValueAndPosition(s,this.limits.minStart,this.limits.minEnd);s=r[0],i=r[1]}this.handlePos1=this.preHandlePos1=i,this.handleVal1=s,this.activeHandle=1}}else if(2===this.activeHandle&&(this.secondHandle.classList.add("e-handle-active"),!(this.limits.enabled&&this.limits.endHandleFixed||(i<this.handlePos1&&(i=this.handlePos1,s=this.handleVal1),i===this.preHandlePos2)))){if(this.limits.enabled){let r=this.getLimitValueAndPosition(s,this.limits.maxStart,this.limits.maxEnd);s=r[0],i=r[1]}this.handlePos2=this.preHandlePos2=i,this.handleVal2=s,this.activeHandle=2}!this.checkRepeatedValue(s)||(this.getHandle().style.transition=this.scaleTransform,"Default"!==this.type&&(this.rangeBar.style.transition="none"),this.setHandlePosition(e),this.isMaterial&&!this.tooltip.isVisible&&!this.getHandle().classList.contains("e-tab-handle")&&this.materialChange(),this.tooltipToggle(this.getHandle()),"Default"!==this.type&&this.setRangeBar())}dragRangeBarUp(e){this.rangeBarDragged?this.isDragComplete=!0:(this.focusSliderElement(),this.sliderBarClick(e)),this.changeEvent("changed",e),this.closeTooltip(),O.remove(document,"mousemove touchmove",this.dragRangeBarMove),O.remove(document,"mouseup touchend",this.dragRangeBarUp),this.rangeBarDragged=!1}checkRepeatedValue(e){if("Range"===this.type){if(e===(this.enableRtl&&"Vertical"!==this.orientation?1===this.activeHandle?this.previousVal[1]:this.previousVal[0]:1===this.activeHandle?this.previousVal[0]:this.previousVal[1]))return 0}else if(e===this.previousVal)return 0;return 1}refreshTooltip(e){this.tooltip.isVisible&&this.tooltipObj&&(this.tooltipValue(),e&&(this.tooltipObj.refresh(e),this.tooltipTarget=e))}openTooltip(e){this.tooltip.isVisible&&this.tooltipObj&&!this.isMaterialTooltip&&(this.tooltipValue(),this.tooltipObj.open(e),this.tooltipTarget=e)}closeTooltip(){this.tooltip.isVisible&&this.tooltipObj&&"Always"!==this.tooltip.showOn&&!this.isMaterialTooltip&&(this.tooltipValue(),this.tooltipObj.close(),this.tooltipTarget=void 0)}keyDown(e){switch(e.keyCode){case 37:case 38:case 39:case 40:case 33:case 34:case 36:case 35:e.preventDefault(),this.buttonClick(e)}}wireButtonEvt(e){e?(O.remove(this.firstBtn,"mouseleave touchleave",this.buttonFocusOut),O.remove(this.secondBtn,"mouseleave touchleave",this.buttonFocusOut),O.remove(this.firstBtn,"mousedown touchstart",this.repeatHandlerMouse),O.remove(this.firstBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp),O.remove(this.secondBtn,"mousedown touchstart",this.repeatHandlerMouse),O.remove(this.secondBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp),O.remove(this.firstBtn,"focusout",this.sliderFocusOut),O.remove(this.secondBtn,"focusout",this.sliderFocusOut)):(O.add(this.firstBtn,"mouseleave touchleave",this.buttonFocusOut,this),O.add(this.secondBtn,"mouseleave touchleave",this.buttonFocusOut,this),O.add(this.firstBtn,"mousedown touchstart",this.repeatHandlerMouse,this),O.add(this.firstBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp,this),O.add(this.secondBtn,"mousedown touchstart",this.repeatHandlerMouse,this),O.add(this.secondBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp,this),O.add(this.firstBtn,"focusout",this.sliderFocusOut,this),O.add(this.secondBtn,"focusout",this.sliderFocusOut,this))}rangeBarMousedown(e){if(e.preventDefault(),this.focusSliderElement(),"Range"===this.type&&this.drag&&e.target===this.rangeBar){let t,i;"mousedown"===e.type?[t,i]=[e.clientX,e.clientY]:"touchstart"===e.type&&([t,i]=[e.changedTouches[0].clientX,e.changedTouches[0].clientY]),"Horizontal"===this.orientation?(this.firstPartRemain=t-this.rangeBar.getBoundingClientRect().left,this.secondPartRemain=this.rangeBar.getBoundingClientRect().right-t):(this.firstPartRemain=i-this.rangeBar.getBoundingClientRect().top,this.secondPartRemain=this.rangeBar.getBoundingClientRect().bottom-i),this.minDiff=this.handleVal2-this.handleVal1,this.tooltipToggle(this.rangeBar);let s=this.element.querySelector(".e-tab-handle");s&&s.classList.remove("e-tab-handle"),O.add(document,"mousemove touchmove",this.dragRangeBarMove,this),O.add(document,"mouseup touchend",this.dragRangeBarUp,this)}}elementClick(e){this.isDragComplete?this.isDragComplete=!1:(e.preventDefault(),this.focusSliderElement(),this.sliderBarClick(e),this.focusHandle())}wireEvents(){this.onresize=this.reposition.bind(this),window.addEventListener("resize",this.onresize),this.enabled&&!this.readonly&&(O.add(this.element,"click",this.elementClick,this),"Range"===this.type&&this.drag&&O.add(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown,this),O.add(this.sliderContainer,"keydown",this.keyDown,this),O.add(this.sliderContainer,"keyup",this.keyUp,this),O.add(this.element,"focusout",this.sliderFocusOut,this),O.add(this.sliderContainer,"mouseover mouseout touchstart touchend",this.hover,this),this.wireFirstHandleEvt(!1),"Range"===this.type&&this.wireSecondHandleEvt(!1),this.showButtons&&this.wireButtonEvt(!1),this.wireMaterialTooltipEvent(!1),this.isForm&&O.add(this.formElement,"reset",this.formResetHandler,this))}unwireEvents(){O.remove(this.element,"click",this.elementClick),"Range"===this.type&&this.drag&&O.remove(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown),O.remove(this.sliderContainer,"keydown",this.keyDown),O.remove(this.sliderContainer,"keyup",this.keyUp),O.remove(this.element,"focusout",this.sliderFocusOut),O.remove(this.sliderContainer,"mouseover mouseout touchstart touchend",this.hover),this.wireFirstHandleEvt(!0),"Range"===this.type&&this.wireSecondHandleEvt(!0),this.showButtons&&this.wireButtonEvt(!0),this.wireMaterialTooltipEvent(!0),O.remove(this.element,"reset",this.formResetHandler)}formResetHandler(){this.setProperties({value:this.formResetValue},!0),this.setValue()}keyUp(e){if(9===e.keyCode&&e.target.classList.contains("e-handle")&&(this.focusSliderElement(),!e.target.classList.contains("e-tab-handle"))){this.element.querySelector(".e-tab-handle")&&this.element.querySelector(".e-tab-handle").classList.remove("e-tab-handle"),e.target.classList.add("e-tab-handle");let t=e.target.parentElement;t===this.element&&(t.querySelector(".e-slider-track").classList.add("e-tab-track"),("Range"===this.type||"MinRange"===this.type)&&t.querySelector(".e-range").classList.add("e-tab-range")),"Range"===this.type&&(this.activeHandle=e.target.previousSibling.classList.contains("e-handle")?2:1),this.getHandle().focus(),this.tooltipToggle(this.getHandle())}this.closeTooltip(),this.changeEvent("changed",e)}hover(e){if(!m(e))if("mouseover"===e.type||"touchmove"===e.type||"mousemove"===e.type||"pointermove"===e.type||"touchstart"===e.type)this.sliderContainer.classList.add("e-slider-hover");else{this.sliderContainer.classList.remove("e-slider-hover");const t=e.currentTarget;this.tooltip.isVisible&&"Always"!==this.tooltip.showOn&&this.tooltipObj&&this.isMaterialTooltip&&!t.classList.contains("e-handle-focused")&&!t.classList.contains("e-tab-handle")&&this.closeMaterialTooltip()}}sliderFocusOut(e){e.relatedTarget!==this.secondHandle&&e.relatedTarget!==this.firstHandle&&e.relatedTarget!==this.element&&e.relatedTarget!==this.firstBtn&&e.relatedTarget!==this.secondBtn&&(this.closeMaterialTooltip(),this.closeTooltip(),this.element.querySelector(".e-tab-handle")&&this.element.querySelector(".e-tab-handle").classList.remove("e-tab-handle"),this.element.querySelector(".e-tab-track")&&(this.element.querySelector(".e-tab-track").classList.remove("e-tab-track"),("Range"===this.type||"MinRange"===this.type)&&this.element.querySelector(".e-tab-range")&&this.element.querySelector(".e-tab-range").classList.remove("e-tab-range")),this.hiddenInput.focus(),this.hiddenInput.blur(),this.isElementFocused=!1)}removeElement(e){e.parentNode&&e.parentNode.removeChild(e)}changeSliderType(e,t){this.isMaterialTooltip&&this.materialHandle&&(this.sliderContainer.classList.remove("e-material-slider"),this.removeElement(this.materialHandle),this.materialHandle=void 0),this.removeElement(this.firstHandle),this.firstHandle=void 0,"Default"!==e&&("Range"===e&&(this.removeElement(this.secondHandle),this.secondHandle=void 0),this.removeElement(this.rangeBar),this.rangeBar=void 0),this.tooltip.isVisible&&!m(this.tooltipObj)&&(this.tooltipObj.destroy(),this.tooltipElement=void 0,this.tooltipCollidedPosition=void 0),this.limits.enabled&&("MinRange"===e||"Default"===e?m(this.limitBarFirst)||(this.removeElement(this.limitBarFirst),this.limitBarFirst=void 0):m(this.limitBarSecond)||(this.removeElement(this.limitBarSecond),this.limitBarSecond=void 0)),this.activeHandle=1,this.getThemeInitialization(),"Range"===this.type&&this.rangeValueUpdate(),this.createRangeBar(),this.limits.enabled&&this.createLimitBar(),this.setHandler(),this.setOrientClass(),this.wireFirstHandleEvt(!1),"Range"===this.type&&this.wireSecondHandleEvt(!1),this.setValue(),this.tooltip.isVisible&&(this.renderTooltip(),this.wireMaterialTooltipEvent(!1)),this.setBarColor(),"tooltip"!==t&&this.updateConfig()}changeRtl(){if(!this.enableRtl&&"Range"===this.type&&(this.value=[this.handleVal2,this.handleVal1]),this.updateConfig(),this.tooltip.isVisible&&this.tooltipObj.refresh(this.firstHandle),this.showButtons){let e=this.enableRtl&&"Vertical"!==this.orientation;bt(e?this.secondBtn:this.firstBtn,{"aria-label":"Decrease",title:"Decrease"}),bt(e?this.firstBtn:this.secondBtn,{"aria-label":"Increase",title:"Increase"})}}changeOrientation(){this.changeSliderType(this.type,"null")}updateConfig(){this.setEnableRTL(),this.setValue(),this.tooltip.isVisible&&this.refreshTooltip(this.tooltipTarget),"None"!==this.ticks.placement&&this.ul&&(this.removeElement(this.ul),this.ul=void 0,this.renderScale()),this.limitsPropertyChange()}limitsPropertyChange(){this.limits.enabled?(m(this.limitBarFirst)&&"Range"!==this.type&&this.createLimitBar(),m(this.limitBarFirst)&&m(this.limitBarSecond)&&"Range"===this.type&&this.createLimitBar(),this.setLimitBar(),this.setValue()):(m(this.limitBarFirst)||ye(this.limitBarFirst),m(this.limitBarSecond)||ye(this.limitBarSecond))}getPersistData(){return this.addOnPersist(["value"])}destroy(){super.destroy(),this.unwireEvents(),window.removeEventListener("resize",this.onresize),Y([this.sliderContainer],["e-disabled"]),this.firstHandle.removeAttribute("aria-orientation"),"Range"===this.type&&this.secondHandle.removeAttribute("aria-orientation"),this.sliderContainer.parentNode.insertBefore(this.element,this.sliderContainer),ye(this.sliderContainer),this.tooltip.isVisible&&this.tooltipObj.destroy(),this.element.innerHTML=""}onPropertyChanged(e,t){for(let i of Object.keys(e))switch(i){case"cssClass":this.setCSSClass(t.cssClass);break;case"value":if(e&&t){let s=m(e.value)?"Range"===this.type?[this.min,this.max]:this.min:e.value;this.setProperties({value:s},!0),!m(t.value)&&t.value.toString()!==s.toString()&&(this.setValue(),this.refreshTooltip(this.tooltipTarget),"Range"===this.type&&(this.activeHandle=m(e.value)||t.value[1]===s[1]?1:2))}break;case"min":case"step":case"max":this.setMinMaxValue();break;case"tooltip":!m(e.tooltip)&&!m(t.tooltip)&&this.setTooltip(i);break;case"type":!m(t)&&Object.keys(t).length&&!m(t.type)&&(this.changeSliderType(t.type,i),this.setZindex());break;case"enableRtl":t.enableRtl!==e.enableRtl&&"Vertical"!==this.orientation&&(this.rtl=t.enableRtl,this.changeRtl());break;case"limits":this.limitsPropertyChange();break;case"orientation":this.changeOrientation();break;case"ticks":m(this.sliderContainer.querySelector(".e-scale"))||(ye(this.ul),Array.prototype.forEach.call(this.sliderContainer.classList,s=>{s.match(/e-scale-/)&&this.sliderContainer.classList.remove(s)})),"None"!==this.ticks.placement&&(this.renderScale(),this.setZindex());break;case"locale":this.showButtons&&this.buttonTitle();break;case"showButtons":e.showButtons?(this.setButtons(),this.reposition(),this.enabled&&!this.readonly&&this.wireButtonEvt(!1)):this.firstBtn&&this.secondBtn&&(this.sliderContainer.removeChild(this.firstBtn),this.sliderContainer.removeChild(this.secondBtn),this.sliderContainer.classList.remove("e-slider-btn"),this.firstBtn=void 0,this.secondBtn=void 0,this.reposition());break;case"enabled":this.setEnabled();break;case"readonly":this.setReadOnly();break;case"customValues":this.setValue(),this.reposition();break;case"colorRange":this.reposition();break;case"width":this.setElementWidth(e.width),this.setMinMaxValue(),this.limits&&this.limitsPropertyChange()}}setReadOnly(){this.readonly?(this.unwireEvents(),this.sliderContainer.classList.add("e-read-only")):(this.wireEvents(),this.sliderContainer.classList.remove("e-read-only"))}setMinMaxValue(){this.setValue(),this.refreshTooltip(this.tooltipTarget),m(this.sliderContainer.querySelector(".e-scale"))||this.ul&&(ye(this.ul),Array.prototype.forEach.call(this.sliderContainer.classList,e=>{e.match(/e-scale-/)&&this.sliderContainer.classList.remove(e)})),"None"!==this.ticks.placement&&(this.renderScale(),this.setZindex())}setZindex(){this.zIndex=6,!m(this.ticks)&&"None"!==this.ticks.placement&&(this.ul.style.zIndex=this.zIndex+-7+"",this.element.style.zIndex=this.zIndex+2+""),!this.isMaterial&&!m(this.ticks)&&"Both"===this.ticks.placement&&(this.element.style.zIndex=this.zIndex+2+""),this.firstHandle.style.zIndex=this.zIndex+3+"","Range"===this.type&&(this.secondHandle.style.zIndex=this.zIndex+4+"")}setTooltip(e){this.changeSliderType(this.type,e)}setBarColor(){let e,t,i=this.sliderTrack.lastElementChild;for(;i;)this.sliderTrack.removeChild(i),i=this.sliderTrack.lastElementChild;for(let s=0;s<this.colorRange.length;s++)if(!m(this.colorRange[s].start)&&!m(this.colorRange[s].end)&&this.colorRange[s].end>this.colorRange[s].start){this.colorRange[s].start<this.min&&(this.colorRange[s].start=this.min),this.colorRange[s].end>this.max&&(this.colorRange[s].end=this.max);const r=this.checkHandlePosition(this.colorRange[s].start),o=this.checkHandlePosition(this.colorRange[s].end),a=this.createElement("div");a.style.backgroundColor=this.colorRange[s].color,a.style.border="1px solid "+this.colorRange[s].color,"Horizontal"===this.orientation?(t="e-slider-horizantal-color",e=this.enableRtl?m(this.customValues)?this.checkHandlePosition(this.max)-this.checkHandlePosition(this.colorRange[s].end):this.checkHandlePosition(this.customValues.length-this.colorRange[s].end-1):this.checkHandlePosition(this.colorRange[s].start),a.style.width=o-r+"px",a.style.left=e+"px"):(t="e-slider-vertical-color",e=this.checkHandlePosition(this.colorRange[s].start),a.style.height=o-r+"px",a.style.bottom=e+"px"),a.classList.add(t),this.sliderTrack.appendChild(a)}}getModuleName(){return"slider"}};Ki([A(null)],pn.prototype,"value",void 0),Ki([A(null)],pn.prototype,"customValues",void 0),Ki([A(1)],pn.prototype,"step",void 0),Ki([A(null)],pn.prototype,"width",void 0),Ki([A(0)],pn.prototype,"min",void 0),Ki([A(100)],pn.prototype,"max",void 0),Ki([A(!1)],pn.prototype,"readonly",void 0),Ki([A("Default")],pn.prototype,"type",void 0),Ki([cl([{}],iy)],pn.prototype,"colorRange",void 0),Ki([Ps({},vb)],pn.prototype,"ticks",void 0),Ki([Ps({},fc)],pn.prototype,"limits",void 0),Ki([A(!0)],pn.prototype,"enabled",void 0),Ki([Ps({},Kf)],pn.prototype,"tooltip",void 0),Ki([A(!1)],pn.prototype,"showButtons",void 0),Ki([A(!0)],pn.prototype,"enableAnimation",void 0),Ki([A("Horizontal")],pn.prototype,"orientation",void 0),Ki([A("")],pn.prototype,"cssClass",void 0),Ki([A(!1)],pn.prototype,"enableHtmlSanitizer",void 0),Ki([Z()],pn.prototype,"created",void 0),Ki([Z()],pn.prototype,"change",void 0),Ki([Z()],pn.prototype,"changed",void 0),Ki([Z()],pn.prototype,"renderingTicks",void 0),Ki([Z()],pn.prototype,"renderedTicks",void 0),Ki([Z()],pn.prototype,"tooltipChange",void 0),pn=Ki([ts],pn);var sy,Go=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const bb={EMAIL:new RegExp("^[A-Za-z0-9._%+-]{1,}@[A-Za-z0-9._%+-]{1,}([.]{1}[a-zA-Z0-9]{2,}|[.]{1}[a-zA-Z0-9]{2,4}[.]{1}[a-zA-Z0-9]{2,4})$"),URL:/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/m,DATE_ISO:new RegExp("^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$"),DIGITS:new RegExp("^[0-9]*$"),PHONE:new RegExp("^[+]?[0-9]{9,13}$"),CREDITCARD:new RegExp("^\\d{13,16}$")};var ny=(()=>{return(n=ny||(ny={}))[n.Message=0]="Message",n[n.Label=1]="Label",ny;var n})();let zr=sy=class extends Gc{constructor(e,t){super(t,e),this.validated=[],this.errorRules=[],this.allowSubmit=!1,this.required="required",this.infoElement=null,this.inputElement=null,this.selectQuery="input:not([type=reset]):not([type=button]), select, textarea",this.localyMessage={},this.defaultMessages={required:"This field is required.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateIso:"Please enter a valid date ( ISO ).",creditcard:"Please enter valid card number",number:"Please enter a valid number.",digits:"Please enter only digits.",maxLength:"Please enter no more than {0} characters.",minLength:"Please enter at least {0} characters.",rangeLength:"Please enter a value between {0} and {1} characters long.",range:"Please enter a value between {0} and {1}.",max:"Please enter a value less than or equal to {0}.",min:"Please enter a value greater than or equal to {0}.",regex:"Please enter a correct value.",tel:"Please enter a valid phone number.",pattern:"Please enter a correct pattern value.",equalTo:"Please enter the valid match text"},void 0===this.rules&&(this.rules={}),this.l10n=new Xr("formValidator",this.defaultMessages,this.locale),this.locale&&this.localeFunc(),Cp.on("notifyExternalChange",this.afterLocalization,this),e="string"==typeof e?X(e,document):e,null!=this.element&&(this.element.setAttribute("novalidate",""),this.inputElements=at(this.selectQuery,this.element),this.createHTML5Rules(),this.wireEvents())}addRules(e,t){e&&(this.rules.hasOwnProperty(e)?ut(this.rules[e],t,{}):this.rules[e]=t)}removeRules(e,t){if(e||t)if(this.rules[e]&&!t)delete this.rules[e];else{if(m(this.rules[e]&&t))return;for(let i=0;i<t.length;i++)delete this.rules[e][t[i]]}else this.rules={}}validate(e){const t=Object.keys(this.rules);if(e&&t.length)return this.validateRules(e),-1!==t.indexOf(e)&&0===this.errorRules.filter(i=>i.name===e).length;this.errorRules=[];for(const i of t)this.validateRules(i);return 0===this.errorRules.length}reset(){this.element.reset(),this.clearForm()}getInputElement(e){return this.inputElement=X('[name="'+e+'"]',this.element),this.inputElement}destroy(){this.reset(),this.unwireEvents(),this.rules={};const e=at("."+this.errorClass+", ."+this.validClass,this.element);for(const t of e)ye(t);super.destroy(),Cp.off("notifyExternalChange",this.afterLocalization)}onPropertyChanged(e,t){for(const i of Object.keys(e))"locale"===i&&this.localeFunc()}localeFunc(){for(const e of Object.keys(this.defaultMessages)){this.l10n.setLocale(this.locale);const t=this.l10n.getConstant(e);this.localyMessage[e]=t}}getModuleName(){return"formValidator"}afterLocalization(e){this.locale=e.locale,this.localeFunc()}refresh(){this.unwireEvents(),this.inputElements=at(this.selectQuery,this.element),this.wireEvents()}clearForm(){this.errorRules=[],this.validated=[];const e=at(this.selectQuery,this.element);for(const t of e){const i=t;i.removeAttribute("aria-invalid"),i.classList.remove(this.errorClass),i.name.length>0&&(this.getInputElement(i.name),this.getErrorElement(i.name),this.hideMessage(i.name)),i.classList.remove(this.validClass)}}createHTML5Rules(){const e=["required","validateHidden","regex","rangeLength","maxLength","minLength","dateIso","digits","pattern","data-val-required","type","data-validation","min","max","range","equalTo","data-val-minlength-min","data-val-equalto-other","data-val-maxlength-max","data-val-range-min","data-val-regex-pattern","data-val-length-max","data-val-creditcard","data-val-phone"],t=["hidden","email","url","date","number","tel"];for(const i of this.inputElements){const s={};for(let r of e)if(null!==i.getAttribute(r))switch(r){case"required":this.defRule(i,s,r,i.required);break;case"data-validation":r=i.getAttribute(r),this.defRule(i,s,r,!0);break;case"type":-1!==t.indexOf(i.type)&&this.defRule(i,s,i.type,!0);break;case"rangeLength":case"range":this.defRule(i,s,r,JSON.parse(i.getAttribute(r)));break;case"equalTo":{const o=i.getAttribute(r);this.defRule(i,s,r,o)}break;default:"true"===i.getAttribute("data-val")?this.annotationRule(i,s,r,i.getAttribute(r)):this.defRule(i,s,r,i.getAttribute(r))}0!==Object.keys(s).length&&this.addRules(i.name,s)}}annotationRule(e,t,i,s){const r=i.split("-"),o=["required","creditcard","phone","maxlength","minlength","range","regex","equalto"],a=r[r.length-1],u=r[r.length-2];if(-1!==o.indexOf(a))switch(a){case"required":this.defRule(e,t,"required",s);break;case"creditcard":this.defRule(e,t,"creditcard",s);break;case"phone":this.defRule(e,t,"tel",s)}else if(-1!==o.indexOf(u))switch(u){case"maxlength":this.defRule(e,t,"maxLength",s);break;case"minlength":this.defRule(e,t,"minLength",s);break;case"range":{const p=e.getAttribute("data-val-range-min"),y=e.getAttribute("data-val-range-max");this.defRule(e,t,"range",[p,y])}break;case"equalto":{const p=e.getAttribute(i).split(".");this.defRule(e,t,"equalTo",p[p.length-1])}break;case"regex":this.defRule(e,t,"regex",s)}}defRule(e,t,i,s){const r=e.getAttribute("data-"+i+"-message"),o=e.getAttribute("data-val-"+i);let a;this.rules[e.name]&&"validateHidden"!==i&&"hidden"!==i&&(this.getInputElement(e.name),a=this.getErrorMessage(this.rules[e.name][i],i)),r?s=[s,r]:o?s=[s,o]:a&&(s=[s,a]),t[i]=s}wireEvents(){for(const e of this.inputElements)sy.isCheckable(e)?O.add(e,"click",this.clickHandler,this):"SELECT"===e.tagName?O.add(e,"change",this.changeHandler,this):(O.add(e,"focusout",this.focusOutHandler,this),O.add(e,"keyup",this.keyUpHandler,this));O.add(this.element,"submit",this.submitHandler,this),O.add(this.element,"reset",this.resetHandler,this)}unwireEvents(){for(const e of this.inputElements)O.clearEvents(e);O.remove(this.element,"submit",this.submitHandler),O.remove(this.element,"reset",this.resetHandler)}focusOutHandler(e){this.trigger("focusout",e);const t=e.target;this.rules[t.name]&&(this.rules[t.name][this.required]||t.value.length>0?this.validate(t.name):-1===this.validated.indexOf(t.name)&&this.validated.push(t.name))}keyUpHandler(e){this.trigger("keyup",e);const t=e.target;9===e.which&&(!this.rules[t.name]||this.rules[t.name]&&!this.rules[t.name][this.required])||-1!==this.validated.indexOf(t.name)&&this.rules[t.name]&&-1===[16,17,18,20,35,36,37,38,39,40,45,144,225].indexOf(e.which)&&this.validate(t.name)}clickHandler(e){this.trigger("click",e);const t=e.target;"submit"!==t.type?this.validate(t.name):null!==t.getAttribute("formnovalidate")&&(this.allowSubmit=!0)}changeHandler(e){this.trigger("change",e),this.validate(e.target.name)}submitHandler(e){this.trigger("submit",e),this.allowSubmit||this.validate()?this.allowSubmit=!1:e.preventDefault()}resetHandler(){this.clearForm()}validateRules(e){if(!this.rules[e])return;const t=Object.keys(this.rules[e]);let i=!1,s=!1;const r=t.indexOf("validateHidden"),o=t.indexOf("hidden");if(this.getInputElement(e),-1!==o&&(i=!0),-1!==r&&(s=!0),!i||i&&s){-1!==r&&t.splice(r,1),-1!==o&&t.splice(o-1,1),this.getErrorElement(e);for(const a of t){const u=this.getErrorMessage(this.rules[e][a],a),p={name:e,message:u},y={inputName:e,element:this.inputElement,message:u};if(!this.isValid(e,a)&&!this.inputElement.classList.contains(this.ignore)){this.removeErrorRules(e),this.errorRules.push(p),this.inputElement.setAttribute("aria-invalid","true"),this.inputElement.setAttribute("aria-describedby",this.inputElement.id+"-info"),this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass),this.infoElement?this.showMessage(p):this.createErrorElement(e,p.message,this.inputElement),y.errorElement=this.infoElement,y.status="failure",this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass),this.optionalValidationStatus(e,y),this.trigger("validationComplete",y),"required"===a&&this.inputElement.setAttribute("aria-required","true");break}this.hideMessage(e),y.status="success",this.trigger("validationComplete",y)}}}optionalValidationStatus(e,t){!this.rules[e][this.required]&&!this.inputElement.value.length&&!m(this.infoElement)&&(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),t.status="",this.hideMessage(e))}isValid(e,t){const i=this.rules[e][t],r=this.rules[e][t],o={value:this.inputElement.value,param:i instanceof Array&&"string"==typeof i[1]?i[0]:i,element:this.inputElement,formElement:this.element};return this.trigger("validationBegin",o),!o.param&&"required"===t||(r&&"function"==typeof r[0]?r[0].call(this,{element:this.inputElement,value:this.inputElement.value}):sy.isCheckable(this.inputElement)?"required"!==t||at('input[name="'+e+'"]:checked',this.element).length>0:sy.checkValidator[t](o))}getErrorMessage(e,t){let i=this.inputElement.getAttribute("data-"+t+"-message")?this.inputElement.getAttribute("data-"+t+"-message"):e instanceof Array&&"string"==typeof e[1]?e[1]:0!==Object.keys(this.localyMessage).length?this.localyMessage[t]:this.defaultMessages[t];const s=i.match(/{(\d)}/g);if(!m(s))for(let r=0;r<s.length;r++)i=i.replace(s[r],e instanceof Array?e[r]:e);return i}createErrorElement(e,t,i){let s=Ds(this.errorElement,{className:this.errorClass,innerHTML:t,attrs:{for:e}});this.errorOption===ny.Message&&(s.classList.remove(this.errorClass),s.classList.add("e-message"),s=Ds(this.errorContainer,{className:this.errorClass,innerHTML:s.outerHTML})),s.id=this.inputElement.name+"-info",this.element.querySelector('[data-valmsg-for="'+i.id+'"]')?this.element.querySelector('[data-valmsg-for="'+i.id+'"]').appendChild(s):!0===i.hasAttribute("data-msg-containerid")?X("#"+i.getAttribute("data-msg-containerid"),this.element).appendChild(s):null!=this.customPlacement?this.customPlacement.call(this,this.inputElement,s):this.inputElement.parentNode.insertBefore(s,this.inputElement.nextSibling),s.style.display="block",this.getErrorElement(e),this.validated.push(e),this.checkRequired(e)}getErrorElement(e){return this.infoElement=X(this.errorElement+"."+this.errorClass,this.inputElement.parentElement),this.infoElement||(this.infoElement=X(this.errorElement+"."+this.errorClass+'[for="'+e+'"]',this.element)),this.infoElement}removeErrorRules(e){for(let t=0;t<this.errorRules.length;t++)this.errorRules[t].name===e&&this.errorRules.splice(t,1)}showMessage(e){this.infoElement.style.display="block",this.infoElement.innerHTML=e.message,this.checkRequired(e.name)}hideMessage(e){this.infoElement&&(this.infoElement.style.display="none",this.removeErrorRules(e),this.inputElement.classList.add(this.validClass),this.inputElement.classList.remove(this.errorClass),this.inputElement.setAttribute("aria-invalid","false"))}checkRequired(e){!this.rules[e][this.required]&&!this.inputElement.value.length&&!m(this.infoElement)&&(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),this.hideMessage(e))}static isCheckable(e){const t=e.getAttribute("type");return t&&("checkbox"===t||"radio"===t||"submit"===t)}};zr.checkValidator={required:n=>isNaN(Date.parse(n.value))?n.value.toString().length>0:!isNaN(new Date(n.value).getTime()),email:n=>bb.EMAIL.test(n.value),url:n=>bb.URL.test(n.value),dateIso:n=>bb.DATE_ISO.test(n.value),tel:n=>bb.PHONE.test(n.value),creditcard:n=>bb.CREDITCARD.test(n.value),number:n=>!isNaN(Number(n.value))&&-1===n.value.indexOf(" "),digits:n=>bb.DIGITS.test(n.value),maxLength:n=>n.value.length<=n.param,minLength:n=>n.value.length>=n.param,rangeLength:n=>{const e=n.param;return n.value.length>=e[0]&&n.value.length<=e[1]},range:n=>{const e=n.param;return!isNaN(Number(n.value))&&Number(n.value)>=e[0]&&Number(n.value)<=e[1]},date:n=>!isNaN(new Date(n.value).getTime()),max:n=>isNaN(Number(n.value))?new Date(n.value).getTime()<=new Date(JSON.parse(JSON.stringify(n.param))).getTime():+n.value<=n.param,min:n=>{if(isNaN(Number(n.value))){if(-1!==n.value.indexOf(",")){const e=n.value.replace(/,/g,"");return parseFloat(e)>=n.param}return new Date(n.value).getTime()>=new Date(JSON.parse(JSON.stringify(n.param))).getTime()}return+n.value>=n.param},regex:n=>new RegExp(n.param).test(n.value),equalTo:n=>{const e=n.formElement.querySelector("#"+n.param);return n.param=e.value,n.param===n.value}},Go([A("")],zr.prototype,"locale",void 0),Go([A("e-hidden")],zr.prototype,"ignore",void 0),Go([A()],zr.prototype,"rules",void 0),Go([A("e-error")],zr.prototype,"errorClass",void 0),Go([A("e-valid")],zr.prototype,"validClass",void 0),Go([A("label")],zr.prototype,"errorElement",void 0),Go([A("div")],zr.prototype,"errorContainer",void 0),Go([A(ny.Label)],zr.prototype,"errorOption",void 0),Go([Z()],zr.prototype,"focusout",void 0),Go([Z()],zr.prototype,"keyup",void 0),Go([Z()],zr.prototype,"click",void 0),Go([Z()],zr.prototype,"change",void 0),Go([Z()],zr.prototype,"submit",void 0),Go([Z()],zr.prototype,"validationBegin",void 0),Go([Z()],zr.prototype,"validationComplete",void 0),Go([Z()],zr.prototype,"customPlacement",void 0),zr=sy=Go([ts],zr);var qi=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const rL="e-file-select",DD="e-file-drop",gE="e-upload-files",yE="e-upload-file-list",Jr="e-file-status",Hl="e-file-name",kD="e-file-type",vE="e-file-size",Yo="e-file-remove-btn",Xc="e-file-delete-btn",bE="e-spinner-pane",cr="e-file-abort-btn",kh="e-file-reload-btn",Y_="e-upload-drag-hover",Rp="e-upload-progress-wrap",Cb="e-upload-progress-bar",K_="e-progress-bar-text",Qc="e-upload-progress",mc="e-upload-success",Wr="e-upload-fails",Z_="e-file-container",cL="e-validation-fails",CE="e-disabled",MD="e-rtl-container",X_="e-clear-icon-focus",Fa="e-file-pause-btn",ry="e-file-play-btn",oy="e-restrict-retry",Q_=["title","style","class"],LD="e-form-upload",ay="e-file-invalid";class ly extends Is{}qi([A("")],ly.prototype,"name",void 0),qi([A(null)],ly.prototype,"size",void 0),qi([A("")],ly.prototype,"type",void 0);class wb extends Is{}qi([A("Browse...")],wb.prototype,"browse",void 0),qi([A("Upload")],wb.prototype,"upload",void 0),qi([A("Clear")],wb.prototype,"clear",void 0);class cy extends Is{}qi([A("")],cy.prototype,"saveUrl",void 0),qi([A("")],cy.prototype,"removeUrl",void 0),qi([A(0)],cy.prototype,"chunkSize",void 0),qi([A(3)],cy.prototype,"retryCount",void 0),qi([A(500)],cy.prototype,"retryAfterDelay",void 0);let ps=class extends Ls{constructor(e,t){super(e,t),this.initialAttr={accept:null,multiple:!1,disabled:!1},this.uploadedFilesData=[],this.base64String=[],this.isForm=!1,this.allTypes=!1,this.pausedData=[],this.uploadMetaData=[],this.tabIndex="0",this.btnTabIndex="0",this.disableKeyboardNavigation=!1,this.count=-1,this.actionCompleteCount=0,this.flag=!0,this.selectedFiles=[],this.uploaderName="UploadFiles",this.fileStreams=[],this.newFileRef=0,this.isFirstFileOnSelection=!1,this.dragCounter=0,this.fileList=[],this.filesData=[],this.uploaderOptions=e}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"allowedExtensions":this.setExtensions(this.allowedExtensions),this.clearAll();break;case"enabled":this.setControlStatus();break;case"multiple":this.setMultipleSelection();break;case"enableRtl":this.setRTL(),this.reRenderFileList();break;case"buttons":this.buttons.browse=m(this.buttons.browse)?"":this.buttons.browse,this.buttons.clear=m(this.buttons.clear)?"":this.buttons.clear,this.buttons.upload=m(this.buttons.upload)?"":this.buttons.upload,this.renderButtonTemplates();break;case"dropArea":this.unBindDropEvents(),this.updateDropArea();break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkHTMLAttributes(!0);break;case"files":this.renderPreLoadFiles();break;case"directoryUpload":this.updateDirectoryAttributes();break;case"template":case"minFileSize":case"maxFileSize":case"autoUpload":case"sequentialUpload":this.clearAll();break;case"locale":this.l10n.setLocale(this.locale),this.setLocalizedTexts(),this.preLocaleObj=J("currentLocale",this.l10n);break;case"cssClass":this.setCSSClass(t.cssClass)}}setLocalizedTexts(){m(this.template)&&("string"==typeof this.buttons.browse&&(this.browseButton.innerText="Browse..."===this.buttons.browse?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.innerText),this.uploadWrapper&&!m(this.uploadWrapper.querySelector("."+DD))&&(this.uploadWrapper.querySelector("."+DD).innerHTML=this.localizedTexts("dropFilesHint"))),this.updateFileList())}getKeyValue(e){let t;for(const i of Object.keys(this.preLocaleObj))this.preLocaleObj[i]===e&&(t=i);return t}updateFileList(){let e;if(this.fileList.length>0&&!m(this.uploadWrapper.querySelector("."+gE)))for(let t=0;t<this.fileList.length;t++)e=this.fileList[t].querySelector(".e-file-status"),e.innerHTML=this.localizedTexts(this.getKeyValue(this.filesData[t].status)),this.filesData[t].status=this.localizedTexts(this.getKeyValue(this.filesData[t].status)),this.fileList[t].classList.contains(mc)&&this.fileList[t].querySelector(".e-icons").setAttribute("title",this.localizedTexts("delete")),this.fileList[t].querySelector(".e-file-play-btn")&&this.fileList[t].querySelector(".e-icons").setAttribute("title",this.localizedTexts("resume")),this.fileList[t].querySelector(".e-file-remove-btn")&&this.fileList[t].querySelector(".e-icons").setAttribute("title",this.localizedTexts("remove")),this.fileList[t].querySelector(".e-file-reload-btn")&&this.fileList[t].querySelector(".e-icons").setAttribute("title",this.localizedTexts("retry")),this.autoUpload||(this.uploadButton.innerText="Upload"===this.buttons.upload?this.localizedTexts("Upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.localizedTexts("Upload")),this.clearButton.innerText="Clear"===this.buttons.clear?this.localizedTexts("Clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.localizedTexts("Clear")))}reRenderFileList(){this.listParent&&(ye(this.listParent),this.listParent=null,this.fileList=[],this.createFileList(this.filesData),this.actionButtons&&(this.removeActionButtons(),this.renderActionButtons(),this.checkActionButtonStatus()))}preRender(){this.localeText={Browse:"Browse...",Clear:"Clear",Upload:"Upload",dropFilesHint:"Or drop files here",invalidMaxFileSize:"File size is too large",invalidMinFileSize:"File size is too small",invalidFileType:"File type is not allowed",uploadFailedMessage:"File failed to upload",uploadSuccessMessage:"File uploaded successfully",removedSuccessMessage:"File removed successfully",removedFailedMessage:"Unable to remove file",inProgress:"Uploading",readyToUploadMessage:"Ready to upload",abort:"Abort",remove:"Remove",cancel:"Cancel",delete:"Delete file",pauseUpload:"File upload paused",pause:"Pause",resume:"Resume",retry:"Retry",fileUploadCancel:"File upload canceled",invalidFileSelection:"Invalid files selected",totalFiles:"Total files",size:"Size"},this.l10n=new Xr("uploader",this.localeText,this.locale),this.preLocaleObj=J("currentLocale",this.l10n),this.formRendered(),this.updateHTMLAttrToElement(),this.checkHTMLAttributes(!1);const e=J("ej2_instances",this.element);if("EJS-UPLOADER"===this.element.tagName){const t=this.createElement("input",{attrs:{type:"file"}});let i=0;for(;i<this.element.attributes.length;i++)t.setAttribute(this.element.attributes[i].nodeName,this.element.attributes[i].nodeValue),t.innerHTML=this.element.innerHTML;t.hasAttribute("name")||t.setAttribute("name","UploadFiles"),this.element.appendChild(t),this.element=t,pi("ej2_instances",e,this.element)}e[0].isPureReactComponent&&(m(e[0].props.name)?!m(e[0].props.id)&&m(e[0].props.name)?this.element.setAttribute("name",e[0].props.id):this.element.setAttribute("name","UploadFiles"):this.element.setAttribute("name",e[0].props.name)),m(this.element.getAttribute("name"))&&this.element.setAttribute("name",this.element.getAttribute("id")),this.element.hasAttribute("type")||this.element.setAttribute("type","file"),this.updateDirectoryAttributes(),this.keyConfigs={enter:"enter"},this.element.hasAttribute("tabindex")&&(this.tabIndex=this.element.getAttribute("tabindex")),this.browserName=Q.info.name,this.uploaderName=this.element.getAttribute("name")}formRendered(){let e=ae(this.element,"form");if(!m(e))for(;e&&e!==document.documentElement;e=e.parentElement)"FORM"===e.tagName&&(this.isForm=!0,this.formElement=e,e.setAttribute("enctype","multipart/form-data"),e.setAttribute("encoding","multipart/form-data"))}getPersistData(){return this.addOnPersist(["filesData"])}getModuleName(){return"uploader"}updateDirectoryAttributes(){this.directoryUpload?(this.element.setAttribute("directory","true"),this.element.setAttribute("webkitdirectory","true")):(this.element.removeAttribute("directory"),this.element.removeAttribute("webkitdirectory"))}render(){this.renderBrowseButton(),this.initializeUpload(),this.updateHTMLAttrToWrapper(),this.wireEvents(),this.setMultipleSelection(),this.setExtensions(this.allowedExtensions),this.setRTL(),this.renderPreLoadFiles(),this.setControlStatus(),this.setCSSClass()}renderBrowseButton(){this.browseButton=this.createElement("button",{className:"e-css e-btn",attrs:{type:"button"}}),this.browseButton.setAttribute("tabindex",this.tabIndex),"string"==typeof this.buttons.browse?(this.browseButton.textContent="Browse..."===this.buttons.browse?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.innerText)):this.browseButton.appendChild(this.buttons.browse),this.element.setAttribute("aria-label","Uploader")}renderActionButtons(){this.element.setAttribute("tabindex","-1"),this.actionButtons=this.createElement("div",{className:"e-upload-actions"}),this.uploadButton=this.createElement("button",{className:"e-file-upload-btn e-css e-btn e-flat e-primary",attrs:{type:"button",tabindex:this.btnTabIndex}}),this.clearButton=this.createElement("button",{className:"e-file-clear-btn e-css e-btn e-flat",attrs:{type:"button",tabindex:this.btnTabIndex}}),this.actionButtons.appendChild(this.clearButton),this.actionButtons.appendChild(this.uploadButton),this.renderButtonTemplates(),this.uploadWrapper.appendChild(this.actionButtons),this.browseButton.blur(),this.isPreloadFiles||this.uploadButton.focus(),this.wireActionButtonEvents()}serverActionButtonsEventBind(e){e&&!this.isForm&&(this.browseButton.blur(),this.actionButtons=e,this.uploadButton=this.actionButtons.querySelector(".e-file-upload-btn"),this.clearButton=this.actionButtons.querySelector(".e-file-clear-btn"),this.uploadButton.focus(),this.unwireActionButtonEvents(),this.wireActionButtonEvents(),this.checkActionButtonStatus())}wireActionButtonEvents(){O.add(this.uploadButton,"click",this.uploadButtonClick,this),O.add(this.clearButton,"click",this.clearButtonClick,this)}unwireActionButtonEvents(){O.remove(this.uploadButton,"click",this.uploadButtonClick),O.remove(this.clearButton,"click",this.clearButtonClick)}removeActionButtons(){this.actionButtons&&(this.unwireActionButtonEvents(),ye(this.actionButtons),this.actionButtons=null)}renderButtonTemplates(){if("string"==typeof this.buttons.browse?(this.browseButton.textContent="Browse..."===this.buttons.browse?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.textContent)):(this.browseButton.innerHTML="",this.browseButton.appendChild(this.buttons.browse)),this.uploadButton){const e=m(this.buttons.upload)?"Upload":this.buttons.upload;this.buttons.upload=e,"string"==typeof this.buttons.upload?(this.uploadButton.textContent="Upload"===this.buttons.upload?this.localizedTexts("Upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.uploadButton.textContent)):(this.uploadButton.innerHTML="",this.uploadButton.appendChild(this.buttons.upload))}if(this.clearButton){const e=m(this.buttons.clear)?"Clear":this.buttons.clear;this.buttons.clear=e,"string"==typeof this.buttons.clear?(this.clearButton.textContent="Clear"===this.buttons.clear?this.localizedTexts("Clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.clearButton.textContent)):(this.clearButton.innerHTML="",this.clearButton.appendChild(this.buttons.clear))}}initializeUpload(){this.element.setAttribute("tabindex","-1");const e=this.createElement("span",{className:rL});this.element.parentElement.insertBefore(e,this.element),this.dropAreaWrapper=this.createElement("div",{className:"e-file-select-wrap"}),this.element.parentElement.insertBefore(this.dropAreaWrapper,this.element),e.appendChild(this.element),this.dropAreaWrapper.appendChild(this.browseButton),this.dropAreaWrapper.appendChild(e),this.uploadWrapper=this.createElement("div",{className:"e-upload e-control-wrapper"}),this.dropAreaWrapper.parentElement.insertBefore(this.uploadWrapper,this.dropAreaWrapper),this.uploadWrapper.appendChild(this.dropAreaWrapper),this.setDropArea()}renderPreLoadFiles(){if(this.files.length){if(this.enablePersistence&&this.filesData.length)return void this.createFileList(this.filesData);if(m(this.files[0].size))return;this.isPreloadFiles=!0;let e=[].slice.call(this.files);const t=[];this.multiple||(this.clearData(),e=[e[0]]);for(const i of e){const s={name:i.name+"."+i.type.split(".")[i.type.split(".").length-1],rawFile:"",size:i.size,status:this.localizedTexts("uploadSuccessMessage"),type:i.type,validationMessages:{minSize:"",maxSize:""},statusCode:"2"};t.push(s),this.filesData.push(s)}this.createFileList(t),!this.autoUpload&&this.listParent&&!this.actionButtons&&(!this.isForm||this.allowUpload())&&this.showFileList&&this.renderActionButtons(),this.checkActionButtonStatus(),this.sequentialUpload&&(this.count=this.filesData.length-1),this.isPreloadFiles=!1}}checkActionButtonStatus(){if(this.actionButtons){const e=this.uploadWrapper.querySelectorAll("."+cL).length+this.uploadWrapper.querySelectorAll(".e-upload-fails:not(.e-upload-progress)").length+this.uploadWrapper.querySelectorAll("span."+mc).length+this.uploadWrapper.querySelectorAll("span."+Qc).length;e>0&&e===this.uploadWrapper.querySelectorAll("li").length?this.uploadButton.setAttribute("disabled","disabled"):this.uploadButton.removeAttribute("disabled")}}setDropArea(){const e=this.dropAreaWrapper.querySelector(".e-file-drop");if(this.dropArea){this.dropZoneElement="string"!=typeof this.dropArea?this.dropArea:X(this.dropArea,document);let t=this.element,i=!1;for(;t.parentNode;)t=t.parentNode,t===this.dropZoneElement&&(i=!0,e?e.innerHTML=this.localizedTexts("dropFilesHint"):this.createDropTextHint());!i&&e&&Ms(e)}else!m(this.uploaderOptions)&&void 0===this.uploaderOptions.dropArea&&(this.createDropTextHint(),this.dropZoneElement=this.uploadWrapper,this.setProperties({dropArea:this.uploadWrapper},!0));this.bindDropEvents()}updateDropArea(){if(this.dropArea)this.setDropArea();else{this.dropZoneElement=null;const e=this.dropAreaWrapper.querySelector(".e-file-drop");e&&Ms(e)}}createDropTextHint(){const e=this.createElement("span",{className:DD});e.innerHTML=this.localizedTexts("dropFilesHint"),this.dropAreaWrapper.appendChild(e)}updateHTMLAttrToElement(){if(!m(this.htmlAttributes))for(const e of Object.keys(this.htmlAttributes))Q_.indexOf(e)<0&&this.element.setAttribute(e,this.htmlAttributes[e])}updateHTMLAttrToWrapper(){if(!m(this.htmlAttributes))for(const e of Object.keys(this.htmlAttributes))if(Q_.indexOf(e)>-1)if("class"===e){const t=this.htmlAttributes[e].replace(/\s+/g," ").trim();""!==t&&j([this.uploadWrapper],t.split(" "))}else if("style"===e){let t=this.uploadWrapper.getAttribute(e);t=m(t)?this.htmlAttributes[e]:t+this.htmlAttributes[e],this.uploadWrapper.setAttribute(e,t)}else this.uploadWrapper.setAttribute(e,this.htmlAttributes[e])}setMultipleSelection(){if(this.multiple&&!this.element.hasAttribute("multiple")){const e=document.createAttribute("multiple");e.value="multiple",this.element.setAttributeNode(e)}else this.multiple||this.element.removeAttribute("multiple")}checkAutoUpload(e){this.autoUpload?(this.sequentialUpload?this.sequenceUpload(e):this.upload(e),this.removeActionButtons()):this.actionButtons||this.renderActionButtons(),this.checkActionButtonStatus()}sequenceUpload(e){if(this.filesData.length-e.length==0||"1"!==this.filesData[this.filesData.length-e.length-1].statusCode){++this.count;const t=!this.showFileList;"object"==typeof this.filesData[this.count]?(this.isFirstFileOnSelection=!1,this.upload(this.filesData[this.count],t),"0"===this.filesData[this.count].statusCode&&this.sequenceUpload(e)):--this.count}}setCSSClass(e){let t=this.cssClass;!m(this.cssClass)&&""!==this.cssClass&&(t=this.cssClass.replace(/\s+/g," ").trim()),!m(this.cssClass)&&""!==t&&j([this.uploadWrapper],t.split(t.indexOf(",")>-1?",":" "));let i=e;m(e)||(i=e.replace(/\s+/g," ").trim()),!m(e)&&""!==i&&Y([this.uploadWrapper],i.split(" "))}wireEvents(){O.add(this.browseButton,"click",this.browseButtonClick,this),O.add(this.element,"change",this.onSelectFiles,this),O.add(document,"click",this.removeFocus,this),this.keyboardModule=new Pn(this.uploadWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.isForm&&O.add(this.formElement,"reset",this.resetForm,this)}unWireEvents(){O.remove(this.browseButton,"click",this.browseButtonClick),O.remove(this.element,"change",this.onSelectFiles),O.remove(document,"click",this.removeFocus),this.isForm&&O.remove(this.formElement,"reset",this.resetForm),this.keyboardModule&&this.keyboardModule.destroy()}resetForm(){this.clearAll()}keyActionHandler(e){const t=e.target;if("enter"===e.action){if(e.target===this.clearButton)this.clearButtonClick();else if(e.target===this.uploadButton)this.uploadButtonClick();else if(e.target===this.browseButton)this.browseButtonClick();else if(t.classList.contains(Fa)){const i=this.getCurrentMetaData(null,e);i.file.statusCode="4",i.file.status=this.localizedTexts("pauseUpload"),this.abortUpload(i,!1)}else if(t.classList.contains(ry))this.resumeUpload(this.getCurrentMetaData(null,e),e);else if(t.classList.contains(kh)){const i=this.getCurrentMetaData(null,e);if(m(i)){const r=this.filesData[this.fileList.indexOf(e.target.parentElement)];this.retry(r)}else i.file.statusCode="1",i.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(i.file)}else this.removeFiles(e),t.classList.contains(cr)||this.browseButton.focus();e.preventDefault(),e.stopPropagation()}}getCurrentMetaData(e,t){let i,s;i=m(e)?this.filesData[this.fileList.indexOf(t.target.parentElement)]:e;for(let r=0;r<this.uploadMetaData.length;r++)this.uploadMetaData[r].file.name===i.name&&(s=this.uploadMetaData[r]);return s}removeFocus(){this.uploadWrapper&&this.listParent&&this.listParent.querySelector("."+X_)&&(document.activeElement.blur(),this.listParent.querySelector("."+X_).classList.remove(X_))}browseButtonClick(){this.element.click()}uploadButtonClick(){this.sequentialUpload?this.sequenceUpload(this.filesData):this.upload(this.filesData)}clearButtonClick(){this.clearAll(),this.sequentialUpload&&(this.count=-1),this.actionCompleteCount=0}bindDropEvents(){this.dropZoneElement&&(O.add(this.dropZoneElement,"drop",this.dropElement,this),O.add(this.dropZoneElement,"dragover",this.dragHover,this),O.add(this.dropZoneElement,"dragleave",this.onDragLeave,this),O.add(this.dropZoneElement,"paste",this.onPasteFile,this),O.add(this.dropZoneElement,"dragenter",this.onDragEnter,this))}unBindDropEvents(){this.dropZoneElement&&(O.remove(this.dropZoneElement,"drop",this.dropElement),O.remove(this.dropZoneElement,"dragover",this.dragHover),O.remove(this.dropZoneElement,"dragleave",this.onDragLeave),O.remove(this.dropZoneElement,"dragenter",this.onDragEnter))}onDragEnter(e){!this.enabled||(this.dropZoneElement.classList.add(Y_),this.dragCounter=this.dragCounter+1,e.preventDefault(),e.stopPropagation())}onDragLeave(){!this.enabled||(this.dragCounter=this.dragCounter-1,this.dragCounter||this.dropZoneElement.classList.remove(Y_))}dragHover(e){!this.enabled||("Default"!==this.dropEffect&&(e.dataTransfer.dropEffect=this.dropEffect.toLowerCase()),e.preventDefault(),e.stopPropagation())}dropElement(e){this.dragCounter=0,this.dropZoneElement.classList.remove(Y_),this.onSelectFiles(e),e.preventDefault(),e.stopPropagation()}onPasteFile(e){const t=e.clipboardData.items;if(1!==t.length)return;const i=[].slice.call(t)[0];"file"===i.kind&&i.type.match("^image/")&&this.renderSelectedFiles(e,[i.getAsFile()],!1,!0)}getSelectedFiles(e){const t=[],i=this.fileList[e],s=this.getFilesData(),r=+i.getAttribute("data-files-count");let o=0;for(let a=0;a<e;a++)o+=+this.fileList[a].getAttribute("data-files-count");for(let a=o;a<o+r;a++)t.push(s[a]);return t}removeFiles(e){if(!this.enabled)return;const i=this.fileList.indexOf(e.target.parentElement),s=this.fileList[i],r=this.isFormUpload(),o=r?this.getSelectedFiles(i):this.getFilesInArray(this.filesData[i]);if(!m(o)){if(e.target.classList.contains(cr)&&!r){if(o[0].statusCode="5",!m(s)){const a=s.querySelector("."+cr);Zc({target:a,width:"20px"}),Bl(a)}this.sequentialUpload&&this.uploadSequential(),s.classList.contains(oy)||this.checkActionComplete(!0)}else ae(e.target,"."+bE)||this.remove(o,!1,!1,!0,e);this.element.value="",this.checkActionButtonStatus()}}removeFilesData(e,t){let i;if(t)return void(this.showFileList||(i=this.filesData.indexOf(e),this.filesData.splice(i,1)));const s=this.getLiElement(e);m(s)||(ye(s),i=this.fileList.indexOf(s),this.fileList.splice(i,1),this.filesData.splice(i,1),0===this.fileList.length&&!m(this.listParent)&&(ye(this.listParent),this.listParent=null,this.removeActionButtons()),this.sequentialUpload&&i<=this.count&&--this.count)}removeUploadedFile(e,t,i,s){const r=e,o=new Ep(this.asyncSettings.removeUrl,"POST",!0,null);o.emitError=!1;const a=new FormData;o.beforeSend=u=>{t.currentRequest=o.httpRequest,i?this.removingEventCallback(t,a,r,e):this.trigger("removing",t,p=>{p.cancel?u.cancel=!0:this.removingEventCallback(p,a,r,e)})},o.onLoad=u=>(this.removeCompleted(u,r,s),{}),o.onError=u=>(this.removeFailed(u,r,s),{}),o.send(a)}removingEventCallback(e,t,i,s){const r=this.element.getAttribute("name"),o=this.getLiElement(s);if(!(m(o)||m(o.querySelector("."+Xc))&&m(o.querySelector("."+Yo)))){const a=o.querySelector("."+Xc)?o.querySelector("."+Xc):o.querySelector("."+Yo);Zc({target:a,width:"20px"}),Bl(a)}e.postRawFile&&!m(i.rawFile)&&""!==i.rawFile?t.append(r,i.rawFile,i.name):t.append(r,i.name),this.updateFormData(t,e.customFormData)}updateFormData(e,t){if(t.length>0&&t[0])for(let i=0;i<t.length;i++){const s=t[i],r=Object.keys(s).map(function(o){return s[o]});e.append(Object.keys(s)[0],r)}}updateCustomheader(e,t){if(t.length>0&&t[0])for(let i=0;i<t.length;i++){const s=t[i],r=Object.keys(s).map(function(o){return s[o]});e.setRequestHeader(Object.keys(s)[0],r)}}removeCompleted(e,t,i){const s=e&&e.currentTarget?this.getResponse(e):null,r=e.target;if(4===r.readyState&&r.status>=200&&r.status<=299){const o={e,response:s,operation:"remove",file:this.updateStatus(t,this.localizedTexts("removedSuccessMessage"),"2")};this.trigger("success",o),this.removeFilesData(t,i);const a=this.uploadedFilesData.indexOf(t);this.uploadedFilesData.splice(a,1),this.trigger("change",{files:this.uploadedFilesData})}else this.removeFailed(e,t,i)}removeFailed(e,t,i){const r={e,response:e&&e.currentTarget?this.getResponse(e):null,operation:"remove",file:this.updateStatus(t,this.localizedTexts("removedFailedMessage"),"0")};if(!i){const a=this.filesData.indexOf(t),u=this.fileList[a];if(u){u.classList.remove(mc),u.classList.add(Wr);const p=u.querySelector("."+Jr);p&&(p.classList.remove(mc),p.classList.add(Wr))}this.checkActionButtonStatus()}this.trigger("failure",r);const o=this.getLiElement(t);m(o)||m(o.querySelector("."+Xc))||(hl(o.querySelector("."+Xc)),ye(o.querySelector(".e-spinner-pane")))}getFilesFromFolder(e){this.filesEntries=[];const t=this.multiple?e.dataTransfer.items:[e.dataTransfer.items[0]];if(this.checkDirectoryUpload(t))for(let s=0;s<t.length;s++){const r=t[s].webkitGetAsEntry();if(r.isFile){const o=[];r.file(a=>{o.push({path:r.fullPath,file:a})}),this.renderSelectedFiles(e,o,!0)}else r.isDirectory&&this.traverseFileTree(r,e)}}checkDirectoryUpload(e){for(let t=0;e&&t<e.length;t++)if(e[t].webkitGetAsEntry().isDirectory)return!0;return!1}traverseFileTree(e,t){if(e.isFile)this.filesEntries.push(e);else if(e.isDirectory){const i=e.createReader();this.readFileFromDirectory(i,t)}}readFileFromDirectory(e,t){e.readEntries(i=>{for(let s=0;s<i.length;s++)this.traverseFileTree(i[s],t);this.pushFilesEntries(t),i.length&&this.readFileFromDirectory(e)})}pushFilesEntries(e){const t=[];for(let i=0;i<this.filesEntries.length;i++)this.filesEntries[i].file(s=>{this.filesEntries.length&&(t.push({path:this.filesEntries[i].fullPath,file:s}),i===this.filesEntries.length-1&&(this.filesEntries=[],this.renderSelectedFiles(e,t,!0)))})}onSelectFiles(e){if(!this.enabled)return;let t;if("drop"===e.type)if(this.directoryUpload)this.getFilesFromFolder(e);else{const i=this.sortFilesList=e.dataTransfer.files;"msie"!==this.browserName&&"edge"!==this.browserName&&"safari"!==this.browserName&&(this.element.files=i),i.length>0&&(t=this.multiple?this.sortFileList(i):[i[0]],this.renderSelectedFiles(e,t))}else t=[].slice.call(e.target.files),this.renderSelectedFiles(e,t)}getBase64(e){return new Promise((t,i)=>{const s=new FileReader;s.readAsDataURL(e),s.onload=()=>t(s.result),s.onerror=r=>i(r)})}renderSelectedFiles(e,t,i,s){this.base64String=[];const r={event:e,cancel:!1,filesData:[],isModified:!1,modifiedFilesData:[],progressInterval:"",isCanceled:!1,currentRequest:null,customFormData:null};if(t.length<1)return r.isCanceled=!0,void this.trigger("selected",r);this.flag=!0;let o=[];this.multiple||(this.clearData(!0),t=[t[0]]);for(let a=0;a<t.length;a++)this.updateInitialFileDetails(e,t,i?t[a].file:t[a],a,o,i,s);r.filesData=o,this.allowedExtensions.indexOf("*")>-1&&(this.allTypes=!0),this.allTypes||(o=this.checkExtension(o)),this.trigger("selected",r,a=>{this._internalRenderSelect(a,o)})}updateInitialFileDetails(e,t,i,s,r,o,a){const p={name:o?t[s].path.substring(1,t[s].path.length):a?Ks(i.name.substring(0,i.name.lastIndexOf(".")))+"."+this.getFileType(i.name):this.directoryUpload?t[s].webkitRelativePath:i.name,rawFile:i,size:i.size,status:this.localizedTexts("readyToUploadMessage"),type:this.getFileType(i.name),validationMessages:this.validatedFileSize(i.size),statusCode:"1",id:Ks(i.name.substring(0,i.name.lastIndexOf(".")))+"."+this.getFileType(i.name)};a&&(p.fileSource="paste"),p.status=""!==p.validationMessages.minSize?this.localizedTexts("invalidMinFileSize"):""!==p.validationMessages.maxSize?this.localizedTexts("invalidMaxFileSize"):p.status,(""!==p.validationMessages.minSize||""!==p.validationMessages.maxSize)&&(p.statusCode="0"),r.push(p)}_internalRenderSelect(e,t){if(!e.cancel){if(this.selectedFiles=this.selectedFiles.concat(t),this.btnTabIndex=this.disableKeyboardNavigation?"-1":"0",this.showFileList){if(e.isModified&&e.modifiedFilesData.length>0){for(let s=0;s<e.modifiedFilesData.length;s++)for(let r=0;r<t.length;r++)e.modifiedFilesData[s].id===t[r].id&&(e.modifiedFilesData[s].rawFile=t[r].rawFile);const i=this.allTypes?e.modifiedFilesData:this.checkExtension(e.modifiedFilesData);this.updateSortedFileList(i),this.filesData=i,(!this.isForm||this.allowUpload())&&this.checkAutoUpload(i)}else this.createFileList(t,!0),this.filesData=this.filesData.concat(t),(!this.isForm||this.allowUpload())&&this.checkAutoUpload(t);!m(e.progressInterval)&&""!==e.progressInterval&&(this.progressInterval=e.progressInterval)}else this.filesData=this.filesData.concat(t),this.autoUpload&&this.upload(this.filesData,!0);this.raiseActionComplete(),this.isFirstFileOnSelection=!0}}allowUpload(){let e=!1;return this.isForm&&!m(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl&&(e=!0),e}isFormUpload(){let e=!1;return this.isForm&&(m(this.asyncSettings.saveUrl)||""===this.asyncSettings.saveUrl)&&(m(this.asyncSettings.removeUrl)||""===this.asyncSettings.removeUrl)&&(e=!0),e}clearData(e){m(this.listParent)||(ye(this.listParent),this.listParent=null),"msie"!==this.browserName&&!e&&(this.element.value=""),this.fileList=[],this.filesData=[],this.removeActionButtons()}updateSortedFileList(e){const t=this.createElement("div",{id:"clonewrapper"});let s,i=-1;if(this.listParent){for(let o=0;o<this.listParent.querySelectorAll("li").length;o++){const a=this.listParent.querySelectorAll("li")[o];t.appendChild(a.cloneNode(!0))}s=this.listParent.querySelectorAll("li");for(const o of s)ye(o);this.removeActionButtons();const r=[].slice.call(t.childNodes);ye(this.listParent),this.listParent=null,this.fileList=[],this.createParentUL();for(let o=0;o<e.length;o++){for(let a=0;a<this.filesData.length;a++)this.filesData[a].name===e[o].name&&(this.listParent.appendChild(r[a]),O.add(r[a].querySelector(".e-icons"),"click",this.removeFiles,this),this.fileList.push(r[a]),i=o);i!==o&&this.createFileList([e[o]])}}else this.createFileList(e)}isBlank(e){return!e||/^\s*$/.test(e)}checkExtension(e){const t=e;if(!this.isBlank(this.allowedExtensions)){const i=[],s=this.allowedExtensions.split(",");for(const r of s)i.push(r.trim().toLocaleLowerCase());for(let r=0;r<e.length;r++)-1===i.indexOf(("."+e[r].type).toLocaleLowerCase())&&(e[r].status=this.localizedTexts("invalidFileType"),e[r].statusCode="0")}return t}validatedFileSize(e){let t="",i="";return e<this.minFileSize?t=this.localizedTexts("invalidMinFileSize"):e>this.maxFileSize?i=this.localizedTexts("invalidMaxFileSize"):(t="",i=""),{minSize:t,maxSize:i}}isPreLoadFile(e){let t=!1;for(let i=0;i<this.files.length;i++)this.files[i].name===e.name.slice(0,e.name.lastIndexOf("."))&&this.files[i].type===e.type&&(t=!0);return t}createCustomfileList(e){this.createParentUL();for(const t of e){const i=this.createElement("li",{className:yE,attrs:{"data-file-name":t.name}});this.uploadTemplateFn=this.templateComplier(this.template);const s=this.uploadTemplateFn(t,this,"template",this.element.id+"Template",this.isStringTemplate,null,i);s&&Pi([].slice.call(s),i);const r=e.indexOf(t),o={element:i,fileInfo:t,index:r,isPreload:this.isPreLoadFile(t)},a={element:i,fileInfo:t,index:r,isPreload:this.isPreLoadFile(t)};this.trigger("rendering",o),this.trigger("fileListRendering",a),this.listParent.appendChild(i),this.fileList.push(i)}this.renderReactTemplates()}createParentUL(){m(this.listParent)&&(this.listParent=this.createElement("ul",{className:gE}),this.uploadWrapper.appendChild(this.listParent))}formFileList(e,t){const i=this.createElement("li",{className:yE});i.setAttribute("data-files-count",e.length+"");const s=this.createElement("span",{className:Z_});let r;for(const y of e){const E=this.createElement("span",{className:Hl});E.innerHTML=this.getFileNameOnly(y.name);const _=this.createElement("span",{className:kD}),D=this.getFileType(y.name);if(_.innerHTML="."+D,D||_.classList.add("e-hidden"),this.enableRtl){const L=this.createElement("span",{className:MD});L.appendChild(_),L.appendChild(E),s.appendChild(L)}else s.appendChild(E),s.appendChild(_);this.truncateName(E),r=this.formValidateFileInfo(y,i)}i.appendChild(s),this.setListToFileInfo(e,i);const o=this.listParent.querySelectorAll("li").length,a=this.createElement("span");if(i.classList.contains(ay)?(a.classList.add(Jr),a.classList.add(ay),a.innerText=e.length>1?this.localizedTexts("invalidFileSelection"):r):(a.classList.add(e.length>1?"e-file-information":vE),a.innerText=e.length>1?this.localizedTexts("totalFiles")+": "+e.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(e)):this.bytesToSize(e[0].size),this.createFormInput(e)),s.appendChild(a),m(i.querySelector(".e-icons"))){const y=this.createElement("span",{className:"e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&y.classList.add("e-msie"),y.setAttribute("title",this.localizedTexts("remove")),i.appendChild(s),i.appendChild(y),O.add(y,"click",this.removeFiles,this),y.classList.add(Yo)}const u={element:i,fileInfo:this.mergeFileInfo(e,i),index:o,isPreload:this.isPreLoadFile(this.mergeFileInfo(e,i))},p={element:i,fileInfo:this.mergeFileInfo(e,i),index:o,isPreload:this.isPreLoadFile(this.mergeFileInfo(e,i))};this.trigger("rendering",u),this.trigger("fileListRendering",p),this.listParent.appendChild(i),this.fileList.push(i)}formValidateFileInfo(e,t){let i=e.status;const s=this.validatedFileSize(e.size);(""!==s.minSize||""!==s.maxSize)&&(this.addInvalidClass(t),i=""!==s.minSize?this.localizedTexts("invalidMinFileSize"):""!==s.maxSize?this.localizedTexts("invalidMaxFileSize"):i);const r=this.checkExtension(this.getFilesInArray(e))[0].status;return r===this.localizedTexts("invalidFileType")&&(this.addInvalidClass(t),i=r),i}addInvalidClass(e){e.classList.add(ay)}createFormInput(e){const t=this.element.cloneNode(!0);t.classList.add("e-hidden-file-input");for(const i of e)i.input=t;t.setAttribute("name",this.uploaderName),this.uploadWrapper.querySelector("."+rL).appendChild(t),"msie"!==this.browserName&&"edge"!==this.browserName&&(this.element.value="")}getFileSize(e){let t=0;for(const i of e)t+=i.size;return t}mergeFileInfo(e,t){const i={name:"",rawFile:"",size:0,status:"",type:"",validationMessages:{minSize:"",maxSize:""},statusCode:"1",list:t},s=[];let r="";for(const o of e)s.push(o.name),r=o.type;return i.name=s.join(", "),i.size=this.getFileSize(e),i.type=r,i.status=this.statusForFormUpload(e,t),i}statusForFormUpload(e,t){let s,i=!0;for(const r of e){s=r.status;const o=this.validatedFileSize(r.size);(""!==o.minSize||""!==o.maxSize)&&(i=!1,s=""!==o.minSize?this.localizedTexts("invalidMinFileSize"):""!==o.maxSize?this.localizedTexts("invalidMaxFileSize"):s);const a=this.checkExtension(this.getFilesInArray(r))[0].status;a===this.localizedTexts("invalidFileType")&&(i=!1,s=a)}return i?s=this.localizedTexts("totalFiles")+": "+e.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(e)):(t.classList.add(ay),s=e.length>1?this.localizedTexts("invalidFileSelection"):s),s}formCustomFileList(e,t){this.createParentUL();const i=this.createElement("li",{className:yE});i.setAttribute("data-files-count",e.length+""),this.setListToFileInfo(e,i);const s=this.mergeFileInfo(e,i);i.setAttribute("data-file-name",s.name),this.uploadTemplateFn=this.templateComplier(this.template);const r=this.uploadTemplateFn(s,this,"template",this.element.id+"Template",this.isStringTemplate,null,i);r&&Pi([].slice.call(r),i);const o=this.listParent.querySelectorAll("li").length;i.classList.contains(ay)||this.createFormInput(e);const a={element:i,fileInfo:s,index:o,isPreload:this.isPreLoadFile(s)},u={element:i,fileInfo:s,index:o,isPreload:this.isPreLoadFile(s)};this.trigger("rendering",a),this.trigger("fileListRendering",u),this.listParent.appendChild(i),this.fileList.push(i),this.renderReactTemplates()}createFileList(e,t){if(this.createParentUL(),""===this.template||m(this.template))if(this.isFormUpload())this.uploadWrapper.classList.add(LD),this.formFileList(e,this.element.files);else for(const i of e){const s=this.createElement("li",{className:yE,attrs:{"data-file-name":i.name,"data-files-count":"1"}}),r=this.createElement("span",{className:Z_}),o=this.createElement("span",{className:Hl,attrs:{title:i.name}});o.innerHTML=this.getFileNameOnly(i.name);const a=this.createElement("span",{className:kD}),u=this.getFileType(i.name);if(a.innerHTML="."+u,u||a.classList.add("e-hidden"),this.enableRtl){const H=this.createElement("span",{className:MD});H.appendChild(a),H.appendChild(o),r.appendChild(H)}else r.appendChild(o),r.appendChild(a);const p=this.createElement("span",{className:vE});p.innerHTML=this.bytesToSize(i.size),r.appendChild(p);const y=this.createElement("span",{className:Jr});r.appendChild(y),y.innerHTML=i.status,s.appendChild(r);const E=this.createElement("span",{className:" e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&E.classList.add("e-msie"),E.setAttribute("title",this.localizedTexts("remove")),s.appendChild(E),O.add(E,"click",this.removeFiles,this),"2"===i.statusCode?(y.classList.add(mc),E.classList.add(Xc),E.setAttribute("title",this.localizedTexts("delete"))):"1"!==i.statusCode&&(y.classList.remove(mc),y.classList.add(cL)),this.autoUpload&&"1"===i.statusCode&&""!==this.asyncSettings.saveUrl&&(y.innerHTML=""),E.classList.contains(Xc)||E.classList.add(Yo);const _=e.indexOf(i),D={element:s,fileInfo:i,index:_,isPreload:this.isPreLoadFile(i)},L={element:s,fileInfo:i,index:_,isPreload:this.isPreLoadFile(i)};this.trigger("rendering",D),this.trigger("fileListRendering",L),this.listParent.appendChild(s),this.fileList.push(s),this.truncateName(o);const V=this.flag;this.isPreLoadFile(i)&&(this.flag=!1,this.checkActionComplete(!0),this.flag=V)}else this.isFormUpload()?(this.uploadWrapper.classList.add(LD),this.formCustomFileList(e,this.element.files)):this.createCustomfileList(e)}getSlicedName(e){const t=e.textContent;e.dataset.tail=t.slice(t.length-10)}setListToFileInfo(e,t){for(const i of e)i.list=t}truncateName(e){("edge"!==this.browserName&&e.offsetWidth<e.scrollWidth||e.offsetWidth+1<e.scrollWidth)&&this.getSlicedName(e)}getFileType(e){let t;const i=e.lastIndexOf(".");return i>=0&&(t=e.substring(i+1)),t||""}getFileNameOnly(e){let t=this.getFileType(e);return e.split("."+t)[0]}setInitialAttributes(){if(this.initialAttr.accept&&this.element.setAttribute("accept",this.initialAttr.accept),this.initialAttr.disabled&&this.element.setAttribute("disabled","disabled"),this.initialAttr.multiple){const e=document.createAttribute("multiple");this.element.setAttributeNode(e)}}filterfileList(e){const t=[];let i;for(let s=0;s<e.length;s++)i=this.getLiElement(e[s]),i.classList.contains(mc)||t.push(e[s]);return t}updateStatus(e,t,i,s=!0){if(!(""===t||m(t))&&!(""===i||m(i))&&(e.status=t,e.statusCode=i),s){const r=this.getLiElement(e);m(r)||!m(r.querySelector("."+Jr))&&""!==t&&!m(t)&&(r.querySelector("."+Jr).textContent=t)}return e}getLiElement(e){let t;for(let i=0;i<this.filesData.length;i++)!m(e)&&(m(this.filesData[i].id)||m(e.id)?this.filesData[i].name===e.name:this.filesData[i].name===e.name&&this.filesData[i].id===e.id)&&(t=i);return this.fileList[t]}createProgressBar(e){const t=this.createElement("span",{className:Rp}),i=this.createElement("progressbar",{className:Cb,attrs:{value:"0",max:"100"}}),s=this.createElement("span",{className:"e-progress-inner-wrap"});i.setAttribute("style","width: 0%");const r=this.createElement("span",{className:K_});r.textContent="0%",s.appendChild(i),t.appendChild(s),t.appendChild(r),e.querySelector("."+Z_).appendChild(t)}updateProgressbar(e,t){if(!isNaN(Math.round(e.loaded/e.total*100))&&!m(t.querySelector("."+Cb)))if(m(this.progressInterval)||""===this.progressInterval)this.changeProgressValue(t,Math.round(e.loaded/e.total*100).toString()+"%");else{const i=Math.round(e.loaded/e.total*100)%parseInt(this.progressInterval,10);(0===i||100===i)&&this.changeProgressValue(t,Math.round(e.loaded/e.total*100).toString()+"%")}}changeProgressValue(e,t){e.querySelector("."+Cb).setAttribute("style","width:"+t),e.querySelector("."+K_).textContent=t}uploadInProgress(e,t,i,s){const r=this.getLiElement(t);if(m(r)&&!i)return;if(m(r))this.cancelUploadingFile(t,e,s);else{"5"===t.statusCode&&this.cancelUploadingFile(t,e,s,r),!(r.querySelectorAll("."+Rp).length>0)&&r.querySelector("."+Jr)&&(r.querySelector("."+Jr).classList.add(Qc),this.createProgressBar(r),this.updateProgressBarClasses(r,Qc),r.querySelector("."+Jr).classList.remove(Wr)),this.updateProgressbar(e,r);const a=r.querySelector("."+Yo);m(a)||(a.classList.add(cr,Qc),a.setAttribute("title",this.localizedTexts("abort")),a.classList.remove(Yo))}const o={e,operation:"upload",file:this.updateStatus(t,this.localizedTexts("inProgress"),"3")};this.trigger("progress",o)}cancelUploadingFile(e,t,i,s){"5"===e.statusCode&&this.trigger("canceling",{event:t,fileData:e,cancel:!1,customFormData:[]},o=>{if(o.cancel){if(e.statusCode="3",!m(s)){const a=s.querySelector("."+cr);m(a)||(hl(a),ye(s.querySelector(".e-spinner-pane")))}}else{i.emitError=!1,i.httpRequest.abort();const a=new FormData;if("5"===e.statusCode){const u=this.element.getAttribute("name");a.append(u,e.name),a.append("cancel-uploading",e.name),this.updateFormData(a,o.customFormData);const p=new Ep(this.asyncSettings.removeUrl,"POST",!0,null);p.emitError=!1,p.onLoad=y=>(this.removecanceledFile(y,e),{}),p.send(a)}}})}removecanceledFile(e,t){const i=this.getLiElement(t);if(i.querySelector("."+kh)||m(i.querySelector("."+cr)))return;this.updateStatus(t,this.localizedTexts("fileUploadCancel"),"5"),this.renderFailureState(e,t,i);const s=i.querySelector("."+Yo);m(i)||(hl(s),m(i.querySelector(".e-spinner-pane"))||ye(i.querySelector(".e-spinner-pane")));const r=e&&e.currentTarget?this.getResponse(e):null;this.trigger("success",{event:e,response:r,operation:"cancel",file:t})}renderFailureState(e,t,i){this.updateProgressBarClasses(i,Wr),this.removeProgressbar(i,"failure"),m(i.querySelector(".e-file-status"))||i.querySelector(".e-file-status").classList.add(Wr);const s=i.querySelector("."+cr);m(s)||(s.classList.remove(cr,Qc),s.classList.add(Yo),s.setAttribute("title",this.localizedTexts("remove")),this.pauseButton=this.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}}),s.parentElement.insertBefore(this.pauseButton,s),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),i.querySelector("."+kh).addEventListener("click",o=>{this.reloadcanceledFile(o,t,i,!1)},!1))}reloadcanceledFile(e,t,i,s){t.statusCode="1",t.status=this.localizedTexts("readyToUploadMessage"),s||(m(i.querySelector("."+Jr))||i.querySelector("."+Jr).classList.remove(Wr),m(i.querySelector("."+kh))||ye(i.querySelector("."+kh)),this.pauseButton=null),i.classList.add(oy),this.upload([t])}uploadComplete(e,t,i){const s=e.target;if(4===s.readyState&&s.status>=200&&s.status<=299){const r=this.getLiElement(t);if(m(r)&&(!i||m(i)))return;if(!m(r)){this.updateProgressBarClasses(r,mc),this.removeProgressbar(r,"success");const o=r.querySelector("."+cr);m(o)||(o.classList.add(Xc),o.setAttribute("title",this.localizedTexts("delete")),o.classList.remove(cr),o.classList.remove(Qc))}this.raiseSuccessEvent(e,t)}else this.uploadFailed(e,t)}getResponse(e){const t=e.currentTarget;return{readyState:t.readyState,statusCode:t.status,statusText:t.statusText,headers:t.getAllResponseHeaders(),withCredentials:t.withCredentials}}raiseSuccessEvent(e,t){const i=e&&e.currentTarget?this.getResponse(e):null,s=this.localizedTexts("uploadSuccessMessage"),r={e,response:i,operation:"upload",file:this.updateStatus(t,s,"2",!1),statusText:s},o=this.getLiElement(t);if(!m(o)){const a=o.querySelector("."+bE);m(a)||(hl(o),ye(a))}this.trigger("success",r,a=>{this.updateStatus(t,a.statusText,"2"),this.uploadedFilesData.push(t),this.trigger("change",{file:this.uploadedFilesData}),this.checkActionButtonStatus(),this.fileList.length>0&&(this.getLiElement(t).classList.contains(oy)?this.getLiElement(t).classList.remove(oy):(this.uploadSequential(),this.checkActionComplete(!0)))})}uploadFailed(e,t){const i=this.getLiElement(t),s=e&&e.currentTarget?this.getResponse(e):null,r=this.localizedTexts("uploadFailedMessage"),o={e,response:s,operation:"upload",file:this.updateStatus(t,r,"0",!1),statusText:r};m(i)||this.renderFailureState(e,t,i),this.trigger("failure",o,a=>{this.updateStatus(t,a.statusText,"0"),this.checkActionButtonStatus(),this.uploadSequential(),this.checkActionComplete(!0)})}uploadSequential(){this.sequentialUpload&&(this.autoUpload?this.checkAutoUpload(this.filesData):this.uploadButtonClick())}checkActionComplete(e){e?++this.actionCompleteCount:--this.actionCompleteCount,this.raiseActionComplete()}raiseActionComplete(){if(this.filesData.length===this.actionCompleteCount&&this.flag){this.flag=!1;const e={fileData:[]};e.fileData=this.getSelectedFileStatus(this.selectedFiles),this.trigger("actionComplete",e)}}getSelectedFileStatus(e){const t=[];let i=0;for(let s=0;s<e.length;s++){const r=e[s];for(let o=0;o<this.filesData.length;o++)this.filesData[o].name===r.name&&(t[i]=this.filesData[o],++i)}return t}updateProgressBarClasses(e,t){const i=e.querySelector("."+Cb);m(i)||i.classList.add(t)}removeProgressbar(e,t){m(e.querySelector("."+Rp))||(this.progressAnimation=new Wn({duration:1250}),this.progressAnimation.animate(e.querySelector("."+Rp),{name:"FadeOut"}),this.progressAnimation.animate(e.querySelector("."+K_),{name:"FadeOut"}),setTimeout(()=>{this.animateProgressBar(e,t)},750))}animateProgressBar(e,t){"success"===t?(e.classList.add(mc),m(e.querySelector("."+Jr))||(e.querySelector("."+Jr).classList.remove(Qc),this.progressAnimation.animate(e.querySelector("."+Jr),{name:"FadeIn"}),e.querySelector("."+Jr).classList.add(mc))):m(e.querySelector("."+Jr))||(e.querySelector("."+Jr).classList.remove(Qc),this.progressAnimation.animate(e.querySelector("."+Jr),{name:"FadeIn"}),e.querySelector("."+Jr).classList.add(Wr)),e.querySelector("."+Rp)&&ye(e.querySelector("."+Rp))}setExtensions(e){""===e||m(e)?this.element.removeAttribute("accept"):this.element.setAttribute("accept",e)}templateComplier(e){if(e)try{if(at(e,document).length)return xs(X(e,document).innerHTML.trim())}catch(t){return xs(e)}}setRTL(){this.enableRtl?j([this.uploadWrapper],"e-rtl"):Y([this.uploadWrapper],"e-rtl")}localizedTexts(e){return this.l10n.setLocale(this.locale),this.l10n.getConstant(e)}setControlStatus(){this.enabled?(this.uploadWrapper.classList.contains(CE)&&this.uploadWrapper.classList.remove(CE),!m(this.browseButton)&&this.element.hasAttribute("disabled")&&(this.element.removeAttribute("disabled"),this.browseButton.removeAttribute("disabled")),!m(this.clearButton)&&this.clearButton.hasAttribute("disabled")&&this.clearButton.removeAttribute("disabled"),!m(this.uploadButton)&&this.uploadButton.hasAttribute("disabled")&&this.uploadButton.hasAttribute("disabled")):(this.uploadWrapper.classList.add(CE),this.element.setAttribute("disabled","disabled"),this.browseButton.setAttribute("disabled","disabled"),m(this.clearButton)||this.clearButton.setAttribute("disabled","disabled"),m(this.uploadButton)||this.uploadButton.setAttribute("disabled","disabled"))}checkHTMLAttributes(e){const t=e?m(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["accept","multiple","disabled"];for(const i of t)if(!m(this.element.getAttribute(i)))switch(i){case"accept":(m(this.uploaderOptions)||void 0===this.uploaderOptions.allowedExtensions||e)&&(this.setProperties({allowedExtensions:this.element.getAttribute("accept")},!e),this.initialAttr.accept=this.allowedExtensions);break;case"multiple":if(m(this.uploaderOptions)||void 0===this.uploaderOptions.multiple||e){const s="multiple"===this.element.getAttribute(i)||""===this.element.getAttribute(i)||"true"===this.element.getAttribute(i);this.setProperties({multiple:s},!e),this.initialAttr.multiple=!0}break;case"disabled":if(m(this.uploaderOptions)||void 0===this.uploaderOptions.enabled||e){const s=!("disabled"===this.element.getAttribute(i)||""===this.element.getAttribute(i)||"true"===this.element.getAttribute(i));this.setProperties({enabled:s},!e),this.initialAttr.disabled=!0}}}chunkUpload(e,t,i){const r=Math.min(this.asyncSettings.chunkSize,e.size),a=e.rawFile.slice(0,r);this.sendRequest(e,{chunkIndex:0,blob:a,file:e,start:0,end:r,retryCount:0,request:null},t,i)}sendRequest(e,t,i,s){const r=new FormData,o=e.rawFile.slice(t.start,t.end);r.append("chunkFile",o,e.name),r.append(this.uploaderName,o,e.name),r.append("chunk-index",t.chunkIndex.toString()),r.append("chunkIndex",t.chunkIndex.toString());const a=Math.max(Math.ceil(e.size/this.asyncSettings.chunkSize),1);r.append("total-chunk",a.toString()),r.append("totalChunk",a.toString());const u=new Ep({url:this.asyncSettings.saveUrl,type:"POST",async:!0,contentType:null});u.emitError=!1,u.onLoad=y=>(this.chunkUploadComplete(y,t,i),{}),u.onUploadProgress=y=>(this.chunkUploadInProgress(y,t,i),{});const p={fileData:e,customFormData:[],cancel:!1,chunkSize:0===this.asyncSettings.chunkSize?null:this.asyncSettings.chunkSize};u.beforeSend=y=>{p.currentRequest=u.httpRequest,p.currentChunkIndex=t.chunkIndex,this.trigger(0===p.currentChunkIndex?"uploading":"chunkUploading",p,E=>{this.uploadingEventCallback(r,E,y,e)})},u.onError=y=>(this.chunkUploadFailed(y,t,i),{}),u.send(r),t.request=u}uploadingEventCallback(e,t,i,s){t.cancel?this.eventCancelByArgs(i,t,s):this.updateFormData(e,t.customFormData)}eventCancelByArgs(e,t,i){if(e.cancel=!0,"5"===t.fileData.statusCode)return;t.fileData.statusCode="5",t.fileData.status=this.localizedTexts("fileUploadCancel");const s=this.getLiElement(t.fileData);if(s){m(s.querySelector("."+Jr))||(s.querySelector("."+Jr).innerHTML=this.localizedTexts("fileUploadCancel"),s.querySelector("."+Jr).classList.add(Wr)),this.pauseButton=this.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}});const r=s.querySelector("."+Yo);r&&r.parentElement.insertBefore(this.pauseButton,r),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),this.pauseButton.addEventListener("click",o=>{this.reloadcanceledFile(o,i,s)},!1),this.checkActionButtonStatus()}}checkChunkUpload(){return!(this.asyncSettings.chunkSize<=0||m(this.asyncSettings.chunkSize))}chunkUploadComplete(e,t,i){const s=e.target;let r;if(4===s.readyState&&s.status>=200&&s.status<300){const o=e&&e.currentTarget?this.getResponse(e):null,a=Math.max(Math.ceil(t.file.size/this.asyncSettings.chunkSize),1);if(this.trigger("chunkSuccess",{event:e,file:t.file,chunkIndex:t.chunkIndex,totalChunk:a,chunkSize:this.asyncSettings.chunkSize,response:o}),(m(i)||!i)&&(r=this.getLiElement(t.file)),this.updateMetaData(t),t.end===t.file.size&&(t.file.statusCode="3"),"5"===t.file.statusCode)this.trigger("canceling",{event:e,fileData:t.file,cancel:!1,customFormData:[]},y=>{if(y.cancel){t.file.statusCode="3";const E=r.querySelector("."+cr);!m(r)&&!m(E)&&(hl(E),ye(r.querySelector(".e-spinner-pane"))),this.sendNextRequest(t)}else{t.request.emitError=!1,s.abort();const E=new FormData,_=this.element.getAttribute("name");E.append(_,t.file.name),E.append("cancel-uploading",t.file.name),E.append("cancelUploading",t.file.name),this.updateFormData(E,y.customFormData);const D=new Ep(this.asyncSettings.removeUrl,"POST",!0,null);D.emitError=!1,D.onLoad=L=>(this.removeChunkFile(L,t,i),{}),D.send(E)}});else{if(a-1===t.chunkIndex&&a>t.chunkIndex){const p=this.pausedData.indexOf(t);return p>=0&&this.pausedData.splice(p,1),m(this.template)&&(m(i)||!i)&&r&&(r&&!m(r.querySelector("."+Fa))&&ye(r.querySelector("."+Fa)),this.removeChunkProgressBar(t)),void this.raiseSuccessEvent(e,t.file)}"4"!==t.file.statusCode&&this.sendNextRequest(t)}}else this.chunkUploadFailed(e,t)}sendNextRequest(e){e.start=e.end,e.end+=this.asyncSettings.chunkSize,e.end=Math.min(e.end,e.file.size),e.chunkIndex+=1,this.sendRequest(e.file,e)}removeChunkFile(e,t,i){if(m(this.template)&&m(i)&&!i){const s=this.getLiElement(t.file),r=s.querySelector("."+cr),o=r;this.updateStatus(t.file,this.localizedTexts("fileUploadCancel"),"5"),this.updateProgressBarClasses(s,Wr),this.removeProgressbar(s,"failure"),r&&r.classList.remove(cr),r&&r.classList.add(Yo),r&&r.setAttribute("title",this.localizedTexts("remove"));const a=s.querySelector("."+Fa);a&&a.classList.add(kh),a&&a.classList.remove(Fa),a&&a.setAttribute("title",this.localizedTexts("retry")),!m(s)&&!m(r)&&!m(s.querySelector(".e-spinner-pane"))&&(hl(o),ye(s.querySelector(".e-spinner-pane")))}}pauseUpload(e,t,i){e.file.statusCode="4",e.file.status=this.localizedTexts("pause"),this.updateMetaData(e);const s={event:t||null,file:e.file,chunkIndex:e.chunkIndex,chunkCount:Math.round(e.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.abortUpload(e,i,s)}abortUpload(e,t,i){"4"!==e.file.statusCode&&(e.request.emitError=!1,e.request.httpRequest.abort());const s=this.getLiElement(e.file);if(m(this.template)&&(m(t)||!t)){const r=s.querySelector("."+Fa);r.classList.remove(Fa),r.classList.add(ry),r.setAttribute("title",this.localizedTexts("resume")),r.nextElementSibling.classList.add(Yo),r.nextElementSibling.classList.remove(cr),r.nextElementSibling.setAttribute("title",this.localizedTexts("remove"))}for(let r=0;r<this.pausedData.length;r++)this.pausedData[r].file.name===e.file.name&&this.pausedData.splice(r,1);this.pausedData.push(e),this.trigger("pausing",i)}resumeUpload(e,t,i){const s=this.getLiElement(e.file);let r;m(s)||(r=s.querySelector("."+ry)),!m(r)&&(m(i)||!i)&&(r.classList.remove(ry),r.classList.add(Fa),r.setAttribute("title",this.localizedTexts("pause")),r.nextElementSibling.classList.remove(Yo),r.nextElementSibling.classList.add(cr),r.nextElementSibling.setAttribute("title",this.localizedTexts("abort"))),e.file.status=this.localizedTexts("inProgress"),e.file.statusCode="3",this.updateMetaData(e);const o={event:t||null,file:e.file,chunkIndex:e.chunkIndex,chunkCount:Math.round(e.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.trigger("resuming",o);for(let a=0;a<this.pausedData.length;a++)this.pausedData[a].end===this.pausedData[a].file.size?this.chunkUploadComplete(t,e,i):this.pausedData[a].file.name===e.file.name&&(this.pausedData[a].start=this.pausedData[a].end,this.pausedData[a].end=this.pausedData[a].end+this.asyncSettings.chunkSize,this.pausedData[a].end=Math.min(this.pausedData[a].end,this.pausedData[a].file.size),this.pausedData[a].chunkIndex=this.pausedData[a].chunkIndex+1,this.sendRequest(this.pausedData[a].file,this.pausedData[a],i))}updateMetaData(e){-1===this.uploadMetaData.indexOf(e)||this.uploadMetaData.splice(this.uploadMetaData.indexOf(e),1),this.uploadMetaData.push(e)}removeChunkProgressBar(e){const t=this.getLiElement(e.file);if(!m(t)){this.updateProgressBarClasses(t,mc),this.removeProgressbar(t,"success");const i=t.querySelector("."+cr);m(i)||(i.classList.add(Xc),i.setAttribute("title",this.localizedTexts("delete")),i.classList.remove(cr,Qc))}}chunkUploadFailed(e,t,i){const s=Math.max(Math.ceil(t.file.size/this.asyncSettings.chunkSize),1);let r;m(this.template)&&(m(i)||!i)&&(r=this.getLiElement(t.file));const o=e&&e.currentTarget?this.getResponse(e):null;this.trigger("chunkFailure",{event:e,file:t.file,chunkIndex:t.chunkIndex,totalChunk:s,chunkSize:this.asyncSettings.chunkSize,cancel:!1,response:o},u=>{if(!u.cancel)if(t.retryCount<this.asyncSettings.retryCount)setTimeout(()=>{this.retryRequest(r,t,i)},this.asyncSettings.retryAfterDelay);else{if(!m(r)){const _=r.querySelector("."+Fa)?r.querySelector("."+Fa):r.querySelector("."+ry);m(_)||(_.classList.add(kh),_.classList.remove(Fa,ry)),this.updateProgressBarClasses(r,Wr),this.removeProgressbar(r,"failure"),r.querySelector(".e-icons").classList.remove(Qc);const D=r.querySelector("."+cr)?r.querySelector("."+cr):r.querySelector("."+Yo);D.classList.remove(cr),m(r.querySelector("."+Fa))||ye(r.querySelector("."+Fa)),t.start>0?(D.classList.add(Xc),D.setAttribute("title",this.localizedTexts("delete"))):(D.classList.add(Yo),D.setAttribute("title",this.localizedTexts("remove")))}t.retryCount=0;const p=t.file,y=this.localizedTexts("uploadFailedMessage"),E={e,response:o,operation:"upload",file:this.updateStatus(p,y,"0",!1),statusText:y};this.trigger("failure",E,_=>{this.updateStatus(p,_.statusText,"0"),this.uploadSequential(),this.checkActionComplete(!0)})}})}retryRequest(e,t,i){m(this.template)&&(m(i)||!i)&&e&&this.updateProgressBarClasses(e,Wr),t.retryCount+=1,this.sendRequest(t.file,t)}checkPausePlayAction(e){const t=e.target,s=this.fileList.indexOf(e.target.parentElement),o=this.getCurrentMetaData(this.filesData[s]);t.classList.contains(Fa)?this.pauseUpload(o,e):t.classList.contains(ry)?this.resumeUpload(o,e):t.classList.contains(kh)&&(o.file.status===this.localizedTexts("fileUploadCancel")?this.retryUpload(o,!1):this.retryUpload(o,!0))}retryUpload(e,t){t?(e.end=e.end+this.asyncSettings.chunkSize,e.start=e.start+this.asyncSettings.chunkSize,this.sendRequest(e.file,e)):(e.file.statusCode="1",e.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(e.file)),this.getLiElement(e.file).classList.add(oy)}chunkUploadInProgress(e,t,i){if("4"===t.file.statusCode)return;"4"!==t.file.statusCode&&"5"!==t.file.statusCode&&(t.file.statusCode="3",t.file.status=this.localizedTexts("inProgress")),this.updateMetaData(t);const s=this.getLiElement(t.file);if(m(s))return;const r=s.querySelector("."+kh);if(m(r)||(r.classList.add(Fa),r.setAttribute("title",this.localizedTexts("pause")),r.classList.remove(kh)),!m(s)){if(!(s.querySelectorAll("."+Rp).length>0)){const o=s.querySelector("."+Jr);m(this.template)&&(o.classList.add(Qc),o.classList.remove(Wr),this.createProgressBar(s),this.updateProgressBarClasses(s,Qc));const a=s.querySelector("."+Yo)?s.querySelector("."+Yo):s.querySelector("."+Xc);m(a)||(a.classList.add(cr),a.setAttribute("title",this.localizedTexts("abort")),a.classList.remove(Yo))}if(!isNaN(Math.round(e.loaded/e.total*100))&&m(this.template)&&"4"!==t.file.statusCode){let o,a=Math.ceil(t.file.size/this.asyncSettings.chunkSize)-1;this.asyncSettings.chunkSize&&a&&(o=Math.round(t.chunkIndex/a*100),this.changeProgressValue(s,o.toString()+"%"))}0===t.chunkIndex&&this.checkActionButtonStatus()}if(m(s.querySelector("."+Fa))&&m(this.template)&&m(s.querySelector("."+Xc))){this.pauseButton=this.createElement("span",{className:"e-icons e-file-pause-btn",attrs:{tabindex:this.btnTabIndex}}),"msie"===this.browserName&&this.pauseButton.classList.add("e-msie");const o=s.querySelector("."+cr);o.parentElement.insertBefore(this.pauseButton,o),this.pauseButton.setAttribute("title",this.localizedTexts("pause")),this.pauseButton.addEventListener("click",a=>{this.checkPausePlayAction(a)},!1)}}bytesToSize(e){let t=-1;if(!e)return"0.0 KB";do{e/=1024,t++}while(e>99);return t>=2&&(e*=1024,t=1),Math.max(e,0).toFixed(1)+" "+["KB","MB"][t]}sortFileList(e){const t=e=e||this.sortFilesList,i=[];for(let o=0;o<t.length;o++)i.push(t[o].name);const s=i.sort(),r=[];for(const o of s)for(let a=0;a<t.length;a++)o===t[a].name&&r.push(t[a]);return r}destroy(){this.element.value=null,this.clearTemplate(),this.clearAll(),this.unWireEvents(),this.unBindDropEvents(),this.multiple&&this.element.removeAttribute("multiple"),this.enabled||this.element.removeAttribute("disabled"),this.element.removeAttribute("accept"),this.setInitialAttributes();const e=["aria-label","directory","webkitdirectory","tabindex"];for(const t of e)this.element.removeAttribute(t);m(this.uploadWrapper)||(this.uploadWrapper.parentElement.appendChild(this.element),ye(this.uploadWrapper)),this.uploadWrapper=null,super.destroy()}upload(e,t){if(e=e||this.filesData,this.sequentialUpload&&(this.isFirstFileOnSelection||t))this.sequenceUpload(e);else{const i=this.getFilesInArray(e);this.trigger("beforeUpload",{customFormData:[],currentRequest:null,cancel:!1},r=>{r.cancel||this.uploadFiles(i,t)})}}getFilesInArray(e){let t=[];return e instanceof Array?t=e:t.push(e),t}serverReadFileBase64(e,t,i){return new Promise((s,r)=>{const o=this.fileStreams[e].rawFile;try{const a=new FileReader;a.onload=(u=a,()=>{try{const p=u.result,y=p?p.split(";base64,")[1]:null;s(y)}catch(p){r(p)}}),a.readAsDataURL(o.slice(t,t+i))}catch(a){r(a)}var u})}uploadFileCount(e){const t=this.filesData;return t&&0!==t.length?t.length:-1}getFileRead(e,t){const i=this.filesData;if(!i||0===i.length)return-1;const s=i[e],r=this.newFileRef++;return this.fileStreams[r]=s,r}getFileInfo(e,t){const i=this.filesData;return i&&0!==i.length&&i[e]?this.filesData[e]:null}uploadFiles(e,t){let i=[];if(""!==this.asyncSettings.saveUrl&&!m(this.asyncSettings.saveUrl)){if(!t||m(t))if(this.multiple)i=this.filterfileList(e);else{const s=[];s.push(e[0]),i=this.filterfileList(s)}else i=e;for(let s=0;s<i.length;s++)this.uploadFilesRequest(i,s,t)}}uploadFilesRequest(e,t,i){const s=this.checkChunkUpload(),r=new Ep(this.asyncSettings.saveUrl,"POST",!0,null);r.emitError=!1;const o={fileData:e[t],customFormData:[],cancel:!1},a=new FormData;if(r.beforeSend=u=>{o.currentRequest=r.httpRequest,this.trigger("uploading",o,p=>{p.cancel&&this.eventCancelByArgs(u,p,e[t]),this.updateFormData(a,p.customFormData)})},"1"===e[t].statusCode){const u=this.element.getAttribute("name");a.append(u,e[t].rawFile,e[t].name),s&&e[t].size>this.asyncSettings.chunkSize?this.chunkUpload(e[t],i,t):(r.onLoad=p=>(o.cancel||this.uploadComplete(p,e[t],i),{}),r.onUploadProgress=p=>(o.cancel||this.uploadInProgress(p,e[t],i,r),{}),r.onError=p=>(this.uploadFailed(p,e[t]),{}),r.send(a))}}spliceFiles(e){const t=this.fileList[e],i=this.getFilesData(),s=+t.getAttribute("data-files-count");let r=0;for(let a=0;a<e;a++)r+=+this.fileList[a].getAttribute("data-files-count");for(let a=r+s-1;a>=r;a--)i.splice(a,1)}remove(e,t,i,s,r){m(s)&&(s=!0);const o={event:r,cancel:!1,filesData:[],customFormData:[],postRawFile:s,currentRequest:null};this.trigger("beforeRemove",{cancel:!1,customFormData:[],currentRequest:null},u=>{if(!u.cancel)if(this.isFormUpload())o.filesData=e,this.trigger("removing",o,p=>{if(!p.cancel){const y=this.getFilesInArray(e);let _,E=!1;for(const D of y)if(E||(_=this.fileList.indexOf(D.list)),_>-1){const L=m(D.input)?null:D.input;L&&ye(L),this.spliceFiles(_),ye(this.fileList[_]),this.fileList.splice(_,1),E=!0,_=-1}}});else if(this.isForm&&(m(this.asyncSettings.removeUrl)||""===this.asyncSettings.removeUrl))o.filesData=this.getFilesData(),this.trigger("removing",o,p=>{p.cancel||this.clearAll()});else{let p=[];(e=m(e)?this.filesData:e)instanceof Array?p=e:p.push(e),o.filesData=p;const y=this.asyncSettings.removeUrl,E=!(""===y||m(y));for(const _ of p){const D=this.uploadedFilesData.indexOf(_);("2"===_.statusCode||"4"===_.statusCode||"0"===_.statusCode&&-1!==D)&&E?this.removeUploadedFile(_,o,i,t):i?this.removeFilesData(_,t):this.trigger("removing",o,L=>{L.cancel||this.removeFilesData(_,t)}),r&&!r.target.classList.contains(Yo)&&this.checkActionComplete(!1)}}})}clearAll(){if(m(this.listParent))return"msie"!==this.browserName&&(this.element.value=""),void(this.filesData=[]);this.trigger("clearing",{cancel:!1,filesData:this.filesData},t=>{t.cancel||(this.clearData(),this.actionCompleteCount=0,this.count=-1)})}getFilesData(e){return m(e)?this.filesData:this.getSelectedFiles(e)}pause(e,t){const i=this.getFilesInArray(e=e||this.filesData);this.pauseUploading(i,t)}pauseUploading(e,t){const i=this.getFiles(e);for(let s=0;s<i.length;s++)"3"===i[s].statusCode&&this.pauseUpload(this.getCurrentMetaData(i[s],null),null,t)}getFiles(e){let t=[];return m(e)||e instanceof Array?t=e:t.push(e),t}resume(e,t){const i=this.getFilesInArray(e=e||this.filesData);this.resumeFiles(i,t)}resumeFiles(e,t){const i=this.getFiles(e);for(let s=0;s<i.length;s++)"4"===i[s].statusCode&&this.resumeUpload(this.getCurrentMetaData(i[s],null),null,t)}retry(e,t,i){const s=this.getFilesInArray(e=e||this.filesData);this.sequentialUpload&&this.isFirstFileOnSelection&&(this.isFirstFileOnSelection=!1),this.retryFailedFiles(s,t,i)}retryFailedFiles(e,t,i){const s=this.getFiles(e);for(let r=0;r<s.length;r++)if("5"===s[r].statusCode||"0"===s[r].statusCode)if(this.asyncSettings.chunkSize>0)this.retryUpload(this.getCurrentMetaData(s[r],null),t);else{let o;i||(o=this.fileList[this.filesData.indexOf(s[r])]),this.reloadcanceledFile(null,s[r],o,i)}}cancel(e){const t=this.getFilesInArray(e=e||this.filesData);this.cancelUpload(t)}cancelUpload(e){const t=this.getFiles(e);if(this.asyncSettings.chunkSize>0){for(let i=0;i<t.length;i++)if("3"===t[i].statusCode){const s=this.getCurrentMetaData(t[i],null);s.file.statusCode="5",s.file.status=this.localizedTexts("fileUploadCancel"),this.updateMetaData(s),this.showHideUploadSpinner(t[i])}}else for(let i=0;i<t.length;i++)"3"===t[i].statusCode&&(t[i].statusCode="5",t[i].status=this.localizedTexts("fileUploadCancel"),this.showHideUploadSpinner(t[i]))}showHideUploadSpinner(e){const t=this.getLiElement(e);if(!m(t)&&m(this.template)){const i=t.querySelector("."+cr);Zc({target:i,width:"20px"}),Bl(i)}}};qi([Ps({saveUrl:"",removeUrl:""},cy)],ps.prototype,"asyncSettings",void 0),qi([A(!1)],ps.prototype,"sequentialUpload",void 0),qi([A({})],ps.prototype,"htmlAttributes",void 0),qi([A("")],ps.prototype,"cssClass",void 0),qi([A(!0)],ps.prototype,"enabled",void 0),qi([A(null)],ps.prototype,"template",void 0),qi([A(!0)],ps.prototype,"multiple",void 0),qi([A(!0)],ps.prototype,"autoUpload",void 0),qi([Ps({},wb)],ps.prototype,"buttons",void 0),qi([A("")],ps.prototype,"allowedExtensions",void 0),qi([A(0)],ps.prototype,"minFileSize",void 0),qi([A(3e7)],ps.prototype,"maxFileSize",void 0),qi([A(null)],ps.prototype,"dropArea",void 0),qi([cl([{}],ly)],ps.prototype,"files",void 0),qi([A(!0)],ps.prototype,"showFileList",void 0),qi([A(!1)],ps.prototype,"directoryUpload",void 0),qi([A("Default")],ps.prototype,"dropEffect",void 0),qi([Z()],ps.prototype,"created",void 0),qi([Z()],ps.prototype,"actionComplete",void 0),qi([Z()],ps.prototype,"rendering",void 0),qi([Z()],ps.prototype,"beforeUpload",void 0),qi([Z()],ps.prototype,"fileListRendering",void 0),qi([Z()],ps.prototype,"selected",void 0),qi([Z()],ps.prototype,"uploading",void 0),qi([Z()],ps.prototype,"success",void 0),qi([Z()],ps.prototype,"failure",void 0),qi([Z()],ps.prototype,"removing",void 0),qi([Z()],ps.prototype,"beforeRemove",void 0),qi([Z()],ps.prototype,"clearing",void 0),qi([Z()],ps.prototype,"progress",void 0),qi([Z()],ps.prototype,"change",void 0),qi([Z()],ps.prototype,"chunkSuccess",void 0),qi([Z()],ps.prototype,"chunkFailure",void 0),qi([Z()],ps.prototype,"chunkUploading",void 0),qi([Z()],ps.prototype,"canceling",void 0),qi([Z()],ps.prototype,"pausing",void 0),qi([Z()],ps.prototype,"resuming",void 0),ps=qi([ts],ps);var hr=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const EE="e-apply",J_="e-cancel",RD="e-current",wE="e-ctrl-btn",hy="e-switch-ctrl-btn",ND="e-disabled",FD="e-value-switch-btn",uL="e-handler",BD="e-hide-hex-value",VD="e-hide-opacity",Sb="e-hide-switchable-value",Zf="e-hide-value",_b="e-hide-valueswitcher",Ib="e-hsv-color",HD="e-hsv-container",Xf="e-selected-value",Au="e-mode-switch-btn",SE="e-nocolor-item",xb="e-opacity-value",Qf="e-palette",_E="e-color-palette",Tb="e-color-picker",uy="e-preview-container",Ab="e-previous",Db="e-show-value",IE="e-selected",UD="e-split-preview",eI="e-tile",eH_default=["#000000","#f44336","#e91e63","#9c27b0","#673ab7","#2196f3","#03a9f4","#00bcd4","#009688","#ffeb3b","#ffffff","#ffebee","#fce4ec","#f3e5f5","#ede7f6","#e3f2fd","#e1f5fe","#e0f7fa","#e0f2f1","#fffde7","#f2f2f2","#ffcdd2","#f8bbd0","#e1bee7","#d1c4e9","#bbdefb","#b3e5fc","#b2ebf2","#b2dfdb","#fff9c4","#e6e6e6","#ef9a9a","#f48fb1","#ce93d8","#b39ddb","#90caf9","#81d4fa","#80deea","#80cbc4","#fff59d","#cccccc","#e57373","#f06292","#ba68c8","#9575cd","#64b5f6","#4fc3f7","#4dd0e1","#4db6ac","#fff176","#b3b3b3","#ef5350","#ec407a","#ab47bc","#7e57c2","#42a5f5","#29b6f6","#26c6da","#26a69a","#ffee58","#999999","#e53935","#d81b60","#8e24aa","#5e35b1","#1e88e5","#039be5","#00acc1","#00897b","#fdd835","#808080","#d32f2f","#c2185b","#7b1fa2","#512da8","#1976d2","#0288d1","#0097a7","#00796b","#fbc02d","#666666","#c62828","#ad1457","#6a1b9a","#4527a0","#1565c0","#0277bd","#00838f","#00695c","#f9a825","#4d4d4d","#b71c1c","#880e4f","#4a148c","#311b92","#0d47a1","#01579b","#006064","#004d40","#f57f17"];let ur=class extends Ls{constructor(e,t){super(e,t)}preRender(){const e=this.element;this.formElement=ae(this.element,"form"),this.formElement&&O.add(this.formElement,"reset",this.formResetHandler,this),this.l10n=new Xr("colorpicker",{Apply:"Apply",Cancel:"Cancel",ModeSwitcher:"Switch Mode"},this.locale),e.getAttribute("ejs-for")&&!e.getAttribute("name")&&e.setAttribute("name",e.id)}render(){this.initWrapper(),this.inline?this.createWidget():this.createSplitBtn(),this.enableOpacity||j([this.container.parentElement],VD),this.renderComplete()}initWrapper(){const e=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"});this.element.parentNode.insertBefore(e,this.element),e.appendChild(this.element),bt(this.element,{tabindex:"-1",spellcheck:"false"}),this.container=this.createElement("div",{className:"e-container"}),this.getWrapper().appendChild(this.container);let t=this.value?this.roundValue(this.value).toLowerCase():"#008000ff";this.noColor&&"Palette"===this.mode&&""===this.value&&(t="");const i=t.slice(0,7);m(this.initialInputValue)&&(this.initialInputValue=i),this.element.value=i,this.setProperties(this.enableOpacity?{value:t}:{value:i},!0),this.enableRtl&&e.classList.add("e-rtl"),this.cssClass&&j([e],this.cssClass.split(" ")),this.tileRipple=da(this.container,{selector:"."+eI}),this.ctrlBtnRipple=da(this.container,{selector:".e-btn"})}getWrapper(){return this.element.parentElement}createWidget(){"Palette"===this.mode?(this.createPalette(),this.inline||this.firstPaletteFocus()):(this.createPicker(),this.inline||this.getDragHandler().focus()),this.isRgb=!0,this.createInput(),this.createCtrlBtn(),this.disabled||this.wireEvents(),this.inline&&this.disabled&&this.toggleDisabled(!0),Q.isDevice&&this.refreshPopupPos()}createSplitBtn(){const e=this.createElement("button",{className:"e-split-colorpicker"});this.getWrapper().appendChild(e),this.splitBtn=new Po({iconCss:"e-selected-color",target:this.container,disabled:this.disabled,enableRtl:this.enableRtl,createPopupOnClick:this.createPopupOnClick,open:this.onOpen.bind(this),click:()=>{this.trigger("change",{currentValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},previousValue:{hex:null,rgba:null},value:this.value})}}),this.splitBtn.createElement=this.createElement,this.splitBtn.appendTo(e);const t=this.createElement("span",{className:UD});X(".e-selected-color",e).appendChild(t),t.style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value));const i=this.getPopupEle();if(j([i],"e-colorpicker-popup"),this.cssClass&&j([i],this.cssClass.split(" ")),Q.isDevice){const s=this.getPopupInst();s.relateTo=document.body,s.position={X:"center",Y:"center"},s.targetType="container",s.collision={X:"fit",Y:"fit"},s.offsetY=4,i.style.zIndex=pa(this.splitBtn.element).toString()}this.bindCallBackEvent()}onOpen(){this.trigger("open",{element:this.container})}getPopupInst(){return ac(this.getPopupEle(),Th)}bindCallBackEvent(){this.splitBtn.beforeOpen=e=>{const t=new Yf;return this.trigger("beforeOpen",e,i=>{if(!i.cancel){const s=this.getPopupEle();s.style.top=ct(0+pageYOffset),s.style.left=ct(0+pageXOffset),s.style.display="block",this.createWidget(),s.style.display="",Q.isDevice&&(this.modal=this.createElement("div"),this.modal.className="e-"+this.getModuleName()+" e-modal",this.modal.style.display="none",document.body.insertBefore(this.modal,s),document.body.className+=" e-colorpicker-overflow",this.modal.style.display="block",this.modal.style.zIndex=(Number(s.style.zIndex)-1).toString())}e.cancel=i.cancel,t.resolve(i)}),t},this.splitBtn.beforeClose=e=>{const t=new Yf;return m(e.event)?t.resolve(e):this.trigger("beforeClose",{element:this.container,event:e.event,cancel:!1},s=>{Q.isDevice&&e.event.target===this.modal&&(s.cancel=!0),s.cancel||this.onPopupClose(),e.cancel=s.cancel,t.resolve(s)}),t}}onPopupClose(){this.unWireEvents(),this.destroyOtherComp(),this.container.style.width="",X("."+UD,this.splitBtn.element).style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value)),this.container.innerHTML="",Y([this.container],[Tb,_E]),Q.isDevice&&this.modal&&(Y([document.body],"e-colorpicker-overflow"),this.modal.style.display="none",this.modal.outerHTML="",this.modal=null)}createPalette(){if(ua(this.container,[_E],[Tb]),this.presetColors){const t=this.createElement("div",{className:"e-custom-palette"});this.appendElement(t);const i=Object.keys(this.presetColors);if(1===i.length)this.appendPalette(this.presetColors[i[0]],i[0],t);else for(let s=0,r=i.length;s<r;s++)this.appendPalette(this.presetColors[i[s]],i[s],t);at(".e-row",t).length>10&&j([t],"e-palette-group")}else this.appendPalette(eH_default,"default");"Palette"===this.mode&&!this.modeSwitcher&&this.noColor&&this.setNoColor();const e=parseInt(getComputedStyle(this.container).borderBottomWidth,10);this.container.style.width=ct(this.container.children[0].offsetWidth+e+e),this.rgb=this.hexToRgb(this.roundValue(this.value)),this.hsv=this.rgbToHsv.apply(this,this.rgb)}firstPaletteFocus(){X("."+IE,this.container.children[0])||at("."+Qf,this.container)[0].focus()}appendPalette(e,t,i){const s=this.createElement("div",{className:Qf,attrs:{tabindex:"0"}});let r,o,a;i?i.appendChild(s):this.appendElement(s);for(let u=0,p=e.length;u<p;u++)(0===u||u%this.columns==0)&&(r=this.createElement("div",{className:"e-row",attrs:{role:"presentation"}}),s.appendChild(r)),a=this.roundValue(e[u]).toLowerCase(),o=this.createElement("span",{className:eI,attrs:{role:"gridcell","aria-label":a,"aria-selected":"false"}}),this.trigger("beforeTileRender",{element:o,presetName:t,value:e[u]}),r.appendChild(o),this.value===a&&(this.addTileSelection(o),s.focus()),o.style.backgroundColor=this.convertToRgbString(this.hexToRgb(a))}setNoColor(){const e=this.container.querySelector(".e-row").children[0];e.classList.add(SE),this.value||(e.classList.add(IE),ae(e,"."+Qf).focus()),["aria-selected","aria-label"].forEach(t=>{e.removeAttribute(t)}),e.style.backgroundColor=""}appendElement(e,t=0){const i=this.container.children[t];i?this.container.insertBefore(e,i):this.container.appendChild(e)}addTileSelection(e){e.classList.add(IE),e.setAttribute("aria-selected","true")}createPicker(){ua(this.container,[Tb],[_E]);const e=this.createElement("div",{className:HD});this.appendElement(e),e.appendChild(this.createElement("div",{className:Ib}));const t=this.createElement("span",{className:uL,attrs:{tabindex:"0"}});e.appendChild(t),null===this.value&&(this.value="#008000ff"),this.rgb=this.hexToRgb(this.value),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.setHsvContainerBg(),this.setHandlerPosition(),this.createSlider(),this.createDragTooltip()}setHsvContainerBg(e=this.hsv[0]){this.getHsvContainer().style.backgroundColor=this.convertToRgbString(this.hsvToRgb(e,100,100,1))}getHsvContainer(){return X("."+HD,this.container)}setHandlerPosition(){const e=this.getDragHandler(),t=X("."+Ib,this.container);e.style.left=ct(this.enableRtl?t.offsetWidth*Math.abs(100-this.hsv[1])/100:t.offsetWidth*this.hsv[1]/100),e.style.top=ct(t.offsetHeight*(100-this.hsv[2])/100)}createSlider(){const e=this.createElement("div",{className:"e-slider-preview"});this.appendElement(e,1),this.createPreview(e);const t=this.createElement("div",{className:"e-colorpicker-slider"});e.insertBefore(t,e.children[0]);let i=this.createElement("div",{className:"e-hue-slider"});t.appendChild(i),this.hueSlider=new pn({value:this.hsv[0],min:0,max:359,enableRtl:this.enableRtl,enabled:!this.disabled,change:this.hueChange.bind(this)}),this.hueSlider.createElement=this.createElement,this.hueSlider.appendTo(i),this.enableOpacity&&(i=this.createElement("div",{className:"e-opacity-slider"}),t.appendChild(i),this.createOpacitySlider(i))}createOpacitySlider(e){this.opacitySlider=new pn({value:100*this.rgb[3],min:0,max:100,enableRtl:this.enableRtl,enabled:!this.disabled,change:this.opacityChange.bind(this)}),this.opacitySlider.createElement=this.createElement,this.opacitySlider.appendTo(e);const t=this.createElement("div",{className:"e-opacity-empty-track"});e.appendChild(t),this.updateOpacitySliderBg()}updateOpacitySliderBg(){const e=this.enableRtl?"to left":"to right",t=X(".e-opacity-empty-track",this.opacitySlider.element);t&&(t.style.background="linear-gradient("+e+", rgba("+this.rgb.slice(0,3)+", 0) 0%, "+this.convertToRgbString(this.rgb.slice(0,3))+" 100%)")}hueChange(e){this.hsv[0]=e.value,this.setHsvContainerBg(),this.convertToOtherFormat()}opacityChange(e){const t=e.value,i=this.rgbToHex(this.rgb);this.hsv[3]=t/100,this.rgb[3]=t/100;const s=this.rgbToHex(this.rgb);this.updateOpacityInput(t);const r=this.convertToRgbString(this.rgb);this.updatePreview(r),this.triggerEvent(s,i,r)}updateOpacityInput(e){if(this.enableOpacity&&!this.getWrapper().classList.contains(Zf)){const t=ac(X("."+xb,this.container),fb);t.value=e,t.dataBind()}}createPreview(e){const t=this.createElement("div",{className:uy});e.appendChild(t);let i=this.createElement("span",{className:"e-preview "+RD});t.appendChild(i);const s=this.convertToRgbString(this.rgb);i.style.backgroundColor=s,i=this.createElement("span",{className:"e-preview "+Ab}),t.appendChild(i),i.style.backgroundColor=s}isPicker(){return!this.container.classList.contains(_E)}getPopupEle(){return this.container.parentElement}createNumericInput(e,t,i,s){const r=new fb({value:t,placeholder:i,min:0,max:s,format:"###.##",showSpinButton:!1,floatLabelType:"Always",enableRtl:this.enableRtl,enabled:!this.disabled,readonly:!this.isPicker(),change:o=>{o.event&&this.inputHandler(o.event)}});r.createElement=this.createElement,r.appendTo(e)}createInput(){const e=this.isPicker(),t=this.getWrapper();if(e&&!t.classList.contains(Zf)||!e&&t.classList.contains(Db)){const i=this.createElement("div",{className:Xf});this.appendElement(i,e?2:1);const s=this.createElement("div",{className:"e-input-container"});if(i.appendChild(s),t.classList.contains(_b)||this.appendValueSwitchBtn(i),!t.classList.contains(BD)){const r=this.createElement("input",{className:"e-hex",attrs:{maxlength:"7",spellcheck:"false"}});s.appendChild(r),ft.createInput({element:r,floatLabelType:"Always",properties:{placeholder:"HEX",enableRtl:this.enableRtl,enabled:!this.disabled,readonly:!this.isPicker()}},this.createElement),ft.setValue(this.value.slice(0,7),r),r.addEventListener("input",this.inputHandler.bind(this))}if(!t.classList.contains(Sb)){let r,o;this.isRgb?(r="RGB",o=this.rgb):(r="HSV",o=this.hsv);const a=["rh","gs","bv"];for(let u=0;u<3;u++)this.createNumericInput(s.appendChild(this.createElement("input",{className:"e-"+a[u]+"-value"})),o[u],r[u],255);this.enableOpacity&&this.appendOpacityValue(s)}}}appendOpacityValue(e){this.createNumericInput(e.appendChild(this.createElement("input",{className:xb})),100*this.rgb[3],"A",100)}appendValueSwitchBtn(e){const t=this.createElement("button",{className:"e-icons e-css e-btn e-flat e-icon-btn "+FD});e.appendChild(t),this.isPicker()&&!this.getWrapper().classList.contains(Sb)&&t.addEventListener("click",this.formatSwitchHandler.bind(this))}createCtrlBtn(){if(this.modeSwitcher||this.showButtons){this.l10n.setLocale(this.locale);const e=this.createElement("div",{className:hy});if(this.container.appendChild(e),this.showButtons){const t=this.createElement("div",{className:wE});e.appendChild(t);const i=this.l10n.getConstant("Apply");t.appendChild(this.createElement("button",{innerHTML:i,className:"e-btn e-css e-flat e-primary e-small "+EE,attrs:{title:i}}));const s=this.l10n.getConstant("Cancel");t.appendChild(this.createElement("button",{innerHTML:s,className:"e-btn e-css e-flat e-small "+J_,attrs:{title:s}}))}this.modeSwitcher&&this.appendModeSwitchBtn()}}appendModeSwitchBtn(){const e=this.createElement("button",{className:"e-icons e-btn e-flat e-icon-btn "+Au,attrs:{title:this.l10n.getConstant("ModeSwitcher")}});X("."+hy,this.container).insertBefore(e,X("."+wE,this.container))}createDragTooltip(){const e=new Ns({opensOn:"Custom",showTipPointer:!1,cssClass:"e-color-picker-tooltip",beforeOpen:t=>{this.tooltipEle=t.element},animation:{open:{effect:"None"},close:{effect:"None"}}});e.createElement=this.createElement,e.appendTo(this.container),e.open(this.container),this.tooltipEle.style.zIndex=pa(this.tooltipEle).toString(),X(".e-tip-content",this.tooltipEle).appendChild(this.createElement("div",{className:"e-tip-transparent"}))}getTooltipInst(){return ac(this.container,Ns)}setTooltipOffset(e){this.getTooltipInst().offsetY=e}toggleDisabled(e){e?this.getWrapper().classList.add(ND):this.getWrapper().classList.remove(ND),this.showButtons&&[].slice.call(at(".e-btn",this.container)).forEach(t=>{e?bt(t,{disabled:""}):t.removeAttribute("disabled")})}convertToRgbString(e){return e.length?4===e.length?"rgba("+e.join()+")":"rgb("+e.join()+")":""}convertToHsvString(e){return 4===e.length?"hsva("+e.join()+")":"hsv("+e.join()+")"}updateHsv(){this.hsv[1]=this.hsv[1]>100?100:this.hsv[1],this.hsv[2]=this.hsv[2]>100?100:this.hsv[2],this.setHandlerPosition()}convertToOtherFormat(e=!1){const t=this.rgbToHex(this.rgb);this.rgb=this.hsvToRgb.apply(this,this.hsv);const i=this.rgbToHex(this.rgb),s=this.convertToRgbString(this.rgb);this.updatePreview(s),this.updateInput(i),this.triggerEvent(i,t,s,e)}updateInput(e){const t=this.getWrapper();t.classList.contains(Zf)||(t.classList.contains(BD)||ft.setValue(e.substr(0,7),X(".e-hex",this.container)),t.classList.contains(Sb)||this.updateValue(this.isRgb?this.rgb:this.hsv,!1))}updatePreview(e){this.enableOpacity&&this.updateOpacitySliderBg(),X(".e-tip-transparent",this.tooltipEle).style.backgroundColor=e,X("."+uy+" ."+RD,this.container).style.backgroundColor=e,X("."+uy+" ."+Ab,this.container).style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value))}getDragHandler(){return X("."+uL,this.container)}removeTileSelection(){[].slice.call(at("."+IE,this.container.children[0])).forEach(t=>{t.classList.remove(IE),t.setAttribute("aria-selected","false")})}convertRgbToNumberArray(e){return e.slice(e.indexOf("(")+1,e.indexOf(")")).split(",").map((t,i)=>3!==i?parseInt(t,10):parseFloat(t))}getValue(e,t){if(e||(e=this.value),t=t?t.toLowerCase():"hex","r"===e[0]){const i=this.convertRgbToNumberArray(e);if("hex"===t||"hexa"===t){const s=this.rgbToHex(i);return"hex"===t?s.slice(0,7):s}return"hsv"===t?this.convertToHsvString(this.rgbToHsv.apply(this,i.slice(0,3))):"hsva"===t?this.convertToHsvString(this.rgbToHsv.apply(this,i)):"null"}if("h"===e[0]){const i=this.hsvToRgb.apply(this,this.convertRgbToNumberArray(e));if("rgba"===t)return this.convertToRgbString(i);if("hex"===t||"hexa"===t){const s=this.rgbToHex(i);return"hex"===t?s.slice(0,7):s}return"rgb"===t?this.convertToRgbString(i.slice(0,3)):"null"}{e=this.roundValue(e);let i=this.hexToRgb(e);return("rgb"===t||"hsv"===t)&&(i=i.slice(0,3)),"rgba"===t||"rgb"===t?this.convertToRgbString(i):"hsva"===t||"hsv"===t?this.convertToHsvString(this.rgbToHsv.apply(this,i)):"hex"===t?e.slice(0,7):"a"===t?i[3].toString():"null"}}toggle(){this.container.parentElement.classList.contains("e-popup-close")?this.splitBtn.toggle():this.closePopup(null)}getModuleName(){return"colorpicker"}getPersistData(){return this.addOnPersist(["value"])}wireEvents(){if(this.isPicker()){const e=this.getDragHandler();O.add(e,"keydown",this.pickerKeyDown,this),O.add(this.getHsvContainer(),"mousedown touchstart",this.handlerDown,this),(this.modeSwitcher||this.showButtons)&&this.addCtrlSwitchEvent(),O.add(X("."+Ab,this.container),"click",this.previewHandler,this)}else O.add(this.container,"click",this.paletteClickHandler,this),O.add(this.container,"keydown",this.paletteKeyDown,this)}formResetHandler(){this.value=this.initialInputValue,bt(this.element,{value:this.initialInputValue})}addCtrlSwitchEvent(){const e=X("."+hy,this.container);e&&O.add(e,"click",this.btnClickHandler,this)}pickerKeyDown(e){switch(e.keyCode){case 39:this.handlerDragPosition(1,this.enableRtl?-1:1,e);break;case 37:this.handlerDragPosition(1,this.enableRtl?1:-1,e);break;case 38:this.handlerDragPosition(2,1,e);break;case 40:this.handlerDragPosition(2,-1,e);break;case 13:{e.preventDefault();const t=this.rgbToHex(this.rgb);this.enterKeyHandler(t,e)}}}enterKeyHandler(e,t){this.triggerChangeEvent(e),this.inline||(this.closePopup(t),this.splitBtn.element.focus())}closePopup(e){this.trigger("beforeClose",{element:this.container,event:e,cancel:!1},i=>{i.cancel||(this.splitBtn.toggle(),this.onPopupClose())})}triggerChangeEvent(e){const t=e.slice(0,7);this.trigger("change",{currentValue:{hex:t,rgba:this.convertToRgbString(this.rgb)},previousValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},value:this.enableOpacity?e:t}),this.setProperties(this.enableOpacity?{value:e}:{value:t},!0),this.element.value=t||"#000000"}handlerDragPosition(e,t,i){i.preventDefault(),this.hsv[e]+=t*(i.ctrlKey?1:3),this.hsv[e]<0&&(this.hsv[e]=0),this.updateHsv(),this.convertToOtherFormat(!0)}handlerDown(e){e.preventDefault(),"mousedown"===e.type?(this.clientX=Math.abs(e.pageX-pageXOffset),this.clientY=Math.abs(e.pageY-pageYOffset),this.setTooltipOffset(8)):(this.clientX=Math.abs(e.changedTouches[0].pageX-pageXOffset),this.clientY=Math.abs(e.changedTouches[0].pageY-pageYOffset),this.setTooltipOffset(-8)),this.setHsv(this.clientX,this.clientY),this.getDragHandler().style.transition="left .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1)",this.updateHsv(),this.convertToOtherFormat(),this.getDragHandler().focus(),O.add(document,"mousemove touchmove",this.handlerMove,this),O.add(document,"mouseup touchend",this.handlerEnd,this)}handlerMove(e){let t,i;"touchmove"!==e.type&&e.preventDefault(),"mousemove"===e.type?(t=Math.abs(e.pageX-pageXOffset),i=Math.abs(e.pageY-pageYOffset)):(t=Math.abs(e.changedTouches[0].pageX-pageXOffset),i=Math.abs(e.changedTouches[0].pageY-pageYOffset)),this.setHsv(t,i);const s=this.getDragHandler();this.updateHsv(),this.convertToOtherFormat(),this.getTooltipInst().refresh(s),this.tooltipEle.style.transform||(Math.abs(this.clientX-t)>8||Math.abs(this.clientY-i)>8)&&(X("."+Ib,this.container).style.cursor="pointer",s.style.transition="none",this.inline||(this.tooltipEle.style.zIndex=(parseInt(this.getPopupEle().style.zIndex,10)+1).toString()),this.tooltipEle.style.transform="rotate(45deg)",s.classList.add("e-hide-handler"))}setHsv(e,t){const i=X("."+Ib,this.container),s=i.getBoundingClientRect();e=this.enableRtl?e>s.right?0:Math.abs(e-s.right):e>s.left?Math.abs(e-s.left):0,t=t>s.top?Math.abs(t-s.top):0,this.hsv[2]=Math.round(10*Number(100*(i.offsetHeight-Math.max(0,Math.min(i.offsetHeight,t-i.offsetTop)))/i.offsetHeight))/10,this.hsv[1]=Math.round(10*Number(100*Math.max(0,Math.min(i.offsetWidth,e-i.offsetLeft))/i.offsetWidth))/10}handlerEnd(e){"touchend"!==e.type&&e.preventDefault(),O.remove(document,"mousemove touchmove",this.handlerMove),O.remove(document,"mouseup touchend",this.handlerEnd);const t=this.getDragHandler();X("."+Ib,this.container).style.cursor="",this.tooltipEle.style.transform&&(this.tooltipEle.style.transform="",t.classList.remove("e-hide-handler")),!this.inline&&!this.showButtons&&this.closePopup(e)}btnClickHandler(e){const t=e.target;ae(t,"."+Au)?(e.stopPropagation(),this.switchToPalette()):(t.classList.contains(EE)||t.classList.contains(J_))&&this.ctrlBtnClick(t,e)}switchToPalette(){this.trigger("beforeModeSwitch",{element:this.container,mode:"Palette"}),this.unWireEvents(),this.destroyOtherComp(),ye(X(".e-slider-preview",this.container)),this.getWrapper().classList.contains(Zf)||Ms(X("."+Xf,this.container)),ye(this.getHsvContainer()),this.createPalette(),this.firstPaletteFocus(),this.createInput(),this.refreshPopupPos(),this.wireEvents(),this.trigger("onModeSwitch",{element:this.container,mode:"Palette"})}refreshPopupPos(){if(!this.inline){const e=this.getPopupEle();e.style.left=ct(0+pageXOffset),e.style.top=ct(0+pageYOffset),this.getPopupInst().refreshPosition(this.splitBtn.element.parentElement)}}formatSwitchHandler(){this.isRgb?(this.updateValue(this.hsv,!0,3,[360,100,100]),this.isRgb=!1):(this.updateValue(this.rgb,!0,2),this.isRgb=!0)}updateValue(e,t,i,s){const r=["e-rh-value","e-gs-value","e-bv-value"];let o;for(let a=0,u=r.length;a<u;a++)o=ac(X("."+r[a],this.container),fb),o.value=Math.round(e[a]),t&&(o.placeholder=r[a].substr(i,1).toUpperCase(),o.max=s?s[a]:255),o.dataBind()}previewHandler(e){const t=e.target,i=this.rgbToHex(this.rgb);this.rgb=this.convertRgbToNumberArray(t.style.backgroundColor),this.rgb[3]||(this.rgb[3]=1);const s=this.rgbToHex(this.rgb),r=this.rgbToHsv.apply(this,this.rgb);r[0]!==this.hsv[0]&&(this.hueSlider.setProperties({value:r[0]},!0),this.hueSlider.refresh()),this.setHsvContainerBg(r[0]),this.enableOpacity&&r[3]!==this.hsv[3]&&(this.opacitySlider.setProperties({value:100*r[3]},!0),this.opacitySlider.refresh(),this.updateOpacitySliderBg()),this.hsv=r,this.setHandlerPosition(),this.updateInput(s),X("."+uy+" ."+RD,this.container).style.backgroundColor=this.convertToRgbString(this.rgb),this.triggerEvent(s,i,this.convertToRgbString(this.rgb))}paletteClickHandler(e){e.preventDefault();const t=e.target;if(t.classList.contains(eI)){if(this.removeTileSelection(),this.addTileSelection(t),t.classList.contains(SE))this.noColorTile();else{const i=t.getAttribute("aria-label"),s=this.rgbToHex(this.rgb);this.rgb=this.hexToRgb(this.roundValue(i)),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.getWrapper().classList.contains(Db)&&this.updateInput(i),this.triggerEvent(i,s,this.convertToRgbString(this.rgb))}!this.inline&&!this.showButtons&&this.closePopup(e)}else ae(t,"."+Au)?this.switchToPicker():t.classList.contains(EE)||t.classList.contains(J_)?this.ctrlBtnClick(t,e):this.getWrapper().classList.contains(Db)&&ae(t,"."+FD)&&this.formatSwitchHandler()}noColorTile(e=!1){const t=this.rgbToHex(this.rgb);this.rgb=[],this.hsv=[],this.triggerEvent("",t,"",e)}switchToPicker(){const e=this.getWrapper();this.trigger("beforeModeSwitch",{element:this.container,mode:"Picker"}),this.unWireEvents(),[].slice.call(at("."+Qf,this.container)).forEach(i=>{ye(i)}),e.classList.contains(Db)&&ye(X("."+Xf,this.container)),this.container.style.width="";const t=X(".e-custom-palette",this.container);this.presetColors&&Ms(t),this.createPicker(),this.getDragHandler().focus(),this.createInput(),this.refreshPopupPos(),this.wireEvents(),this.trigger("onModeSwitch",{element:this.container,mode:"Picker"})}ctrlBtnClick(e,t){if(e.classList.contains(EE)){const i=this.rgbToHex(this.rgb);this.triggerChangeEvent(i)}this.inline||(this.closePopup(t),this.splitBtn.element.focus())}paletteKeyDown(e){const t=e.target;if(!t.classList.contains(Qf))return;let i,s;const r=[].slice.call(at("."+eI,t)),o=r.filter(a=>a.classList.contains("e-selected")).pop();switch(!e.altKey&&e.keyCode){case 39:e.preventDefault(),i=o?r[this.tilePosition(r,o,this.enableRtl?-1:1)]:r[this.enableRtl?r.length-1:0],this.keySelectionChanges(i);break;case 37:e.preventDefault(),i=o?r[this.tilePosition(r,o,this.enableRtl?1:-1)]:r[this.enableRtl?0:r.length-1],this.keySelectionChanges(i);break;case 38:e.preventDefault(),s=o?this.tilePosition(r,o,-this.columns):0,i=r[s]?r[s]:r[s-this.columns],this.keySelectionChanges(i);break;case 40:e.preventDefault(),s=o?this.tilePosition(r,o,this.columns):r.length-1,r[s]||(s%=r.length,s+=r[r.length-1].parentElement.childElementCount),i=r[s],this.keySelectionChanges(i);break;case 13:if(e.preventDefault(),o){const a=o.getAttribute("aria-label");this.enterKeyHandler(a||"",e)}}}keySelectionChanges(e){if(this.removeTileSelection(),this.addTileSelection(e),e.classList.contains(SE))this.noColorTile(!0);else{const t=e.getAttribute("aria-label"),i=this.rgbToHex(this.rgb);this.rgb=this.hexToRgb(t),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.getWrapper().classList.contains(Db)&&this.updateInput(t),this.triggerEvent(t,i,this.convertToRgbString(this.rgb),!0)}}tilePosition(e,t,i){const s=(e=Array.prototype.slice.call(e)).length,r=this.columns-e[s-1].parentElement.childElementCount;let o=e.indexOf(t);return o+=i,o<0?o+=s+r:o%=s+r,o}inputHandler(e){const t=e.target;if(!t.value.length)return;let i,s;switch(X(".e-float-text",t.parentElement).textContent){case"HEX":{let o="";if(("#"===t.value[0]&&5!==t.value.length||"#"!==t.value[0]&&4!==t.value.length)&&(o=this.roundValue(t.value)),9!==o.length)return;s=this.rgbToHex(this.rgb),this.rgb=this.hexToRgb(o+o.substr(-2)),this.inputValueChange(this.rgbToHsv.apply(this,this.rgb),s,t.value);break}case"R":this.rgb[0]!==Number(t.value)&&(s=this.rgbToHex(this.rgb),this.rgb[0]=Number(t.value),i=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(i,s));break;case"G":this.rgb[1]!==Number(t.value)&&(s=this.rgbToHex(this.rgb),this.rgb[1]=Number(t.value),i=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(i,s));break;case"B":this.rgb[2]!==Number(t.value)&&(s=this.rgbToHex(this.rgb),this.rgb[2]=Number(t.value),i=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(i,s));break;case"H":this.hueSlider.value=Number(t.value);break;case"S":this.hsv[1]!==Number(t.value)&&(this.hsv[1]=Number(t.value),this.updateHsv(),this.convertToOtherFormat());break;case"V":this.hsv[2]!==Number(t.value)&&(this.hsv[2]=Number(t.value),this.updateHsv(),this.convertToOtherFormat());break;case"A":this.opacitySlider.value=Number(t.value)}}inputValueChange(e,t,i){e[0]!==this.hsv[0]&&(this.hueSlider.setProperties({value:e[0]},!0),this.hueSlider.refresh(),this.setHsvContainerBg(e[0])),this.hsv=e;const s=this.rgbToHex(this.rgb);this.setHandlerPosition(),this.updateInput(i||s);const r=this.convertToRgbString(this.rgb);this.updatePreview(r),this.triggerEvent(s,t,r)}triggerEvent(e,t,i,s=!1){const r=e.slice(0,7);this.showButtons||s?this.trigger("select",{currentValue:{hex:r,rgba:i},previousValue:{hex:t.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(t))}}):(this.trigger("change",{currentValue:{hex:r,rgba:i},previousValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},value:e}),this.setProperties(this.enableOpacity?{value:e}:{value:r},!0),this.element.value=r||"#000000")}destroy(){const e=this.getWrapper();super.destroy(),["tabindex","spellcheck"].forEach(t=>{this.element.removeAttribute(t)}),this.inline?(this.unWireEvents(),this.destroyOtherComp()):(this.isPopupOpen()&&(this.unWireEvents(),this.destroyOtherComp()),this.splitBtn.destroy(),this.splitBtn=null),this.tileRipple(),this.tileRipple=null,this.ctrlBtnRipple(),this.ctrlBtnRipple=null,this.element.nextElementSibling&&ye(this.element.nextElementSibling),e&&(e.parentElement.insertBefore(this.element,e),ye(e)),this.container=null,this.formElement&&O.remove(this.formElement,"reset",this.formResetHandler)}destroyOtherComp(){if(this.isPicker()){this.hueSlider.destroy(),this.enableOpacity&&(this.opacitySlider.destroy(),this.opacitySlider=null),this.hueSlider=null;const e=this.getTooltipInst();e.close(),e.destroy(),this.tooltipEle=null}}isPopupOpen(){return this.getPopupEle().classList.contains("e-popup-open")}unWireEvents(){if(this.isPicker()){const e=this.getDragHandler();O.remove(e,"keydown",this.pickerKeyDown),O.remove(this.getHsvContainer(),"mousedown touchstart",this.handlerDown),(this.modeSwitcher||this.showButtons)&&O.remove(X("."+hy,this.container),"click",this.btnClickHandler),O.remove(X("."+Ab,this.container),"click",this.previewHandler)}else O.remove(this.container,"click",this.paletteClickHandler),O.remove(this.container,"keydown",this.paletteKeyDown)}roundValue(e){if(!e)return"";"#"!==e[0]&&(e="#"+e);let t=e.length;if(4===t&&(e+="f",t=5),5===t){let i="";for(let s=1,r=e.length;s<r;s++)i+=e.charAt(s)+e.charAt(s);e="#"+i,t=9}return 7===t&&(e+="ff"),e}hexToRgb(e){if(!e)return[];9!==(e=e.trim()).length&&(e=this.roundValue(e));const t=Number((parseInt(e.slice(-2),16)/255).toFixed(2));e=e.slice(1,7);const i=parseInt(e,16),s=[];return s.push(i>>16&255),s.push(i>>8&255),s.push(255&i),s.push(t),s}rgbToHsv(e,t,i,s){if(this.rgb&&!this.rgb.length)return[];e/=255,t/=255,i/=255;const r=Math.max(e,t,i),o=Math.min(e,t,i);let a;const u=r,p=r-o,y=0===r?0:p/r;if(r===o)a=0;else{switch(r){case e:a=(t-i)/p+(t<i?6:0);break;case t:a=(i-e)/p+2;break;case i:a=(e-t)/p+4}a/=6}const E=[Math.round(360*a),Math.round(1e3*y)/10,Math.round(1e3*u)/10];return m(s)||E.push(s),E}hsvToRgb(e,t,i,s){let r,o,a;if(i/=100,0==(t/=100))return r=o=a=i,[Math.round(255*r),Math.round(255*o),Math.round(255*a),s];e/=60;const u=Math.floor(e),p=e-u,y=i*(1-t),E=i*(1-t*p),_=i*(1-t*(1-p));switch(u){case 0:r=i,o=_,a=y;break;case 1:r=E,o=i,a=y;break;case 2:r=y,o=i,a=_;break;case 3:r=y,o=E,a=i;break;case 4:r=_,o=y,a=i;break;default:r=i,o=y,a=E}const D=[Math.round(255*r),Math.round(255*o),Math.round(255*a)];return m(s)||D.push(s),D}rgbToHex(e){return e.length?"#"+this.hex(e[0])+this.hex(e[1])+this.hex(e[2])+(m(e[3])?"":0!==e[3]?(Math.round(255*e[3])+65536).toString(16).substr(-2):"00"):""}hex(e){return("0"+e.toString(16)).slice(-2)}changeModeSwitcherProp(e){const t=X("."+hy,this.container);e?t?this.appendModeSwitchBtn():(this.createCtrlBtn(),this.isPicker()&&!this.disabled&&this.addCtrlSwitchEvent()):t&&(this.showButtons?ye(X("."+Au,t)):Ms(t))}changeShowBtnProps(e){const t=X("."+hy,this.container);e?(t&&Ms(t),this.createCtrlBtn(),this.isPicker()&&!this.disabled&&this.addCtrlSwitchEvent()):this.modeSwitcher?ye(X("."+wE,t)):Ms(t)}changeValueProp(e){if(this.isPicker())this.rgb=this.hexToRgb(e),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.setHandlerPosition(),ye(ae(this.hueSlider.element,".e-slider-preview")),this.createSlider(),this.setHsvContainerBg(),this.updateInput(e),4===this.rgb.length&&this.updateOpacityInput(100*this.rgb[3]);else{this.removeTileSelection();const t=this.container.querySelector('span[aria-label="'+this.roundValue(e)+'"]');t&&this.addTileSelection(t)}}setInputEleProps(){Ms(X("."+Xf,this.container)),this.createInput()}changeDisabledProp(e){this.isPicker()&&(this.hueSlider.enabled=!e,this.opacitySlider.enabled=!e,this.setInputEleProps()),e?(this.toggleDisabled(!0),this.unWireEvents()):(this.toggleDisabled(!1),this.wireEvents())}changeCssClassProps(e,t){const i=this.getWrapper(),s=this.getPopupEle();t&&Y([i,s],t.split(" ")),e&&j([i,s],e.split(" "))}changeRtlProps(e){e?j([this.getWrapper()],"e-rtl"):Y([this.getWrapper()],"e-rtl")}changePaletteProps(){ye(this.container.children[0]),this.container.style.width="",this.createPalette()}changeOpacityProps(e){const t=this.getWrapper();e?(Y([this.container.parentElement],VD),this.createOpacitySlider(X(".e-colorpicker-slider",this.container).appendChild(this.createElement("div",{className:"e-opacity-slider"}))),!t.classList.contains(Zf)&&!t.classList.contains(Sb)&&this.appendOpacityValue(X(".e-input-container",this.container))):(j([this.container.parentElement],VD),this.opacitySlider.destroy(),Ms(this.opacitySlider.element),this.opacitySlider=null,!t.classList.contains(Zf)&&!t.classList.contains(Sb)&&Ms(X("."+xb,this.container).parentElement))}onPropertyChanged(e,t){if(!m(e.value)){const i=this.roundValue(e.value);if(9===i.length){this.element.value=this.roundValue(i).slice(0,7);const s=this.splitBtn&&X("."+UD,this.splitBtn.element);s&&(s.style.backgroundColor=this.convertToRgbString(this.hexToRgb(e.value)))}else this.value=t.value}if(!this.inline&&m(e.inline)&&(this.splitBtn.setProperties(lb(e,["disabled","enableRtl"])),!this.isPopupOpen()))return this.changeCssClassProps(e.cssClass,t.cssClass),void this.changeRtlProps(e.enableRtl);for(const i of Object.keys(e))switch(i){case"inline":e.inline?(this.getWrapper().appendChild(this.container),this.splitBtn.destroy(),ye(this.element.nextElementSibling),this.container.children.length||this.createWidget()):(this.destroyOtherComp(),this.unWireEvents(),this.container.innerHTML="",this.createSplitBtn());break;case"cssClass":{this.changeCssClassProps(e.cssClass,t.cssClass);let s=e.cssClass.split(" ").concat(t.cssClass.split(" "));s=s.reduce((o,a)=>(o.indexOf(a)<0&&o.push(a),o),[]);let r=0;s.forEach(o=>{0===r&&(o===Zf||o===_b||o===Db||o===BD||o===Sb)&&(X("."+Xf,this.container)&&Ms(X("."+Xf,this.container)),this.createInput(),r++)});break}case"enableRtl":this.isPicker()&&(this.hueSlider.enableRtl=e.enableRtl,this.enableOpacity&&(this.opacitySlider.enableRtl=e.enableRtl),this.setInputEleProps()),this.changeRtlProps(e.enableRtl);break;case"disabled":this.changeDisabledProp(e.disabled);break;case"value":this.value!==t.value&&this.changeValueProp(e.value);break;case"showButtons":this.changeShowBtnProps(e.showButtons);break;case"mode":"Picker"===e.mode?this.switchToPicker():this.switchToPalette();break;case"modeSwitcher":this.changeModeSwitcherProp(e.modeSwitcher);break;case"columns":case"presetColors":this.isPicker()||this.changePaletteProps();break;case"noColor":e.noColor?"Palette"===this.mode&&!this.modeSwitcher&&this.setNoColor():this.changePaletteProps();break;case"enableOpacity":this.changeOpacityProps(e.enableOpacity)}}focusIn(){this.element.parentElement.focus()}};hr([A("#008000ff")],ur.prototype,"value",void 0),hr([A("")],ur.prototype,"cssClass",void 0),hr([A(!1)],ur.prototype,"disabled",void 0),hr([A("Picker")],ur.prototype,"mode",void 0),hr([A(!0)],ur.prototype,"modeSwitcher",void 0),hr([A(null)],ur.prototype,"presetColors",void 0),hr([A(!0)],ur.prototype,"showButtons",void 0),hr([A(10)],ur.prototype,"columns",void 0),hr([A(!1)],ur.prototype,"inline",void 0),hr([A(!1)],ur.prototype,"noColor",void 0),hr([A(!1)],ur.prototype,"enablePersistence",void 0),hr([A(!0)],ur.prototype,"enableOpacity",void 0),hr([A(!1)],ur.prototype,"createPopupOnClick",void 0),hr([Z()],ur.prototype,"select",void 0),hr([Z()],ur.prototype,"change",void 0),hr([Z()],ur.prototype,"beforeTileRender",void 0),hr([Z()],ur.prototype,"beforeOpen",void 0),hr([Z()],ur.prototype,"open",void 0),hr([Z()],ur.prototype,"beforeClose",void 0),hr([Z()],ur.prototype,"beforeModeSwitch",void 0),hr([Z()],ur.prototype,"onModeSwitch",void 0),hr([Z()],ur.prototype,"created",void 0),ur=hr([ts],ur);var Ro=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const WD="e-input-focus",tI=["title","style","class"];let Ar=class extends Ls{constructor(e,t){super(e,t),this.previousValue=null,this.isAngular=!1,this.isHiddenInput=!1,this.isForm=!1,this.inputPreviousValue=null,this.isVue=!1,this.textboxOptions=e}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"floatLabelType":ft.removeFloating(this.textboxWrapper),ft.addFloating(this.respectiveElement,this.floatLabelType,this.placeholder);break;case"enabled":ft.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container),this.bindClearEvent();break;case"width":ft.setWidth(e.width,this.textboxWrapper.container);break;case"value":{const s=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.isBlank(this.value)||(this.value=this.value.toString()),this.isProtectedOnChange=s,ft.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.inputPreviousValue=this.respectiveElement.value,(this.isAngular||this.isVue)&&!0===this.preventChange?(this.previousValue=this.isAngular?this.value:this.previousValue,this.preventChange=!1):(m(this.isAngular)||!this.isAngular||this.isAngular&&!this.preventChange||this.isAngular&&m(this.preventChange))&&this.raiseChangeEvent()}break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkAttributes(!0),ft.validateInputType(this.textboxWrapper.container,this.element);break;case"readonly":ft.setReadonly(this.readonly,this.respectiveElement);break;case"type":"TEXTAREA"!==this.respectiveElement.tagName&&(this.respectiveElement.setAttribute("type",this.type),ft.validateInputType(this.textboxWrapper.container,this.element),this.raiseChangeEvent());break;case"showClearButton":"TEXTAREA"!==this.respectiveElement.tagName&&(ft.setClearButton(this.showClearButton,this.respectiveElement,this.textboxWrapper),this.bindClearEvent());break;case"enableRtl":ft.setEnableRtl(this.enableRtl,[this.textboxWrapper.container]);break;case"placeholder":ft.setPlaceholder(this.placeholder,this.respectiveElement);break;case"autocomplete":"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:this.removeAttributes(["autocomplete"]);break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"locale":this.globalize=new d0(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),ft.setPlaceholder(this.placeholder,this.respectiveElement)}}getModuleName(){return"textbox"}isBlank(e){return!e||/^\s*$/.test(e)}preRender(){if(this.cloneElement=this.element.cloneNode(!0),this.formElement=ae(this.element,"form"),m(this.formElement)||(this.isForm=!0),"EJS-TEXTBOX"===this.element.tagName){const t=J("ej2_instances",this.element),i=this.createElement(this.multiline?"textarea":"input");let s=0;for(;s<this.element.attributes.length;s++){const r=this.element.attributes[s].nodeName;"id"!==r&&(i.setAttribute(r,this.element.attributes[s].nodeValue),i.innerHTML=this.element.innerHTML,"name"===r&&this.element.removeAttribute("name"))}this.element.appendChild(i),this.element=i,pi("ej2_instances",t,this.element)}if(this.updateHTMLAttrToElement(),this.checkAttributes(!1),"TEXTAREA"!==this.element.tagName&&this.element.setAttribute("type",this.type),this.element.setAttribute("role","textbox"),this.globalize=new d0(this.locale),this.l10n=new Xr("textbox",{placeholder:this.placeholder},this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",Ks("textbox")),this.element.hasAttribute("name")||this.element.setAttribute("name",this.element.getAttribute("id")),"INPUT"===this.element.tagName&&this.multiline){this.isHiddenInput=!0,this.textarea=this.createElement("textarea"),this.element.parentNode.insertBefore(this.textarea,this.element),this.element.setAttribute("type","hidden"),this.textarea.setAttribute("name",this.element.getAttribute("name")),this.element.removeAttribute("name"),this.textarea.setAttribute("role",this.element.getAttribute("role")),this.element.removeAttribute("role"),this.textarea.setAttribute("id",Ks("textarea"));const t=["placeholder","disabled","value","readonly","type","autocomplete"];for(let i=0;i<this.element.attributes.length;i++){const s=this.element.attributes[i].nodeName;this.element.hasAttribute(s)&&tI.indexOf(s)<0&&"id"!==s&&"type"!==s&&"e-mappinguid"!==s&&(this.textarea.setAttribute(s,this.element.attributes[i].nodeValue),t.indexOf(s)<0&&(this.element.removeAttribute(s),i--))}}}checkAttributes(e){const t=e?m(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["placeholder","disabled","value","readonly","type","autocomplete"];for(const i of t)if(!m(this.element.getAttribute(i)))switch(i){case"disabled":if(m(this.textboxOptions)||void 0===this.textboxOptions.enabled||e){const s=!("disabled"===this.element.getAttribute(i)||""===this.element.getAttribute(i)||"true"===this.element.getAttribute(i));this.setProperties({enabled:s},!e)}break;case"readonly":if(m(this.textboxOptions)||void 0===this.textboxOptions.readonly||e){const s="readonly"===this.element.getAttribute(i)||""===this.element.getAttribute(i)||"true"===this.element.getAttribute(i);this.setProperties({readonly:s},!e)}break;case"placeholder":(m(this.textboxOptions)||void 0===this.textboxOptions.placeholder||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"autocomplete":(m(this.textboxOptions)||void 0===this.textboxOptions.autocomplete||e)&&this.setProperties({autocomplete:"off"===this.element.autocomplete?"off":"on"},!e);break;case"value":(m(this.textboxOptions)||void 0===this.textboxOptions.value||e)&&this.setProperties({value:this.element.value},!e);break;case"type":(m(this.textboxOptions)||void 0===this.textboxOptions.type||e)&&this.setProperties({type:this.element.type},!e)}}render(){let e=this.cssClass;!m(this.cssClass)&&""!==this.cssClass&&(e=this.getInputValidClassList(this.cssClass)),this.respectiveElement=this.isHiddenInput?this.textarea:this.element,this.textboxWrapper=ft.createInput({element:this.respectiveElement,floatLabelType:this.floatLabelType,properties:{enabled:this.enabled,enableRtl:this.enableRtl,cssClass:e,readonly:this.readonly,placeholder:this.placeholder,showClearButton:this.showClearButton}}),this.updateHTMLAttrToWrapper(),this.isHiddenInput&&this.respectiveElement.parentNode.insertBefore(this.element,this.respectiveElement),this.wireEvents(),m(this.value)||(ft.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value)),m(this.value)||(this.initialValue=this.value,this.setInitialValue()),"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:!m(this.textboxOptions)&&void 0!==this.textboxOptions.autocomplete&&this.removeAttributes(["autocomplete"]),this.previousValue=this.value,this.inputPreviousValue=this.value,this.respectiveElement.defaultValue=this.respectiveElement.value,ft.setWidth(this.width,this.textboxWrapper.container),this.renderComplete()}updateHTMLAttrToWrapper(){if(!m(this.htmlAttributes))for(const e of Object.keys(this.htmlAttributes))if(tI.indexOf(e)>-1)if("class"===e){const t=this.getInputValidClassList(this.htmlAttributes[e]);""!==t&&j([this.textboxWrapper.container],t.split(" "))}else if("style"===e){let t=this.textboxWrapper.container.getAttribute(e);t=m(t)?this.htmlAttributes[e]:t+this.htmlAttributes[e],this.textboxWrapper.container.setAttribute(e,t)}else this.textboxWrapper.container.setAttribute(e,this.htmlAttributes[e])}updateHTMLAttrToElement(){if(!m(this.htmlAttributes))for(const e of Object.keys(this.htmlAttributes))tI.indexOf(e)<0&&this.element.setAttribute(e,this.htmlAttributes[e])}updateCssClass(e,t){ft.setCssClass(this.getInputValidClassList(e),[this.textboxWrapper.container],this.getInputValidClassList(t))}getInputValidClassList(e){let t=e;return!m(e)&&""!==e&&(t=e.replace(/\s+/g," ").trim()),t}setInitialValue(){this.isAngular||this.respectiveElement.setAttribute("value",this.initialValue)}wireEvents(){O.add(this.respectiveElement,"focus",this.focusHandler,this),O.add(this.respectiveElement,"blur",this.focusOutHandler,this),O.add(this.respectiveElement,"input",this.inputHandler,this),O.add(this.respectiveElement,"change",this.changeHandler,this),this.isForm&&O.add(this.formElement,"reset",this.resetForm,this),this.bindClearEvent(),!m(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-autofill")&&this.textboxWrapper.container.classList.contains("e-outline")&&O.add(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler,this)}animationHandler(){this.textboxWrapper.container.classList.add("e-valid-input");const e=this.textboxWrapper.container.querySelector(".e-float-text");m(e)||(e.classList.add("e-label-top"),e.classList.contains("e-label-bottom")&&e.classList.remove("e-label-bottom"))}resetValue(e){const t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.value=e,this.isProtectedOnChange=t}resetForm(){if(this.resetValue(this.isAngular?"":this.initialValue),!m(this.textboxWrapper)){const e=this.textboxWrapper.container.querySelector(".e-float-text");m(e)||(m(this.initialValue)||""===this.initialValue?(e.classList.add("e-label-bottom"),e.classList.remove("e-label-top")):""!==this.initialValue&&(e.classList.add("e-label-top"),e.classList.remove("e-label-bottom")))}}focusHandler(e){this.trigger("focus",{container:this.textboxWrapper.container,event:e,value:this.value})}focusOutHandler(e){(null!==this.previousValue||null!==this.value||""!==this.respectiveElement.value)&&this.previousValue!==this.respectiveElement.value&&this.raiseChangeEvent(e,!0),this.trigger("blur",{container:this.textboxWrapper.container,event:e,value:this.value})}inputHandler(e){const i={event:e,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container};this.inputPreviousValue=this.respectiveElement.value,this.isAngular&&(this.localChange({value:this.respectiveElement.value}),this.preventChange=!0),this.isVue&&(this.preventChange=!0),this.trigger("input",i),e.stopPropagation()}changeHandler(e){this.setProperties({value:this.respectiveElement.value},!0),this.raiseChangeEvent(e,!0),e.stopPropagation()}raiseChangeEvent(e,t){const i={event:e,value:this.value,previousValue:this.previousValue,container:this.textboxWrapper.container,isInteraction:t||!1,isInteracted:t||!1};this.preventChange=!1,this.trigger("change",i),this.previousValue=this.value}bindClearEvent(){this.showClearButton&&"TEXTAREA"!==this.respectiveElement.tagName&&(this.enabled?O.add(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler,this):O.remove(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler))}resetInputHandler(e){e.preventDefault(),(!this.textboxWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.textboxWrapper.container.classList.contains("e-static-clear"))&&(ft.setValue("",this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.setProperties({value:this.respectiveElement.value},!0),this.trigger("input",{event:e,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container}),this.inputPreviousValue=this.respectiveElement.value,this.raiseChangeEvent(e,!0))}unWireEvents(){O.remove(this.respectiveElement,"focus",this.focusHandler),O.remove(this.respectiveElement,"blur",this.focusOutHandler),O.remove(this.respectiveElement,"input",this.inputHandler),O.remove(this.respectiveElement,"change",this.changeHandler),this.isForm&&O.remove(this.formElement,"reset",this.resetForm),!m(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-outline")&&this.textboxWrapper.container.classList.contains("e-autofill")&&O.remove(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler)}destroy(){this.unWireEvents(),"INPUT"===this.element.tagName&&this.multiline&&(ye(this.textboxWrapper.container.getElementsByTagName("textarea")[0]),this.respectiveElement=this.element,this.element.removeAttribute("type")),this.respectiveElement.value=this.respectiveElement.defaultValue,this.respectiveElement.classList.remove("e-input"),this.removeAttributes(["aria-placeholder","aria-disabled","aria-readonly","aria-labelledby"]),m(this.textboxWrapper)||(this.textboxWrapper.container.insertAdjacentElement("afterend",this.respectiveElement),ye(this.textboxWrapper.container)),this.textboxWrapper=null,super.destroy()}addIcon(e,t){ft.addIcon(e,t,this.textboxWrapper.container,this.respectiveElement,this.createElement)}getPersistData(){return this.addOnPersist(["value"])}addAttributes(e){for(const t of Object.keys(e))"disabled"===t?(this.setProperties({enabled:!1},!0),ft.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===t?(this.setProperties({readonly:!0},!0),ft.setReadonly(this.readonly,this.respectiveElement)):"class"===t?this.respectiveElement.classList.add(e[t]):"placeholder"===t?(this.setProperties({placeholder:e[t]},!0),ft.setPlaceholder(this.placeholder,this.respectiveElement)):this.respectiveElement.setAttribute(t,e[t])}removeAttributes(e){for(const t of e)"disabled"===t?(this.setProperties({enabled:!0},!0),ft.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===t?(this.setProperties({readonly:!1},!0),ft.setReadonly(this.readonly,this.respectiveElement)):"placeholder"===t?(this.setProperties({placeholder:null},!0),ft.setPlaceholder(this.placeholder,this.respectiveElement)):this.respectiveElement.removeAttribute(t)}focusIn(){document.activeElement!==this.respectiveElement&&this.enabled&&(this.respectiveElement.focus(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&j([this.textboxWrapper.container],[WD]))}focusOut(){document.activeElement===this.respectiveElement&&this.enabled&&(this.respectiveElement.blur(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&Y([this.textboxWrapper.container],[WD]))}};Ro([A("text")],Ar.prototype,"type",void 0),Ro([A(!1)],Ar.prototype,"readonly",void 0),Ro([A(null)],Ar.prototype,"value",void 0),Ro([A("Never")],Ar.prototype,"floatLabelType",void 0),Ro([A("")],Ar.prototype,"cssClass",void 0),Ro([A(null)],Ar.prototype,"placeholder",void 0),Ro([A("on")],Ar.prototype,"autocomplete",void 0),Ro([A({})],Ar.prototype,"htmlAttributes",void 0),Ro([A(!1)],Ar.prototype,"multiline",void 0),Ro([A(!0)],Ar.prototype,"enabled",void 0),Ro([A(!1)],Ar.prototype,"showClearButton",void 0),Ro([A(!1)],Ar.prototype,"enablePersistence",void 0),Ro([A(null)],Ar.prototype,"width",void 0),Ro([Z()],Ar.prototype,"created",void 0),Ro([Z()],Ar.prototype,"destroyed",void 0),Ro([Z()],Ar.prototype,"change",void 0),Ro([Z()],Ar.prototype,"blur",void 0),Ro([Z()],Ar.prototype,"focus",void 0),Ro([Z()],Ar.prototype,"input",void 0),Ar=Ro([ts],Ar);class pL extends Ls{constructor(){super(...arguments),this.minDistance=5,this.previous=0,this.interval=30,this.timeout=null,this.isSignatureEmpty=!0,this.backgroundLoaded=null,this.clearArray=[],this.isBlazor=!1}initialize(e,t,i){this.element=e,this.canvasContext=this.element.getContext("2d"),this.canvasContext.canvas.tabIndex=0,t&&(this.setBlazorParameter(t),this.dotnetRef=i),this.setHTMLProperties(),m(this.signatureValue)&&this.updateSnapCollection(!0),this.wireEvents(),this.isSignatureEmpty=!0,this.isBlazor||this.trigger("created",null)}setBlazorParameter(e){this.isBlazor=!0,this.backgroundColor=e.backgroundColor,this.backgroundImage=e.backgroundImage,this.disabled=e.disabled,this.isReadOnly=e.isReadOnly,this.maxStrokeWidth=e.maxStrokeWidth||2,this.minStrokeWidth=e.minStrokeWidth||.5,this.velocity=e.velocity||.7,this.strokeColor=e.strokeColor||"#000000",this.saveWithBackground=e.saveWithBackground,this.interval=30,this.previous=0,this.minDistance=5,this.signatureValue=e.signatureValue,this.signatureValue&&this.loadPersistedSignature()}wireEvents(){!m(this.pointColl)||this.isReadOnly||this.disabled?this.pointColl&&(O.add(this.canvasContext.canvas,"mousemove touchmove",this.mouseMoveHandler,this),O.add(this.canvasContext.canvas,"mouseup touchend",this.mouseUpHandler,this),O.add(document,"mouseup",this.mouseUpHandler,this)):(O.add(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler,this),O.add(this.canvasContext.canvas,"keydown",this.keyboardHandler,this),window.addEventListener("resize",this.resizeHandler.bind(this)))}unwireEvents(e){"mouseup"===e||"touchend"===e?(O.remove(this.canvasContext.canvas,"mousemove touchmove",this.mouseMoveHandler),O.remove(this.canvasContext.canvas,"mouseup touchend",this.mouseUpHandler),O.remove(document,"mouseup",this.mouseUpHandler)):(O.remove(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler),O.remove(this.canvasContext.canvas,"mousemove touchmove",this.mouseMoveHandler),O.remove(this.canvasContext.canvas,"mouseup touchend",this.mouseUpHandler),O.remove(document,"mouseup",this.mouseUpHandler),O.remove(this.canvasContext.canvas,"keydown",this.keyboardHandler),window.removeEventListener("resize",this.resizeHandler))}setHTMLProperties(){150===this.element.height&&(this.element.height=this.element.offsetHeight),300===this.element.width&&(this.element.width=this.element.offsetWidth),this.canvasContext.scale(1,1),this.canvasContext.fillStyle=this.strokeColor,this.backgroundImage?this.canvasContext.canvas.style.backgroundImage="url("+this.backgroundImage+")":this.backgroundColor&&(this.canvasContext.canvas.style.backgroundColor=this.backgroundColor)}mouseDownHandler(e){(1===e.buttons||2===e.buttons||"touchstart"===e.type)&&("touchstart"===e.type&&(e.preventDefault(),e.stopPropagation()),this.beginStroke(e),this.wireEvents())}mouseMoveHandler(e){(1===e.buttons||2===e.buttons||"touchmove"===e.type)&&("touchmove"===e.type&&(e.preventDefault(),e.stopPropagation()),this.interval?this.updateStrokeWithThrottle(e):this.updateStroke(e))}mouseUpHandler(e){"touchstart"===e.type&&(e.preventDefault(),e.stopPropagation()),this.endDraw(),this.updateSnapCollection(),this.unwireEvents(e.type),this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","mouseUp"):this.trigger("change",{actionName:"strokeUpdate"}),this.signatureValue=this.snapColl[this.incStep]}keyboardHandler(e){const t={fileName:"Signature",type:"Png",cancel:!1};switch(e.key){case"Delete":this.clear();break;case e.ctrlKey&&"s":this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","beforeSave"):this.trigger("beforeSave",t,i=>{t.cancel||this.save(i.type,i.fileName)}),e.preventDefault(),e.stopImmediatePropagation();break;case e.ctrlKey&&"z":this.undo();break;case e.ctrlKey&&"y":this.redo()}}resizeHandler(){const e=this;this.canvasContext.canvas.width=this.element.offsetWidth,this.canvasContext.canvas.height=this.element.offsetHeight,this.canvasContext.scale(1,1);const t=new Image;t.src=this.snapColl[this.incStep],t.onload=()=>{e.canvasContext.clearRect(0,0,e.element.width,e.element.height),e.canvasContext.drawImage(t,0,0,e.element.width,e.element.height)}}beginStroke(e){this.refresh(),this.updateStroke(e)}updateStroke(e){const t=this.createPoint(e);this.addPoint(t)}updateStrokeWithThrottle(e){const t=Date.now(),i=this.interval-(t-this.previous);this.storedArgs=e,i<=0||i>this.interval?(this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.previous=t,this.updateStroke(this.storedArgs),this.timeout||(this.storedArgs=null)):this.timeout||(this.timeout=window.setTimeout(this.delay.bind(this),i))}delay(){this.previous=Date.now(),this.timeout=null,this.updateStroke(this.storedArgs),this.timeout||(this.storedArgs=null)}createPoint(e){const t=this.canvasContext.canvas.getBoundingClientRect();return"mousedown"===e.type||"mousemove"===e.type?this.point(e.clientX-t.left,e.clientY-t.top,(new Date).getTime()):this.point(e.touches[0].clientX-t.left,e.touches[0].clientY-t.top,(new Date).getTime())}point(e,t,i){return this.pointX=e,this.pointY=t,this.time=i||(new Date).getTime(),{x:this.pointX,y:this.pointY,time:this.time}}addPoint(e){const t=this.pointColl;let i,s;const r=t.length>0&&t[t.length-1],o=!!r&&this.distanceTo(r)<=this.minDistance;(!r||!r||!o)&&(t.push(e),t.length>2&&(3===t.length&&t.unshift(t[0]),i=this.calculateCurveControlPoints(t[0],t[1],t[2]).controlPoint2,s=this.calculateCurveControlPoints(t[1],t[2],t[3]).controlPoint1,this.startPoint=t[1],this.controlPoint1=i,this.controlPoint2=s,this.endPoint=t[2],this.startDraw(),t.shift()))}startDraw(){let e;e=this.pointVelocityCalc(this.startPoint),e=this.velocity*e+(1-this.velocity)*this.lastVelocity;const t=Math.max(this.maxStrokeWidth/(e+1),this.minStrokeWidth);this.curveDraw(this.lastWidth,t),this.lastVelocity=e,this.lastWidth=t}endDraw(){const t=this.pointColl[0];!(this.pointColl.length>2)&&t&&this.strokeDraw(t)}curveDraw(e,t){const i=this.canvasContext;let s,r,o,a,u,p,y,E,_,D;const L=t-e,V=this.bezierLengthCalc(),H=2*Math.ceil(V);for(i.beginPath(),r=0;r<H;r++)o=r/H,a=o*o,u=a*o,p=1-o,y=p*p,E=y*p,_=E*this.startPoint.x,_+=3*y*o*this.controlPoint1.x,_+=3*p*a*this.controlPoint2.x,_+=u*this.endPoint.x,D=E*this.startPoint.y,D+=3*y*o*this.controlPoint1.y,D+=3*p*a*this.controlPoint2.y,D+=u*this.endPoint.y,s=Math.min(e+u*L,this.maxStrokeWidth),this.arcDraw(_,D,s);i.closePath(),i.fill(),this.isSignatureEmpty=!1}strokeDraw(e){const t=this.canvasContext,i=(this.minStrokeWidth+this.maxStrokeWidth)/2;t.beginPath(),this.arcDraw(e.x,e.y,i),t.closePath(),t.fill(),this.isSignatureEmpty=!1}arcDraw(e,t,i){const s=this.canvasContext;s.moveTo(e,t),s.arc(e,t,i,0,2*Math.PI,!1)}calculateCurveControlPoints(e,t,i){const s=e.x-t.x,r=e.y-t.y,o=t.x-i.x,a=t.y-i.y,u_x=(e.x+t.x)/2,u_y=(e.y+t.y)/2,p_x=(t.x+i.x)/2,p_y=(t.y+i.y)/2,y=Math.sqrt(s*s+r*r),E=Math.sqrt(o*o+a*a),L=E/(y+E),H=t.x-(p_x+(u_x-p_x)*L),se=t.y-(p_y+(u_y-p_y)*L);return{controlPoint1:this.point(u_x+H,u_y+se,0),controlPoint2:this.point(p_x+H,p_y+se,0)}}bezierLengthCalc(){let i,s,r,o,a,u,p,y,t=0;for(i=0;i<=10;i++)s=i/10,r=this.bezierPointCalc(s,this.startPoint.x,this.controlPoint1.x,this.controlPoint2.x,this.endPoint.x),o=this.bezierPointCalc(s,this.startPoint.y,this.controlPoint1.y,this.controlPoint2.y,this.endPoint.y),i>0&&(p=r-a,y=o-u,t+=Math.sqrt(p*p+y*y)),a=r,u=o;return t}bezierPointCalc(e,t,i,s,r){return t*(1-e)*(1-e)*(1-e)+3*i*(1-e)*(1-e)*e+3*s*(1-e)*e*e+r*e*e*e}pointVelocityCalc(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):0}distanceTo(e){return Math.sqrt(Math.pow(this.pointX-e.x,2)+Math.pow(this.pointY-e.y,2))}isRead(e){e?O.remove(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler):this.disabled||O.add(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler,this)}enableOrDisable(e){this.disabled=e,e?(this.reDraw("0.5"),this.isRead(!0)):(this.reDraw("1"),this.isRead(!1))}reDraw(e){const t=this.canvasContext.getImageData(0,0,this.element.width,this.element.height);this.canvasContext.clearRect(0,0,this.element.width,this.element.height),this.element.style.opacity=e,this.canvasContext.putImageData(t,0,0)}updateSnapCollection(e){if(m(this.incStep)?(this.incStep=-1,this.incStep++,this.snapColl=[],this.clearArray=[]):this.incStep++,this.incStep<this.snapColl.length&&(this.snapColl.length=this.incStep),this.incStep>0){const t=this.createElement("canvas",{className:"e-"+this.getModuleName()+"-wrapper"}),i=t.getContext("2d");t.width=this.canvasContext.canvas.width,t.height=this.canvasContext.canvas.height,i.drawImage(this.canvasContext.canvas,0,0,t.width,t.height),this.snapColl.push(t.toDataURL())}else this.snapColl.push(this.canvasContext.canvas.toDataURL());e&&this.clearArray.push(this.incStep)}setBackgroundImage(e){const t=this,i=new Image;i.crossOrigin="anonymous",i.src=e,i.onload=()=>{t.canvasContext.globalCompositeOperation="source-over",t.canvasContext.drawImage(i,0,0,t.element.width,t.element.height),t.updateSnapCollection(),t.saveBackground(!0)},this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height)}setBackgroundColor(e){const t=this.canvasContext;let i,s;for(t.strokeStyle=e,i=1;i<=t.canvas.width;i++)for(s=1;s<=t.canvas.height;s++)t.strokeRect(0,0,i,s);this.updateSnapCollection()}loadPersistedSignature(){if(m(this.signatureValue))return;const e=this,t=new Image;t.src=this.signatureValue,t.onload=()=>{e.canvasContext.clearRect(0,0,e.element.width,e.element.height),e.canvasContext.drawImage(t,0,0),e.updateSnapCollection()},this.isSignatureEmpty=!1}getBlob(e){const t=e.split(","),i=t[0].match(/:(.*?);/)[1],s=atob(t[1]);let r=s.length;const o=new Uint8Array(r);for(;r--;)o[r]=s.charCodeAt(r);return new Blob([o],{type:i})}download(e,t){const i=URL.createObjectURL(e),s=document.createElement("a");s.href=i,s.target="_parent",s.download=t,(document.body||document.documentElement).appendChild(s),s.click(),s.parentNode.removeChild(s)}refresh(){this.pointColl=[],this.lastVelocity=0,this.lastWidth=(this.minStrokeWidth+this.maxStrokeWidth)/2}clear(){this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height),this.refresh(),this.updateSnapCollection(!0),this.isSignatureEmpty=!0,this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","Clear"):this.trigger("change",{actionName:"clear"})}undo(){const t=this;if(this.incStep>0){this.incStep--;const i=new Image;i.src=this.snapColl[this.incStep],i.onload=()=>{t.canvasContext.clearRect(0,0,t.element.width,t.element.height),t.canvasContext.drawImage(i,0,0,t.element.width,t.element.height)}}this.isClear(),this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","Undo"):this.trigger("change",{actionName:"undo"})}redo(){const t=this;if(this.incStep<this.snapColl.length-1){this.incStep++;const i=new Image;i.src=this.snapColl[this.incStep],i.onload=()=>{t.canvasContext.clearRect(0,0,t.element.width,t.element.height),t.canvasContext.drawImage(i,0,0,t.element.width,t.element.height)}}this.isClear(),this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","Redo"):this.trigger("change",{actionName:"redo"})}isClear(){if(this.clearArray){let e=!1;for(let t=0;t<this.clearArray.length;t++)this.clearArray[t]===this.incStep&&(this.isSignatureEmpty=!0,e=!0);e||(this.isSignatureEmpty=!1)}}isEmpty(){return this.isSignatureEmpty}canUndo(){return this.incStep>0}canRedo(){return this.incStep<this.snapColl.length-1}draw(e,t,i){this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height),this.canvasContext.font=(i=i||30)+"px "+(t=t||"Arial"),this.canvasContext.textAlign="center",this.canvasContext.textBaseline="middle",this.canvasContext.fillText(e,this.element.width/2,this.element.height/2),this.updateSnapCollection(),this.isSignatureEmpty=!1}load(e,t,i){i=i||this.element.height,t=t||this.element.width,this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height);const s=this,r=new Image;r.src=e,r.onload=()=>{Promise.all([createImageBitmap(r,0,0,t,i)]).then(o=>{const a=document.createElement("canvas");a.width=t,a.height=i,a.getContext("2d").drawImage(o[0],0,0),s.canvasContext.drawImage(a,0,0,t,i,0,0,s.element.width,s.element.height),s.updateSnapCollection()})},this.isSignatureEmpty=!1}saveBackground(e){let t;if(t=e&&this.backgroundImage?this.snapColl[this.incStep-1]:this.snapColl[this.incStep],e||(this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height),this.backgroundImage?this.setBackgroundImage(this.backgroundImage):this.backgroundColor&&(this.setBackgroundColor(this.backgroundColor),e=!0)),e){const i=this,s=new Image;s.crossOrigin="anonymous",s.src=t,s.onload=()=>{i.backgroundLoaded=!0,i.canvasContext.globalCompositeOperation="source-over",i.canvasContext.drawImage(s,0,0,i.element.width,i.element.height),i.save(i.fileType,i.fileName)}}}save(e,t){if(this.saveWithBackground&&null==this.backgroundLoaded&&(this.backgroundImage||this.backgroundColor))this.backgroundLoaded=!1,this.fileType=e,this.fileName=t,this.saveBackground(!1);else if("Svg"===e)this.toSVG(t=t||"Signature");else if("Jpeg"===e)if(t=t||"Signature",!this.saveWithBackground||this.saveWithBackground&&!this.backgroundImage&&!this.backgroundColor)this.toJPEG(t);else{const i=this.canvasContext.canvas.toDataURL("image/jpeg");this.download(this.getBlob(i),t+".jpeg")}else{t=t||"Signature";const i=this.canvasContext.canvas.toDataURL("image/png");this.download(this.getBlob(i),t+".png")}this.saveWithBackground&&this.backgroundLoaded&&this.resetSnap()}resetSnap(){this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height);const e=this,t=new Image;t.src=this.snapColl[this.incStep-1],t.onload=()=>{e.canvasContext.drawImage(t,0,0,e.element.width,e.element.height),e.updateSnapCollection()},this.backgroundLoaded=null,this.snapColl.pop(),this.incStep--,this.snapColl.pop(),this.incStep--}toJPEG(e){const t=this.snapColl[this.incStep];this.setBackgroundColor("#ffffff");const i=this,s=new Image;s.crossOrigin="anonymous",s.src=t,s.onload=()=>{i.canvasContext.globalCompositeOperation="source-over",i.canvasContext.drawImage(s,0,0,i.element.width,i.element.height);const r=i.canvasContext.canvas.toDataURL("image/jpeg");i.download(i.getBlob(r),e+".jpeg"),i.canvasContext.clearRect(0,0,i.canvasContext.canvas.width,i.canvasContext.canvas.height),this.resizeHandler()},this.snapColl.pop(),this.incStep--}toSVG(e){const t=this.canvasContext.canvas.toDataURL(),i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("width",this.canvasContext.canvas.width.toString()),i.setAttribute("height",this.canvasContext.canvas.height.toString());const r=document.createElementNS("http://www.w3.org/2000/svg","image");r.setAttributeNS(null,"height",this.canvasContext.canvas.height.toString()),r.setAttributeNS(null,"width",this.canvasContext.canvas.width.toString()),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t),i.appendChild(r);const E="data:image/svg+xml;base64,"+btoa(`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="${this.canvasContext.canvas.width}" height="${this.canvasContext.canvas.height}">`+i.innerHTML+"</svg>");return null==e?E:(this.download(this.getBlob(E),e+".svg"),null)}saveAsBlob(){return this.getBlob(this.canvasContext.canvas.toDataURL("image/png"))}getSignature(e){if("Jpeg"===e){const t=this.canvasContext.getImageData(0,0,this.element.width,this.element.height),i=t.data;for(let r=0;r<i.length;r+=4)i[r+3]<255&&(i[r]=255-i[r],i[r+1]=255-i[r+1],i[r+2]=255-i[r+2],i[r+3]=255-i[r+3]);this.canvasContext.putImageData(t,0,0);const s=this.canvasContext.canvas.toDataURL("image/jpeg");return this.resizeHandler(),s}return"Svg"===e?this.toSVG(null):this.canvasContext.canvas.toDataURL("image/png")}getModuleName(){return"signature"}getPersistData(){return this.signatureValue=this.snapColl[this.incStep],this.addOnPersist(["signatureValue"])}destroy(){this.unwireEvents(null),Y([this.element],"e-"+this.getModuleName()),this.element.removeAttribute("tabindex"),this.pointColl=null,super.destroy()}propertyChanged(e,t){const i=this.canvasContext;switch(e){case"backgroundColor":i.canvas.style.backgroundColor=t,this.backgroundColor=t;break;case"backgroundImage":i.canvas.style.backgroundImage="url("+t+")",this.backgroundImage=t;break;case"strokeColor":i.fillStyle=t,this.strokeColor=t;break;case"saveWithBackground":this.saveWithBackground=t;break;case"maxStrokeWidth":this.maxStrokeWidth=t;break;case"minStrokeWidth":this.minStrokeWidth=t;break;case"velocity":this.velocity=t;break;case"isReadOnly":this.isRead(t);break;case"disabled":this.enableOrDisable(t)}}}var fa=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let No=class extends pL{constructor(e,t){super(e,t)}preRender(){}render(){this.initialize()}initialize(){j([this.element],"e-"+this.getModuleName()),super.initialize(this.element),this.enablePersistence&&this.loadPersistedSignature()}getModuleName(){return"signature"}getPersistData(){return this.addOnPersist(["signatureValue"])}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"backgroundColor":super.propertyChanged(i,e.backgroundColor);break;case"backgroundImage":super.propertyChanged(i,e.backgroundImage);break;case"strokeColor":e.strokeColor!==t.strokeColor&&super.propertyChanged(i,e.strokeColor);break;case"saveWithBackground":super.propertyChanged(i,e.saveWithBackground);break;case"isReadOnly":super.propertyChanged(i,e.isReadOnly);break;case"disabled":super.propertyChanged(i,e.disabled)}}};fa([A("")],No.prototype,"backgroundColor",void 0),fa([A("")],No.prototype,"backgroundImage",void 0),fa([A(!1)],No.prototype,"disabled",void 0),fa([A(!1)],No.prototype,"isReadOnly",void 0),fa([A(!0)],No.prototype,"saveWithBackground",void 0),fa([A("#000000")],No.prototype,"strokeColor",void 0),fa([A(.5)],No.prototype,"minStrokeWidth",void 0),fa([A(2)],No.prototype,"maxStrokeWidth",void 0),fa([A(.7)],No.prototype,"velocity",void 0),fa([A("en-US")],No.prototype,"locale",void 0),fa([A(!1)],No.prototype,"enableRtl",void 0),fa([A(!1)],No.prototype,"enablePersistence",void 0),fa([Z()],No.prototype,"beforeSave",void 0),fa([Z()],No.prototype,"change",void 0),fa([Z()],No.prototype,"created",void 0),No=fa([ts],No);var iI=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const Jf="e-rtl",Md="e-overlay",dy="e-nav-arrow",Np="e-nav-right-arrow",TE="e-nav-left-arrow",em="e-scroll-nav",sI="e-scroll-right-nav",qD="e-scroll-left-nav",mL="e-scroll-device",AE="e-scroll-overlay",nI="e-scroll-right-overlay",rI="e-scroll-left-overlay";let oI=(()=>{let n=class extends Ls{constructor(t,i){super(t,i)}preRender(){this.browser=Q.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=Q.isDevice,this.customStep=!0;const t=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===t.id&&(t.id=Ks("hscroll"),this.uniqueId=!0),t.style.display="block",this.enableRtl&&t.classList.add(Jf)}render(){this.touchModule=new Sn(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),O.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add(mL),this.createOverlay(this.element)):this.createNavIcon(this.element),this.setScrollState()}setScrollState(){m(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0}initialize(){const t=this.createElement("div",{className:"e-hscroll-content"}),i=this.createElement("div",{className:"e-hscroll-bar"});i.setAttribute("tabindex","-1");const s=this.element,r=[].slice.call(s.children);for(const o of r)t.appendChild(o);i.appendChild(t),s.appendChild(i),i.style.overflowX="hidden",this.scrollEle=i,this.scrollItems=t}getPersistData(){return this.addOnPersist(["scrollStep"])}getModuleName(){return"hScroll"}destroy(){const t=this.element;t.style.display="",t.classList.remove("e-hscroll"),t.classList.remove(mL);const i=at(".e-"+t.id+"_nav."+em,t),s=at("."+AE,t);[].slice.call(s).forEach(r=>{ye(r)});for(const r of[].slice.call(this.scrollItems.children))t.appendChild(r);this.uniqueId&&this.element.removeAttribute("id"),ye(this.scrollEle),i.length>0&&(ye(i[0]),m(i[1])||ye(i[1])),O.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,super.destroy()}disable(t){const i=at(".e-scroll-nav:not(."+Md+")",this.element);t?this.element.classList.add(Md):this.element.classList.remove(Md),[].slice.call(i).forEach(s=>{s.setAttribute("tabindex",t?"-1":"0")})}createOverlay(t){const i=t.id.concat("_nav"),s=this.createElement("div",{className:AE+" "+nI}),r="e-"+t.id.concat("_nav "+em+" "+sI),o=this.createElement("div",{id:i.concat("_right"),className:r}),a=this.createElement("div",{className:Np+" "+dy+" e-icons"});o.appendChild(a);const u=this.createElement("div",{className:AE+" "+rI});this.ieCheck&&o.classList.add("e-ie-align"),t.appendChild(s),t.appendChild(o),t.insertBefore(u,t.firstChild),this.eventBinding([o])}createNavIcon(t){const i=t.id.concat("_nav"),s="e-"+t.id.concat("_nav "+em+" "+sI),r=this.createElement("div",{id:i.concat("_right"),className:s});r.setAttribute("aria-disabled","false");const o=this.createElement("div",{className:Np+" "+dy+" e-icons"}),a="e-"+t.id.concat("_nav "+em+" "+qD),u=this.createElement("div",{id:i.concat("_left"),className:a+" "+Md});u.setAttribute("aria-disabled","true");const p=this.createElement("div",{className:TE+" "+dy+" e-icons"});u.appendChild(p),r.appendChild(o),t.appendChild(r),t.insertBefore(u,t.firstChild),this.ieCheck&&(r.classList.add("e-ie-align"),u.classList.add("e-ie-align")),this.eventBinding([r,u])}onKeyPress(t){if("Enter"===t.key){const i=()=>{this.keyTimeout=!0,this.eleScrolling(10,t.target,!0)};this.keyTimer=window.setTimeout(()=>{i()},100)}}onKeyUp(t){"Enter"===t.key&&(this.keyTimeout?this.keyTimeout=!1:t.target.click(),clearTimeout(this.keyTimer))}eventBinding(t){[].slice.call(t).forEach(i=>{new Sn(i,{tapHold:this.tabHoldHandler.bind(this),tapHoldThreshold:500}),i.addEventListener("keydown",this.onKeyPress.bind(this)),i.addEventListener("keyup",this.onKeyUp.bind(this)),i.addEventListener("mouseup",this.repeatScroll.bind(this)),i.addEventListener("touchend",this.repeatScroll.bind(this)),i.addEventListener("contextmenu",s=>{s.preventDefault()}),O.add(i,"click",this.clickEventHandler,this)})}repeatScroll(){clearInterval(this.timeout)}tabHoldHandler(t){let i=t.originalEvent.target;i=this.contains(i,em)?i.firstElementChild:i;const r=()=>{this.eleScrolling(10,i,!0)};this.timeout=window.setInterval(()=>{r()},50)}contains(t,i){return t.classList.contains(i)}eleScrolling(t,i,s){const r=this.element;let o=i.classList;o.contains(em)&&(o=i.querySelector("."+dy).classList),this.contains(r,Jf)&&this.browserCheck&&(t=-t),!this.contains(r,Jf)||this.browserCheck||this.ieCheck?o.contains(Np)?this.frameScrollRequest(t,"add",s):this.frameScrollRequest(t,"",s):o.contains(TE)?this.frameScrollRequest(t,"add",s):this.frameScrollRequest(t,"",s)}clickEventHandler(t){this.eleScrolling(this.scrollStep,t.target,!1)}swipeHandler(t){const i=this.scrollEle;let s;s=t.velocity<=1?t.distanceX/(10*t.velocity):t.distanceX/t.velocity;let r=.5;const o=()=>{const a=Math.sin(r);a<=0?window.cancelAnimationFrame(a):("Left"===t.swipeDirection?i.scrollLeft+=s*a:"Right"===t.swipeDirection&&(i.scrollLeft-=s*a),r-=.5,window.requestAnimationFrame(o))};o()}scrollUpdating(t,i){"add"===i?this.scrollEle.scrollLeft+=t:this.scrollEle.scrollLeft-=t}frameScrollRequest(t,i,s){if(s)return void this.scrollUpdating(t,i);this.customStep||[].slice.call(at("."+AE,this.element)).forEach(a=>{t-=a.offsetWidth});const o=()=>{let a,u;this.contains(this.element,Jf)&&this.browserCheck?(a=-t,u=-10):(a=t,u=10),a<10?window.cancelAnimationFrame(u):(this.scrollUpdating(u,i),t-=u,window.requestAnimationFrame(o))};o()}touchHandler(t){const i=this.scrollEle;let s=t.distanceX;this.ieCheck&&this.contains(this.element,Jf)&&(s=-s),"Left"===t.scrollDirection?i.scrollLeft=i.scrollLeft+s:"Right"===t.scrollDirection&&(i.scrollLeft=i.scrollLeft-s)}arrowDisabling(t,i){if(this.isDevice){const r=(m(t)?i:t).querySelector("."+dy);m(t)?ua(r,[Np],[TE]):ua(r,[TE],[Np])}else t.classList.add(Md),t.setAttribute("aria-disabled","true"),t.removeAttribute("tabindex"),i.classList.remove(Md),i.setAttribute("aria-disabled","false"),i.setAttribute("tabindex","0");this.repeatScroll()}scrollHandler(t){const i=t.target,s=i.offsetWidth,o=this.element.querySelector("."+qD),a=this.element.querySelector("."+sI);let u=this.element.querySelector("."+rI),p=this.element.querySelector("."+nI),y=i.scrollLeft;if(y<=0&&(y=-y),this.isDevice&&(this.enableRtl&&!(this.browserCheck||this.ieCheck)&&(u=this.element.querySelector("."+nI),p=this.element.querySelector("."+rI)),u.style.width=y<40?y+"px":"40px",p.style.width=i.scrollWidth-Math.ceil(s+y)<40?i.scrollWidth-Math.ceil(s+y)+"px":"40px"),0===y)this.arrowDisabling(o,a);else if(Math.ceil(s+y+.1)>=i.scrollWidth)this.arrowDisabling(a,o);else{const E=this.element.querySelector("."+em+"."+Md);E&&(E.classList.remove(Md),E.setAttribute("aria-disabled","false"),E.setAttribute("tabindex","0"))}}onPropertyChanged(t,i){for(const s of Object.keys(t))switch(s){case"scrollStep":this.setScrollState();break;case"enableRtl":t.enableRtl?this.element.classList.add(Jf):this.element.classList.remove(Jf)}}};return iI([A(null)],n.prototype,"scrollStep",void 0),n=iI([ts],n),n})();var GD=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const aI="e-rtl",tm="e-overlay",DE="e-nav-arrow",lI="e-nav-up-arrow",kb="e-nav-down-arrow",py="e-scroll-nav",yL="e-scroll-up-nav",YD="e-scroll-down-nav",vL="e-scroll-device",l="e-scroll-overlay",c="e-scroll-up-overlay",h="e-scroll-down-overlay";let g=class extends Ls{constructor(e,t){super(e,t)}preRender(){this.browser=Q.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=Q.isDevice,this.customStep=!0;const e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=Ks("vscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add(aI)}render(){this.touchModule=new Sn(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),O.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add(vL),this.createOverlayElement(this.element)):this.createNavIcon(this.element),this.setScrollState(),O.add(this.element,"wheel",this.wheelEventHandler,this)}setScrollState(){m(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0}initialize(){const e=Ds("div",{className:"e-vscroll-content"}),t=Ds("div",{className:"e-vscroll-bar"});t.setAttribute("tabindex","-1");const i=this.element,s=[].slice.call(i.children);for(const r of s)e.appendChild(r);t.appendChild(e),i.appendChild(t),t.style.overflow="hidden",this.scrollEle=t,this.scrollItems=e}getPersistData(){return this.addOnPersist(["scrollStep"])}getModuleName(){return"vScroll"}destroy(){const e=this.element;e.style.display="",Y([this.element],["e-vscroll",vL]);const t=at(".e-"+e.id+"_nav."+py,e),i=at("."+l,e);[].slice.call(i).forEach(s=>{ye(s)});for(const s of[].slice.call(this.scrollItems.children))e.appendChild(s);this.uniqueId&&this.element.removeAttribute("id"),ye(this.scrollEle),t.length>0&&(ye(t[0]),m(t[1])||ye(t[1])),O.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,super.destroy()}disable(e){const t=at(".e-scroll-nav:not(."+tm+")",this.element);e?this.element.classList.add(tm):this.element.classList.remove(tm),[].slice.call(t).forEach(i=>{i.setAttribute("tabindex",e?"-1":"0")})}createOverlayElement(e){const t=e.id.concat("_nav"),i=Ds("div",{className:l+" "+h}),s="e-"+e.id.concat("_nav "+py+" "+YD),r=Ds("div",{id:t.concat("down"),className:s}),o=Ds("div",{className:kb+" "+DE+" e-icons"});r.appendChild(o);const a=Ds("div",{className:l+" "+c});this.ieCheck&&r.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(r),e.insertBefore(a,e.firstChild),this.eventBinding([r])}createNavIcon(e){const t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav "+py+" "+YD),s=Ds("div",{id:t.concat("_down"),className:i});s.setAttribute("aria-disabled","false");const r=Ds("div",{className:kb+" "+DE+" e-icons"}),o="e-"+e.id.concat("_nav "+py+" "+yL),a=Ds("div",{id:t.concat("_up"),className:o+" "+tm});a.setAttribute("aria-disabled","true");const u=Ds("div",{className:lI+" "+DE+" e-icons"});a.appendChild(u),s.appendChild(r),s.setAttribute("tabindex","0"),e.appendChild(s),e.insertBefore(a,e.firstChild),this.ieCheck&&(s.classList.add("e-ie-align"),a.classList.add("e-ie-align")),this.eventBinding([s,a])}onKeyPress(e){if("Enter"===e.key){const t=()=>{this.keyTimeout=!0,this.eleScrolling(10,e.target,!0)};this.keyTimer=window.setTimeout(()=>{t()},100)}}onKeyUp(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))}eventBinding(e){[].slice.call(e).forEach(t=>{new Sn(t,{tapHold:this.tabHoldHandler.bind(this),tapHoldThreshold:500}),t.addEventListener("keydown",this.onKeyPress.bind(this)),t.addEventListener("keyup",this.onKeyUp.bind(this)),t.addEventListener("mouseup",this.repeatScroll.bind(this)),t.addEventListener("touchend",this.repeatScroll.bind(this)),t.addEventListener("contextmenu",i=>{i.preventDefault()}),O.add(t,"click",this.clickEventHandler,this)})}repeatScroll(){clearInterval(this.timeout)}tabHoldHandler(e){let t=e.originalEvent.target;t=this.contains(t,py)?t.firstElementChild:t;const s=()=>{this.eleScrolling(10,t,!0)};this.timeout=window.setInterval(()=>{s()},50)}contains(e,t){return e.classList.contains(t)}eleScrolling(e,t,i){let s=t.classList;s.contains(py)&&(s=t.querySelector("."+DE).classList),s.contains(kb)?this.frameScrollRequest(e,"add",i):s.contains(lI)&&this.frameScrollRequest(e,"",i)}clickEventHandler(e){this.eleScrolling(this.scrollStep,e.target,!1)}wheelEventHandler(e){e.preventDefault(),this.frameScrollRequest(this.scrollStep,e.deltaY>0?"add":"",!1)}swipeHandler(e){const t=this.scrollEle;let i;i=e.velocity<=1?e.distanceY/(10*e.velocity):e.distanceY/e.velocity;let s=.5;const r=()=>{const o=Math.sin(s);o<=0?window.cancelAnimationFrame(o):("Up"===e.swipeDirection?t.scrollTop+=i*o:"Down"===e.swipeDirection&&(t.scrollTop-=i*o),s-=.02,window.requestAnimationFrame(r))};r()}scrollUpdating(e,t){"add"===t?this.scrollEle.scrollTop+=e:this.scrollEle.scrollTop-=e}frameScrollRequest(e,t,i){if(i)return void this.scrollUpdating(e,t);this.customStep||[].slice.call(at("."+l,this.element)).forEach(o=>{e-=o.offsetHeight});const r=()=>{e<10?window.cancelAnimationFrame(10):(this.scrollUpdating(10,t),e-=10,window.requestAnimationFrame(r))};r()}touchHandler(e){const t=this.scrollEle,i=e.distanceY;"Up"===e.scrollDirection?t.scrollTop=t.scrollTop+i:"Down"===e.scrollDirection&&(t.scrollTop=t.scrollTop-i)}arrowDisabling(e,t){if(this.isDevice){const s=(m(e)?t:e).querySelector("."+DE);m(e)?ua(s,[kb],[lI]):ua(s,[lI],[kb])}else e.classList.add(tm),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove(tm),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()}scrollEventHandler(e){const t=e.target,i=t.offsetHeight,s=this.element.querySelector("."+yL),r=this.element.querySelector("."+YD),o=this.element.querySelector("."+c),a=this.element.querySelector("."+h);let u=t.scrollTop;if(u<=0&&(u=-u),this.isDevice&&(o.style.height=u<40?u+"px":"40px",a.style.height=t.scrollHeight-Math.ceil(i+u)<40?t.scrollHeight-Math.ceil(i+u)+"px":"40px"),0===u)this.arrowDisabling(s,r);else if(Math.ceil(i+u+.1)>=t.scrollHeight)this.arrowDisabling(r,s);else{const p=this.element.querySelector("."+py+"."+tm);p&&(p.classList.remove(tm),p.setAttribute("aria-disabled","false"),p.setAttribute("tabindex","0"))}}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add(aI):this.element.classList.remove(aI)}}};function b(n,e,t,i,s,r){let o,a;const u=e.parentElement;if("vscroll"===i?(o=r||e.getBoundingClientRect().height,a=t.getBoundingClientRect().height):(o=e.getBoundingClientRect().width,a=t.getBoundingClientRect().width),o<a)return S(n,e,t,i,s,r);if(u){const p=u.getBoundingClientRect().width;return p<o&&"hscroll"===i?(a=p,e.style.maxWidth=p+"px",S(n,e,t,i,s,r)):t}return t}function S(n,e,t,i,s,r){const o=n("div",{className:"e-menu-"+i});let a;return e.appendChild(o),o.appendChild(t),r?(o.style.overflow="hidden",o.style.height=r+"px"):(o.style.maxHeight=e.style.maxHeight,e.style.overflow="hidden"),"vscroll"===i?(a=new g({enableRtl:s},o),a.scrollStep=X(".e-"+i+"-bar",e).offsetHeight/2):(a=new oI({enableRtl:s},o),a.scrollStep=X(".e-"+i+"-bar",e).offsetWidth),o}function T(n,e,t){if(n){const i=X(".e-menu-parent",e);i?(!t||t===i)&&(n.destroy(),e.parentElement.appendChild(i),ye(e)):(n.destroy(),ye(e))}}GD([A(null)],g.prototype,"scrollStep",void 0),g=GD([ts],g);var k=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const R="enter",B="escape",$="e-focused",le="e-menu-header",de="e-selected",$e="e-separator",_t="uparrow",kt="downarrow",Yt="leftarrow",et="rightarrow",vi="home",vs="end",en="e-caret",Ko="e-menu-item",Pd="e-disabled",Fp="e-menu-hide",kE="e-icons",im="e-menu-popup";class Oh extends Is{}k([A("id")],Oh.prototype,"itemId",void 0),k([A("parentId")],Oh.prototype,"parentId",void 0),k([A("text")],Oh.prototype,"text",void 0),k([A("iconCss")],Oh.prototype,"iconCss",void 0),k([A("url")],Oh.prototype,"url",void 0),k([A("separator")],Oh.prototype,"separator",void 0),k([A("items")],Oh.prototype,"children",void 0);class gc extends Is{}k([A(null)],gc.prototype,"iconCss",void 0),k([A("")],gc.prototype,"id",void 0),k([A(!1)],gc.prototype,"separator",void 0),k([cl([],gc)],gc.prototype,"items",void 0),k([A("")],gc.prototype,"text",void 0),k([A("")],gc.prototype,"url",void 0);class fy extends Is{}k([A("SlideDown")],fy.prototype,"effect",void 0),k([A(400)],fy.prototype,"duration",void 0),k([A("ease")],fy.prototype,"easing",void 0);let dr=class extends Ls{constructor(e,t){super(e,t),this.navIdx=[],this.animation=new Wn({}),this.isTapHold=!1,this.tempItem=[],this.showSubMenuOn="Auto"}preRender(){if(!this.isMenu){let e;if("EJS-CONTEXTMENU"===this.element.tagName){e=this.createElement("ul",{id:Ks(this.getModuleName()),className:"e-control e-lib e-"+this.getModuleName()});const t=J("ej2_instances",this.element);Y([this.element],["e-control","e-lib","e-"+this.getModuleName()]),this.clonedElement=this.element,this.element=e,pi("ej2_instances",t,this.element)}else{e=this.createElement("ul",{id:Ks(this.getModuleName())}),Pi([].slice.call(this.element.cloneNode(!0).children),e);const t=this.element.nextElementSibling;t?this.element.parentElement.insertBefore(e,t):this.element.parentElement.appendChild(e),this.clonedElement=e}this.clonedElement.style.display="none"}if("EJS-MENU"===this.element.tagName){let e=this.element;const t=J("ej2_instances",e),i=this.createElement("ul"),s=this.createElement("EJS-MENU",{className:"e-"+this.getModuleName()+"-wrapper"});for(let r=0,o=e.attributes.length;r<o;r++)i.setAttribute(e.attributes[r].nodeName,e.attributes[r].nodeValue);e.parentNode.insertBefore(s,e),ye(e),e=i,s.appendChild(e),pi("ej2_instances",t,e),this.clonedElement=s,this.element=e,this.element.id||(this.element.id=Ks(this.getModuleName()))}}render(){this.initialize(),this.renderItems(),this.wireEvents(),this.renderComplete();const e=this.getWrapper();this.template&&this.enableScrolling&&(this.isReact||this.isAngular)&&requestAnimationFrame(()=>{b(this.createElement,e,this.element,"hscroll",this.enableRtl)})}initialize(){let e=this.getWrapper();e||(e=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.isMenu?this.element.parentElement.insertBefore(e,this.element):document.body.appendChild(e)),this.cssClass&&j([e],this.cssClass.split(" ")),this.enableRtl&&e.classList.add("e-rtl"),e.appendChild(this.element),this.isMenu&&this.hamburgerMode&&(this.target||this.createHeaderContainer(e)),this.defaultOption=this.showItemOnClick}renderItems(){if(!this.items.length){const t=ds.createJsonFromElement(this.element,{fields:{child:"items"}});this.setProperties({items:t},!0),this.element.innerHTML=""}const e=this.createItems(this.items);if(Pi(Array.prototype.slice.call(e.children),this.element),this.element.classList.add("e-menu-parent"),this.isMenu&&(!this.hamburgerMode&&this.element.classList.contains("e-vertical")&&this.setBlankIconStyle(this.element),this.enableScrolling)){const t=this.getWrapper();this.element.classList.contains("e-vertical")?b(this.createElement,t,this.element,"vscroll",this.enableRtl):b(this.createElement,t,this.element,"hscroll",this.enableRtl)}}wireEvents(){const e=this.getWrapper();if(this.target){let t;const i=at(this.target);for(let s=0,r=i.length;s<r;s++)t=i[s],this.isMenu?O.add(t,"click",this.menuHeaderClickHandler,this):Q.isIos?new Sn(t,{tapHold:this.touchHandler.bind(this)}):O.add(t,"contextmenu",this.cmenuHandler,this);if(this.targetElement=t,!this.isMenu){O.add(this.targetElement,"scroll",this.scrollHandler,this);for(const s of YS(this.targetElement))O.add(s,"scroll",this.scrollHandler,this)}}Q.isDevice||(this.delegateMoverHandler=this.moverHandler.bind(this),this.delegateMouseDownHandler=this.mouseDownHandler.bind(this),O.add(this.isMenu?document:e,"mouseover",this.delegateMoverHandler,this),O.add(document,"mousedown",this.delegateMouseDownHandler,this)),this.delegateClickHandler=this.clickHandler.bind(this),O.add(document,"click",this.delegateClickHandler,this),this.wireKeyboardEvent(e),this.rippleFn=da(e,{selector:"."+Ko})}wireKeyboardEvent(e){const t={downarrow:kt,uparrow:_t,enter:R,leftarrow:Yt,rightarrow:et,escape:B};this.isMenu&&(t.home=vi,t.end=vs),new Pn(e,{keyAction:this.keyBoardHandler.bind(this),keyConfigs:t})}mouseDownHandler(e){ae(e.target,".e-"+this.getModuleName()+"-wrapper")!==this.getWrapper()&&!ae(e.target,".e-"+this.getModuleName()+"-popup")&&this.closeMenu(this.isMenu?null:this.navIdx.length,e)}keyBoardHandler(e){let t="";const i=e.target;let s=this.isMenu&&!this.hamburgerMode&&!this.element.classList.contains("e-vertical")&&this.navIdx.length<1;if(e.preventDefault(),this.enableScrolling&&13===e.keyCode&&i.classList.contains("e-scroll-nav")&&this.removeLIStateByClass([$,de],[ae(i,".e-"+this.getModuleName()+"-wrapper")]),s)switch(e.action){case et:t=et,e.action=kt;break;case Yt:t=Yt,e.action=_t;break;case kt:t=kt,e.action=et;break;case _t:t=_t,e.action=""}else if(this.enableRtl)switch(e.action){case Yt:s=!0,t=Yt,e.action=et;break;case et:s=!0,t=et,e.action=Yt}switch(e.action){case kt:case _t:case vs:case vi:this.upDownKeyHandler(e);break;case et:this.rightEnterKeyHandler(e);break;case Yt:this.leftEscKeyHandler(e);break;case R:this.hamburgerMode&&"SPAN"===i.tagName&&i.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(e):this.rightEnterKeyHandler(e);break;case B:this.leftEscKeyHandler(e)}s&&(e.action=t)}upDownKeyHandler(e){const t=this.getUlByNavIdx(),i=e.action===kt||e.action===vi?0:t.childElementCount-1;let s=i;const r=this.getLIByClass(t,$);r&&(e.action!==vs&&e.action!==vi&&(s=this.getIdx(t,r)),r.classList.remove($),e.action!==vs&&e.action!==vi&&(e.action===kt?s++:s--,s===(e.action===kt?t.childElementCount:-1)&&(s=i))),s=this.isValidLI(t.children[s],s,e.action),t.children[s].classList.add($),t.children[s].focus()}isValidLI(e,t,i){const s=this.getUlByNavIdx();return(e.classList.contains($e)||e.classList.contains(Pd)||e.classList.contains(Fp))&&(i===kt||i===et?t++:t--),((e=s.children[t]).classList.contains($e)||e.classList.contains(Pd)||e.classList.contains(Fp))&&(t=this.isValidLI(e,t,i)),t}getUlByNavIdx(e=this.navIdx.length){if(this.isMenu){const t=[this.getWrapper()].concat([].slice.call(at("."+im)))[e];return m(t)?null:X(".e-menu-parent",t)}return this.getWrapper().children[e]}rightEnterKeyHandler(e){let t;const i=this.getUlByNavIdx(),s=this.getLIByClass(i,$);if(s){const r=this.getIdx(i,s),o=this.navIdx.concat(r),a=this.getItem(o);a.items.length?(this.navIdx.push(r),this.keyType="right",this.action=e.action,this.openMenu(s,a,-1,-1,e)):e.action===R&&(this.isMenu&&0===this.navIdx.length?this.removeLIStateByClass([de],[this.getWrapper()]):s.classList.remove($),s.classList.add(de),t={element:s,item:a,event:e},this.trigger("select",t),this.closeMenu(null,e))}}leftEscKeyHandler(e){this.navIdx.length?(this.keyType="left",this.closeMenu(this.navIdx.length,e)):e.action===B&&this.closeMenu(null,e)}scrollHandler(e){this.closeMenu(null,e)}touchHandler(e){this.isTapHold=!0,this.cmenuHandler(e.originalEvent)}cmenuHandler(e){e.preventDefault(),this.isCMenu=!0,this.pageX=e.changedTouches?e.changedTouches[0].pageX+1:e.pageX+1,this.pageY=e.changedTouches?e.changedTouches[0].pageY+1:e.pageY+1,this.closeMenu(null,e),this.isCMenu&&(this.canOpen(e.target)&&this.openMenu(null,null,this.pageY,this.pageX,e),this.isCMenu=!1)}closeMenu(e=0,t=null,i){if(this.isMenuVisible()){let s,r;const o=this.getWrapper();let a,u;const p=this.getPopups();let y=!1;const E=this.isMenu?p.length+1:o.childElementCount,_=this.isMenu&&1!==E?X(".e-ul",p[E-2]):at(".e-menu-parent",o)[E-1];if(this.isMenu&&_.classList.contains("e-menu")&&(s=this.getLIByClass(_,de),s&&s.classList.remove(de),y=!0),!y){const D=t&&t.target&&this.getLI(t.target);r=this.navIdx.length?this.getItem(this.navIdx):null,u=r?r.items:this.items,a={element:_,parentItem:r,items:u,event:t,cancel:!1,isFocused:!0},this.trigger("beforeClose",a,L=>{let V,H,_e,se="";const re=!L.cancel;let Ae,gt,ot;(re||this.isCMenu)&&(this.isMenu?(V=ae(_,"."+im),this.hamburgerMode&&(V.parentElement.style.minHeight="",ae(_,".e-menu-item").setAttribute("aria-expanded","false")),this.unWireKeyboardEvent(V),T(ac(V.children[0],g),V.children[0]),_e=ac(V,Th),_e.hide(),se=V.id,_e.destroy(),ye(V)):this.toggleAnimation(_,!1),H={element:_,parentItem:r,items:u},this.trigger("onClose",H),this.navIdx.pop()),this.updateReactTemplate();const ri=this.getWrapper()&&this.getUlByNavIdx();this.isCMenu&&(this.canOpen(t.target)&&this.openMenu(null,null,this.pageY,this.pageX,t),this.isCMenu=!1),this.isMenu&&ri&&se.length&&(Ae=new RegExp("(.*)-ej2menu-"+this.element.id+"-popup").exec(se)[1],gt=ri.querySelector('[id="'+Ae+'"]'),ot=D&&ri.querySelector('[id="'+D.id+'"]'));const jt=D&&D.querySelectorAll(".e-menu-item");if(re&&this.hamburgerMode&&e&&!jt.length)this.afterCloseMenu(t);else if(re&&!this.hamburgerMode&&this.navIdx.length&&gt&&!ot&&"left"!==this.keyType){let Ai=t&&t.target.classList.contains("e-vscroll")?ae(t.target,".e-menu-wrapper"):null;Ai?(Ai=Ai.querySelector(".e-menu-item"),(this.showItemOnClick||Ai&&this.getIndex(Ai.id,!0).length<=this.navIdx.length)&&this.closeMenu(this.navIdx[this.navIdx.length-1],t,!0)):this.closeMenu(this.navIdx[this.navIdx.length-1],t)}else if(re&&!i&&!e&&(this.hamburgerMode&&this.navIdx.length||1===this.navIdx.length))this.closeMenu(null,t);else if(re&&m(e)&&this.navIdx.length)this.closeMenu(null,t);else if(!re||this.isMenu||e||0!==this.navIdx.length||this.isMenusClosed)if(re&&this.isMenu&&t&&t.target&&0!==this.navIdx.length&&ae(t.target,".e-menu-parent.e-control"))this.closeMenu(0,t);else{if(!re||"right"!==this.keyType&&"click"!==this.keyType){const Ai=this.getUlByNavIdx(),rr=this.getLIByClass(Ai,de);if(rr&&(rr.setAttribute("aria-expanded","false"),rr.classList.remove(de),(L.isFocused&&D||"left"===this.keyType)&&(rr.classList.add($),rr.focus())),!re&&this.hamburgerMode&&D&&"false"===D.getAttribute("aria-expanded")&&"true"===D.getAttribute("aria-haspopup")){ae(D,".e-menu-parent.e-control")?this.navIdx=[]:this.navIdx.pop(),this.navIdx.push(this.cliIdx);const mt=this.getItem(this.navIdx);D.setAttribute("aria-expanded","true"),this.openMenu(D,mt,-1,-1,t)}}else this.afterCloseMenu(t);this.navIdx.length<1&&("Hover"===this.showSubMenuOn||"Click"===this.showSubMenuOn)&&(this.showItemOnClick=this.defaultOption,this.showSubMenuOn="Auto")}else this.isMenusClosed=!0,this.closeMenu(0,t);this.removeStateWrapper()})}}}updateReactTemplate(){if(this.isReact&&this.template&&0===this.navIdx.length){const e=this.portals.splice(0,this.items.length);this.clearTemplate(["template"]),this.portals=e,this.renderReactTemplates()}}getMenuItemModel(e,t){if(m(e))return null;m(t)&&(t=0);const i=this.getFields(t);return{text:e[i.text],id:e[i.id],items:e[i.child],separator:e[i.separator],iconCss:e[i.iconCss],url:e[i.url]}}getPopups(){const e=[];return[].slice.call(document.querySelectorAll("."+im)).forEach(t=>{!m(t.querySelector("."+Ko))&&this.getIndex(t.querySelector("."+Ko).id,!0).length&&e.push(t)}),e}isMenuVisible(){return this.navIdx.length>0||this.element.classList.contains("e-contextmenu")&&zn(this.element).valueOf()}canOpen(e){let t=!0;if(this.filter){t=!1;const i=this.filter.split(" ");for(let s=0,r=i.length;s<r;s++)if(ae(e,"."+i[s])){t=!0;break}}return t}openMenu(e,t,i=0,s=0,r=null,o=this.targetElement){const a=this.getWrapper();this.lItem=e;const u=""!==this.element.id?this.element.id:"menu";if(this.isMenusClosed=!1,m(i)&&(i=-1),m(s)&&(s=-1),e){if(this.uList=this.createItems(t[this.getField("children",this.navIdx.length-1)]),!this.isMenu&&Q.isDevice){a.lastChild.style.display="none";const p={text:t[this.getField("text")].toString(),iconCss:kE+" e-previous"},y=new gc(this.items[0],"items",p,!0),E=this.createItems([y]).children[0];E.classList.add(le),this.uList.insertBefore(E,this.uList.children[0])}this.isMenu?(this.popupWrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper "+im,id:e.id+"-ej2menu-"+u+"-popup"}),this.hamburgerMode?(i=e.offsetHeight,e.appendChild(this.popupWrapper)):document.body.appendChild(this.popupWrapper),this.isNestedOrVertical=this.element.classList.contains("e-vertical")||1!==this.navIdx.length,this.popupObj=this.generatePopup(this.popupWrapper,this.uList,e,this.isNestedOrVertical),this.template&&this.renderReactTemplates(),this.hamburgerMode?this.calculateIndentSize(this.uList,e):(this.cssClass&&j([this.popupWrapper],this.cssClass.split(" ")),this.popupObj.hide()),this.hamburgerMode||this.showItemOnClick||!this.hoverDelay?this.triggerBeforeOpen(e,this.uList,t,r,0,0,"menu"):(window.clearInterval(this.timer),this.timer=window.setTimeout(()=>{this.triggerBeforeOpen(e,this.uList,t,r,0,0,"menu")},this.hoverDelay))):(this.uList.style.zIndex=this.element.style.zIndex,a.appendChild(this.uList),!this.showItemOnClick&&this.hoverDelay?(window.clearInterval(this.timer),this.timer=window.setTimeout(()=>{this.triggerBeforeOpen(e,this.uList,t,r,i,s,"none")},this.hoverDelay)):this.triggerBeforeOpen(e,this.uList,t,r,i,s,"none"))}else this.uList=this.element,this.uList.style.zIndex=pa(o||this.element).toString(),this.triggerBeforeOpen(e,this.uList,t,r,i,s,"none")}calculateIndentSize(e,t){const i=getComputedStyle(t);let s=parseInt(i.textIndent,10);this.navIdx.length<2&&!t.classList.contains("e-blankicon")?s*=2:s+=s/4,e.style.textIndent=s+"px";const r=e.querySelectorAll(".e-blankicon");if(r&&r.length){const o=e.querySelector(".e-menu-icon"),a=getComputedStyle(o),u=parseInt(a.marginRight,10)+o.offsetWidth+s;for(let p=0;p<r.length;p++)r[p].style.textIndent=u+"px"}}generatePopup(e,t,i,s){const r=new Th(e,{actionOnScroll:this.hamburgerMode?"none":"reposition",relateTo:i,collision:this.hamburgerMode?{X:"none",Y:"none"}:{X:s||this.enableRtl?"none":"flip",Y:"fit"},position:s&&!this.hamburgerMode?{X:"right",Y:"top"}:{X:"left",Y:"bottom"},targetType:"relative",enableRtl:this.enableRtl,content:t,open:()=>{const o=X(".e-menu-vscroll",r.element);o&&(o.style.height="inherit",o.style.maxHeight="");const a=X(".e-ul",r.element);r.element.style.maxHeight="",a.focus(),this.triggerOpen(a)}});return r}createHeaderContainer(e){e=e||this.getWrapper();const t=this.createElement("span",{className:"e-"+this.getModuleName()+"-header"}),i=this.enableHtmlSanitizer?_n.sanitize(this.title):this.title,s=this.createElement("span",{className:"e-"+this.getModuleName()+"-title",innerHTML:i}),r=this.createElement("span",{className:"e-icons e-"+this.getModuleName()+"-icon",attrs:{tabindex:"0"}});t.appendChild(s),t.appendChild(r),e.insertBefore(t,this.element)}openHamburgerMenu(e){this.hamburgerMode&&this.triggerBeforeOpen(null,this.element,null,e,0,0,"hamburger")}closeHamburgerMenu(e){this.trigger("beforeClose",{element:this.element,parentItem:null,event:e,items:this.items,cancel:!1},i=>{i.cancel||(this.closeMenu(null,e),this.element.classList.add("e-hide-menu"),this.trigger("onClose",{element:this.element,parentItem:null,items:this.items}))})}callFit(e,t,i,s,r){return R0(e,null,{X:t,Y:i},{top:s,left:r})}triggerBeforeOpen(e,t,i,s,r,o,a){const u=e?i[this.getField("children",this.navIdx.length-1)]:this.items,y=a;this.trigger("beforeOpen",{element:t,items:u,parentItem:i,event:s,cancel:!1,top:r,left:o,showSubMenuOn:"Auto"},E=>{switch(y){case"menu":this.hamburgerMode||("Auto"!==E.showSubMenuOn&&(this.showItemOnClick=!this.defaultOption,this.showSubMenuOn=E.showSubMenuOn),this.top=E.top,this.left=E.left),this.popupWrapper.style.display="block",this.hamburgerMode||(this.popupWrapper.style.maxHeight=this.popupWrapper.getBoundingClientRect().height+"px",this.enableScrolling&&b(this.createElement,this.popupWrapper,this.uList,"vscroll",this.enableRtl),this.checkScrollOffset(s)),this.hamburgerMode||this.left||this.top?(this.popupObj.collision={X:"none",Y:"none"},this.popupWrapper.style.display=""):(this.popupObj.refreshPosition(this.lItem,!0),this.left=parseInt(this.popupWrapper.style.left,10),this.top=parseInt(this.popupWrapper.style.top,10),this.enableRtl&&(this.left=this.isNestedOrVertical?this.left-this.popupWrapper.offsetWidth-this.lItem.parentElement.offsetWidth+2:this.left-this.popupWrapper.offsetWidth+this.lItem.offsetWidth),this.template&&(this.isReact||this.isAngular)?requestAnimationFrame(()=>{this.collision(),this.popupWrapper.style.display=""}):(this.collision(),this.popupWrapper.style.display=""));break;case"none":this.top=E.top,this.left=E.left;break;case"hamburger":E.cancel||(this.element.classList.remove("e-hide-menu"),this.triggerOpen(this.element))}if("hamburger"!==y&&(E.cancel?(this.isMenu?(this.popupObj.destroy(),ye(this.popupWrapper)):t.className.indexOf("e-ul")>-1&&ye(t),this.navIdx.pop()):this.isMenu?this.hamburgerMode?(this.popupWrapper.style.top=this.top+"px",this.popupWrapper.style.left="0px",this.toggleAnimation(this.popupWrapper)):(this.setBlankIconStyle(this.popupWrapper),this.wireKeyboardEvent(this.popupWrapper),da(this.popupWrapper,{selector:"."+Ko}),"fixed"===this.popupWrapper.style.position&&this.top>0?(this.popupWrapper.style.left=this.left+"px",this.popupWrapper.style.top=this.top+scrollY+"px"):(this.popupWrapper.style.left=this.left+"px",this.popupWrapper.style.top=this.top+"px"),this.popupObj.show("None"!==this.animationSettings.effect?{name:this.animationSettings.effect,duration:this.animationSettings.duration,timingFunction:this.animationSettings.easing}:null,this.lItem)):(this.setBlankIconStyle(this.uList),this.setPosition(this.lItem,this.uList,this.top,this.left),this.toggleAnimation(this.uList))),"right"===this.keyType){let _=this.getUlByNavIdx();e.classList.remove($),this.isMenu&&1===this.navIdx.length&&this.removeLIStateByClass([de],[this.getWrapper()]),e.classList.add(de),this.action===R&&this.trigger("select",{element:e,item:i,event:s}),e.focus(),_=this.getUlByNavIdx();const D=this.isValidLI(_.children[0],0,this.action);_.children[D].classList.add($),_.children[D].focus()}})}collision(){let e;if(e=Id(this.popupWrapper,null,this.left,this.top),(this.isNestedOrVertical||this.enableRtl)&&(e.indexOf("right")>-1||e.indexOf("left")>-1)){this.popupObj.collision.X="none";const t=ae(this.lItem,".e-"+this.getModuleName()+"-wrapper").offsetWidth;this.left=this.enableRtl?Mo(this.lItem,this.isNestedOrVertical?"right":"left","top").left:this.left-this.popupWrapper.offsetWidth-t+2}e=Id(this.popupWrapper,null,this.left,this.top),(e.indexOf("left")>-1||e.indexOf("right")>-1)&&(this.left=this.callFit(this.popupWrapper,!0,!1,this.top,this.left).left),this.popupWrapper.style.left=this.left+"px"}setBlankIconStyle(e){const t=[].slice.call(e.getElementsByClassName("e-blankicon"));if(!t.length)return;const i=e.querySelector(".e-menu-item:not(.e-blankicon):not(.e-separator)"),s=i.querySelector(".e-menu-icon");if(!s)return;const r=this.enableRtl?{padding:"paddingRight",margin:"marginLeft"}:{padding:"paddingLeft",margin:"marginRight"},o=getComputedStyle(s);let a=parseInt(o.fontSize,10);parseInt(o.width,10)&&parseInt(o.width,10)>a&&(a=parseInt(o.width,10));const u=`${a+parseInt(o[r.margin],10)+parseInt(getComputedStyle(i)[r.padding],10)}px`;t.forEach(p=>{p.style[r.padding]=u})}checkScrollOffset(e){const t=this.getWrapper();if(t.children[0].classList.contains("e-menu-hscroll")&&1===this.navIdx.length){const i=m(e)?this.element:ae(e.target,"."+Ko),s=X(".e-hscroll-bar",t);s.scrollLeft>i.offsetLeft&&(s.scrollLeft-=s.scrollLeft-i.offsetLeft);const r=s.scrollLeft+s.offsetWidth,o=i.offsetLeft+i.offsetWidth;r<o&&(s.scrollLeft+=o-r)}}setPosition(e,t,i,s){const r="px";if(this.toggleVisiblity(t),t===this.element||s>-1&&i>-1){let o=Id(t,null,s,i);if(o.indexOf("right")>-1&&(s-=t.offsetWidth),o.indexOf("bottom")>-1&&(i=this.callFit(t,!1,!0,i,s).top-20)<0){const u=pageYOffset+document.documentElement.clientHeight-t.getBoundingClientRect().height;u>-1&&(i=u)}o=Id(t,null,s,i),o.indexOf("left")>-1&&(s=this.callFit(t,!0,!1,i,s).left)}else if(Q.isDevice)i=Number(this.element.style.top.replace(r,"")),s=Number(this.element.style.left.replace(r,""));else{let a=Mo(e,this.enableRtl?"left":"right","top");s=a.left;const u=Id(t,null,this.enableRtl?s-t.offsetWidth:s,i=a.top),p=u.indexOf("left")>-1||u.indexOf("right")>-1;p&&(a=Mo(e,this.enableRtl?"right":"left","top"),s=a.left),(this.enableRtl||p)&&(s=this.enableRtl&&p?s:s-t.offsetWidth),u.indexOf("bottom")>-1&&(a=this.callFit(t,!1,!0,i,s),i=a.top)}this.toggleVisiblity(t,!1),t.style.top=i+r,t.style.left=s+r}toggleVisiblity(e,t=!0){e.style.visibility=t?"hidden":"",e.style.display=t?"block":"none"}createItems(e){const t=this.navIdx?this.navIdx.length:0,i=this.getFields(t),s=this.hasField(e,this.getField("iconCss",t)),r={showIcon:s,moduleName:"menu",fields:i,template:this.template,itemNavigable:!0,itemCreating:a=>{a.curData[a.fields[i.id]]||(a.curData[a.fields[i.id]]=Ks("menuitem")),a.curData.htmlAttributes={role:"menuitem",tabindex:"-1"},this.isMenu&&!a.curData[this.getField("separator",t)]&&(a.curData.htmlAttributes["aria-label"]=a.curData[a.fields.text]),""===a.curData[a.fields[i.iconCss]]&&(a.curData[a.fields[i.iconCss]]=null)},itemCreated:a=>{if(a.curData[this.getField("separator",t)]&&(a.item.classList.add($e),a.item.removeAttribute("role")),s&&!a.curData[a.fields.iconCss]&&!a.curData[this.getField("separator",t)]&&a.item.classList.add("e-blankicon"),a.curData[a.fields.child]&&a.curData[a.fields.child].length){const p=this.createElement("span",{className:kE+" "+en});a.item.appendChild(p),a.item.setAttribute("aria-haspopup","true"),a.item.setAttribute("aria-expanded","false"),this.isMenu||a.item.removeAttribute("role"),a.item.classList.add("e-menu-caret-icon")}this.isMenu&&this.template&&(a.item.setAttribute("id",a.curData[a.fields.id].toString()),a.item.removeAttribute("data-uid"),a.item.classList.contains("e-level-1")&&a.item.classList.remove("e-level-1"),a.item.classList.contains("e-has-child")&&a.item.classList.remove("e-has-child")),this.trigger("beforeItemRender",{item:a.curData,element:a.item})}};this.setProperties({items:this.items},!0),this.isMenu&&(r.templateID=this.element.id+"Template");const o=ds.createList(this.createElement,e,r,!this.template,this);return o.setAttribute("tabindex","0"),this.isMenu&&o.setAttribute("role","menu"),o}moverHandler(e){const t=e.target;this.liTrgt=t;const i=this.getLI(t),s=i?ae(i,".e-"+this.getModuleName()+"-wrapper"):this.getWrapper(),r=this.getWrapper(),o=new RegExp("-ej2menu-(.*)-popup");let a,u=!1;if(s){if(a=""!==s.id?o.exec(s.id)[1]:s.querySelector("ul").id,a!==this.element.id){if(this.removeLIStateByClass([$,de],[this.getWrapper()]),!this.navIdx.length)return;u=!0}i&&ae(i,".e-"+this.getModuleName()+"-wrapper")&&!u?(this.removeLIStateByClass([$],this.isMenu?[s].concat(this.getPopups()):[s]),this.removeLIStateByClass([$],this.isMenu?[r].concat(this.getPopups()):[r]),i.classList.add($),this.showItemOnClick||this.clickHandler(e)):this.isMenu&&this.showItemOnClick&&!u&&this.removeLIStateByClass([$],[s].concat(this.getPopups())),this.isMenu&&(this.showItemOnClick||t.parentElement===s||ae(t,".e-"+this.getModuleName()+"-popup")||i&&(!i||this.getIndex(i.id,!0).length)||"Hover"===this.showSubMenuOn?u&&!this.showItemOnClick&&this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,e)):(this.removeLIStateByClass([$],[s]),this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,e))),this.isClosed||this.removeStateWrapper(),this.isClosed=!1)}}removeStateWrapper(){if(this.liTrgt){const e=ae(this.liTrgt,".e-menu-vscroll");"DIV"===this.liTrgt.tagName&&e&&this.removeLIStateByClass([$,de],[e])}}removeLIStateByClass(e,t){let i;for(let s=0;s<t.length;s++)e.forEach(r=>{i=X("."+r,t[s]),i&&i.classList.remove(r)})}getField(e,t=0){const i=this.fields[e];return"string"==typeof i?i:i[t]?i[t].toString():i[i.length-1].toString()}getFields(e=0){return{id:this.getField("itemId",e),iconCss:this.getField("iconCss",e),text:this.getField("text",e),url:this.getField("url",e),child:this.getField("children",e),separator:this.getField("separator",e)}}hasField(e,t){for(let i=0,s=e.length;i<s;i++)if(e[i][t])return!0;return!1}menuHeaderClickHandler(e){ae(e.target,".e-menu-wrapper").querySelector("ul.e-menu-parent").id===this.element.id&&(this.element.classList.contains("e-hide-menu")?this.openHamburgerMenu(e):this.closeHamburgerMenu(e))}clickHandler(e){if(this.isTapHold)this.isTapHold=!1;else{const t=this.getWrapper(),i=e.target,s=this.cli=this.getLI(i),r=new RegExp("-ej2menu-(.*)-popup"),o=s?ae(s,".e-"+this.getModuleName()+"-wrapper"):null,a=s&&o&&(this.isMenu?this.getIndex(s.id,!0).length>0:t.firstElementChild.id===o.firstElementChild.id);if(Q.isDevice&&this.isMenu&&(this.removeLIStateByClass([$],[t].concat(this.getPopups())),this.mouseDownHandler(e)),s&&o&&this.isMenu){const u=o.id?r.exec(o.id)[1]:o.querySelector(".e-menu-parent").id;if(this.element.id!==u)return}if(a&&"click"===e.type&&!s.classList.contains(le)){this.setLISelected(s);const u=this.getIndex(s.id,!0),p=this.getItem(u);this.trigger("select",{element:s,item:p,event:e})}if(a&&("mouseover"===e.type||Q.isDevice||this.showItemOnClick)){let u;if(s.classList.contains(le)){u=t.children[this.navIdx.length-1],this.toggleAnimation(u);const p=this.getLIByClass(u,de);p&&p.classList.remove(de),ye(s.parentNode),this.navIdx.pop()}else if(!s.classList.contains($e)){this.showSubMenu=!0;const p=s.parentNode;if(this.cliIdx=this.getIdx(p,s),this.isMenu||!Q.isDevice){const y=this.isMenu?Array.prototype.indexOf.call([t].concat(this.getPopups()),ae(p,".e-"+this.getModuleName()+"-wrapper")):this.getIdx(t,p);if(this.navIdx[y]===this.cliIdx&&(this.showSubMenu=!1),y!==this.navIdx.length&&("mouseover"!==e.type||this.showSubMenu)){const E=this.getLIByClass(p,de);E&&E.classList.remove(de),this.isClosed=!0,this.keyType="click",this.showItemOnClick&&this.setLISelected(s),this.closeMenu(y+1,e),this.showItemOnClick&&this.setLISelected(s)}}this.isClosed||this.afterCloseMenu(e),this.isClosed=!1}}else if(this.isMenu&&"DIV"===i.tagName&&this.navIdx.length&&ae(i,".e-menu-vscroll")){const u=ae(i,"."+im),p=Array.prototype.indexOf.call(this.getPopups(),u)+1;p<this.navIdx.length&&(this.closeMenu(p+1,e),u&&this.removeLIStateByClass([$,de],[u]))}else this.isMenu&&this.hamburgerMode&&"SPAN"===i.tagName&&i.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(e):("UL"!==i.tagName||(this.isMenu?i.parentElement.classList.contains("e-menu-wrapper")&&!this.getIndex(i.querySelector("."+Ko).id,!0).length:i.parentElement!==t))&&(s||this.removeLIStateByClass([de],[t]),(!s||!s.querySelector("."+en))&&this.closeMenu(null,e))}}afterCloseMenu(e){let t;if(this.showSubMenu){t=ae(this.showItemOnClick&&0===this.navIdx.length?e.target:this.element,".e-menu-parent.e-control");const i=this.navIdx.concat(this.cliIdx),s=this.getItem(i);if(s&&s[this.getField("children",i.length-1)]&&s[this.getField("children",i.length-1)].length?(("mouseover"===e.type||Q.isDevice&&this.isMenu)&&this.setLISelected(this.cli),(!this.hamburgerMode&&t||this.hamburgerMode&&"false"===this.cli.getAttribute("aria-expanded"))&&(this.cli.setAttribute("aria-expanded","true"),this.navIdx.push(this.cliIdx),this.openMenu(this.cli,s,null,null,e))):"mouseover"!==e.type&&this.closeMenu(null,e),!t){const r=this.getUlByNavIdx(),o=this.getLIByClass(r,de);o&&(o.setAttribute("aria-expanded","false"),o.classList.remove(de))}}this.keyType=""}setLISelected(e){const t=this.getLIByClass(e.parentElement,de);t&&t.classList.remove(de),this.isMenu||e.classList.remove($),e.classList.add(de)}getLIByClass(e,t){for(let i=0,s=e.children.length;i<s;i++)if(e.children[i].classList.contains(t))return e.children[i];return null}getItemIndex(e,t){let i;return i="string"==typeof e?e:e.id,this.getIndex(i,!1!==t)}setItem(e,t,i){let s;s=i?t||e.id:t||e.text;const r=this.getIndex(s,i),o=this.getItem(r);o.iconCss=e.iconCss||o.iconCss,o.text=e.text||o.text,o.url=e.url||o.url,o.separator=e.separator||o.separator}getItem(e){const t=(e=e.slice()).pop();return this.getItems(e)[t]}getItems(e){let t=this.items;for(let i=0;i<e.length;i++)t=t[e[i]][this.getField("children",i)];return t}setItems(e,t){const i=this.getItems(t);i.splice(0,i.length);for(let s=0;s<e.length;s++)i.splice(s,0,e[s])}getIdx(e,t,i=!0){let s=Array.prototype.indexOf.call(e.children,t);return i&&e.children[0].classList.contains(le)&&s--,s}getLI(e){return"LI"===e.tagName&&e.classList.contains("e-menu-item")?e:ae(e,"li.e-menu-item")}updateItemsByNavIdx(){let e=this.items,t=0;for(let i=0;i<this.navIdx.length&&(e=e[i].items,e);i++){t++;const s=this.getUlByNavIdx(t);if(!s)break;this.updateItem(s,e)}}removeChildElement(e){for(;e.firstElementChild;)e.removeChild(e.firstElementChild);return e}onPropertyChanged(e,t){const i=this.getWrapper();for(const s of Object.keys(e))switch(s){case"cssClass":t.cssClass&&Y([i],t.cssClass.split(" ")),e.cssClass&&j([i],e.cssClass.split(" "));break;case"enableRtl":i.classList.toggle("e-rtl");break;case"showItemOnClick":this.unWireEvents(),this.showItemOnClick=e.showItemOnClick,this.wireEvents();break;case"enableScrolling":if(e.enableScrolling){let r;this.element.classList.contains("e-vertical")?b(this.createElement,i,this.element,"vscroll",this.enableRtl):b(this.createElement,i,this.element,"hscroll",this.enableRtl),this.getPopups().forEach(o=>{r=X(".e-ul",o),b(this.createElement,o,r,"vscroll",this.enableRtl)})}else{let r=i.children[0];this.element.classList.contains("e-vertical")?T(ac(r,g),r):T(ac(r,oI),r),i.style.overflow="",i.appendChild(this.element),this.getPopups().forEach(o=>{r=o.children[0],T(ac(r,g),r),o.style.overflow=""})}break;case"items":{let r,o,a;if(Object.keys(t.items).length){const u=Object.keys(e.items);for(let p=0;p<u.length;p++)o=this.getChangedItemIndex(e,[],Number(u[p])),o.length<=this.getWrapper().children.length&&(r=o.pop(),a=this.getItems(o),this.insertAfter([a[r]],a[r].text),this.removeItem(a,o,r),this.setItems(a,o)),o.length=0}else{if(this.updateItem(this.element,this.items),!this.hamburgerMode)for(let u=1,p=i.childElementCount;u<p;u++)ye(i.lastElementChild);this.navIdx=[]}break}}}updateItem(e,t){e.innerHTML="",[].slice.call(this.createItems(t).children).forEach(s=>{e.appendChild(s)})}getChangedItemIndex(e,t,i){t.push(i);const s=Object.keys(e.items[i]).pop();if("items"===s){const r=e.items[i],o=Object.keys(r.items).pop();o&&this.getChangedItemIndex(r,t,Number(o))}else"isParentArray"===s&&t.length>1&&t.pop();return t}removeItem(e,t,i){e.splice(i,1);const s=this.getWrapper().children;t.length<s.length&&ye(s[t.length].children[i])}unWireEvents(e=this.target){const t=this.getWrapper();if(e){let i,s;const r=at(e);for(let o=0,a=r.length;o<a;o++)i=r[o],this.isMenu?O.remove(i,"click",this.menuHeaderClickHandler):Q.isIos?(s=ac(i,Sn),s&&s.destroy()):O.remove(i,"contextmenu",this.cmenuHandler);if(!this.isMenu){O.remove(this.targetElement,"scroll",this.scrollHandler);for(const o of YS(this.targetElement))O.remove(o,"scroll",this.scrollHandler)}}Q.isDevice||(O.remove(this.isMenu?document:t,"mouseover",this.delegateMoverHandler),O.remove(document,"mousedown",this.delegateMouseDownHandler)),O.remove(document,"click",this.delegateClickHandler),this.unWireKeyboardEvent(t),this.rippleFn()}unWireKeyboardEvent(e){const t=ac(e,Pn);t&&t.destroy()}toggleAnimation(e,t=!0){let i,s;"None"!==this.animationSettings.effect&&t?this.animation.animate(e,{name:this.animationSettings.effect,duration:this.animationSettings.duration,timingFunction:this.animationSettings.easing,begin:r=>{this.hamburgerMode?(s=r.element.parentElement,r.element.style.position="absolute",i=s.offsetHeight,r.element.style.maxHeight=r.element.offsetHeight+"px",s.style.maxHeight=""):(r.element.style.display="block",r.element.style.maxHeight=r.element.getBoundingClientRect().height+"px")},progress:r=>{this.hamburgerMode&&(s.style.minHeight=i+r.element.offsetHeight+"px")},end:r=>{this.hamburgerMode?(r.element.style.position="",r.element.style.maxHeight="",s.style.minHeight="",r.element.style.top="0px",r.element.children[0].focus(),this.triggerOpen(r.element.children[0])):this.end(r.element,t)}}):this.end(e,t)}triggerOpen(e){const t=this.navIdx.length?this.getItem(this.navIdx):null;this.trigger("onOpen",{element:e,parentItem:t,items:t?t.items:this.items})}end(e,t){if(t)if(e.style.display="block",e.style.maxHeight="",this.triggerOpen(e),e.querySelector("."+$))e.querySelector("."+$).focus();else{const i=this.getWrapper().children[this.getIdx(this.getWrapper(),e)-1];i?i.querySelector("."+de).focus():this.element.focus()}else if(e===this.element){const i=this.getLIByClass(this.element,$);i&&i.classList.remove($);const s=this.getLIByClass(this.element,de);s&&s.classList.remove(de),e.style.display="none"}else ye(e)}getPersistData(){return""}getWrapper(){return ae(this.element,".e-"+this.getModuleName()+"-wrapper")}getIndex(e,t,i=this.items,s=[],r=!1,o=0){let a;o=r?o+1:0;for(let u=0,p=i.length;u<p;u++){if(a=i[u],(t?a[this.getField("itemId",o)]:a[this.getField("text",o)])===e){s.push(u);break}if(a[this.getField("children",o)]&&a[this.getField("children",o)].length){if(-1!==(s=this.getIndex(e,t,a[this.getField("children",o)],s,!0,o))[s.length-1]){s.unshift(u);break}u!==p-1&&s.pop()}else u===p-1&&s.push(-1)}return r||-1!==s[0]?s:[]}enableItems(e,t=!0,i){let s,r,o;const a=Pd;let u;for(let p=0;p<e.length;p++){if(o=this.getIndex(e[p],i),this.navIdx.length){if(1!==o.length){u=!1;for(let y=0,E=o.length-1;y<E;y++)if(o[y]!==this.navIdx[y]){u=!0;break}if(u)continue}}else if(1!==o.length)continue;r=o.pop(),s=this.getUlByNavIdx(o.length),s&&(t?this.isMenu?(s.children[r].classList.remove(a),s.children[r].removeAttribute("aria-disabled")):Q.isDevice&&!s.classList.contains("e-contextmenu")?s.children[r+1].classList.remove(a):s.children[r].classList.remove(a):this.isMenu?(s.children[r].classList.add(a),s.children[r].setAttribute("aria-disabled","true")):Q.isDevice&&!s.classList.contains("e-contextmenu")?s.children[r+1].classList.add(a):s.children[r].classList.add(a))}}showItems(e,t){this.showHideItems(e,!1,t)}hideItems(e,t){this.showHideItems(e,!0,t)}showHideItems(e,t,i){let s,r,o;for(let a=0;a<e.length;a++)o=this.getIndex(e[a],i),r=o.pop(),s=this.getUlByNavIdx(o.length),s&&(t?Q.isDevice&&!s.classList.contains("e-contextmenu")?s.children[r+1].classList.add(Fp):s.children[r].classList.add(Fp):Q.isDevice&&!s.classList.contains("e-contextmenu")?s.children[r+1].classList.remove(Fp):s.children[r].classList.remove(Fp))}removeItems(e,t){let i,s,r;for(let o=0;o<e.length;o++)s=this.getIndex(e[o],t),i=s.pop(),r=this.getItems(s),this.removeItem(r,s,i)}insertAfter(e,t,i){this.insertItems(e,t,i)}insertBefore(e,t,i){this.insertItems(e,t,i,!1)}insertItems(e,t,i,s=!0){let r,o,a,u,p;for(let y=0;y<e.length;y++){a=this.getIndex(t,i),o=a.pop(),u=this.getItems(a),p=new gc(u[0],"items",e[y],!0),u.splice(s?o+1:o,0,p);const E=this.isMenu?[this.getWrapper()].concat(this.getPopups()):[].slice.call(this.getWrapper().children);if(a.length<E.length){o=s?o+1:o,r=this.createItems(u).children[o];const _=this.isMenu?X(".e-menu-parent",E[a.length]):E[a.length];_.insertBefore(r,_.children[o])}}}removeAttributes(){["top","left","display","z-index"].forEach(e=>{this.element.style.removeProperty(e)}),["role","tabindex","class","style"].forEach(e=>{"class"===e&&this.element.classList.contains("e-menu-parent")&&this.element.classList.remove("e-menu-parent"),(-1===["class","style"].indexOf(e)||!this.element.getAttribute(e))&&this.element.removeAttribute(e),this.isMenu&&"class"===e&&this.element.classList.contains("e-vertical")&&this.element.classList.remove("e-vertical")})}destroy(){const e=this.getWrapper();if(e){if(this.unWireEvents(),this.isMenu)this.closeMenu(),this.element.innerHTML="",this.removeAttributes(),e.parentNode.insertBefore(this.element,e),this.clonedElement=null;else{if(this.clonedElement.style.display="","EJS-CONTEXTMENU"===this.clonedElement.tagName)j([this.clonedElement],["e-control","e-lib","e-"+this.getModuleName()]),this.element=this.clonedElement;else if(this.refreshing&&this.clonedElement.childElementCount&&"LI"===this.clonedElement.children[0].tagName&&this.setProperties({items:[]},!0),document.getElementById(this.clonedElement.id)){const t=this.clonedElement.nextElementSibling;t&&t!==e?this.clonedElement.parentElement.insertBefore(this.element,t):this.clonedElement.parentElement.appendChild(this.element),this.element.innerHTML="",Pi([].slice.call(this.clonedElement.children),this.element),ye(this.clonedElement),this.removeAttributes()}this.clonedElement=null}this.isMenu&&this.clonedElement?(ye(this.element),e.style.display="",e.classList.remove("e-"+this.getModuleName()+"-wrapper"),e.removeAttribute("data-ripple")):ye(e),super.destroy(),this.template&&this.clearTemplate(["template"])}}};k([Z()],dr.prototype,"beforeItemRender",void 0),k([Z()],dr.prototype,"beforeOpen",void 0),k([Z()],dr.prototype,"onOpen",void 0),k([Z()],dr.prototype,"beforeClose",void 0),k([Z()],dr.prototype,"onClose",void 0),k([Z()],dr.prototype,"select",void 0),k([Z()],dr.prototype,"created",void 0),k([A("")],dr.prototype,"cssClass",void 0),k([A(0)],dr.prototype,"hoverDelay",void 0),k([A(!1)],dr.prototype,"showItemOnClick",void 0),k([A("")],dr.prototype,"target",void 0),k([A("")],dr.prototype,"filter",void 0),k([A(null)],dr.prototype,"template",void 0),k([A(!1)],dr.prototype,"enableScrolling",void 0),k([A(!1)],dr.prototype,"enableHtmlSanitizer",void 0),k([Ps({itemId:"id",text:"text",parentId:"parentId",iconCss:"iconCss",url:"url",separator:"separator",children:"items"},Oh)],dr.prototype,"fields",void 0),k([cl([],gc)],dr.prototype,"items",void 0),k([Ps({duration:400,easing:"ease",effect:"SlideDown"},fy)],dr.prototype,"animationSettings",void 0),dr=k([ts],dr);var gn=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const bL="e-vertical",pr="e-toolbar-items",go="e-toolbar-item",Bp="e-rtl",eo="e-separator",KD="e-popup-up-icon",hI="e-popup-down-icon",nH="e-popup-open",rH="e-template",Ld="e-overlay",oH="e-toolbar-text",CL="e-popup-text",Rd="e-overflow-show",ZD="e-overflow-hide",yc="e-hor-nav",aH="e-scroll-nav",lH="e-toolbar-center",Nd="e-tbar-pos",cH="e-hscroll-bar",uI="e-toolbar-pop",sm="e-toolbar-popup",dI="e-nav-active",pI="e-ignore",EL="e-popup-alone",fI="e-hidden",hH="e-toolbar-multirow",uH="e-multirow-pos",wL="e-multirow-separator",SL="e-extended-separator",dH="e-extended-toolbar",XD="e-toolbar-extended",_L="e-tbar-extended";class Ba extends Is{}gn([A("")],Ba.prototype,"id",void 0),gn([A("")],Ba.prototype,"text",void 0),gn([A("auto")],Ba.prototype,"width",void 0),gn([A("")],Ba.prototype,"cssClass",void 0),gn([A(!1)],Ba.prototype,"showAlwaysInPopup",void 0),gn([A(!1)],Ba.prototype,"disabled",void 0),gn([A("")],Ba.prototype,"prefixIcon",void 0),gn([A("")],Ba.prototype,"suffixIcon",void 0),gn([A(!0)],Ba.prototype,"visible",void 0),gn([A("None")],Ba.prototype,"overflow",void 0),gn([A("")],Ba.prototype,"template",void 0),gn([A("Button")],Ba.prototype,"type",void 0),gn([A("Both")],Ba.prototype,"showTextOn",void 0),gn([A(null)],Ba.prototype,"htmlAttributes",void 0),gn([A("")],Ba.prototype,"tooltipText",void 0),gn([A("Left")],Ba.prototype,"align",void 0),gn([Z()],Ba.prototype,"click",void 0);let ul=class extends Ls{constructor(e,t){super(e,t),this.resizeContext=this.resize.bind(this),this.keyConfigs={moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow",popupOpen:"enter",popupClose:"escape",tab:"tab",home:"home",end:"end"}}destroy(){(this.isReact||this.isAngular)&&this.clearTemplate();const e=this.element.querySelectorAll(".e-control.e-btn");for([].slice.call(e).forEach(t=>{!m(t)&&!m(t.ej2_instances)&&!m(t.ej2_instances[0])&&!t.ej2_instances[0].isDestroyed&&t.ej2_instances[0].destroy()}),this.unwireEvents(),this.tempId.forEach(t=>{m(this.element.querySelector(t))||(document.body.appendChild(this.element.querySelector(t)).style.display="none")}),this.destroyItems();this.element.lastElementChild;)this.element.removeChild(this.element.lastElementChild);this.trgtEle&&(this.element.appendChild(this.ctrlTem),this.trgtEle=null,this.ctrlTem=null),this.popObj&&(this.popObj.destroy(),ye(this.popObj.element)),this.activeEle&&(this.activeEle=null),this.popObj=null,this.tbarAlign=null,this.remove(this.element,"e-toolpop"),this.cssClass&&Y([this.element],this.cssClass.split(" ")),this.element.removeAttribute("style"),["aria-disabled","aria-orientation","aria-haspopup","role"].forEach(t=>this.element.removeAttribute(t)),super.destroy()}preRender(){const e={enableCollision:this.enableCollision,scrollStep:this.scrollStep};this.trigger("beforeCreate",e),this.enableCollision=e.enableCollision,this.scrollStep=e.scrollStep,this.scrollModule=null,this.popObj=null,this.tempId=[],this.tbarItemsCol=this.items,this.isVertical=!!this.element.classList.contains(bL),this.isExtendedOpen=!1,this.popupPriCount=0,this.enableRtl&&this.add(this.element,Bp)}wireEvents(){O.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resizeContext),this.allowKeyboard&&this.wireKeyboardEvent()}wireKeyboardEvent(){this.keyModule=new Pn(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs}),O.add(this.element,"keydown",this.docKeyDown,this),this.element.setAttribute("tabIndex","0")}unwireKeyboardEvent(){this.keyModule&&(O.remove(this.element,"keydown",this.docKeyDown),this.keyModule.destroy(),this.keyModule=null)}docKeyDown(e){if("INPUT"===e.target.tagName)return;const t=!m(this.popObj)&&zn(this.popObj.element)&&"Extended"!==this.overflowMode;9===e.keyCode&&!0===e.target.classList.contains("e-hor-nav")&&t&&this.popObj.hide({name:"FadeOut",duration:100}),(40===e.keyCode||38===e.keyCode||35===e.keyCode||36===e.keyCode)&&e.preventDefault()}unwireEvents(){O.remove(this.element,"click",this.clickHandler),this.destroyScroll(),this.unwireKeyboardEvent(),window.removeEventListener("resize",this.resizeContext),O.remove(document,"scroll",this.docEvent),O.remove(document,"click",this.docEvent)}clearProperty(){this.tbarEle=[],this.tbarAlgEle={lefts:[],centers:[],rights:[]}}docEvent(e){const t=ae(e.target,".e-popup");this.popObj&&zn(this.popObj.element)&&!t&&"Popup"===this.overflowMode&&this.popObj.hide({name:"FadeOut",duration:100})}destroyScroll(){this.scrollModule&&(this.tbarAlign&&this.add(this.scrollModule.element,Nd),this.scrollModule.destroy(),this.scrollModule=null)}destroyItems(){if(this.element&&[].slice.call(this.element.querySelectorAll("."+go)).forEach(e=>{ye(e)}),this.tbarAlign){const e=this.element.querySelector("."+pr);[].slice.call(e.children).forEach(t=>{ye(t)}),this.tbarAlign=!1,this.remove(e,Nd)}this.clearProperty()}destroyMode(){this.scrollModule&&(this.remove(this.scrollModule.element,Bp),this.destroyScroll()),this.remove(this.element,_L),this.remove(this.element,dH);const e=this.element.querySelector(".e-toolbar-multirow");e&&this.remove(e,hH),this.popObj&&this.popupRefresh(this.popObj.element,!0)}add(e,t){e.classList.add(t)}remove(e,t){e.classList.remove(t)}elementFocus(e){const t=e.firstElementChild;t?(t.focus(),this.activeEleSwitch(e)):e.focus()}clstElement(e,t){let i;return i=e&&this.popObj&&zn(this.popObj.element)?this.popObj.element.querySelector("."+go):this.element===t||e?this.element.querySelector("."+go+":not(."+Ld+" ):not(."+eo+" ):not(."+fI+" )"):ae(t,"."+go),i}keyHandling(e,t,i,s,r){const o=this.popObj,a=this.element,u={name:"FadeOut",duration:100},p="moveUp"===t.action?"previous":"next";let y,E;switch(t.action){case"moveRight":if(this.isVertical)return;a===i?this.elementFocus(e):s||this.eleFocus(e,"next");break;case"moveLeft":if(this.isVertical)return;s||this.eleFocus(e,"previous");break;case"home":case"end":if(e){let _=ae(e,".e-popup");const D=this.element.querySelector("."+XD);"Extended"===this.overflowMode&&D&&D.classList.contains("e-popup-open")&&(_="end"===t.action?D:null),_?zn(this.popObj.element)&&(E=[].slice.call(_.children),y="home"===t.action?E[0]:E[E.length-1]):(E=this.element.querySelectorAll("."+pr+" ."+go+":not(."+eo+")"),y="home"===t.action?E[0]:E[E.length-1]),y&&this.elementFocus(y)}break;case"moveUp":case"moveDown":if(this.isVertical)this.eleFocus(e,"moveUp"===t.action?"previous":"next");else if(o&&ae(i,".e-popup")){const _=o.element,D=_.firstElementChild;if("previous"===p&&D===e||"next"===p&&_.lastElementChild===e)return;this.eleFocus(e,p)}else"moveDown"===t.action&&o&&zn(o.element)&&this.elementFocus(e);break;case"tab":if(!r&&!s){const _=e.firstElementChild;a===i&&(this.activeEle?this.activeEle.focus():(this.activeEleRemove(_),_.focus()),this.element.removeAttribute("tabindex"))}break;case"popupClose":o&&"Extended"!==this.overflowMode&&o.hide(u);break;case"popupOpen":if(!s)return;o&&!zn(o.element)?(o.element.style.top=a.offsetHeight+"px",o.show({name:"FadeIn",duration:100})):o.hide(u)}}keyActionHandler(e){const t=e.target;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||this.element.classList.contains(Ld))return;e.preventDefault();const i=t.classList.contains(yc),s=t.classList.contains(aH),r=this.clstElement(i,t);(r||s)&&this.keyHandling(r,e,t,i,s)}disable(e){const t=this.element;e?t.classList.add(Ld):t.classList.remove(Ld),t.setAttribute("tabindex",e?"-1":"0"),this.activeEle&&this.activeEle.setAttribute("tabindex",e?"-1":"0"),this.scrollModule&&this.scrollModule.disable(e),this.popObj&&(zn(this.popObj.element)&&"Extended"!==this.overflowMode&&this.popObj.hide(),t.querySelector("#"+t.id+"_nav").setAttribute("tabindex",e?"-1":"0"))}eleContains(e){return e.classList.contains(eo)||e.classList.contains(Ld)||e.getAttribute("disabled")||e.classList.contains(fI)||!zn(e)}eleFocus(e,t){const i=Object(e)[t+"ElementSibling"];if(i){if(this.eleContains(i))return void this.eleFocus(i,t);this.elementFocus(i)}else if(this.tbarAlign){let s=Object(e.parentElement)[t+"ElementSibling"];if(!m(s)&&0===s.children.length&&(s=Object(s)[t+"ElementSibling"]),!m(s)&&s.children.length>0)if("next"===t){const r=s.querySelector("."+go);this.eleContains(r)?this.eleFocus(r,t):(r.firstElementChild.focus(),this.activeEleSwitch(r))}else{const r=s.lastElementChild;this.eleContains(r)?this.eleFocus(r,t):this.elementFocus(r)}}}clickHandler(e){const t=e.target,i=this.element,s=!m(ae(t,"."+uI));let a,r=t.classList,o=ae(t,"."+yc);o||(o=t),!i.children[0].classList.contains("e-hscroll")&&!i.children[0].classList.contains("e-vscroll")&&r.contains(yc)&&(r=t.querySelector(".e-icons").classList),(r.contains(KD)||r.contains(hI))&&this.popupClickHandler(i,o,Bp);const u=ae(e.target,"."+go);if((m(u)||u.classList.contains(Ld))&&!o.classList.contains(yc))return;u&&(a=this.items[this.tbarEle.indexOf(u)]);const p={originalEvent:e,item:a};a&&!m(a.click)&&this.trigger("items["+this.tbarEle.indexOf(u)+"].click",p),p.cancel||this.trigger("clicked",p,y=>{!m(this.popObj)&&s&&!y.cancel&&"Popup"===this.overflowMode&&y.item&&"Input"!==y.item.type&&this.popObj.hide({name:"FadeOut",duration:100})})}popupClickHandler(e,t,i){const s=this.popObj;zn(s.element)?(t.classList.remove(dI),s.hide({name:"FadeOut",duration:100})):(e.classList.contains(i)&&(s.enableRtl=!0,s.position={X:"left",Y:"top"}),0===s.offsetX&&!e.classList.contains(i)&&(s.enableRtl=!1,s.position={X:"right",Y:"top"}),s.dataBind(),s.refreshPosition(),s.element.style.top=this.getElementOffsetY()+"px","Extended"===this.overflowMode&&(s.element.style.minHeight="0px"),t.classList.add(dI),s.show({name:"FadeIn",duration:100}))}render(){this.initialize(),this.renderControl(),this.wireEvents(),this.renderComplete()}initialize(){const e=ct(this.width),t=ct(this.height);("msie"!==Q.info.name||"auto"!==this.height||"MultiRow"===this.overflowMode)&&It(this.element,{height:t}),It(this.element,{width:e}),bt(this.element,{role:"toolbar","aria-disabled":"false","aria-haspopup":"false","aria-orientation":this.isVertical?"vertical":"horizontal"}),this.cssClass&&j([this.element],this.cssClass.split(" "))}renderControl(){const e=this.element;this.trgtEle=e.children.length>0?e.querySelector("div"):null,this.tbarAlgEle={lefts:[],centers:[],rights:[]},this.renderItems(),this.renderLayout()}renderLayout(){this.renderOverflowMode(),this.tbarAlign&&this.itemPositioning(),this.popObj&&this.popObj.element.childElementCount>1&&this.checkPopupRefresh(this.element,this.popObj.element)&&this.popupRefresh(this.popObj.element,!1),this.separator()}itemsAlign(e,t){let i,s;this.tbarEle||(this.tbarEle=[]);for(let r=0;r<e.length;r++)i=this.renderSubComponent(e[r],r),-1===this.tbarEle.indexOf(i)&&this.tbarEle.push(i),this.tbarAlign||this.tbarItemAlign(e[r],t,r),s=t.querySelector(".e-toolbar-"+e[r].align.toLowerCase()),s?(e[r].showAlwaysInPopup&&"Show"!==e[r].overflow||this.tbarAlgEle[(e[r].align+"s").toLowerCase()].push(i),s.appendChild(i)):t.appendChild(i);this.isReact&&(this.notify("render-react-toolbar-template",this.portals),this.renderReactTemplates())}changeOrientation(){const e=this.element;this.isVertical?(e.classList.remove(bL),this.isVertical=!1,("auto"===this.height||"100%"===this.height)&&(e.style.height=this.height),e.setAttribute("aria-orientation","horizontal")):(e.classList.add(bL),this.isVertical=!0,e.setAttribute("aria-orientation","vertical"),It(this.element,{height:ct(this.height),width:ct(this.width)})),this.destroyMode(),this.refreshOverflow()}initScroll(e,t){!this.scrollModule&&this.checkOverflow(e,t[0])&&(this.tbarAlign&&this.element.querySelector("."+pr+" ."+lH).removeAttribute("style"),this.scrollModule=this.isVertical?new g({scrollStep:this.scrollStep,enableRtl:this.enableRtl},t[0]):new oI({scrollStep:this.scrollStep,enableRtl:this.enableRtl},t[0]),this.remove(this.scrollModule.element,Nd),It(this.element,{overflow:"hidden"}))}itemWidthCal(e){let i,t=0;return[].slice.call(at("."+go,e)).forEach(s=>{zn(s)&&(i=window.getComputedStyle(s),t+=this.isVertical?s.offsetHeight:s.offsetWidth,t+=parseFloat(this.isVertical?i.marginTop:i.marginRight),t+=parseFloat(this.isVertical?i.marginBottom:i.marginLeft))}),t}getScrollCntEle(e){return e.querySelector(this.isVertical?".e-vscroll-content":".e-hscroll-content")}checkOverflow(e,t){if(m(e)||m(t)||!zn(e))return!1;const i=this.isVertical?e.offsetHeight:e.offsetWidth;let s=this.isVertical?t.offsetHeight:t.offsetWidth;(this.tbarAlign||this.scrollModule||i===s)&&(s=this.itemWidthCal(this.scrollModule?this.getScrollCntEle(t):t));const r=e.querySelector("."+yc),o=e.querySelector("."+aH);let a=0;return r?a=this.isVertical?r.offsetHeight:r.offsetWidth:o&&(a=this.isVertical?2*o.offsetHeight:2*o.offsetWidth),s>i-a}refreshOverflow(){this.resize()}toolbarAlign(e){this.tbarAlign&&(this.add(e,Nd),this.itemPositioning())}renderOverflowMode(){const e=this.element,t=e.querySelector("."+pr),i=this.popupPriCount>0;if(e&&e.children.length>0)switch(this.offsetWid=e.offsetWidth,this.remove(this.element,"e-toolpop"),"msie"===Q.info.name&&"auto"===this.height&&(e.style.height=""),this.overflowMode){case"Scrollable":m(this.scrollModule)&&this.initScroll(e,[].slice.call(e.getElementsByClassName(pr)));break;case"Popup":this.add(this.element,"e-toolpop"),this.tbarAlign&&this.removePositioning(),(this.checkOverflow(e,t)||i)&&this.setOverflowAttributes(e),this.toolbarAlign(t);break;case"MultiRow":this.add(t,hH),this.checkOverflow(e,t)&&this.tbarAlign&&(this.removePositioning(),this.add(t,uH)),"hidden"===e.style.overflow&&(e.style.overflow=""),("msie"===Q.info.name||"auto"!==e.style.height)&&(e.style.height="auto");break;case"Extended":this.add(this.element,dH),(this.checkOverflow(e,t)||i)&&(this.tbarAlign&&this.removePositioning(),this.setOverflowAttributes(e)),this.toolbarAlign(t)}}setOverflowAttributes(e){this.createPopupEle(e,[].slice.call(at("."+pr+" ."+go,e))),this.element.querySelector("."+yc).setAttribute("tabIndex","0"),this.element.querySelector("."+yc).setAttribute("role","list")}separator(){const e=this.element,t=[].slice.call(e.querySelectorAll("."+eo)),i=e.querySelector("."+wL),s=e.querySelector("."+SL),r="MultiRow"===this.overflowMode?i:s;null!==r&&("MultiRow"===this.overflowMode?r.classList.remove(wL):"Extended"===this.overflowMode&&r.classList.remove(SL));for(let o=0;o<=t.length-1;o++)t[o].offsetLeft<30&&0!==t[o].offsetLeft&&("MultiRow"===this.overflowMode?t[o].classList.add(wL):"Extended"===this.overflowMode&&t[o].classList.add(SL))}createPopupEle(e,t){let i=e.querySelector("."+yc);const s=this.isVertical;i||this.createPopupIcon(e),i=e.querySelector("."+yc);const o=(s?e.offsetHeight:e.offsetWidth)-(s?i.offsetHeight:i.offsetWidth);this.element.classList.remove("e-rtl"),It(this.element,{direction:"initial"}),this.checkPriority(e,t,o,!0),this.enableRtl&&this.element.classList.add("e-rtl"),this.element.style.removeProperty("direction"),this.createPopup()}pushingPoppedEle(e,t,i,s,r){const o=e.element,a=[].slice.call(at("."+sm,o.querySelector("."+pr)));let u=at("."+Rd,i),p=0,y=0;a.forEach((_,D)=>{u=at("."+Rd,i),_.classList.contains(Rd)&&u.length>0?e.tbResize&&u.length>D?(i.insertBefore(_,u[D]),++y):(i.insertBefore(_,i.children[u.length]),++y):_.classList.contains(Rd)||e.tbResize&&_.classList.contains(ZD)&&i.children.length>0&&0===u.length?(i.insertBefore(_,i.firstChild),++y):_.classList.contains(ZD)?t.push(_):e.tbResize?(i.insertBefore(_,i.childNodes[p+y]),++p):i.appendChild(_),_.classList.contains(eo)?It(_,{display:"",height:r+"px"}):It(_,{display:"",height:s+"px"})}),t.forEach(_=>{i.appendChild(_)});const E=at("."+go,o.querySelector("."+pr));for(let _=E.length-1;_>=0;_--){const D=E[_];if(!D.classList.contains(eo)||"Extended"===this.overflowMode)break;It(D,{display:"none"})}}createPopup(){const e=this.element;let t,i;"Extended"===this.overflowMode&&(i=e.querySelector("."+eo+":not(."+sm+")"),t="auto"===e.style.height||""===e.style.height?null:i.offsetHeight);const s=e.querySelector("."+go+":not(."+eo+"):not(."+sm+")"),r="auto"===e.style.height||""===e.style.height?null:s&&s.offsetHeight;let o;if(X("#"+e.id+"_popup."+uI,e))o=X("#"+e.id+"_popup."+uI,e);else{const u=this.createElement("div",{id:e.id+"_popup",className:uI+" "+XD}),p=this.createElement("div",{id:e.id+"_popup",className:uI});o="Extended"===this.overflowMode?u:p}this.pushingPoppedEle(this,[],o,r,t),this.popupInit(e,o)}getElementOffsetY(){return"Extended"===this.overflowMode&&"border-box"===window.getComputedStyle(this.element).getPropertyValue("box-sizing")?this.element.clientHeight:this.element.offsetHeight}popupInit(e,t){if(this.popObj){const i=this.popObj.element;It(i,{maxHeight:"",display:"block"}),It(i,{maxHeight:i.offsetHeight+"px",display:""})}else{e.appendChild(t),It(this.element,{overflow:""});const i=window.getComputedStyle(this.element),s=new Th(null,{relateTo:this.element,offsetY:this.isVertical?0:this.getElementOffsetY(),enableRtl:this.enableRtl,open:this.popupOpen.bind(this),close:this.popupClose.bind(this),collision:{Y:this.enableCollision?"flip":"none"},position:this.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"}});if(s.appendTo(t),"Extended"===this.overflowMode&&(s.width=parseFloat(i.width)+2*parseFloat(i.borderRightWidth),s.offsetX=0),O.add(document,"scroll",this.docEvent.bind(this)),O.add(document,"click ",this.docEvent.bind(this)),s.element.style.maxHeight=s.element.offsetHeight+"px",this.isVertical&&(s.element.style.visibility="hidden"),this.isExtendedOpen){const r=this.element.querySelector("."+yc);r.classList.add(dI),ua(r.firstElementChild,[KD],[hI]),this.element.querySelector("."+XD).classList.add(nH)}else s.hide();this.popObj=s,this.element.setAttribute("aria-haspopup","true")}}tbarPopupHandler(e){"Extended"===this.overflowMode&&(e?this.add(this.element,_L):this.remove(this.element,_L))}popupOpen(e){const t=this.popObj;this.isVertical||(t.offsetY=this.getElementOffsetY(),t.dataBind());const i=this.popObj.element,s=this.popObj.element.parentElement,r=s.querySelector("."+yc);It(t.element,{height:"auto",maxHeight:""}),t.element.style.maxHeight=t.element.offsetHeight+"px","Extended"===this.overflowMode&&(t.element.style.minHeight="");const o=i.offsetTop+i.offsetHeight+Mo(s).top,a=r.firstElementChild;r.classList.add(dI),ua(a,[KD],[hI]),this.tbarPopupHandler(!0);const u=m(window.scrollY)?0:window.scrollY;if(!this.isVertical&&window.innerHeight+u<o&&this.element.offsetTop<i.offsetHeight){let p=i.offsetHeight-(o-window.innerHeight-u+5);t.height=p+"px";for(let y=0;y<=i.childElementCount;y++){const E=i.children[y];if(E.offsetTop+E.offsetHeight>p){p=E.offsetTop;break}}It(t.element,{maxHeight:p+"px"})}else if(this.isVertical){const p=this.element.getBoundingClientRect();It(t.element,{maxHeight:p.top+this.element.offsetHeight+"px",bottom:0,visibility:""})}if(t){const p=i.getBoundingClientRect();p.right>document.documentElement.clientWidth&&p.width>s.getBoundingClientRect().width&&(t.collision={Y:"none"},t.dataBind()),t.refreshPosition()}}popupClose(e){const i=this.element.querySelector("."+yc),s=i.firstElementChild;i.classList.remove(dI),ua(s,[hI],[KD]),this.tbarPopupHandler(!1)}checkPriority(e,t,i,s){const r=this.popupPriCount>0,a=i;let u,p,y=0,E=0,_=0;const D=(L,V)=>{let H=!1;return V.forEach(se=>{L.classList.contains(se)&&(H=!0)}),H};for(let L=t.length-1;L>=0;L--){let V;const H=window.getComputedStyle(t[L]);this.isVertical?(V=parseFloat(H.marginTop),V+=parseFloat(H.marginBottom)):(V=parseFloat(H.marginRight),V+=parseFloat(H.marginLeft));const se=t[L]===this.tbarEle[0];se&&(this.tbarEleMrgn=V),u=this.isVertical?t[L].offsetHeight:t[L].offsetWidth;const _e=se?u+V:u;if(D(t[L],[EL])&&r&&(t[L].classList.add(sm),It(t[L],this.isVertical?{display:"none",minHeight:_e+"px"}:{display:"none",minWidth:_e+"px"}),_++),p=this.isVertical?t[L].offsetTop+t[L].offsetHeight+V>i:t[L].offsetLeft+t[L].offsetWidth+V>i,p){if(t[L].classList.contains(eo)){if("Extended"===this.overflowMode)E===_&&D(t[L],[eo,pI])&&(t[L].classList.add(sm),_++),E++;else if("Popup"===this.overflowMode){if(y>0&&E===_){const re=t[L+E+(y-1)];D(re,[eo,pI])&&It(re,{display:"none"})}y++,E=0,_=0}}else E++;t[L].classList.contains(Rd)&&s||D(t[L],[eo,pI])?i-=(this.isVertical?t[L].offsetHeight:t[L].offsetWidth)+V:(t[L].classList.add(sm),It(t[L],this.isVertical?{display:"none",minHeight:_e+"px"}:{display:"none",minWidth:_e+"px"}),_++)}}if(s){const L=at("."+go+":not(."+sm+")",this.element);this.checkPriority(e,L,a,!1)}}createPopupIcon(e){const t=e.id.concat("_nav");let i="e-"+e.id.concat("_nav e-hor-nav");i="Extended"===this.overflowMode?i+" e-expended-nav":i;const s=this.createElement("div",{id:t,className:i});("msie"===Q.info.name||"edge"===Q.info.name)&&s.classList.add("e-ie-align");const r=this.createElement("div",{className:hI+" e-icons"});s.appendChild(r),s.setAttribute("tabindex","0"),s.setAttribute("role","list"),e.appendChild(s)}tbarPriRef(e,t,i,s,r,o,a,u){const p=u,_=at("."+sm+":not(."+Rd+")",this.popObj.element).length,D=(L,V)=>L.classList.contains(V);if(0===at(".e-toolbar-item:not(.e-separator):not(.e-overflow-show)",e).length){const L=e.children[t-(t-i)-1],V=!m(L)&&D(L,pI);if(!m(L)&&D(L,eo)&&!zn(L)||V){const H="none";L.style.display="inherit";const se=L.offsetWidth+2*parseFloat(window.getComputedStyle(L).marginRight),_e=L.previousElementSibling;o+se<a||r?(e.insertBefore(s,e.children[t+p-(t-i)]),m(_e)||(_e.style.display="")):_e.classList.contains(eo)&&(_e.style.display=H),L.style.display=""}else e.insertBefore(s,e.children[t+p-(t-i)])}else e.insertBefore(s,e.children[t+p-_])}popupRefresh(e,t){const i=this.element,s=this.isVertical,r=i.querySelector("."+pr);let a,o=i.querySelector("."+yc);if(m(o))return;r.removeAttribute("style"),e.style.display="block",a=s?i.offsetHeight-(o.offsetHeight+r.offsetHeight):i.offsetWidth-(o.offsetWidth+r.offsetWidth);let u=0;[].slice.call(e.children).forEach(p=>{u+=this.popupEleWidth(p),It(p,{position:""})}),a+(s?o.offsetHeight:o.offsetWidth)>u&&0===this.popupPriCount&&(t=!0),this.popupEleRefresh(a,e,t),e.style.display="",0===e.children.length&&o&&this.popObj&&(ye(o),o=null,this.popObj.destroy(),ye(this.popObj.element),this.popObj=null,i.setAttribute("aria-haspopup","false"))}ignoreEleFetch(e,t){const i=[].slice.call(t.querySelectorAll("."+pI)),s=[];let r=0;return i.length>0?(i.forEach(o=>{s.push([].slice.call(t.children).indexOf(o))}),s.forEach(o=>{o<=e&&r++}),r):0}checkPopupRefresh(e,t){t.style.display="block";const i=this.popupEleWidth(t.firstElementChild);t.firstElementChild.style.removeProperty("Position");const s=e.offsetWidth-e.querySelector("."+yc).offsetWidth,r=e.querySelector("."+pr).offsetWidth;return t.style.removeProperty("display"),s>i+r}popupEleWidth(e){e.style.position="absolute";let t=this.isVertical?e.offsetHeight:e.offsetWidth;const i=e.querySelector(".e-tbar-btn-text");if(e.classList.contains("e-tbtn-align")||e.classList.contains(CL)){const s=e.children[0];!m(i)&&e.classList.contains(CL)?i.style.display="none":!m(i)&&e.classList.contains(oH)&&(i.style.display="block"),s.style.minWidth="0%",t=parseFloat(this.isVertical?e.style.minHeight:e.style.minWidth),s.style.minWidth="",s.style.minHeight="",m(i)||(i.style.display="")}return t}popupEleRefresh(e,t,i){const s=this.popupPriCount>0;let o,a,r=this.tbarEle,u=this.element.querySelector("."+pr),p=0;for(const E of[].slice.call(t.children)){if(E.classList.contains(EL)&&s&&!i)continue;let _=this.popupEleWidth(E);if(E===this.tbarEle[0]&&(_+=this.tbarEleMrgn),E.style.position="",!(_<e||i))break;{if(It(E,{minWidth:"",height:"",minHeight:""}),E.classList.contains(ZD)||E.classList.remove(sm),a=this.tbarEle.indexOf(E),this.tbarAlign){const L=this.items[a].align;a=this.tbarAlgEle[(L+"s").toLowerCase()].indexOf(E),r=this.tbarAlgEle[(L+"s").toLowerCase()],u=this.element.querySelector("."+pr+" .e-toolbar-"+L.toLowerCase())}let D=0;"Extended"!==this.overflowMode&&r.slice(0,a).forEach(L=>{(L.classList.contains(Rd)||L.classList.contains(eo))&&(L.classList.contains(eo)&&(L.style.display="",e-=L.offsetWidth),D++)}),p=this.ignoreEleFetch(a,u),E.classList.contains(Rd)?(this.tbarPriRef(u,a,D,E,i,_,e,p),e-=E.offsetWidth):0===a?(u.insertBefore(E,u.firstChild),e-=E.offsetWidth):(o=at("."+Rd,this.popObj.element).length,u.insertBefore(E,u.children[a+p-o]),e-=E.offsetWidth),E.style.height=""}}this.checkOverflow(this.element,this.element.getElementsByClassName(pr)[0])&&!i&&this.renderOverflowMode()}removePositioning(){const e=this.element.querySelector("."+pr);if(m(e)||!e.classList.contains(Nd))return;this.remove(e,Nd);const t=[].slice.call(e.childNodes);t[1].removeAttribute("style"),t[2].removeAttribute("style")}refreshPositioning(){const e=this.element.querySelector("."+pr);this.add(e,Nd),this.itemPositioning()}itemPositioning(){const e=this.element.querySelector("."+pr);let t;if(m(e)||!e.classList.contains(Nd))return;const i=this.element.querySelector("."+yc);let s;s=[].slice.call(this.scrollModule?e.querySelector("."+(this.isVertical?"e-vscroll-content":"e-hscroll-content")).children:e.childNodes),t=this.isVertical?s[0].offsetHeight+s[2].offsetHeight:s[0].offsetWidth+s[2].offsetWidth;let r=this.isVertical?this.element.offsetHeight:this.element.offsetWidth;if(i){r-=this.isVertical?i.offsetHeight:i.offsetWidth;const u=(this.isVertical?i.offsetHeight:i.offsetWidth)+"px";s[2].removeAttribute("style"),this.isVertical?this.enableRtl?s[2].style.top=u:s[2].style.bottom=u:this.enableRtl?s[2].style.left=u:s[2].style.right=u}if(r<=t)return;const o=(r-t-(this.isVertical?s[1].offsetHeight:s[1].offsetWidth))/2;s[1].removeAttribute("style");const a=(this.isVertical?s[0].offsetHeight:s[0].offsetWidth)+o+"px";this.isVertical?this.enableRtl?s[1].style.marginBottom=a:s[1].style.marginTop=a:this.enableRtl?s[1].style.marginRight=a:s[1].style.marginLeft=a}tbarItemAlign(e,t,i){if(e.showAlwaysInPopup&&"Show"!==e.overflow)return;const s=[];if(s.push(this.createElement("div",{className:"e-toolbar-left"})),s.push(this.createElement("div",{className:lH})),s.push(this.createElement("div",{className:"e-toolbar-right"})),0===i&&"Left"!==e.align)s.forEach(r=>{t.appendChild(r)}),this.tbarAlign=!0,this.add(t,Nd);else if("Left"!==e.align){const o=s[0];[].slice.call(t.childNodes).forEach(a=>{this.tbarAlgEle.lefts.push(a),o.appendChild(a)}),t.appendChild(o),t.appendChild(s[1]),t.appendChild(s[2]),this.tbarAlign=!0,this.add(t,Nd)}}ctrlTemplate(){this.ctrlTem=this.trgtEle.cloneNode(!0),this.add(this.trgtEle,pr),this.tbarEle=[],[].slice.call(this.trgtEle.children).forEach(t=>{"DIV"===t.tagName&&(this.tbarEle.push(t),t.setAttribute("aria-disabled","false"),this.add(t,go))})}renderItems(){const e=this.element,t=this.items;if(null!=this.trgtEle)this.ctrlTemplate();else if(e&&t.length>0){let i;e&&e.children.length>0&&(i=e.querySelector("."+pr)),i||(i=this.createElement("div",{className:pr})),this.itemsAlign(t,i),e.appendChild(i)}}setAttr(e,t){const i=Object.keys(e);let s;for(let r=0;r<i.length;r++)s=i[r],"class"===s?this.add(t,e[s]):t.setAttribute(s,e[s])}enableItems(e,t){const i=e,s=i.length;let r;m(t)&&(t=!0);const o=(a,u)=>{a?(u.classList.remove(Ld),u.setAttribute("aria-disabled","false")):(u.classList.add(Ld),u.setAttribute("aria-disabled","true"))};if(!m(s)&&s>=1){for(let a=0,u=[].slice.call(i);a<s;a++){const p=u[a];if("number"==typeof p){if(r=this.getElementByIndex(p),m(r))return;i[a]=r}else r=p;o(t,r)}t?Y(i,Ld):j(i,Ld)}else{if("number"==typeof i){if(r=this.getElementByIndex(i),m(r))return}else r=e;o(t,r)}}getElementByIndex(e){return this.tbarEle[e]?this.tbarEle[e]:null}addItems(e,t){let i;this.extendedOpen();const s=this.element.querySelector("."+pr);if(m(s))return void this.itemsRerender(e);let r,o="Left";m(t)&&(t=0),e.forEach(a=>{!m(a.align)&&"Left"!==a.align&&"Left"===o&&(o=a.align)});for(const a of e)if(m(a.type)&&(a.type="Button"),i=at("."+go,this.element),a.align=o,r=this.renderSubComponent(a,t),this.tbarEle.length>=t&&i.length>=0){m(this.scrollModule)&&this.destroyMode();const u="L"===a.align[0]?0:"C"===a.align[0]?1:2;let p;this.tbarAlign||"Left"===o?this.tbarAlign?(p=ae(i[0],"."+pr).children[u],p.insertBefore(r,p.children[t]),this.tbarAlgEle[(a.align+"s").toLowerCase()].splice(t,0,r),this.refreshPositioning()):0===i.length?(i=at("."+pr,this.element),i[0].appendChild(r)):i[0].parentNode.insertBefore(r,i[t]):(this.tbarItemAlign(a,s,1),this.tbarAlign=!0,p=ae(i[0],"."+pr).children[u],p.appendChild(r),this.tbarAlgEle[(a.align+"s").toLowerCase()].push(r),this.refreshPositioning()),this.items.splice(t,0,a),this.tbarEle.splice(t,0,r),t++,this.offsetWid=s.offsetWidth}s.style.width="",this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()}removeItems(e){const t=e;let i,s=[].slice.call(at("."+go,this.element));if("number"==typeof t)i=parseInt(e.toString(),10),this.removeItemByIndex(i,s);else if(t&&t.length>1)for(const r of[].slice.call(t))i=this.tbarEle.indexOf(r),this.removeItemByIndex(i,s),s=at("."+go,this.element);else i=s.indexOf(t&&t.length&&1===t.length?t[0]:e),this.removeItemByIndex(i,s);this.resize()}removeItemByIndex(e,t){if(this.tbarEle[e]&&t[e]){const i=this.tbarEle.indexOf(t[e]);if(this.tbarAlign){const r=this.tbarAlgEle[(this.items[i].align+"s").toLowerCase()].indexOf(this.tbarEle[i]);this.tbarAlgEle[(this.items[i].align+"s").toLowerCase()].splice(r,1)}this.isReact&&this.clearTemplate();const s=t[e].querySelector(".e-control.e-btn");!m(s)&&!m(s.ej2_instances[0])&&!s.ej2_instances[0].isDestroyed&&s.ej2_instances[0].destroy(),ye(t[e]),this.items.splice(i,1),this.tbarEle.splice(i,1)}}templateRender(e,t,i,s){const o=e;let a;if("object"==typeof e&&(a="function"==typeof o.appendTo),"string"!=typeof e&&a){if("Input"===i.type){const u=this.createElement("input");u.id=i.id?i.id:Ks("tbr-ipt"),t.appendChild(u),o.appendTo(u)}}else{let u,y,p=e;p="string"==typeof e?e.trim():e;try{if("object"!=typeof e||m(e.tagName)){if(document.querySelectorAll(p).length){const E=document.querySelector(p),_=E.outerHTML.trim();t.appendChild(E),E.style.display="",m(_)||this.tempId.push(p)}}else t.appendChild(e)}catch(E){u=xs(p)}m(u)||(y=u({},this,"template",this.element.id+s+"_template",this.isStringTemplate)),!m(y)&&y.length>0&&[].slice.call(y).forEach(E=>{m(E.tagName)||(E.style.display=""),t.appendChild(E)})}this.add(t,rH),this.tbarEle.push(t)}buttonRendering(e,t){const i=this.createElement("button",{className:"e-tbar-btn"});i.setAttribute("type","button");const s=e.text;let r,o;i.id=e.id?e.id:Ks("e-tbr-btn");const a=this.createElement("span",{className:"e-tbar-btn-text"});s?(a.innerHTML=this.enableHtmlSanitizer?_n.sanitize(s):s,i.appendChild(a),i.classList.add("e-tbtn-txt")):this.add(t,"e-tbtn-align"),(e.prefixIcon||e.suffixIcon)&&(e.prefixIcon&&e.suffixIcon||e.prefixIcon?(r=e.prefixIcon+" e-icons",o="Left"):(r=e.suffixIcon+" e-icons",o="Right"));const u=new Ip({iconCss:r,iconPosition:o});return u.createElement=this.createElement,u.appendTo(i),e.width&&It(i,{width:ct(e.width)}),i}renderSubComponent(e,t){let i;const s=this.createElement("div",{className:go});s.setAttribute("aria-disabled","false");const r=this.createElement("div",{innerHTML:this.enableHtmlSanitizer?_n.sanitize(e.tooltipText):e.tooltipText});if(this.tbarEle||(this.tbarEle=[]),e.htmlAttributes&&this.setAttr(e.htmlAttributes,s),e.tooltipText&&s.setAttribute("title",r.textContent),e.cssClass&&(s.className=s.className+" "+e.cssClass),e.template)this.templateRender(e.template,s,e,t);else switch(e.type){case"Button":i=this.buttonRendering(e,s),i.setAttribute("tabindex","-1"),i.setAttribute("aria-label",e.text||e.tooltipText),s.appendChild(i),s.addEventListener("click",this.itemClick.bind(this));break;case"Separator":this.add(s,eo)}if(e.showTextOn){const o=e.showTextOn;"Toolbar"===o?(this.add(s,oH),this.add(s,"e-tbtn-align")):"Overflow"===o&&this.add(s,CL)}if(e.overflow){const o=e.overflow;"Show"===o?this.add(s,Rd):"Hide"===o&&(s.classList.contains(eo)||this.add(s,ZD))}return"Show"!==e.overflow&&e.showAlwaysInPopup&&!s.classList.contains(eo)&&(this.add(s,EL),this.popupPriCount++),e.disabled&&this.add(s,Ld),!1===e.visible&&this.add(s,fI),s}itemClick(e){this.activeEleSwitch(e.currentTarget)}activeEleSwitch(e){this.activeEleRemove(e.firstElementChild),this.activeEle.focus()}activeEleRemove(e){m(this.activeEle)||this.activeEle.setAttribute("tabindex","-1"),this.activeEle=e,m(this.trgtEle)&&!e.parentElement.classList.contains(rH)?e.removeAttribute("tabindex"):this.activeEle.setAttribute("tabindex","0")}getPersistData(){return this.addOnPersist([])}getModuleName(){return"toolbar"}itemsRerender(e){this.items=this.tbarItemsCol,(this.isReact||this.isAngular)&&this.clearTemplate(),this.destroyMode(),this.destroyItems(),this.items=e,this.tbarItemsCol=this.items,this.renderItems(),this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()}resize(){const e=this.element;this.tbResize=!0,this.tbarAlign&&this.itemPositioning(),this.popObj&&"Popup"===this.overflowMode&&this.popObj.hide();const t=this.checkOverflow(e,e.getElementsByClassName(pr)[0]);if(!t){this.destroyScroll();const i=e.querySelector("."+pr);m(i)||(this.remove(i,uH),this.tbarAlign&&this.add(i,Nd))}if(!t||!this.scrollModule||this.offsetWid!==e.offsetWidth){if((this.offsetWid>e.offsetWidth||t)&&this.renderOverflowMode(),this.popObj){if("Extended"===this.overflowMode){const i=window.getComputedStyle(this.element);this.popObj.width=parseFloat(i.width)+2*parseFloat(i.borderRightWidth)}this.tbarAlign&&this.removePositioning(),this.popupRefresh(this.popObj.element,!1),this.tbarAlign&&this.refreshPositioning()}this.element.querySelector("."+cH)&&(this.scrollStep=this.element.querySelector("."+cH).offsetWidth),this.offsetWid=e.offsetWidth,this.tbResize=!1,this.separator()}}extendedOpen(){const e=this.element.querySelector("."+XD);"Extended"===this.overflowMode&&e&&(this.isExtendedOpen=e.classList.contains(nH))}onPropertyChanged(e,t){const i=this.element,s=i.offsetWidth;this.extendedOpen();for(const r of Object.keys(e))switch(r){case"items":if(e.items instanceof Array&&t.items instanceof Array)this.itemsRerender(e.items);else{const o=Object.keys(e.items);for(let a=0;a<o.length;a++){const u=parseInt(Object.keys(e.items)[a],10),p=Object.keys(e.items[u])[0],y=Object(e.items[u])[p];if("function"!=typeof y){if(this.tbarAlign||"align"===p){this.refresh(),this.trigger("created");break}const _="overflow"===p&&0!==this.popupPriCount;("showAlwaysInPopup"===p&&!y||this.items[u].showAlwaysInPopup&&_)&&--this.popupPriCount,m(this.scrollModule)&&this.destroyMode();const D=[].slice.call(at("."+pr+" ."+go,i));this.isReact&&this.clearTemplate(),ye(D[u]),this.tbarEle.splice(u,1),this.addItems([this.items[u]],u),this.items.splice(u,1),this.items[u].template&&this.tbarEle.splice(this.items.length,1)}}}break;case"width":It(i,{width:ct(e.width)}),this.renderOverflowMode(),this.popObj&&s<i.offsetWidth&&this.popupRefresh(this.popObj.element,!1);break;case"height":It(this.element,{height:ct(e.height)});break;case"overflowMode":this.destroyMode(),this.renderOverflowMode(),this.enableRtl&&this.add(i,Bp),this.refreshOverflow();break;case"enableRtl":e.enableRtl?this.add(i,Bp):this.remove(i,Bp),m(this.scrollModule)||(e.enableRtl?this.add(this.scrollModule.element,Bp):this.remove(this.scrollModule.element,Bp)),m(this.popObj)||(e.enableRtl?this.add(this.popObj.element,Bp):this.remove(this.popObj.element,Bp)),this.tbarAlign&&this.itemPositioning();break;case"scrollStep":this.scrollModule&&(this.scrollModule.scrollStep=this.scrollStep);break;case"enableCollision":this.popObj&&(this.popObj.collision={Y:this.enableCollision?"flip":"none"});break;case"cssClass":t.cssClass&&Y([this.element],t.cssClass.split(" ")),e.cssClass&&j([this.element],e.cssClass.split(" "));break;case"allowKeyboard":this.unwireKeyboardEvent(),e.allowKeyboard&&this.wireKeyboardEvent()}}hideItem(e,t){const i="object"==typeof e;let r,o,s=e;const a=[].slice.call(at("."+go,this.element));if(i?o=e:this.tbarEle[s]&&(o=[].slice.call(at("."+go,this.element))[s]),o){if(t?o.classList.add(fI):o.classList.remove(fI),t&&m(this.element.getAttribute("tabindex"))&&!o.classList.contains(eo)){if(m(o.firstElementChild.getAttribute("tabindex"))){o.firstElementChild.setAttribute("tabindex","-1");const u=[].slice.call(at("."+go,this.element));i&&(s=u.indexOf(o));let p=u[++s];for(;p;){if(!this.eleContains(p)){p.firstElementChild.removeAttribute("tabindex");break}p=u[++s]}}}else if(m(this.element.getAttribute("tabindex"))&&!o.classList.contains(eo)){r=0;let u=!1,p=!1,y=a[r];for(;y;)if(y.classList.contains(eo))y=a[++r];else if(m(y.firstElementChild.getAttribute("tabindex")))y.firstElementChild.setAttribute("tabindex","-1"),u=!0;else{if(u&&p)break;this.eleContains(y)||(y.firstElementChild.removeAttribute("tabindex"),p=!0),y=a[++r]}}this.refreshOverflow()}}};gn([cl([],Ba)],ul.prototype,"items",void 0),gn([A("auto")],ul.prototype,"width",void 0),gn([A("auto")],ul.prototype,"height",void 0),gn([A("")],ul.prototype,"cssClass",void 0),gn([A("Scrollable")],ul.prototype,"overflowMode",void 0),gn([A()],ul.prototype,"scrollStep",void 0),gn([A(!0)],ul.prototype,"enableCollision",void 0),gn([A(!0)],ul.prototype,"enableHtmlSanitizer",void 0),gn([A(!0)],ul.prototype,"allowKeyboard",void 0),gn([Z()],ul.prototype,"clicked",void 0),gn([Z()],ul.prototype,"created",void 0),gn([Z()],ul.prototype,"destroyed",void 0),gn([Z()],ul.prototype,"beforeCreate",void 0),ul=gn([ts],ul);var Ln=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const QD="e-acrdn-root",ME="e-accordion",Mh="e-acrdn-item",pH="e-item-focus",mI="e-hide",Zo="e-acrdn-header",IL="e-acrdn-header-content",Du="e-acrdn-panel",JD="e-acrdn-content",gI="e-toggle-icon",fH="e-expand-icon",xL="e-rtl",TL="e-content-hide",AL="e-select",yI="e-selected",vI="e-active",PE="e-overlay",ek="e-toggle-animation",Fd="e-expand-state",mH="e-accordion-container";class bI extends Is{}Ln([A("SlideDown")],bI.prototype,"effect",void 0),Ln([A(400)],bI.prototype,"duration",void 0),Ln([A("linear")],bI.prototype,"easing",void 0);class DL extends Is{}Ln([Ps({effect:"SlideUp",duration:400,easing:"linear"},bI)],DL.prototype,"collapse",void 0),Ln([Ps({effect:"SlideDown",duration:400,easing:"linear"},bI)],DL.prototype,"expand",void 0);class nm extends Is{}Ln([A(null)],nm.prototype,"content",void 0),Ln([A(null)],nm.prototype,"header",void 0),Ln([A(null)],nm.prototype,"cssClass",void 0),Ln([A(null)],nm.prototype,"iconCss",void 0),Ln([A(!1)],nm.prototype,"expanded",void 0),Ln([A(!0)],nm.prototype,"visible",void 0),Ln([A(!1)],nm.prototype,"disabled",void 0),Ln([A()],nm.prototype,"id",void 0);let Va=class extends Ls{constructor(e,t){super(e,t),this.keyConfigs={moveUp:"uparrow",moveDown:"downarrow",enter:"enter",space:"space",home:"home",end:"end"}}destroy(){(this.isReact||this.isAngular||this.isVue)&&this.clearTemplate();const e=this.element;if(super.destroy(),this.unwireEvents(),this.isDestroy=!0,this.restoreContent(null),[].slice.call(e.children).forEach(t=>{e.removeChild(t)}),this.trgtEle){for(this.trgtEle=null;this.ctrlTem.firstElementChild;)e.appendChild(this.ctrlTem.firstElementChild);this.ctrlTem=null}e.classList.remove(QD),e.removeAttribute("style"),["aria-disabled","aria-multiselectable","role","data-ripple"].forEach(t=>{this.element.removeAttribute(t)}),!this.isNested&&Sh&&this.removeRippleEffect()}preRender(){const e=ae(this.element,"."+Du);this.isNested=!1,this.templateEle=[],this.isDestroy||(this.isDestroy=!1),m(e)?this.element.classList.add(QD):(e.classList.add("e-nested"),this.isNested=!0),this.enableRtl&&this.add(this.element,xL)}add(e,t){e.classList.add(t)}remove(e,t){e.classList.remove(t)}render(){this.initializeHeaderTemplate(),this.initializeItemTemplate(),this.initialize(),this.renderControl(),this.wireEvents(),this.renderComplete()}initialize(){const e=ct(this.width),t=ct(this.height);It(this.element,{width:e,height:t}),m(this.initExpand)&&(this.initExpand=[]),this.expandedIndices.length>0&&(this.initExpand=this.expandedIndices),bt(this.element,{"aria-disabled":"false",role:"presentation","aria-multiselectable":"true"}),"Single"===this.expandMode&&this.element.setAttribute("aria-multiselectable","false")}renderControl(){this.trgtEle=this.element.children.length>0?X("div",this.element):null,this.renderItems(),this.initItemExpand()}wireFocusEvents(){const e=[].slice.call(this.element.querySelectorAll("."+Mh));for(const t of e){const i=t.querySelector("."+Zo);t.childElementCount>0&&i&&(O.clearEvents(i),O.add(i,"focus",this.focusIn,this),O.add(i,"blur",this.focusOut,this))}}unwireEvents(){O.remove(this.element,"click",this.clickHandler),m(this.keyModule)||this.keyModule.destroy()}wireEvents(){O.add(this.element,"click",this.clickHandler,this),!this.isNested&&!this.isDestroy&&(this.removeRippleEffect=da(this.element,{selector:"."+Zo})),this.isNested||(this.keyModule=new Pn(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}))}templateParser(e){if(e)try{if(document.querySelectorAll(e).length)return xs(document.querySelector(e).innerHTML.trim())}catch(t){return xs(e)}}initializeHeaderTemplate(){this.headerTemplate&&(this.headerTemplateFn=this.templateParser(this.headerTemplate))}initializeItemTemplate(){this.itemTemplate&&(this.itemTemplateFn=this.templateParser(this.itemTemplate))}getHeaderTemplate(){return this.headerTemplateFn}getItemTemplate(){return this.itemTemplateFn}focusIn(e){e.target.parentElement.classList.add(pH)}focusOut(e){e.target.parentElement.classList.remove(pH)}ctrlTemplate(){let e;this.ctrlTem=this.element.cloneNode(!0);const t=X("."+mH,this.element);e=t?t.children:this.element.children;const i=[];[].slice.call(e).forEach(s=>{i.push({header:s.childElementCount>0&&s.children[0]?s.children[0]:"",content:s.childElementCount>1&&s.children[1]?s.children[1]:""}),s.parentNode.removeChild(s)}),t&&this.element.removeChild(t),this.setProperties({items:i},!0)}toggleIconGenerate(){const e=this.createElement("div",{className:gI}),t=this.createElement("span",{className:"e-tgl-collapse-icon e-icons"});return e.appendChild(t),e}initItemExpand(){const e=this.initExpand.length;if(0!==e){if("Single"===this.expandMode)this.expandItem(!0,this.initExpand[e-1]);else for(let t=0;t<e;t++)this.expandItem(!0,this.initExpand[t]);this.isReact&&this.renderReactTemplates()}}renderItems(){const e=this.element;let t,i;if(m(this.trgtEle)||this.ctrlTemplate(),this.dataSource.length>0)this.dataSource.forEach((s,r)=>{i=this.renderInnerItem(s,r),e.appendChild(i),i.childElementCount>0&&(O.add(i.querySelector("."+Zo),"focus",this.focusIn,this),O.add(i.querySelector("."+Zo),"blur",this.focusOut,this))});else{const s=this.items;e&&s.length>0&&s.forEach((r,o)=>{t=this.renderInnerItem(r,o),e.appendChild(t),t.childElementCount>0&&(O.add(t.querySelector("."+Zo),"focus",this.focusIn,this),O.add(t.querySelector("."+Zo),"blur",this.focusOut,this))})}this.isReact&&this.renderReactTemplates()}clickHandler(e){const t=e.target,i=this.getItems(),s={};let r;if(ae(t,"."+ME)!==this.element)return;t.classList.add("e-target");const a=ae(t,"."+Mh);let y,u=ae(t,"."+Zo),p=ae(t,"."+Du);a&&(m(u)||m(p))&&(u=a.children[0],p=a.children[1]),u&&(r=X("."+gI,u)),u?y=ae(u,"."+Mh):p&&(y=ae(p,"."+Mh));const E=this.getIndexByItem(a);y&&(s.item=i[this.getIndexByItem(y)]),s.originalEvent=e,!m(r)&&a.childElementCount<=1&&(m(p)||!m(X("."+Zo+" ."+gI,y)))?(a.appendChild(this.contentRendering(E)),this.ariaAttrUpdate(a),this.afterContentRender(t,s,a,u,p,y)):this.afterContentRender(t,s,a,u,p,y),this.isReact&&this.renderReactTemplates()}afterContentRender(e,t,i,s,r,o){const a=[];this.trigger("clicked",t);let u=r&&!m(X(".e-target",r));const y=r&&!m(X("."+ME,r))&&m(ae(e,".e-acrdn-panel .e-accordion")),E=r&&m(X("."+ME,r))||ae(e,"."+ME)!==this.element;if(u=u&&(y||E),e.classList.remove("e-target"),e.classList.contains(Du)||e.classList.contains(JD)||u)return;const _=this.element.querySelector("."+mH);[].slice.call(_?_.children:this.element.children).forEach(se=>{se.classList.contains(vI)&&a.push(se)});const L=[].slice.call(this.element.querySelectorAll("."+Mh+" [e-animate]"));if(L.length>0)for(const se of L)a.push(se.parentElement);const V=-1!==a.indexOf(o)&&"true"===r.getAttribute("e-animate");let H=!1;if(!m(i)&&!m(s)){const se=X("."+Du,i),re=ae(i,"."+QD).querySelector("."+Fd);if(m(se))return;H=re===i,!zn(se)||V&&!o.classList.contains(yI)?(a.length>0&&"Single"===this.expandMode&&!V&&a.forEach(Ae=>{this.collapse(X("."+Du,Ae)),Ae.classList.remove(Fd)}),this.expand(se)):this.collapse(se),!m(re)&&!H&&re.classList.remove(Fd)}}eleMoveFocus(e,t,i){let s,r=ae(i,"."+Mh);i===t?s=("moveUp"===e?i.lastElementChild:i).querySelector("."+Zo):i.classList.contains(Zo)&&(r="moveUp"===e?r.previousElementSibling:r.nextElementSibling,r&&(s=X("."+Zo,r))),s&&s.focus()}keyActionHandler(e){const t=e.target;if(m(ae(e.target,Zo))&&!t.classList.contains(ME)&&!t.classList.contains(Zo))return;let s;const r=this.element;let o;switch(e.action){case"moveUp":case"moveDown":this.eleMoveFocus(e.action,r,t);break;case"space":case"enter":o=t.nextElementSibling,!m(o)&&o.classList.contains(Du)?"true"!==o.getAttribute("e-animate")&&t.click():t.click(),e.preventDefault();break;case"home":case"end":s="home"===e.action?r.firstElementChild.children[0]:r.lastElementChild.children[0],s.focus(),e.preventDefault()}}headerEleGenerate(){const e=this.createElement("div",{className:Zo,id:Ks("acrdn_header")});return bt(e,{tabindex:"0",role:"heading","aria-label":"collapsed","aria-disabled":"false","aria-level":this.getItems().length.toString()}),e}renderInnerItem(e,t){const i=this.createElement("div",{className:Mh,id:e.id||Ks("acrdn_item"),attrs:{"aria-expanded":"false",role:"row"}});if(this.headerTemplate){const r=this.headerEleGenerate(),o=this.createElement("div",{className:IL});return r.appendChild(o),Pi(this.getHeaderTemplate()(e,this,"headerTemplate",this.element.id+"_headerTemplate",!1),o),i.appendChild(r),r.appendChild(this.toggleIconGenerate()),this.add(i,AL),i}if(e.header&&this.angularnativeCondiCheck(e,"header")){this.enableHtmlSanitizer&&"string"==typeof e.header&&(e.header=_n.sanitize(e.header));const r=this.headerEleGenerate(),o=this.createElement("div",{className:IL});r.appendChild(o),r.appendChild(this.fetchElement(o,e.header,t,!0)),i.appendChild(r)}let s=X("."+Zo,i);if(e.expanded&&!m(t)&&!this.enablePersistence&&-1===this.initExpand.indexOf(t)&&this.initExpand.push(t),e.cssClass&&j([i],e.cssClass.split(" ")),e.disabled&&j([i],PE),!1===e.visible&&j([i],mI),e.iconCss){const r=this.createElement("div",{className:"e-acrdn-header-icon"}),o=this.createElement("span",{className:e.iconCss+" e-icons"});r.appendChild(o),m(s)?(s=this.headerEleGenerate(),s.appendChild(r),i.appendChild(s)):s.insertBefore(r,s.childNodes[0])}if(e.content&&this.angularnativeCondiCheck(e,"content")){const r=this.toggleIconGenerate();m(s)&&(s=this.headerEleGenerate(),i.appendChild(s)),s.appendChild(r),this.add(i,AL)}return i}angularnativeCondiCheck(e,t){const s="content"===t?e.content:e.header;if(this.isAngular&&!m(s.elementRef)){const r=s.elementRef.nativeElement.data;if(m(r)||""===r||-1===r.indexOf("bindings="))return!0;const o=JSON.parse(s.elementRef.nativeElement.data.replace("bindings=",""));return!(!m(o)&&"false"===o["ng-reflect-ng-if"])}return!0}fetchElement(e,t,i,s){let r,o,a;try{if(document.querySelectorAll(t).length&&"Button"!==t){const u=document.querySelector(t);o=u.outerHTML.trim(),e.appendChild(u),u.style.display=""}}catch(u){"string"==typeof t?e.innerHTML=_n.sanitize(t):!m(this.trgtEle)&&t instanceof HTMLElement?(e.appendChild(t),e.firstElementChild.style.display=""):r=xs(t)}if(!m(r)){let u,p;this.isReact&&this.renderReactTemplates(),e.classList.contains(IL)?(u=this.element.id+i+"_header",p="header"):e.classList.contains(JD)&&(u=this.element.id+i+"_content",p="content"),a=r({},this,p,u,this.isStringTemplate)}return m(a)||!(a.length>0)||m(a[0].tagName)&&1===a.length?0===e.childElementCount&&(e.innerHTML=_n.sanitize(t)):[].slice.call(a).forEach(u=>{m(u.tagName)||(u.style.display=""),e.appendChild(u)}),m(o)||-1===this.templateEle.indexOf(t)&&this.templateEle.push(t),e}ariaAttrUpdate(e){const t=X("."+Zo,e),i=X("."+Du,e);t.setAttribute("aria-controls",i.id),i.setAttribute("aria-labelledby",t.id),i.setAttribute("role","definition")}contentRendering(e){const t=this.createElement("div",{className:Du+" "+TL,id:Ks("acrdn_panel")});bt(t,{"aria-hidden":"true"});const i=this.createElement("div",{className:JD});return this.dataSource.length>0?(this.isReact&&this.renderReactTemplates(),Pi(this.getItemTemplate()(this.dataSource[e],this,"itemTemplate",this.element.id+"_itemTemplate",!1),i),t.appendChild(i)):(this.enableHtmlSanitizer&&typeof this.items[e].content&&(this.items[e].content=_n.sanitize(this.items[e].content)),t.appendChild(this.fetchElement(i,this.items[e].content,e,!1))),t}expand(e){const t=this.getItems(),i=ae(e,"."+Mh);if(m(e)||zn(e)&&"true"!==e.getAttribute("e-animate")||i.classList.contains(PE))return;const r=ae(i,"."+QD).querySelector("."+Fd),o={name:this.animation.expand.effect,duration:this.animation.expand.duration,timingFunction:this.animation.expand.easing},a=X("."+gI,i).firstElementChild,u={element:i,item:t[this.getIndexByItem(i)],index:this.getIndexByItem(i),content:i.querySelector("."+Du),isExpanded:!0};this.trigger("expanding",u,p=>{p.cancel||(a.classList.add(ek),this.expandedItemsPush(i),m(r)||r.classList.remove(Fd),i.classList.add(Fd),"None"===o.name?(this.expandProgress("begin",a,e,i,p),this.expandProgress("end",a,e,i,p)):this.expandAnimation(o.name,a,e,i,o,p))})}expandAnimation(e,t,i,s,r,o){let a;this.lastActiveItemId=s.id,"SlideDown"===e?(r.begin=()=>{this.expandProgress("begin",t,i,s,o),i.style.position="absolute",a=s.offsetHeight,i.style.maxHeight=i.offsetHeight+"px",s.style.maxHeight=""},r.progress=()=>{s.style.minHeight=a+i.offsetHeight+"px"},r.end=()=>{It(i,{position:"",maxHeight:""}),s.style.minHeight="",this.expandProgress("end",t,i,s,o)}):(r.begin=()=>{this.expandProgress("begin",t,i,s,o)},r.end=()=>{this.expandProgress("end",t,i,s,o)}),new Wn(r).animate(i)}expandProgress(e,t,i,s,r){this.remove(i,TL),this.add(s,yI),this.add(t,fH),"end"===e&&(this.add(s,vI),i.setAttribute("aria-hidden","false"),bt(s,{"aria-expanded":"true"}),bt(i.previousElementSibling,{"aria-label":"expanded"}),t.classList.remove(ek),this.trigger("expanded",r))}expandedItemsPush(e){const t=this.getIndexByItem(e);if(-1===this.expandedIndices.indexOf(t)){const i=[].slice.call(this.expandedIndices);i.push(t),this.setProperties({expandedIndices:i},!0)}}getIndexByItem(e){const t=this.getItemElements();return[].slice.call(t).indexOf(e)}getItemElements(){const e=[];return[].slice.call(this.element.children).forEach(i=>{i.classList.contains(Mh)&&e.push(i)}),e}expandedItemsPop(e){const t=this.getIndexByItem(e),i=[].slice.call(this.expandedIndices);i.splice(i.indexOf(t),1),this.setProperties({expandedIndices:i},!0)}collapse(e){const t=this.getItems(),i=ae(e,"."+Mh);if(m(e)||!zn(e)||i.classList.contains(PE))return;const s={name:this.animation.collapse.effect,duration:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing},r=X("."+gI,i).firstElementChild,o={element:i,item:t[this.getIndexByItem(i)],index:this.getIndexByItem(i),content:i.querySelector("."+Du),isExpanded:!1};this.trigger("expanding",o,a=>{a.cancel||(this.expandedItemsPop(i),i.classList.remove(Fd),r.classList.add(ek),"None"===s.name?(this.collapseProgress("begin",r,e,i,a),this.collapseProgress("end",r,e,i,a)):this.collapseAnimation(s.name,e,i,r,s,a))})}collapseAnimation(e,t,i,s,r,o){let a,u,p,y;this.lastActiveItemId=i.id,"SlideUp"===e?(r.begin=()=>{p=i.offsetHeight,i.style.minHeight=p+"px",t.style.position="absolute",a=i.offsetHeight,u=t.offsetHeight,t.style.maxHeight=u+"px",this.collapseProgress("begin",s,t,i,o)},r.progress=()=>{y=a-(u-t.offsetHeight),y<p&&(i.style.minHeight=y+"px")},r.end=()=>{t.style.display="none",this.collapseProgress("end",s,t,i,o),i.style.minHeight="",It(t,{position:"",maxHeight:"",display:""})}):(r.begin=()=>{this.collapseProgress("begin",s,t,i,o)},r.end=()=>{this.collapseProgress("end",s,t,i,o)}),new Wn(r).animate(t)}collapseProgress(e,t,i,s,r){this.remove(t,fH),this.remove(s,yI),"end"===e&&(this.add(i,TL),t.classList.remove(ek),this.remove(s,vI),i.setAttribute("aria-hidden","true"),bt(s,{"aria-expanded":"false"}),bt(i.previousElementSibling,{"aria-label":"collapsed"}),this.trigger("expanded",r))}getModuleName(){return"accordion"}itemAttribUpdate(){const e=this.getItems(),t=this.getItemElements(),i=e.length;t.forEach(s=>{X("."+Zo,s).setAttribute("aria-level",""+i)})}getItems(){let e;return e=this.itemTemplate&&this.headerTemplate?this.dataSource:this.items,e}addItem(e,t){const i=this.element,s=this.getItemElements(),r=this.getItems();m(t)&&(t=r.length),i.childElementCount>=t&&(e instanceof Array?e:[e]).forEach((a,u)=>{const p=t+u;r.splice(p,0,a);const y=this.renderInnerItem(a,p);i.childElementCount===p?i.appendChild(y):i.insertBefore(y,s[p]),O.add(y.querySelector("."+Zo),"focus",this.focusIn,this),O.add(y.querySelector("."+Zo),"blur",this.focusOut,this),this.itemAttribUpdate(),this.expandedIndices=[],this.expandedItemRefresh(i),a&&a.expanded&&this.expandItem(!0,p)}),this.isReact&&this.renderReactTemplates()}expandedItemRefresh(e){const t=this.getItemElements();[].slice.call(t).forEach(i=>{i.classList.contains(yI)&&this.expandedItemsPush(i)})}removeItem(e){this.isReact&&this.clearTemplate(["headerTemplate","itemTemplate"],e);const i=this.getItemElements()[e],s=this.getItems();m(i)||(this.restoreContent(e),ye(i),s.splice(e,1),this.itemAttribUpdate(),this.expandedIndices=[],this.expandedItemRefresh(this.element))}select(e){const i=this.getItemElements()[e];m(i)||m(X("."+Zo,i))||i.children[0].focus()}hideItem(e,t){const s=this.getItemElements()[e];m(s)||(m(t)&&(t=!0),t?this.add(s,mI):this.remove(s,mI))}enableItem(e,t){const s=this.getItemElements()[e];if(m(s))return;const r=s.firstElementChild;t?(this.remove(s,PE),bt(r,{tabindex:"0","aria-disabled":"false"}),r.focus()):(s.classList.contains(vI)&&(this.expandItem(!1,e),this.eleMoveFocus("movedown",this.element,r)),this.add(s,PE),r.setAttribute("aria-disabled","true"),r.removeAttribute("tabindex"))}expandItem(e,t){const i=this.getItemElements();if(m(t))if("Single"===this.expandMode&&e){const s=i[i.length-1];this.itemExpand(e,s,this.getIndexByItem(s))}else{const s=X("#"+this.lastActiveItemId,this.element);[].slice.call(i).forEach(o=>{this.itemExpand(e,o,this.getIndexByItem(o)),o.classList.remove(Fd)});const r=X("."+Fd,this.element);r&&r.classList.remove(Fd),s&&s.classList.add(Fd)}else{const s=i[t];if(m(s)||!s.classList.contains(AL)||s.classList.contains(vI)&&e)return;"Single"===this.expandMode&&this.expandItem(!1),this.itemExpand(e,s,t)}}itemExpand(e,t,i){let s=t.children[1];t.classList.contains(PE)||(m(s)&&e?(s=this.contentRendering(i),t.appendChild(s),this.ariaAttrUpdate(t),this.expand(s)):m(s)||(e?this.expand(s):this.collapse(s)),this.isReact&&this.renderReactTemplates())}destroyItems(){this.restoreContent(null),(this.isReact||this.isAngular||this.isVue)&&this.clearTemplate(),[].slice.call(this.element.querySelectorAll("."+Mh)).forEach(e=>{ye(e)})}restoreContent(e){let t;t=m(e)?this.element:this.element.querySelectorAll("."+Mh)[e],this.templateEle.forEach(i=>{m(t.querySelector(i))||(document.body.appendChild(t.querySelector(i)).style.display="none")})}updateItem(e,t){if(!m(e)){const i=this.getItems(),s=i[t];i.splice(t,1),this.restoreContent(t),ye(e),this.addItem(s,t)}}setTemplate(e,t,i){t.innerHTML="",this.templateCompile(t,e,i),this.isReact&&this.renderReactTemplates()}templateCompile(e,t,i){const s=this.createElement("div");this.fetchElement(s,t,i,!1),0!==s.childNodes.length&&[].slice.call(s.childNodes).forEach(r=>{e.appendChild(r)})}getPersistData(){return this.addOnPersist(["expandedIndices"])}onPropertyChanged(e,t){const i=this.element;let s=!1;for(const r of Object.keys(e))switch(r){case"items":if(e.items instanceof Array&&t.items instanceof Array)s=!0;else{const o=Object.keys(e.items);for(let a=0;a<o.length;a++){const u=parseInt(Object.keys(e.items)[a],10),p=Object.keys(e.items[u])[0],y=at("."+Mh,this.element)[u],E=Object(t.items[u])[p],_=Object(e.items[u])[p],D=p;if(("header"===D||"iconCss"===D||"expanded"===D||"content"===D&&""===E)&&this.updateItem(y,u),"cssClass"===p&&!m(y)&&(y.classList.remove(E),y.classList.add(_)),"visible"===p&&!m(y)&&(!1===Object(e.items[u])[p]?y.classList.add(mI):y.classList.remove(mI)),"disabled"===p&&!m(y)&&this.enableItem(u,!_),"content"===p&&!m(y)&&2===y.children.length)if("function"==typeof _){const L=y.querySelector("."+JD);L.innerHTML="",this.setTemplate(_,L,u)}else y.classList.contains(yI)&&this.expandItem(!1,u),ye(y.querySelector("."+Du))}}break;case"dataSource":case"expandedIndices":null===this.expandedIndices&&(this.expandedIndices=[]),s=!0;break;case"headerTemplate":this.initializeHeaderTemplate(),s=!0;break;case"itemTemplate":this.initializeItemTemplate(),s=!0;break;case"enableRtl":e.enableRtl?this.add(i,xL):this.remove(i,xL);break;case"height":It(this.element,{height:ct(e.height)});break;case"width":It(this.element,{width:ct(e.width)});break;case"expandMode":"Single"===e.expandMode?(this.element.setAttribute("aria-multiselectable","false"),this.expandedIndices.length>1&&this.expandItem(!1)):this.element.setAttribute("aria-multiselectable","true")}s&&(this.initExpand=[],this.expandedIndices.length>0&&(this.initExpand=this.expandedIndices),this.destroyItems(),this.renderItems(),this.initItemExpand())}};Ln([cl([],nm)],Va.prototype,"items",void 0),Ln([A([])],Va.prototype,"dataSource",void 0),Ln([A()],Va.prototype,"itemTemplate",void 0),Ln([A()],Va.prototype,"headerTemplate",void 0),Ln([A("100%")],Va.prototype,"width",void 0),Ln([A("auto")],Va.prototype,"height",void 0),Ln([A([])],Va.prototype,"expandedIndices",void 0),Ln([A("Multiple")],Va.prototype,"expandMode",void 0),Ln([A(!1)],Va.prototype,"enableHtmlSanitizer",void 0),Ln([Ps({},DL)],Va.prototype,"animation",void 0),Ln([Z()],Va.prototype,"clicked",void 0),Ln([Z()],Va.prototype,"expanding",void 0),Ln([Z()],Va.prototype,"expanded",void 0),Ln([Z()],Va.prototype,"created",void 0),Ln([Z()],Va.prototype,"destroyed",void 0),Va=Ln([ts],Va);var tk=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let LE=class extends dr{constructor(e,t){super(e,t)}preRender(){this.isMenu=!1,this.element.id=this.element.id||Ks("ej2-contextmenu"),super.preRender()}initialize(){super.initialize(),bt(this.element,{role:"menubar",tabindex:"0"}),this.element.style.zIndex=pa(this.element).toString()}open(e,t,i){super.openMenu(null,null,e,t,null,i)}close(){super.closeMenu()}onPropertyChanged(e,t){super.onPropertyChanged(e,t);for(const i of Object.keys(e))switch(i){case"filter":this.close(),this.filter=e.filter;break;case"target":this.unWireEvents(t.target),this.wireEvents()}}getModuleName(){return"contextmenu"}};tk([A("")],LE.prototype,"target",void 0),tk([A("")],LE.prototype,"filter",void 0),tk([cl([],gc)],LE.prototype,"items",void 0),LE=tk([ts],LE);var rm=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const Bd="e-vertical",kL="e-hamburger";let Vd=class extends dr{constructor(e,t){super(e,t),this.tempItems=[]}getModuleName(){return"menu"}preRender(){if(this.isMenu=!0,this.element.id=this.element.id||Ks("ej2-menu"),this.template)try{document.querySelectorAll(this.template).length&&(this.template=document.querySelector(this.template).innerHTML.trim(),this.clearChanges())}catch(e){}else this.updateMenuItems(this.items);super.preRender()}initialize(){super.initialize(),bt(this.element,{role:"menubar",tabindex:"0"}),"Vertical"===this.orientation?(this.element.classList.add(Bd),this.hamburgerMode&&!this.target&&this.element.previousElementSibling.classList.add(Bd),this.element.setAttribute("aria-orientation","vertical")):Q.isDevice&&!this.enableScrolling&&this.element.parentElement.classList.add("e-scrollable"),this.hamburgerMode&&(this.element.parentElement.classList.add(kL),"Horizontal"===this.orientation&&this.element.classList.add("e-hide-menu"))}updateMenuItems(e){this.tempItems=e,this.items=[],this.tempItems.map(this.createMenuItems,this),this.setProperties({items:this.items},!0),this.tempItems=[]}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"orientation":"Vertical"===e.orientation?(this.element.classList.add(Bd),this.hamburgerMode&&(this.target||this.element.previousElementSibling.classList.add(Bd),this.element.classList.remove("e-hide-menu")),this.element.setAttribute("aria-orientation","vertical")):(this.element.classList.remove(Bd),this.hamburgerMode&&(this.target||this.element.previousElementSibling.classList.remove(Bd),this.element.classList.add("e-hide-menu")),this.element.removeAttribute("aria-orientation"));break;case"items":Object.keys(t.items).length||this.updateMenuItems(e.items);break;case"hamburgerMode":this.element.previousElementSibling||super.createHeaderContainer(),e.hamburgerMode?(this.element.parentElement.classList.add(kL),[].slice.call(this.element.getElementsByClassName("e-blankicon")).forEach(s=>{s.style[this.enableRtl?"paddingRight":"paddingLeft"]=""})):(this.element.parentElement.classList.remove(kL),"Vertical"===this.orientation&&this.setBlankIconStyle(this.element)),"Vertical"===this.orientation?(this.target||this.element.previousElementSibling.classList.add(Bd),this.element.classList.remove("e-hide-menu")):(this.target?this.element.previousElementSibling.classList.add(Bd):this.element.previousElementSibling.classList.remove(Bd),this.element.classList[e.hamburgerMode?"add":"remove"]("e-hide-menu"));break;case"title":this.hamburgerMode&&this.element.previousElementSibling&&(e.title=this.enableHtmlSanitizer?_n.sanitize(e.title):e.title,this.element.previousElementSibling.querySelector(".e-menu-title").innerHTML=e.title);break;case"target":this.hamburgerMode&&(this.unWireEvents(t.target),this.wireEvents(),"Horizontal"===this.orientation&&(e.target?this.element.previousElementSibling.classList.add(Bd):(this.element.previousElementSibling||super.createHeaderContainer(),this.element.previousElementSibling.classList.remove(Bd)),this.element.classList.add("e-hide-menu")))}super.onPropertyChanged(e,t)}createMenuItems(e){let t,i,s=this.items;const r=this.getField("parentId");if(e[r]){for(t=this.getIndex(e[r].toString(),!0),i=0;i<t.length;i++)s[t[i]].items||(s[t[i]].items=[]),s=s[t[i]].items;s.push(e)}else this.items.push(e)}open(){super.openHamburgerMenu()}close(){super.closeHamburgerMenu()}};rm([A("Horizontal")],Vd.prototype,"orientation",void 0),rm([A("")],Vd.prototype,"target",void 0),rm([A(null)],Vd.prototype,"template",void 0),rm([A(!1)],Vd.prototype,"enableScrolling",void 0),rm([A(!1)],Vd.prototype,"hamburgerMode",void 0),rm([A("Menu")],Vd.prototype,"title",void 0),rm([A(!1)],Vd.prototype,"enableHtmlSanitizer",void 0),rm([Ps({itemId:"id",text:"text",parentId:"parentId",iconCss:"iconCss",url:"url",separator:"separator",children:"items"},Oh)],Vd.prototype,"fields",void 0),Vd=rm([ts],Vd);var hs=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const om="e-tab",dl="e-tab-header",Ts="e-content",ik="e-nested",yo="e-item",OL="e-template",ML="e-rtl",Fs="e-active",my="e-disable",$n="e-hidden",PL="e-focused",LL="e-icons",RL="e-icon",gH="e-icon-tab",NL="e-close-icon",sk="e-close-show",nk="e-tab-text",RE="e-indicator",ku="e-tab-wrap",rk="e-text-wrap",yH="e-tab-icon",Ph="e-toolbar-items",ks="e-toolbar-item",vH="e-toolbar-pop",am="e-toolbar-popup",ok="e-progress",bH="e-ignore",FL="e-overlay",BL="e-vertical-tab",VL="e-vertical",CH="e-vertical-left",EH="e-vertical-right",wH="e-horizontal-bottom",HL="e-fill-mode",jL="e-reorder-active-item";class CI extends Is{}hs([A("SlideLeftIn")],CI.prototype,"effect",void 0),hs([A(600)],CI.prototype,"duration",void 0),hs([A("ease")],CI.prototype,"easing",void 0);class UL extends Is{}hs([Ps({effect:"SlideLeftIn",duration:600,easing:"ease"},CI)],UL.prototype,"previous",void 0),hs([Ps({effect:"SlideRightIn",duration:600,easing:"ease"},CI)],UL.prototype,"next",void 0);class ak extends Is{}hs([A("")],ak.prototype,"text",void 0),hs([A("")],ak.prototype,"iconCss",void 0),hs([A("left")],ak.prototype,"iconPosition",void 0);class gy extends Is{}hs([Ps({},ak)],gy.prototype,"header",void 0),hs([A(null)],gy.prototype,"headerTemplate",void 0),hs([A("")],gy.prototype,"content",void 0),hs([A("")],gy.prototype,"cssClass",void 0),hs([A(!1)],gy.prototype,"disabled",void 0),hs([A(!0)],gy.prototype,"visible",void 0),hs([A()],gy.prototype,"id",void 0);let yn=class extends Ls{constructor(e,t){super(e,t),this.show={},this.hide={},this.maxHeight=0,this.title="Close",this.isInteracted=!1,this.lastIndex=0,this.isAdd=!1,this.isIconAlone=!1,this.draggableItems=[],this.resizeContext=this.refreshActiveTabBorder.bind(this),this.keyConfigs={tab:"tab",home:"home",end:"end",enter:"enter",space:"space",delete:"delete",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow"}}destroy(){if(this.isReact&&this.clearTemplate(),m(this.tbObj)||this.tbObj.destroy(),this.unWireEvents(),["role","aria-disabled","aria-activedescendant","tabindex","aria-orientation"].forEach(e=>{this.element.removeAttribute(e)}),this.expTemplateContent(),this.isTemplate){const e=X(".e-tab > ."+Ts,this.element);this.element.classList.remove(OL),m(e)||(e.innerHTML=this.cnt)}else for(;this.element.firstElementChild;)Ms(this.element.firstElementChild);super.destroy(),this.trigger("destroyed")}refresh(){this.isReact&&this.clearTemplate(),super.refresh(),this.isReact&&this.renderReactTemplates()}preRender(){const e=ae(this.element,"."+Ts);this.prevIndex=0,this.isNested=!1,this.isPopup=!1,this.initRender=!0,this.isSwipeed=!1,this.itemIndexArray=[],this.templateEle=[],m(e)||(e.parentElement.classList.add(ik),this.isNested=!0);const t=Q.info.name,i="msie"===t?"e-ie":"edge"===t?"e-edge":"safari"===t?"e-safari":"";It(this.element,{width:ct(this.width),height:ct(this.height)}),this.setCssClass(this.element,this.cssClass,!0),bt(this.element,{role:"tablist","aria-disabled":"false","aria-activedescendant":""}),this.setCssClass(this.element,i,!0),this.updatePopAnimationConfig()}render(){this.btnCls=this.createElement("span",{className:LL+" "+NL,attrs:{title:this.title}}),this.tabId=this.element.id.length>0?"-"+this.element.id:oA(),this.renderContainer(),this.wireEvents(),this.initRender=!1}renderContainer(){const e=this.element;if(this.items.forEach((t,i)=>{m(t.id)&&!m(t.setProperties)&&t.setProperties({id:"tabitem_"+i.toString()},!0)}),this.items.length>0&&0===e.children.length)e.appendChild(this.createElement("div",{className:Ts})),this.setOrientation(this.headerPlacement,this.createElement("div",{className:dl})),this.isTemplate=!1;else if(this.element.children.length>0){this.isTemplate=!0,e.classList.add(OL);const t=e.querySelector("."+dl);t&&"Bottom"===this.headerPlacement&&this.setOrientation(this.headerPlacement,t)}if(!m(X("."+dl,this.element))&&!m(X("."+Ts,this.element))){if(this.renderHeader(),this.tbItems=X("."+dl+" ."+Ph,this.element),m(this.tbItems)||da(this.tbItems,{selector:".e-tab-wrap"}),this.renderContent(),at("."+ks,this.element).length>0){this.tbItems=X("."+dl+" ."+Ph,this.element),this.bdrLine=this.createElement("div",{className:RE+" "+$n+" "+bH});const t=X("."+this.scrCntClass,this.tbItems);m(t)?this.tbItems.insertBefore(this.bdrLine,this.tbItems.firstChild):t.insertBefore(this.bdrLine,t.firstChild),this.setContentHeight(!0),this.select(this.selectedItem)}if(!m(this.tbItem))for(let t=0;t<this.items.length;t++)this.tbItem[t].setAttribute("data-id",this.items[t].id);this.setRTL(this.enableRtl)}}serverItemsChanged(){if(this.enableAnimation=!1,this.setActive(this.selectedItem,!0),"Dynamic"!==this.loadOn&&!m(this.cntEle)){const e=[].slice.call(this.cntEle.children),t=Ts+this.tabId+"_"+this.selectedItem;e.forEach(i=>{i.classList.contains(Fs)&&i.id!==t&&i.classList.remove(Fs),i.id===t&&i.classList.add(Fs)}),this.prevIndex=this.selectedItem,this.triggerAnimation(yo+this.tabId+"_"+this.selectedItem,!1)}this.enableAnimation=!0}headerReady(){if(this.initRender=!0,this.hdrEle=this.getTabHeader(),this.setOrientation(this.headerPlacement,this.hdrEle),m(this.hdrEle)||(this.tbObj=this.hdrEle&&this.hdrEle.ej2_instances[0]),this.tbObj.clicked=this.clickHandler.bind(this),this.tbObj.on("onItemsChanged",this.serverItemsChanged.bind(this)),this.tbItems=X("."+dl+" ."+Ph,this.element),m(this.tbItems)||da(this.tbItems,{selector:".e-tab-wrap"}),at("."+ks,this.element).length>0){this.bdrLine=X("."+RE+"."+bH,this.element);const e=X("."+this.scrCntClass,this.tbItems);m(e)?this.tbItems.insertBefore(this.bdrLine,this.tbItems.firstElementChild):e.insertBefore(this.bdrLine,e.firstElementChild),this.select(this.selectedItem)}if(this.cntEle=X(".e-tab > ."+Ts,this.element),m(this.cntEle)||(this.touchModule=new Sn(this.cntEle,{swipe:this.swipeHandler.bind(this)})),"Demand"===this.loadOn){const e=this.setActiveContent();this.triggerAnimation(e,!1)}this.initRender=!1,this.renderComplete()}setActiveContent(){const e=yo+this.tabId+"_"+this.selectedItem,t=this.getTrgContent(this.cntEle,this.extIndex(e));return m(t)||t.classList.add(Fs),e}renderHeader(){const e=this.headerPlacement;let t=[];if(this.hdrEle=this.getTabHeader(),this.addVerticalClass(),this.isTemplate){this.element.children.length>1&&this.element.children[1].classList.contains(dl)&&this.setProperties({headerPlacement:"Bottom"},!0);const i=this.hdrEle.children.length,s=[];for(let r=0;r<i;r++)s.push(this.hdrEle.children.item(r).innerHTML);if(i>0){for(;this.hdrEle.firstElementChild;)ye(this.hdrEle.firstElementChild);const r=this.createElement("div",{className:"e-items"});this.hdrEle.appendChild(r),s.forEach((o,a)=>{this.lastIndex=a;const u={className:yo,id:yo+this.tabId+"_"+a,attrs:{role:"tab","aria-controls":Ts+this.tabId+"_"+a,"aria-selected":"false"}},p=this.createElement("span",{className:nk,innerHTML:o,attrs:{role:"presentation"}}).outerHTML,y=this.createElement("div",{className:rk,innerHTML:p+this.btnCls.outerHTML}).outerHTML,E=this.createElement("div",{className:ku,innerHTML:y,attrs:{tabIndex:"-1"}});r.appendChild(this.createElement("div",u)),at("."+yo,r)[a].appendChild(E)})}}else t=this.parseObject(this.items,0);this.tbObj=new ul({width:"Left"===e||"Right"===e?"auto":"100%",height:"Left"===e||"Right"===e?"100%":"auto",overflowMode:this.overflowMode,items:0!==t.length?t:[],clicked:this.clickHandler.bind(this),scrollStep:this.scrollStep,enableHtmlSanitizer:this.enableHtmlSanitizer}),this.tbObj.isStringTemplate=!0,this.tbObj.createElement=this.createElement,this.tbObj.appendTo(this.hdrEle),bt(this.hdrEle,{"aria-label":"tab-header"}),this.updateOrientationAttribute(),this.setCloseButton(this.showCloseButton)}renderContent(){this.cntEle=X("."+Ts,this.element);const e=at("."+ks,this.element);if(this.isTemplate){this.cnt=this.cntEle.children.length>0?this.cntEle.innerHTML:"";const t=this.cntEle.children;for(let i=0;i<e.length;i++)t.length-1>=i&&(j([t.item(i)],yo),bt(t.item(i),{role:"tabpanel","aria-labelledby":yo+this.tabId+"_"+i}),t.item(i).id=Ts+this.tabId+"_"+i)}}reRenderItems(){this.renderContainer(),m(this.cntEle)||(this.touchModule=new Sn(this.cntEle,{swipe:this.swipeHandler.bind(this)}))}parseObject(e,t){const i=at(".e-tab-header ."+ks,this.element).length,s=[];let r;const o=[];return e.forEach((a,u)=>{const p=m(a.header)||m(a.header.iconPosition)?"":a.header.iconPosition,y=m(a.header)||m(a.header.iconCss)?"":a.header.iconCss;if(m(a.headerTemplate)&&(m(a.header)||m(a.header.text)||0===a.header.text.length&&""===y))return void o.push(u);let _,E=a.headerTemplate||a.header.text;if("string"==typeof E&&this.enableHtmlSanitizer&&(E=_n.sanitize(E)),this.isReplace&&!m(this.tbId)&&""!==this.tbId){const Ai=this.tbId.indexOf("_");_=parseInt(this.tbId.substring(Ai+1),10),this.tbId=""}else _=t+u;this.lastIndex=0===i?u:this.isReplace?_:this.isAdd?i+u:this.lastIndex+1;const L=a.disabled?" "+my+" "+FL:"",V=!1===a.visible?" "+$n:"";r=this.createElement("div",{className:nk,attrs:{role:"presentation"}});const H=E instanceof Object?E.outerHTML:E,se=!m(H)&&""!==H;let _e;m(E.tagName)?this.headerTextCompile(r,E,u):r.appendChild(E);const re=this.createElement("span",{className:LL+" "+yH+" "+RL+"-"+p+" "+y}),Ae=this.createElement("div",{className:rk});Ae.appendChild(r),""!==E&&void 0!==E&&""!==y?("left"===p||"top"===p?Ae.insertBefore(re,Ae.firstElementChild):Ae.appendChild(re),_e=r,this.isIconAlone=!1):(_e=""===y?r:re,_e===re&&(ye(r),Ae.appendChild(re),this.isIconAlone=!0));const gt=a.disabled?{}:{tabIndex:"-1"};Ae.appendChild(this.btnCls.cloneNode(!0));const ot=this.createElement("div",{className:ku,attrs:gt});ot.appendChild(Ae),this.itemIndexArray===[]?this.itemIndexArray.push(yo+this.tabId+"_"+this.lastIndex):this.itemIndexArray.splice(t+u,0,yo+this.tabId+"_"+this.lastIndex);const jt={htmlAttributes:{id:yo+this.tabId+"_"+this.lastIndex,role:"tab","aria-selected":"false"},template:ot};jt.cssClass=(void 0!==a.cssClass?a.cssClass:" ")+" "+L+" "+V+" "+(""!==y?"e-i"+p:"")+" "+(se?"":RL),("top"===p||"bottom"===p)&&this.element.classList.add("e-vertical-icon"),s.push(jt),u++}),this.isAdd||o.forEach(a=>{this.items.splice(a,1)}),this.isIconAlone?this.element.classList.add(gH):this.element.classList.remove(gH),s}removeActiveClass(){const e=this.getTabHeader();if(e){const t=at("."+ks+"."+Fs,e);[].slice.call(t).forEach(i=>i.classList.remove(Fs))}}checkPopupOverflow(e){this.tbPop=X("."+vH,this.element);const t=X(".e-hor-nav",this.element),i=X("."+Ph,this.element),s=i.lastChild;let r=!1;return(!this.isVertical()&&(this.enableRtl&&t.offsetLeft+t.offsetWidth>i.offsetLeft||!this.enableRtl&&t.offsetLeft<i.offsetWidth)||this.isVertical()&&t.offsetTop<s.offsetTop+s.offsetHeight)&&(r=!0),r&&(e.classList.add(am),this.tbPop.insertBefore(e,at("."+am,this.tbPop)[0])),!0}popupHandler(e){const t=e.querySelector(".e-ripple-element");m(t)||(t.outerHTML="",e.querySelector("."+ku).classList.remove("e-ripple")),this.tbItem=at("."+Ph+" ."+ks,this.hdrEle);const i=this.tbItem[this.tbItem.length-1];return 0!==this.tbItem.length&&(e.classList.remove(am),e.removeAttribute("style"),this.tbItems.appendChild(e),this.actEleId=e.id,this.checkPopupOverflow(i)&&this.checkPopupOverflow(this.tbItems.lastChild.previousElementSibling),this.isPopup=!0),at("."+ks,this.tbItems).length-1}updateOrientationAttribute(){bt(this.element,{"aria-orientation":this.isVertical()?"vertical":"horizontal"})}setCloseButton(e){const t=X("."+dl,this.element);!0===e?t.classList.add(sk):t.classList.remove(sk),this.tbObj.refreshOverflow(),this.refreshActiveTabBorder()}prevCtnAnimation(e,t){let i;return this.enableRtl||this.element.classList.contains(ML),i=this.isPopup||e<=t?"SlideLeftIn"===this.animation.previous.effect?{name:"SlideLeftOut",duration:this.animation.previous.duration,timingFunction:this.animation.previous.easing}:null:"SlideRightIn"===this.animation.next.effect?{name:"SlideRightOut",duration:this.animation.next.duration,timingFunction:this.animation.next.easing}:null,i}triggerPrevAnimation(e,t){const i=this.prevCtnAnimation(t,this.selectedItem);m(i)?e.classList.remove(Fs):(i.begin=()=>{It(e,{position:"absolute"}),e.classList.add(ok),e.classList.add("e-view")},i.end=()=>{e.style.display="none",e.classList.remove(Fs),e.classList.remove(ok),e.classList.remove("e-view"),It(e,{display:"",position:""}),0===e.childNodes.length&&!this.isTemplate&&ye(e)},new Wn(i).animate(e))}triggerAnimation(e,t){const i=this.prevIndex;let s;[].slice.call(this.element.querySelector("."+Ts).children).forEach(y=>{y.id===this.prevActiveEle&&(s=y)});const o=this.tbItem[i],a=this.getTrgContent(this.cntEle,this.extIndex(e));if(m(s)&&!m(o)){const y=this.extIndex(o.id);s=this.getTrgContent(this.cntEle,y)}if(m(a)||(this.prevActiveEle=a.id),this.initRender||!1===t||this.animation==={}||m(this.animation))return void(s&&s!==a&&s.classList.remove(Fs));const u=X("."+Ts,this.element);let p;if(this.prevIndex>this.selectedItem&&!this.isPopup){const y=this.animation.previous.effect;p={name:"None"===y?"":"SlideLeftIn"!==y?y:"SlideLeftIn",duration:this.animation.previous.duration,timingFunction:this.animation.previous.easing}}else if(this.isPopup||this.prevIndex<this.selectedItem||this.prevIndex===this.selectedItem){const y=this.animation.next.effect;p={name:"None"===y?"":"SlideRightIn"!==y?y:"SlideRightIn",duration:this.animation.next.duration,timingFunction:this.animation.next.easing}}p.progress=()=>{u.classList.add(ok),this.setActiveBorder()},p.end=()=>{u.classList.remove(ok),a.classList.add(Fs)},!this.initRender&&!m(s)&&this.triggerPrevAnimation(s,i),this.isPopup=!1,""===p.name?a.classList.add(Fs):new Wn(p).animate(a)}keyPressed(e){const t=ae(e,"."+dl+" ."+ks),i=this.getEleIndex(t);!m(this.popEle)&&e.classList.contains("e-hor-nav")?this.popEle.classList.contains("e-popup-open")?this.popObj.hide(this.hide):this.popObj.show(this.show):e.classList.contains("e-scroll-nav")?e.click():!m(t)&&!1===t.classList.contains(Fs)&&(this.selectTab(i,null,!0),m(this.popEle)||this.popObj.hide(this.hide))}getTabHeader(){if(m(this.element))return;const e=[].slice.call(this.element.children).filter(t=>t.classList.contains(dl));if(e.length>0)return e[0];{const t=[].slice.call(this.element.children).filter(i=>!i.classList.contains("blazor-template"))[0];return t?[].slice.call(t.children).filter(i=>i.classList.contains(dl))[0]:void 0}}getEleIndex(e){return Array.prototype.indexOf.call(at("."+ks,this.getTabHeader()),e)}extIndex(e){return e.replace(yo+this.tabId+"_","")}expTemplateContent(){this.templateEle.forEach(e=>{m(this.element.querySelector(e))||(document.body.appendChild(this.element.querySelector(e)).style.display="none")})}templateCompile(e,t,i){const s=this.createElement("div");this.compileElement(s,t,"content",i),0!==s.childNodes.length&&e.appendChild(s),this.isReact&&this.renderReactTemplates()}compileElement(e,t,i,s){let r,o;"string"==typeof t?(t=t.trim(),e.innerHTML=_n.sanitize(t)):r=xs(t),m(r)||(o=r({},this,i)),!m(r)&&o.length>0&&[].slice.call(o).forEach(a=>{e.appendChild(a)})}headerTextCompile(e,t,i){this.compileElement(e,t,"headerTemplate",i)}getContent(e,t,i,s){let r;if("string"==typeof(t=m(t)?"":t)||m(t.innerHTML))if("string"==typeof t&&this.enableHtmlSanitizer&&(t=_n.sanitize(t)),"."===t[0]||"#"===t[0])if(document.querySelectorAll(t).length){const o=document.querySelector(t);r=o.outerHTML.trim(),"clone"===i?e.appendChild(o.cloneNode(!0)):(e.appendChild(o),o.style.display="")}else this.templateCompile(e,t,s);else this.templateCompile(e,t,s);else e.appendChild(t);m(r)||-1===this.templateEle.indexOf(t.toString())&&this.templateEle.push(t.toString())}getTrgContent(e,t){let i;return i=this.element.classList.contains(ik)?X("."+ik+"> ."+Ts+" > #"+Ts+this.tabId+"_"+t,this.element):this.findEle(e.children,Ts+this.tabId+"_"+t),i}findEle(e,t){let i;for(let s=0;s<e.length;s++)if(e[s].id===t){i=e[s];break}return i}isVertical(){const e="Left"===this.headerPlacement||"Right"===this.headerPlacement;return this.scrCntClass=e?"e-vscroll-content":"e-hscroll-content",e}addVerticalClass(){if(this.isVertical()){const e="Left"===this.headerPlacement?CH:EH;j([this.hdrEle],[VL,e]),this.element.classList.contains(ik)?j([this.hdrEle],[BL,e]):j([this.element],[BL,e])}"Bottom"===this.headerPlacement&&j([this.hdrEle],[wH])}updatePopAnimationConfig(){this.show={name:this.isVertical()?"FadeIn":"SlideDown",duration:100},this.hide={name:this.isVertical()?"FadeOut":"SlideUp",duration:100}}changeOrientation(e){this.setOrientation(e,this.hdrEle);const t=this.hdrEle.querySelector("."+Fs),i=!!this.hdrEle.classList.contains(VL);Y([this.element],[BL]),Y([this.hdrEle],[VL,CH,EH]),i!==this.isVertical()&&(this.changeToolbarOrientation(),!m(t)&&t.classList.contains(am)&&this.popupHandler(t)),this.addVerticalClass(),this.updateOrientationAttribute(),this.setActiveBorder(),this.focusItem()}focusItem(){const e=X(" #"+yo+this.tabId+"_"+this.selectedItem,this.hdrEle);m(e)||e.firstElementChild.focus()}changeToolbarOrientation(){this.tbObj.setProperties({height:this.isVertical()?"100%":"auto",width:this.isVertical()?"auto":"100%"},!0),this.tbObj.changeOrientation(),this.updatePopAnimationConfig()}setOrientation(e,t){const i=Array.prototype.indexOf.call(this.element.children,t),s=Array.prototype.indexOf.call(this.element.children,this.element.querySelector("."+Ts));"Bottom"===e&&s>i?this.element.appendChild(t):(Y([t],[wH]),this.element.insertBefore(t,X("."+Ts,this.element)))}setCssClass(e,t,i){if(""===t)return;const s=t.split(" ");for(let r=0;r<s.length;r++)i?e.classList.add(s[r]):e.classList.remove(s[r])}setContentHeight(e){if(this.element.classList.contains(HL)&&Y([this.element],[HL]),m(this.cntEle))return;const t=this.getTabHeader();if("None"===this.heightAdjustMode){if("auto"===this.height)return;this.isVertical()||It(this.cntEle,{height:this.element.offsetHeight-t.offsetHeight+"px"})}else if("Fill"===this.heightAdjustMode)j([this.element],[HL]),It(this.element,{height:"100%"}),It(this.cntEle,{height:this.element.offsetHeight-t.offsetHeight+"px"});else if("Auto"===this.heightAdjustMode){if(!0===this.isTemplate){const i=at("."+Ts+" > ."+yo,this.element);for(let s=0;s<i.length;s++)i[s].setAttribute("style","display:block; visibility: visible"),this.maxHeight=Math.max(this.maxHeight,this.getHeight(i[s])),i[s].style.removeProperty("display"),i[s].style.removeProperty("visibility")}else{this.cntEle=X("."+Ts,this.element),!0===e&&this.cntEle.appendChild(this.createElement("div",{id:Ts+this.tabId+"_0",className:yo+" "+Fs,attrs:{role:"tabpanel","aria-labelledby":yo+this.tabId+"_0"}}));const i=this.cntEle.children.item(0);for(let s=0;s<this.items.length;s++)for(this.getContent(i,this.items[s].content,"clone",s),this.maxHeight=Math.max(this.maxHeight,this.getHeight(i));i.firstChild;)i.removeChild(i.firstChild);this.isReact&&this.clearTemplate(["content"]),this.templateEle=[],this.getContent(i,this.items[0].content,"render",0),this.prevIndex!==this.selectedItem&&i.classList.remove(Fs)}It(this.cntEle,{height:this.maxHeight+"px"})}else It(this.cntEle,{height:"auto"})}getHeight(e){const t=window.getComputedStyle(e);return e.offsetHeight+parseFloat(t.getPropertyValue("padding-top"))+parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}setActiveBorder(){const e=this.getTabHeader(),t=X("."+ks+"."+Fs,e);if(m(t))return;this.reorderActiveTab?e&&e.classList.remove(jL):(t.classList.contains(am)&&!this.bdrLine.classList.contains($n)&&this.bdrLine.classList.add($n),e&&!e.classList.contains(jL)&&e.classList.add(jL));const i=ae(t,"."+om);if(this.element!==i)return;this.tbItems=X("."+Ph,e);const s=X("."+RE,e),r=X("."+Ph+" ."+this.scrCntClass,e);if(this.isVertical())It(s,{left:"",right:""}),0!==(m(r)?this.tbItems.offsetHeight:r.offsetHeight)?It(s,{top:t.offsetTop+"px",height:t.offsetHeight+"px"}):It(s,{top:0,height:0});else{"MultiRow"===this.overflowMode?It(X("."+RE,this.element),{top:t.offsetHeight+t.offsetTop+"px",height:""}):It(s,{top:"",height:""});let o=m(r)?this.tbItems.offsetWidth:r.offsetWidth;It(s,0!==o?{left:t.offsetLeft+"px",right:o-(t.offsetLeft+t.offsetWidth)+"px"}:{left:"auto",right:"auto"})}!m(this.bdrLine)&&!t.classList.contains(am)&&this.bdrLine.classList.remove($n)}setActive(e,t=!1,i=!1){this.tbItem=at("."+ks,this.getTabHeader());const s=this.tbItem[e];if(e<0||isNaN(e)||0===this.tbItem.length)return;if(e>=0&&!t&&(this.allowServerDataBinding=!1,this.setProperties({selectedItem:e},!0),this.allowServerDataBinding=!0,this.initRender||this.serverDataBind()),s.classList.contains(Fs))return void this.setActiveBorder();if(!this.isTemplate){const a=this.tbItem[this.prevIndex];m(a)||a.removeAttribute("aria-controls"),bt(s,{"aria-controls":Ts+this.tabId+"_"+e})}const r=s.id;this.removeActiveClass(),s.classList.add(Fs),this.tbItem[this.prevIndex].setAttribute("aria-selected","false"),s.setAttribute("aria-selected","true");const o=Number(this.extIndex(r));if(m(this.prevActiveEle)&&(this.prevActiveEle=Ts+this.tabId+"_"+o),bt(this.element,{"aria-activedescendant":r}),this.isTemplate){if(X("."+Ts,this.element).children.length>0){const a=this.findEle(X("."+Ts,this.element).children,Ts+this.tabId+"_"+o);m(a)||a.classList.add(Fs),this.triggerAnimation(r,this.enableAnimation)}}else{this.cntEle=X(".e-tab > ."+Ts,this.element);const a=this.getTrgContent(this.cntEle,this.extIndex(r));if(m(a)){this.cntEle.appendChild(this.createElement("div",{id:Ts+this.tabId+"_"+this.extIndex(r),className:yo+" "+Fs,attrs:{role:"tabpanel","aria-labelledby":yo+this.tabId+"_"+this.extIndex(r)}}));const u=this.getTrgContent(this.cntEle,this.extIndex(r)),p=Array.prototype.indexOf.call(this.itemIndexArray,r);this.getContent(u,this.items[p].content,"render",p)}else a.classList.add(Fs);this.triggerAnimation(r,this.enableAnimation)}if(this.setActiveBorder(),this.refreshItemVisibility(s),!this.initRender&&!t){s.firstElementChild.focus();const a={previousItem:this.prevItem,previousIndex:this.prevIndex,selectedItem:s,selectedIndex:e,selectedContent:X("#"+Ts+this.tabId+"_"+this.selectingID,this.content),isSwiped:this.isSwipeed,isInteracted:i};this.trigger("selected",a)}}contentReady(){const e=this.setActiveContent();this.triggerAnimation(e,this.enableAnimation)}setItems(e){this.isReplace=!0,this.tbItems=X("."+Ph,this.getTabHeader()),this.tbObj.items=this.parseObject(e,0),this.tbObj.dataBind(),this.isReplace=!1}setRTL(e){this.tbObj.enableRtl=e,this.tbObj.dataBind(),this.setCssClass(this.element,ML,e),this.refreshActiveBorder()}refreshActiveBorder(){m(this.bdrLine)||this.bdrLine.classList.add($n),this.setActiveBorder()}showPopup(e){const t=X(".e-popup.e-toolbar-pop",this.hdrEle);if(t.classList.contains("e-popup-close")){const i=t&&t.ej2_instances[0];i.position.X="Left"===this.headerPlacement?"left":"right",i.dataBind(),i.show(e)}}bindDraggable(){this.allowDragAndDrop&&this.element.querySelector("."+dl).querySelectorAll("."+ks).forEach(i=>{this.initializeDrag(i)})}wireEvents(){this.bindDraggable(),window.addEventListener("resize",this.resizeContext),O.add(this.element,"mouseover",this.hoverHandler,this),O.add(this.element,"keydown",this.spaceKeyDown,this),m(this.cntEle)||(this.touchModule=new Sn(this.cntEle,{swipe:this.swipeHandler.bind(this)})),this.keyModule=new Pn(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:this.keyConfigs}),this.tabKeyModule=new Pn(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:{openPopup:"shift+f10",tab:"tab",shiftTab:"shift+tab"},eventName:"keydown"})}unWireEvents(){m(this.keyModule)||this.keyModule.destroy(),m(this.tabKeyModule)||this.tabKeyModule.destroy(),!m(this.cntEle)&&!m(this.touchModule)&&this.touchModule.destroy(),window.removeEventListener("resize",this.resizeContext),O.remove(this.element,"mouseover",this.hoverHandler),O.remove(this.element,"keydown",this.spaceKeyDown),this.element.classList.remove(ML),this.element.classList.remove(PL)}clickHandler(e){this.element.classList.remove(PL);const t=e.originalEvent.target,i=ae(t,"."+ks),s=this.getEleIndex(i);t.classList.contains(NL)?this.removeTab(s):this.isVertical()&&ae(t,".e-hor-nav")?this.showPopup(this.show):(this.isPopup=!1,!m(i)&&(s!==this.selectedItem||s!==this.prevIndex)&&this.selectTab(s,e.originalEvent,!0))}swipeHandler(e){if(!(e.velocity<3&&m(e.originalEvent.changedTouches))){if(e.originalEvent&&this.isNested&&e.originalEvent.stopPropagation(),this.isSwipeed=!0,"Right"===e.swipeDirection&&0!==this.selectedItem){for(let t=this.selectedItem-1;t>=0;t--)if(!this.tbItem[t].classList.contains($n)){this.selectTab(t,null,!0);break}}else if("Left"===e.swipeDirection&&this.selectedItem!==at("."+ks,this.element).length-1)for(let t=this.selectedItem+1;t<this.tbItem.length;t++)if(!this.tbItem[t].classList.contains($n)){this.selectTab(t,null,!0);break}this.isSwipeed=!1}}spaceKeyDown(e){(32===e.keyCode&&32===e.which||35===e.keyCode&&35===e.which)&&(m(ae(e.target,"."+dl))||e.preventDefault())}keyHandler(e){if(this.element.classList.contains(my))return;this.element.classList.add(PL);const t=e.target,i=this.getTabHeader(),s=X("."+Fs,i);this.popEle=X("."+vH,i),m(this.popEle)||(this.popObj=this.popEle.ej2_instances[0]);const r=ae(document.activeElement,"."+ks),o=ae(t,"."+ks);switch(e.action){case"space":case"enter":if(t.parentElement.classList.contains(my))return;if("enter"===e.action&&t.classList.contains("e-hor-nav")){this.showPopup(this.show);break}this.keyPressed(t);break;case"tab":case"shiftTab":t.classList.contains(ku)&&!1===ae(t,"."+ks).classList.contains(Fs)&&t.setAttribute("tabindex","-1"),this.popObj&&zn(this.popObj.element)&&this.popObj.hide(this.hide),s.children.item(0).setAttribute("tabindex","0");break;case"moveLeft":case"moveRight":m(r)||this.refreshItemVisibility(r);break;case"openPopup":e.preventDefault(),!m(this.popEle)&&this.popEle.classList.contains("e-popup-close")&&this.popObj.show(this.show);break;case"delete":if(!0===this.showCloseButton&&!m(o)){const a=o.nextSibling;!m(a)&&a.classList.contains(ks)&&a.firstElementChild.focus(),this.removeTab(this.getEleIndex(o))}this.setActiveBorder()}}refreshActiveTabBorder(){const e=X("."+ks+"."+am+"."+Fs,this.element);!m(e)&&this.reorderActiveTab&&this.select(this.getEleIndex(e)),this.refreshActiveBorder()}refreshItemVisibility(e){const t=X("."+this.scrCntClass,this.tbItems);if(!this.isVertical()&&!m(t)){const i=X(".e-hscroll-bar",this.tbItems),s=i.scrollLeft,r=s+i.offsetWidth,o=e.offsetLeft,a=e.offsetWidth,u=e.offsetLeft+e.offsetWidth;s<o&&r<u?i.scrollLeft=s+(a-(r-o)):s>o&&r>u&&(i.scrollLeft=s-(a-(u-s)))}}hoverHandler(e){const t=e.target;!m(t.classList)&&t.classList.contains(NL)&&t.setAttribute("title",new Xr("tab",{closeButtonTitle:this.title},this.locale).getConstant("closeButtonTitle"))}evalOnPropertyChangeItems(e,t){if(e.items instanceof Array&&t.items instanceof Array)if(this.lastIndex=0,m(this.tbObj))this.reRenderItems();else{this.isRect&&this.clearTemplate(),this.setItems(e.items),this.templateEle.length>0&&this.expTemplateContent(),this.templateEle=[];const i=X(".e-tab > ."+Ts,this.element);for(;i.firstElementChild;)ye(i.firstElementChild);this.select(this.selectedItem)}else{const i=Object.keys(e.items);for(let s=0;s<i.length;s++){const r=parseInt(Object.keys(e.items)[s],10),o=Object.keys(e.items[r]);for(let a=0;a<o.length;a++){const u=Object(t.items[r])[o[a]],p=Object(e.items[r])[o[a]],y=this.element.querySelectorAll("."+ks)[r];let E;if(y&&!m(y.id)&&""!==y.id){const L=y.id.lastIndexOf("_");E=parseInt(y.id.substring(L+1),10)}else E=r;const _=X("."+Ph+" #"+yo+this.tabId+"_"+E,this.element),D=X("."+Ts+" #"+Ts+this.tabId+"_"+E,this.element);if("header"===o[a]||"headerTemplate"===o[a]){const L=m(this.items[r].header)||m(this.items[r].header.iconCss)?"":this.items[r].header.iconCss;if(""===(this.items[r].headerTemplate||this.items[r].header.text)&&""===L)this.removeTab(r);else{this.tbId=y.id;const H=[];H.push(this.items[r]),this.items.splice(r,1),this.itemIndexArray.splice(r,1),this.tbObj.items.splice(r,1);const se=_.classList.contains($n);ye(_),this.isReplace=!0,this.addTab(H,r),se&&this.hideTab(r),this.isReplace=!1}}if("content"===o[a]&&!m(D))if("string"!=typeof p&&!m(p.innerHTML)||"."!==p[0]&&"#"!==p[0]||!p.length)""===p&&"#"===u[0]?(document.body.appendChild(this.element.querySelector(u)).style.display="none",D.innerHTML=p):this.isReact?(D.innerHTML="",this.templateCompile(D,p,r)):"function"!=typeof p&&(D.innerHTML=p);else{const V=document.querySelector(p);D.appendChild(V),V.style.display=""}"cssClass"===o[a]&&(m(_)||(_.classList.remove(u),_.classList.add(p)),m(D)||(D.classList.remove(u),D.classList.add(p))),"disabled"===o[a]&&this.enableTab(r,!0!==p),"visible"===o[a]&&this.hideTab(r,!0!==p)}}}}initializeDrag(e){this.dragArea=m(this.dragArea)?"#"+this.element.id+" ."+dl:this.dragArea;let t=new Us(e,{dragArea:this.dragArea,dragTarget:"."+ks,clone:!0,helper:this.helper.bind(this),dragStart:this.itemDragStart.bind(this),drag:i=>{let r,o,s=this.getEleIndex(this.dragItem),a={draggedItem:this.dragItem,event:i.event,target:i.target,droppedItem:i.target.closest("."+ks),clonedElement:this.cloneElement,index:s};if(m(i.target.closest("."+om))||i.target.closest("."+om).isEqualNode(this.element)||this.dragArea==="."+dl){if(i.target.closest(this.dragArea)||"Popup"===this.overflowMode?(document.body.style.cursor="",this.dragItem.querySelector("."+ku).style.visibility="hidden",this.cloneElement.classList.contains($n)&&Y([this.cloneElement],$n)):(document.body.style.cursor="not-allowed",j([this.cloneElement],$n),this.dragItem.classList.contains($n)&&Y([this.dragItem],$n),this.dragItem.querySelector("."+ku).style.visibility="visible"),"Scrollable"===this.overflowMode&&!m(this.element.querySelector(".e-hscroll"))){let p=this.element.querySelector(".e-scroll-right-nav"),y=this.element.querySelector(".e-scroll-left-nav"),E=this.element.querySelector(".e-hscroll-bar");!m(p)&&Math.abs(p.offsetWidth/2+p.offsetLeft)>this.cloneElement.offsetLeft+this.cloneElement.offsetWidth&&(E.scrollLeft-=10),!m(y)&&Math.abs(y.offsetLeft+y.offsetWidth-this.cloneElement.offsetLeft)>y.offsetWidth/2&&(E.scrollLeft+=10)}this.cloneElement.style.pointerEvents="none",o=ae(i.target,"."+ks+".e-draggable");let u=0;"Scrollable"===this.overflowMode&&!m(this.element.querySelector(".e-hscroll"))&&(u=this.element.querySelector(".e-hscroll-content").offsetWidth),null!=o&&!o.isSameNode(this.dragItem)&&o.closest("."+om).isSameNode(this.dragItem.closest("."+om))&&(r=this.getEleIndex(o),r<s&&Math.abs(o.offsetLeft+o.offsetWidth-this.cloneElement.offsetLeft)>o.offsetWidth/2&&this.dragAction(o,s,r),r>s&&Math.abs(o.offsetWidth/2)+o.offsetLeft-u<this.cloneElement.offsetLeft+this.cloneElement.offsetWidth&&this.dragAction(o,s,r)),this.droppedIndex=this.getEleIndex(this.dragItem),this.trigger("dragging",a)}else this.trigger("dragging",a)},dragStop:this.itemDragStop.bind(this)});this.draggableItems.push(t)}helper(e){return this.cloneElement=this.createElement("div"),e.element&&(this.cloneElement=e.element.cloneNode(!0),j([this.cloneElement],"e-tab-clone-element"),this.element.querySelector("."+dl).classList.contains(sk)&&j([this.cloneElement],sk),Y([this.cloneElement.querySelector("."+ku)],"e-ripple"),m(this.cloneElement.querySelector(".e-ripple-element"))||Ms(this.cloneElement.querySelector(".e-ripple-element")),document.body.appendChild(this.cloneElement)),this.cloneElement}itemDragStart(e){this.draggingItems=this.items.map(i=>i),this.dragItem=e.element;let t={draggedItem:e.element,event:e.event,target:e.target,droppedItem:null,index:this.getEleIndex(this.dragItem),clonedElement:this.cloneElement,cancel:!1};this.trigger("onDragStart",t,i=>{i.cancel?ye(this.cloneElement):(this.removeActiveClass(),j([this.tbItems.querySelector("."+RE)],$n),this.dragItem.querySelector("."+ku).style.visibility="hidden")})}dragAction(e,t,i){if(this.items.length>0){let s=this.draggingItems[t];this.draggingItems.splice(t,1),this.draggingItems.splice(i,0,s)}if("MultiRow"===this.overflowMode&&e.parentNode.insertBefore(this.dragItem,e.nextElementSibling),t>i)if(this.dragItem.parentElement.isSameNode(e.parentElement))this.dragItem.parentNode.insertBefore(this.dragItem,e);else if("Extended"===this.overflowMode)if(e.isSameNode(e.parentElement.lastChild)){let s=this.dragItem.parentNode;e.parentNode.insertBefore(this.dragItem,e),s.insertBefore(e.parentElement.lastChild,s.childNodes[0])}else this.dragItem.parentNode.insertBefore(e.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),e.parentNode.insertBefore(this.dragItem,e);else{let s=e.parentElement.lastChild;if(e.isSameNode(s)){let r=this.dragItem.parentNode;e.parentNode.insertBefore(this.dragItem,e),r.insertBefore(s,r.childNodes[0])}else this.dragItem.parentNode.insertBefore(e.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),e.parentNode.insertBefore(this.dragItem,e)}t<i&&(this.dragItem.parentElement.isSameNode(e.parentElement)?this.dragItem.parentNode.insertBefore(e,this.dragItem):"Extended"===this.overflowMode?(this.dragItem.parentElement.appendChild(e.parentElement.firstElementChild),e.parentNode.insertBefore(this.dragItem,e.nextSibling)):(this.dragItem.parentNode.insertBefore(e.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),e.parentNode.insertBefore(this.dragItem,e)))}itemDragStop(e){ye(this.cloneElement),this.dragItem.querySelector("."+ku).style.visibility="visible",document.body.style.cursor="",this.trigger("dragged",{draggedItem:this.dragItem,event:e.event,target:e.target,droppedItem:this.tbItem[this.droppedIndex],clonedElement:null,index:this.droppedIndex,cancel:!1},i=>{i.cancel?this.refresh():this.items.length>0&&this.draggingItems.length>0?(this.items=this.draggingItems,this.selectedItem=this.droppedIndex,this.refresh()):(this.dragItem.querySelector("."+ku).style.visibility="",Y([this.tbItems.querySelector("."+RE)],$n),this.selectTab(this.droppedIndex,null,!0))})}enableTab(e,t){const i=at("."+ks,this.element)[e];m(i)||(!0===t?(i.classList.remove(my,FL),i.firstElementChild.setAttribute("tabindex","-1")):(i.classList.add(my,FL),i.firstElementChild.removeAttribute("tabindex"),i.classList.contains(Fs)&&this.select(e+1)),m(this.items[e])||(this.items[e].disabled=!t,this.dataBind()),i.setAttribute("aria-disabled",!0===t?"false":"true"))}addTab(e,t){const i={addedItems:e,cancel:!1};this.isReplace?this.addingTabContent(e,t):this.trigger("adding",i,s=>{s.cancel||this.addingTabContent(e,t)}),this.isReact&&this.renderReactTemplates()}addingTabContent(e,t){let i=0;if(this.hdrEle=X("."+dl,this.element),m(this.hdrEle))this.items=e,this.reRenderItems();else{const s=at(".e-tab-header ."+ks,this.element).length;if(0!==s&&(i=this.lastIndex+1),m(t)&&(t=s-1),s<t||t<0||isNaN(t))return;0===s&&!m(this.hdrEle)&&(this.hdrEle.style.display=""),m(this.bdrLine)||this.bdrLine.classList.add($n),this.tbItems=X("."+Ph,this.getTabHeader()),this.isAdd=!0;const r=this.parseObject(e,t);this.isAdd=!1;let a,o=0;e.forEach((u,p)=>{if(a=u.headerTemplate||u.header.text,m(u.headerTemplate||u.header)||m(a)||0===a.length&&m(u.header.iconCss)||(this.items.splice(t+o,0,u),o++),this.isTemplate&&!m(u.header)&&!m(u.header.text)){const y=i+p,E=this.createElement("div",{id:Ts+this.tabId+"_"+y,className:yo,attrs:{role:"tabpanel","aria-labelledby":yo+"_"+y}});this.cntEle.insertBefore(E,this.cntEle.children[t+p]);const _=this.getTrgContent(this.cntEle,y.toString());this.getContent(_,u.content,"render",t)}}),this.tbObj.addItems(r,t),this.isReplace||this.trigger("added",{addedItems:e}),this.selectedItem===t?this.select(t):this.setActiveBorder(),this.bindDraggable()}}removeTab(e){const t=at("."+ks,this.element)[e];m(t)||this.trigger("removing",{removedItem:t,removedIndex:e,cancel:!1},s=>{if(!s.cancel){this.tbObj.removeItems(e),this.allowDragAndDrop&&e!==Array.prototype.indexOf.call(this.itemIndexArray,t.id)&&(e=Array.prototype.indexOf.call(this.itemIndexArray,t.id)),this.items.splice(e,1),this.itemIndexArray.splice(e,1),this.refreshActiveBorder();const r=X("#"+Ts+this.tabId+"_"+this.extIndex(t.id),X("."+Ts,this.element));m(r)||ye(r),this.trigger("removed",s),t.classList.contains(Fs)&&(e=e>at("."+ks+":not(."+am+")",this.element).length-1?e-1:e,this.enableAnimation=!1,this.selectedItem=e,this.select(e)),0===at("."+ks,this.element).length&&(this.hdrEle.style.display="none"),this.enableAnimation=!0}})}hideTab(e,t){let i;const s=at("."+ks,this.element)[e];if(!m(s)){if(m(t)&&(t=!0),this.bdrLine.classList.add($n),!0===t)if(s.classList.add($n),i=at("."+ks+":not(."+$n+")",this.tbItems),0!==i.length&&s.classList.contains(Fs)){if(0!==e)for(let r=e-1;r>=0;r--){if(!this.tbItem[r].classList.contains($n)){this.select(r);break}if(0===r)for(let o=e+1;o<this.tbItem.length;o++)if(!this.tbItem[o].classList.contains($n)){this.select(o);break}}else for(let r=e+1;r<this.tbItem.length;r++)if(!this.tbItem[r].classList.contains($n)){this.select(r);break}}else 0===i.length&&this.element.classList.add($n);else this.element.classList.remove($n),i=at("."+ks+":not(."+$n+")",this.tbItems),s.classList.remove($n),0===i.length&&this.select(e);this.setActiveBorder(),s.setAttribute("aria-hidden",""+t),"Popup"===this.overflowMode&&this.tbObj&&this.tbObj.refreshOverflow()}}selectTab(e,t=null,i=!1){this.isInteracted=i,this.select(e,t)}select(e,t){const i=this.getTabHeader();this.tbItems=X("."+Ph,i),this.tbItem=at("."+ks,i),this.content=X("."+Ts,this.element),this.prevItem=this.tbItem[this.prevIndex],m(this.selectedItem)||this.selectedItem<0||this.tbItem.length<=this.selectedItem||isNaN(this.selectedItem)?this.selectedItem=0:this.selectedID=this.extIndex(this.tbItem[this.selectedItem].id);const s=this.tbItem[e];m(s)?this.selectedID="0":this.selectingID=this.extIndex(s.id),!m(this.prevItem)&&!this.prevItem.classList.contains(my)&&this.prevItem.children.item(0).setAttribute("tabindex","-1");const r={event:t,previousItem:this.prevItem,previousIndex:this.prevIndex,selectedItem:this.tbItem[this.selectedItem],selectedIndex:this.selectedItem,selectedContent:m(this.content)?null:X("#"+Ts+this.tabId+"_"+this.selectedID,this.content),selectingItem:s,selectingIndex:e,selectingContent:m(this.content)?null:X("#"+Ts+this.tabId+"_"+this.selectingID,this.content),isSwiped:this.isSwipeed,isInteracted:this.isInteracted,cancel:!1};this.initRender?this.selectingContent(e,this.isInteracted):this.trigger("selecting",r,o=>{o.cancel||this.selectingContent(e,this.isInteracted)}),this.isInteracted=!1}selectingContent(e,t){if("number"==typeof e){if(!m(this.tbItem[e])&&(this.tbItem[e].classList.contains(my)||this.tbItem[e].classList.contains($n)))for(let i=e+1;i<this.items.length;i++){if(!1===this.items[i].disabled&&!0===this.items[i].visible){e=i;break}e=0}if(this.tbItem.length>e&&e>=0&&!isNaN(e))if(this.prevIndex=this.selectedItem,this.tbItem[e].classList.contains(am)&&this.reorderActiveTab){if(this.setActive(this.popupHandler(this.tbItem[e]),null,t),!m(this.items)&&this.items.length>0&&this.allowDragAndDrop){this.tbItem=at("."+Ph+" ."+ks,this.hdrEle);let i=this.items[e];this.items.splice(e,1),this.items.splice(this.tbItem.length-1,0,i)}}else this.setActive(e,null,t);else this.setActive(0,null,t)}else e instanceof HTMLElement&&this.setActive(this.getEleIndex(e),null,t)}getItemIndex(e){let t;for(let i=0;i<this.tbItem.length;i++)if(e===this.tbItem[i].getAttribute("data-id")){t=i;break}return t}disable(e){this.setCssClass(this.element,my,e),this.element.setAttribute("aria-disabled",""+e)}getPersistData(){return this.addOnPersist(["selectedItem","actEleId"])}getModuleName(){return"tab"}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"width":It(this.element,{width:ct(e.width)});break;case"height":It(this.element,{height:ct(e.height)}),this.setContentHeight(!1);break;case"cssClass":""===t.cssClass||m(t.cssClass)||this.setCssClass(this.element,t.cssClass,!1),this.setCssClass(this.element,e.cssClass,!0);break;case"items":this.evalOnPropertyChangeItems(e,t);break;case"showCloseButton":this.setCloseButton(e.showCloseButton);break;case"reorderActiveTab":this.refreshActiveTabBorder();break;case"selectedItem":this.selectedItem=t.selectedItem,this.select(e.selectedItem);break;case"headerPlacement":this.changeOrientation(e.headerPlacement);break;case"enableRtl":this.setRTL(e.enableRtl);break;case"overflowMode":this.tbObj.overflowMode=e.overflowMode,this.tbObj.dataBind(),this.refreshActiveTabBorder();break;case"heightAdjustMode":this.setContentHeight(!1),this.select(this.selectedItem);break;case"scrollStep":this.tbObj&&(this.tbObj.scrollStep=this.scrollStep);break;case"allowDragAndDrop":this.bindDraggable();break;case"dragArea":this.allowDragAndDrop&&(this.draggableItems.forEach(s=>{s.dragArea=this.dragArea}),this.refresh())}}refreshActiveTab(){if(this.isReact&&this.clearTemplate(),this.isTemplate){const e=this.element.querySelector("."+Ph),t=this.element.querySelector("."+ks+"."+Fs),i=t.id,s=i.indexOf("_"),r=parseInt(i.substring(s+1),10),o=t.innerText,a=this.element.querySelector("."+Ts).querySelector("."+Fs).children[0],u=a.innerHTML;ye(t),ye(a);const p={className:ks+" "+OL+" "+Fs,id:yo+this.tabId+"_"+r,attrs:{role:"tab","aria-controls":Ts+this.tabId+"_"+r,"aria-disabled":"false","aria-selected":"true"}},y=this.createElement("span",{className:nk,innerHTML:o,attrs:{role:"presentation"}}).outerHTML,E=this.createElement("div",{className:rk,innerHTML:y+this.btnCls.outerHTML}).outerHTML,_=this.createElement("div",{className:ku,innerHTML:E,attrs:{tabIndex:"-1"}});e.insertBefore(this.createElement("div",p),e.children[r+1]),this.element.querySelector("."+ks+"."+Fs).appendChild(_);const D=this.createElement("div",{innerHTML:u});this.element.querySelector("."+Ts).querySelector("."+Fs).appendChild(D)}else if(this.element.querySelector("."+ks+"."+Fs)){ye(this.element.querySelector("."+ks+"."+Fs).children[0]),ye(this.element.querySelector("."+Ts).querySelector("."+Fs).children[0]);const e=this.items[this.selectedItem],t=m(e.header)||m(e.header.iconPosition)?"":e.header.iconPosition,i=m(e.header)||m(e.header.iconCss)?"":e.header.iconCss,s=e.headerTemplate||e.header.text,r=this.createElement("div",{className:nk,attrs:{role:"presentation"}});let o;m(s.tagName)?this.headerTextCompile(r,s,this.selectedItem):r.appendChild(s);const a=this.createElement("span",{className:LL+" "+yH+" "+RL+"-"+t+" "+i}),u=this.createElement("div",{className:rk});u.appendChild(r),""!==s&&void 0!==s&&""!==i?("left"===t||"top"===t?u.insertBefore(a,u.firstElementChild):u.appendChild(a),o=r,this.isIconAlone=!1):(o=""===i?r:a,o===a&&(ye(r),u.appendChild(a),this.isIconAlone=!0));const p=e.disabled?{}:{tabIndex:"-1"};u.appendChild(this.btnCls.cloneNode(!0));const y=this.createElement("div",{className:ku,attrs:p});y.appendChild(u),("top"===t||"bottom"===t)&&this.element.classList.add("e-vertical-icon"),this.element.querySelector("."+ks+"."+Fs).appendChild(y);const E=this.createElement("div");let D,_=e.content;if("string"==typeof _||m(_.innerHTML))if("string"==typeof _&&this.enableHtmlSanitizer&&(_=_n.sanitize(_)),"."===_[0]||"#"===_[0])if(document.querySelectorAll(_).length){const L=document.querySelector(_);D=L.outerHTML.trim(),E.appendChild(L),L.style.display=""}else this.compileElement(E,_,"content",this.selectedItem);else this.compileElement(E,_,"content",this.selectedItem);else E.appendChild(_);m(D)||-1===this.templateEle.indexOf(_.toString())&&this.templateEle.push(_.toString()),this.element.querySelector(".e-item."+Fs).appendChild(E)}this.isReact&&this.renderReactTemplates()}};hs([cl([],gy)],yn.prototype,"items",void 0),hs([A("100%")],yn.prototype,"width",void 0),hs([A("auto")],yn.prototype,"height",void 0),hs([A("")],yn.prototype,"cssClass",void 0),hs([A(0)],yn.prototype,"selectedItem",void 0),hs([A("Top")],yn.prototype,"headerPlacement",void 0),hs([A("Content")],yn.prototype,"heightAdjustMode",void 0),hs([A("Scrollable")],yn.prototype,"overflowMode",void 0),hs([A("Dynamic")],yn.prototype,"loadOn",void 0),hs([A(!1)],yn.prototype,"enablePersistence",void 0),hs([A(!1)],yn.prototype,"enableHtmlSanitizer",void 0),hs([A(!1)],yn.prototype,"showCloseButton",void 0),hs([A(!0)],yn.prototype,"reorderActiveTab",void 0),hs([A()],yn.prototype,"scrollStep",void 0),hs([A()],yn.prototype,"dragArea",void 0),hs([A(!1)],yn.prototype,"allowDragAndDrop",void 0),hs([Ps({},UL)],yn.prototype,"animation",void 0),hs([Z()],yn.prototype,"created",void 0),hs([Z()],yn.prototype,"adding",void 0),hs([Z()],yn.prototype,"added",void 0),hs([Z()],yn.prototype,"selecting",void 0),hs([Z()],yn.prototype,"selected",void 0),hs([Z()],yn.prototype,"removing",void 0),hs([Z()],yn.prototype,"removed",void 0),hs([Z()],yn.prototype,"onDragStart",void 0),hs([Z()],yn.prototype,"dragging",void 0),hs([Z()],yn.prototype,"dragged",void 0),hs([Z()],yn.prototype,"destroyed",void 0),yn=hs([ts],yn);var zL,si=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const Hd="e-treeview",SH="e-control",ma="e-icon-collapsible",Rn="e-icon-expandable",Bi="e-list-item",Ob="e-list-text",As="e-list-parent",Vp="e-hover",Jc="e-active",WL="e-icons-spinner",lm="e-process",vo="e-icons",Xo="e-text-content",lk="e-input",_H="e-input-group",ck="e-tree-input",qL="e-editing",xH="e-interaction",TH="e-droppable",$L="e-dragging",EI="e-sibling",hk="e-drop-in",wI="e-drop-next",GL="e-drop-out",YL="e-no-drop",cm="e-fullrow",NE="e-selected",uk="e-expanded",AH="e-node-collapsed",DH="e-disable",pl="e-check",Ou="e-stop",Lh="e-checkbox-wrapper",hm="e-frame",kH="e-ripple",FE="e-node-focus",OH="e-list-img",dk="e-animation-active",MH="e-disabled",PH={treeRole:"tree",itemRole:"treeitem",listRole:"group",itemText:"",wrapperRole:""};class fl extends Is{}si([A("child")],fl.prototype,"child",void 0),si([A([])],fl.prototype,"dataSource",void 0),si([A("expanded")],fl.prototype,"expanded",void 0),si([A("hasChildren")],fl.prototype,"hasChildren",void 0),si([A("htmlAttributes")],fl.prototype,"htmlAttributes",void 0),si([A("iconCss")],fl.prototype,"iconCss",void 0),si([A("id")],fl.prototype,"id",void 0),si([A("imageUrl")],fl.prototype,"imageUrl",void 0),si([A("isChecked")],fl.prototype,"isChecked",void 0),si([A("parentID")],fl.prototype,"parentID",void 0),si([A(null)],fl.prototype,"query",void 0),si([A("selected")],fl.prototype,"selected",void 0),si([A(null)],fl.prototype,"tableName",void 0),si([A("text")],fl.prototype,"text",void 0),si([A("tooltip")],fl.prototype,"tooltip",void 0),si([A("navigateUrl")],fl.prototype,"navigateUrl",void 0);class SI extends Is{}si([A("SlideDown")],SI.prototype,"effect",void 0),si([A(400)],SI.prototype,"duration",void 0),si([A("linear")],SI.prototype,"easing",void 0);class KL extends Is{}si([Ps({effect:"SlideUp",duration:400,easing:"linear"},SI)],KL.prototype,"collapse",void 0),si([Ps({effect:"SlideDown",duration:400,easing:"linear"},SI)],KL.prototype,"expand",void 0);let Ji=zL=class extends Ls{constructor(e,t){super(e,t),this.isRefreshed=!1,this.preventExpand=!1,this.checkedElement=[],this.disableNode=[],this.validArr=[],this.validNodes=[],this.expandChildren=[],this.isFieldChange=!1,this.changeDataSource=!1,this.hasTemplate=!1,this.isFirstRender=!1,this.mouseDownStatus=!1}getModuleName(){return"treeview"}preRender(){this.checkActionNodes=[],this.parentNodeCheck=[],this.dragStartAction=!1,this.isAnimate=!1,this.keyConfigs={escape:"escape",end:"end",enter:"enter",f2:"f2",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",ctrlA:"ctrl+A",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space"},this.listBaseOption={expandCollapse:!0,showIcon:!0,expandIconClass:Rn,ariaAttributes:PH,expandIconPosition:"Left",itemCreated:e=>{this.beforeNodeCreate(e)},enableHtmlSanitizer:this.enableHtmlSanitizer,itemNavigable:this.fullRowNavigable},this.updateListProp(this.fields),this.aniObj=new Wn({}),this.treeList=[],this.isLoaded=!1,this.isInitalExpand=!1,this.expandChildren=[],this.index=0,this.setTouchClass(),m(this.selectedNodes)&&this.setProperties({selectedNodes:[]},!0),m(this.checkedNodes)&&this.setProperties({checkedNodes:[]},!0),m(this.expandedNodes)?this.setProperties({expandedNodes:[]},!0):this.isInitalExpand=!0}getPersistData(){return this.addOnPersist(["selectedNodes","checkedNodes","expandedNodes"])}render(){this.initialRender=!0,this.initialize(),this.setDataBinding(!1),this.setDisabledMode(),this.setExpandOnType(),this.disabled||this.setRipple(),this.wireEditingEvents(this.allowEditing),this.setDragAndDrop(this.allowDragAndDrop),this.disabled||this.wireEvents(),this.initialRender=!1,this.renderComplete()}initialize(){this.element.setAttribute("role","tree"),this.element.setAttribute("tabindex","0"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active"),this.setCssClass(null,this.cssClass),this.setEnableRtl(),this.setFullRow(this.fullRowSelect),this.setTextWrap(),this.nodeTemplateFn=this.templateComplier(this.nodeTemplate)}setDisabledMode(){this.disabled?this.element.classList.add(MH):this.element.classList.remove(MH)}setEnableRtl(){(this.enableRtl?j:Y)([this.element],"e-rtl")}setRipple(){this.rippleFn=da(this.element,{selector:"."+cm+",."+Xo,ignore:"."+Xo+" > ."+vo+",."+_H+",."+lk+", ."+Lh}),this.rippleIconFn=da(this.element,{selector:"."+Xo+" > ."+vo,isCenterRipple:!0})}setFullRow(e){(e?j:Y)([this.element],"e-fullrow-wrap")}setMultiSelect(e){const t=X("."+As,this.element);e?t.setAttribute("aria-multiselectable","true"):t.removeAttribute("aria-multiselectable")}templateComplier(e){if(e){this.hasTemplate=!0,this.element.classList.add(xH);try{if(document.querySelectorAll(e).length)return xs(document.querySelector(e).innerHTML.trim())}catch(t){return xs(e)}}this.element.classList.remove(xH)}setDataBinding(e){this.treeList.push("false"),this.fields.dataSource instanceof Nt?(this.isOffline=this.fields.dataSource.dataSource.offline,this.fields.dataSource.ready?this.fields.dataSource.ready.then(t=>{this.isOffline=this.fields.dataSource.dataSource.offline,this.fields.dataSource instanceof Nt&&this.isOffline&&(this.treeList.pop(),this.treeData=t.result,this.isNumberTypeId=this.getType(),this.setRootData(),this.renderItems(!0),0===this.treeList.length&&!this.isLoaded&&this.finalize())}).catch(t=>{this.trigger("actionFailure",{error:t})}):this.fields.dataSource.executeQuery(this.getQuery(this.fields)).then(t=>{this.treeList.pop(),this.treeData=t.result,this.isNumberTypeId=this.getType(),this.setRootData(),e&&(this.changeDataSource=!0),this.renderItems(!0),this.changeDataSource=!1,0===this.treeList.length&&!this.isLoaded&&this.finalize()}).catch(t=>{this.trigger("actionFailure",{error:t})})):(this.treeList.pop(),m(this.fields.dataSource)?this.rootData=this.treeData=[]:(this.treeData=JSON.parse(JSON.stringify(this.fields.dataSource)),this.setRootData()),this.isNumberTypeId=this.getType(),this.renderItems(!1)),0===this.treeList.length&&!this.isLoaded&&this.finalize()}getQuery(e,t=null){let s,i=[];if(e.query)s=e.query.clone();else{s=new Fi;let r=this.getActualProperties(e);for(let o of Object.keys(r))"dataSource"!==o&&"tableName"!==o&&"child"!==o&&e[o]&&"url"!==o&&-1===i.indexOf(e[o])&&i.push(e[o]);s.select(i),r.hasOwnProperty("tableName")&&s.from(e.tableName)}return ds.addSorting(this.sortOrder,e.text,s),!m(t)&&!m(e.parentID)&&s.where(e.parentID,"equal",this.isNumberTypeId?parseFloat(t):t),s}getType(){return!!this.treeData[0]&&"number"==typeof J(this.fields.id,this.treeData[0])}setRootData(){if(this.dataType=this.getDataType(this.treeData,this.fields),1===this.dataType){this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID);let e=this.getChildNodes(this.treeData,void 0,!0);this.rootData=m(e)?[]:e}else this.rootData=this.treeData}renderItems(e){this.listBaseOption.ariaAttributes.level=1;let t=this.getSortedData(this.rootData);this.ulElement=ds.createList(this.createElement,e?this.rootData:t,this.listBaseOption),this.element.appendChild(this.ulElement);let i=this.ulElement.querySelectorAll(".e-list-item");if(!1===this.loadOnDemand){let r=0;for(;r<i.length;)this.renderChildNodes(i[r],!0,null,!0),r++}(1===at("."+As,this.element).length&&i&&0!==i.length||this.loadOnDemand)&&this.finalizeNode(this.element),this.parentNodeCheck=[],this.parentCheckData=[],this.updateCheckedStateFromDS(),this.autoCheck&&this.showCheckBox&&!this.isLoaded&&this.updateParentCheckState()}updateCheckedStateFromDS(e){if(this.validNodes=[],this.treeData&&this.showCheckBox){if(1===this.dataType){let t=this.fields,i=new Nt(this.treeData).executeLocal((new Fi).where(t.isChecked,"equal",!0,!1));for(let s=0;s<i.length;s++){let r=i[s][this.fields.id]?i[s][this.fields.id].toString():null;if(i[s][this.fields.parentID]&&i[s][this.fields.parentID].toString(),-1===this.checkedNodes.indexOf(r)&&!this.isLoaded&&this.checkedNodes.push(r),i[s][this.fields.hasChildren]){let a=i[s][this.fields.id],u=new Nt(this.treeData).executeLocal((new Fi).where(t.parentID,"equal",a,!1));for(let p=0;p<u.length;p++){let y=u[p][this.fields.id]?u[p][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(y)&&this.autoCheck&&this.checkedNodes.push(y)}}}for(let s=0;s<this.checkedNodes.length;s++){let r=this.fields,o=new Nt(this.treeData).executeLocal((new Fi).where(r.id,"equal",this.checkedNodes[s],!0));if(o[0]&&this.autoCheck&&(this.getCheckedNodeDetails(r,o),this.checkIndeterminateState(o[0])),o.length>0){let u=o[0][this.fields.id]?o[0][this.fields.id].toString():null;this.checkedNodes.indexOf(u)>-1&&-1===this.validNodes.indexOf(u)&&this.validNodes.push(u)}let a=new Nt(this.treeData).executeLocal((new Fi).where(r.parentID,"equal",this.checkedNodes[s],!0));for(let u=0;u<a.length;u++){let p=a[u][this.fields.id]?a[u][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(p)&&this.autoCheck&&this.checkedNodes.push(p),this.checkedNodes.indexOf(p)>-1&&-1===this.validNodes.indexOf(p)&&this.validNodes.push(p)}}}else if(2===this.dataType||this.fields.dataSource instanceof Nt&&this.isOffline)for(let t=0;t<this.treeData.length;t++){let i=this.treeData[t][this.fields.id]?this.treeData[t][this.fields.id].toString():"";this.treeData[t][this.fields.isChecked]&&!this.isLoaded&&-1===this.checkedNodes.indexOf(i)&&this.checkedNodes.push(i),this.checkedNodes.indexOf(i)>-1&&-1===this.validNodes.indexOf(i)&&this.validNodes.push(i);let s=J(this.fields.child.toString(),this.treeData[t]);s&&this.updateChildCheckState(s,this.treeData[t])}this.setProperties({checkedNodes:this.validNodes},!0)}}getCheckedNodeDetails(e,t){let i=t[0][this.fields.parentID]?t[0][this.fields.parentID].toString():null,s=0,r=this.element.querySelector('[data-uid="'+t[0][this.fields.id]+'"]'),o=this.element.querySelector('[data-uid="'+t[0][this.fields.parentID]+'"]');if(r||o)o&&(X("."+pl,o)||this.changeState(o,"indeterminate",null,!0,!0));else{-1===this.parentNodeCheck.indexOf(i)&&this.parentNodeCheck.push(i);let u=this.getChildNodes(this.treeData,i);for(let y=0;y<u.length;y++){let E=u[y][this.fields.id]?u[y][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(E)&&s++,s===u.length&&-1===this.checkedNodes.indexOf(i)&&this.checkedNodes.push(i)}let p=new Nt(this.treeData).executeLocal((new Fi).where(e.id,"equal",i,!0));this.getCheckedNodeDetails(e,p)}}updateParentCheckState(){let t,e=at("."+Ou,this.element);for(let i=0;i<e.length;i++){let s=ae(e[i],"."+Bi),r=s.getAttribute("data-uid").toString();t=1===this.dataType?new Nt(this.treeData).executeLocal((new Fi).where(this.fields.parentID,"equal",r,!0)):this.getChildNodes(this.treeData,r);let o=0;if(t){for(let a=0;a<t.length;a++){let u=t[a][this.fields.id].toString();-1!==this.checkedNodes.indexOf(u)&&o++}if(o===t.length){let a=s.getAttribute("data-uid");-1===this.checkedNodes.indexOf(a)&&this.checkedNodes.push(a),this.changeState(s,"check",null,!0,!0)}else 0===o&&0===this.checkedNodes.length&&this.changeState(s,"uncheck",null,!0,!0)}}}checkIndeterminateState(e){let t;t=this.element.querySelector(1===this.dataType?'[data-uid="'+e[this.fields.parentID]+'"]':'[data-uid="'+e[this.fields.id]+'"]'),t?"true"!==t.querySelector("."+Lh).getAttribute("aria-checked")&&this.changeState(t,"indeterminate",null,!0,!0):2===this.dataType&&-1===this.parentNodeCheck.indexOf(e[this.fields.id].toString())&&this.parentNodeCheck.push(e[this.fields.id].toString())}updateChildCheckState(e,t){let i=0,s=t[this.fields.id]?t[this.fields.id].toString():"";for(let r=0;r<e.length;r++){let o=e[r][this.fields.id]?e[r][this.fields.id].toString():"";e[r][this.fields.isChecked]&&!this.isLoaded&&-1===this.checkedNodes.indexOf(o)&&this.checkedNodes.push(o),-1!==this.checkedNodes.indexOf(s)&&-1===this.checkedNodes.indexOf(o)&&this.autoCheck&&this.checkedNodes.push(o),-1!==this.checkedNodes.indexOf(o)&&this.autoCheck&&i++,this.checkedNodes.indexOf(o)>-1&&-1===this.validNodes.indexOf(o)&&this.validNodes.push(o);let a=J(this.fields.child.toString(),e[r]);a&&(this.parentCheckData.push(t),this.updateChildCheckState(a,e[r])),i===e.length&&this.autoCheck&&-1===this.checkedNodes.indexOf(s)&&this.checkedNodes.push(s)}if(0!==i&&this.autoCheck){this.checkIndeterminateState(t);for(let r=0;r<this.parentCheckData.length;r++)t!==this.parentCheckData[r]&&this.parentCheckData[r]&&this.checkIndeterminateState(this.parentCheckData[r])}this.parentCheckData=[]}beforeNodeCreate(e){if(this.showCheckBox){let s=x0(this.createElement,!0,{cssClass:this.touchClass});s.setAttribute("role","checkbox");let r=X("div."+vo,e.item),o=e.item.getAttribute("data-uid");e.item.childNodes[0].insertBefore(s,e.item.childNodes[0].childNodes[m(r)?0:1]);let a=J(e.fields.isChecked,e.curData);this.checkedNodes.indexOf(o)>-1?(X("."+hm,s).classList.add(pl),s.setAttribute("aria-checked","true"),this.addCheck(e.item)):m(a)||"true"!==a.toString()?s.setAttribute("aria-checked","false"):(X("."+hm,s).classList.add(pl),s.setAttribute("aria-checked","true"),this.addCheck(e.item));let u=X("."+hm,s);O.add(u,"mousedown",this.frameMouseHandler,this),O.add(u,"mouseup",this.frameMouseHandler,this)}this.fullRowSelect&&this.createFullRow(e.item),this.allowMultiSelection&&!e.item.classList.contains(NE)&&e.item.setAttribute("aria-selected","false");let t=e.fields;if(this.addActionClass(e,t.selected,NE),this.addActionClass(e,t.expanded,uk),!m(this.nodeTemplateFn)){let s=e.item.querySelector("."+Ob),r=e.item.getAttribute("data-uid");s.innerHTML="",this.renderNodeTemplate(e.curData,s,r)}this.isRefreshed||this.trigger("drawNode",{node:e.item,nodeData:e.curData,text:e.text})}frameMouseHandler(e){T0(e,X(".e-ripple-container",e.target.parentElement))}addActionClass(e,t,i){let r=J(t,e.curData);!m(r)&&"false"!==r.toString()&&e.item.classList.add(i)}getDataType(e,t){if(this.fields.dataSource instanceof Nt){for(let i=0;i<e.length;i++)if(this.isOffline){if("string"==typeof t.child&&m(J(t.child,e[i]))&&!m(J(t.parentID,e[i])))return 1}else if("string"==typeof t.child&&m(J(t.child,e[i])))return 1;return 2}for(let i=0,s=e.length;i<s;i++){if("string"==typeof t.child&&!m(J(t.child,e[i])))return 2;if(!m(J(t.parentID,e[i]))||!m(J(t.hasChildren,e[i])))return 1}return 1}getGroupedData(e,t){let i=(new Fi).group(t),s=ds.getDataSource(e,i),r=[];for(let o=0;o<s.length;o++)r.push(s[o].items);return r}getSortedData(e){return e&&"None"!==this.sortOrder&&(e=ds.getDataSource(e,ds.addSorting(this.sortOrder,this.fields.text))),e}finalizeNode(e){let t=at("."+OH,e);for(let r=0;r<t.length;r++)t[r].setAttribute("alt",OH);if(this.isLoaded){let r=at("."+NE,e);for(let o=0;o<r.length;o++){this.selectNode(r[o],null);break}Y(r,NE)}let i=at("."+Bi+":not(."+uk+")",e);for(let r=0;r<i.length;r++){let o=X("div."+vo,i[r]);o&&o.classList.contains(Rn)&&this.disableExpandAttr(i[r])}let s=at("."+uk,e);if(!this.isInitalExpand)for(let r=0;r<s.length;r++)this.renderChildNodes(s[r]);Y(s,uk),this.updateList(),this.isLoaded&&this.updateCheckedProp()}updateCheckedProp(){if(this.showCheckBox){let e=[].concat([],this.checkedNodes);this.setProperties({checkedNodes:e},!0)}}ensureIndeterminate(){if(this.autoCheck){let t,e=at("li",this.element);for(let i=0;i<e.length;i++)e[i].classList.contains(Bi)&&(t=X("."+As,e[i]),t?this.ensureParentCheckState(e[i]):this.ensureChildCheckState(e[i]))}else{let e=at("."+Ou,this.element);for(let t=0;t<e.length;t++)e[t].classList.remove(Ou)}}ensureParentCheckState(e){if(!m(e)){if(e.classList.contains(Hd))return;let t=e;e.classList.contains(Bi)&&(t=X("."+As,e));let i=at("."+pl,t),s=at("."+Ou,t),r=at("."+Bi,t),o=e.getElementsByClassName(Lh)[0];r.length===i.length?this.changeState(o,"check",null,!0,!0):i.length>0||s.length>0?this.changeState(o,"indeterminate",null,!0,!0):0===i.length&&this.changeState(o,"uncheck",null,!0,!0);let a=ae(e,"."+As);if(!m(a)){let u=ae(a,"."+Bi);this.ensureParentCheckState(u)}}}ensureChildCheckState(e,t){if(!m(e)){let s,i=X("."+As,e);if(!m(i)){s=at("."+Lh,i);let p,r=e.getElementsByClassName(hm)[0].classList.contains(pl),o=e.getElementsByClassName(hm)[0].classList.contains(Ou),a=i.querySelectorAll("li");i.parentElement.getAttribute("aria-expanded");for(let y=0;y<s.length;y++){let E=a[y].getAttribute("data-uid");if(m(this.currentLoadData)||m(J(this.fields.isChecked,this.currentLoadData[y]))){let _=s[y].getElementsByClassName(hm)[0].classList.contains(pl);r||_&&!this.isLoaded||-1!==this.checkedNodes.indexOf(E)&&this.isLoaded&&(o||r)?p="check":a[y].classList.contains("e-has-child")&&!Jt(this.parentNodeCheck)&&this.autoCheck&&(r||o)&&-1!==this.parentNodeCheck.indexOf(E)||1===this.dataType&&!Jt(this.parentNodeCheck)&&this.autoCheck&&(r||o)&&-1!==this.parentNodeCheck.indexOf(E)?(p="indeterminate",this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(E),1)):p="uncheck"}else p=J(this.fields.isChecked,this.currentLoadData[y])?"check":"uncheck",-1!==this.ele&&(p=r?"check":"uncheck"),"uncheck"===p&&!Jt(this.parentNodeCheck)&&this.autoCheck&&-1!==this.parentNodeCheck.indexOf(E)&&(this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(E),1),p="indeterminate");this.changeState(s[y],p,t,!0,!0)}}this.autoCheck&&this.isLoaded&&this.updateParentCheckState()}}doCheckBoxAction(e,t){if(at("."+Bi,this.element),m(e)){let s=at("."+Lh,this.element);if(this.loadOnDemand)for(let r=0;r<s.length;r++)this.updateFieldChecked(s[r],t),this.changeState(s[r],t?"check":"uncheck",null,null,null,t);else for(let r=0;r<s.length;r++)this.updateFieldChecked(s[r],t),this.changeState(s[r],t?"check":"uncheck")}else for(let s=e.length;s>=0;s--){let r;if(r=this.getElement(1===e.length?e[s-1]:e[s]),m(r)){let a;if(a=e[s-e.length]?e[s-e.length].toString():e[s]?e[s].toString():null,""!==a&&t&&a)this.setValidCheckedNode(a),this.dynamicCheckState(a,t);else if(-1!==this.checkedNodes.indexOf(a)&&""!==a&&!t){this.checkedNodes.splice(this.checkedNodes.indexOf(a),1);let u=this.getChildNodes(this.treeData,a);if(u){for(let p=0;p<u.length;p++){let y=u[p][this.fields.id]?u[p][this.fields.id].toString():null;if(-1!==this.checkedNodes.indexOf(y)){this.checkedNodes.splice(this.checkedNodes.indexOf(y),1);let E=this.element.querySelector('[data-uid="'+y+'"]');E&&this.changeState(E,"uncheck",null)}}-1!==this.parentNodeCheck.indexOf(a)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(a),1)}a&&this.dynamicCheckState(a,t),this.updateField(this.treeData,this.fields,a,"isChecked",null)}continue}let o=X("."+As+" ."+Lh,r);this.validateCheckNode(o,!t,r,null)}if(e)for(let s=0;s<e.length;s++){let r=e[s]?e[s].toString():"";t||this.updateField(this.treeData,this.fields,r,"isChecked",null)}this.autoCheck&&this.updateParentCheckState()}updateFieldChecked(e,t){let i=ae(e,"."+Bi),s=i.getAttribute("data-uid");"true"===this.getNodeData(i).isChecked&&!t&&this.updateField(this.treeData,this.fields,s,"isChecked",null)}dynamicCheckState(e,t){if(1===this.dataType){let i=0,s=new Nt(this.treeData).executeLocal((new Fi).where(this.fields.id,"equal",e,!0));if(s[0]){let r=s[0][this.fields.id]?s[0][this.fields.id].toString():null,o=s[0][this.fields.parentID]?s[0][this.fields.parentID].toString():null,a=this.element.querySelector('[data-uid="'+o+'"]'),y=(a&&X("."+Ou,a),a&&X("."+pl,a),this.element.querySelector('[data-uid="'+r+'"]')),E=this.getChildNodes(this.treeData,o);if(E)for(let _=0;_<E.length;_++){let D=E[_][this.fields.id]?E[_][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(D)&&i++}-1!==this.checkedNodes.indexOf(e)&&a&&r===e&&this.autoCheck?this.changeState(a,"indeterminate",null):-1===this.checkedNodes.indexOf(e)&&y&&r===e&&!t?this.changeState(y,"uncheck",null):-1!==this.checkedNodes.indexOf(e)&&y&&r===e&&t?this.changeState(y,"check",null):-1===this.checkedNodes.indexOf(e)&&!y&&a&&r===e&&this.autoCheck&&0!==i?this.changeState(a,"indeterminate",null):-1===this.checkedNodes.indexOf(e)&&!y&&a&&r===e&&this.autoCheck&&0===i?this.changeState(a,"uncheck",null):!y&&!a&&r===e&&this.autoCheck&&this.updateIndeterminate(e,t)}}else if(2===this.dataType||this.fields.dataSource instanceof Nt&&this.isOffline){let i,s,r;for(let o=0;o<this.treeData.length;o++){i=this.treeData[o][this.fields.id]?this.treeData[o][this.fields.id].toString():"",s=this.element.querySelector('[data-uid="'+i+'"]'),r=s?X("."+pl,s):null,-1===this.checkedNodes.indexOf(i)&&s&&r&&!t&&this.changeState(s,"uncheck",null);let a=J(this.fields.child.toString(),this.treeData[o]);a&&this.updateChildIndeterminate(a,i,e,t,i)}}}updateIndeterminate(e,t){let r,i=this.getTreeData(e),s=0;1===this.dataType&&(r=i[0][this.fields.parentID]?i[0][this.fields.parentID].toString():null);let o=this.getChildNodes(this.treeData,r);if(o)for(let u=0;u<o.length;u++){let p=o[u][this.fields.id]?o[u][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(p)&&s++}let a=this.element.querySelector('[data-uid="'+r+'"]');a&&t||!t&&a&&-1===this.parentNodeCheck.indexOf(r)&&0!==s?this.changeState(a,"indeterminate",null):!t&&a&&-1===this.parentNodeCheck.indexOf(r)&&0===s?this.changeState(a,"uncheck",null):a||(t||-1!==this.checkedNodes.indexOf(r)||-1===this.parentNodeCheck.indexOf(r)?(t&&-1===this.checkedNodes.indexOf(r)&&-1===this.parentNodeCheck.indexOf(r)||!t&&-1!==this.checkedNodes.indexOf(r)&&-1===this.parentNodeCheck.indexOf(r)&&0!==s)&&this.parentNodeCheck.push(r):this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(r),1),this.updateIndeterminate(r,t),-1!==this.checkedNodes.indexOf(r)&&!t&&this.checkedNodes.splice(this.checkedNodes.indexOf(r),1))}updateChildIndeterminate(e,t,i,s,r){let o=0;for(let a=0;a<e.length;a++){let u=e[a][this.fields.id]?e[a][this.fields.id].toString():"";-1!==this.checkedNodes.indexOf(u)&&o++;let p=this.element.querySelector('[data-uid="'+t+'"]'),y=p?X("."+Ou,p):null,E=p?X("."+pl,p):null,_=this.element.querySelector('[data-uid="'+u+'"]'),D=_?X("."+pl,_):null;if(-1!==this.checkedNodes.indexOf(i)&&p&&u===i&&this.autoCheck)this.changeState(p,"indeterminate",null);else if(-1!==this.checkedNodes.indexOf(i)||!p||_||u!==i||s){if(-1===this.checkedNodes.indexOf(i)&&_&&u===i&&!s)this.changeState(_,"uncheck",null);else if(-1===this.checkedNodes.indexOf(i)&&y&&u===i&&this.autoCheck&&0===o&&!s)y.classList.remove(Ou);else if(-1===this.checkedNodes.indexOf(i)&&!_&&E&&u===i&&0===o)this.changeState(p,"uncheck",null);else if(-1===this.checkedNodes.indexOf(u)&&_&&D&&0===o)this.changeState(_,"uncheck",null);else if(!_&&!p&&u===i||-1!==this.parentNodeCheck.indexOf(t)&&this.autoCheck){let V=this.element.querySelector('[data-uid="'+r+'"]');s&&0!==o?this.changeState(V,"indeterminate",null):s&&o===e.length&&-1===this.checkedNodes.indexOf(t)?this.checkedNodes.push(t):!s&&0===o&&-1!==this.parentNodeCheck.indexOf(t)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(t)),-1===this.parentNodeCheck.indexOf(t)&&this.parentNodeCheck.push(t)}}else this.changeState(p,this.autoCheck?"uncheck":0!==o?"indeterminate":"uncheck",null);let L=J(this.fields.child.toString(),e[a]);L&&this.updateChildIndeterminate(L,u,i,s,r)}}changeState(e,t,i,s,r,o){let a,u=ae(e,"."+Bi);e===u&&(e=X("."+Lh,u)),s?this.nodeCheckAction(e,t,u,a,i,s,r,o):(this.checkActionNodes=[],a=this.getCheckEvent(u,t,i),this.trigger("nodeChecking",a,p=>{p.cancel||this.nodeCheckAction(e,t,u,p,i,s,r,o)}))}nodeCheckAction(e,t,i,s,r,o,a,u){let p,y=e.getElementsByClassName(hm)[0];if("check"!==t||y.classList.contains(pl)?"uncheck"===t&&(y.classList.contains(pl)||y.classList.contains(Ou))?(Y([y],[pl,Ou]),this.removeCheck(i),p="false"):"indeterminate"===t&&this.autoCheck&&(y.classList.remove(pl),y.classList.add(Ou),this.removeCheck(i),p="mixed"):(y.classList.remove(Ou),y.classList.add(pl),this.addCheck(i),p="true"),p="check"===t?"true":"uncheck"===t?"false":p,m(p)||e.setAttribute("aria-checked",p),a){let E=[].concat([],this.checkActionNodes);s=this.getCheckEvent(i,t,r),Jt(o)&&(s.data=E)}void 0!==u&&this.ensureStateChange(i,u),o||m(p)||(e.setAttribute("aria-checked",p),s.data[0].checked=p,this.trigger("nodeChecked",s),this.checkActionNodes=[])}addCheck(e){let t=e.getAttribute("data-uid");!m(t)&&-1===this.checkedNodes.indexOf(t)&&this.checkedNodes.push(t)}removeCheck(e){let t=this.checkedNodes.indexOf(e.getAttribute("data-uid"));t>-1&&this.checkedNodes.splice(t,1)}getCheckEvent(e,t,i){this.checkActionNodes.push(this.getNodeData(e));let s=this.checkActionNodes;return{action:t,cancel:!1,isInteracted:!m(i),node:e,data:s}}finalize(){let e=X("."+As,this.element);if(!m(e)){e.setAttribute("role",PH.treeRole),this.setMultiSelect(this.allowMultiSelection);let t=X("."+Bi,this.element);t&&(j([t],FE),this.updateIdAttr(null,t)),this.allowTextWrap&&this.updateWrap(),this.renderReactTemplates(),this.hasPid=!!this.rootData[0]&&this.rootData[0].hasOwnProperty(this.fields.parentID),this.doExpandAction()}}setTextWrap(){(this.allowTextWrap?j:Y)([this.element],"e-text-wrap"),Q.isIE&&(this.allowTextWrap?j:Y)([this.element],"e-ie-wrap")}updateWrap(e){if(!this.fullRowSelect)return;const t=e?at("."+Bi,e):this.liList,i=t.length;for(let s=0;s<i;s++)this.calculateWrap(t[s])}calculateWrap(e){const t=X("."+cm,e);t&&t.nextElementSibling&&(t.style.height=this.allowTextWrap?t.nextElementSibling.offsetHeight+"px":"")}doExpandAction(){let e=this.expandedNodes;if(this.isInitalExpand&&e.length>0)if(this.setProperties({expandedNodes:[]},!0),this.fields.dataSource instanceof Nt)this.expandGivenNodes(e);else{for(let t=0;t<e.length;t++){let i=X('[data-uid="'+e[t]+'"]',this.element);if(m(i))e[t]&&-1===this.expandChildren.indexOf(e[t])&&this.expandChildren.push(e[t].toString());else{let s=X("."+Rn,X("."+Xo,i));m(s)||this.expandAction(i,s,null)}}this.afterFinalized()}else this.afterFinalized()}expandGivenNodes(e){let t=this;this.expandCallback(e[this.index],()=>{t.index++,t.index<e.length?t.expandGivenNodes(e):t.afterFinalized()})}expandCallback(e,t){let i=X('[data-uid="'+e+'"]',this.element);if(m(i))t();else{let s=X("."+Rn,X("."+Xo,i));m(s)?t():this.expandAction(i,s,null,!1,t)}}afterFinalized(){this.doSelectionAction(),this.updateCheckedProp(),this.isAnimate=!0,this.isInitalExpand=!1,(!this.isLoaded||this.isFieldChange)&&this.trigger("dataBound",{data:this.treeData}),this.isLoaded=!0}doSelectionAction(){let e=at("."+NE,this.element),t=this.selectedNodes;if(t.length>0){this.setProperties({selectedNodes:[]},!0);for(let i=0;i<t.length;i++){let s=X('[data-uid="'+t[i]+'"]',this.element);if(s&&!s.classList.contains("e-active")?this.selectNode(s,null,!0):this.selectedNodes.push(t[i]),!this.allowMultiSelection)break}}else this.selectGivenNodes(e);Y(e,NE)}selectGivenNodes(e){for(let t=0;t<e.length&&(e[t].classList.contains("e-disable")||this.selectNode(e[t],null,!0),this.allowMultiSelection);t++);}clickHandler(e){let t=e.originalEvent.target;if(O.remove(this.element,"contextmenu",this.preventContextMenu),t&&!this.dragStartAction){let i=t.classList,s=ae(t,"."+Bi);if(!s)return;if(3!==e.originalEvent.which){let r=X(".e-ripple-element",s),o=X("."+vo,s);if(this.removeHover(),this.setFocusElement(s),this.showCheckBox&&!s.classList.contains("e-disable")){let a=ae(t,"."+Lh);if(!m(a)){let u=X("."+hm,a);return this.validateCheckNode(a,u.classList.contains(pl),s,e.originalEvent),void this.triggerClickEvent(e.originalEvent,s)}}i.contains(Rn)?this.expandAction(s,t,e):i.contains(ma)?this.collapseNode(s,t,e):r&&o?o.classList.contains(kH)&&o.classList.contains(Rn)?this.expandAction(s,o,e):o.classList.contains(kH)&&o.classList.contains(ma)?this.collapseNode(s,o,e):!i.contains(As)&&!i.contains(Bi)&&this.toggleSelect(s,e.originalEvent,!1):!i.contains(As)&&!i.contains(Bi)&&this.toggleSelect(s,e.originalEvent,!1)}this.triggerClickEvent(e.originalEvent,s)}}nodeCheckedEvent(e,t,i){ae(e,"."+Bi);let r=this.getCheckEvent(e,t?"uncheck":"check",i);r.data=r.data.splice(0,r.data.length-1),this.trigger("nodeChecked",r)}triggerClickEvent(e,t){this.trigger("nodeClicked",{event:e,node:t})}expandNode(e,t,i){if(this.renderReactTemplates(),t.classList.contains(WL)&&this.hideSpinner(t),this.initialRender||t.classList.add("interaction"),!0!==i||!0===i&&e.classList.contains("e-expanded")){if(!0!==this.preventExpand){Y([t],Rn),j([t],ma);let s=0,r=0,o=this,a=X("."+As,e),u=e;this.setHeight(u,a);let p=X("."+Bi+"."+Jc,e);this.isAnimate&&!this.isRefreshed?this.aniObj.animate(a,{name:this.animation.expand.effect,duration:this.animation.expand.duration,timingFunction:this.animation.expand.easing,begin:y=>{u.style.overflow="hidden",!m(p)&&p instanceof HTMLElement&&p.classList.add(dk),s=u.offsetHeight,r=X("."+Xo,e).offsetHeight},progress:y=>{y.element.style.display="block",o.animateHeight(y,s,r)},end:y=>{y.element.style.display="block",!m(p)&&p instanceof HTMLElement&&p.classList.remove(dk),this.expandedNode(u,a,t)}}):this.expandedNode(u,a,t)}}else X("."+As,e).style.display="none",this.fields.dataSource instanceof Nt&&(this.preventExpand=!1);this.initialRender&&t.classList.add("interaction")}expandedNode(e,t,i){t.style.display="block",e.style.display="block",e.style.overflow="",e.style.height="",Y([i],lm),this.addExpand(e),this.allowTextWrap&&this.isLoaded&&this.isFirstRender&&(this.updateWrap(e),this.isFirstRender=!1),this.isLoaded&&this.expandArgs&&!this.isRefreshed&&(this.expandArgs=this.getExpandEvent(e,null),this.trigger("nodeExpanded",this.expandArgs))}addExpand(e){e.setAttribute("aria-expanded","true"),Y([e],AH);let t=e.getAttribute("data-uid");!m(t)&&-1===this.expandedNodes.indexOf(t)&&this.expandedNodes.push(t)}collapseNode(e,t,i){if(t.classList.contains(lm))return;let s;j([t],lm),this.isLoaded?(s=this.getExpandEvent(e,i),this.trigger("nodeCollapsing",s,r=>{r.cancel?Y([t],lm):this.nodeCollapseAction(e,t,r)})):this.nodeCollapseAction(e,t,s)}nodeCollapseAction(e,t,i){Y([t],ma),j([t],Rn);let s=0,r=0,o=this,a=X("."+As,e),u=e,p=X("."+Bi+"."+Jc,e);this.isAnimate?this.aniObj.animate(a,{name:this.animation.collapse.effect,duration:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing,begin:y=>{u.style.overflow="hidden",!m(p)&&p instanceof HTMLElement&&p.classList.add(dk),s=X("."+Xo,e).offsetHeight,r=u.offsetHeight},progress:y=>{o.animateHeight(y,s,r)},end:y=>{y.element.style.display="none",!m(p)&&p instanceof HTMLElement&&p.classList.remove(dk),this.collapsedNode(u,a,t,i)}}):this.collapsedNode(u,a,t,i)}collapsedNode(e,t,i,s){t.style.display="none",e.style.overflow="",e.style.height="",Y([i],lm),this.removeExpand(e),this.isLoaded&&(s=this.getExpandEvent(e,null),this.trigger("nodeCollapsed",s))}removeExpand(e,t){t?e.removeAttribute("aria-expanded"):this.disableExpandAttr(e);let i=this.expandedNodes.indexOf(e.getAttribute("data-uid"));i>-1&&this.expandedNodes.splice(i,1)}disableExpandAttr(e){e.setAttribute("aria-expanded","false"),j([e],AH)}setHeight(e,t){t.style.display="block",t.style.visibility="hidden",e.style.height=e.offsetHeight+"px",t.style.display="none",t.style.visibility=""}animateHeight(e,t,i){e.element.parentElement.style.height=(e.duration-e.timeStamp)/e.duration*(i-t)+t+"px"}renderChildNodes(e,t,i,s){let o,r=X("div."+vo,e);if(!m(r))if(this.showSpinner(r),this.fields.dataSource instanceof Nt){let a=this.parents(e,"."+As).length,u=this.getChildFields(this.fields,a,1);if(m(u)||m(u.dataSource))return ye(r),void this.removeExpand(e,!0);this.treeList.push("false"),this.fields.dataSource instanceof Nt&&this.isOffline?(this.treeList.pop(),o=this.getChildNodes(this.treeData,e.getAttribute("data-uid")),this.loadChild(o,u,r,e,t,i,s)):u.dataSource.executeQuery(this.getQuery(u,e.getAttribute("data-uid"))).then(p=>{this.treeList.pop(),o=p.result,1===this.dataType&&(this.dataType=2),this.loadChild(o,u,r,e,t,i,s)}).catch(p=>{this.trigger("actionFailure",{error:p})})}else{if(o=this.getChildNodes(this.treeData,e.getAttribute("data-uid")),this.currentLoadData=this.getSortedData(o),m(o)||0===o.length)return ye(r),void this.removeExpand(e,!0);this.listBaseOption.ariaAttributes.level=parseFloat(e.getAttribute("aria-level"))+1,e.appendChild(ds.createList(this.createElement,this.currentLoadData,this.listBaseOption)),this.expandNode(e,r,s),this.setSelectionForChildNodes(o),this.ensureCheckNode(e),this.finalizeNode(e),this.disableTreeNodes(o),this.renderSubChild(e,t,s)}}loadChild(e,t,i,s,r,o,a){if(this.currentLoadData=e,m(e)||0===e.length)ye(i),this.removeExpand(s,!0);else{if(this.updateListProp(t),this.fields.dataSource instanceof Nt&&!this.isOffline){let u=s.getAttribute("data-uid");pi("child",e,this.getNodeObject(u))}this.listBaseOption.ariaAttributes.level=parseFloat(s.getAttribute("aria-level"))+1,s.appendChild(ds.createList(this.createElement,e,this.listBaseOption)),this.expandNode(s,i,a),this.setSelectionForChildNodes(e),this.ensureCheckNode(s),this.finalizeNode(s),this.disableTreeNodes(e),this.renderSubChild(s,r,a)}o&&o(),0===this.treeList.length&&!this.isLoaded&&this.finalize()}disableTreeNodes(e){let t=0;for(;t<e.length;){let i=e[t][this.fields.id]?e[t][this.fields.id].toString():null;void 0!==this.disableNode&&-1!==this.disableNode.indexOf(i)&&this.doDisableAction([i]),t++}}setSelectionForChildNodes(e){let t;for(t=0;t<e.length;t++){let i=e[t][this.fields.id]?e[t][this.fields.id].toString():null;void 0!==this.selectedNodes&&-1!==this.selectedNodes.indexOf(i)&&this.doSelectionAction()}}ensureCheckNode(e){this.showCheckBox&&(this.ele=this.checkedElement?this.checkedElement.indexOf(e.getAttribute("data-uid")):null,this.autoCheck&&(this.ensureChildCheckState(e),this.ensureParentCheckState(e))),this.currentLoadData=null}getFields(e,t,i){return t===i?e:this.getFields(this.getChildMapper(e),t,i+1)}getChildFields(e,t,i){return t===i?this.getChildMapper(e):this.getChildFields(this.getChildMapper(e),t,i+1)}getChildMapper(e){return"string"==typeof e.child||m(e.child)?e:e.child}getChildNodes(e,t,i=!1){let s;if(m(e))return s;if(1===this.dataType)return this.getChildGroup(this.groupedData,t,i);if("string"==typeof this.fields.child)for(let r=0,o=e.length;r<o;r++){let a=J(this.fields.id,e[r]);if(a&&a.toString()===t)return J(this.fields.child,e[r]);if(!m(J(this.fields.child,e[r]))&&(s=this.getChildNodes(J(this.fields.child,e[r]),t),void 0!==s))break}return s}getChildGroup(e,t,i){let s;if(m(e))return s;for(let r=0,o=e.length;r<o;r++){if(m(e[r][0])||m(J(this.fields.parentID,e[r][0])))return i?e[r]:[];if(J(this.fields.parentID,e[r][0]).toString()===t)return e[r]}return s}renderSubChild(e,t,i){if(t){let s=at("."+Rn,e);for(let r=0,o=s.length;r<o;r++){let a=s[r];if(e.querySelector(".e-icons")!==s[r]){let u=ae(a,"."+Bi);this.expandArgs=this.getExpandEvent(u,null),!0!==i&&this.trigger("nodeExpanding",this.expandArgs),this.renderChildNodes(u,t,null,i)}}}}toggleSelect(e,t,i){e.classList.contains("e-disable")||(this.allowMultiSelection&&(t&&t.ctrlKey||i)&&this.isActive(e)?this.unselectNode(e,t):this.selectNode(e,t,i))}isActive(e){return!!e.classList.contains(Jc)}selectNode(e,t,i){if(m(e)||!this.allowMultiSelection&&this.isActive(e)&&!m(t))return void this.setFocusElement(e);let s;this.isLoaded?(s=this.getSelectEvent(e,"select",t),this.trigger("nodeSelecting",s,r=>{r.cancel||this.nodeSelectAction(e,t,r,i)})):this.nodeSelectAction(e,t,s,i)}nodeSelectAction(e,t,i,s){if((!this.allowMultiSelection||!s&&(!t||t&&!t.ctrlKey))&&this.removeSelectAll(),this.allowMultiSelection&&t&&t.shiftKey){this.startNode||(this.startNode=e);let r=this.liList.indexOf(this.startNode),o=this.liList.indexOf(e);if(r>o){let a=r;r=o,o=a}for(let a=r;a<=o;a++){let u=this.liList[a];zn(u)&&!u.classList.contains("e-disable")&&this.addSelect(u)}}else this.startNode=e,this.addSelect(e);this.setFocusElement(e),this.isLoaded&&(i.nodeData=this.getNodeData(e),this.trigger("nodeSelected",i))}unselectNode(e,t){let i;this.isLoaded?(i=this.getSelectEvent(e,"un-select",t),this.trigger("nodeSelecting",i,s=>{s.cancel||this.nodeUnselectAction(e,s)})):this.nodeUnselectAction(e,i)}nodeUnselectAction(e,t){this.removeSelect(e),this.setFocusElement(e),this.isLoaded&&(t.nodeData=this.getNodeData(e),this.trigger("nodeSelected",t))}setFocusElement(e){if(!m(e)){let t=this.getFocusedNode();t&&Y([t],FE),j([e],FE),this.updateIdAttr(t,e)}}addSelect(e){e.setAttribute("aria-selected","true"),j([e],Jc);let t=e.getAttribute("data-uid");!m(t)&&-1===this.selectedNodes.indexOf(t)&&this.selectedNodes.push(t)}removeSelect(e){this.allowMultiSelection?e.setAttribute("aria-selected","false"):e.removeAttribute("aria-selected"),Y([e],Jc);let t=this.selectedNodes.indexOf(e.getAttribute("data-uid"));t>-1&&this.selectedNodes.splice(t,1)}removeSelectAll(){let e=this.element.querySelectorAll("."+Jc);for(let t of e)this.allowMultiSelection?t.setAttribute("aria-selected","false"):t.removeAttribute("aria-selected");Y(e,Jc),this.setProperties({selectedNodes:[]},!0)}getSelectEvent(e,t,i){let s=this.getNodeData(e);return{action:t,cancel:!1,isInteracted:!m(i),node:e,nodeData:s}}setExpandOnType(){this.expandOnType="Auto"===this.expandOn?Q.isDevice?"Click":"DblClick":this.expandOn}expandHandler(e){let t=e.originalEvent.target;!t||t.classList.contains(lk)||t.classList.contains(Hd)||t.classList.contains(As)||t.classList.contains(Bi)||t.classList.contains(vo)||this.showCheckBox&&ae(t,"."+Lh)||this.expandCollapseAction(ae(t,"."+Bi),e)}expandCollapseAction(e,t){let i=X("div."+vo,e);if(i&&!i.classList.contains(lm)){let s=i.classList;s.contains(Rn)?this.expandAction(e,i,t):s.contains(ma)&&this.collapseNode(e,i,t)}}expandAction(e,t,i,s,r){t.classList.contains(lm)||(j([t],lm),this.isLoaded&&!this.isRefreshed?(this.expandArgs=this.getExpandEvent(e,i),this.trigger("nodeExpanding",this.expandArgs,o=>{o.cancel?Y([t],lm):this.nodeExpandAction(e,t,s,r)})):this.nodeExpandAction(e,t,s,r))}nodeExpandAction(e,t,i,s){let r=X("."+As,e);if(r&&"UL"===r.nodeName)this.expandNode(e,t);else{this.isFirstRender=!0,this.renderChildNodes(e,i,s);let o=at("."+Bi,e);for(let a=0;a<o.length;a++){let u=this.getId(o[a]);if(-1!==this.expandChildren.indexOf(u)&&void 0!==this.expandChildren){let p=X("."+Rn,X("."+Xo,o[a]));m(p)||this.expandAction(o[a],p,null),this.expandChildren.splice(this.expandChildren.indexOf(u),1)}}}}keyActionHandler(e){let t=e.target,i=this.getFocusedNode();if(t&&t.classList.contains(lk)){let r=t;"enter"===e.action?(r.blur(),this.element.focus(),j([i],Vp)):"escape"===e.action&&(r.value=this.oldText,r.blur(),this.element.focus(),j([i],Vp))}else e.preventDefault(),this.trigger("keyPress",{cancel:!1,event:e,node:i},r=>{if(!r.cancel)switch(e.action){case"space":this.showCheckBox&&this.checkNode(e);break;case"moveRight":this.openNode(!this.enableRtl,e);break;case"moveLeft":this.openNode(!!this.enableRtl,e);break;case"shiftDown":this.shiftKeySelect(!0,e);break;case"moveDown":case"ctrlDown":case"csDown":this.navigateNode(!0);break;case"shiftUp":this.shiftKeySelect(!1,e);break;case"moveUp":case"ctrlUp":case"csUp":this.navigateNode(!1);break;case"home":case"shiftHome":case"ctrlHome":case"csHome":this.navigateRootNode(!0);break;case"end":case"shiftEnd":case"ctrlEnd":case"csEnd":this.navigateRootNode(!1);break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":this.toggleSelect(i,e);break;case"f2":this.allowEditing&&!i.classList.contains("e-disable")&&this.createTextbox(i,e);break;case"ctrlA":if(this.allowMultiSelection){let o=at("."+Bi+":not(."+Jc+")",this.element);this.selectGivenNodes(o)}}})}navigateToFocus(e){let t=this.getFocusedNode().querySelector("."+Xo),i=t.getBoundingClientRect(),s=this.getScrollParent(this.element);if(!m(s)){let o=s.getBoundingClientRect();i.bottom>o.bottom?s.scrollTop+=i.bottom-o.bottom:i.top<o.top&&(s.scrollTop-=o.top-i.top)}this.isVisibleInViewport(t)||t.scrollIntoView(e)}isVisibleInViewport(e){let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}getScrollParent(e){return m(e)?null:e.scrollHeight>e.clientHeight?e:this.getScrollParent(e.parentElement)}shiftKeySelect(e,t){if(this.allowMultiSelection){let i=this.getFocusedNode(),s=e?this.getNextNode(i):this.getPrevNode(i);this.removeHover(),this.setFocusElement(s),this.toggleSelect(s,t,!1),this.navigateToFocus(!e)}else this.navigateNode(e)}checkNode(e){let t=this.getFocusedNode(),i=X("."+Lh,t),s=X(" ."+hm,i).classList.contains(pl);t.classList.contains("e-disable")||0==t.getElementsByClassName("e-checkbox-disabled").length&&this.validateCheckNode(i,s,t,e)}validateCheckNode(e,t,i,s){let r=ae(e,"."+Bi);this.checkActionNodes=[];let o=t?"false":"true";m(o)||e.setAttribute("aria-checked",o);let a=this.getCheckEvent(r,t?"uncheck":"check",s);this.trigger("nodeChecking",a,u=>{u.cancel||this.nodeCheckingAction(e,t,i,u,s)})}nodeCheckingAction(e,t,i,s,r){if(-1===this.checkedElement.indexOf(i.getAttribute("data-uid"))&&(this.checkedElement.push(i.getAttribute("data-uid")),this.autoCheck)){let o=this.getChildNodes(this.treeData,i.getAttribute("data-uid"));null!==o?this.allCheckNode(o,this.checkedElement,null,null,!1):o=null}if(this.changeState(e,t?"uncheck":"check",r,!0),this.autoCheck){let o;this.ensureChildCheckState(i),this.ensureParentCheckState(ae(ae(i,"."+As),"."+Bi)),"check"===s.action?o=!0:"uncheck"===s.action&&(o=!1),this.ensureStateChange(i,o)}this.nodeCheckedEvent(e,t,r)}ensureStateChange(e,t){let i=X("."+As,e),s=e.getAttribute("data-uid"),r=this.fields;if(1===this.dataType&&this.autoCheck){let o=new Nt(this.treeData).executeLocal((new Fi).where(r.parentID,"equal",s,!0));for(let a=0;a<o.length;a++){let u=o[a][this.fields.id]?o[a][this.fields.id].toString():null,p=o[a][this.fields.isChecked]?o[a][this.fields.isChecked].toString():null;if(-1!==this.checkedNodes.indexOf(s)&&-1===this.checkedNodes.indexOf(u)){this.checkedNodes.push(u);let y=this.getChildNodes(this.treeData,u);this.getChildItems(y,t),-1!==this.parentNodeCheck.indexOf(u)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(u),1)}else if(-1===this.checkedNodes.indexOf(s)&&null===i&&-1!==this.checkedNodes.indexOf(u)){if(this.checkedNodes.splice(this.checkedNodes.indexOf(u),1),"true"===p&&this.updateField(this.treeData,this.fields,u,"isChecked",null),-1===this.checkedNodes.indexOf(s)&&null===i||-1!==this.parentNodeCheck.indexOf(u)){let y=this.getChildNodes(this.treeData,u);this.getChildItems(y,t),-1!==this.parentNodeCheck.indexOf(u)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(u),1)}}else{let y=this.getChildNodes(this.treeData,u);this.getChildItems(y,t)}}}else if(1!==this.dataType||this.autoCheck){let o=this.getChildNodes(this.treeData,s);o&&this.childStateChange(o,s,i,t)}else if(t)for(let o=0;o<this.treeData.length;o++){let a=this.treeData[o][this.fields.id]?this.treeData[o][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(a)&&this.checkedNodes.push(a)}else{let o=new Nt(this.treeData).executeLocal((new Fi).where(r.isChecked,"equal",!0,!1));for(let a=0;a<o.length;a++){let u=o[a][this.fields.id]?o[a][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(u)&&this.checkedNodes.splice(this.checkedNodes.indexOf(u),1),this.updateField(this.treeData,this.fields,u,"isChecked",null)}this.checkedNodes=[]}}getChildItems(e,t){for(let i=0;i<e.length;i++){let s=e[i][this.fields.id]?e[i][this.fields.id].toString():null,r=e[i][this.fields.isChecked]?e[i][this.fields.isChecked].toString():null;-1!==this.checkedNodes.indexOf(s)&&!t&&this.checkedNodes.splice(this.checkedNodes.indexOf(s),1),-1===this.checkedNodes.indexOf(s)&&t&&this.checkedNodes.push(s),"true"===r&&!t&&this.updateField(this.treeData,this.fields,s,"isChecked",null);let o=this.getChildNodes(this.treeData,s);o.length>0&&this.getChildItems(o,t)}}childStateChange(e,t,i,s){for(let r=0;r<e.length;r++){let o=e[r][this.fields.id]?e[r][this.fields.id].toString():"",a=e[r][this.fields.isChecked]?e[r][this.fields.isChecked].toString():null;this.autoCheck?-1!==this.checkedNodes.indexOf(t)&&-1===this.checkedNodes.indexOf(o)?(this.checkedNodes.push(o),-1!==this.parentNodeCheck.indexOf(o)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(o),1)):-1===this.checkedNodes.indexOf(t)&&-1!==this.checkedNodes.indexOf(o)&&!s&&(this.checkedNodes.splice(this.checkedNodes.indexOf(o),1),"true"===a&&this.updateField(this.treeData,this.fields,o,"isChecked",null)):this.autoCheck||(s?-1===this.checkedNodes.indexOf(o)&&this.checkedNodes.push(o):(-1!==this.checkedNodes.indexOf(o)&&this.checkedNodes.splice(this.checkedNodes.indexOf(o),1),this.updateField(this.treeData,this.fields,o,"isChecked",null),this.checkedNodes=[]));let u=this.getChildNodes([e[r]],o);u&&this.childStateChange(u,t,i,s)}}allCheckNode(e,t,i,s,r){if(e)for(let o=0;o<e.length;o++){let a=J(this.fields.id,e[o]),u=this.element.querySelector('[data-uid="'+a+'"]');!1!==r&&-1===this.checkedElement.indexOf(a.toString())&&(null===u&&!m(e[o][this.fields.isChecked])&&-1===t.indexOf(a.toString())||0===s||2===i)&&(!1!==e[o][this.fields.isChecked]||2===i?t.push(a.toString()):s=null,s=!1!==e[o][this.fields.isChecked]||2===i?0:null),-1===t.indexOf(a.toString())&&m(i)&&t.push(a.toString());let p=J(this.fields.child.toString(),e[o]);if(!0===J(this.fields.hasChildren,e[o])||p){let E,y=J(this.fields.id,e[o]);E=1===this.dataType?this.getChildNodes(this.treeData,y.toString()):p,E&&(m(r)?this.allCheckNode(E,t,i,s):this.allCheckNode(E,t,i,s,r),s=null)}s=null}}openNode(e,t){let i=this.getFocusedNode(),s=X("div."+vo,i);if(e){if(!s)return;s.classList.contains(Rn)?this.expandAction(i,s,t):this.focusNextNode(i,!0)}else if(s&&s.classList.contains(ma))this.collapseNode(i,s,t);else{let r=ae(ae(i,"."+As),"."+Bi);if(!r)return;r.classList.contains("e-disable")||(this.setFocus(i,r),this.navigateToFocus(!0))}}navigateNode(e){let t=this.getFocusedNode();this.focusNextNode(t,e)}navigateRootNode(e){let t=this.getFocusedNode(),i=e?this.getRootNode():this.getEndNode();i.classList.contains("e-disable")||(this.setFocus(t,i),this.navigateToFocus(e))}getFocusedNode(){let e,t=X("."+Bi+"."+FE,this.element);return m(t)&&(e=X("."+Bi,this.element)),m(t)?m(e)?this.element.firstElementChild:e:t}focusNextNode(e,t){let i=t?this.getNextNode(e):this.getPrevNode(e);if(this.setFocus(e,i),this.navigateToFocus(!t),i.classList.contains("e-disable")){let s=i.lastChild;null==i.previousSibling&&i.classList.contains("e-level-1")?this.focusNextNode(i,!0):null==i.nextSibling&&i.classList.contains("e-node-collapsed")||null==i.nextSibling&&s.classList.contains(Xo)?this.focusNextNode(i,!1):this.focusNextNode(i,t)}}getNextNode(e){let i,t=this.liList.indexOf(e);do{if(t++,i=this.liList[t],m(i))return e}while(!zn(i));return i}getPrevNode(e){let i,t=this.liList.indexOf(e);do{if(t--,i=this.liList[t],m(i))return e}while(!zn(i));return i}getRootNode(){let t,e=0;do{t=this.liList[e],e++}while(!zn(t));return t}getEndNode(){let t,e=this.liList.length-1;do{t=this.liList[e],e--}while(!zn(t));return t}setFocus(e,t){Y([e],[Vp,FE]),t.classList.contains("e-disable")||(j([t],[Vp,FE]),this.updateIdAttr(e,t))}updateIdAttr(e,t){this.element.removeAttribute("aria-activedescendant"),e&&e.removeAttribute("id"),t.setAttribute("id",this.element.id+"_active"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active")}focusIn(){this.mouseDownStatus||j([this.getFocusedNode()],Vp),this.mouseDownStatus=!1}focusOut(){Y([this.getFocusedNode()],Vp)}onMouseOver(e){let t=e.target,i=t.classList,s=ae(t,"."+Bi);!s||i.contains(As)||i.contains(Bi)?this.removeHover():s&&!s.classList.contains("e-disable")&&this.setHover(s)}setHover(e){e.classList.contains(Vp)||(this.removeHover(),j([e],Vp))}onMouseLeave(e){this.removeHover()}removeHover(){let e=at("."+Vp,this.element);e&&e.length&&Y(e,Vp)}getNodeData(e,t){if(!m(e)&&e.classList.contains(Bi)&&!m(ae(e,"."+SH))&&ae(e,"."+SH).classList.contains(Hd)){let i=e.getAttribute("data-uid"),s=this.getText(e,t),r=ae(e.parentNode,"."+Bi),o=r?r.getAttribute("data-uid"):null,a=e.classList.contains(Jc),u="true"===e.getAttribute("aria-expanded"),p=null!==e.getAttribute("aria-expanded")||null!=(X("."+Rn,e)||X("."+ma,e)),y=null;return this.showCheckBox&&(y=X("."+Lh,e).getAttribute("aria-checked")),{id:i,text:s,parentID:o,selected:a,expanded:u,isChecked:y,hasChildren:p}}return{id:"",text:"",parentID:"",selected:!1,expanded:!1,isChecked:"",hasChildren:!1}}getText(e,t){if(t){let i=this.getNodeObject(e.getAttribute("data-uid")),s=parseFloat(e.getAttribute("aria-level"));return J(this.getFields(this.fields,s,1).text,i)}return X("."+Ob,e).textContent}getExpandEvent(e,t){let i=this.getNodeData(e);return{cancel:!1,isInteracted:!m(t),node:e,nodeData:i,event:t}}renderNodeTemplate(e,t,i){let s=this.nodeTemplateFn(e,this,"nodeTemplate"+i,this.element.id+"nodeTemplate",this.isStringTemplate,void 0,t);s&&(s=Array.prototype.slice.call(s),Pi(s,t))}destroyTemplate(e){this.clearTemplate(["nodeTemplate"+e.getAttribute("data-uid")])}reRenderNodes(){this.updateListProp(this.fields),Q.isIE?(this.ulElement=this.element.querySelector(".e-list-parent.e-ul"),this.ulElement.parentElement.removeChild(this.ulElement)):this.element.innerHTML="",m(this.nodeTemplateFn)||this.clearTemplate(),this.setTouchClass(),this.setProperties({selectedNodes:[],checkedNodes:[],expandedNodes:[]},!0),this.checkedElement=[],this.isLoaded=!1,this.setDataBinding(!0)}setCssClass(e,t){!m(e)&&""!==e&&Y([this.element],e.split(" ")),!m(t)&&""!==t&&j([this.element],t.split(" "))}editingHandler(e){let t=e.target;if(!(!t||t.classList.contains(Hd)||t.classList.contains(As)||t.classList.contains(Bi)||t.classList.contains(vo)||t.classList.contains(lk)||t.classList.contains(_H))){let i=ae(t,"."+Bi);this.createTextbox(i,e)}}createTextbox(e,t){let i=X("."+ck,this.element);i&&i.blur();let s=X("."+Ob,e);this.updateOldText(e);let r=this.createElement("input",{className:ck,attrs:{value:this.oldText}}),o=this.getEditEvent(e,null,r.outerHTML);this.trigger("nodeEditing",o,a=>{if(!a.cancel){let p="width:"+(s.offsetWidth+5)+"px";j([e],qL),m(this.nodeTemplateFn)||this.destroyTemplate(e),s.innerHTML=o.innerHtml;let y=X("."+ck,s);this.inputObj=ft.createInput({element:y,properties:{enableRtl:this.enableRtl}},this.createElement),this.inputObj.container.setAttribute("style",p),y.focus(),y.setSelectionRange(0,y.value.length),this.wireInputEvents(y)}})}updateOldText(e){let t=e.getAttribute("data-uid");this.editData=this.getNodeObject(t);let i=parseFloat(e.getAttribute("aria-level"));this.editFields=this.getFields(this.fields,i,1),this.oldText=J(this.editFields.text,this.editData)}inputFocusOut(e){if(!X("."+ck,this.element))return;let t=e.target,i=t.value,s=ae(t,"."+Ob),r=ae(t,"."+Bi);ye(this.inputObj.container),this.fields.dataSource instanceof Nt&&!this.isOffline?this.crudOperation("update",null,r,i,null,null,!0):this.appendNewText(r,s,i,!0)}appendNewText(e,t,i,s){let r=this.getEditEvent(e,i,null);this.trigger("nodeEdited",r,o=>{this.updateText(e,t,i=o.cancel?o.oldText:o.newText,s),o.oldText!==i&&this.triggerEvent()})}updateText(e,t,i,s){let r=pi(this.editFields.text,i,this.editData);if(m(this.nodeTemplateFn))t.innerText=i;else{t.innerText="";let o=e.getAttribute("data-uid");this.renderNodeTemplate(r,t,o),this.renderReactTemplates()}s&&(Y([e],qL),t.focus()),this.allowTextWrap&&this.calculateWrap(e)}getElement(e){return m(e)?null:"string"==typeof e?this.element.querySelector('[data-uid="'+e+'"]'):"object"==typeof e?fS(e):null}getId(e){return m(e)?null:"string"==typeof e?e:"object"==typeof e?fS(e).getAttribute("data-uid"):null}getEditEvent(e,t,i){return{cancel:!1,newText:t,node:e,nodeData:this.getNodeData(e),oldText:this.oldText,innerHtml:i}}getNodeObject(e){let t;if(m(e))return t;if(1!==this.dataType)return this.getChildNodeObject(this.treeData,this.fields,e);for(let i=0,s=this.treeData.length;i<s;i++){let r=J(this.fields.id,this.treeData[i]);if(!m(this.treeData[i])&&!m(r)&&r.toString()===e)return this.treeData[i]}return t}getChildNodeObject(e,t,i){let s;if(m(e))return s;for(let r=0,o=e.length;r<o;r++){let a=J(t.id,e[r]);if(e[r]&&a&&a.toString()===i)return e[r];if("string"!=typeof t.child||m(J(t.child,e[r]))){if(this.fields.dataSource instanceof Nt&&!m(J("child",e[r]))&&(s=this.getChildNodeObject(J("child",e[r]),this.getChildMapper(t),i),void 0!==s))break}else{let u=J(t.child,e[r]);if(s=this.getChildNodeObject(u,this.getChildMapper(t),i),void 0!==s)break}}return s}setDragAndDrop(e){e&&!this.disabled?this.initializeDrag():this.destroyDrag()}initializeDrag(){let e,t=this;this.dragObj=new Us(this.element,{enableTailMode:!0,enableAutoScroll:!0,dragArea:this.dragArea,dragTarget:"."+Xo,helper:i=>{this.dragTarget=i.sender.target;let s=ae(this.dragTarget,"."+Hd),r=ae(this.dragTarget,"."+Xo);if(this.dragLi=ae(this.dragTarget,"."+Bi),this.fullRowSelect&&!r&&this.dragTarget.classList.contains(cm)&&(r=this.dragTarget.nextElementSibling),!this.dragTarget||!i.element.isSameNode(s)||!r||this.dragTarget.classList.contains(Hd)||this.dragTarget.classList.contains(As)||this.dragTarget.classList.contains(Bi)||this.dragLi.classList.contains("e-disable"))return!1;let o=r.cloneNode(!0);if(m(X("div."+vo,o))){let p=t.createElement("div",{className:vo+" "+Rn});o.insertBefore(p,o.children[0])}e=t.createElement("div",{className:"e-drag-item "+Hd+" "+this.cssClass+" "+(this.enableRtl?"e-rtl":"")}),e.appendChild(o);let u=this.selectedNodes.length;if(u>1&&this.allowMultiSelection&&this.dragLi.classList.contains(Jc)){let p=t.createElement("span",{className:"e-drop-count",innerHTML:""+u});e.appendChild(p)}return document.body.appendChild(e),document.body.style.cursor="",this.dragData=this.getNodeData(this.dragLi),e},dragStart:i=>{j([this.element],$L);let r,s=ae(i.target,".e-list-item");s&&(r=parseInt(s.getAttribute("aria-level"),10));let o=this.getDragEvent(i.event,this,null,i.target,null,e,r);o.draggedNode.classList.contains(qL)?(this.dragObj.intDestroy(i.event),this.dragCancelAction(e)):this.trigger("nodeDragStart",o,a=>{a.cancel?(this.dragObj.intDestroy(i.event),this.dragCancelAction(e)):this.dragStartAction=!0})},drag:i=>{this.dragObj.setProperties({cursorAt:{top:!m(i.event.targetTouches)||Q.isDevice?60:-20}}),this.dragAction(i,e)},dragStop:i=>{Y([this.element],$L),this.removeVirtualEle();let s=i.target,o=ae(s,"."+TH);(!s||!o)&&(ye(i.helper),document.body.style.cursor="");let u,a=ae(s,".e-list-item");a&&(u=parseInt(a.getAttribute("aria-level"),10));let p=this.getDragEvent(i.event,this,s,s,null,i.helper,u);p.preventTargetExpand=!1,this.trigger("nodeDragStop",p,y=>{this.dragParent=y.draggedParentNode,this.preventExpand=y.preventTargetExpand,y.cancel&&(i.helper.parentNode&&ye(i.helper),document.body.style.cursor=""),this.dragStartAction=!1})}}),this.dropObj=new Sp(this.element,{out:i=>{!m(i)&&!i.target.classList.contains(EI)&&(document.body.style.cursor="not-allowed")},over:i=>{document.body.style.cursor=""},drop:i=>{this.dropAction(i)}})}dragCancelAction(e){ye(e),Y([this.element],$L),this.dragStartAction=!1}dragAction(e,t){let i=ae(e.target,"."+TH),s=ae(e.target,"."+Xo),r=X("div."+vo,t);Y([r],[hk,wI,GL,YL]),this.removeVirtualEle(),document.body.style.cursor="";let o=e.target.classList;if(this.fullRowSelect&&!s&&!m(o)&&o.contains(cm)&&(s=e.target.nextElementSibling),i){let y=ae(e.target,"."+Bi),E=ae(e.target,"."+Lh),_=ae(e.target,"."+ma),D=ae(e.target,"."+Rn);if(!i.classList.contains(Hd)||s&&!y.isSameNode(this.dragLi)&&!this.isDescendant(this.dragLi,y))if(this.hasTemplate&&y){let L=X(this.fullRowSelect?"."+cm:"."+Xo,y);e&&!D&&!_&&e.event.offsetY<7&&!E||D&&e.event.offsetY<5||_&&e.event.offsetX<3?this.appendIndicator(y,r,this.fullRowSelect?1:0):e&&!D&&!_&&!E&&L&&e.event.offsetY>L.offsetHeight-10||D&&e.event.offsetY>19||_&&e.event.offsetX>19?this.appendIndicator(y,r,this.fullRowSelect?2:1):j([r],hk)}else y&&e&&!D&&!_&&e.event.offsetY<7&&!E||D&&e.event.offsetY<5||_&&e.event.offsetX<3?this.appendIndicator(y,r,this.fullRowSelect?1:0):y&&e&&!D&&!_&&e.target.offsetHeight>0&&e.event.offsetY>e.target.offsetHeight-10&&!E||D&&e.event.offsetY>19||_&&e.event.offsetX>19?this.appendIndicator(y,r,this.fullRowSelect?2:1):j([r],hk);else"LI"!==e.target.nodeName||y.isSameNode(this.dragLi)||this.isDescendant(this.dragLi,y)?e.target.classList.contains(EI)?j([r],wI):j([r],GL):(j([r],wI),this.renderVirtualEle(e))}else j([r],YL),document.body.style.cursor="not-allowed";let u,a=ae(e.target,".e-list-item");a&&(u=parseInt(a.getAttribute("aria-level"),10));let p=this.getDragEvent(e.event,this,e.target,e.target,null,t,u);p.dropIndicator&&Y([r],p.dropIndicator),this.trigger("nodeDragging",p),p.dropIndicator&&j([r],p.dropIndicator)}appendIndicator(e,t,i){j([t],wI);let s=this.createElement("div",{className:EI});e.insertBefore(s,e.children[i])}dropAction(e){let s,r,a,t=e.event.offsetY,i=e.target,o=!1;a=e.dragData.draggable;for(let u=0;u<a.ej2_instances.length;u++)if(a.ej2_instances[u]instanceof zL){s=a.ej2_instances[u];break}if(s&&s.dragTarget){let p=ae(s.dragTarget,"."+Bi),y=ae(i,"."+Bi);if(null==y&&i.classList.contains(Hd)&&(y=i.firstElementChild),ye(e.droppedElement),document.body.style.cursor="",!y||y.isSameNode(p)||this.isDescendant(p,y))return void(this.fields.dataSource instanceof Nt||(this.preventExpand=!1));if(s.allowMultiSelection&&p.classList.contains(Jc)){let E=at("."+Jc,s.element);if(e.target.offsetHeight<=33&&t>e.target.offsetHeight-10&&t>6)for(let _=E.length-1;_>=0;_--)y.isSameNode(E[_])||this.isDescendant(E[_],y)||this.appendNode(i,E[_],y,e,s,t);else for(let _=0;_<E.length;_++)y.isSameNode(E[_])||this.isDescendant(E[_],y)||this.appendNode(i,E[_],y,e,s,t)}else this.appendNode(i,p,y,e,s,t);r=parseInt(p.getAttribute("aria-level"),10),o=!0}this.fields.dataSource instanceof Nt||(this.preventExpand=!1),this.trigger("nodeDropped",this.getDragEvent(e.event,s,i,e.target,e.dragData.draggedElement,null,r,o)),s.element.id!==this.element.id&&s.triggerEvent(),this.triggerEvent()}appendNode(e,t,i,s,r,o){let a=ae(e,"."+Lh),u=ae(s.target,"."+ma),p=ae(s.target,"."+Rn);t.classList.contains("e-disable")||a||!(p&&s.event.offsetY<5||u&&s.event.offsetX<3||p&&s.event.offsetY>19||u&&s.event.offsetX>19||!p&&!u)?this.dropAsChildNode(t,i,r,null,s,o,!0):"LI"===e.nodeName?this.dropAsSiblingNode(t,i,s,r):e.firstElementChild&&e.classList.contains(Hd)?"UL"===e.firstElementChild.nodeName&&this.dropAsSiblingNode(t,i,s,r):e.classList.contains("e-icon-collapsible")||e.classList.contains("e-icon-expandable")?this.dropAsSiblingNode(t,i,s,r):this.dropAsChildNode(t,i,r,null,s,o)}dropAsSiblingNode(e,t,i,s){let u,r=ae(t,"."+As),o=ae(e,"."+As),a=ae(o,"."+Bi);if(i.target.offsetHeight>0&&i.event.offsetY>i.target.offsetHeight-2?u=!1:i.event.offsetY<2?u=!0:(i.target.classList.contains("e-icon-expandable")||i.target.classList.contains("e-icon-collapsible"))&&(i.event.offsetY<5||i.event.offsetX<3?u=!0:(i.event.offsetY>15||i.event.offsetX>17)&&(u=!1)),i.target.classList.contains("e-icon-expandable")||i.target.classList.contains("e-icon-collapsible")){let p=i.target.closest("li");r.insertBefore(e,u?p:p.nextElementSibling)}else r.insertBefore(e,u?i.target:i.target.nextElementSibling);this.moveData(e,t,r,u,s),this.updateElement(o,a),this.updateAriaLevel(e),s.element.id===this.element.id?this.updateList():(s.updateInstance(),this.updateInstance())}dropAsChildNode(e,t,i,s,r,o,a){let E,u=ae(e,"."+As),p=ae(u,"."+Bi),y=ae(t,"."+As);if(r&&r.target&&(E=X(this.fullRowSelect?"."+cm:"."+Xo,t)),r&&o<7&&!a)y.insertBefore(e,t),this.moveData(e,t,y,!0,i);else if(r&&r.target.offsetHeight>0&&o>r.target.offsetHeight-10&&!a&&!this.hasTemplate)y.insertBefore(e,t.nextElementSibling),this.moveData(e,t,y,!1,i);else if(this.hasTemplate&&E&&o>E.offsetHeight-10&&!a)y.insertBefore(e,t.nextElementSibling),this.moveData(e,t,y,!1,i);else{let _=this.expandParent(t),D=_.childNodes[s];_.insertBefore(e,D),this.moveData(e,D,_,!0,i)}this.updateElement(u,p),this.updateAriaLevel(e),i.element.id===this.element.id?this.updateList():(i.updateInstance(),this.updateInstance())}moveData(e,t,i,s,r){let o=ae(i,"."+Bi),a=this.getId(e),u=r.updateChildField(r.treeData,r.fields,a,null,null,!0),p=this.getId(t),y=this.getDataPos(this.treeData,this.fields,p),E=this.getId(o);if(1===this.dataType){this.updateField(this.treeData,this.fields,E,"hasChildren",!0);let _=m(y)?this.treeData.length:s?y:y+1;if(m(E)&&!this.hasPid)delete u[0][this.fields.parentID];else{let D=this.isNumberTypeId?parseFloat(E):E;pi(this.fields.parentID,D,u[0])}if(this.treeData.splice(_,0,u[0]),r.element.id!==this.element.id){let D=r.removeChildNodes(a);_++;for(let L=0,V=D.length;L<V;L++)this.treeData.splice(_,0,D[L]),_++;r.groupedData=r.getGroupedData(r.treeData,r.fields.parentID)}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.addChildData(this.treeData,this.fields,E,u,s?y:y+1)}expandParent(e){let t=X("div."+vo,e);t&&t.classList.contains(Rn)&&!0!==this.preventExpand&&this.expandAction(e,t,null);let i=X("."+As,e);if(!0===this.preventExpand&&!i&&t&&this.renderChildNodes(e),i=X("."+As,e),!m(i)&&!0===this.preventExpand&&(i.style.display="none"),!m(i)&&!1===this.preventExpand&&(i.style.display="block"),m(i)&&!0===this.preventExpand){m(t)&&ds.generateIcon(this.createElement,e,Rn,this.listBaseOption);let s=X("div."+vo,e);s&&s.classList.add("e-icon-expandable"),i=ds.generateUL(this.createElement,[],null,this.listBaseOption),e.appendChild(i),s?Y([s],ma):ds.generateIcon(this.createElement,e,Rn,this.listBaseOption),e.setAttribute("aria-expanded","false"),i.style.display="none"}if(m(i)){this.trigger("nodeExpanding",this.getExpandEvent(e,null)),m(t)&&ds.generateIcon(this.createElement,e,ma,this.listBaseOption);let s=X("div."+vo,e);s||(ds.generateIcon(this.createElement,e,ma,this.listBaseOption),s=X("div."+vo,e)),Y([s],Rn),i=ds.generateUL(this.createElement,[],null,this.listBaseOption),e.appendChild(i),this.addExpand(e),this.trigger("nodeExpanded",this.getExpandEvent(e,null))}return i}updateElement(e,t){if(t&&0===e.childElementCount){let i=X("div."+vo,t);ye(e),ye(i);let s=this.getId(t);this.updateField(this.treeData,this.fields,s,"hasChildren",!1),this.removeExpand(t,!0)}}updateAriaLevel(e){let t=this.parents(e,"."+As).length;e.setAttribute("aria-level",""+t),this.updateChildAriaLevel(X("."+As,e),t+1)}updateChildAriaLevel(e,t){if(!m(e)){let i=e.childNodes;for(let s=0,r=i.length;s<r;s++){let o=i[s];o.setAttribute("aria-level",""+t),this.updateChildAriaLevel(X("."+As,o),t+1)}}}renderVirtualEle(e){let t;e.event.offsetY>e.target.offsetHeight-2?t=!1:e.event.offsetY<2&&(t=!0);let i=this.createElement("div",{className:EI});e.target.insertBefore(i,e.target.children[this.fullRowSelect?t?1:2:t?0:1])}removeVirtualEle(){let e=X("."+EI);e&&ye(e)}destroyDrag(){this.dragObj&&this.dropObj&&(this.dragObj.destroy(),this.dropObj.destroy())}getDragEvent(e,t,i,s,r,o,a,u){let p=i?ae(i,"."+Bi):null,y=p?this.getNodeData(p):null,E=t?t.dragLi:r,_=t?t.dragData:null,D=i?this.parents(i,"."+Bi):null,L=t.dragLi.parentElement,V=t.dragLi?ae(L,"."+Bi):null,H=null,se=null,_e=[wI,hk,GL,YL],re=null,Ae=!0===u?E:p,gt=Ae?ae(Ae,".e-list-parent"):null,ot=0,ri=null;if(V=t.dragLi&&null===V?ae(L,"."+Hd):V,V=!0===u?this.dragParent:V,o)for(;ot<4;){if(X("."+vo,o).classList.contains(_e[ot])){re=_e[ot];break}ot++}if(gt){let jt=0;for(ot=0;ot<gt.childElementCount;ot++){if(jt=!0!==u&&gt.children[ot]===E&&p!==E?++jt:jt,!0!==u&&gt.children[ot].classList.contains("e-hover")){se=e.offsetY>=23?ot+1:ot;break}if(gt.children[ot]===Ae){se=ot;break}}se=0!==jt?--se:se,ri="e-drop-in"==re?"Inside":e.offsetY<7?"Before":"After"}if(i&&(H=0===D.length?null:i.classList.contains(Bi)?D[0]:D[1]),p===E&&(H=p),i&&s.offsetHeight<=33&&e.offsetY<s.offsetHeight-10&&e.offsetY>6&&(H=p,!0!==u)){a=++a;let jt=H?X(".e-list-parent",H):null;if(se=jt?jt.children.length:0,!(this.fields.dataSource instanceof Nt)&&null===jt&&H){let Ai=H.hasAttribute("data-uid")?this.getChildNodes(this.fields.dataSource,H.getAttribute("data-uid").toString()):null;se=Ai?Ai.length:0}}return{cancel:!1,clonedNode:o,event:e,draggedNode:E,draggedNodeData:_,droppedNode:p,droppedNodeData:y,dropIndex:se,dropLevel:a,draggedParentNode:V,dropTarget:H,dropIndicator:re,target:s,position:ri}}addFullRow(e){let t=this.liList.length;if(e)for(let i=0;i<t;i++)this.createFullRow(this.liList[i]);else for(let i=0;i<t;i++)ye(X("."+cm,this.liList[i]))}createFullRow(e){let t=this.createElement("div",{className:cm});e.insertBefore(t,e.childNodes[0])}addMultiSelect(e){if(e){let t=at("."+Bi+':not([aria-selected="true"])',this.element);for(let i of t)i.setAttribute("aria-selected","false")}else{let t=at("."+Bi+'[aria-selected="false"]',this.element);for(let i of t)i.removeAttribute("aria-selected")}}collapseByLevel(e,t,i){if(t>0&&!m(e)){let s=this.getVisibleNodes(i,e.childNodes);for(let r=0,o=s.length;r<o;r++){let a=s[r],u=X("."+ma,X("."+Xo,a));m(u)||this.collapseNode(a,u,null),this.collapseByLevel(X("."+As,a),t-1,i)}}}collapseAllNodes(e){let t=this.getVisibleNodes(e,at("."+ma,this.element));for(let i=0,s=t.length;i<s;i++){let r=t[i],o=ae(r,"."+Bi);this.collapseNode(o,r,null)}}expandByLevel(e,t,i){if(t>0&&!m(e)){let s=this.getVisibleNodes(i,e.childNodes);for(let r=0,o=s.length;r<o;r++){let a=s[r],u=X("."+Rn,X("."+Xo,a));m(u)||this.expandAction(a,u,null),this.expandByLevel(X("."+As,a),t-1,i)}}}expandAllNodes(e){let t=this.getVisibleNodes(e,at("."+Rn,this.element));for(let i=0,s=t.length;i<s;i++){let r=t[i],o=ae(r,"."+Bi);this.expandAction(o,r,null,!0)}}getVisibleNodes(e,t){let i=Array.prototype.slice.call(t);if(e)for(let s=0;s<i.length;s++)zn(i[s])||(i.splice(s,1),s--);return i}removeNode(e){let t=ae(e,"."+As),i=ae(t,"."+Bi);m(this.nodeTemplateFn)||this.destroyTemplate(e),ye(e),this.updateElement(t,i),this.removeData(e)}updateInstance(){this.updateList(),this.updateSelectedNodes(),this.updateExpandedNodes()}updateList(){this.liList=Array.prototype.slice.call(at("."+Bi,this.element))}updateSelectedNodes(){this.setProperties({selectedNodes:[]},!0);let e=at("."+Jc,this.element);this.selectGivenNodes(e)}updateExpandedNodes(){this.setProperties({expandedNodes:[]},!0);let e=at('[aria-expanded="true"]',this.element);for(let t=0,i=e.length;t<i;t++)this.addExpand(e[t])}removeData(e){if(1===this.dataType){let t=new Nt(this.treeData),i=this.getId(e),s={},r=this.isNumberTypeId?parseFloat(i):i;s[this.fields.id]=r,t.remove(this.fields.id,s),this.removeChildNodes(i)}else{let t=this.getId(e);this.updateChildField(this.treeData,this.fields,t,null,null,!0)}}removeChildNodes(e){let t=this.getChildGroup(this.groupedData,e,!1),i=[];if(t)for(let s=0,r=t.length;s<r;s++){let o=new Nt(this.treeData),a=J(this.fields.id,t[s]).toString(),u={},p=this.isNumberTypeId?parseFloat(a):a;u[this.fields.id]=p;let y=o.remove(this.fields.id,u);i.push(y[0]),this.removeChildNodes(a)}return i}doGivenAction(e,t,i){for(let s=0,r=e.length;s<r;s++){let o=this.getElement(e[s]);if(m(o))continue;let a=X("."+t,X("."+Xo,o));m(a)||(i?this.expandAction(o,a,null):this.collapseNode(o,a,null))}}addGivenNodes(e,t,i,s,r){if(0===e.length)return;let o=this.getSortedData(e),a=t?parseFloat(t.getAttribute("aria-level"))+1:1;s&&this.updateMapper(a);let p,u=ds.createListItemFromJson(this.createElement,o,this.listBaseOption,a);p=r||(t?this.expandParent(t):X("."+As,this.element));let y=p.childNodes[i];for(let _=0;_<u.length;_++)p.insertBefore(u[_],y);let E=this.getId(t);if(1===this.dataType){this.updateField(this.treeData,this.fields,E,"hasChildren",!0);let _=this.getId(y),D=m(_)?this.treeData.length:this.getDataPos(this.treeData,this.fields,_);for(let L=0;L<e.length;L++){if(!m(E)){let V=this.isNumberTypeId?parseFloat(E):E;pi(this.fields.parentID,V,e[L])}this.treeData.splice(D,0,e[L]),D++}}else this.addChildData(this.treeData,this.fields,E,e,i);this.finalizeNode(p)}updateMapper(e){let t=1===e?this.fields:this.getChildFields(this.fields,e-1,1);this.updateListProp(t)}updateListProp(e){let t=this.getActualProperties(e);this.listBaseOption.fields=t,this.listBaseOption.fields.url=t.hasOwnProperty("navigateUrl")?t.navigateUrl:"navigateUrl"}getDataPos(e,t,i){let s=null;for(let r=0,o=e.length;r<o;r++){let a=J(t.id,e[r]);if(e[r]&&a&&a.toString()===i)return r;if("string"!=typeof t.child||m(J(t.child,e[r]))){if(this.fields.dataSource instanceof Nt&&!m(J("child",e[r]))){let u=J("child",e[r]);if(s=this.getDataPos(u,this.getChildMapper(t),i),null!==s)break}}else{let u=J(t.child,e[r]);if(s=this.getDataPos(u,this.getChildMapper(t),i),null!==s)break}}return s}addChildData(e,t,i,s,r){let o;if(m(i)){r=m(r)?e.length:r;for(let a=0,u=s.length;a<u;a++)e.splice(r,0,s[a]),r++;return o}for(let a=0,u=e.length;a<u;a++){let p=J(t.id,e[a]);if(e[a]&&p&&p.toString()===i){if("string"==typeof t.child&&e[a].hasOwnProperty(t.child)&&null!==e[a][t.child]||this.fields.dataSource instanceof Nt&&e[a].hasOwnProperty("child")){let E=J("string"==typeof t.child?t.child:"child",e[a]);m(E)&&(E=[]),r=m(r)?E.length:r;for(let _=0,D=s.length;_<D;_++)E.splice(r,0,s[_]),r++}else e[a]["string"==typeof t.child?t.child:"child"]=s;return!0}if("string"!=typeof t.child||m(J(t.child,e[a]))){if(this.fields.dataSource instanceof Nt&&!m(J("child",e[a]))){let y=J("child",e[a]);if(o=this.addChildData(y,this.getChildMapper(t),i,s,r),void 0!==o)break}}else{let y=J(t.child,e[a]);if(o=this.addChildData(y,this.getChildMapper(t),i,s,r),void 0!==o)break}}return o}doDisableAction(e){let t=this.nodeType(e),i=this.checkValidId(t);this.validArr=[];for(let s=0,r=i.length;s<r;s++){let o=i[s][this.fields.id].toString();o&&-1===this.disableNode.indexOf(o)&&this.disableNode.push(o);let a=this.getElement(o);a&&(a.setAttribute("aria-disabled","true"),j([a],DH))}}doEnableAction(e){let t=this.nodeType(e);for(let i=0,s=t.length;i<s;i++){let r=this.getElement(t[i]),o=t[i];o&&-1!==this.disableNode.indexOf(o)&&this.disableNode.splice(this.disableNode.indexOf(o),1),r&&(r.removeAttribute("aria-disabled"),Y([r],DH))}}nodeType(e){let t=[];for(let i=0,s=e.length;i<s;i++){let r;"string"==typeof e[i]?r=e[i]?e[i].toString():null:"object"==typeof e[i]&&(r=e[i]?e[i].getAttribute("data-uid").toString():null),-1==t.indexOf(r)&&t.push(r)}return t}checkValidId(e){if(1===this.dataType)this.validArr=this.treeData.filter(t=>-1!==e.indexOf(t[this.fields.id]?t[this.fields.id].toString():null));else if(2===this.dataType)for(let t=0;t<this.treeData.length;t++){let i=this.treeData[t][this.fields.id]?this.treeData[t][this.fields.id].toString():null;-1!==e.indexOf(i)&&this.validArr.push(this.treeData[t]);let s=J(this.fields.child.toString(),this.treeData[t]);s&&this.filterNestedChild(s,e)}return this.validArr}filterNestedChild(e,t){for(let i=0;i<e.length;i++){let s=e[i][this.fields.id]?e[i][this.fields.id].toString():null;-1!==t.indexOf(s)&&this.validArr.push(e[i]);let r=J(this.fields.child.toString(),e[i]);r&&this.filterNestedChild(r,t)}}setTouchClass(){let e=ae(this.element,".e-bigger");this.touchClass=m(e)?"":"e-small"}updatePersistProp(){this.removeField(this.treeData,this.fields,["selected","expanded"]);let e=this.selectedNodes;for(let i=0,s=e.length;i<s;i++)this.updateField(this.treeData,this.fields,e[i],"selected",!0);let t=this.expandedNodes;for(let i=0,s=t.length;i<s;i++)this.updateField(this.treeData,this.fields,t[i],"expanded",!0);if(this.showCheckBox){this.removeField(this.treeData,this.fields,["isChecked"]);let i=this.checkedNodes;for(let s=0,r=i.length;s<r;s++)this.updateField(this.treeData,this.fields,i[s],"isChecked",!0)}}removeField(e,t,i){if(!m(e)&&!m(t))for(let s=0,r=e.length;s<r;s++){for(let o=0;o<i.length;o++){let a=this.getMapperProp(t,i[o]);m(e[s][a])||delete e[s][a]}"string"!=typeof t.child||m(J(t.child,e[s]))?this.fields.dataSource instanceof Nt&&!m(J("child",e[s]))&&this.removeField(J("child",e[s]),this.getChildMapper(t),i):this.removeField(J(t.child,e[s]),this.getChildMapper(t),i)}}getMapperProp(e,t){switch(t){case"selected":return m(e.selected)?"selected":e.selected;case"expanded":return m(e.expanded)?"expanded":e.expanded;case"isChecked":return m(e.isChecked)?"isChecked":e.isChecked;case"hasChildren":return m(e.hasChildren)?"hasChildren":e.hasChildren;default:return t}}updateField(e,t,i,s,r){if(!m(i))if(1===this.dataType){let o=this.isNumberTypeId?parseFloat(i):i,a=new Nt(this.treeData).executeLocal((new Fi).where(t.id,"equal",o,!1));pi(this.getMapperProp(t,s),r,a[0])}else this.updateChildField(e,t,i,s,r)}updateChildField(e,t,i,s,r,o){let a;if(m(e))return a;for(let u=0,p=e.length;u<p;u++){let y=J(t.id,e[u]);if(e[u]&&y&&y.toString()===i)return o?a=e.splice(u,1):(pi(this.getMapperProp(t,s),r,e[u]),a=[]),a;if("string"!=typeof t.child||m(J(t.child,e[u]))){if(this.fields.dataSource instanceof Nt&&!m(J("child",e[u]))){let E=J("child",e[u]);if(a=this.updateChildField(E,this.getChildMapper(t),i,s,r,o),void 0!==a)break}}else{let E=J(t.child,e[u]);if(a=this.updateChildField(E,this.getChildMapper(t),i,s,r,o),void 0!==a)break}}return a}triggerEvent(){this.renderReactTemplates(),this.trigger("dataSourceChanged",{data:this.treeData})}wireInputEvents(e){O.add(e,"blur",this.inputFocusOut,this)}wireEditingEvents(e){if(e&&!this.disabled){let t=this;this.touchEditObj=new Sn(this.element,{tap:i=>{this.isDoubleTapped(i)&&2===i.tapCount&&(i.originalEvent.preventDefault(),t.editingHandler(i.originalEvent))}})}else this.touchEditObj&&this.touchEditObj.destroy()}wireClickEvent(e){if(e){let t=this;this.touchClickObj=new Sn(this.element,{tap:i=>{t.clickHandler(i)}})}else this.touchClickObj&&this.touchClickObj.destroy()}wireExpandOnEvent(e){if(e){let t=this;this.touchExpandObj=new Sn(this.element,{tap:i=>{("Click"===this.expandOnType||"DblClick"===this.expandOnType&&this.isDoubleTapped(i)&&2===i.tapCount)&&3!==i.originalEvent.which&&t.expandHandler(i)}})}else this.touchExpandObj&&this.touchExpandObj.destroy()}mouseDownHandler(e){this.mouseDownStatus=!0,(e.shiftKey||e.ctrlKey)&&e.preventDefault(),e.ctrlKey&&this.allowMultiSelection&&O.add(this.element,"contextmenu",this.preventContextMenu,this)}preventContextMenu(e){e.preventDefault()}wireEvents(){O.add(this.element,"mousedown",this.mouseDownHandler,this),this.wireClickEvent(!0),"None"!==this.expandOnType&&this.wireExpandOnEvent(!0),O.add(this.element,"focus",this.focusIn,this),O.add(this.element,"blur",this.focusOut,this),O.add(this.element,"mouseover",this.onMouseOver,this),O.add(this.element,"mouseout",this.onMouseLeave,this),this.keyboardModule=new Pn(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}unWireEvents(){O.remove(this.element,"mousedown",this.mouseDownHandler),this.wireClickEvent(!1),this.wireExpandOnEvent(!1),O.remove(this.element,"focus",this.focusIn),O.remove(this.element,"blur",this.focusOut),O.remove(this.element,"mouseover",this.onMouseOver),O.remove(this.element,"mouseout",this.onMouseLeave),this.disabled||this.keyboardModule.destroy()}parents(e,t){let i=[],s=e.parentNode;for(;!m(s);)vg(s,t)&&i.push(s),s=s.parentNode;return i}isDoubleTapped(e){let i,t=e.originalEvent.target;return t&&e.tapCount&&(1===e.tapCount?this.firstTap=ae(t,"."+Bi):2===e.tapCount&&(i=ae(t,"."+Bi))),this.firstTap===i}isDescendant(e,t){let i=t.parentNode;for(;!m(i);){if(i===e)return!0;i=i.parentNode}return!1}showSpinner(e){j([e],WL),Zc({target:e,width:Q.isDevice?16:14},this.createElement),Bl(e)}hideSpinner(e){hl(e),e.innerHTML="",Y([e],WL)}setCheckedNodes(e){e=JSON.parse(JSON.stringify(e)),this.uncheckAll(this.checkedNodes),this.setIndeterminate(e),e.length>0&&this.checkAll(e)}setValidCheckedNode(e){if(1===this.dataType){let t=this.fields,i=new Nt(this.treeData).executeLocal((new Fi).where(t.id,"equal",e,!0));if(i[0]&&(this.setChildCheckState(i,e,i[0]),this.autoCheck)){let s=i[0][this.fields.parentID]?i[0][this.fields.parentID].toString():null,r=this.getChildNodes(this.treeData,s),o=0;for(let a=0;a<r.length;a++){let u=r[a][this.fields.id].toString();-1!==this.checkedNodes.indexOf(u)&&o++}o===r.length&&-1===this.checkedNodes.indexOf(s)&&s&&this.checkedNodes.push(s)}}else if(2===this.dataType)for(let t=0;t<this.treeData.length;t++){if((this.treeData[t][this.fields.id]?this.treeData[t][this.fields.id].toString():"")===e&&-1===this.checkedNodes.indexOf(e)){this.checkedNodes.push(e);break}let s=J(this.fields.child.toString(),this.treeData[t]);s&&this.setChildCheckState(s,e,this.treeData[t])}}setChildCheckState(e,t,i){let s,r=0;if(1===this.dataType){i&&(s=i[this.fields.id]?i[this.fields.id].toString():null);for(let o=0;o<e.length;o++){let a=e[o][this.fields.id]?e[o][this.fields.id].toString():null;i&&s&&this.autoCheck&&-1!==this.checkedNodes.indexOf(s)&&-1===this.checkedNodes.indexOf(a)&&this.checkedNodes.push(a),a===t&&-1===this.checkedNodes.indexOf(t)&&this.checkedNodes.push(t);let u=this.getChildNodes(this.treeData,a);u&&this.setChildCheckState(u,t,i)}}else{i&&(s=i[this.fields.id]?i[this.fields.id].toString():"");for(let o=0;o<e.length;o++){let a=e[o][this.fields.id]?e[o][this.fields.id].toString():"";i&&s&&this.autoCheck&&-1!==this.checkedNodes.indexOf(s)&&-1===this.checkedNodes.indexOf(a)&&this.checkedNodes.push(a),a===t&&-1===this.checkedNodes.indexOf(t)&&this.checkedNodes.push(t);let u=J(this.fields.child.toString(),e[o]);u&&this.setChildCheckState(u,t,e[o]),-1!==this.checkedNodes.indexOf(a)&&this.autoCheck&&r++,r===e.length&&-1===this.checkedNodes.indexOf(s)&&this.autoCheck&&this.checkedNodes.push(s)}}}setIndeterminate(e){for(let t=0;t<e.length;t++)this.setValidCheckedNode(e[t])}updatePosition(e,t,i,s){if(1===this.dataType){let r=this.getDataPos(this.treeData,this.fields,e);if(this.treeData.splice(r,1,t),i){this.removeChildNodes(e);for(let o=0;o<s.length;o++)this.treeData.splice(r,0,s[o]),r++}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.updateChildPosition(this.treeData,this.fields,e,[t],void 0)}updateChildPosition(e,t,i,s,r){let o;for(let a=0,u=e.length;a<u;a++){let p=J(t.id,e[a]);if(e[a]&&p&&p.toString()===i)return e[a]=s[0],!0;if("string"!=typeof t.child||m(J(t.child,e[a]))){if(this.fields.dataSource instanceof Nt&&!m(J("child",e[a]))){let y=J("child",e[a]);if(o=this.updateChildPosition(y,this.getChildMapper(t),i,s,r),void 0!==o)break}}else{let y=J(t.child,e[a]);if(o=this.updateChildPosition(y,this.getChildMapper(t),i,s,r),void 0!==o)break}}return o}dynamicState(){this.setDragAndDrop(this.allowDragAndDrop),this.wireEditingEvents(this.allowEditing),this.disabled?(this.unWireEvents(),this.rippleFn(),this.rippleIconFn()):(this.wireEvents(),this.setRipple())}crudOperation(e,t,i,s,r,o,a){let _,u=this.fields.dataSource,p=[],y=this.getQuery(this.fields),E=this.fields.id,D={addedRecords:[],deletedRecords:[],changedRecords:[]},L=[];t?L=this.nodeType(t):i&&("string"==typeof i?L[0]=i.toString():"object"==typeof i&&(L[0]=i.getAttribute("data-uid").toString()));for(let V=0,H=L.length;V<H;V++){if(m(this.getElement(L[V])))continue;let _e=this.getNodeObject(L[V]);p.push(_e)}switch(e){case"delete":1==t.length?_=u.remove(E,p[0],y.fromTable,y):(D.deletedRecords=p,_=u.saveChanges(D,E,y.fromTable,y)),_.then(V=>this.deleteSuccess(L)).catch(V=>this.dmFailure(V));break;case"update":p[0][this.fields.text]=s,_=u.update(E,p[0],y.fromTable,y),_.then(V=>this.editSucess(i,s,a)).catch(V=>this.dmFailure(V,i,a));break;case"insert":if(1==r.length)_=u.insert(r[0],y.fromTable,y);else{let V=[];for(let H=0,se=r.length;H<se;H++)V.push(r[H]);D.addedRecords=V,_=u.saveChanges(D,E,y.fromTable,y)}_.then(V=>{let H=this.getElement(i);this.addSuccess(r,H,o),this.preventExpand=!1}).catch(V=>this.dmFailure(V))}}deleteSuccess(e){for(let t=0,i=e.length;t<i;t++){let s=this.getElement(e[t]);m(s)||this.removeNode(s)}this.updateInstance(),1===this.dataType&&(this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)),this.triggerEvent()}editSucess(e,t,i){let s=this.getElement(e),r=X("."+Ob,s);this.appendNewText(s,r,t,i)}addSuccess(e,t,i){let s,r=t?t.querySelector("."+vo):null,o=this;t&&r&&r.classList.contains(Rn)&&null===t.querySelector("."+As)?o.renderChildNodes(t,null,()=>{s=t.querySelector("."+As),o.addGivenNodes(e,t,i,!0,s),o.triggerEvent()}):(this.addGivenNodes(e,t,i,!0),this.triggerEvent())}dmFailure(e,t,i){t&&this.updatePreviousText(t,i),this.trigger("actionFailure",{error:e})}updatePreviousText(e,t){let i=this.getElement(e),s=X("."+Ob,i);this.updateText(i,s,this.oldText,t)}onPropertyChanged(e,t){for(let i of Object.keys(e))switch(i){case"allowDragAndDrop":this.setDragAndDrop(this.allowDragAndDrop);break;case"dragArea":this.allowDragAndDrop&&(this.dragObj.dragArea=this.dragArea);break;case"allowEditing":this.wireEditingEvents(this.allowEditing);break;case"allowMultiSelection":if(this.selectedNodes.length>1){let s=this.getElement(this.selectedNodes[0]);this.isLoaded=!1,this.removeSelectAll(),this.selectNode(s,null),this.isLoaded=!0}this.setMultiSelect(this.allowMultiSelection),this.addMultiSelect(this.allowMultiSelection);break;case"allowTextWrap":this.setTextWrap(),this.updateWrap();break;case"checkedNodes":this.showCheckBox&&(this.checkedNodes=t.checkedNodes,this.setCheckedNodes(e.checkedNodes));break;case"autoCheck":this.showCheckBox&&(this.autoCheck=e.autoCheck,this.ensureIndeterminate());break;case"cssClass":this.setCssClass(t.cssClass,e.cssClass);break;case"enableRtl":this.setEnableRtl();break;case"expandedNodes":this.isAnimate=!1,this.setProperties({expandedNodes:[]},!0),this.collapseAll(),this.isInitalExpand=!0,this.setProperties({expandedNodes:m(e.expandedNodes)?[]:e.expandedNodes},!0),this.doExpandAction(),this.isInitalExpand=!1,this.isAnimate=!0;break;case"expandOn":this.wireExpandOnEvent(!1),this.setExpandOnType(),"None"!==this.expandOnType&&!this.disabled&&this.wireExpandOnEvent(!0);break;case"disabled":this.setDisabledMode(),this.dynamicState();break;case"fields":this.isAnimate=!1,this.isFieldChange=!0,this.initialRender=!0,this.reRenderNodes(),this.initialRender=!1,this.isAnimate=!0,this.isFieldChange=!1;break;case"fullRowSelect":this.setFullRow(this.fullRowSelect),this.addFullRow(this.fullRowSelect),this.allowTextWrap&&(this.setTextWrap(),this.updateWrap());break;case"loadOnDemand":if(!1===this.loadOnDemand&&!this.onLoaded){let s=this.element.querySelectorAll("li"),r=0;for(;r<s.length;)"true"!==s[r].getAttribute("aria-expanded")&&this.renderChildNodes(s[r],!0,null,!0),r++;this.onLoaded=!0}break;case"nodeTemplate":this.hasTemplate=!1,this.nodeTemplateFn=this.templateComplier(this.nodeTemplate),this.reRenderNodes();break;case"selectedNodes":this.removeSelectAll(),this.setProperties({selectedNodes:e.selectedNodes},!0),this.doSelectionAction();break;case"showCheckBox":case"sortOrder":this.reRenderNodes();break;case"fullRowNavigable":this.setProperties({fullRowNavigable:e.fullRowNavigable},!0),this.listBaseOption.itemNavigable=e.fullRowNavigable,this.reRenderNodes()}}destroy(){this.clearTemplate(),this.element.removeAttribute("aria-activedescendant"),this.element.removeAttribute("tabindex"),this.unWireEvents(),this.wireEditingEvents(!1),this.disabled||(this.rippleFn(),this.rippleIconFn()),this.setCssClass(this.cssClass,null),this.setDragAndDrop(!1),this.setFullRow(!1),this.ulElement&&this.ulElement.parentElement&&this.ulElement.parentElement.removeChild(this.ulElement),super.destroy()}addNodes(e,t,i,s){if(m(e))return;e=JSON.parse(JSON.stringify(e));let r=this.getElement(t);if(this.preventExpand=s,this.fields.dataSource instanceof Nt)this.isOffline?this.addSuccess(e,r,i):this.crudOperation("insert",null,t,null,e,i,this.preventExpand);else if(2===this.dataType)this.addGivenNodes(e,r,i);else{if(r)this.addGivenNodes(e,r,i);else{e=this.getSortedData(e);for(let o=0;o<e.length;o++){let a=J(this.fields.parentID,e[o]);r=a&&this.getElement(a.toString()),this.addGivenNodes([e[o]],r,i)}}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}this.updateCheckedStateFromDS(),this.showCheckBox&&r&&this.ensureParentCheckState(r),this.fields.dataSource instanceof Nt||(this.preventExpand=!1,this.triggerEvent())}beginEdit(e){let t=this.getElement(e);m(t)||this.disabled||this.createTextbox(t,null)}checkAll(e){this.showCheckBox&&this.doCheckBoxAction(e,!0)}collapseAll(e,t,i){m(e)?t>0?this.collapseByLevel(X("."+As,this.element),t,i):this.collapseAllNodes(i):this.doGivenAction(e,ma,!1)}disableNodes(e){m(e)||this.doDisableAction(e)}enableNodes(e){m(e)||this.doEnableAction(e)}ensureVisible(e){let t=this.getElement(e);if(m(t))return;let i=this.parents(t,"."+Bi);this.expandAll(i),setTimeout(()=>{t.scrollIntoView(!0)},450)}expandAll(e,t,i){m(e)?t>0?this.expandByLevel(X("."+As,this.element),t,i):this.expandAllNodes(i):this.doGivenAction(e,Rn,!0)}getAllCheckedNodes(){return this.checkedNodes}getDisabledNodes(){return this.disableNode}getNode(e){let t=this.getElement(e);return this.getNodeData(t,!0)}getTreeData(e){let t=this.getId(e);if(this.updatePersistProp(),m(t))return this.treeData;{let i=this.getNodeObject(t);return m(i)?[]:[i]}}moveNodes(e,t,i,s){let r=this.getElement(t);if(!m(r)){for(let o=0;o<e.length;o++){let a=this.getElement(e[o]);m(a)||r.isSameNode(a)||this.isDescendant(a,r)||(this.preventExpand=s,this.dropAsChildNode(a,r,this,i))}this.fields.dataSource instanceof Nt||(this.preventExpand=!1),this.triggerEvent()}}refreshNode(e,t){if(m(e)||m(t))return;let i,s=!1;1==this.dataType&&t.length>1?s=!0:2==this.dataType&&1===t.length&&(m(J(this.fields.child.toString(),t[0]))||(s=!0));let o,a,r=this.getElement(e);if(i=r?r.getAttribute("data-uid"):e?e.toString():null,this.refreshData=this.getNodeObject(i),t=JSON.parse(JSON.stringify(t)),1==this.dataType&&s){for(let _=0;_<t.length;_++)if(m(t[_][this.fields.parentID])){a=t[_],t.splice(_,1);break}o=ut({},this.refreshData,a)}else o=ut({},this.refreshData,t[0]);if(m(r))return void this.updatePosition(i,o,s,t);this.isRefreshed=!0;let u=parseFloat(r.getAttribute("aria-level")),p=ds.createListItemFromJson(this.createElement,[o],this.listBaseOption,u),y=X("."+As,r),E=J(this.fields.child.toString(),o);if(s&&y||s&&!m(E)){let _=r.parentElement,D=Array.prototype.indexOf.call(_.childNodes,r);Ms(r),_.insertBefore(p[0],_.childNodes[D]),this.updatePosition(i,o,s,t),s&&y&&this.expandAll([i])}else{let _=X("."+Xo,r),D=X("."+Xo,p[0]),L=X("div."+vo,_),V=X("div."+vo,D);L&&V&&(V.classList.contains(Rn)&&L.classList.contains(ma)?(Y([V],Rn),j([V],ma)):V.classList.contains(ma)&&L.classList.contains(Rn)?(Y([V],ma),j([V],Rn)):L.classList.contains("interaction")&&j([V],"interaction")),Ms(_);let H=X("."+cm,r);H.parentNode.insertBefore(D,H.nextSibling),this.updatePosition(i,o,s,t)}if(r=this.getElement(e),o[this.fields.tooltip]&&r.setAttribute("title",o[this.fields.tooltip]),o.hasOwnProperty(this.fields.htmlAttributes)&&o[this.fields.htmlAttributes]){let _={};qc(_,o[this.fields.htmlAttributes]),_.class?(j([r],_.class.split(" ")),delete _.class):bt(r,_)}-1!==this.selectedNodes.indexOf(i)&&(r.setAttribute("aria-selected","true"),j([r],Jc)),this.isRefreshed=!1,this.triggerEvent()}removeNodes(e){m(e)||(this.fields.dataSource instanceof Nt&&!this.isOffline?this.crudOperation("delete",e):this.deleteSuccess(e))}updateNode(e,t){if(m(e)||m(t)||!this.allowEditing)return;let i=this.getElement(e);if(m(i))return;let s=X("."+Ob,i);this.updateOldText(i);let r=this.getEditEvent(i,null,null);this.trigger("nodeEditing",r,o=>{o.cancel||(this.fields.dataSource instanceof Nt&&!this.isOffline?this.crudOperation("update",null,e,t,null,null,!1):this.appendNewText(i,s,t,!1))})}uncheckAll(e){this.showCheckBox&&this.doCheckBoxAction(e,!1)}};si([A(!1)],Ji.prototype,"allowDragAndDrop",void 0),si([A(!1)],Ji.prototype,"allowEditing",void 0),si([A(!1)],Ji.prototype,"allowMultiSelection",void 0),si([A(!1)],Ji.prototype,"allowTextWrap",void 0),si([Ps({},KL)],Ji.prototype,"animation",void 0),si([A()],Ji.prototype,"checkedNodes",void 0),si([A("")],Ji.prototype,"cssClass",void 0),si([A(!1)],Ji.prototype,"disabled",void 0),si([A(null)],Ji.prototype,"dragArea",void 0),si([A(!1)],Ji.prototype,"enableHtmlSanitizer",void 0),si([A(!1)],Ji.prototype,"enablePersistence",void 0),si([A()],Ji.prototype,"expandedNodes",void 0),si([A("Auto")],Ji.prototype,"expandOn",void 0),si([Ps({},fl)],Ji.prototype,"fields",void 0),si([A(!0)],Ji.prototype,"fullRowSelect",void 0),si([A(!0)],Ji.prototype,"loadOnDemand",void 0),si([A()],Ji.prototype,"locale",void 0),si([A()],Ji.prototype,"nodeTemplate",void 0),si([A()],Ji.prototype,"selectedNodes",void 0),si([A("None")],Ji.prototype,"sortOrder",void 0),si([A(!1)],Ji.prototype,"showCheckBox",void 0),si([A(!0)],Ji.prototype,"autoCheck",void 0),si([A(!1)],Ji.prototype,"fullRowNavigable",void 0),si([Z()],Ji.prototype,"actionFailure",void 0),si([Z()],Ji.prototype,"created",void 0),si([Z()],Ji.prototype,"dataBound",void 0),si([Z()],Ji.prototype,"dataSourceChanged",void 0),si([Z()],Ji.prototype,"drawNode",void 0),si([Z()],Ji.prototype,"destroyed",void 0),si([Z()],Ji.prototype,"keyPress",void 0),si([Z()],Ji.prototype,"nodeChecked",void 0),si([Z()],Ji.prototype,"nodeChecking",void 0),si([Z()],Ji.prototype,"nodeClicked",void 0),si([Z()],Ji.prototype,"nodeCollapsed",void 0),si([Z()],Ji.prototype,"nodeCollapsing",void 0),si([Z()],Ji.prototype,"nodeDragging",void 0),si([Z()],Ji.prototype,"nodeDragStart",void 0),si([Z()],Ji.prototype,"nodeDragStop",void 0),si([Z()],Ji.prototype,"nodeDropped",void 0),si([Z()],Ji.prototype,"nodeEdited",void 0),si([Z()],Ji.prototype,"nodeEditing",void 0),si([Z()],Ji.prototype,"nodeExpanded",void 0),si([Z()],Ji.prototype,"nodeExpanding",void 0),si([Z()],Ji.prototype,"nodeSelected",void 0),si([Z()],Ji.prototype,"nodeSelecting",void 0),Ji=zL=si([ts],Ji);var to=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const ZL="e-sidebar",jd="e-close",Mu="e-open",XL="e-transition",LH="e-backdrop",_I="e-right",II="e-left",BE="e-over",Mb="e-push",pk="e-slide",QL="e-visibility",RH="e-disable-animation",JL="e-sidebar-context",eR="e-sidebar-absolute";let Dr=class extends Ls{constructor(e,t){super(e,t)}preRender(){this.setWidth()}render(){this.initialize(),this.wireEvents(),this.renderComplete()}initialize(){this.setTarget(),this.addClass(),this.setZindex(),this.enableDock&&this.setDock(),this.isOpen?(this.show(),this.firstRender=!0):this.setMediaQuery(),this.checkType(!0),this.setType(this.type),this.setCloseOnDocumentClick(),this.setEnableRTL(),Q.isDevice&&(this.windowWidth=window.innerWidth)}setEnableRTL(){(this.enableRtl?j:Y)([this.element],"e-rtl")}setTarget(){this.targetEle=this.element.nextElementSibling,this.sidebarEleCopy=this.element.cloneNode(!0),"string"==typeof this.target&&this.setProperties({target:document.querySelector(this.target)},!0),this.target&&(this.target.insertBefore(this.element,this.target.children[0]),j([this.element],eR),j([this.target],JL),this.targetEle=this.getTargetElement())}getTargetElement(){let e=this.element.nextElementSibling;for(;!m(e)&&e.classList.contains(ZL);)e=e.nextElementSibling;return e}setCloseOnDocumentClick(){this.closeOnDocumentClick?O.add(document,"mousedown touchstart",this.documentclickHandler,this):O.remove(document,"mousedown touchstart",this.documentclickHandler)}setWidth(){this.enableDock&&"Left"===this.position||this.enableDock&&"Right"===this.position?It(this.element,{width:this.setDimension(this.dockSize)}):this.enableDock||It(this.element,{width:this.setDimension(this.width)})}setDimension(e){return"number"==typeof e?ct(e):"string"==typeof e?e.match(/px|%|em/)?e:ct(e):"100%"}setZindex(){It(this.element,{"z-index":""+this.zIndex})}addClass(){"EJS-SIDEBAR"===this.element.tagName&&j([this.element],"e-sidebar-display");const e=document.querySelector(".e-main-content");m(e||this.targetEle)||j([e||this.targetEle],["e-content-animation"]),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",!this.enableDock&&"Auto"!==this.type&&j([this.element],[QL]),Y([this.element],[Mu,jd,_I,II,pk,Mb,BE]),this.element.classList.add(ZL),j([this.element],"Right"===this.position?_I:II),this.enableDock&&j([this.element],"e-dock"),this.element.setAttribute("tabindex",this.tabIndex),"Auto"!==this.type||Q.isDevice?this.isOpen||j([this.element],jd):this.show()}checkType(e){"Push"===this.type||"Over"===this.type||"Slide"===this.type?!this.element.classList.contains(jd)&&!e&&this.hide():this.type="Auto"}transitionEnd(e){this.setDock(),!m(e)&&!this.firstRender&&this.triggerChange(),this.firstRender=!1,O.remove(this.element,"transitionend",this.transitionEnd)}destroyBackDrop(){const e=document.querySelector(".e-main-content")||this.targetEle;this.target&&this.showBackdrop&&e?Y([e],LH):this.showBackdrop&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null)}hide(e){const t={model:this,element:this.element,cancel:!1,isInteracted:!m(e),event:e||null};this.trigger("close",t,i=>{if(!i.cancel){if(this.element.classList.contains(jd))return;this.element.classList.contains(Mu)&&!this.animate&&this.triggerChange(),j([this.element],jd),Y([this.element],Mu),It(this.element,{width:ct(this.enableDock?this.dockSize:this.width)}),this.setType(this.type);const s=document.querySelector(".e-main-content")||this.targetEle;!this.enableDock&&s&&(s.style.transform="translateX(0px)",s.style["Left"===this.position?"marginLeft":"marginRight"]="0px"),this.destroyBackDrop(),this.setAnimation(),"Slide"===this.type&&document.body.classList.remove("e-sidebar-overflow"),this.setProperties({isOpen:!1},!0),this.enableDock&&setTimeout(()=>this.setTimeOut(),50),O.add(this.element,"transitionend",this.transitionEnd,this)}})}setTimeOut(){const e=document.querySelector(".e-main-content")||this.targetEle,t=this.element.getBoundingClientRect().width;!this.element.classList.contains(Mu)||!e||"Over"===this.type&&this.enableDock?this.element.classList.contains(jd)&&e&&("Left"===this.position?e.style.marginLeft=this.setDimension("auto"===this.dockSize?t:this.dockSize):e.style.marginRight=this.setDimension("auto"===this.dockSize?t:this.dockSize)):"Left"===this.position?e.style.marginLeft=this.setDimension("auto"===this.width?t:this.width):e.style.marginRight=this.setDimension("auto"===this.width?t:this.width)}show(e){const t={model:this,element:this.element,cancel:!1,isInteracted:!m(e),event:e||null};this.trigger("open",t,i=>{if(!i.cancel){if(Y([this.element],QL),this.element.classList.contains(Mu))return;this.element.classList.contains(jd)&&!this.animate&&this.triggerChange(),j([this.element],[Mu,XL]),It(this.element,{transform:""}),Y([this.element],jd),It(this.element,{width:ct(this.width)}),this.setType(this.type),this.createBackDrop(),this.setAnimation(),"Slide"===this.type&&document.body.classList.add("e-sidebar-overflow"),this.setProperties({isOpen:!0},!0),O.add(this.element,"transitionend",this.transitionEnd,this)}})}setAnimation(){this.animate?Y([this.element],RH):j([this.element],RH)}triggerChange(){this.trigger("change",{name:"change",element:this.element})}setDock(){this.enableDock&&"Left"===this.position&&!this.getState()?It(this.element,{transform:"translateX(-100%) translateX("+this.setDimension(this.dockSize)+")"}):this.enableDock&&"Right"===this.position&&!this.getState()&&It(this.element,{transform:"translateX(100%) translateX(-"+this.setDimension(this.dockSize)+")"}),this.element.classList.contains(jd)&&this.enableDock&&It(this.element,{width:this.setDimension(this.dockSize)})}createBackDrop(){this.target&&this.showBackdrop&&this.getState()?j([document.querySelector(".e-main-content")||this.targetEle],LH):this.showBackdrop&&!this.modal&&this.getState()&&(this.modal=this.createElement("div"),this.modal.className="e-sidebar-overlay",this.modal.style.display="block",document.body.appendChild(this.modal))}getPersistData(){return this.addOnPersist(["type","position","isOpen"])}getModuleName(){return"sidebar"}toggle(){this.element.classList.contains(Mu)?this.hide():this.show()}getState(){return!!this.element.classList.contains(Mu)}setMediaQuery(){if(this.mediaQuery){let e=!1;e="string"==typeof this.mediaQuery?window.matchMedia(this.mediaQuery).matches:this.mediaQuery.matches,e&&this.windowWidth!==window.innerWidth?this.show():this.getState()&&this.windowWidth!==window.innerWidth&&this.hide()}}resize(){"Auto"===this.type&&j([this.element],Q.isDevice?BE:Mb),this.setMediaQuery(),Q.isDevice&&(this.windowWidth=window.innerWidth)}documentclickHandler(e){ae(e.target,".e-control."+ZL)||this.hide(e)}enableGestureHandler(e){!this.isOpen&&"Left"===this.position&&"Right"===e.swipeDirection&&e.startX<=20&&e.distanceX>=50&&e.velocity>=.5?this.show():this.isOpen&&"Left"===this.position&&"Left"===e.swipeDirection||this.isOpen&&"Right"===this.position&&"Right"===e.swipeDirection?this.hide():!this.isOpen&&"Right"===this.position&&"Left"===e.swipeDirection&&window.innerWidth-e.startX<=20&&e.distanceX>=50&&e.velocity>=.5&&this.show()}setEnableGestures(){this.enableGestures?(this.mainContentEle=new Sn(document.body,{swipe:this.enableGestureHandler.bind(this)}),this.sidebarEle=new Sn(this.element,{swipe:this.enableGestureHandler.bind(this)})):this.mainContentEle&&this.sidebarEle&&(this.mainContentEle.destroy(),this.sidebarEle.destroy())}wireEvents(){this.setEnableGestures(),O.add(window,"resize",this.resize,this)}unWireEvents(){O.remove(window,"resize",this.resize),O.remove(document,"mousedown touchstart",this.documentclickHandler),this.mainContentEle&&this.mainContentEle.destroy(),this.sidebarEle&&this.sidebarEle.destroy()}onPropertyChanged(e,t){const i=document.querySelector(".e-main-content")||this.targetEle,s=this.isServerRendered;for(const r of Object.keys(e))switch(r){case"isOpen":this.isOpen?this.show():this.hide();break;case"width":this.setWidth(),this.getState()||this.setDock();break;case"animate":this.setAnimation();break;case"type":this.checkType(!1),Y([this.element],[QL]),this.addClass(),j([this.element],"Auto"===this.type?Q.isDevice?["e-over"]:["e-push"]:["e-"+this.type.toLowerCase()]);break;case"position":this.element.style.transform="",this.setDock(),i&&(i.style["Left"===this.position?"marginRight":"marginLeft"]="0px"),"Right"===this.position?(Y([this.element],II),j([this.element],_I)):(Y([this.element],_I),j([this.element],II)),this.setType(this.type);break;case"showBackdrop":this.showBackdrop?this.createBackDrop():this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null);break;case"target":"string"==typeof this.target&&this.setProperties({target:document.querySelector(this.target)},!0),m(this.target)&&(Y([this.element],eR),Y([t.target],JL),It(i,{"margin-left":0,"margin-right":0}),document.body.insertAdjacentElement("afterbegin",this.element)),this.isServerRendered=!1,super.refresh(),this.isServerRendered=s;break;case"closeOnDocumentClick":this.setCloseOnDocumentClick();break;case"enableDock":this.getState()||this.setDock();break;case"zIndex":this.setZindex();break;case"mediaQuery":this.setMediaQuery();break;case"enableGestures":this.setEnableGestures();break;case"enableRtl":this.setEnableRTL()}}setType(e){const t=this.element.getBoundingClientRect().width;this.setZindex();const i=document.querySelector(".e-main-content")||this.targetEle;i&&(i.style.transform="translateX(0px)",!Q.isDevice&&"Auto"!==this.type&&("Over"!==this.type||!this.enableDock)&&(i.style["Left"===this.position?"marginLeft":"marginRight"]="0px"));const s=t+"px",r="Left"===this.position?t:-t;switch(Y([this.element],[Mb,BE,pk]),e){case"Push":j([this.element],[Mb]),i&&(this.enableDock||this.element.classList.contains(Mu))&&(i.style["Left"===this.position?"marginLeft":"marginRight"]=s);break;case"Slide":j([this.element],[pk]),i&&(this.enableDock||this.element.classList.contains(Mu))&&(i.style.transform="translateX("+r+"px)");break;case"Over":j([this.element],[BE]),this.enableDock&&(this.element.classList.contains(jd)||this.isOpen)&&i&&(i.style["Left"===this.position?"marginLeft":"marginRight"]=this.setDimension(this.dockSize));break;case"Auto":j([this.element],[XL]),Q.isDevice?i&&this.enableDock&&!this.getState()?(i.style["Left"===this.position?"marginLeft":"marginRight"]=s,j([this.element],Mb)):j([this.element],BE):(j([this.element],Mb),i&&(this.enableDock||this.element.classList.contains(Mu))&&(i.style["Left"===this.position?"marginLeft":"marginRight"]=s)),this.createBackDrop()}}destroy(){super.destroy(),this.target&&Y([this.target],JL),this.destroyBackDrop(),this.element&&(Y([this.element],[Mu,jd,Mb,pk,BE,II,_I,XL]),Y([this.element],eR),this.element.style.width="",this.element.style.zIndex="",this.element.style.transform="",m(this.sidebarEleCopy.getAttribute("tabindex"))?this.element.removeAttribute("tabindex"):this.element.setAttribute("tabindex",this.tabIndex)),this.windowWidth=null;const e=document.querySelector(".e-main-content")||this.targetEle;m(e)||(e.style.margin="",e.style.transform=""),this.unWireEvents()}};to([A("auto")],Dr.prototype,"dockSize",void 0),to([A(null)],Dr.prototype,"mediaQuery",void 0),to([A(!1)],Dr.prototype,"enableDock",void 0),to([A("en-US")],Dr.prototype,"locale",void 0),to([A(!1)],Dr.prototype,"enablePersistence",void 0),to([A(!0)],Dr.prototype,"enableGestures",void 0),to([A(!1)],Dr.prototype,"isOpen",void 0),to([A(!1)],Dr.prototype,"enableRtl",void 0),to([A(!0)],Dr.prototype,"animate",void 0),to([A("auto")],Dr.prototype,"height",void 0),to([A(!1)],Dr.prototype,"closeOnDocumentClick",void 0),to([A("Left")],Dr.prototype,"position",void 0),to([A(null)],Dr.prototype,"target",void 0),to([A(!1)],Dr.prototype,"showBackdrop",void 0),to([A("Auto")],Dr.prototype,"type",void 0),to([A("auto")],Dr.prototype,"width",void 0),to([A(1e3)],Dr.prototype,"zIndex",void 0),to([Z()],Dr.prototype,"created",void 0),to([Z()],Dr.prototype,"close",void 0),to([Z()],Dr.prototype,"open",void 0),to([Z()],Dr.prototype,"change",void 0),to([Z()],Dr.prototype,"destroyed",void 0),Dr=to([ts],Dr);var Qo=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const VE="e-icon-right",tR="e-breadcrumb-text",iR="e-breadcrumb-icon",HE="e-breadcrumb-menu",sR="e-breadcrumb-item",NH="e-breadcrumb-popup",fk="e-breadcrumb-wrap-mode",mk="e-breadcrumb-scroll-mode",FH="tabindex",gk="e-disabled",yk="aria-disabled",Ud=".";class xI extends Is{}Qo([A("")],xI.prototype,"text",void 0),Qo([A("")],xI.prototype,"url",void 0),Qo([A(null)],xI.prototype,"iconCss",void 0),Qo([A(!1)],xI.prototype,"disabled",void 0);let Ha=class extends Ls{constructor(e,t){super(e,t)}preRender(){}render(){this.initialize(),this.renderItems(this.items),this.wireEvents()}initialize(){this._maxItems=this.maxItems,this.element.setAttribute("aria-label","breadcrumb"),this.cssClass&&j([this.element],this.cssClass.split(" ")),this.enableRtl&&this.element.classList.add("e-rtl"),this.disabled&&(this.element.classList.add(gk),this.element.setAttribute(yk,"true")),"Wrap"===this.overflowMode?this.element.classList.add(fk):"Scroll"===this.overflowMode&&this.element.classList.add(mk),this.initItems(),this.initPvtProps()}initPvtProps(){"Hidden"===this.overflowMode&&this._maxItems>0&&(this.endIndex=this.getEndIndex(),this.startIndex=this.endIndex+1-(this._maxItems-1)),"Menu"===this.overflowMode&&(this._maxItems>=0?(this.startIndex=this._maxItems>1?1:0,this.endIndex=this.getEndIndex(),this.popupUl=this.createElement("ul",{attrs:{TABINDEX:"0",role:"menu"}})):this.startIndex=this.endIndex=null)}getEndIndex(){let e;return this.activeItem?this.items.forEach((t,i)=>{(t.url===this.activeItem||t.text===this.activeItem)&&(e=i)}):e=this.items.length-1,e}initItems(){if(!this.items.length){let e,t;const i=[];if(this.url){const s=new URL(this.url,window.location.origin);e=s.origin+"/",t=s.href.split(e)[1].split("/")}else e=window.location.origin+"/",t=window.location.href.split(e)[1].split("/");i.push({iconCss:"e-icons e-home",url:e});for(let s=0;s<t.length;s++)t[s]&&(i.push({text:t[s],url:e+t[s]}),e+=t[s]+"/");this.setProperties({items:i},!0)}}renderItems(e){let t,i;const s=this.element.classList.contains(VE),r=e.length;if(r){let o,a,u,y,p=0;const E=2*r-1;let _=!1;const D=this.createElement("ol",{className:"Wrap"===this.overflowMode?"e-breadcrumb-wrapped-ol":""}),L=this.createElement("ol",{className:"Wrap"===this.overflowMode?"e-breadcrumb-first-ol":""}),V=this.hasField(e,"iconCss"),H="Collapsed"===this.overflowMode&&this._maxItems>0&&r>this._maxItems&&!this.isExpanded,se="Hidden"===this.overflowMode&&this._maxItems>0;"Menu"===this.overflowMode&&this.popupUl&&(this.popupUl.innerHTML="");const _e={moduleName:this.getModuleName(),showIcon:V,itemNavigable:!0,itemCreated:re=>{const Ae=re.curData.isLastItem;Ae&&re.item.children.length&&!this.itemTemplate&&(delete re.curData.isLastItem,!u&&!this.enableActiveItemNavigation&&(re.item.innerHTML=this.createElement("span",{className:tR,innerHTML:re.item.children[0].innerHTML}).outerHTML)),re.curData.iconCss&&!re.curData.text&&!this.itemTemplate&&re.item.classList.add("e-icon-item"),se&&re.item.setAttribute("item-index",p.toString());const gt={item:ut({},re.curData.properties?re.curData.properties:re.curData),element:re.item,cancel:!1};this.trigger("beforeItemRender",gt),_=gt.cancel;const ot=s||gt.element.classList.contains(VE);ot&&re.curData.iconCss&&!this.itemTemplate&&re.item.querySelector(".e-anchor-wrap").appendChild(re.item.querySelector(Ud+iR)),gt.item.disabled&&(re.item.setAttribute(yk,"true"),re.item.classList.add(gk)),(gt.item.disabled||this.disabled)&&re.item.children.length&&!this.itemTemplate&&re.item.children[0].setAttribute(FH,"-1"),re.curData.isEmptyUrl&&(re.item.children[0].removeAttribute("href"),(!Ae||Ae&&this.enableActiveItemNavigation)&&!(gt.item.disabled||this.disabled)&&(re.item.children[0].setAttribute(FH,"0"),O.add(re.item.children[0],"keydown",this.keyDownHandler,this))),Ae&&re.item.setAttribute("data-active-item",""),this.itemTemplate||this.beforeItemRenderChanges(re.curData,gt.item,re.item,ot)}};for(let re=0;re<E;re%2&&p++,re++){if(o=this.activeItem&&(this.activeItem===e[p].url||this.activeItem===e[p].text),H&&re>1&&re<E-2)continue;if(se&&(p<this.startIndex||p>this.endIndex)&&(!(re%2)||p!==this.startIndex-1)&&0!==p)continue;re%2?(y=this.createElement("div",{className:"e-breadcrumb-item-wrapper"}),_e.template=this.separatorTemplate?this.separatorTemplate:"/",_e.itemClass="e-breadcrumb-separator",i=!1,t=[{previousItem:e[p],nextItem:e[p+1]}]):(_e.itemClass="",this.itemTemplate?(_e.template=this.itemTemplate,i=!1):i=!0,t=[ut({},e[p].properties?e[p].properties:e[p])],!t[0].url&&!this.itemTemplate&&(t=[ut({},t[0],{isEmptyUrl:!0,url:"#"})]),a=(se||"Menu"===this.overflowMode)&&p===this.endIndex,((re===E-1||a)&&!this.itemTemplate||o)&&(t[0].isLastItem=!0));let Ae=D;const gt=this.startIndex+this.endIndex-this._maxItems;if("Menu"===this.overflowMode&&(p>=this.startIndex&&p<=gt&&(!(re%2)||p!==gt)&&this.endIndex>=this._maxItems&&this._maxItems>0||0===this._maxItems)){if(re%2)continue;Ae=this.popupUl,a&&(u=!0)}else"Wrap"===this.overflowMode&&(Ae=0===re?L:y);const ot=ds.createList(this.createElement,t,_e,i,this).childNodes;if(_){if(se||H||"Menu"===this.overflowMode||"Wrap"===this.overflowMode)return e.splice(p,1),this.initPvtProps(),this.reRenderItems();(re===E-1||a)&&Ms(Ae.lastElementChild)}else Pi(ot,Ae);if("Wrap"===this.overflowMode&&0!==re&&re%2==0&&D.appendChild(y),H&&1===re){const ri=this.createElement("li",{className:"e-icons e-breadcrumb-collapsed",attrs:{TABINDEX:"0"}});O.add(ri,"keyup",this.expandHandler,this),D.appendChild(ri)}if("Menu"===this.overflowMode&&this.startIndex===re&&this.endIndex>=this._maxItems&&this._maxItems>=0){const ri=this.getMenuElement();O.add(ri,"keyup",this.keyDownHandler,this),D.appendChild(ri)}if(o||a)break;_&&re++}this.isReact&&this.renderReactTemplates(),"Wrap"===this.overflowMode&&this.element.appendChild(L),this.element.appendChild(D),this.calculateMaxItems()}}calculateMaxItems(){if("Hidden"===this.overflowMode||"Collapsed"===this.overflowMode||"Menu"===this.overflowMode){let e;const t=this.element.offsetWidth,i=[].slice.call(this.element.children[0].children).reverse();let s="Menu"===this.overflowMode?0:i[i.length-1].offsetWidth+(i[i.length-2]?i[i.length-2].offsetWidth:0);if("Menu"===this.overflowMode){const r=this.getMenuElement();this.element.appendChild(r),s+=r.offsetWidth,Ms(r)}for(let r=0;r<i.length-2;r++){if(s>t){if(e=Math.ceil((r-1)/2)+("Menu"===this.overflowMode&&r<=2?0:1),(this.maxItems>e&&!(this.maxItems>-1&&-1==e)||-1==this.maxItems)&&this._maxItems!=e)return this._maxItems=e,this.initPvtProps(),this.reRenderItems();break}if("Menu"===this.overflowMode&&2===r&&(s+=i[i.length-1].offsetWidth+i[i.length-2].offsetWidth,s>t))return this._maxItems=1,this.initPvtProps(),this.reRenderItems();"Menu"===this.overflowMode&&i[r].classList.contains(HE)||(s+=i[r].offsetWidth)}}else if(("Wrap"===this.overflowMode||"Scroll"===this.overflowMode)&&this._maxItems>0){let e=0;const t=this.element.querySelectorAll(Ud+sR);if(t.length>this._maxItems+this._maxItems-1){for(let i="Wrap"===this.overflowMode?1:0;i<this._maxItems+this._maxItems-1;i++)e+=t[i].offsetWidth;e=e+5+2*parseInt(getComputedStyle(this.element.children[0]).paddingLeft,10),"Wrap"===this.overflowMode?this.element.querySelector(".e-breadcrumb-wrapped-ol").style.width=e+"px":this.element.style.width=e+"px"}}}hasField(e,t){for(let i=0,s=e.length;i<s;i++)if(e[i][t])return!0;return!1}getMenuElement(){return this.createElement("li",{className:"e-icons e-breadcrumb-menu",attrs:{TABINDEX:"0"}})}beforeItemRenderChanges(e,t,i,s){const r=i.querySelector(".e-anchor-wrap");if(t.text!==e.text&&r.childNodes.forEach(o=>{o.nodeType===Node.TEXT_NODE&&(o.textContent=t.text)}),t.iconCss!==e.iconCss&&r){const o=i.querySelector(Ud+iR);if(o)t.iconCss?(Y([o],e.iconCss.split(" ")),j([o],t.iconCss.split(" "))):Ms(o);else if(t.iconCss){const a=this.createElement("span",{className:iR+" "+t.iconCss});s?Pi([a],r):r.insertBefore(a,r.childNodes[0])}}if(t.url!==e.url&&this.enableNavigation){const o=i.querySelector("a."+tR);o&&(t.url?o.setAttribute("href",t.url):o.removeAttribute("href"))}}reRenderItems(){this.element.innerHTML="",this.renderItems(this.items)}clickHandler(e){const t=ae(e.target,Ud+sR+":not(.e-breadcrumb-separator)");if(this.enableNavigation||e.preventDefault(),t&&(ae(e.target,Ud+tR)||this.itemTemplate)){let i;i="Wrap"===this.overflowMode?[].slice.call(this.element.querySelectorAll(Ud+sR)).indexOf(t):[].slice.call(t.parentElement.children).indexOf(t),"Menu"===this.overflowMode?ae(e.target,Ud+NH)?(i+=this.startIndex,this.endIndex=i,"keydown"===e.type&&this.documentClickHandler(e)):this.element.querySelector(Ud+HE)?i>[].slice.call(this.element.children[0].children).indexOf(this.element.querySelector(Ud+HE))?(i+=2*this.popupUl.childElementCount-2,i=Math.floor(i/2),this.endIndex=i):this.startIndex=this.endIndex=i:(i=Math.floor(i/2),this.startIndex=this.endIndex=i):i=Math.floor(i/2),"Hidden"===this.overflowMode&&this._maxItems>0&&0!==this.endIndex&&(i=parseInt(t.getAttribute("item-index"),10),this.startIndex>1&&(this.startIndex-=this.endIndex-i),this.endIndex=i),this.trigger("itemClick",{element:t,item:this.items[i],event:e}),this.activeItem=this.items[i].url||this.items[i].text,this.dataBind()}e.target.classList.contains("e-breadcrumb-collapsed")&&(this.isExpanded=!0,this.reRenderItems()),e.target.classList.contains(HE)&&this.renderPopup()}renderPopup(){const e=this.createElement("div",{className:NH+" "+this.cssClass+(this.enableRtl?" e-rtl":"")});document.body.appendChild(e),this.popupObj=new Th(e,{content:this.popupUl,relateTo:this.element.querySelector(Ud+HE),enableRtl:this.enableRtl,position:{X:"left",Y:"bottom"},collision:{X:"fit",Y:"flip"},open:()=>{this.popupUl.focus()}}),this.popupWireEvents(),this.popupObj.show()}documentClickHandler(e){"Menu"===this.overflowMode&&this.popupObj&&this.popupObj.element.classList.contains("e-popup-open")&&!ae(e.target,Ud+HE)&&(this.popupObj.hide(),this.popupObj.destroy(),ye(this.popupObj.element))}resize(){this._maxItems=this.maxItems,this.initPvtProps(),this.reRenderItems()}expandHandler(e){"Enter"===e.key&&(this.isExpanded=!0,this.reRenderItems())}keyDownHandler(e){"Enter"===e.key&&this.clickHandler(e)}popupKeyDownHandler(e){"Escape"===e.key&&this.documentClickHandler(e)}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"items":case"enableActiveItemNavigation":this.reRenderItems();break;case"activeItem":this._maxItems=this.maxItems,this.initPvtProps(),this.reRenderItems();break;case"overflowMode":case"maxItems":this._maxItems=this.maxItems,this.initPvtProps(),this.reRenderItems(),"Wrap"===t.overflowMode?this.element.classList.remove(fk):"Wrap"===e.overflowMode&&this.element.classList.add(fk),"Scroll"===t.overflowMode?this.element.classList.remove(mk):"Scroll"===e.overflowMode&&this.element.classList.add(mk);break;case"url":this.initItems(),this.reRenderItems();break;case"cssClass":t.cssClass&&Y([this.element],t.cssClass.split(" ")),e.cssClass&&j([this.element],e.cssClass.split(" ")),(t.cssClass&&t.cssClass.indexOf(VE)>-1&&!(e.cssClass&&e.cssClass.indexOf(VE)>-1)||!(t.cssClass&&t.cssClass.indexOf(VE)>-1)&&e.cssClass&&e.cssClass.indexOf(VE)>-1)&&this.reRenderItems();break;case"enableRtl":this.element.classList.toggle("e-rtl");break;case"disabled":this.element.classList.toggle(gk),this.element.setAttribute(yk,e.disabled+"")}}wireEvents(){this.delegateClickHanlder=this.documentClickHandler.bind(this),O.add(document,"click",this.delegateClickHanlder,this),O.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resize.bind(this))}popupWireEvents(){O.add(this.popupObj.element,"click",this.clickHandler,this),O.add(this.popupObj.element,"keydown",this.popupKeyDownHandler,this)}unWireEvents(){O.remove(document,"click",this.delegateClickHanlder),O.remove(this.element,"click",this.clickHandler),window.removeEventListener("resize",this.resize.bind(this)),this.popupObj&&(O.remove(this.popupObj.element,"click",this.clickHandler),O.remove(this.popupObj.element,"keydown",this.popupKeyDownHandler))}getPersistData(){return this.addOnPersist(["activeItem"])}getModuleName(){return"breadcrumb"}destroy(){let e=[],t=["aria-label"];this.cssClass&&e.concat(this.cssClass.split(" ")),this.enableRtl&&e.push("e-rtl"),this.disabled&&(e.push(gk),t.push(yk)),"Wrap"===this.overflowMode?e.push(fk):"Scroll"===this.overflowMode&&e.push(mk),this.unWireEvents(),this.element.innerHTML="",Y([this.element],e),t.forEach(i=>{this.element.removeAttribute(i)}),super.destroy()}};Qo([A("")],Ha.prototype,"url",void 0),Qo([cl([],xI)],Ha.prototype,"items",void 0),Qo([A("")],Ha.prototype,"activeItem",void 0),Qo([A(-1)],Ha.prototype,"maxItems",void 0),Qo([A("Menu")],Ha.prototype,"overflowMode",void 0),Qo([A("")],Ha.prototype,"cssClass",void 0),Qo([A(null)],Ha.prototype,"itemTemplate",void 0),Qo([A("/")],Ha.prototype,"separatorTemplate",void 0),Qo([A(!0)],Ha.prototype,"enableNavigation",void 0),Qo([A(!1)],Ha.prototype,"enableActiveItemNavigation",void 0),Qo([A(!1)],Ha.prototype,"disabled",void 0),Qo([A("")],Ha.prototype,"locale",void 0),Qo([Z()],Ha.prototype,"beforeItemRender",void 0),Qo([Z()],Ha.prototype,"itemClick",void 0),Qo([Z()],Ha.prototype,"created",void 0),Ha=Qo([ts],Ha);const Xq=["header"],BH=["content"],VH=["headerTemplate"],HH=["itemTemplate"],nR=[[["div"]]],rR=["div"],jH=["template"],Qq=["separatorTemplate"],Jq=["headerText"],e7=["nodeTemplate"],t7=["*"];var UH=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},zH=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)};let i7=["content","cssClass","disabled","expanded","header","iconCss","id","visible"],s7=[],n7=(()=>{class n extends xu{constructor(t){super(),this.viewContainerRef=t,ys("currentInstance",this,this.viewContainerRef),this.registerEvents(s7),this.directivePropList=i7}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b))},n.\u0275dir=d.lG2({type:n,selectors:[["e-accordionitem"]],contentQueries:function(t,i,s){if(1&t&&(d.Suo(s,Xq,5),d.Suo(s,BH,5)),2&t){let r;d.iGM(r=d.CRH())&&(i.header=r.first),d.iGM(r=d.CRH())&&(i.content=r.first)}},inputs:{content:"content",cssClass:"cssClass",disabled:"disabled",expanded:"expanded",header:"header",iconCss:"iconCss",id:"id",visible:"visible"},features:[d.qOj]}),UH([Ni(),zH("design:type",Object)],n.prototype,"header",void 0),UH([Ni(),zH("design:type",Object)],n.prototype,"content",void 0),n})(),r7=(()=>{class n extends Tu{constructor(){super("items")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["e-accordionitems"]],contentQueries:function(t,i,s){if(1&t&&d.Suo(s,n7,4),2&t){let r;d.iGM(r=d.CRH())&&(i.children=r)}},features:[d.qOj]}),n})();var oR=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},aR=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)};const o7=["clicked","created","destroyed","expanded","expanding","expandedIndicesChange"],a7=["expandedIndices"];let vk=(()=>{let n=class extends Va{constructor(t,i,s,r){super(),this.ngEle=t,this.srenderer=i,this.viewContainerRef=s,this.injector=r,this.tags=["items"],this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(o7),this.addTwoWay.call(this,a7),ys("currentInstance",this,this.viewContainerRef),this.containerContext=new fi}ngOnInit(){this.containerContext.ngOnInit(this)}ngAfterViewInit(){this.containerContext.ngAfterViewInit(this)}ngOnDestroy(){this.containerContext.ngOnDestroy(this)}ngAfterContentChecked(){this.tagObjects[0].instance=this.childItems,this.containerContext.ngAfterContentChecked(this)}};return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ejs-accordion"]],contentQueries:function(t,i,s){if(1&t&&(d.Suo(s,VH,5),d.Suo(s,HH,5),d.Suo(s,r7,5)),2&t){let r;d.iGM(r=d.CRH())&&(i.headerTemplate=r.first),d.iGM(r=d.CRH())&&(i.itemTemplate=r.first),d.iGM(r=d.CRH())&&(i.childItems=r.first)}},inputs:{animation:"animation",dataSource:"dataSource",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableRtl:"enableRtl",expandMode:"expandMode",expandedIndices:"expandedIndices",headerTemplate:"headerTemplate",height:"height",itemTemplate:"itemTemplate",items:"items",locale:"locale",width:"width"},outputs:{clicked:"clicked",created:"created",destroyed:"destroyed",expanded:"expanded",expanding:"expanding",expandedIndicesChange:"expandedIndicesChange"},features:[d.qOj],ngContentSelectors:rR,decls:1,vars:0,template:function(t,i){1&t&&(d.F$t(nR),d.Hsn(0))},encapsulation:2,changeDetection:0}),n})();oR([Ni(),aR("design:type",Object)],vk.prototype,"headerTemplate",void 0),oR([Ni(),aR("design:type",Object)],vk.prototype,"itemTemplate",void 0),vk=oR([hn([fi]),aR("design:paramtypes",[d.SBq,d.Qsj,d.s_b,d.zs3])],vk);let h7=["align","cssClass","disabled","htmlAttributes","id","overflow","prefixIcon","showAlwaysInPopup","showTextOn","suffixIcon","template","text","tooltipText","type","visible","width"],u7=["click"],qH=(()=>{class n extends xu{constructor(t){super(),this.viewContainerRef=t,ys("currentInstance",this,this.viewContainerRef),this.registerEvents(u7),this.directivePropList=h7}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b))},n.\u0275dir=d.lG2({type:n,selectors:[["e-item"]],contentQueries:function(t,i,s){if(1&t&&d.Suo(s,jH,5),2&t){let r;d.iGM(r=d.CRH())&&(i.template=r.first)}},inputs:{align:"align",cssClass:"cssClass",disabled:"disabled",htmlAttributes:"htmlAttributes",id:"id",overflow:"overflow",prefixIcon:"prefixIcon",showAlwaysInPopup:"showAlwaysInPopup",showTextOn:"showTextOn",suffixIcon:"suffixIcon",template:"template",text:"text",tooltipText:"tooltipText",type:"type",visible:"visible",width:"width"},outputs:{click:"click"},features:[d.qOj]}),n})();!function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);s>3&&r&&Object.defineProperty(e,t,r)}([Ni(),function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",Object)}()],qH.prototype,"template",void 0);let d7=(()=>{class n extends Tu{constructor(){super("items")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["e-items"]],contentQueries:function(t,i,s){if(1&t&&d.Suo(s,qH,4),2&t){let r;d.iGM(r=d.CRH())&&(i.children=r)}},features:[d.qOj]}),n})();const m7=["beforeCreate","clicked","created","destroyed"],g7=[""];let $H=(()=>{let n=class extends ul{constructor(t,i,s,r){super(),this.ngEle=t,this.srenderer=i,this.viewContainerRef=s,this.injector=r,this.tags=["items"],this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(m7),this.addTwoWay.call(this,g7),ys("currentInstance",this,this.viewContainerRef),this.containerContext=new fi}ngOnInit(){this.containerContext.ngOnInit(this)}ngAfterViewInit(){this.containerContext.ngAfterViewInit(this)}ngOnDestroy(){this.containerContext.ngOnDestroy(this)}ngAfterContentChecked(){this.tagObjects[0].instance=this.childItems,this.containerContext.ngAfterContentChecked(this)}};return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ejs-toolbar"]],contentQueries:function(t,i,s){if(1&t&&d.Suo(s,d7,5),2&t){let r;d.iGM(r=d.CRH())&&(i.childItems=r.first)}},inputs:{allowKeyboard:"allowKeyboard",cssClass:"cssClass",enableCollision:"enableCollision",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableRtl:"enableRtl",height:"height",items:"items",locale:"locale",overflowMode:"overflowMode",scrollStep:"scrollStep",width:"width"},outputs:{beforeCreate:"beforeCreate",clicked:"clicked",created:"created",destroyed:"destroyed"},features:[d.qOj],ngContentSelectors:rR,decls:1,vars:0,template:function(t,i){1&t&&(d.F$t(nR),d.Hsn(0))},encapsulation:2,changeDetection:0}),n})();$H=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r}([hn([fi]),function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",e)}(0,[d.SBq,d.Qsj,d.s_b,d.zs3])],$H);const b7=["beforeClose","beforeItemRender","beforeOpen","created","onClose","onOpen","select"],C7=[""];let YH=(()=>{let n=class extends LE{constructor(t,i,s,r){super(),this.ngEle=t,this.srenderer=i,this.viewContainerRef=s,this.injector=r,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(b7),this.addTwoWay.call(this,C7),ys("currentInstance",this,this.viewContainerRef),this.context=new fi}ngOnInit(){this.context.ngOnInit(this)}ngAfterViewInit(){this.context.ngAfterViewInit(this)}ngOnDestroy(){this.context.ngOnDestroy(this)}ngAfterContentChecked(){this.context.ngAfterContentChecked(this)}};return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ejs-contextmenu"]],inputs:{animationSettings:"animationSettings",cssClass:"cssClass",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enableScrolling:"enableScrolling",fields:"fields",filter:"filter",hoverDelay:"hoverDelay",items:"items",locale:"locale",showItemOnClick:"showItemOnClick",target:"target",template:"template"},outputs:{beforeClose:"beforeClose",beforeItemRender:"beforeItemRender",beforeOpen:"beforeOpen",created:"created",onClose:"onClose",onOpen:"onOpen",select:"select"},features:[d.qOj],decls:0,vars:0,template:function(t,i){},encapsulation:2,changeDetection:0}),n})();YH=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r}([hn([fi]),function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",e)}(0,[d.SBq,d.Qsj,d.s_b,d.zs3])],YH);let E7=["disabled","iconCss","text","url"],w7=[],S7=(()=>{class n extends xu{constructor(t){super(),this.viewContainerRef=t,ys("currentInstance",this,this.viewContainerRef),this.registerEvents(w7),this.directivePropList=E7}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b))},n.\u0275dir=d.lG2({type:n,selectors:[["e-breadcrumb-item"]],inputs:{disabled:"disabled",iconCss:"iconCss",text:"text",url:"url"},features:[d.qOj]}),n})(),_7=(()=>{class n extends Tu{constructor(){super("items")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["e-breadcrumb-items"]],contentQueries:function(t,i,s){if(1&t&&d.Suo(s,S7,4),2&t){let r;d.iGM(r=d.CRH())&&(i.children=r)}},features:[d.qOj]}),n})();var lR=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},cR=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)};const I7=["beforeItemRender","created","itemClick","activeItemChange"],x7=["activeItem"];let bk=(()=>{let n=class extends Ha{constructor(t,i,s,r){super(),this.ngEle=t,this.srenderer=i,this.viewContainerRef=s,this.injector=r,this.tags=["items"],this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(I7),this.addTwoWay.call(this,x7),ys("currentInstance",this,this.viewContainerRef),this.context=new fi}ngOnInit(){this.context.ngOnInit(this)}ngAfterViewInit(){this.context.ngAfterViewInit(this)}ngOnDestroy(){this.context.ngOnDestroy(this)}ngAfterContentChecked(){this.tagObjects[0].instance=this.childItems,this.context.ngAfterContentChecked(this)}};return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ejs-breadcrumb"]],contentQueries:function(t,i,s){if(1&t&&(d.Suo(s,Qq,5),d.Suo(s,HH,5),d.Suo(s,_7,5)),2&t){let r;d.iGM(r=d.CRH())&&(i.separatorTemplate=r.first),d.iGM(r=d.CRH())&&(i.itemTemplate=r.first),d.iGM(r=d.CRH())&&(i.childItems=r.first)}},inputs:{activeItem:"activeItem",cssClass:"cssClass",disabled:"disabled",enableActiveItemNavigation:"enableActiveItemNavigation",enableNavigation:"enableNavigation",enablePersistence:"enablePersistence",enableRtl:"enableRtl",itemTemplate:"itemTemplate",items:"items",locale:"locale",maxItems:"maxItems",overflowMode:"overflowMode",separatorTemplate:"separatorTemplate",url:"url"},outputs:{beforeItemRender:"beforeItemRender",created:"created",itemClick:"itemClick",activeItemChange:"activeItemChange"},features:[d.qOj],decls:0,vars:0,template:function(t,i){},encapsulation:2,changeDetection:0}),n})();lR([Ni(),cR("design:type",Object)],bk.prototype,"separatorTemplate",void 0),lR([Ni(),cR("design:type",Object)],bk.prototype,"itemTemplate",void 0),bk=lR([hn([fi]),cR("design:paramtypes",[d.SBq,d.Qsj,d.s_b,d.zs3])],bk);var hR=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},uR=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)};let T7=["content","cssClass","disabled","header","headerTemplate","id","visible"],A7=[],TI=(()=>{class n extends xu{constructor(t){super(),this.viewContainerRef=t,ys("currentInstance",this,this.viewContainerRef),this.registerEvents(A7),this.directivePropList=T7}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b))},n.\u0275dir=d.lG2({type:n,selectors:[["e-tabitem"]],contentQueries:function(t,i,s){if(1&t&&(d.Suo(s,BH,5),d.Suo(s,Jq,5),d.Suo(s,VH,5)),2&t){let r;d.iGM(r=d.CRH())&&(i.content=r.first),d.iGM(r=d.CRH())&&(i.header_text=r.first),d.iGM(r=d.CRH())&&(i.headerTemplate=r.first)}},inputs:{content:"content",cssClass:"cssClass",disabled:"disabled",header:"header",headerTemplate:"headerTemplate",id:"id",visible:"visible"},features:[d.qOj]}),n})();hR([Ni(),uR("design:type",Object)],TI.prototype,"content",void 0),hR([Ni(),uR("design:type",Object)],TI.prototype,"header_text",void 0),hR([Ni(),uR("design:type",Object)],TI.prototype,"headerTemplate",void 0);let XH=(()=>{class n extends Tu{constructor(){super("items")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["e-tabitems"]],contentQueries:function(t,i,s){if(1&t&&d.Suo(s,TI,4),2&t){let r;d.iGM(r=d.CRH())&&(i.children=r)}},features:[d.qOj]}),n})();const O7=["added","adding","created","destroyed","dragged","dragging","onDragStart","removed","removing","selected","selecting"],M7=[""];let Ck=(()=>{let n=class extends yn{constructor(t,i,s,r){super(),this.ngEle=t,this.srenderer=i,this.viewContainerRef=s,this.injector=r,this.tags=["items"],this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(O7),this.addTwoWay.call(this,M7),ys("currentInstance",this,this.viewContainerRef),this.containerContext=new fi}ngOnInit(){this.containerContext.ngOnInit(this)}ngAfterViewInit(){this.containerContext.ngAfterViewInit(this)}ngOnDestroy(){this.containerContext.ngOnDestroy(this)}ngAfterContentChecked(){this.tagObjects[0].instance=this.childItems,this.containerContext.ngAfterContentChecked(this)}};return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ejs-tab"]],contentQueries:function(t,i,s){if(1&t&&d.Suo(s,XH,5),2&t){let r;d.iGM(r=d.CRH())&&(i.childItems=r.first)}},inputs:{allowDragAndDrop:"allowDragAndDrop",animation:"animation",cssClass:"cssClass",dragArea:"dragArea",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableRtl:"enableRtl",headerPlacement:"headerPlacement",height:"height",heightAdjustMode:"heightAdjustMode",items:"items",loadOn:"loadOn",locale:"locale",overflowMode:"overflowMode",reorderActiveTab:"reorderActiveTab",scrollStep:"scrollStep",selectedItem:"selectedItem",showCloseButton:"showCloseButton",width:"width"},outputs:{added:"added",adding:"adding",created:"created",destroyed:"destroyed",dragged:"dragged",dragging:"dragging",onDragStart:"onDragStart",removed:"removed",removing:"removing",selected:"selected",selecting:"selecting"},features:[d.qOj],ngContentSelectors:rR,decls:1,vars:0,template:function(t,i){1&t&&(d.F$t(nR),d.Hsn(0))},encapsulation:2,changeDetection:0}),n})();Ck=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r}([hn([fi]),function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",e)}(0,[d.SBq,d.Qsj,d.s_b,d.zs3])],Ck);let dR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[ti]]}),n})();var QH=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},JH=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)};const P7=["actionFailure","created","dataBound","dataSourceChanged","destroyed","drawNode","keyPress","nodeChecked","nodeChecking","nodeClicked","nodeCollapsed","nodeCollapsing","nodeDragStart","nodeDragStop","nodeDragging","nodeDropped","nodeEdited","nodeEditing","nodeExpanded","nodeExpanding","nodeSelected","nodeSelecting"],L7=[""];let pR=(()=>{let n=class extends Ji{constructor(t,i,s,r){super(),this.ngEle=t,this.srenderer=i,this.viewContainerRef=s,this.injector=r,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(P7),this.addTwoWay.call(this,L7),ys("currentInstance",this,this.viewContainerRef),this.context=new fi}ngOnInit(){this.context.ngOnInit(this)}ngAfterViewInit(){this.context.ngAfterViewInit(this)}ngOnDestroy(){this.context.ngOnDestroy(this)}ngAfterContentChecked(){this.context.ngAfterContentChecked(this)}};return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ejs-treeview"]],contentQueries:function(t,i,s){if(1&t&&d.Suo(s,e7,5),2&t){let r;d.iGM(r=d.CRH())&&(i.nodeTemplate=r.first)}},inputs:{allowDragAndDrop:"allowDragAndDrop",allowEditing:"allowEditing",allowMultiSelection:"allowMultiSelection",allowTextWrap:"allowTextWrap",animation:"animation",autoCheck:"autoCheck",checkedNodes:"checkedNodes",cssClass:"cssClass",disabled:"disabled",dragArea:"dragArea",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableRtl:"enableRtl",expandOn:"expandOn",expandedNodes:"expandedNodes",fields:"fields",fullRowNavigable:"fullRowNavigable",fullRowSelect:"fullRowSelect",loadOnDemand:"loadOnDemand",locale:"locale",nodeTemplate:"nodeTemplate",selectedNodes:"selectedNodes",showCheckBox:"showCheckBox",sortOrder:"sortOrder"},outputs:{actionFailure:"actionFailure",created:"created",dataBound:"dataBound",dataSourceChanged:"dataSourceChanged",destroyed:"destroyed",drawNode:"drawNode",keyPress:"keyPress",nodeChecked:"nodeChecked",nodeChecking:"nodeChecking",nodeClicked:"nodeClicked",nodeCollapsed:"nodeCollapsed",nodeCollapsing:"nodeCollapsing",nodeDragStart:"nodeDragStart",nodeDragStop:"nodeDragStop",nodeDragging:"nodeDragging",nodeDropped:"nodeDropped",nodeEdited:"nodeEdited",nodeEditing:"nodeEditing",nodeExpanded:"nodeExpanded",nodeExpanding:"nodeExpanding",nodeSelected:"nodeSelected",nodeSelecting:"nodeSelecting"},features:[d.qOj],decls:0,vars:0,template:function(t,i){},encapsulation:2,changeDetection:0}),n})();QH([Ni(),JH("design:type",Object)],pR.prototype,"nodeTemplate",void 0),pR=QH([hn([fi]),JH("design:paramtypes",[d.SBq,d.Qsj,d.s_b,d.zs3])],pR);const F7=["change","close","created","destroyed","open","isOpenChange"],B7=["isOpen"];let tj=(()=>{let n=class extends Dr{constructor(t,i,s,r){super(),this.ngEle=t,this.srenderer=i,this.viewContainerRef=s,this.injector=r,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(F7),this.addTwoWay.call(this,B7),ys("currentInstance",this,this.viewContainerRef),this.containerContext=new fi}ngOnInit(){this.containerContext.ngOnInit(this)}ngAfterViewInit(){this.containerContext.ngAfterViewInit(this)}ngOnDestroy(){this.containerContext.ngOnDestroy(this)}ngAfterContentChecked(){this.containerContext.ngAfterContentChecked(this)}};return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ejs-sidebar"]],inputs:{animate:"animate",closeOnDocumentClick:"closeOnDocumentClick",dockSize:"dockSize",enableDock:"enableDock",enableGestures:"enableGestures",enablePersistence:"enablePersistence",enableRtl:"enableRtl",height:"height",isOpen:"isOpen",locale:"locale",mediaQuery:"mediaQuery",position:"position",showBackdrop:"showBackdrop",target:"target",type:"type",width:"width",zIndex:"zIndex"},outputs:{change:"change",close:"close",created:"created",destroyed:"destroyed",open:"open",isOpenChange:"isOpenChange"},features:[d.qOj],ngContentSelectors:t7,decls:1,vars:0,template:function(t,i){1&t&&(d.F$t(),d.Hsn(0))},encapsulation:2,changeDetection:0}),n})();tj=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r}([hn([fi]),function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",e)}(0,[d.SBq,d.Qsj,d.s_b,d.zs3])],tj);let V7=["iconCss","id","items","separator","text","url"],H7=[],j7=(()=>{class n extends xu{constructor(t){super(),this.viewContainerRef=t,ys("currentInstance",this,this.viewContainerRef),this.registerEvents(H7),this.directivePropList=V7}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b))},n.\u0275dir=d.lG2({type:n,selectors:[["e-menu-item"]],inputs:{iconCss:"iconCss",id:"id",items:"items",separator:"separator",text:"text",url:"url"},features:[d.qOj]}),n})(),U7=(()=>{class n extends Tu{constructor(){super("items")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["e-menu-items"]],contentQueries:function(t,i,s){if(1&t&&d.Suo(s,j7,4),2&t){let r;d.iGM(r=d.CRH())&&(i.children=r)}},features:[d.qOj]}),n})();var sj=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},nj=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)};const z7=["beforeClose","beforeItemRender","beforeOpen","created","onClose","onOpen","select"],W7=[""];let fR=(()=>{let n=class extends Vd{constructor(t,i,s,r){super(),this.ngEle=t,this.srenderer=i,this.viewContainerRef=s,this.injector=r,this.tags=["items"],this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(z7),this.addTwoWay.call(this,W7),ys("currentInstance",this,this.viewContainerRef),this.context=new fi}ngOnInit(){this.context.ngOnInit(this)}ngAfterViewInit(){this.context.ngAfterViewInit(this)}ngOnDestroy(){this.context.ngOnDestroy(this)}ngAfterContentChecked(){this.tagObjects[0].instance=this.childItems,this.context.ngAfterContentChecked(this)}};return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ejs-menu"]],contentQueries:function(t,i,s){if(1&t&&(d.Suo(s,jH,5),d.Suo(s,U7,5)),2&t){let r;d.iGM(r=d.CRH())&&(i.template=r.first),d.iGM(r=d.CRH())&&(i.childItems=r.first)}},inputs:{animationSettings:"animationSettings",cssClass:"cssClass",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enableScrolling:"enableScrolling",fields:"fields",filter:"filter",hamburgerMode:"hamburgerMode",hoverDelay:"hoverDelay",items:"items",locale:"locale",orientation:"orientation",showItemOnClick:"showItemOnClick",target:"target",template:"template",title:"title"},outputs:{beforeClose:"beforeClose",beforeItemRender:"beforeItemRender",beforeOpen:"beforeOpen",created:"created",onClose:"onClose",onOpen:"onOpen",select:"select"},features:[d.qOj],decls:0,vars:0,template:function(t,i){},encapsulation:2,changeDetection:0}),n})();sj([Ni(),nj("design:type",Object)],fR.prototype,"template",void 0),fR=sj([hn([fi]),nj("design:paramtypes",[d.SBq,d.Qsj,d.s_b,d.zs3])],fR);var tn=G(4976),yy=G(259);class jE{constructor(e){return e}}class mR{constructor(){return(0,yy.C6)()}}const gR=new d.OlP("angularfire2._apps"),$7={provide:jE,useFactory:function q7(n){return n&&1===n.length?n[0]:new jE((0,yy.Mq)())},deps:[[new d.FiY,gR]]},G7={provide:mR,deps:[[new d.FiY,gR]]};function Y7(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new jE(i)}}let K7=(()=>{class n{constructor(t){(0,yy.KN)("angularfire",tn.q4.full,"core"),(0,yy.KN)("angularfire",tn.q4.full,"app"),(0,yy.KN)("angular",d.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[$7,G7]}),n})();function Z7(n,...e){return{ngModule:K7,providers:[{provide:gR,useFactory:Y7(n),multi:!0,deps:[d.R0b,d.zs3,tn.HU,...e]}]}}const X7=(0,tn.u3)(yy.ZF,!0);var um=G(6881),Ek=G(4859),sn=G(2090),vy=G(1877);const yR=new Map,oj={activated:!1,tokenObservers:[]},Q7={initialized:!1,enabled:!1};function bo(n){return yR.get(n)||Object.assign({},oj)}function wk(){return Q7}class n9{constructor(e,t,i,s,r){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=s,this.upperBound=r,this.pending=null,this.nextErrorWaitInterval=s,s>r)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ne.Z)(function*(){t.stop();try{t.pending=new sn.BH,yield function r9(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new sn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ml=new sn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function bR(n){if(!bo(n).activated)throw ml.create("use-before-activation",{appName:n.name})}function Ik(n,e){return ER.apply(this,arguments)}function ER(){return(ER=(0,Ne.Z)(function*({url:n,body:e},t){const i={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const E=yield s.getHeartbeatsHeader();E&&(i["X-Firebase-Client"]=E)}const r={method:"POST",body:JSON.stringify(e),headers:i};let o,a;try{o=yield fetch(n,r)}catch(E){throw ml.create("fetch-network-error",{originalErrorMessage:null==E?void 0:E.message})}if(200!==o.status)throw ml.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(E){throw ml.create("fetch-parse-error",{originalErrorMessage:null==E?void 0:E.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw ml.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const p=1e3*Number(u[1]),y=Date.now();return{token:a.token,expireTimeMillis:y+p,issuedAtTimeMillis:y}})).apply(this,arguments)}function lj(n,e){const{projectId:t,appId:i,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${i}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const AI="firebase-app-check-store";let xk=null;function hj(){return xk||(xk=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var s;e(ml.create("storage-open",{originalErrorMessage:null===(s=i.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(AI,{keyPath:"compositeKey"})}}catch(t){e(ml.create("storage-open",{originalErrorMessage:null==t?void 0:t.message}))}}),xk)}function wR(){return(wR=(0,Ne.Z)(function*(n,e){const i=(yield hj()).transaction(AI,"readwrite"),r=i.objectStore(AI).put({compositeKey:n,value:e});return new Promise((o,a)=>{r.onsuccess=u=>{o()},i.onerror=u=>{var p;a(ml.create("storage-set",{originalErrorMessage:null===(p=u.target.error)||void 0===p?void 0:p.message}))}})})).apply(this,arguments)}const DI=new vy.Yd("@firebase/app-check");function IR(n,e){return(0,sn.hl)()?function d9(n,e){return function uj(n,e){return wR.apply(this,arguments)}(function pj(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{DI.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function TR(){return wk().enabled}function AR(){return DR.apply(this,arguments)}function DR(){return(DR=(0,Ne.Z)(function*(){const n=wk();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const v9={error:"UNKNOWN_ERROR"};function b9(n){return sn.US.encodeString(JSON.stringify(n),!1)}function Tk(n){return kR.apply(this,arguments)}function kR(){return(kR=(0,Ne.Z)(function*(n,e=!1){const t=n.app;bR(t);const i=bo(t);let r,s=i.token;if(s&&!UE(s)&&(i.token=void 0,s=void 0),!s){const u=yield i.cachedTokenPromise;u&&(UE(u)?s=u:yield IR(t,void 0))}if(!e&&s&&UE(s))return{token:s.token};let a,o=!1;if(TR()){i.exchangeTokenPromise||(i.exchangeTokenPromise=Ik(lj(t,yield AR()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);const u=yield i.exchangeTokenPromise;return yield IR(t,u),i.token=u,{token:u.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),s=yield bo(t).exchangeTokenPromise}catch(u){"appCheck/throttled"===u.code?DI.warn(u.message):DI.error(u),r=u}return s?r?a=UE(s)?{token:s.token,internalError:r}:yj(r):(a={token:s.token},i.token=s,yield IR(t,s)):a=yj(r),o&&gj(t,a),a})).apply(this,arguments)}function OR(){return(OR=(0,Ne.Z)(function*(n){const e=n.app;bR(e);const{provider:t}=bo(e);if(TR()){const i=yield AR(),{token:s}=yield Ik(lj(e,i),n.heartbeatServiceProvider);return{token:s}}{const{token:i}=yield t.getToken();return{token:i}}})).apply(this,arguments)}function PR(n,e){const t=bo(n),i=t.tokenObservers.filter(s=>s.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function mj(n){const{app:e}=n,t=bo(e);let i=t.tokenRefresher;i||(i=function C9(n){const{app:e}=n;return new n9((0,Ne.Z)(function*(){let i;if(i=bo(e).token?yield Tk(n,!0):yield Tk(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const t=bo(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function gj(n,e){const t=bo(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(s){}}function UE(n){return n.expireTimeMillis-Date.now()>0}function yj(n){return{token:b9(v9),error:n}}class E9{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=bo(this.app);for(const t of e)PR(this.app,t.next);return Promise.resolve()}}const Ij="app-check-internal";!function R9(){(0,um._registerComponent)(new Ek.wA("app-check",n=>function w9(n,e){return new E9(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Ij).initialize()})),(0,um._registerComponent)(new Ek.wA(Ij,n=>function S9(n){return{getToken:e=>Tk(n,e),getLimitedUseToken:()=>function fj(n){return OR.apply(this,arguments)}(n),addTokenListener:e=>function MR(n,e,t,i){const{app:s}=n,r=bo(s);if(r.tokenObservers=[...r.tokenObservers,{next:t,error:i,type:e}],r.token&&UE(r.token)){const a=r.token;Promise.resolve().then(()=>{t({token:a.token}),mj(n)}).catch(()=>{})}r.cachedTokenPromise.then(()=>mj(n))}(n,"INTERNAL",e),removeTokenListener:e=>PR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,um.registerVersion)("@firebase/app-check","0.8.0")}();class kI{constructor(){return(0,tn.vb)("app-check")}}"undefined"!=typeof window&&window;var Dk=G(9914);class kk{constructor(e){return e}}class Aj{constructor(){return(0,tn.vb)("auth")}}const BR=new d.OlP("angularfire2.auth-instances");function j9(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new kk(i)}}const U9={provide:Aj,deps:[[new d.FiY,BR]]},z9={provide:kk,useFactory:function H9(n,e){const t=(0,tn.JM)("auth",n,e);return t&&new kk(t)},deps:[[new d.FiY,BR],jE]};let W9=(()=>{class n{constructor(){(0,yy.KN)("angularfire",tn.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[z9,U9]}),n})();function q9(n,...e){return{ngModule:W9,providers:[{provide:BR,useFactory:j9(n),multi:!0,deps:[d.R0b,d.zs3,tn.HU,mR,[new d.FiY,kI],...e]}]}}const Dj=(0,tn.u3)(Dk.o,!0),$9=(0,tn.u3)(Dk.j,!0),G9=(0,tn.u3)(Dk.c,!0);var Y9=G(4986);function VR(){return(0,or.e)((n,e)=>{let t,i=!1;n.subscribe(new Fr.Q(e,s=>{const r=t;t=s,i&&e.next([r,s]),i=!0}))})}function Z9(n,e){return n===e}var $t,zd=G(2011),X9=(G(9568),G(3942)),Q9="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Wd={},HR=HR||{},cs=Q9||self;function Ok(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function OI(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var jR="closure_uid_"+(1e9*Math.random()>>>0),e$=0;function t$(n,e,t){return n.call.apply(n.bind,arguments)}function i$(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,i),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function jl(n,e,t){return(jl=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?t$:i$).apply(null,arguments)}function Mk(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function ja(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(i,s,r){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(i,o)}}function by(){this.s=this.s,this.o=this.o}by.prototype.s=!1,by.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function J9(n){Object.prototype.hasOwnProperty.call(n,jR)&&n[jR]||(n[jR]=++e$)}(this)},by.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const kj=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function UR(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function Oj(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(Ok(i)){const s=n.length||0,r=i.length||0;n.length=s+r;for(let o=0;o<r;o++)n[s+o]=i[o]}else n.push(i)}}function Ul(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ul.prototype.h=function(){this.defaultPrevented=!0};var n$=function(){if(!cs.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{cs.addEventListener("test",()=>{},e),cs.removeEventListener("test",()=>{},e)}catch(t){}return n}();function MI(n){return/^[\s\xa0]*$/.test(n)}function Pk(){var n=cs.navigator;return n&&(n=n.userAgent)?n:""}function Hp(n){return-1!=Pk().indexOf(n)}function zR(n){return zR[" "](n),n}zR[" "]=function(){};var qR,n,o$=Hp("Opera"),zE=Hp("Trident")||Hp("MSIE"),Mj=Hp("Edge"),WR=Mj||zE,Pj=Hp("Gecko")&&!(-1!=Pk().toLowerCase().indexOf("webkit")&&!Hp("Edge"))&&!(Hp("Trident")||Hp("MSIE"))&&!Hp("Edge"),a$=-1!=Pk().toLowerCase().indexOf("webkit")&&!Hp("Edge");function Lj(){var n=cs.document;return n?n.documentMode:void 0}e:{var $R="",GR=(n=Pk(),Pj?/rv:([^\);]+)(\)|;)/.exec(n):Mj?/Edge\/([\d\.]+)/.exec(n):zE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):a$?/WebKit\/(\S+)/.exec(n):o$?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(GR&&($R=GR?GR[1]:""),zE){var YR=Lj();if(null!=YR&&YR>parseFloat($R)){qR=String(YR);break e}}qR=$R}var l$=cs.document&&zE&&(Lj()||parseInt(qR,10))||void 0;function PI(n,e){if(Ul.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Pj){e:{try{zR(e.nodeName);var s=!0;break e}catch(r){}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:c$[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&PI.$.h.call(this)}}ja(PI,Ul);var c$={2:"touch",3:"pen",4:"mouse"};PI.prototype.h=function(){PI.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var LI="closure_listenable_"+(1e6*Math.random()|0),h$=0;function u$(n,e,t,i,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.la=s,this.key=++h$,this.fa=this.ia=!1}function Lk(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function ZR(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function Nj(n){const e={};for(const t in n)e[t]=n[t];return e}const Fj="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Bj(n,e){let t,i;for(let s=1;s<arguments.length;s++){for(t in i=arguments[s],i)n[t]=i[t];for(let r=0;r<Fj.length;r++)t=Fj[r],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function Rk(n){this.src=n,this.g={},this.h=0}function XR(n,e){var t=e.type;if(t in n.g){var r,i=n.g[t],s=kj(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Lk(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function QR(n,e,t,i){for(var s=0;s<n.length;++s){var r=n[s];if(!r.fa&&r.listener==e&&r.capture==!!t&&r.la==i)return s}return-1}Rk.prototype.add=function(n,e,t,i,s){var r=n.toString();(n=this.g[r])||(n=this.g[r]=[],this.h++);var o=QR(n,e,i,s);return-1<o?(e=n[o],t||(e.ia=!1)):((e=new u$(e,this.src,r,!!i,s)).ia=t,n.push(e)),e};var JR="closure_lm_"+(1e6*Math.random()|0),eN={};function Vj(n,e,t,i,s){if(i&&i.once)return jj(n,e,t,i,s);if(Array.isArray(e)){for(var r=0;r<e.length;r++)Vj(n,e[r],t,i,s);return null}return t=nN(t),n&&n[LI]?n.O(e,t,OI(i)?!!i.capture:!!i,s):Hj(n,e,t,!1,i,s)}function Hj(n,e,t,i,s,r){if(!e)throw Error("Invalid event type");var o=OI(s)?!!s.capture:!!s,a=iN(n);if(a||(n[JR]=a=new Rk(n)),(t=a.add(e,t,i,o,r)).proxy)return t;if(i=function p$(){const e=f$;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)n$||(s=o),void 0===s&&(s=!1),n.addEventListener(e.toString(),i,s);else if(n.attachEvent)n.attachEvent(zj(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function jj(n,e,t,i,s){if(Array.isArray(e)){for(var r=0;r<e.length;r++)jj(n,e[r],t,i,s);return null}return t=nN(t),n&&n[LI]?n.P(e,t,OI(i)?!!i.capture:!!i,s):Hj(n,e,t,!0,i,s)}function Uj(n,e,t,i,s){if(Array.isArray(e))for(var r=0;r<e.length;r++)Uj(n,e[r],t,i,s);else i=OI(i)?!!i.capture:!!i,t=nN(t),n&&n[LI]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=QR(r=n.g[e],t,i,s))&&(Lk(r[t]),Array.prototype.splice.call(r,t,1),0==r.length&&(delete n.g[e],n.h--))):n&&(n=iN(n))&&(e=n.g[e.toString()],n=-1,e&&(n=QR(e,t,i,s)),(t=-1<n?e[n]:null)&&tN(t))}function tN(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[LI])XR(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(zj(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=iN(e))?(XR(t,n),0==t.h&&(t.src=null,e[JR]=null)):Lk(n)}}}function zj(n){return n in eN?eN[n]:eN[n]="on"+n}function f$(n,e){if(n.fa)n=!0;else{e=new PI(e,this);var t=n.listener,i=n.la||n.src;n.ia&&tN(n),n=t.call(i,e)}return n}function iN(n){return(n=n[JR])instanceof Rk?n:null}var sN="__closure_events_fn_"+(1e9*Math.random()>>>0);function nN(n){return"function"==typeof n?n:(n[sN]||(n[sN]=function(e){return n.handleEvent(e)}),n[sN])}function Ua(){by.call(this),this.i=new Rk(this),this.S=this,this.J=null}function gl(n,e){var t,i=n.J;if(i)for(t=[];i;i=i.J)t.push(i);if(n=n.S,i=e.type||e,"string"==typeof e)e=new Ul(e,n);else if(e instanceof Ul)e.target=e.target||n;else{var s=e;Bj(e=new Ul(i,n),s)}if(s=!0,t)for(var r=t.length-1;0<=r;r--){var o=e.g=t[r];s=Nk(o,i,!0,e)&&s}if(s=Nk(o=e.g=n,i,!0,e)&&s,s=Nk(o,i,!1,e)&&s,t)for(r=0;r<t.length;r++)s=Nk(o=e.g=t[r],i,!1,e)&&s}function Nk(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,r=0;r<e.length;++r){var o=e[r];if(o&&!o.fa&&o.capture==t){var a=o.listener,u=o.la||o.src;o.ia&&XR(n.i,o),s=!1!==a.call(u,i)&&s}}return s&&!i.defaultPrevented}ja(Ua,by),Ua.prototype[LI]=!0,Ua.prototype.removeEventListener=function(n,e,t,i){Uj(this,n,e,t,i)},Ua.prototype.N=function(){if(Ua.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)Lk(t[i]);delete n.g[e],n.h--}}this.J=null},Ua.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},Ua.prototype.P=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var rN=cs.JSON.stringify;function g$(){var n=oN;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Wj=new class m${constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new v$,n=>n.reset());class v${constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function b$(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function C$(n){cs.setTimeout(()=>{throw n},0)}let RI,NI=!1,oN=new class y${constructor(){this.h=this.g=null}add(e,t){const i=Wj.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}},qj=()=>{const n=cs.Promise.resolve(void 0);RI=()=>{n.then(E$)}};var E$=()=>{for(var n;n=g$();){try{n.h.call(n.g)}catch(t){C$(t)}var e=Wj;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}NI=!1};function Fk(n,e){Ua.call(this),this.h=n||1,this.g=e||cs,this.j=jl(this.qb,this),this.l=Date.now()}function aN(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function lN(n,e,t){if("function"==typeof n)t&&(n=jl(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=jl(n.handleEvent,n)}return 2147483647<Number(e)?-1:cs.setTimeout(n,e||0)}function $j(n){n.g=lN(()=>{n.g=null,n.i&&(n.i=!1,$j(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ja(Fk,Ua),($t=Fk.prototype).ga=!1,$t.T=null,$t.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),gl(this,"tick"),this.ga&&(aN(this),this.start()))}},$t.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},$t.N=function(){Fk.$.N.call(this),aN(this),delete this.g};class w$ extends by{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:$j(this)}N(){super.N(),this.g&&(cs.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function FI(n){by.call(this),this.h=n,this.g={}}ja(FI,by);var Gj=[];function Yj(n,e,t,i){Array.isArray(t)||(t&&(Gj[0]=t.toString()),t=Gj);for(var s=0;s<t.length;s++){var r=Vj(e,t[s],i||n.handleEvent,!1,n.h||n);if(!r)break;n.g[r.key]=r}}function Kj(n){ZR(n.g,function(e,t){this.g.hasOwnProperty(t)&&tN(e)},n),n.g={}}function Bk(){this.g=!0}function WE(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function x$(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var s=i[1];if(Array.isArray(s)&&!(1>s.length)){var r=s[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<s.length;o++)s[o]=""}}}return rN(t)}catch(a){return e}}(n,t)+(i?" "+i:"")})}FI.prototype.N=function(){FI.$.N.call(this),Kj(this)},FI.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Bk.prototype.Ea=function(){this.g=!1},Bk.prototype.info=function(){};var Pb={},Zj=null;function Vk(){return Zj=Zj||new Ua}function Xj(n){Ul.call(this,Pb.Ta,n)}function BI(n){const e=Vk();gl(e,new Xj(e))}function Qj(n,e){Ul.call(this,Pb.STAT_EVENT,n),this.stat=e}function vc(n){const e=Vk();gl(e,new Qj(e,n))}function Jj(n,e){Ul.call(this,Pb.Ua,n),this.size=e}function VI(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return cs.setTimeout(function(){n()},e)}Pb.Ta="serverreachability",ja(Xj,Ul),Pb.STAT_EVENT="statevent",ja(Qj,Ul),Pb.Ua="timingevent",ja(Jj,Ul);var Hk={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},e3={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function cN(){}function i3(){}cN.prototype.h=null;var dN,HI={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function hN(){Ul.call(this,"d")}function uN(){Ul.call(this,"c")}function jk(){}function jI(n,e,t,i){this.l=n,this.j=e,this.m=t,this.W=i||1,this.U=new FI(this),this.P=T$,this.V=new Fk(n=WR?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new s3}function s3(){this.i=null,this.g="",this.h=!1}ja(hN,Ul),ja(uN,Ul),ja(jk,cN),jk.prototype.g=function(){return new XMLHttpRequest},jk.prototype.i=function(){return{}},dN=new jk;var T$=45e3,pN={},Uk={};function fN(n,e,t){n.L=1,n.v=$k(dm(e)),n.s=t,n.S=!0,n3(n,null)}function n3(n,e){n.G=Date.now(),UI(n),n.A=dm(n.v);var t=n.A,i=n.W;Array.isArray(i)||(i=[String(i)]),f3(t.i,"t",i),n.C=0,t=n.l.J,n.h=new s3,n.g=B3(n.l,t?e:null,!n.s),0<n.O&&(n.M=new w$(jl(n.Pa,n,n.g),n.O)),Yj(n.U,n.g,"readystatechange",n.nb),e=n.I?Nj(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),BI(),function S$(n,e,t,i,s,r){n.info(function(){if(n.g)if(r)for(var o="",a=r.split("&"),u=0;u<a.length;u++){var p=a[u].split("=");if(1<p.length){var y=p[0];p=p[1];var E=y.split("_");o=2<=E.length&&"type"==E[1]?o+(y+"=")+p+"&":o+(y+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+i+") [attempt "+s+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.u,n.A,n.m,n.W,n.s)}function r3(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function o3(n,e,t){let s,i=!0;for(;!n.J&&n.C<t.length;){if(s=A$(n,t),s==Uk){4==e&&(n.o=4,vc(14),i=!1),WE(n.j,n.m,null,"[Incomplete Response]");break}if(s==pN){n.o=4,vc(15),WE(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}WE(n.j,n.m,s,null),mN(n,s)}r3(n)&&s!=Uk&&s!=pN&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,vc(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),wN(e),e.M=!0,vc(11))):(WE(n.j,n.m,t,"[Invalid Chunked Response]"),Lb(n),zI(n))}function A$(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?Uk:(t=Number(e.substring(t,i)),isNaN(t)?pN:(i+=1)+t>e.length?Uk:(e=e.slice(i,i+t),n.C=i+t,e))}function UI(n){n.Y=Date.now()+n.P,a3(n,n.P)}function a3(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=VI(jl(n.lb,n),e)}function zk(n){n.B&&(cs.clearTimeout(n.B),n.B=null)}function zI(n){0==n.l.H||n.J||L3(n.l,n)}function Lb(n){zk(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,aN(n.V),Kj(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function mN(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||gN(t.i,n)))if(!n.K&&gN(t.i,n)&&3==t.H){try{var i=t.Ja.g.parse(e)}catch(p){i=null}if(Array.isArray(i)&&3==i.length){var s=i;if(0==s[0])e:if(t.u)t.Fa=s[1],0<t.Fa-t.V&&37500>s[2]&&t.G&&0==t.A&&!t.v&&(t.v=VI(jl(t.ib,t),6e3));else{if(t.g){if(!(t.g.G+3e3<n.G))break e;Qk(t),Zk(t)}EN(t),vc(18)}if(1>=y3(t.i)&&t.oa){try{t.oa()}catch(p){}t.oa=void 0}}else Nb(t,11)}else if((n.K||t.g==n)&&Qk(t),!MI(e))for(s=t.Ja.g.parse(e),e=0;e<s.length;e++){let p=s[e];if(t.V=p[0],p=p[1],2==t.H)if("c"==p[0]){t.K=p[1],t.pa=p[2];const y=p[3];null!=y&&(t.ra=y,t.l.info("VER="+t.ra));const E=p[4];null!=E&&(t.Ga=E,t.l.info("SVER="+t.Ga));const _=p[5];null!=_&&"number"==typeof _&&0<_&&(t.L=i=1.5*_,t.l.info("backChannelRequestTimeoutMs_="+i)),i=t;const D=n.g;if(D){const L=D.g?D.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(L){var r=i.i;r.g||-1==L.indexOf("spdy")&&-1==L.indexOf("quic")&&-1==L.indexOf("h2")||(r.j=r.l,r.g=new Set,r.h&&(yN(r,r.h),r.h=null))}if(i.F){const V=D.g?D.g.getResponseHeader("X-HTTP-Session-Id"):null;V&&(i.Da=V,kr(i.I,i.F,V))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var o=n;if((i=t).wa=F3(i,i.J?i.pa:null,i.Y),o.K){v3(i.i,o);var a=o,u=i.L;u&&a.setTimeout(u),a.B&&(zk(a),UI(a)),i.g=o}else M3(i);0<t.j.length&&Xk(t)}else"stop"!=p[0]&&"close"!=p[0]||Nb(t,7);else 3==t.H&&("stop"==p[0]||"close"==p[0]?"stop"==p[0]?Nb(t,7):CN(t):"noop"!=p[0]&&t.h&&t.h.Aa(p),t.A=0)}BI()}catch(p){}}function l3(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Ok(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function k$(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(Ok(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function D$(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Ok(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),s=i.length,r=0;r<s;r++)e.call(void 0,i[r],t&&t[r],n)}($t=jI.prototype).setTimeout=function(n){this.P=n},$t.nb=function(n){n=n.target;const e=this.M;e&&3==jp(n)?e.l():this.Pa(n)},$t.Pa=function(n){try{if(n==this.g)e:{const y=jp(this.g);var e=this.g.Ia();if(this.g.da(),!(3>y)&&(3!=y||WR||this.g&&(this.h.h||this.g.ja()||x3(this.g)))){this.J||4!=y||7==e||BI(),zk(this);var t=this.g.da();this.ca=t;t:if(r3(this)){var i=x3(this.g);n="";var s=i.length,r=4==jp(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Lb(this),zI(this);var o="";break t}this.h.i=new cs.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:r&&e==s-1});i.splice(0,s),this.h.g+=n,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==t,function _$(n,e,t,i,s,r,o){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+r+" "+o})}(this.j,this.u,this.A,this.m,this.W,y,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!MI(a)){var p=a;break t}}p=null}if(!(t=p)){this.i=!1,this.o=3,vc(12),Lb(this),zI(this);break e}WE(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,mN(this,t)}this.S?(o3(this,y,o),WR&&this.i&&3==y&&(Yj(this.U,this.V,"tick",this.mb),this.V.start())):(WE(this.j,this.m,o,null),mN(this,o)),4==y&&Lb(this),this.i&&!this.J&&(4==y?L3(this.l,this):(this.i=!1,UI(this)))}else(function Y$(n){const e={};n=(n.g&&2<=jp(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<n.length;i++){if(MI(n[i]))continue;var t=b$(n[i]);const s=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const r=e[s]||[];e[s]=r,r.push(t)}!function d$(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(i){return i.join(", ")})})(this.g),400==t&&0<o.indexOf("Unknown SID")?(this.o=3,vc(12)):(this.o=0,vc(13)),Lb(this),zI(this)}}}catch(y){}},$t.mb=function(){if(this.g){var n=jp(this.g),e=this.g.ja();this.C<e.length&&(zk(this),o3(this,n,e),this.i&&4!=n&&UI(this))}},$t.cancel=function(){this.J=!0,Lb(this)},$t.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function I$(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(BI(),vc(17)),Lb(this),this.o=2,zI(this)):a3(this,this.Y-n)};var c3=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rb(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Rb){this.h=n.h,Wk(this,n.j),this.s=n.s,this.g=n.g,qk(this,n.m),this.l=n.l;var e=n.i,t=new $I;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),h3(this,t),this.o=n.o}else n&&(e=String(n).match(c3))?(this.h=!1,Wk(this,e[1]||"",!0),this.s=WI(e[2]||""),this.g=WI(e[3]||"",!0),qk(this,e[4]),this.l=WI(e[5]||"",!0),h3(this,e[6]||"",!0),this.o=WI(e[7]||"")):(this.h=!1,this.i=new $I(null,this.h))}function dm(n){return new Rb(n)}function Wk(n,e,t){n.j=t?WI(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function qk(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function h3(n,e,t){e instanceof $I?(n.i=e,function F$(n,e){e&&!n.j&&(Cy(n),n.i=null,n.g.forEach(function(t,i){var s=i.toLowerCase();i!=s&&(d3(this,i),f3(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=qI(e,R$)),n.i=new $I(e,n.h))}function kr(n,e,t){n.i.set(e,t)}function $k(n){return kr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function WI(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function qI(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,M$),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function M$(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Rb.prototype.toString=function(){var n=[],e=this.j;e&&n.push(qI(e,u3,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(qI(e,u3,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(qI(t,"/"==t.charAt(0)?L$:P$,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",qI(t,N$)),n.join("")};var u3=/[#\/\?@]/g,P$=/[#\?:]/g,L$=/[#\?]/g,R$=/[#\?@]/g,N$=/#/g;function $I(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Cy(n){n.g||(n.g=new Map,n.h=0,n.i&&function O$(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),s=null;if(0<=i){var r=n[t].substring(0,i);s=n[t].substring(i+1)}else r=n[t];e(r,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function d3(n,e){Cy(n),e=qE(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function p3(n,e){return Cy(n),e=qE(n,e),n.g.has(e)}function f3(n,e,t){d3(n,e),0<t.length&&(n.i=null,n.g.set(qE(n,e),UR(t)),n.h+=t.length)}function qE(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function m3(n){this.l=n||V$,n=cs.PerformanceNavigationTiming?0<(n=cs.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(cs.g&&cs.g.Ka&&cs.g.Ka()&&cs.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}($t=$I.prototype).add=function(n,e){Cy(this),this.i=null,n=qE(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},$t.forEach=function(n,e){Cy(this),this.g.forEach(function(t,i){t.forEach(function(s){n.call(e,s,i,this)},this)},this)},$t.ta=function(){Cy(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const s=n[i];for(let r=0;r<s.length;r++)t.push(e[i])}return t},$t.Z=function(n){Cy(this);let e=[];if("string"==typeof n)p3(this,n)&&(e=e.concat(this.g.get(qE(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},$t.set=function(n,e){return Cy(this),this.i=null,p3(this,n=qE(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},$t.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},$t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const r=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var s=r;""!==o[i]&&(s+="="+encodeURIComponent(String(o[i]))),n.push(s)}}return this.i=n.join("&")};var V$=10;function g3(n){return!!n.h||!!n.g&&n.g.size>=n.j}function y3(n){return n.h?1:n.g?n.g.size:0}function gN(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function yN(n,e){n.g?n.g.add(e):n.h=e}function v3(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function b3(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return UR(n.i)}function j$(){this.g=new class{stringify(n){return cs.JSON.stringify(n,void 0)}parse(n){return cs.JSON.parse(n,void 0)}}}function U$(n,e,t){const i=t||"";try{l3(n,function(s,r){let o=s;OI(s)&&(o=rN(s)),e.push(i+r+"="+encodeURIComponent(o))})}catch(s){throw e.push(i+"type="+encodeURIComponent("_badmap")),s}}function Gk(n,e,t,i,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(i)}catch(r){}}function GI(n){this.l=n.fc||null,this.j=n.ob||!1}function Yk(n,e){Ua.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=vN,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}m3.prototype.cancel=function(){if(this.i=b3(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},ja(GI,cN),GI.prototype.g=function(){return new Yk(this.l,this.j)},GI.prototype.i=function(n){return function(){return n}}({}),ja(Yk,Ua);var vN=0;function C3(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function YI(n){n.readyState=4,n.l=null,n.j=null,n.A=null,KI(n)}function KI(n){n.onreadystatechange&&n.onreadystatechange.call(n)}($t=Yk.prototype).open=function(n,e){if(this.readyState!=vN)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,KI(this)},$t.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||cs).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},$t.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,YI(this)),this.readyState=vN},$t.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,KI(this)),this.g&&(this.readyState=3,KI(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==cs.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;C3(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},$t.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?YI(this):KI(this),3==this.readyState&&C3(this)}},$t.Za=function(n){this.g&&(this.response=this.responseText=n,YI(this))},$t.Ya=function(n){this.g&&(this.response=n,YI(this))},$t.ka=function(){this.g&&YI(this)},$t.setRequestHeader=function(n,e){this.v.append(n,e)},$t.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},$t.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Yk.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var W$=cs.JSON.parse;function Co(n){Ua.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=E3,this.L=this.M=!1}ja(Co,Ua);var E3="",q$=/^https?$/i,$$=["POST","PUT"];function w3(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,S3(n),Kk(n)}function S3(n){n.F||(n.F=!0,gl(n,"complete"),gl(n,"error"))}function _3(n){if(n.h&&void 0!==HR&&(!n.C[1]||4!=jp(n)||2!=n.da()))if(n.v&&4==jp(n))lN(n.La,0,n);else if(gl(n,"readystatechange"),4==jp(n)){n.h=!1;try{const o=n.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===o){var s=String(n.I).match(c3)[1]||null;!s&&cs.self&&cs.self.location&&(s=cs.self.location.protocol.slice(0,-1)),i=!q$.test(s?s.toLowerCase():"")}t=i}if(t)gl(n,"complete"),gl(n,"success");else{n.m=6;try{var r=2<jp(n)?n.g.statusText:""}catch(a){r=""}n.j=r+" ["+n.da()+"]",S3(n)}}finally{Kk(n)}}}function Kk(n,e){if(n.g){I3(n);const t=n.g,i=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||gl(n,"ready");try{t.onreadystatechange=i}catch(s){}}}function I3(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(cs.clearTimeout(n.A),n.A=null)}function jp(n){return n.g?n.g.readyState:0}function x3(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case E3:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function T3(n){let e="";return ZR(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function bN(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=T3(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):kr(n,e,t))}function ZI(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function A3(n){this.Ga=0,this.j=[],this.l=new Bk,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ZI("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ZI("baseRetryDelayMs",5e3,n),this.hb=ZI("retryDelaySeedMs",1e4,n),this.eb=ZI("forwardChannelMaxRetries",2,n),this.xa=ZI("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new m3(n&&n.concurrentRequestLimit),this.Ja=new j$,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function CN(n){if(D3(n),3==n.H){var e=n.W++,t=dm(n.I);if(kr(t,"SID",n.K),kr(t,"RID",e),kr(t,"TYPE","terminate"),XI(n,t),(e=new jI(n,n.l,e)).L=2,e.v=$k(dm(t)),t=!1,cs.navigator&&cs.navigator.sendBeacon)try{t=cs.navigator.sendBeacon(e.v.toString(),"")}catch(i){}!t&&cs.Image&&((new Image).src=e.v,t=!0),t||(e.g=B3(e.l,null),e.g.ha(e.v)),e.G=Date.now(),UI(e)}N3(n)}function Zk(n){n.g&&(wN(n),n.g.cancel(),n.g=null)}function D3(n){Zk(n),n.u&&(cs.clearTimeout(n.u),n.u=null),Qk(n),n.i.cancel(),n.m&&("number"==typeof n.m&&cs.clearTimeout(n.m),n.m=null)}function Xk(n){if(!g3(n.i)&&!n.m){n.m=!0;var e=n.Na;RI||qj(),NI||(RI(),NI=!0),oN.add(e,n),n.C=0}}function k3(n,e){var t;t=e?e.m:n.W++;const i=dm(n.I);kr(i,"SID",n.K),kr(i,"RID",t),kr(i,"AID",n.V),XI(n,i),n.o&&n.s&&bN(i,n.o,n.s),t=new jI(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=O3(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),yN(n.i,t),fN(t,i,e)}function XI(n,e){n.na&&ZR(n.na,function(t,i){kr(e,i,t)}),n.h&&l3({},function(t,i){kr(e,i,t)})}function O3(n,e,t){t=Math.min(n.j.length,t);var i=n.h?jl(n.h.Va,n.h,n):null;e:{var s=n.j;let r=-1;for(;;){const o=["count="+t];-1==r?0<t?(r=s[0].g,o.push("ofs="+r)):r=0:o.push("ofs="+r);let a=!0;for(let u=0;u<t;u++){let p=s[u].g;const y=s[u].map;if(p-=r,0>p)r=Math.max(0,s[u].g-100),a=!1;else try{U$(y,o,"req"+p+"_")}catch(E){i&&i(y)}}if(a){i=o.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,i}function M3(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;RI||qj(),NI||(RI(),NI=!0),oN.add(e,n),n.A=0}}function EN(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=VI(jl(n.Ma,n),R3(n,n.A)),n.A++,0))}function wN(n){null!=n.B&&(cs.clearTimeout(n.B),n.B=null)}function P3(n){n.g=new jI(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=dm(n.wa);kr(e,"RID","rpc"),kr(e,"SID",n.K),kr(e,"AID",n.V),kr(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&kr(e,"TO",n.qa),kr(e,"TYPE","xmlhttp"),XI(n,e),n.o&&n.s&&bN(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=$k(dm(e)),t.s=null,t.S=!0,n3(t,n)}function Qk(n){null!=n.v&&(cs.clearTimeout(n.v),n.v=null)}function L3(n,e){var t=null;if(n.g==e){Qk(n),wN(n),n.g=null;var i=2}else{if(!gN(n.i,e))return;t=e.F,v3(n.i,e),i=1}if(0!=n.H)if(e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.G;var s=n.C;gl(i=Vk(),new Jj(i,t)),Xk(n)}else M3(n);else if(3==(s=e.o)||0==s&&0<e.ca||!(1==i&&function K$(n,e){return!(y3(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=VI(jl(n.Na,n,e),R3(n,n.C)),n.C++,0)))}(n,e)||2==i&&EN(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:Nb(n,5);break;case 4:Nb(n,10);break;case 3:Nb(n,6);break;default:Nb(n,2)}}function R3(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Nb(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var i=jl(n.pb,n);t||(t=new Rb("//www.google.com/images/cleardot.gif"),cs.location&&"http"==cs.location.protocol||Wk(t,"https"),$k(t)),function z$(n,e){const t=new Bk;if(cs.Image){const i=new Image;i.onload=Mk(Gk,t,i,"TestLoadImage: loaded",!0,e),i.onerror=Mk(Gk,t,i,"TestLoadImage: error",!1,e),i.onabort=Mk(Gk,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=Mk(Gk,t,i,"TestLoadImage: timeout",!1,e),cs.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else vc(2);n.H=0,n.h&&n.h.za(e),N3(n),D3(n)}function N3(n){if(n.H=0,n.ma=[],n.h){const e=b3(n.i);(0!=e.length||0!=n.j.length)&&(Oj(n.ma,e),Oj(n.ma,n.j),n.i.i.length=0,UR(n.j),n.j.length=0),n.h.ya()}}function F3(n,e,t){var i=t instanceof Rb?dm(t):new Rb(t);if(""!=i.g)e&&(i.g=e+"."+i.g),qk(i,i.m);else{var s=cs.location;i=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var r=new Rb(null);i&&Wk(r,i),e&&(r.g=e),s&&qk(r,s),t&&(r.l=t),i=r}return e=n.Da,(t=n.F)&&e&&kr(i,t,e),kr(i,"VER",n.ra),XI(n,i),i}function B3(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Co(t&&n.Ha&&!n.va?new GI({ob:!0}):n.va)).Oa(n.J),e}function V3(){}function Jk(){if(zE&&!(10<=Number(l$)))throw Error("Environmental error: no available transport.")}function Rh(n,e){Ua.call(this),this.g=new A3(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!MI(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!MI(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new $E(this)}function H3(n){hN.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function j3(){uN.call(this),this.status=1}function $E(n){this.g=n}function qd(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function SN(n,e,t){t||(t=0);var i=Array(16);if("string"==typeof e)for(var s=0;16>s;++s)i[s]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(s=0;16>s;++s)i[s]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var r=n.g[3],o=(e=n.g[0])+(r^(t=n.g[1])&((s=n.g[2])^r))+i[0]+3614090360&4294967295;o=(t=(s=(r=(e=(t=(s=(r=(e=(t=(s=(r=(e=(t=(s=(r=(e=(t=(s=(r=(e=(t=(s=(r=(e=(t=(s=(r=(e=(t=(s=(r=(e=(t=(s=(r=(e=(t=(s=(r=(e=(t=(s=(r=(e=(t=(s=(r=(e=(t=(s=(r=(e=(t=(s=(r=(e=(t=(s=(r=(e=t+(o<<7&4294967295|o>>>25))+((o=r+(s^e&(t^s))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=s+(t^r&(e^t))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^s&(r^e))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^t&(s^r))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=r+(s^e&(t^s))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=s+(t^r&(e^t))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^s&(r^e))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^t&(s^r))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=r+(s^e&(t^s))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=s+(t^r&(e^t))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^s&(r^e))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^t&(s^r))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=r+(s^e&(t^s))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=s+(t^r&(e^t))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^s&(r^e))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^r&(t^s))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=r+(t^s&(e^t))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=s+(e^t&(r^e))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=t+(r^e&(s^r))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(s^r&(t^s))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=r+(t^s&(e^t))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=s+(e^t&(r^e))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=t+(r^e&(s^r))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(s^r&(t^s))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=r+(t^s&(e^t))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=s+(e^t&(r^e))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=t+(r^e&(s^r))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(s^r&(t^s))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=r+(t^s&(e^t))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=s+(e^t&(r^e))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=t+(r^e&(s^r))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(t^s^r)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=r+(e^t^s)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=s+(r^e^t)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=t+(s^r^e)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^s^r)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=r+(e^t^s)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=s+(r^e^t)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=t+(s^r^e)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^s^r)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=r+(e^t^s)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=s+(r^e^t)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=t+(s^r^e)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^s^r)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=r+(e^t^s)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=s+(r^e^t)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=t+(s^r^e)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(s^(t|~r))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=r+(t^(e|~s))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=s+(e^(r|~t))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=t+(r^(s|~e))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(s^(t|~r))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=r+(t^(e|~s))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=s+(e^(r|~t))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=t+(r^(s|~e))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(s^(t|~r))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=r+(t^(e|~s))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=s+(e^(r|~t))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=t+(r^(s|~e))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((r=(e=t+((o=e+(s^(t|~r))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=r+(t^(e|~s))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((s=r+((o=s+(e^(r|~t))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+i[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+s&4294967295,n.g[3]=n.g[3]+r&4294967295}function Nn(n,e){this.h=e;for(var t=[],i=!0,s=n.length-1;0<=s;s--){var r=0|n[s];i&&r==e||(t[s]=r,i=!1)}this.g=t}($t=Co.prototype).Oa=function(n){this.M=n},$t.ha=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():dN.g(),this.C=function t3(n){return n.h||(n.h=n.i())}(this.u?this.u:dN),this.g.onreadystatechange=jl(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(r){return void w3(this,r)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)t.set(s,i[s]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const r of i.keys())t.set(r,i.get(r))}i=Array.from(t.keys()).find(r=>"content-type"==r.toLowerCase()),s=cs.FormData&&n instanceof cs.FormData,!(0<=kj($$,e))||i||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,o]of t)this.g.setRequestHeader(r,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{I3(this),0<this.B&&((this.L=function G$(n){return zE&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=jl(this.ua,this)):this.A=lN(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(r){w3(this,r)}},$t.ua=function(){void 0!==HR&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,gl(this,"timeout"),this.abort(8))},$t.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,gl(this,"complete"),gl(this,"abort"),Kk(this))},$t.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Kk(this,!0)),Co.$.N.call(this)},$t.La=function(){this.s||(this.G||this.v||this.l?_3(this):this.kb())},$t.kb=function(){_3(this)},$t.isActive=function(){return!!this.g},$t.da=function(){try{return 2<jp(this)?this.g.status:-1}catch(n){return-1}},$t.ja=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},$t.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),W$(e)}},$t.Ia=function(){return this.m},$t.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},($t=A3.prototype).ra=8,$t.H=1,$t.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const s=new jI(this,this.l,n);let r=this.s;if(this.U&&(r?(r=Nj(r),Bj(r,this.U)):r=this.U),null!==this.o||this.O||(s.I=r,r=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var i=this.j[t];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=O3(this,s,e),kr(t=dm(this.I),"RID",n),kr(t,"CVER",22),this.F&&kr(t,"X-HTTP-Session-Id",this.F),XI(this,t),r&&(this.O?e="headers="+encodeURIComponent(String(T3(r)))+"&"+e:this.o&&bN(t,this.o,r)),yN(this.i,s),this.bb&&kr(t,"TYPE","init"),this.P?(kr(t,"$req",e),kr(t,"SID","null"),s.aa=!0,fN(s,t,null)):fN(s,t,e),this.H=2}}else 3==this.H&&(n?k3(this,n):0==this.j.length||g3(this.i)||k3(this))},$t.Ma=function(){if(this.u=null,P3(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=VI(jl(this.jb,this),n)}},$t.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,vc(10),Zk(this),P3(this))},$t.ib=function(){null!=this.v&&(this.v=null,Zk(this),EN(this),vc(19))},$t.pb=function(n){n?(this.l.info("Successfully pinged google.com"),vc(2)):(this.l.info("Failed to ping google.com"),vc(1))},$t.isActive=function(){return!!this.h&&this.h.isActive(this)},($t=V3.prototype).Ba=function(){},$t.Aa=function(){},$t.za=function(){},$t.ya=function(){},$t.isActive=function(){return!0},$t.Va=function(){},Jk.prototype.g=function(n,e){return new Rh(n,e)},ja(Rh,Ua),Rh.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;vc(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=F3(n,null,n.Y),Xk(n)},Rh.prototype.close=function(){CN(this.g)},Rh.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=rN(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&Xk(e)},Rh.prototype.N=function(){this.g.h=null,delete this.j,CN(this.g),delete this.g,Rh.$.N.call(this)},ja(H3,hN),ja(j3,uN),ja($E,V3),$E.prototype.Ba=function(){gl(this.g,"a")},$E.prototype.Aa=function(n){gl(this.g,new H3(n))},$E.prototype.za=function(n){gl(this.g,new j3)},$E.prototype.ya=function(){gl(this.g,"b")},ja(qd,function Z$(){this.blockSize=-1}),qd.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},qd.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,i=this.m,s=this.h,r=0;r<e;){if(0==s)for(;r<=t;)SN(this,n,r),r+=this.blockSize;if("string"==typeof n){for(;r<e;)if(i[s++]=n.charCodeAt(r++),s==this.blockSize){SN(this,i),s=0;break}}else for(;r<e;)if(i[s++]=n[r++],s==this.blockSize){SN(this,i),s=0;break}}this.h=s,this.i+=e},qd.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var i=0;32>i;i+=8)n[t++]=this.g[e]>>>i&255;return n};var X$={};function _N(n){return-128<=n&&128>n?function r$(n,e){var t=X$;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Nn([0|e],0>e?-1:0)}):new Nn([0|n],0>n?-1:0)}function Up(n){if(isNaN(n)||!isFinite(n))return GE;if(0>n)return yl(Up(-n));for(var e=[],t=1,i=0;n>=t;i++)e[i]=n/t|0,t*=IN;return new Nn(e,0)}var IN=4294967296,GE=_N(0),xN=_N(1),z3=_N(16777216);function pm(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Pu(n){return-1==n.h}function yl(n){for(var e=n.g.length,t=[],i=0;i<e;i++)t[i]=~n.g[i];return new Nn(t,~n.h).add(xN)}function e1(n,e){return n.add(yl(e))}function t1(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function QI(n,e){this.g=n,this.h=e}function i1(n,e){if(pm(e))throw Error("division by zero");if(pm(n))return new QI(GE,GE);if(Pu(n))return e=i1(yl(n),e),new QI(yl(e.g),yl(e.h));if(Pu(e))return e=i1(n,yl(e)),new QI(yl(e.g),e.h);if(30<n.g.length){if(Pu(n)||Pu(e))throw Error("slowDivide_ only works with positive integers.");for(var t=xN,i=e;0>=i.X(n);)t=W3(t),i=W3(i);var s=YE(t,1),r=YE(i,1);for(i=YE(i,2),t=YE(t,2);!pm(i);){var o=r.add(i);0>=o.X(n)&&(s=s.add(t),r=o),i=YE(i,1),t=YE(t,1)}return e=e1(n,s.R(e)),new QI(s,e)}for(s=GE;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),i=48>=(i=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,i-48),o=(r=Up(t)).R(e);Pu(o)||0<o.X(n);)o=(r=Up(t-=i)).R(e);pm(r)&&(r=xN),s=s.add(r),n=e1(n,o)}return new QI(s,n)}function W3(n){for(var e=n.g.length+1,t=[],i=0;i<e;i++)t[i]=n.D(i)<<1|n.D(i-1)>>>31;return new Nn(t,n.h)}function YE(n,e){var t=e>>5;e%=32;for(var i=n.g.length-t,s=[],r=0;r<i;r++)s[r]=0<e?n.D(r+t)>>>e|n.D(r+t+1)<<32-e:n.D(r+t);return new Nn(s,n.h)}($t=Nn.prototype).ea=function(){if(Pu(this))return-yl(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var i=this.D(t);n+=(0<=i?i:IN+i)*e,e*=IN}return n},$t.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(pm(this))return"0";if(Pu(this))return"-"+yl(this).toString(n);for(var e=Up(Math.pow(n,6)),t=this,i="";;){var s=i1(t,e).g,r=((0<(t=e1(t,s.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(pm(t=s))return r+i;for(;6>r.length;)r="0"+r;i=r+i}},$t.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},$t.X=function(n){return Pu(n=e1(this,n))?-1:pm(n)?0:1},$t.abs=function(){return Pu(this)?yl(this):this},$t.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0,s=0;s<=e;s++){var r=i+(65535&this.D(s))+(65535&n.D(s)),o=(r>>>16)+(this.D(s)>>>16)+(n.D(s)>>>16);i=o>>>16,t[s]=(o&=65535)<<16|(r&=65535)}return new Nn(t,-2147483648&t[t.length-1]?-1:0)},$t.R=function(n){if(pm(this)||pm(n))return GE;if(Pu(this))return Pu(n)?yl(this).R(yl(n)):yl(yl(this).R(n));if(Pu(n))return yl(this.R(yl(n)));if(0>this.X(z3)&&0>n.X(z3))return Up(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],i=0;i<2*e;i++)t[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<n.g.length;s++){var r=this.D(i)>>>16,o=65535&this.D(i),a=n.D(s)>>>16,u=65535&n.D(s);t[2*i+2*s]+=o*u,t1(t,2*i+2*s),t[2*i+2*s+1]+=r*u,t1(t,2*i+2*s+1),t[2*i+2*s+1]+=o*a,t1(t,2*i+2*s+1),t[2*i+2*s+2]+=r*a,t1(t,2*i+2*s+2)}for(i=0;i<e;i++)t[i]=t[2*i+1]<<16|t[2*i];for(i=e;i<2*e;i++)t[i]=0;return new Nn(t,0)},$t.gb=function(n){return i1(this,n).h},$t.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)&n.D(i);return new Nn(t,this.h&n.h)},$t.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)|n.D(i);return new Nn(t,this.h|n.h)},$t.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)^n.D(i);return new Nn(t,this.h^n.h)},Jk.prototype.createWebChannel=Jk.prototype.g,Rh.prototype.send=Rh.prototype.u,Rh.prototype.open=Rh.prototype.m,Rh.prototype.close=Rh.prototype.close,Hk.NO_ERROR=0,Hk.TIMEOUT=8,Hk.HTTP_ERROR=6,e3.COMPLETE="complete",i3.EventType=HI,HI.OPEN="a",HI.CLOSE="b",HI.ERROR="c",HI.MESSAGE="d",Ua.prototype.listen=Ua.prototype.O,Co.prototype.listenOnce=Co.prototype.P,Co.prototype.getLastError=Co.prototype.Sa,Co.prototype.getLastErrorCode=Co.prototype.Ia,Co.prototype.getStatus=Co.prototype.da,Co.prototype.getResponseJson=Co.prototype.Wa,Co.prototype.getResponseText=Co.prototype.ja,Co.prototype.send=Co.prototype.ha,Co.prototype.setWithCredentials=Co.prototype.Oa,qd.prototype.digest=qd.prototype.l,qd.prototype.reset=qd.prototype.reset,qd.prototype.update=qd.prototype.j,Nn.prototype.add=Nn.prototype.add,Nn.prototype.multiply=Nn.prototype.R,Nn.prototype.modulo=Nn.prototype.gb,Nn.prototype.compare=Nn.prototype.X,Nn.prototype.toNumber=Nn.prototype.ea,Nn.prototype.toString=Nn.prototype.toString,Nn.prototype.getBits=Nn.prototype.D,Nn.fromNumber=Up,Nn.fromString=function U3(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return yl(U3(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Up(Math.pow(e,8)),i=GE,s=0;s<n.length;s+=8){var r=Math.min(8,n.length-s),o=parseInt(n.substring(s,s+r),e);8>r?(r=Up(Math.pow(e,r)),i=i.R(r).add(Up(o))):i=(i=i.R(t)).add(Up(o))}return i};var Q$=Wd.createWebChannelTransport=function(){return new Jk},J$=Wd.getStatEventTarget=function(){return Vk()},TN=Wd.ErrorCode=Hk,e8=Wd.EventType=e3,t8=Wd.Event=Pb,q3=Wd.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},i8=Wd.FetchXmlHttpFactory=GI,s1=Wd.WebChannel=i3,s8=Wd.XhrIo=Co,n8=Wd.Md5=qd,KE=Wd.Integer=Nn;const $3="@firebase/firestore";class za{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}za.UNAUTHENTICATED=new za(null),za.GOOGLE_CREDENTIALS=new za("google-credentials-uid"),za.FIRST_PARTY=new za("first-party-uid"),za.MOCK_USER=new za("mock-user");let ZE="9.23.0";const Ey=new vy.Yd("@firebase/firestore");function AN(){return Ey.logLevel}function Ct(n,...e){if(Ey.logLevel<=vy.in.DEBUG){const t=e.map(DN);Ey.debug(`Firestore (${ZE}): ${n}`,...t)}}function Fo(n,...e){if(Ey.logLevel<=vy.in.ERROR){const t=e.map(DN);Ey.error(`Firestore (${ZE}): ${n}`,...t)}}function Lu(n,...e){if(Ey.logLevel<=vy.in.WARN){const t=e.map(DN);Ey.warn(`Firestore (${ZE}): ${n}`,...t)}}function DN(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function ei(n="Unexpected state"){const e=`FIRESTORE (${ZE}) INTERNAL ASSERTION FAILED: `+n;throw Fo(e),new Error(e)}function wi(n,e){n||ei()}function Wt(n,e){return n}const Me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class lt extends sn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ga{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class G3{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class a8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(za.UNAUTHENTICATED))}shutdown(){}}class l8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class c8{constructor(e){this.t=e,this.currentUser=za.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let s=this.i;const r=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let o=new ga;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ga,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const p=o;e.enqueueRetryable((0,Ne.Z)(function*(){yield p.promise,yield r(i.currentUser)}))},u=p=>{Ct("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(p=>u(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?u(p):(Ct("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ga)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Ct("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(wi("string"==typeof i.accessToken),new G3(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wi(null===e||"string"==typeof e),new za(e)}}class h8{constructor(e,t,i){this.h=e,this.l=t,this.m=i,this.type="FirstParty",this.user=za.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class u8{constructor(e,t,i){this.h=e,this.l=t,this.m=i}getToken(){return Promise.resolve(new h8(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(za.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Y3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class d8{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const i=r=>{null!=r.error&&Ct("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.T;return this.T=r.token,Ct("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>i(r))};const s=r=>{Ct("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.appCheck.addTokenListener(this.o)};this.I.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.I.getImmediate({optional:!0});r?s(r):Ct("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wi("string"==typeof t.token),this.T=t.token,new Y3(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function p8(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class K3{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const s=p8(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<t&&(i+=e.charAt(s[r]%e.length))}return i}}function rs(n,e){return n<e?-1:n>e?1:0}function XE(n,e,t){return n.length===e.length&&n.every((i,s)=>t(i,e[s]))}function Z3(n){return n+"\0"}class qr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new lt(Me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new lt(Me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new lt(Me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new lt(Me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return qr.fromMillis(Date.now())}static fromDate(e){return qr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new qr(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?rs(this.nanoseconds,e.nanoseconds):rs(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ii{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ii(e)}static min(){return new Ii(new qr(0,0))}static max(){return new Ii(new qr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class JI{constructor(e,t,i){void 0===t?t=0:t>e.length&&ei(),void 0===i?i=e.length-t:i>e.length-t&&ei(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===JI.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof JI?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const r=e.get(s),o=t.get(s);if(r<o)return-1;if(r>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Zs extends JI{construct(e,t,i){return new Zs(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new lt(Me.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(s=>s.length>0))}return new Zs(t)}static emptyPath(){return new Zs([])}}const f8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Eo extends JI{construct(e,t,i){return new Eo(e,t,i)}static isValidIdentifier(e){return f8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Eo.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Eo(["__name__"])}static fromServerFormat(e){const t=[];let i="",s=0;const r=()=>{if(0===i.length)throw new lt(Me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;s<e.length;){const a=e[s];if("\\"===a){if(s+1===e.length)throw new lt(Me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new lt(Me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,s+=2}else"`"===a?(o=!o,s++):"."!==a||o?(i+=a,s++):(r(),s++)}if(r(),o)throw new lt(Me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Eo(t)}static emptyPath(){return new Eo([])}}class Ht{constructor(e){this.path=e}static fromPath(e){return new Ht(Zs.fromString(e))}static fromName(e){return new Ht(Zs.fromString(e).popFirst(5))}static empty(){return new Ht(Zs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Zs.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Zs.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ht(new Zs(e.slice()))}}class n1{constructor(e,t,i,s){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=s}}function kN(n){return n.fields.find(e=>2===e.kind)}function Fb(n){return n.fields.filter(e=>2!==e.kind)}n1.UNKNOWN_ID=-1;class r1{constructor(e,t){this.fieldPath=e,this.kind=t}}class ex{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ex(0,Nh.min())}}function X3(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=Ii.fromTimestamp(1e9===i?new qr(t+1,0):new qr(t,i));return new Nh(s,Ht.empty(),e)}function Q3(n){return new Nh(n.readTime,n.key,-1)}class Nh{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Nh(Ii.min(),Ht.empty(),-1)}static max(){return new Nh(Ii.max(),Ht.empty(),-1)}}function ON(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ht.comparator(n.documentKey,e.documentKey),0!==t?t:rs(n.largestBatchId,e.largestBatchId))}const J3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function wy(n){return MN.apply(this,arguments)}function MN(){return MN=(0,Ne.Z)(function*(n){if(n.code!==Me.FAILED_PRECONDITION||n.message!==J3)throw n;Ct("LocalStore","Unexpectedly lost primary lease")}),MN.apply(this,arguments)}class Te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ei(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Te((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(t,r).next(i,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Te?t:Te.resolve(t)}catch(t){return Te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.reject(t)}static resolve(e){return new Te((t,i)=>{t(e)})}static reject(e){return new Te((t,i)=>{i(e)})}static waitFor(e){return new Te((t,i)=>{let s=0,r=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++r,o&&r===s&&t()},u=>i(u))}),o=!0,r===s&&t()})}static or(e){let t=Te.resolve(!1);for(const i of e)t=t.next(s=>s?Te.resolve(s):i());return t}static forEach(e,t){const i=[];return e.forEach((s,r)=>{i.push(t.call(this,s,r))}),this.waitFor(i)}static mapArray(e,t){return new Te((i,s)=>{const r=e.length,o=new Array(r);let a=0;for(let u=0;u<r;u++){const p=u;t(e[p]).next(y=>{o[p]=y,++a,a===r&&i(o)},y=>s(y))}})}static doWhile(e,t){return new Te((i,s)=>{const r=()=>{!0===e()?t().next(()=>{r()},s):i()};r()})}}class o1{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new ga,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new tx(e,t.error)):this.v.resolve()},this.transaction.onerror=i=>{const s=PN(i.target.error);this.v.reject(new tx(e,s))}}static open(e,t,i,s){try{return new o1(t,e.transaction(s,i))}catch(r){throw new tx(t,r)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ct("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new v8(t)}}class $d{constructor(e,t,i){this.name=e,this.version=t,this.V=i,12.2===$d.S((0,sn.z$)())&&Fo("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ct("SimpleDb","Removing database:",e),Bb(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,sn.hl)())return!1;if($d.C())return!0;const e=(0,sn.z$)(),t=$d.S(e),i=0<t&&t<10,s=$d.N(e),r=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||r)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static N(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}$(e){var t=this;return(0,Ne.Z)(function*(){return t.db||(Ct("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,s)=>{const r=indexedDB.open(t.name,t.version);r.onsuccess=o=>{i(o.target.result)},r.onblocked=()=>{s(new tx(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{const a=o.target.error;s("VersionError"===a.name?new lt(Me.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new lt(Me.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new tx(e,a))},r.onupgradeneeded=o=>{Ct("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.V.O(o.target.result,r.transaction,o.oldVersion,t.version).next(()=>{Ct("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=i=>t.F(i)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,s){var r=this;return(0,Ne.Z)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{r.db=yield r.$(e);const u=o1.open(r.db,e,o?"readonly":"readwrite",i),p=s(u).next(y=>(u.P(),y)).catch(y=>(u.abort(y),Te.reject(y))).toPromise();return p.catch(()=>{}),yield u.R,p}catch(u){const p=u,y="FirebaseError"!==p.name&&a<3;if(Ct("SimpleDb","Transaction failed with error:",p.message,"Retrying:",y),r.close(),!y)return Promise.reject(p)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class y8{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Bb(this.L.delete())}}class tx extends lt{constructor(e,t){super(Me.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Sy(n){return"IndexedDbTransactionError"===n.name}class v8{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(Ct("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(Ct("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Bb(i)}add(e){return Ct("SimpleDb","ADD",this.store.name,e,e),Bb(this.store.add(e))}get(e){return Bb(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ct("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ct("SimpleDb","DELETE",this.store.name,e),Bb(this.store.delete(e))}count(){return Ct("SimpleDb","COUNT",this.store.name),Bb(this.store.count())}j(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const s=this.cursor(i),r=[];return this.W(s,(o,a)=>{r.push(a)}).next(()=>r)}{const s=this.store.getAll(i.range);return new Te((r,o)=>{s.onerror=a=>{o(a.target.error)},s.onsuccess=a=>{r(a.target.result)}})}}H(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new Te((s,r)=>{i.onerror=o=>{r(o.target.error)},i.onsuccess=o=>{s(o.target.result)}})}J(e,t){Ct("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.Y=!1;const s=this.cursor(i);return this.W(s,(r,o,a)=>a.delete())}X(e,t){let i;t?i=e:(i={},t=e);const s=this.cursor(i);return this.W(s,t)}Z(e){const t=this.cursor({});return new Te((i,s)=>{t.onerror=r=>{const o=PN(r.target.error);s(o)},t.onsuccess=r=>{const o=r.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}W(e,t){const i=[];return new Te((s,r)=>{e.onerror=o=>{r(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const u=new y8(a),p=t(a.primaryKey,a.value,u);if(p instanceof Te){const y=p.catch(E=>(u.done(),Te.reject(E)));i.push(y)}u.isDone?s():null===u.K?a.continue():a.continue(u.K)}}).next(()=>Te.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.Y?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Bb(n){return new Te((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const s=PN(i.target.error);t(s)}})}let tU=!1;function PN(n){const e=$d.S((0,sn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new lt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return tU||(tU=!0,setTimeout(()=>{throw i},0)),i}}return n}class b8{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Ct("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ne.Z)(function*(){t.task=null;try{Ct("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(i){Sy(i)?Ct("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield wy(i)}yield t.et(6e4)}))}}class C8{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,Ne.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.st(i,e))})()}st(e,t){const i=new Set;let s=t,r=!0;return Te.doWhile(()=>!0===r&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!i.has(o))return Ct("IndexBackiller",`Processing collection: ${o}`),this.it(e,o,s).next(a=>{s-=a,i.add(o)});r=!1})).next(()=>t-s)}it(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,i).next(r=>{const o=r.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.rt(s,r)).next(a=>(Ct("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}rt(e,t){let i=e;return t.changes.forEach((s,r)=>{const o=Q3(r);ON(o,i)>0&&(i=o)}),new Nh(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Fh=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=s=>this.ot(s),this.ut=s=>i.writeSequenceNumber(s))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function ix(n){return null==n}function sx(n){return 0===n&&1/n==-1/0}function iU(n){return"number"==typeof n&&Number.isInteger(n)&&!sx(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function zl(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=sU(e)),e=E8(n.get(t),e);return sU(e)}function E8(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const r=n.charAt(s);switch(r){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=r}}return t}function sU(n){return n+"\x01\x01"}function zp(n){const e=n.length;if(wi(e>=2),2===e)return wi("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Zs.emptyPath();const t=e-2,i=[];let s="";for(let r=0;r<e;){const o=n.indexOf("\x01",r);switch((o<0||o>t)&&ei(),n.charAt(o+1)){case"\x01":const a=n.substring(r,o);let u;0===s.length?u=a:(s+=a,u=s,s=""),i.push(u);break;case"\x10":s+=n.substring(r,o),s+="\0";break;case"\x11":s+=n.substring(r,o+1);break;default:ei()}r=o+2}return new Zs(i)}const nU=["userId","batchId"];function a1(n,e){return[n,zl(e)]}function rU(n,e,t){return[n,zl(e),t]}const w8={},S8=["prefixPath","collectionGroup","readTime","documentId"],_8=["prefixPath","collectionGroup","documentId"],I8=["collectionGroup","readTime","prefixPath","documentId"],x8=["canonicalId","targetId"],T8=["targetId","path"],A8=["path","targetId"],D8=["collectionId","parent"],k8=["indexId","uid"],O8=["uid","sequenceNumber"],M8=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],P8=["indexId","uid","orderedDocumentKey"],L8=["userId","collectionPath","documentId"],R8=["userId","collectionPath","largestBatchId"],N8=["userId","collectionGroup","largestBatchId"],oU=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],F8=[...oU,"documentOverlays"],aU=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],lU=aU,B8=[...lU,"indexConfiguration","indexState","indexEntries"];class LN extends eU{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Wa(n,e){const t=Wt(n);return $d.M(t.ht,e)}function cU(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function _y(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function hU(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class fr{constructor(e,t){this.comparator=e,this.root=t||vl.EMPTY}insert(e,t){return new fr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,vl.BLACK,null,null))}remove(e){return new fr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vl.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(0===s)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new l1(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new l1(this.root,e,this.comparator,!1)}getReverseIterator(){return new l1(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new l1(this.root,e,this.comparator,!0)}}class l1{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?i(e.key,t):1,t&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vl{constructor(e,t,i,s,r){this.key=e,this.value=t,this.color=null!=i?i:vl.RED,this.left=null!=s?s:vl.EMPTY,this.right=null!=r?r:vl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,r){return new vl(null!=e?e:this.key,null!=t?t:this.value,null!=i?i:this.color,null!=s?s:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,t,i),null):0===r?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return vl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return vl.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ei();const e=this.left.check();if(e!==this.right.check())throw ei();return e+(this.isRed()?0:1)}}vl.EMPTY=null,vl.RED=!0,vl.BLACK=!1,vl.EMPTY=new class{constructor(){this.size=0}get key(){throw ei()}get value(){throw ei()}get color(){throw ei()}get left(){throw ei()}get right(){throw ei()}copy(n,e,t,i,s){return this}insert(n,e,t){return new vl(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Or{constructor(e){this.comparator=e,this.data=new fr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new uU(this.data.getIterator())}getIteratorFrom(e){return new uU(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Or)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,r=i.getNext().key;if(0!==this.comparator(s,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Or(this.comparator);return t.data=e,t}}class uU{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function QE(n){return n.hasNext()?n.getNext():void 0}class eh{constructor(e){this.fields=e,e.sort(Eo.comparator)}static empty(){return new eh([])}unionWith(e){let t=new Or(Eo.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new eh(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return XE(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class dU extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ya{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw"undefined"!=typeof DOMException&&s instanceof DOMException?new dU("Invalid base64 string: "+s):s}}(e);return new ya(t)}static fromUint8Array(e){const t=function(i){let s="";for(let r=0;r<i.length;++r)s+=String.fromCharCode(i[r]);return s}(e);return new ya(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rs(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ya.EMPTY_BYTE_STRING=new ya("");const H8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Iy(n){if(wi(!!n),"string"==typeof n){let e=0;const t=H8.exec(n);if(wi(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:wo(n.seconds),nanos:wo(n.nanos)}}function wo(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function fm(n){return"string"==typeof n?ya.fromBase64String(n):ya.fromUint8Array(n)}function c1(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function h1(n){const e=n.mapValue.fields.__previous_value__;return c1(e)?h1(e):e}function nx(n){const e=Iy(n.mapValue.fields.__local_write_time__.timestampValue);return new qr(e.seconds,e.nanos)}class j8{constructor(e,t,i,s,r,o,a,u,p){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=p}}class xy{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new xy("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof xy&&e.projectId===this.projectId&&e.database===this.database}}const Ty={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},u1={nullValue:"NULL_VALUE"};function Ay(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?c1(n)?4:gU(n)?9007199254740991:10:ei()}function Wp(n,e){if(n===e)return!0;const t=Ay(n);if(t!==Ay(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return nx(n).isEqual(nx(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const r=Iy(i.timestampValue),o=Iy(s.timestampValue);return r.seconds===o.seconds&&r.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,fm(n.bytesValue).isEqual(fm(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return wo(i.geoPointValue.latitude)===wo(s.geoPointValue.latitude)&&wo(i.geoPointValue.longitude)===wo(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return wo(i.integerValue)===wo(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const r=wo(i.doubleValue),o=wo(s.doubleValue);return r===o?sx(r)===sx(o):isNaN(r)&&isNaN(o)}return!1}(n,e);case 9:return XE(n.arrayValue.values||[],e.arrayValue.values||[],Wp);case 10:return function(i,s){const r=i.mapValue.fields||{},o=s.mapValue.fields||{};if(cU(r)!==cU(o))return!1;for(const a in r)if(r.hasOwnProperty(a)&&(void 0===o[a]||!Wp(r[a],o[a])))return!1;return!0}(n,e);default:return ei()}var s}function rx(n,e){return void 0!==(n.values||[]).find(t=>Wp(t,e))}function Dy(n,e){if(n===e)return 0;const t=Ay(n),i=Ay(e);if(t!==i)return rs(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return rs(n.booleanValue,e.booleanValue);case 2:return function(s,r){const o=wo(s.integerValue||s.doubleValue),a=wo(r.integerValue||r.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(n,e);case 3:return pU(n.timestampValue,e.timestampValue);case 4:return pU(nx(n),nx(e));case 5:return rs(n.stringValue,e.stringValue);case 6:return function(s,r){const o=fm(s),a=fm(r);return o.compareTo(a)}(n.bytesValue,e.bytesValue);case 7:return function(s,r){const o=s.split("/"),a=r.split("/");for(let u=0;u<o.length&&u<a.length;u++){const p=rs(o[u],a[u]);if(0!==p)return p}return rs(o.length,a.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,r){const o=rs(wo(s.latitude),wo(r.latitude));return 0!==o?o:rs(wo(s.longitude),wo(r.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,r){const o=s.values||[],a=r.values||[];for(let u=0;u<o.length&&u<a.length;++u){const p=Dy(o[u],a[u]);if(p)return p}return rs(o.length,a.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,r){if(s===Ty.mapValue&&r===Ty.mapValue)return 0;if(s===Ty.mapValue)return 1;if(r===Ty.mapValue)return-1;const o=s.fields||{},a=Object.keys(o),u=r.fields||{},p=Object.keys(u);a.sort(),p.sort();for(let y=0;y<a.length&&y<p.length;++y){const E=rs(a[y],p[y]);if(0!==E)return E;const _=Dy(o[a[y]],u[p[y]]);if(0!==_)return _}return rs(a.length,p.length)}(n.mapValue,e.mapValue);default:throw ei()}}function pU(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return rs(n,e);const t=Iy(n),i=Iy(e),s=rs(t.seconds,i.seconds);return 0!==s?s:rs(t.nanos,i.nanos)}function JE(n){return RN(n)}function RN(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const s=Iy(i);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?fm(n.bytesValue).toBase64():"referenceValue"in n?Ht.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let s="[",r=!0;for(const o of i.values||[])r?r=!1:s+=",",s+=RN(o);return s+"]"}(n.arrayValue):"mapValue"in n?function(i){const s=Object.keys(i.fields||{}).sort();let r="{",o=!0;for(const a of s)o?o=!1:r+=",",r+=`${a}:${RN(i.fields[a])}`;return r+"}"}(n.mapValue):ei();var e}function Vb(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function NN(n){return!!n&&"integerValue"in n}function ox(n){return!!n&&"arrayValue"in n}function fU(n){return!!n&&"nullValue"in n}function mU(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function p1(n){return!!n&&"mapValue"in n}function ax(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return _y(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=ax(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ax(n.arrayValue.values[t]);return e}return Object.assign({},n)}function gU(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function U8(n){return"nullValue"in n?u1:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Vb(xy.empty(),Ht.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ei()}function z8(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Vb(xy.empty(),Ht.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ty:ei()}function yU(n,e){const t=Dy(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function vU(n,e){const t=Dy(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class bl{constructor(e){this.value=e}static empty(){return new bl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!p1(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ax(t)}setAll(e){let t=Eo.emptyPath(),i={},s=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,i,s),i={},s=[],t=a.popLast()}o?i[a.lastSegment()]=ax(o):s.push(a.lastSegment())});const r=this.getFieldsMap(t);this.applyChanges(r,i,s)}delete(e){const t=this.field(e.popLast());p1(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wp(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];p1(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){_y(t,(s,r)=>e[s]=r);for(const s of i)delete e[s]}clone(){return new bl(ax(this.value))}}function bU(n){const e=[];return _y(n.fields,(t,i)=>{const s=new Eo([t]);if(p1(i)){const r=bU(i.mapValue).fields;if(0===r.length)e.push(s);else for(const o of r)e.push(s.child(o))}else e.push(s)}),new eh(e)}class Mr{constructor(e,t,i,s,r,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Mr(e,0,Ii.min(),Ii.min(),Ii.min(),bl.empty(),0)}static newFoundDocument(e,t,i,s){return new Mr(e,1,t,Ii.min(),i,s,0)}static newNoDocument(e,t){return new Mr(e,2,t,Ii.min(),Ii.min(),bl.empty(),0)}static newUnknownDocument(e,t){return new Mr(e,3,t,Ii.min(),Ii.min(),bl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ii.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ii.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Mr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ky{constructor(e,t){this.position=e,this.inclusive=t}}function CU(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const r=e[s],o=n.position[s];if(i=r.field.isKeyField()?Ht.comparator(Ht.fromName(o.referenceValue),t.key):Dy(o,t.data.field(r.field)),"desc"===r.dir&&(i*=-1),0!==i)break}return i}function EU(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Wp(n.position[t],e.position[t]))return!1;return!0}class ew{constructor(e,t="asc"){this.field=e,this.dir=t}}function W8(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class wU{}class Hs extends wU{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,i):new q8(e,t,i):"array-contains"===t?new Y8(e,i):"in"===t?new AU(e,i):"not-in"===t?new K8(e,i):"array-contains-any"===t?new Z8(e,i):new Hs(e,t,i)}static createKeyFieldInFilter(e,t,i){return"in"===t?new $8(e,i):new G8(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Dy(t,this.value)):null!==t&&Ay(this.value)===Ay(t)&&this.matchesComparison(Dy(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ei()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Fn extends wU{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Fn(e,t)}matches(e){return tw(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function tw(n){return"and"===n.op}function FN(n){return"or"===n.op}function BN(n){return SU(n)&&tw(n)}function SU(n){for(const e of n.filters)if(e instanceof Fn)return!1;return!0}function VN(n){if(n instanceof Hs)return n.field.canonicalString()+n.op.toString()+JE(n.value);if(BN(n))return n.filters.map(e=>VN(e)).join(",");{const e=n.filters.map(t=>VN(t)).join(",");return`${n.op}(${e})`}}function _U(n,e){return n instanceof Hs?(t=n,(i=e)instanceof Hs&&t.op===i.op&&t.field.isEqual(i.field)&&Wp(t.value,i.value)):n instanceof Fn?function(t,i){return i instanceof Fn&&t.op===i.op&&t.filters.length===i.filters.length&&t.filters.reduce((s,r,o)=>s&&_U(r,i.filters[o]),!0)}(n,e):void ei();var t,i}function IU(n,e){const t=n.filters.concat(e);return Fn.create(t,n.op)}function xU(n){return n instanceof Hs?`${(e=n).field.canonicalString()} ${e.op} ${JE(e.value)}`:n instanceof Fn?function(e){return e.op.toString()+" {"+e.getFilters().map(xU).join(" ,")+"}"}(n):"Filter";var e}class q8 extends Hs{constructor(e,t,i){super(e,t,i),this.key=Ht.fromName(i.referenceValue)}matches(e){const t=Ht.comparator(e.key,this.key);return this.matchesComparison(t)}}class $8 extends Hs{constructor(e,t){super(e,"in",t),this.keys=TU(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class G8 extends Hs{constructor(e,t){super(e,"not-in",t),this.keys=TU(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function TU(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>Ht.fromName(i.referenceValue))}class Y8 extends Hs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ox(t)&&rx(t.arrayValue,this.value)}}class AU extends Hs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&rx(this.value.arrayValue,t)}}class K8 extends Hs{constructor(e,t){super(e,"not-in",t)}matches(e){if(rx(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!rx(this.value.arrayValue,t)}}class Z8 extends Hs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ox(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>rx(this.value.arrayValue,i))}}class X8{constructor(e,t=null,i=[],s=[],r=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=o,this.endAt=a,this.dt=null}}function HN(n,e=null,t=[],i=[],s=null,r=null,o=null){return new X8(n,e,t,i,s,r,o)}function Hb(n){const e=Wt(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>VN(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(s=i).field.canonicalString()+s.dir;var s}).join(","),ix(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>JE(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>JE(i)).join(",")),e.dt=t}return e.dt}function lx(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!W8(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!_U(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!EU(n.startAt,e.startAt)&&EU(n.endAt,e.endAt)}function f1(n){return Ht.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function m1(n,e){return n.filters.filter(t=>t instanceof Hs&&t.field.isEqual(e))}function DU(n,e,t){let i=u1,s=!0;for(const r of m1(n,e)){let o=u1,a=!0;switch(r.op){case"<":case"<=":o=U8(r.value);break;case"==":case"in":case">=":o=r.value;break;case">":o=r.value,a=!1;break;case"!=":case"not-in":o=u1}yU({value:i,inclusive:s},{value:o,inclusive:a})<0&&(i=o,s=a)}if(null!==t)for(let r=0;r<n.orderBy.length;++r)if(n.orderBy[r].field.isEqual(e)){const o=t.position[r];yU({value:i,inclusive:s},{value:o,inclusive:t.inclusive})<0&&(i=o,s=t.inclusive);break}return{value:i,inclusive:s}}function kU(n,e,t){let i=Ty,s=!0;for(const r of m1(n,e)){let o=Ty,a=!0;switch(r.op){case">=":case">":o=z8(r.value),a=!1;break;case"==":case"in":case"<=":o=r.value;break;case"<":o=r.value,a=!1;break;case"!=":case"not-in":o=Ty}vU({value:i,inclusive:s},{value:o,inclusive:a})>0&&(i=o,s=a)}if(null!==t)for(let r=0;r<n.orderBy.length;++r)if(n.orderBy[r].field.isEqual(e)){const o=t.position[r];vU({value:i,inclusive:s},{value:o,inclusive:t.inclusive})>0&&(i=o,s=t.inclusive);break}return{value:i,inclusive:s}}class mm{constructor(e,t=null,i=[],s=[],r=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=u,this.wt=null,this._t=null}}function OU(n,e,t,i,s,r,o,a){return new mm(n,e,t,i,s,r,o,a)}function iw(n){return new mm(n)}function MU(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function jN(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function g1(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function UN(n){return null!==n.collectionGroup}function jb(n){const e=Wt(n);if(null===e.wt){e.wt=[];const t=g1(e),i=jN(e);if(null!==t&&null===i)t.isKeyField()||e.wt.push(new ew(t)),e.wt.push(new ew(Eo.keyField(),"asc"));else{let s=!1;for(const r of e.explicitOrderBy)e.wt.push(r),r.field.isKeyField()&&(s=!0);if(!s){const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new ew(Eo.keyField(),r))}}}return e.wt}function bc(n){const e=Wt(n);if(!e._t)if("F"===e.limitType)e._t=HN(e.path,e.collectionGroup,jb(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const r of jb(e))t.push(new ew(r.field,"desc"===r.dir?"asc":"desc"));const i=e.endAt?new ky(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new ky(e.startAt.position,e.startAt.inclusive):null;e._t=HN(e.path,e.collectionGroup,t,e.filters,e.limit,i,s)}return e._t}function zN(n,e){e.getFirstInequalityField(),g1(n);const t=n.filters.concat([e]);return new mm(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function y1(n,e,t){return new mm(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function cx(n,e){return lx(bc(n),bc(e))&&n.limitType===e.limitType}function PU(n){return`${Hb(bc(n))}|lt:${n.limitType}`}function WN(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(i=>xU(i)).join(", ")}]`),ix(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>JE(i)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>JE(i)).join(",")),`Target(${t})`}(bc(n))}; limitType=${n.limitType})`}function hx(n,e){return e.isFoundDocument()&&function(t,i){const s=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):Ht.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,i){for(const s of jb(t))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(t,i){for(const s of t.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(s,r,o){const a=CU(s,r,o);return s.inclusive?a<=0:a<0}(t.startAt,jb(t),i)||t.endAt&&!function(s,r,o){const a=CU(s,r,o);return s.inclusive?a>=0:a>0}(t.endAt,jb(t),i)));var t,i}function LU(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function RU(n){return(e,t)=>{let i=!1;for(const s of jb(n)){const r=Q8(s,e,t);if(0!==r)return r;i=i||s.field.isKeyField()}return 0}}function Q8(n,e,t){const i=n.field.isKeyField()?Ht.comparator(e.key,t.key):function(s,r,o){const a=r.data.field(s),u=o.data.field(s);return null!==a&&null!==u?Dy(a,u):ei()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ei()}}class gm{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[s,r]of i)if(this.equalsFn(s,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(void 0===s)return this.inner[i]=[[e,t]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return 1===i.length?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){_y(this.inner,(t,i)=>{for(const[s,r]of i)e(s,r)})}isEmpty(){return hU(this.inner)}size(){return this.innerSize}}const J8=new fr(Ht.comparator);function th(){return J8}const NU=new fr(Ht.comparator);function ux(...n){let e=NU;for(const t of n)e=e.insert(t.key,t);return e}function FU(n){let e=NU;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function qp(){return dx()}function BU(){return dx()}function dx(){return new gm(n=>n.toString(),(n,e)=>n.isEqual(e))}const eG=new fr(Ht.comparator),tG=new Or(Ht.comparator);function bs(...n){let e=tG;for(const t of n)e=e.add(t);return e}const iG=new Or(rs);function qN(){return iG}function VU(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sx(e)?"-0":e}}function HU(n){return{integerValue:""+n}}function jU(n,e){return iU(e)?HU(e):VU(n,e)}class v1{constructor(){this._=void 0}}function sG(n,e,t){return n instanceof sw?function(i,s){const r={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&c1(s)&&(s=h1(s)),s&&(r.fields.__previous_value__=s),{mapValue:r}}(t,e):n instanceof Ub?zU(n,e):n instanceof zb?WU(n,e):function(i,s){const r=UU(i,s),o=qU(r)+qU(i.gt);return NN(r)&&NN(i.gt)?HU(o):VU(i.serializer,o)}(n,e)}function nG(n,e,t){return n instanceof Ub?zU(n,e):n instanceof zb?WU(n,e):t}function UU(n,e){return n instanceof nw?NN(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class sw extends v1{}class Ub extends v1{constructor(e){super(),this.elements=e}}function zU(n,e){const t=$U(e);for(const i of n.elements)t.some(s=>Wp(s,i))||t.push(i);return{arrayValue:{values:t}}}class zb extends v1{constructor(e){super(),this.elements=e}}function WU(n,e){let t=$U(e);for(const i of n.elements)t=t.filter(s=>!Wp(s,i));return{arrayValue:{values:t}}}class nw extends v1{constructor(e,t){super(),this.serializer=e,this.gt=t}}function qU(n){return wo(n.integerValue||n.doubleValue)}function $U(n){return ox(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class px{constructor(e,t){this.field=e,this.transform=t}}class oG{constructor(e,t){this.version=e,this.transformResults=t}}class $r{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new $r}static exists(e){return new $r(void 0,e)}static updateTime(e){return new $r(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function b1(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class C1{}function GU(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new ow(n.key,$r.none()):new rw(n.key,n.data,$r.none());{const t=n.data,i=bl.empty();let s=new Or(Eo.comparator);for(let r of e.fields)if(!s.has(r)){let o=t.field(r);null===o&&r.length>1&&(r=r.popLast(),o=t.field(r)),null===o?i.delete(r):i.set(r,o),s=s.add(r)}return new ym(n.key,i,new eh(s.toArray()),$r.none())}}function aG(n,e,t){n instanceof rw?function(i,s,r){const o=i.value.clone(),a=ZU(i.fieldTransforms,s,r.transformResults);o.setAll(a),s.convertToFoundDocument(r.version,o).setHasCommittedMutations()}(n,e,t):n instanceof ym?function(i,s,r){if(!b1(i.precondition,s))return void s.convertToUnknownDocument(r.version);const o=ZU(i.fieldTransforms,s,r.transformResults),a=s.data;a.setAll(KU(i)),a.setAll(o),s.convertToFoundDocument(r.version,a).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function fx(n,e,t,i){return n instanceof rw?function(s,r,o,a){if(!b1(s.precondition,r))return o;const u=s.value.clone(),p=XU(s.fieldTransforms,a,r);return u.setAll(p),r.convertToFoundDocument(r.version,u).setHasLocalMutations(),null}(n,e,t,i):n instanceof ym?function(s,r,o,a){if(!b1(s.precondition,r))return o;const u=XU(s.fieldTransforms,a,r),p=r.data;return p.setAll(KU(s)),p.setAll(u),r.convertToFoundDocument(r.version,p).setHasLocalMutations(),null===o?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(y=>y.field))}(n,e,t,i):(o=t,b1(n.precondition,r=e)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):o);var r,o}function lG(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),r=UU(i.transform,s||null);null!=r&&(null===t&&(t=bl.empty()),t.set(i.field,r))}return t||null}function YU(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&XE(t,i,(s,r)=>function rG(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof Ub&&i instanceof Ub||t instanceof zb&&i instanceof zb?XE(t.elements,i.elements,Wp):t instanceof nw&&i instanceof nw?Wp(t.gt,i.gt):t instanceof sw&&i instanceof sw);var t,i}(s,r))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}class rw extends C1{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ym extends C1{constructor(e,t,i,s,r=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function KU(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function ZU(n,e,t){const i=new Map;wi(n.length===t.length);for(let s=0;s<t.length;s++){const r=n[s],o=r.transform,a=e.data.field(r.field);i.set(r.field,nG(o,a,t[s]))}return i}function XU(n,e,t){const i=new Map;for(const s of n){const r=s.transform,o=t.data.field(s.field);i.set(s.field,sG(r,o,e))}return i}class ow extends C1{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $N extends C1{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class GN{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&aG(r,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=fx(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=fx(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=BU();return this.mutations.forEach(s=>{const r=e.get(s.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=t.has(s.key)?null:a;const u=GU(o,a);null!==u&&i.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(Ii.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),bs())}isEqual(e){return this.batchId===e.batchId&&XE(this.mutations,e.mutations,(t,i)=>YU(t,i))&&XE(this.baseMutations,e.baseMutations,(t,i)=>YU(t,i))}}class YN{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){wi(e.mutations.length===i.length);let s=eG;const r=e.mutations;for(let o=0;o<r.length;o++)s=s.insert(r[o].key,i[o].version);return new YN(e,t,i,s)}}class KN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class hG{constructor(e,t){this.count=e,this.unchangedNames=t}}var Jo,Xs;function QU(n){switch(n){default:return ei();case Me.CANCELLED:case Me.UNKNOWN:case Me.DEADLINE_EXCEEDED:case Me.RESOURCE_EXHAUSTED:case Me.INTERNAL:case Me.UNAVAILABLE:case Me.UNAUTHENTICATED:return!1;case Me.INVALID_ARGUMENT:case Me.NOT_FOUND:case Me.ALREADY_EXISTS:case Me.PERMISSION_DENIED:case Me.FAILED_PRECONDITION:case Me.ABORTED:case Me.OUT_OF_RANGE:case Me.UNIMPLEMENTED:case Me.DATA_LOSS:return!0}}function JU(n){if(void 0===n)return Fo("GRPC error has no .code"),Me.UNKNOWN;switch(n){case Jo.OK:return Me.OK;case Jo.CANCELLED:return Me.CANCELLED;case Jo.UNKNOWN:return Me.UNKNOWN;case Jo.DEADLINE_EXCEEDED:return Me.DEADLINE_EXCEEDED;case Jo.RESOURCE_EXHAUSTED:return Me.RESOURCE_EXHAUSTED;case Jo.INTERNAL:return Me.INTERNAL;case Jo.UNAVAILABLE:return Me.UNAVAILABLE;case Jo.UNAUTHENTICATED:return Me.UNAUTHENTICATED;case Jo.INVALID_ARGUMENT:return Me.INVALID_ARGUMENT;case Jo.NOT_FOUND:return Me.NOT_FOUND;case Jo.ALREADY_EXISTS:return Me.ALREADY_EXISTS;case Jo.PERMISSION_DENIED:return Me.PERMISSION_DENIED;case Jo.FAILED_PRECONDITION:return Me.FAILED_PRECONDITION;case Jo.ABORTED:return Me.ABORTED;case Jo.OUT_OF_RANGE:return Me.OUT_OF_RANGE;case Jo.UNIMPLEMENTED:return Me.UNIMPLEMENTED;case Jo.DATA_LOSS:return Me.DATA_LOSS;default:return ei()}}(Xs=Jo||(Jo={}))[Xs.OK=0]="OK",Xs[Xs.CANCELLED=1]="CANCELLED",Xs[Xs.UNKNOWN=2]="UNKNOWN",Xs[Xs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xs[Xs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xs[Xs.NOT_FOUND=5]="NOT_FOUND",Xs[Xs.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xs[Xs.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xs[Xs.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xs[Xs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xs[Xs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xs[Xs.ABORTED=10]="ABORTED",Xs[Xs.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xs[Xs.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xs[Xs.INTERNAL=13]="INTERNAL",Xs[Xs.UNAVAILABLE=14]="UNAVAILABLE",Xs[Xs.DATA_LOSS=15]="DATA_LOSS";class ZN{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return E1}static getOrCreateInstance(){return null===E1&&(E1=new ZN),E1}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let E1=null;function ez(){return new TextEncoder}const uG=new KE([4294967295,4294967295],0);function tz(n){const e=ez().encode(n),t=new n8;return t.update(e),new Uint8Array(t.digest())}function iz(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new KE([t,i],0),new KE([s,r],0)]}class XN{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new mx(`Invalid padding: ${t}`);if(i<0)throw new mx(`Invalid hash count: ${i}`);if(e.length>0&&0===this.hashCount)throw new mx(`Invalid hash count: ${i}`);if(0===e.length&&0!==t)throw new mx(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=KE.fromNumber(this.It)}Et(e,t,i){let s=e.add(t.multiply(KE.fromNumber(i)));return 1===s.compare(uG)&&(s=new KE([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=tz(e),[i,s]=iz(t);for(let r=0;r<this.hashCount;r++){const o=this.Et(i,s,r);if(!this.At(o))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),o=new XN(r,s,t);return i.forEach(a=>o.insert(a)),o}insert(e){if(0===this.It)return;const t=tz(e),[i,s]=iz(t);for(let r=0;r<this.hashCount;r++){const o=this.Et(i,s,r);this.Rt(o)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class mx extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class gx{constructor(e,t,i,s,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,yx.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new gx(Ii.min(),s,new fr(rs),th(),bs())}}class yx{constructor(e,t,i,s,r){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new yx(i,t,bs(),bs(),bs())}}class w1{constructor(e,t,i,s){this.Pt=e,this.removedTargetIds=t,this.key=i,this.bt=s}}class sz{constructor(e,t){this.targetId=e,this.Vt=t}}class nz{constructor(e,t,i=ya.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class rz{constructor(){this.St=0,this.Dt=az(),this.Ct=ya.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=bs(),t=bs(),i=bs();return this.Dt.forEach((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:ei()}}),new yx(this.Ct,this.xt,e,t,i)}Ft(){this.Nt=!1,this.Dt=az()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class dG{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=th(),this.zt=oz(),this.Wt=new fr(rs)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const i=this.Zt(t);switch(e.state){case 0:this.te(t)&&i.$t(e.resumeToken);break;case 1:i.Ut(),i.kt||i.Ft(),i.$t(e.resumeToken);break;case 2:i.Ut(),i.kt||this.removeTarget(t);break;case 3:this.te(t)&&(i.Kt(),i.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),i.$t(e.resumeToken));break;default:ei()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((i,s)=>{this.te(s)&&t(s)})}ne(e){var t;const i=e.targetId,s=e.Vt.count,r=this.se(i);if(r){const o=r.target;if(f1(o))if(0===s){const a=new Ht(o.path);this.Yt(i,a,Mr.newNoDocument(a,Ii.min()))}else wi(1===s);else{const a=this.ie(i);if(a!==s){const u=this.re(e,a);0!==u&&(this.ee(i),this.Wt=this.Wt.insert(i,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=ZN.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(p,y,E){var _,D,L,V,H,se;const _e={localCacheCount:y,existenceFilterCount:E.count},re=E.unchangedNames;return re&&(_e.bloomFilter={applied:0===p,hashCount:null!==(_=null==re?void 0:re.hashCount)&&void 0!==_?_:0,bitmapLength:null!==(V=null===(L=null===(D=null==re?void 0:re.bits)||void 0===D?void 0:D.bitmap)||void 0===L?void 0:L.length)&&void 0!==V?V:0,padding:null!==(se=null===(H=null==re?void 0:re.bits)||void 0===H?void 0:H.padding)&&void 0!==se?se:0}),_e}(u,a,e.Vt))}}}}re(e,t){const{unchangedNames:i,count:s}=e.Vt;if(!i||!i.bits)return 1;const{bits:{bitmap:r="",padding:o=0},hashCount:a=0}=i;let u,p;try{u=fm(r).toUint8Array()}catch(y){if(y instanceof dU)return Lu("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw y}try{p=new XN(u,o,a)}catch(y){return Lu(y instanceof mx?"BloomFilter error: ":"Applying bloom filter failed: ",y),1}return 0===p.It?1:s!==t-this.oe(e.targetId,p)?2:0}oe(e,t){const i=this.Gt.getRemoteKeysForTarget(e);let s=0;return i.forEach(r=>{const o=this.Gt.ue(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;t.vt(a)||(this.Yt(e,r,null),s++)}),s}ce(e){const t=new Map;this.Qt.forEach((r,o)=>{const a=this.se(o);if(a){if(r.current&&f1(a.target)){const u=new Ht(a.target.path);null!==this.jt.get(u)||this.ae(o,u)||this.Yt(o,u,Mr.newNoDocument(u,e))}r.Mt&&(t.set(o,r.Ot()),r.Ft())}});let i=bs();this.zt.forEach((r,o)=>{let a=!0;o.forEachWhile(u=>{const p=this.se(u);return!p||"TargetPurposeLimboResolution"===p.purpose||(a=!1,!1)}),a&&(i=i.add(r))}),this.jt.forEach((r,o)=>o.setReadTime(e));const s=new gx(e,t,this.Wt,this.jt,i);return this.jt=th(),this.zt=oz(),this.Wt=new fr(rs),s}Jt(e,t){if(!this.te(e))return;const i=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,i),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,i){if(!this.te(e))return;const s=this.Zt(e);this.ae(e,t)?s.Bt(t,1):s.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),i&&(this.jt=this.jt.insert(t,i))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new rz,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Or(rs),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ct("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new rz),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function oz(){return new fr(Ht.comparator)}function az(){return new fr(Ht.comparator)}const pG={asc:"ASCENDING",desc:"DESCENDING"},fG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mG={and:"AND",or:"OR"};class gG{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function QN(n,e){return n.useProto3Json||ix(e)?e:{value:e}}function aw(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lz(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function yG(n,e){return aw(n,e.toTimestamp())}function Bo(n){return wi(!!n),Ii.fromTimestamp(function(e){const t=Iy(e);return new qr(t.seconds,t.nanos)}(n))}function JN(n,e){return(t=n,new Zs(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function cz(n){const e=Zs.fromString(n);return wi(vz(e)),e}function vx(n,e){return JN(n.databaseId,e.path)}function $p(n,e){const t=cz(e);if(t.get(1)!==n.databaseId.projectId)throw new lt(Me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new lt(Me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ht(uz(t))}function eF(n,e){return JN(n.databaseId,e)}function hz(n){const e=cz(n);return 4===e.length?Zs.emptyPath():uz(e)}function bx(n){return new Zs(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function uz(n){return wi(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function dz(n,e,t){return{name:vx(n,e),fields:t.value.mapValue.fields}}function pz(n,e,t){const i=$p(n,e.name),s=Bo(e.updateTime),r=e.createTime?Bo(e.createTime):Ii.min(),o=new bl({mapValue:{fields:e.fields}}),a=Mr.newFoundDocument(i,s,r,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Cx(n,e){let t;if(e instanceof rw)t={update:dz(n,e.key,e.value)};else if(e instanceof ow)t={delete:vx(n,e.key)};else if(e instanceof ym)t={update:dz(n,e.key,e.data),updateMask:IG(e.fieldMask)};else{if(!(e instanceof $N))return ei();t={verify:vx(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,r){const o=r.transform;if(o instanceof sw)return{fieldPath:r.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Ub)return{fieldPath:r.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof zb)return{fieldPath:r.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof nw)return{fieldPath:r.field.canonicalString(),increment:o.gt};throw ei()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:yG(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:ei()),t;var s}function tF(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?$r.updateTime(Bo(s.updateTime)):void 0!==s.exists?$r.exists(s.exists):$r.none():$r.none(),i=e.updateTransforms?e.updateTransforms.map(s=>function(r,o){let a=null;"setToServerValue"in o?(wi("REQUEST_TIME"===o.setToServerValue),a=new sw):"appendMissingElements"in o?a=new Ub(o.appendMissingElements.values||[]):"removeAllFromArray"in o?a=new zb(o.removeAllFromArray.values||[]):"increment"in o?a=new nw(r,o.increment):ei();const u=Eo.fromServerFormat(o.fieldPath);return new px(u,a)}(n,s)):[];var s;if(e.update){const s=$p(n,e.update.name),r=new bl({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new eh((e.updateMask.fieldPaths||[]).map(p=>Eo.fromServerFormat(p)));return new ym(s,r,o,t,i)}return new rw(s,r,t,i)}if(e.delete){const s=$p(n,e.delete);return new ow(s,t)}if(e.verify){const s=$p(n,e.verify);return new $N(s,t)}return ei()}function fz(n,e){return{documents:[eF(n,e.path)]}}function iF(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=eF(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=eF(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const s=function(u){if(0!==u.length)return yz(Fn.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const r=function(u){if(0!==u.length)return u.map(p=>{return{field:Oy((y=p).field),direction:wG(y.dir)};var y})}(e.orderBy);r&&(t.structuredQuery.orderBy=r);const o=QN(n,e.limit);var a,u;return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(t.structuredQuery.endAt={before:!(u=e.endAt).inclusive,values:u.position}),t}function mz(n){let e=hz(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){wi(1===i);const y=t.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let r=[];t.where&&(r=function(y){const E=gz(y);return E instanceof Fn&&BN(E)?E.getFilters():[E]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(y=>{return new ew(lw((E=y).field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction));var E}));let a=null;t.limit&&(a=function(y){let E;return E="object"==typeof y?y.value:y,ix(E)?null:E}(t.limit));let u=null;var y;t.startAt&&(u=new ky((y=t.startAt).values||[],!!y.before));let p=null;return t.endAt&&(p=function(y){return new ky(y.values||[],!y.before)}(t.endAt)),OU(e,s,o,r,a,"F",u,p)}function gz(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=lw(e.unaryFilter.field);return Hs.create(t,"==",{doubleValue:NaN});case"IS_NULL":const i=lw(e.unaryFilter.field);return Hs.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=lw(e.unaryFilter.field);return Hs.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=lw(e.unaryFilter.field);return Hs.create(r,"!=",{nullValue:"NULL_VALUE"});default:return ei()}}(n):void 0!==n.fieldFilter?Hs.create(lw((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ei()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Fn.create(e.compositeFilter.filters.map(t=>gz(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ei()}}(e.compositeFilter.op))}(n):ei();var e}function wG(n){return pG[n]}function SG(n){return fG[n]}function _G(n){return mG[n]}function Oy(n){return{fieldPath:n.canonicalString()}}function lw(n){return Eo.fromServerFormat(n.fieldPath)}function yz(n){return n instanceof Hs?function(e){if("=="===e.op){if(mU(e.value))return{unaryFilter:{field:Oy(e.field),op:"IS_NAN"}};if(fU(e.value))return{unaryFilter:{field:Oy(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(mU(e.value))return{unaryFilter:{field:Oy(e.field),op:"IS_NOT_NAN"}};if(fU(e.value))return{unaryFilter:{field:Oy(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oy(e.field),op:SG(e.op),value:e.value}}}(n):n instanceof Fn?function(e){const t=e.getFilters().map(i=>yz(i));return 1===t.length?t[0]:{compositeFilter:{op:_G(e.op),filters:t}}}(n):ei()}function IG(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function vz(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class vm{constructor(e,t,i,s,r=Ii.min(),o=Ii.min(),a=ya.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new vm(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new vm(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class bz{constructor(e){this.fe=e}}function Cz(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:S1(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:vx(s=n.fe,(r=e).key),fields:r.data.value.mapValue.fields,updateTime:aw(s,r.version.toTimestamp()),createTime:aw(s,r.createTime.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Wb(e.version)};else{if(!e.isUnknownDocument())return ei();i.unknownDocument={path:t.path.toArray(),version:Wb(e.version)}}var s,r;return i}function S1(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Wb(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function qb(n){const e=new qr(n.seconds,n.nanoseconds);return Ii.fromTimestamp(e)}function $b(n,e){const t=(e.baseMutations||[]).map(r=>tF(n.fe,r));for(let r=0;r<e.mutations.length-1;++r){const o=e.mutations[r];r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(o.updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r)}const i=e.mutations.map(r=>tF(n.fe,r)),s=qr.fromMillis(e.localWriteTimeMs);return new GN(e.batchId,s,t,i)}function Ex(n){const e=qb(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?qb(n.lastLimboFreeSnapshotVersion):Ii.min();let i;var s;return void 0!==n.query.documents?(wi(1===(s=n.query).documents.length),i=bc(iw(hz(s.documents[0])))):i=bc(mz(n.query)),new vm(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ya.fromBase64String(n.resumeToken))}function Ez(n,e){const t=Wb(e.snapshotVersion),i=Wb(e.lastLimboFreeSnapshotVersion);let s;s=f1(e.target)?fz(n.fe,e.target):iF(n.fe,e.target);const r=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Hb(e.target),readTime:t,resumeToken:r,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:s}}function sF(n){const e=mz({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?y1(e,e.limit,"L"):e}function nF(n,e){return new KN(e.largestBatchId,tF(n.fe,e.overlayMutation))}function wz(n,e){const t=e.path.lastSegment();return[n,zl(e.path.popLast()),t]}function Sz(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Wb(i.readTime),documentKey:zl(i.documentKey.path),largestBatchId:i.largestBatchId}}class TG{getBundleMetadata(e,t){return _z(e).get(t).next(i=>{if(i)return{id:(s=i).bundleId,createTime:qb(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return _z(e).put({bundleId:(i=t).id,createTime:Wb(Bo(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return Iz(e).get(t).next(i=>{if(i)return{name:(s=i).name,query:sF(s.bundledQuery),readTime:qb(s.readTime)};var s})}saveNamedQuery(e,t){return Iz(e).put({name:(i=t).name,readTime:Wb(Bo(i.readTime)),bundledQuery:i.bundledQuery});var i}}function _z(n){return Wa(n,"bundles")}function Iz(n){return Wa(n,"namedQueries")}class _1{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new _1(e,t.uid||"")}getOverlay(e,t){return wx(e).get(wz(this.userId,t)).next(i=>i?nF(this.serializer,i):null)}getOverlays(e,t){const i=qp();return Te.forEach(t,s=>this.getOverlay(e,s).next(r=>{null!==r&&i.set(s,r)})).next(()=>i)}saveOverlays(e,t,i){const s=[];return i.forEach((r,o)=>{const a=new KN(t,o);s.push(this.we(e,a))}),Te.waitFor(s)}removeOverlaysForBatchId(e,t,i){const s=new Set;t.forEach(o=>s.add(zl(o.getCollectionPath())));const r=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);r.push(wx(e).J("collectionPathOverlayIndex",a))}),Te.waitFor(r)}getOverlaysForCollection(e,t,i){const s=qp(),r=zl(t),o=IDBKeyRange.bound([this.userId,r,i],[this.userId,r,Number.POSITIVE_INFINITY],!0);return wx(e).j("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const p=nF(this.serializer,u);s.set(p.getKey(),p)}return s})}getOverlaysForCollectionGroup(e,t,i,s){const r=qp();let o;const a=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return wx(e).X({index:"collectionGroupOverlayIndex",range:a},(u,p,y)=>{const E=nF(this.serializer,p);r.size()<s||E.largestBatchId===o?(r.set(E.getKey(),E),o=E.largestBatchId):y.done()}).next(()=>r)}we(e,t){return wx(e).put(function(i,s,r){const[o,a,u]=wz(s,r.mutation.key);return{userId:s,collectionPath:a,documentId:u,collectionGroup:r.mutation.key.getCollectionGroup(),largestBatchId:r.largestBatchId,overlayMutation:Cx(i.fe,r.mutation)}}(this.serializer,this.userId,t))}}function wx(n){return Wa(n,"documentOverlays")}class Gb{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(wo(e.integerValue));else if("doubleValue"in e){const i=wo(e.doubleValue);isNaN(i)?this.ye(t,13):(this.ye(t,15),sx(i)?t.pe(0):t.pe(i))}else if("timestampValue"in e){const i=e.timestampValue;this.ye(t,20),"string"==typeof i?t.Ie(i):(t.Ie(`${i.seconds||""}`),t.pe(i.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(fm(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?gU(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):ei()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const i=e.fields||{};this.ye(t,55);for(const s of Object.keys(i))this.Te(s,t),this.me(i[s],t)}Pe(e,t){const i=e.values||[];this.ye(t,50);for(const s of i)this.me(s,t)}ve(e,t){this.ye(t,37),Ht.fromName(e).path.forEach(i=>{this.ye(t,60),this.be(i,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function AG(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function xz(n){const e=64-function(t){let i=0;for(let s=0;s<8;++s){const r=AG(255&t[s]);if(i+=r,8!==r)break}return i}(n);return Math.ceil(e/8)}Gb.Ve=new Gb;class DG{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.De(i.value),i=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ne(i.value),i=t.next();this.ke()}Me(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{const s=t.codePointAt(0);this.De(240|s>>>18),this.De(128|63&s>>>12),this.De(128|63&s>>>6),this.De(128|63&s)}}this.Ce()}$e(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{const s=t.codePointAt(0);this.Ne(240|s>>>18),this.Ne(128|63&s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s)}}this.ke()}Oe(e){const t=this.Fe(e),i=xz(t);this.Be(1+i),this.buffer[this.position++]=255&i;for(let s=t.length-i;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Le(e){const t=this.Fe(e),i=xz(t);this.Be(1+i),this.buffer[this.position++]=~(255&i);for(let s=t.length-i;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(s){const r=new DataView(new ArrayBuffer(8));return r.setFloat64(0,s,!1),new Uint8Array(r.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let s=1;s<t.length;++s)t[s]^=i?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const s=new Uint8Array(i);s.set(this.buffer),this.buffer=s}}class kG{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class OG{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Sx{constructor(){this.je=new DG,this.ze=new kG(this.je),this.We=new OG(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Yb{constructor(e,t,i,s){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=s}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new Yb(this.indexId,this.documentKey,this.arrayValue,i)}}function My(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Tz(n.arrayValue,e.arrayValue),0!==t?t:(t=Tz(n.directionalValue,e.directionalValue),0!==t?t:Ht.comparator(n.documentKey,e.documentKey)))}function Tz(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class MG{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const i=t;i.isInequality()?this.Ze=i:this.Xe.push(i)}}tn(e){wi(e.collectionGroup===this.collectionId);const t=kN(e);if(void 0!==t&&!this.en(t))return!1;const i=Fb(e);let s=new Set,r=0,o=0;for(;r<i.length&&this.en(i[r]);++r)s=s.add(i[r].fieldPath.canonicalString());if(r===i.length)return!0;if(void 0!==this.Ze){if(!s.has(this.Ze.field.canonicalString())){const a=i[r];if(!this.nn(this.Ze,a)||!this.sn(this.Ye[o++],a))return!1}++r}for(;r<i.length;++r){const a=i[r];if(o>=this.Ye.length||!this.sn(this.Ye[o++],a))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Az(n){var e,t;if(wi(n instanceof Hs||n instanceof Fn),n instanceof Hs){if(n instanceof AU){const s=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(r=>Hs.create(n.field,"==",r)))||[];return Fn.create(s,"or")}return n}const i=n.filters.map(s=>Az(s));return Fn.create(i,n.op)}function PG(n){if(0===n.getFilters().length)return[];const e=aF(Az(n));return wi(Dz(e)),rF(e)||oF(e)?[e]:e.getFilters()}function rF(n){return n instanceof Hs}function oF(n){return n instanceof Fn&&BN(n)}function Dz(n){return rF(n)||oF(n)||function(e){if(e instanceof Fn&&FN(e)){for(const t of e.getFilters())if(!rF(t)&&!oF(t))return!1;return!0}return!1}(n)}function aF(n){if(wi(n instanceof Hs||n instanceof Fn),n instanceof Hs)return n;if(1===n.filters.length)return aF(n.filters[0]);const e=n.filters.map(i=>aF(i));let t=Fn.create(e,n.op);return t=I1(t),Dz(t)?t:(wi(t instanceof Fn),wi(tw(t)),wi(t.filters.length>1),t.filters.reduce((i,s)=>lF(i,s)))}function lF(n,e){let t;return wi(n instanceof Hs||n instanceof Fn),wi(e instanceof Hs||e instanceof Fn),t=n instanceof Hs?e instanceof Hs?Fn.create([n,e],"and"):kz(n,e):e instanceof Hs?kz(e,n):function(i,s){if(wi(i.filters.length>0&&s.filters.length>0),tw(i)&&tw(s))return IU(i,s.getFilters());const r=FN(i)?i:s,o=FN(i)?s:i,a=r.filters.map(u=>lF(u,o));return Fn.create(a,"or")}(n,e),I1(t)}function kz(n,e){if(tw(e))return IU(e,n.getFilters());{const t=e.filters.map(i=>lF(n,i));return Fn.create(t,"or")}}function I1(n){if(wi(n instanceof Hs||n instanceof Fn),n instanceof Hs)return n;const e=n.getFilters();if(1===e.length)return I1(e[0]);if(SU(n))return n;const t=e.map(s=>I1(s)),i=[];return t.forEach(s=>{s instanceof Hs?i.push(s):s instanceof Fn&&(s.op===n.op?i.push(...s.filters):i.push(s))}),1===i.length?i[0]:Fn.create(i,n.op)}class LG{constructor(){this.rn=new cF}addToCollectionParentIndex(e,t){return this.rn.add(t),Te.resolve()}getCollectionParents(e,t){return Te.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return Te.resolve()}deleteFieldIndex(e,t){return Te.resolve()}getDocumentsMatchingTarget(e,t){return Te.resolve(null)}getIndexType(e,t){return Te.resolve(0)}getFieldIndexes(e,t){return Te.resolve([])}getNextCollectionGroupToUpdate(e){return Te.resolve(null)}getMinOffset(e,t){return Te.resolve(Nh.min())}getMinOffsetFromCollectionGroup(e,t){return Te.resolve(Nh.min())}updateCollectionGroup(e,t,i){return Te.resolve()}updateIndexEntries(e,t){return Te.resolve()}}class cF{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new Or(Zs.comparator),r=!s.has(i);return this.index[t]=s.add(i),r}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Or(Zs.comparator)).toArray()}}const x1=new Uint8Array(0);class RG{constructor(e,t){this.user=e,this.databaseId=t,this.on=new cF,this.un=new gm(i=>Hb(i),(i,s)=>lx(i,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const i=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const r={collectionId:i,parent:zl(s)};return Oz(e).put(r)}return Te.resolve()}getCollectionParents(e,t){const i=[],s=IDBKeyRange.bound([t,""],[Z3(t),""],!1,!0);return Oz(e).j(s).next(r=>{for(const o of r){if(o.collectionId!==t)break;i.push(zp(o.parent))}return i})}addFieldIndex(e,t){const i=T1(e),s={indexId:(o=t).indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])};var o;delete s.indexId;const r=i.add(s);if(t.indexState){const o=Ix(e);return r.next(a=>{o.put(Sz(a,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return r.next()}deleteFieldIndex(e,t){const i=T1(e),s=Ix(e),r=_x(e);return i.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=_x(e);let s=!0;const r=new Map;return Te.forEach(this.cn(t),o=>this.an(e,o).next(a=>{s&&(s=!!a),r.set(o,a)})).next(()=>{if(s){let o=bs();const a=[];return Te.forEach(r,(u,p)=>{var y;Ct("IndexedDbIndexManager",`Using index ${y=u,`id=${y.indexId}|cg=${y.collectionGroup}|f=${y.fields.map(re=>`${re.fieldPath}:${re.kind}`).join(",")}`} to execute ${Hb(t)}`);const E=function(re,Ae){const gt=kN(Ae);if(void 0===gt)return null;for(const ot of m1(re,gt.fieldPath))switch(ot.op){case"array-contains-any":return ot.value.arrayValue.values||[];case"array-contains":return[ot.value]}return null}(p,u),_=function(re,Ae){const gt=new Map;for(const ot of Fb(Ae))for(const ri of m1(re,ot.fieldPath))switch(ri.op){case"==":case"in":gt.set(ot.fieldPath.canonicalString(),ri.value);break;case"not-in":case"!=":return gt.set(ot.fieldPath.canonicalString(),ri.value),Array.from(gt.values())}return null}(p,u),D=function(re,Ae){const gt=[];let ot=!0;for(const ri of Fb(Ae)){const jt=0===ri.kind?DU(re,ri.fieldPath,re.startAt):kU(re,ri.fieldPath,re.startAt);gt.push(jt.value),ot&&(ot=jt.inclusive)}return new ky(gt,ot)}(p,u),L=function(re,Ae){const gt=[];let ot=!0;for(const ri of Fb(Ae)){const jt=0===ri.kind?kU(re,ri.fieldPath,re.endAt):DU(re,ri.fieldPath,re.endAt);gt.push(jt.value),ot&&(ot=jt.inclusive)}return new ky(gt,ot)}(p,u),V=this.hn(u,p,D),H=this.hn(u,p,L),se=this.ln(u,p,_),_e=this.fn(u.indexId,E,V,D.inclusive,H,L.inclusive,se);return Te.forEach(_e,re=>i.H(re,t.limit).next(Ae=>{Ae.forEach(gt=>{const ot=Ht.fromSegments(gt.documentKey);o.has(ot)||(o=o.add(ot),a.push(ot))})}))}).next(()=>a)}return Te.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:PG(Fn.create(e.filters,"and")).map(i=>HN(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,i,s,r,o,a){const u=(null!=t?t.length:1)*Math.max(i.length,r.length),p=u/(null!=t?t.length:1),y=[];for(let E=0;E<u;++E){const _=t?this.dn(t[E/p]):x1,D=this.wn(e,_,i[E%p],s),L=this._n(e,_,r[E%p],o),V=a.map(H=>this.wn(e,_,H,!0));y.push(...this.createRange(D,L,V))}return y}wn(e,t,i,s){const r=new Yb(e,Ht.empty(),t,i);return s?r:r.Je()}_n(e,t,i,s){const r=new Yb(e,Ht.empty(),t,i);return s?r.Je():r}an(e,t){const i=new MG(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(r=>{let o=null;for(const a of r)i.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let i=2;const s=this.cn(t);return Te.forEach(s,r=>this.an(e,r).next(o=>{o?0!==i&&o.fields.length<function(a){let u=new Or(Eo.comparator),p=!1;for(const y of a.filters)for(const E of y.getFlattenedFilters())E.field.isKeyField()||("array-contains"===E.op||"array-contains-any"===E.op?p=!0:u=u.add(E.field));for(const y of a.orderBy)y.field.isKeyField()||(u=u.add(y.field));return u.size+(p?1:0)}(r)&&(i=1):i=0})).next(()=>null!==t.limit&&s.length>1&&2===i?1:i)}mn(e,t){const i=new Sx;for(const s of Fb(e)){const r=t.data.field(s.fieldPath);if(null==r)return null;const o=i.He(s.kind);Gb.Ve._e(r,o)}return i.Qe()}dn(e){const t=new Sx;return Gb.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const i=new Sx;return Gb.Ve._e(Vb(this.databaseId,t),i.He(function(s){const r=Fb(s);return 0===r.length?0:r[r.length-1].kind}(e))),i.Qe()}ln(e,t,i){if(null===i)return[];let s=[];s.push(new Sx);let r=0;for(const o of Fb(e)){const a=i[r++];for(const u of s)if(this.yn(t,o.fieldPath)&&ox(a))s=this.pn(s,o,a);else{const p=u.He(o.kind);Gb.Ve._e(a,p)}}return this.In(s)}hn(e,t,i){return this.ln(e,t,i.position)}In(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Qe();return t}pn(e,t,i){const s=[...e],r=[];for(const o of i.arrayValue.values||[])for(const a of s){const u=new Sx;u.seed(a.Qe()),Gb.Ve._e(o,u.He(t.kind)),r.push(u)}return r}yn(e,t){return!!e.filters.find(i=>i instanceof Hs&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=T1(e),s=Ix(e);return(t?i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.j()).next(r=>{const o=[];return Te.forEach(r,a=>s.get([a.indexId,this.uid]).next(u=>{o.push(function(p,y){const E=y?new ex(y.sequenceNumber,new Nh(qb(y.readTime),new Ht(zp(y.documentKey)),y.largestBatchId)):ex.empty(),_=p.fields.map(([D,L])=>new r1(Eo.fromServerFormat(D),L));return new n1(p.indexId,p.collectionGroup,_,E)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,s)=>{const r=i.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==r?r:rs(i.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const s=T1(e),r=Ix(e);return this.Tn(e).next(o=>s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>Te.forEach(a,u=>r.put(Sz(u.indexId,this.user,o,i)))))}updateIndexEntries(e,t){const i=new Map;return Te.forEach(t,(s,r)=>{const o=i.get(s.collectionGroup);return(o?Te.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(i.set(s.collectionGroup,a),Te.forEach(a,u=>this.En(e,s,u).next(p=>{const y=this.An(r,u);return p.isEqual(y)?Te.resolve():this.vn(e,r,u,p,y)}))))})}Rn(e,t,i,s){return _x(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.gn(i,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,i,s){return _x(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.gn(i,t.key),t.key.path.toArray()])}En(e,t,i){const s=_x(e);let r=new Or(My);return s.X({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.gn(i,t)])},(o,a)=>{r=r.add(new Yb(i.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>r)}An(e,t){let i=new Or(My);const s=this.mn(t,e);if(null==s)return i;const r=kN(t);if(null!=r){const o=e.data.field(r.fieldPath);if(ox(o))for(const a of o.arrayValue.values||[])i=i.add(new Yb(t.indexId,e.key,this.dn(a),s))}else i=i.add(new Yb(t.indexId,e.key,x1,s));return i}vn(e,t,i,s,r){Ct("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(a,u,p,y,E){const _=a.getIterator(),D=u.getIterator();let L=QE(_),V=QE(D);for(;L||V;){let H=!1,se=!1;if(L&&V){const _e=p(L,V);_e<0?se=!0:_e>0&&(H=!0)}else null!=L?se=!0:H=!0;H?(y(V),V=QE(D)):se?(E(L),L=QE(_)):(L=QE(_),V=QE(D))}}(s,r,My,a=>{o.push(this.Rn(e,t,i,a))},a=>{o.push(this.Pn(e,t,i,a))}),Te.waitFor(o)}Tn(e){let t=1;return Ix(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,s,r)=>{r.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((o,a)=>My(o,a)).filter((o,a,u)=>!a||0!==My(o,u[a-1]));const s=[];s.push(e);for(const o of i){const a=My(o,e),u=My(o,t);if(0===a)s[0]=e.Je();else if(a>0&&u<0)s.push(o),s.push(o.Je());else if(u>0)break}s.push(t);const r=[];for(let o=0;o<s.length;o+=2){if(this.bn(s[o],s[o+1]))return[];r.push(IDBKeyRange.bound([s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,x1,[]],[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,x1,[]]))}return r}bn(e,t){return My(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Mz)}getMinOffset(e,t){return Te.mapArray(this.cn(t),i=>this.an(e,i).next(s=>s||ei())).next(Mz)}}function Oz(n){return Wa(n,"collectionParents")}function _x(n){return Wa(n,"indexEntries")}function T1(n){return Wa(n,"indexConfiguration")}function Ix(n){return Wa(n,"indexState")}function Mz(n){wi(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const s=n[i].indexState.offset;ON(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Nh(e.readTime,e.documentKey,t)}const Pz={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Wl{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new Wl(e,Wl.DEFAULT_COLLECTION_PERCENTILE,Wl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Lz(n,e,t){const i=n.store("mutations"),s=n.store("documentMutations"),r=[],o=IDBKeyRange.only(t.batchId);let a=0;const u=i.X({range:o},(y,E,_)=>(a++,_.delete()));r.push(u.next(()=>{wi(1===a)}));const p=[];for(const y of t.mutations){const E=rU(e,y.key.path,t.batchId);r.push(s.delete(E)),p.push(y.key)}return Te.waitFor(r).next(()=>p)}function A1(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ei();e=n.noDocument}return JSON.stringify(e).length}Wl.DEFAULT_COLLECTION_PERCENTILE=10,Wl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wl.DEFAULT=new Wl(41943040,Wl.DEFAULT_COLLECTION_PERCENTILE,Wl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wl.DISABLED=new Wl(-1,0,0);class D1{constructor(e,t,i,s){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=s,this.Vn={}}static de(e,t,i,s){wi(""!==e.uid);const r=e.isAuthenticated()?e.uid:"";return new D1(r,t,i,s)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Py(e).X({index:"userMutationsIndex",range:i},(s,r,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,i,s){const r=cw(e),o=Py(e);return o.add({}).next(a=>{wi("number"==typeof a);const u=new GN(a,t,i,s),p=function(_,D,L){const V=L.baseMutations.map(se=>Cx(_.fe,se)),H=L.mutations.map(se=>Cx(_.fe,se));return{userId:D,batchId:L.batchId,localWriteTimeMs:L.localWriteTime.toMillis(),baseMutations:V,mutations:H}}(this.serializer,this.userId,u),y=[];let E=new Or((_,D)=>rs(_.canonicalString(),D.canonicalString()));for(const _ of s){const D=rU(this.userId,_.key.path,a);E=E.add(_.key.path.popLast()),y.push(o.put(p)),y.push(r.put(D,w8))}return E.forEach(_=>{y.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Vn[a]=u.keys()}),Te.waitFor(y).next(()=>u)})}lookupMutationBatch(e,t){return Py(e).get(t).next(i=>i?(wi(i.userId===this.userId),$b(this.serializer,i)):null)}Sn(e,t){return this.Vn[t]?Te.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const s=i.keys();return this.Vn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=IDBKeyRange.lowerBound([this.userId,i]);let r=null;return Py(e).X({index:"userMutationsIndex",range:s},(o,a,u)=>{a.userId===this.userId&&(wi(a.batchId>=i),r=$b(this.serializer,a)),u.done()}).next(()=>r)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Py(e).X({index:"userMutationsIndex",range:t,reverse:!0},(s,r,o)=>{i=r.batchId,o.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Py(e).j("userMutationsIndex",t).next(i=>i.map(s=>$b(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=a1(this.userId,t.path),s=IDBKeyRange.lowerBound(i),r=[];return cw(e).X({range:s},(o,a,u)=>{const[p,y,E]=o,_=zp(y);if(p===this.userId&&t.path.isEqual(_))return Py(e).get(E).next(D=>{if(!D)throw ei();wi(D.userId===this.userId),r.push($b(this.serializer,D))});u.done()}).next(()=>r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Or(rs);const s=[];return t.forEach(r=>{const o=a1(this.userId,r.path),a=IDBKeyRange.lowerBound(o),u=cw(e).X({range:a},(p,y,E)=>{const[_,D,L]=p,V=zp(D);_===this.userId&&r.path.isEqual(V)?i=i.add(L):E.done()});s.push(u)}),Te.waitFor(s).next(()=>this.Dn(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1,r=a1(this.userId,i),o=IDBKeyRange.lowerBound(r);let a=new Or(rs);return cw(e).X({range:o},(u,p,y)=>{const[E,_,D]=u,L=zp(_);E===this.userId&&i.isPrefixOf(L)?L.length===s&&(a=a.add(D)):y.done()}).next(()=>this.Dn(e,a))}Dn(e,t){const i=[],s=[];return t.forEach(r=>{s.push(Py(e).get(r).next(o=>{if(null===o)throw ei();wi(o.userId===this.userId),i.push($b(this.serializer,o))}))}),Te.waitFor(s).next(()=>i)}removeMutationBatch(e,t){return Lz(e.ht,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),Te.forEach(i,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Te.resolve();const i=IDBKeyRange.lowerBound([this.userId]),s=[];return cw(e).X({range:i},(r,o,a)=>{if(r[0]===this.userId){const u=zp(r[1]);s.push(u)}else a.done()}).next(()=>{wi(0===s.length)})})}containsKey(e,t){return Rz(e,this.userId,t)}xn(e){return Nz(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Rz(n,e,t){const i=a1(e,t.path),s=i[1],r=IDBKeyRange.lowerBound(i);let o=!1;return cw(n).X({range:r,Y:!0},(a,u,p)=>{const[y,E,_]=a;y===e&&E===s&&(o=!0),p.done()}).next(()=>o)}function Py(n){return Wa(n,"mutations")}function cw(n){return Wa(n,"documentMutations")}function Nz(n){return Wa(n,"mutationQueues")}class Kb{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Kb(0)}static Mn(){return new Kb(-1)}}class NG{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const i=new Kb(t.highestTargetId);return t.highestTargetId=i.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Ii.fromTimestamp(new qr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.$n(e).next(s=>(s.highestListenSequenceNumber=t,i&&(s.lastRemoteSnapshotVersion=i.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.On(e,s)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(i=>(i.targetCount+=1,this.Bn(t,i),this.On(e,i))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>hw(e).delete(t.targetId)).next(()=>this.$n(e)).next(i=>(wi(i.targetCount>0),i.targetCount-=1,this.On(e,i)))}removeTargets(e,t,i){let s=0;const r=[];return hw(e).X((o,a)=>{const u=Ex(a);u.sequenceNumber<=t&&null===i.get(u.targetId)&&(s++,r.push(this.removeTargetData(e,u)))}).next(()=>Te.waitFor(r)).next(()=>s)}forEachTarget(e,t){return hw(e).X((i,s)=>{const r=Ex(s);t(r)})}$n(e){return Fz(e).get("targetGlobalKey").next(t=>(wi(null!==t),t))}On(e,t){return Fz(e).put("targetGlobalKey",t)}Fn(e,t){return hw(e).put(Ez(this.serializer,t))}Bn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const i=Hb(t),s=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let r=null;return hw(e).X({range:s,index:"queryTargetsIndex"},(o,a,u)=>{const p=Ex(a);lx(t,p.target)&&(r=p,u.done())}).next(()=>r)}addMatchingKeys(e,t,i){const s=[],r=Ly(e);return t.forEach(o=>{const a=zl(o.path);s.push(r.put({targetId:i,path:a})),s.push(this.referenceDelegate.addReference(e,i,o))}),Te.waitFor(s)}removeMatchingKeys(e,t,i){const s=Ly(e);return Te.forEach(t,r=>{const o=zl(r.path);return Te.waitFor([s.delete([i,o]),this.referenceDelegate.removeReference(e,i,r)])})}removeMatchingKeysForTargetId(e,t){const i=Ly(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(s)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),s=Ly(e);let r=bs();return s.X({range:i,Y:!0},(o,a,u)=>{const p=zp(o[1]),y=new Ht(p);r=r.add(y)}).next(()=>r)}containsKey(e,t){const i=zl(t.path),s=IDBKeyRange.bound([i],[Z3(i)],!1,!0);let r=0;return Ly(e).X({index:"documentTargetsIndex",Y:!0,range:s},([o,a],u,p)=>{0!==o&&(r++,p.done())}).next(()=>r>0)}le(e,t){return hw(e).get(t).next(i=>i?Ex(i):null)}}function hw(n){return Wa(n,"targets")}function Fz(n){return Wa(n,"targetGlobal")}function Ly(n){return Wa(n,"targetDocuments")}function Bz([n,e],[t,i]){const s=rs(n,t);return 0===s?rs(e,i):s}class FG{constructor(e){this.Ln=e,this.buffer=new Or(Bz),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Bz(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Vz{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Ct("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ne.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){Sy(i)?Ct("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield wy(i)}yield t.Qn(3e5)}))}}class BG{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return Te.resolve(Fh.ct);const i=new FG(t);return this.jn.forEachTarget(e,s=>i.Kn(s.sequenceNumber)).next(()=>this.jn.Wn(e,s=>i.Kn(s))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.jn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ct("LruGarbageCollector","Garbage collection skipped; disabled"),Te.resolve(Pz)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Ct("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Pz):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let i,s,r,o,a,u,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(Ct("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,o=Date.now(),this.nthSequenceNumber(e,s))).next(E=>(i=E,a=Date.now(),this.removeTargets(e,i,t))).next(E=>(r=E,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(E=>(p=Date.now(),AN()<=vy.in.DEBUG&&Ct("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-y}ms\n\tDetermined least recently used ${s} in `+(a-o)+`ms\n\tRemoved ${r} targets in `+(u-a)+`ms\n\tRemoved ${E} documents in `+(p-u)+`ms\nTotal Duration: ${p-y}ms`),Te.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:E})))}}class VG{constructor(e,t){this.db=e,this.garbageCollector=function Hz(n,e){return new BG(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(s=>i+s))}Jn(e){let t=0;return this.Wn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(i,s)=>t(s))}addReference(e,t,i){return k1(e,i)}removeReference(e,t,i){return k1(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return k1(e,t)}Xn(e,t){return function(i,s){let r=!1;return Nz(i).Z(o=>Rz(i,o,s).next(a=>(a&&(r=!0),Te.resolve(!a)))).next(()=>r)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let r=0;return this.Yn(e,(o,a)=>{if(a<=t){const u=this.Xn(e,o).next(p=>{if(!p)return r++,i.getEntry(e,o).next(()=>(i.removeEntry(o,Ii.min()),Ly(e).delete([0,zl(o.path)])))});s.push(u)}}).next(()=>Te.waitFor(s)).next(()=>i.apply(e)).next(()=>r)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return k1(e,t)}Yn(e,t){const i=Ly(e);let s,r=Fh.ct;return i.X({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:p})=>{0===o?(r!==Fh.ct&&t(new Ht(zp(s)),r),r=p,s=u):r=Fh.ct}).next(()=>{r!==Fh.ct&&t(new Ht(zp(s)),r)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function k1(n,e){return Ly(n).put((i=n.currentSequenceNumber,{targetId:0,path:zl(e.path),sequenceNumber:i}));var i}class jz{constructor(){this.changes=new gm(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Mr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?Te.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class HG{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Zb(e).put(i)}removeEntry(e,t,i){return Zb(e).delete(function(s,r){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],S1(r),o[o.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.Zn(e,i)))}getEntry(e,t){let i=Mr.newInvalidDocument(t);return Zb(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(xx(t))},(s,r)=>{i=this.ts(t,r)}).next(()=>i)}es(e,t){let i={size:0,document:Mr.newInvalidDocument(t)};return Zb(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(xx(t))},(s,r)=>{i={document:this.ts(t,r),size:A1(r)}}).next(()=>i)}getEntries(e,t){let i=th();return this.ns(e,t,(s,r)=>{const o=this.ts(s,r);i=i.insert(s,o)}).next(()=>i)}ss(e,t){let i=th(),s=new fr(Ht.comparator);return this.ns(e,t,(r,o)=>{const a=this.ts(r,o);i=i.insert(r,a),s=s.insert(r,A1(o))}).next(()=>({documents:i,rs:s}))}ns(e,t,i){if(t.isEmpty())return Te.resolve();let s=new Or(qz);t.forEach(u=>s=s.add(u));const r=IDBKeyRange.bound(xx(s.first()),xx(s.last())),o=s.getIterator();let a=o.getNext();return Zb(e).X({index:"documentKeyIndex",range:r},(u,p,y)=>{const E=Ht.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;a&&qz(a,E)<0;)i(a,null),a=o.getNext();a&&a.isEqual(E)&&(i(a,p),a=o.hasNext()?o.getNext():null),a?y.G(xx(a)):y.done()}).next(()=>{for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,i,s){const r=t.path,o=[r.popLast().toArray(),r.lastSegment(),S1(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],a=[r.popLast().toArray(),r.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Zb(e).j(IDBKeyRange.bound(o,a,!0)).next(u=>{let p=th();for(const y of u){const E=this.ts(Ht.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);E.isFoundDocument()&&(hx(t,E)||s.has(E.key))&&(p=p.insert(E.key,E))}return p})}getAllFromCollectionGroup(e,t,i,s){let r=th();const o=Wz(t,i),a=Wz(t,Nh.max());return Zb(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,p,y)=>{const E=this.ts(Ht.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);r=r.insert(E.key,E),r.size===s&&y.done()}).next(()=>r)}newChangeBuffer(e){return new jG(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return zz(e).get("remoteDocumentGlobalKey").next(t=>(wi(!!t),t))}Zn(e,t){return zz(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const i=function xG(n,e){let t;if(e.document)t=pz(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=Ht.fromSegments(e.noDocument.path),s=qb(e.noDocument.readTime);t=Mr.newNoDocument(i,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ei();{const i=Ht.fromSegments(e.unknownDocument.path),s=qb(e.unknownDocument.version);t=Mr.newUnknownDocument(i,s)}}return e.readTime&&t.setReadTime(function(i){const s=new qr(i[0],i[1]);return Ii.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!i.isNoDocument()||!i.version.isEqual(Ii.min()))return i}return Mr.newInvalidDocument(e)}}function Uz(n){return new HG(n)}class jG extends jz{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new gm(i=>i.toString(),(i,s)=>i.isEqual(s))}applyChanges(e){const t=[];let i=0,s=new Or((r,o)=>rs(r.canonicalString(),o.canonicalString()));return this.changes.forEach((r,o)=>{const a=this.us.get(r);if(t.push(this.os.removeEntry(e,r,a.readTime)),o.isValidDocument()){const u=Cz(this.os.serializer,o);s=s.add(r.path.popLast()),i+=A1(u)-a.size,t.push(this.os.addEntry(e,r,u))}else if(i-=a.size,this.trackRemovals){const u=Cz(this.os.serializer,o.convertToNoDocument(Ii.min()));t.push(this.os.addEntry(e,r,u))}}),s.forEach(r=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,r))}),t.push(this.os.updateMetadata(e,i)),Te.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(i=>(this.us.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:i,rs:s})=>(s.forEach((r,o)=>{this.us.set(r,{size:o,readTime:i.get(r).readTime})}),i))}}function zz(n){return Wa(n,"remoteDocumentGlobal")}function Zb(n){return Wa(n,"remoteDocumentsV14")}function xx(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Wz(n,e){const t=e.documentKey.path.toArray();return[n,S1(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function qz(n,e){const t=n.path.toArray(),i=e.path.toArray();let s=0;for(let r=0;r<t.length-2&&r<i.length-2;++r)if(s=rs(t[r],i[r]),s)return s;return s=rs(t.length,i.length),s||(s=rs(t[t.length-2],i[i.length-2]),s||rs(t[t.length-1],i[i.length-1]))}class UG{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class $z{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==i&&fx(i.mutation,s,eh.empty(),qr.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,bs()).next(()=>i))}getLocalViewOfDocuments(e,t,i=bs()){const s=qp();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,i).next(r=>{let o=ux();return r.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const i=qp();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,bs()))}populateOverlays(e,t,i){const s=[];return i.forEach(r=>{t.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(e,s).next(r=>{r.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,s){let r=th();const o=dx(),a=dx();return t.forEach((u,p)=>{const y=i.get(p.key);s.has(p.key)&&(void 0===y||y.mutation instanceof ym)?r=r.insert(p.key,p):void 0!==y?(o.set(p.key,y.mutation.getFieldMask()),fx(y.mutation,p,y.mutation.getFieldMask(),qr.now())):o.set(p.key,eh.empty())}),this.recalculateAndSaveOverlays(e,r).next(u=>(u.forEach((p,y)=>o.set(p,y)),t.forEach((p,y)=>{var E;return a.set(p,new UG(y,null!==(E=o.get(p))&&void 0!==E?E:null))}),a))}recalculateAndSaveOverlays(e,t){const i=dx();let s=new fr((o,a)=>o-a),r=bs();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(u=>{const p=t.get(u);if(null===p)return;let y=i.get(u)||eh.empty();y=a.applyToLocalView(p,y),i.set(u,y);const E=(s.get(a.batchId)||bs()).add(u);s=s.insert(a.batchId,E)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),p=u.key,y=u.value,E=BU();y.forEach(_=>{if(!r.has(_)){const D=GU(t.get(_),i.get(_));null!==D&&E.set(_,D),r=r.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,p,E))}return Te.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return Ht.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):UN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i);var s}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next(r=>{const o=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-r.size):Te.resolve(qp());let a=-1,u=r;return o.next(p=>Te.forEach(p,(y,E)=>(a<E.largestBatchId&&(a=E.largestBatchId),r.get(y)?Te.resolve():this.remoteDocumentCache.getEntry(e,y).next(_=>{u=u.insert(y,_)}))).next(()=>this.populateOverlays(e,p,r)).next(()=>this.computeViews(e,u,p,bs())).next(y=>({batchId:a,changes:FU(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ht(t)).next(i=>{let s=ux();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const s=t.collectionGroup;let r=ux();return this.indexManager.getCollectionParents(e,s).next(o=>Te.forEach(o,a=>{const u=(p=t,y=a.child(s),new mm(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt));var p,y;return this.getDocumentsMatchingCollectionQuery(e,u,i).next(p=>{p.forEach((y,E)=>{r=r.insert(y,E)})})}).next(()=>r))}getDocumentsMatchingCollectionQuery(e,t,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(r=>(s=r,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s))).next(r=>{s.forEach((a,u)=>{const p=u.getKey();null===r.get(p)&&(r=r.insert(p,Mr.newInvalidDocument(p)))});let o=ux();return r.forEach((a,u)=>{const p=s.get(a);void 0!==p&&fx(p.mutation,u,eh.empty(),qr.now()),hx(t,u)&&(o=o.insert(a,u))}),o})}}class zG{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return Te.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var i;return this.cs.set(t.id,{id:(i=t).id,version:i.version,createTime:Bo(i.createTime)}),Te.resolve()}getNamedQuery(e,t){return Te.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(i=t).name,query:sF(i.bundledQuery),readTime:Bo(i.readTime)}),Te.resolve();var i}}class WG{constructor(){this.overlays=new fr(Ht.comparator),this.ls=new Map}getOverlay(e,t){return Te.resolve(this.overlays.get(t))}getOverlays(e,t){const i=qp();return Te.forEach(t,s=>this.getOverlay(e,s).next(r=>{null!==r&&i.set(s,r)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((s,r)=>{this.we(e,t,r)}),Te.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.ls.get(i);return void 0!==s&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.ls.delete(i)),Te.resolve()}getOverlaysForCollection(e,t,i){const s=qp(),r=t.length+1,o=new Ht(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,p=u.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===r&&u.largestBatchId>i&&s.set(u.getKey(),u)}return Te.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let r=new fr((p,y)=>p-y);const o=this.overlays.getIterator();for(;o.hasNext();){const p=o.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let y=r.get(p.largestBatchId);null===y&&(y=qp(),r=r.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const a=qp(),u=r.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((p,y)=>a.set(p,y)),!(a.size()>=s)););return Te.resolve(a)}we(e,t,i){const s=this.overlays.get(i.key);if(null!==s){const o=this.ls.get(s.largestBatchId).delete(i.key);this.ls.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new KN(t,i));let r=this.ls.get(t);void 0===r&&(r=bs(),this.ls.set(t,r)),this.ls.set(t,r.add(i.key))}}class hF{constructor(){this.fs=new Or(qa.ds),this.ws=new Or(qa._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const i=new qa(e,t);this.fs=this.fs.add(i),this.ws=this.ws.add(i)}gs(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.ys(new qa(e,t))}ps(e,t){e.forEach(i=>this.removeReference(i,t))}Is(e){const t=new Ht(new Zs([])),i=new qa(t,e),s=new qa(t,e+1),r=[];return this.ws.forEachInRange([i,s],o=>{this.ys(o),r.push(o.key)}),r}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Ht(new Zs([])),i=new qa(t,e),s=new qa(t,e+1);let r=bs();return this.ws.forEachInRange([i,s],o=>{r=r.add(o.key)}),r}containsKey(e){const t=new qa(e,0),i=this.fs.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class qa{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Ht.comparator(e.key,t.key)||rs(e.As,t.As)}static _s(e,t){return rs(e.As,t.As)||Ht.comparator(e.key,t.key)}}class qG{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Or(qa.ds)}checkEmpty(e){return Te.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,s){const r=this.vs;this.vs++;const o=new GN(r,t,i,s);this.mutationQueue.push(o);for(const a of s)this.Rs=this.Rs.add(new qa(a.key,r)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Te.resolve(o)}lookupMutationBatch(e,t){return Te.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.bs(t+1),r=s<0?0:s;return Te.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new qa(t,0),s=new qa(t,Number.POSITIVE_INFINITY),r=[];return this.Rs.forEachInRange([i,s],o=>{const a=this.Ps(o.As);r.push(a)}),Te.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Or(rs);return t.forEach(s=>{const r=new qa(s,0),o=new qa(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([r,o],a=>{i=i.add(a.As)})}),Te.resolve(this.Vs(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let r=i;Ht.isDocumentKey(r)||(r=r.child(""));const o=new qa(new Ht(r),0);let a=new Or(rs);return this.Rs.forEachWhile(u=>{const p=u.key.path;return!!i.isPrefixOf(p)&&(p.length===s&&(a=a.add(u.As)),!0)},o),Te.resolve(this.Vs(a))}Vs(e){const t=[];return e.forEach(i=>{const s=this.Ps(i);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){wi(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let i=this.Rs;return Te.forEach(t.mutations,s=>{const r=new qa(s.key,t.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=i})}Cn(e){}containsKey(e,t){const i=new qa(t,0),s=this.Rs.firstAfterOrEqual(i);return Te.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return Te.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class $G{constructor(e){this.Ds=e,this.docs=new fr(Ht.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),r=s?s.size:0,o=this.Ds(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Te.resolve(i?i.document.mutableCopy():Mr.newInvalidDocument(t))}getEntries(e,t){let i=th();return t.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():Mr.newInvalidDocument(s))}),Te.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let r=th();const o=t.path,a=new Ht(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:p,value:{document:y}}=u.getNext();if(!o.isPrefixOf(p.path))break;p.path.length>o.length+1||ON(Q3(y),i)<=0||(s.has(y.key)||hx(t,y))&&(r=r.insert(y.key,y.mutableCopy()))}return Te.resolve(r)}getAllFromCollectionGroup(e,t,i,s){ei()}Cs(e,t){return Te.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new GG(this)}getSize(e){return Te.resolve(this.size)}}class GG extends jz{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?t.push(this.os.addEntry(e,s)):this.os.removeEntry(i)}),Te.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class YG{constructor(e){this.persistence=e,this.xs=new gm(t=>Hb(t),lx),this.lastRemoteSnapshotVersion=Ii.min(),this.highestTargetId=0,this.Ns=0,this.ks=new hF,this.targetCount=0,this.Ms=Kb.kn()}forEachTarget(e,t){return this.xs.forEach((i,s)=>t(s)),Te.resolve()}getLastRemoteSnapshotVersion(e){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Te.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Ns&&(this.Ns=t),Te.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Kb(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,Te.resolve()}updateTargetData(e,t){return this.Fn(t),Te.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Te.resolve()}removeTargets(e,t,i){let s=0;const r=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=t&&null===i.get(a.targetId)&&(this.xs.delete(o),r.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),Te.waitFor(r).next(()=>s)}getTargetCount(e){return Te.resolve(this.targetCount)}getTargetData(e,t){const i=this.xs.get(t)||null;return Te.resolve(i)}addMatchingKeys(e,t,i){return this.ks.gs(t,i),Te.resolve()}removeMatchingKeys(e,t,i){this.ks.ps(t,i);const s=this.persistence.referenceDelegate,r=[];return s&&t.forEach(o=>{r.push(s.markPotentiallyOrphaned(e,o))}),Te.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),Te.resolve()}getMatchingKeysForTargetId(e,t){const i=this.ks.Es(t);return Te.resolve(i)}containsKey(e,t){return Te.resolve(this.ks.containsKey(t))}}class uF{constructor(e,t){this.$s={},this.overlays={},this.Os=new Fh(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new YG(this),this.indexManager=new LG,this.remoteDocumentCache=new $G(i=>this.referenceDelegate.Ls(i)),this.serializer=new bz(t),this.qs=new zG(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new WG,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.$s[e.toKey()];return i||(i=new qG(t,this.referenceDelegate),this.$s[e.toKey()]=i),i}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,i){Ct("MemoryPersistence","Starting transaction:",e);const s=new KG(this.Os.next());return this.referenceDelegate.Us(),i(s).next(r=>this.referenceDelegate.Ks(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Gs(e,t){return Te.or(Object.values(this.$s).map(i=>()=>i.containsKey(e,t)))}}class KG extends eU{constructor(e){super(),this.currentSequenceNumber=e}}class O1{constructor(e){this.persistence=e,this.Qs=new hF,this.js=null}static zs(e){return new O1(e)}get Ws(){if(this.js)return this.js;throw ei()}addReference(e,t,i){return this.Qs.addReference(i,t),this.Ws.delete(i.toString()),Te.resolve()}removeReference(e,t,i){return this.Qs.removeReference(i,t),this.Ws.add(i.toString()),Te.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),Te.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(s=>this.Ws.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(r=>this.Ws.add(r.toString()))}).next(()=>i.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.Ws,i=>{const s=Ht.fromPath(i);return this.Hs(e,s).next(r=>{r||t.removeEntry(s,Ii.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(i=>{i?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return Te.or([()=>Te.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class ZG{constructor(e){this.serializer=e}O(e,t,i,s){const r=new o1("createOrUpgrade",t);var a;i<1&&s>=1&&(e.createObjectStore("owner"),(a=e).createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nU,{unique:!0}),a.createObjectStore("documentMutations"),Gz(e),function(a){a.createObjectStore("remoteDocuments")}(e));let o=Te.resolve();return i<3&&s>=3&&(0!==i&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),Gz(e)),o=o.next(()=>function(a){const u=a.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ii.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",p)}(r))),i<4&&s>=4&&(0!==i&&(o=o.next(()=>function(a,u){return u.store("mutations").j().next(p=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nU,{unique:!0});const y=u.store("mutations"),E=p.map(_=>y.put(_));return Te.waitFor(E)})}(e,r))),o=o.next(()=>{!function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&s>=5&&(o=o.next(()=>this.Ys(r))),i<6&&s>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(r)))),i<7&&s>=7&&(o=o.next(()=>this.Zs(r))),i<8&&s>=8&&(o=o.next(()=>this.ti(e,r))),i<9&&s>=9&&(o=o.next(()=>{!function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&s>=10&&(o=o.next(()=>this.ei(r))),i<11&&s>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&s>=12&&(o=o.next(()=>{!function(a){const u=a.createObjectStore("documentOverlays",{keyPath:L8});u.createIndex("collectionPathOverlayIndex",R8,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",N8,{unique:!1})}(e)})),i<13&&s>=13&&(o=o.next(()=>function(a){const u=a.createObjectStore("remoteDocumentsV14",{keyPath:S8});u.createIndex("documentKeyIndex",_8),u.createIndex("collectionGroupIndex",I8)}(e)).next(()=>this.ni(e,r)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&s>=14&&(o=o.next(()=>this.si(e,r))),i<15&&s>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:k8}).createIndex("sequenceNumberIndex",O8,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:M8}).createIndex("documentKeyIndex",P8,{unique:!1})}(e))),o}Xs(e){let t=0;return e.store("remoteDocuments").X((i,s)=>{t+=A1(s)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Ys(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.j().next(s=>Te.forEach(s,r=>{const o=IDBKeyRange.bound([r.userId,-1],[r.userId,r.lastAcknowledgedBatchId]);return i.j("userMutationsIndex",o).next(a=>Te.forEach(a,u=>{wi(u.userId===r.userId);const p=$b(this.serializer,u);return Lz(e,r.userId,p).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const r=[];return i.X((o,a)=>{const u=new Zs(o),p=[0,zl(u)];r.push(t.get(p).next(y=>y?Te.resolve():t.put({targetId:0,path:zl(u),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>Te.waitFor(r))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:D8});const i=t.store("collectionParents"),s=new cF,r=o=>{if(s.add(o)){const a=o.lastSegment(),u=o.popLast();return i.put({collectionId:a,parent:zl(u)})}};return t.store("remoteDocuments").X({Y:!0},(o,a)=>{const u=new Zs(o);return r(u.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([o,a,u],p)=>{const y=zp(a);return r(y.popLast())}))}ei(e){const t=e.store("targets");return t.X((i,s)=>{const r=Ex(s),o=Ez(this.serializer,r);return t.put(o)})}ni(e,t){const i=t.store("remoteDocuments"),s=[];return i.X((r,o)=>{const a=t.store("remoteDocumentsV14"),u=(p=o,p.document?new Ht(Zs.fromString(p.document.name).popFirst(5)):p.noDocument?Ht.fromSegments(p.noDocument.path):p.unknownDocument?Ht.fromSegments(p.unknownDocument.path):ei()).path.toArray();var p;const y={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(y))}).next(()=>Te.waitFor(s))}si(e,t){const i=t.store("mutations"),s=Uz(this.serializer),r=new uF(O1.zs,this.serializer.fe);return i.j().next(o=>{const a=new Map;return o.forEach(u=>{var p;let y=null!==(p=a.get(u.userId))&&void 0!==p?p:bs();$b(this.serializer,u).keys().forEach(E=>y=y.add(E)),a.set(u.userId,y)}),Te.forEach(a,(u,p)=>{const y=new za(p),E=_1.de(this.serializer,y),_=r.getIndexManager(y),D=D1.de(y,this.serializer,_,r.referenceDelegate);return new $z(s,D,E,_).recalculateAndSaveOverlaysForDocumentKeys(new LN(t,Fh.ct),u).next()})})}}function Gz(n){n.createObjectStore("targetDocuments",{keyPath:T8}).createIndex("documentTargetsIndex",A8,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",x8,{unique:!0}),n.createObjectStore("targetGlobal")}const dF="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class pF{constructor(e,t,i,s,r,o,a,u,p,y,E=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.ii=r,this.window=o,this.document=a,this.ri=p,this.oi=y,this.ui=E,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=_=>Promise.resolve(),!pF.D())throw new lt(Me.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new VG(this,s),this.di=t+"main",this.serializer=new bz(u),this.wi=new $d(this.di,this.ui,new ZG(this.serializer)),this.Bs=new NG(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Uz(this.serializer),this.qs=new TG,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===y&&Fo("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new lt(Me.FAILED_PRECONDITION,dF);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Fh(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var i=(0,Ne.Z)(function*(s){if(t.started)return e(s)});return function(s){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,Ne.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Ne.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>P1(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Sy(e))return Ct("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ct("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Tx(e).get("owner").next(t=>Te.resolve(this.Ri(t)))}Pi(e){return P1(e).delete(this.clientId)}bi(){var e=this;return(0,Ne.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const s=Wa(i,"clientMetadata");return s.j().next(r=>{const o=e.Si(r,18e5),a=r.filter(u=>-1===o.indexOf(u));return Te.forEach(a,u=>s.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e._i)for(const i of t)e._i.removeItem(e.Di(i.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?Te.resolve(!0):Tx(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new lt(Me.FAILED_PRECONDITION,dF);return!1}}return!(!this.networkEnabled||!this.inForeground)||P1(e).j().next(i=>void 0===this.Si(i,5e3).find(s=>{if(this.clientId!==s.clientId){const o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||o&&a)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ct("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ne.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new LN(t,Fh.ct);return e.Ai(i).next(()=>e.Pi(i))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(i=>this.Vi(i.updateTimeMs,t)&&!this.Ci(i.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>P1(e).j().next(t=>this.Si(t,18e5).map(i=>i.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return D1.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new RG(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return _1.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,i){Ct("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",r=15===(o=this.ui)?B8:14===o?lU:13===o?aU:12===o?F8:11===o?oU:void ei();var o;let a;return this.wi.runTransaction(e,s,r,u=>(a=new LN(u,this.Os?this.Os.next():Fh.ct),"readwrite-primary"===t?this.Ti(a).next(p=>!!p||this.Ei(a)).next(p=>{if(!p)throw Fo(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new lt(Me.FAILED_PRECONDITION,J3);return i(a)}).next(p=>this.vi(a).next(()=>p)):this.Oi(a).next(()=>i(a)))).then(u=>(a.raiseOnCommittedEvent(),u))}Oi(e){return Tx(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new lt(Me.FAILED_PRECONDITION,dF)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Tx(e).put("owner",t)}static D(){return $d.D()}Ai(e){const t=Tx(e);return t.get("owner").next(i=>this.Ri(i)?(Ct("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Te.resolve())}Vi(e,t){const i=Date.now();return!(e<i-t||e>i&&(Fo(`Detected an update time that is in the future: ${e} > ${i}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,sn.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const i=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Ct("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Fo("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Fo("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Tx(n){return Wa(n,"owner")}function P1(n){return Wa(n,"clientMetadata")}function fF(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class mF{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Fi=i,this.Bi=s}static Li(e,t){let i=bs(),s=bs();for(const r of t.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new mF(e,t.fromCache,i,s)}}class Yz{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,i,s){return this.Ki(e,t).next(r=>r||this.Gi(e,t,s,i)).next(r=>r||this.Qi(e,t))}Ki(e,t){if(MU(t))return Te.resolve(null);let i=bc(t);return this.indexManager.getIndexType(e,i).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=y1(t,null,"F"),i=bc(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(r=>{const o=bs(...r);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(u=>{const p=this.ji(t,a);return this.zi(t,p,o,u.readTime)?this.Ki(e,y1(t,null,"F")):this.Wi(e,p,t,u)}))})))}Gi(e,t,i,s){return MU(t)||s.isEqual(Ii.min())?this.Qi(e,t):this.Ui.getDocuments(e,i).next(r=>{const o=this.ji(t,r);return this.zi(t,o,i,s)?this.Qi(e,t):(AN()<=vy.in.DEBUG&&Ct("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),WN(t)),this.Wi(e,o,t,X3(s,-1)))})}ji(e,t){let i=new Or(RU(e));return t.forEach((s,r)=>{hx(e,r)&&(i=i.add(r))}),i}zi(e,t,i,s){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const r="F"===e.limitType?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Qi(e,t){return AN()<=vy.in.DEBUG&&Ct("QueryEngine","Using full collection scan to execute query:",WN(t)),this.Ui.getDocumentsMatchingQuery(e,t,Nh.min())}Wi(e,t,i,s){return this.Ui.getDocumentsMatchingQuery(e,i,s).next(r=>(t.forEach(o=>{r=r.insert(o.key,o)}),r))}}class XG{constructor(e,t,i,s){this.persistence=e,this.Hi=t,this.serializer=s,this.Ji=new fr(rs),this.Yi=new gm(r=>Hb(r),lx),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(i)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $z(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function Kz(n,e,t,i){return new XG(n,e,t,i)}function Zz(n,e){return gF.apply(this,arguments)}function gF(){return gF=(0,Ne.Z)(function*(n,e){const t=Wt(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,t.tr(e),t.mutationQueue.getAllMutationBatches(i))).next(r=>{const o=[],a=[];let u=bs();for(const p of s){o.push(p.batchId);for(const y of p.mutations)u=u.add(y.key)}for(const p of r){a.push(p.batchId);for(const y of p.mutations)u=u.add(y.key)}return t.localDocuments.getDocuments(i,u).next(p=>({er:p,removedBatchIds:o,addedBatchIds:a}))})})}),gF.apply(this,arguments)}function QG(n,e){const t=Wt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),r=t.Zi.newChangeBuffer({trackRemovals:!0});return function(o,a,u,p){const y=u.batch,E=y.keys();let _=Te.resolve();return E.forEach(D=>{_=_.next(()=>p.getEntry(a,D)).next(L=>{const V=u.docVersions.get(D);wi(null!==V),L.version.compareTo(V)<0&&(y.applyToRemoteDocument(L,u),L.isValidDocument()&&(L.setReadTime(u.commitVersion),p.addEntry(L)))})}),_.next(()=>o.mutationQueue.removeMutationBatch(a,y))}(t,i,e,r).next(()=>r.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(o){let a=bs();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(a=a.add(o.batch.mutations[u].key));return a}(e))).next(()=>t.localDocuments.getDocuments(i,s))})}function Xz(n){const e=Wt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function JG(n,e){const t=Wt(n),i=e.snapshotVersion;let s=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=t.Zi.newChangeBuffer({trackRemovals:!0});s=t.Ji;const a=[];e.targetChanges.forEach((y,E)=>{const _=s.get(E);if(!_)return;a.push(t.Bs.removeMatchingKeys(r,y.removedDocuments,E).next(()=>t.Bs.addMatchingKeys(r,y.addedDocuments,E)));let D=_.withSequenceNumber(r.currentSequenceNumber);var L,V,H;null!==e.targetMismatches.get(E)?D=D.withResumeToken(ya.EMPTY_BYTE_STRING,Ii.min()).withLastLimboFreeSnapshotVersion(Ii.min()):y.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(y.resumeToken,i)),s=s.insert(E,D),V=D,H=y,(0===(L=_).resumeToken.approximateByteSize()||V.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=3e8||H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0)&&a.push(t.Bs.updateTargetData(r,D))});let u=th(),p=bs();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(r,y))}),a.push(Qz(r,o,e.documentUpdates).next(y=>{u=y.nr,p=y.sr})),!i.isEqual(Ii.min())){const y=t.Bs.getLastRemoteSnapshotVersion(r).next(E=>t.Bs.setTargetsMetadata(r,r.currentSequenceNumber,i));a.push(y)}return Te.waitFor(a).next(()=>o.apply(r)).next(()=>t.localDocuments.getLocalViewOfDocuments(r,u,p)).next(()=>u)}).then(r=>(t.Ji=s,r))}function Qz(n,e,t){let i=bs(),s=bs();return t.forEach(r=>i=i.add(r)),e.getEntries(n,i).next(r=>{let o=th();return t.forEach((a,u)=>{const p=r.get(a);u.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(a)),u.isNoDocument()&&u.version.isEqual(Ii.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!p.isValidDocument()||u.version.compareTo(p.version)>0||0===u.version.compareTo(p.version)&&p.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):Ct("LocalStore","Ignoring outdated watch update for ",a,". Current version:",p.version," Watch version:",u.version)}),{nr:o,sr:s}})}function eY(n,e){const t=Wt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function uw(n,e){const t=Wt(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return t.Bs.getTargetData(i,e).next(r=>r?(s=r,Te.resolve(s)):t.Bs.allocateTargetId(i).next(o=>(s=new vm(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Bs.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=t.Ji.get(i.targetId);return(null===s||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(i.targetId,i),t.Yi.set(e,i.targetId)),i})}function dw(n,e,t){return yF.apply(this,arguments)}function yF(){return yF=(0,Ne.Z)(function*(n,e,t){const i=Wt(n),s=i.Ji.get(e),r=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",r,o=>i.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!Sy(o))throw o;Ct("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.Ji=i.Ji.remove(e),i.Yi.delete(s.target)}),yF.apply(this,arguments)}function L1(n,e,t){const i=Wt(n);let s=Ii.min(),r=bs();return i.persistence.runTransaction("Execute query","readonly",o=>function(a,u,p){const y=Wt(a),E=y.Yi.get(p);return void 0!==E?Te.resolve(y.Ji.get(E)):y.Bs.getTargetData(u,p)}(i,o,bc(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(o,a.targetId).next(u=>{r=u})}).next(()=>i.Hi.getDocumentsMatchingQuery(o,e,t?s:Ii.min(),t?r:bs())).next(a=>(tW(i,LU(e),a),{documents:a,ir:r})))}function Jz(n,e){const t=Wt(n),i=Wt(t.Bs),s=t.Ji.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",r=>i.le(r,e).next(o=>o?o.target:null))}function eW(n,e){const t=Wt(n),i=t.Xi.get(e)||Ii.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Zi.getAllFromCollectionGroup(s,e,X3(i,-1),Number.MAX_SAFE_INTEGER)).then(s=>(tW(t,e,s),s))}function tW(n,e,t){let i=n.Xi.get(e)||Ii.min();t.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),n.Xi.set(e,i)}function vF(){return vF=(0,Ne.Z)(function*(n,e,t,i){const s=Wt(n);let r=bs(),o=th();for(const p of t){const y=e.rr(p.metadata.name);p.document&&(r=r.add(y));const E=e.ur(p);E.setReadTime(e.cr(p.metadata.readTime)),o=o.insert(y,E)}const a=s.Zi.newChangeBuffer({trackRemovals:!0}),u=yield uw(s,(p=i,bc(iw(Zs.fromString(`__bundle__/docs/${p}`)))));var p;return s.persistence.runTransaction("Apply bundle documents","readwrite",p=>Qz(p,a,o).next(y=>(a.apply(p),y)).next(y=>s.Bs.removeMatchingKeysForTargetId(p,u.targetId).next(()=>s.Bs.addMatchingKeys(p,r,u.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(p,y.nr,y.sr)).next(()=>y.nr)))}),vF.apply(this,arguments)}function iY(n,e){return bF.apply(this,arguments)}function bF(){return bF=(0,Ne.Z)(function*(n,e,t=bs()){const i=yield uw(n,bc(sF(e.bundledQuery))),s=Wt(n);return s.persistence.runTransaction("Save named query","readwrite",r=>{const o=Bo(e.readTime);if(i.snapshotVersion.compareTo(o)>=0)return s.qs.saveNamedQuery(r,e);const a=i.withResumeToken(ya.EMPTY_BYTE_STRING,o);return s.Ji=s.Ji.insert(a.targetId,a),s.Bs.updateTargetData(r,a).next(()=>s.Bs.removeMatchingKeysForTargetId(r,i.targetId)).next(()=>s.Bs.addMatchingKeys(r,t,i.targetId)).next(()=>s.qs.saveNamedQuery(r,e))})}),bF.apply(this,arguments)}function iW(n,e){return`firestore_clients_${n}_${e}`}function sW(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function CF(n,e){return`firestore_targets_${n}_${e}`}class R1{constructor(e,t,i,s){this.user=e,this.batchId=t,this.state=i,this.error=s}static ar(e,t,i){const s=JSON.parse(i);let r,o="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return o&&s.error&&(o="string"==typeof s.error.message&&"string"==typeof s.error.code,o&&(r=new lt(s.error.code,s.error.message))),o?new R1(e,t,s.state,r):(Fo("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ax{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static ar(e,t){const i=JSON.parse(t);let s,r="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return r&&i.error&&(r="string"==typeof i.error.message&&"string"==typeof i.error.code,r&&(s=new lt(i.error.code,i.error.message))),r?new Ax(e,i.state,s):(Fo("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class N1{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const i=JSON.parse(t);let s="object"==typeof i&&i.activeTargetIds instanceof Array,r=qN();for(let o=0;s&&o<i.activeTargetIds.length;++o)s=iU(i.activeTargetIds[o]),r=r.add(i.activeTargetIds[o]);return s?new N1(e,r):(Fo("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class EF{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new EF(t.clientId,t.onlineState):(Fo("SharedClientState",`Failed to parse online state: ${e}`),null)}}class wF{constructor(){this.activeTargetIds=qN()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class SF{constructor(e,t,i,s,r){this.window=e,this.ii=t,this.persistenceKey=i,this.wr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new fr(rs),this.started=!1,this.yr=[];const o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=r,this.pr=iW(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new wF),this.Tr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ne.Z)(function*(){const t=yield e.syncEngine.$i();for(const s of t){if(s===e.wr)continue;const r=e.getItem(iW(e.persistenceKey,s));if(r){const o=N1.ar(s,r);o&&(e.gr=e.gr.insert(o.clientId,o))}}e.Pr();const i=e.storage.getItem(e.vr);if(i){const s=e.br(i);s&&e.Vr(s)}for(const s of e.yr)e.mr(s);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((i,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,i){this.Dr(e,t,i),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(CF(this.persistenceKey,e));if(i){const s=Ax.ar(e,i);s&&(t=s.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(CF(this.persistenceKey,e))}updateQueryState(e,t,i){this.kr(e,t,i)}handleUserChange(e,t,i){t.forEach(s=>{this.Cr(s)}),this.currentUser=e,i.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ct("SharedClientState","READ",e,t),t}setItem(e,t){Ct("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ct("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const i=e;if(i.storageArea===this.storage){if(Ct("SharedClientState","EVENT",i.key,i.newValue),i.key===this.pr)return void Fo("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Ne.Z)(function*(){if(t.started){if(null!==i.key)if(t.Tr.test(i.key)){if(null==i.newValue){const s=t.Or(i.key);return t.Fr(s,null)}{const s=t.Br(i.key,i.newValue);if(s)return t.Fr(s.clientId,s)}}else if(t.Er.test(i.key)){if(null!==i.newValue){const s=t.Lr(i.key,i.newValue);if(s)return t.qr(s)}}else if(t.Ar.test(i.key)){if(null!==i.newValue){const s=t.Ur(i.key,i.newValue);if(s)return t.Kr(s)}}else if(i.key===t.vr){if(null!==i.newValue){const s=t.br(i.newValue);if(s)return t.Vr(s)}}else if(i.key===t.Ir){const s=function(r){let o=Fh.ct;if(null!=r)try{const a=JSON.parse(r);wi("number"==typeof a),o=a}catch(a){Fo("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(i.newValue);s!==Fh.ct&&t.sequenceNumberHandler(s)}else if(i.key===t.Rr){const s=t.Gr(i.newValue);yield Promise.all(s.map(r=>t.syncEngine.Qr(r)))}}else t.yr.push(i)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,i){const s=new R1(this.currentUser,e,t,i),r=sW(this.persistenceKey,this.currentUser,e);this.setItem(r,s.hr())}Cr(e){const t=sW(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,i){const s=CF(this.persistenceKey,e),r=new Ax(e,t,i);this.setItem(s,r.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const i=this.Or(e);return N1.ar(i,t)}Lr(e,t){const i=this.Er.exec(e),s=Number(i[1]);return R1.ar(new za(void 0!==i[2]?i[2]:null),s,t)}Ur(e,t){const i=this.Ar.exec(e),s=Number(i[1]);return Ax.ar(s,t)}br(e){return EF.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,Ne.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Ct("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const i=t?this.gr.insert(e,t):this.gr.remove(e),s=this.Sr(this.gr),r=this.Sr(i),o=[],a=[];return r.forEach(u=>{s.has(u)||o.push(u)}),s.forEach(u=>{r.has(u)||a.push(u)}),this.syncEngine.Wr(o,a).then(()=>{this.gr=i})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=qN();return e.forEach((i,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class nW{constructor(){this.Hr=new wF,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,i){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new wF,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class sY{Yr(e){}shutdown(){}}class rW{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ct("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ct("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let F1=null;function _F(){return null===F1?F1=268435456+Math.round(2147483648*Math.random()):F1++,"0x"+F1.toString(16)}const nY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rY{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const ql="WebChannelConnection";class oY extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,i,s,r){const o=_F(),a=this.To(e,t);Ct("RestConnection",`Sending RPC '${e}' ${o}:`,a,i);const u={};return this.Eo(u,s,r),this.Ao(e,a,u,i).then(p=>(Ct("RestConnection",`Received RPC '${e}' ${o}: `,p),p),p=>{throw Lu("RestConnection",`RPC '${e}' ${o} failed with error: `,p,"url: ",a,"request:",i),p})}vo(e,t,i,s,r,o){return this.Io(e,t,i,s,r)}Eo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+ZE,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,r)=>e[r]=s),i&&i.headers.forEach((s,r)=>e[r]=s)}To(e,t){return`${this.mo}/v1/${t}:${nY[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,i,s){const r=_F();return new Promise((o,a)=>{const u=new s8;u.setWithCredentials(!0),u.listenOnce(e8.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case TN.NO_ERROR:const y=u.getResponseJson();Ct(ql,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(y)),o(y);break;case TN.TIMEOUT:Ct(ql,`RPC '${e}' ${r} timed out`),a(new lt(Me.DEADLINE_EXCEEDED,"Request time out"));break;case TN.HTTP_ERROR:const E=u.getStatus();if(Ct(ql,`RPC '${e}' ${r} failed with status:`,E,"response text:",u.getResponseText()),E>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const D=null==_?void 0:_.error;if(D&&D.status&&D.message){const L=function(V){const H=V.toLowerCase().replace(/_/g,"-");return Object.values(Me).indexOf(H)>=0?H:Me.UNKNOWN}(D.status);a(new lt(L,D.message))}else a(new lt(Me.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new lt(Me.UNAVAILABLE,"Connection failed."));break;default:ei()}}finally{Ct(ql,`RPC '${e}' ${r} completed.`)}});const p=JSON.stringify(s);Ct(ql,`RPC '${e}' ${r} sending request:`,s),u.send(t,"POST",p,i,15)})}Ro(e,t,i){const s=_F(),r=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Q$(),a=J$(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;void 0!==p&&(u.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(u.xmlHttpFactory=new i8({})),this.Eo(u.initMessageHeaders,t,i),u.encodeInitMessageHeaders=!0;const y=r.join("");Ct(ql,`Creating RPC '${e}' stream ${s}: ${y}`,u);const E=o.createWebChannel(y,u);let _=!1,D=!1;const L=new rY({ro:H=>{D?Ct(ql,`Not sending because RPC '${e}' stream ${s} is closed:`,H):(_||(Ct(ql,`Opening RPC '${e}' stream ${s} transport.`),E.open(),_=!0),Ct(ql,`RPC '${e}' stream ${s} sending:`,H),E.send(H))},oo:()=>E.close()}),V=(H,se,_e)=>{H.listen(se,re=>{try{_e(re)}catch(Ae){setTimeout(()=>{throw Ae},0)}})};return V(E,s1.EventType.OPEN,()=>{D||Ct(ql,`RPC '${e}' stream ${s} transport opened.`)}),V(E,s1.EventType.CLOSE,()=>{D||(D=!0,Ct(ql,`RPC '${e}' stream ${s} transport closed`),L.wo())}),V(E,s1.EventType.ERROR,H=>{D||(D=!0,Lu(ql,`RPC '${e}' stream ${s} transport errored:`,H),L.wo(new lt(Me.UNAVAILABLE,"The operation could not be completed")))}),V(E,s1.EventType.MESSAGE,H=>{var se;if(!D){const _e=H.data[0];wi(!!_e);const re=_e,Ae=re.error||(null===(se=re[0])||void 0===se?void 0:se.error);if(Ae){Ct(ql,`RPC '${e}' stream ${s} received error:`,Ae);const gt=Ae.status;let ot=function(jt){const Ai=Jo[jt];if(void 0!==Ai)return JU(Ai)}(gt),ri=Ae.message;void 0===ot&&(ot=Me.INTERNAL,ri="Unknown error status: "+gt+" with message "+Ae.message),D=!0,L.wo(new lt(ot,ri)),E.close()}else Ct(ql,`RPC '${e}' stream ${s} received:`,_e),L._o(_e)}}),V(a,t8.STAT_EVENT,H=>{H.stat===q3.PROXY?Ct(ql,`RPC '${e}' stream ${s} detected buffering proxy`):H.stat===q3.NOPROXY&&Ct(ql,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{L.fo()},0),L}}function oW(){return"undefined"!=typeof window?window:null}function B1(){return"undefined"!=typeof document?document:null}function Dx(n){return new gG(n,!0)}class IF{constructor(e,t,i=1e3,s=1.5,r=6e4){this.ii=e,this.timerId=t,this.Po=i,this.bo=s,this.Vo=r,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),i=Math.max(0,Date.now()-this.Co),s=Math.max(0,t-i);s>0&&Ct("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class aW{constructor(e,t,i,s,r,o,a,u){this.ii=e,this.$o=i,this.Oo=s,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new IF(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Ne.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Ne.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var i=this;return(0,Ne.Z)(function*(){i.Ho(),i.Jo(),i.qo.cancel(),i.Fo++,4!==e?i.qo.reset():t&&t.code===Me.RESOURCE_EXHAUSTED?(Fo(t.toString()),Fo("Using maximum backoff delay to prevent overloading the backend."),i.qo.xo()):t&&t.code===Me.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Yo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.Fo===t&&this.Zo(i,s)},i=>{e(()=>{const s=new lt(Me.UNKNOWN,"Fetching auth token failed: "+i.message);return this.tu(s)})})}Zo(e,t){const i=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{i(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(s=>{i(()=>this.tu(s))}),this.stream.onMessage(s=>{i(()=>this.onMessage(s))})}Go(){var e=this;this.state=5,this.qo.No((0,Ne.Z)(function*(){e.state=0,e.start()}))}tu(e){return Ct("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Ct("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aY extends aW{constructor(e,t,i,s,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,o),this.serializer=r}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function bG(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:ei(),s=e.targetChange.targetIds||[],r=function(u,p){return u.useProto3Json?(wi(void 0===p||"string"==typeof p),ya.fromBase64String(p||"")):(wi(void 0===p||p instanceof Uint8Array),ya.fromUint8Array(p||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const p=void 0===u.code?Me.UNKNOWN:JU(u.code);return new lt(p,u.message||"")}(o);t=new nz(i,s,r,a||null)}else if("documentChange"in e){const i=e.documentChange,s=$p(n,i.document.name),r=Bo(i.document.updateTime),o=i.document.createTime?Bo(i.document.createTime):Ii.min(),a=new bl({mapValue:{fields:i.document.fields}}),u=Mr.newFoundDocument(s,r,o,a);t=new w1(i.targetIds||[],i.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const i=e.documentDelete,s=$p(n,i.document),r=i.readTime?Bo(i.readTime):Ii.min(),o=Mr.newNoDocument(s,r);t=new w1([],i.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const i=e.documentRemove,s=$p(n,i.document);t=new w1([],i.removedTargetIds||[],s,null)}else{if(!("filter"in e))return ei();{const i=e.filter,{count:s=0,unchangedNames:r}=i,o=new hG(s,r);t=new sz(i.targetId,o)}}var u;return t}(this.serializer,e),i=function(s){if(!("targetChange"in s))return Ii.min();const r=s.targetChange;return r.targetIds&&r.targetIds.length?Ii.min():r.readTime?Bo(r.readTime):Ii.min()}(e);return this.listener.nu(t,i)}su(e){const t={};t.database=bx(this.serializer),t.addTarget=function(s,r){let o;const a=r.target;if(o=f1(a)?{documents:fz(s,a)}:{query:iF(s,a)},o.targetId=r.targetId,r.resumeToken.approximateByteSize()>0){o.resumeToken=lz(s,r.resumeToken);const u=QN(s,r.expectedCount);null!==u&&(o.expectedCount=u)}else if(r.snapshotVersion.compareTo(Ii.min())>0){o.readTime=aw(s,r.snapshotVersion.toTimestamp());const u=QN(s,r.expectedCount);null!==u&&(o.expectedCount=u)}return o}(this.serializer,e);const i=function EG(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ei()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Wo(t)}iu(e){const t={};t.database=bx(this.serializer),t.removeTarget=e,this.Wo(t)}}class lY extends aW{constructor(e,t,i,s,r,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,o),this.serializer=r,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(wi(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function CG(n,e){return n&&n.length>0?(wi(void 0!==e),n.map(t=>function(i,s){let r=Bo(i.updateTime?i.updateTime:s);return r.isEqual(Ii.min())&&(r=Bo(s)),new oG(r,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=Bo(e.commitTime);return this.listener.cu(i,t)}return wi(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=bx(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>Cx(this.serializer,i))};this.Wo(t)}}class cY extends class{}{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new lt(Me.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,r])=>this.connection.Io(e,t,i,s,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===Me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new lt(Me.UNKNOWN,s.toString())})}vo(e,t,i,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.vo(e,t,i,r,o,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===Me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new lt(Me.UNKNOWN,r.toString())})}terminate(){this.lu=!0}}class uY{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Fo(t),this.mu=!1):Ct("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class dY{constructor(e,t,i,s,r){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=r,this.Pu.Yr(a=>{i.enqueueAndForget((0,Ne.Z)(function*(){var u;Ry(o)&&(Ct("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,Ne.Z)(function*(p){const y=Wt(p);y.vu.add(4),yield pw(y),y.bu.set("Unknown"),y.vu.delete(4),yield kx(y)}),function(p){return u.apply(this,arguments)})(o))}))}),this.bu=new uY(i,s)}}function kx(n){return TF.apply(this,arguments)}function TF(){return TF=(0,Ne.Z)(function*(n){if(Ry(n))for(const e of n.Ru)yield e(!0)}),TF.apply(this,arguments)}function pw(n){return AF.apply(this,arguments)}function AF(){return AF=(0,Ne.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),AF.apply(this,arguments)}function V1(n,e){const t=Wt(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),OF(t)?kF(t):mw(t).Ko()&&DF(t,e))}function Ox(n,e){const t=Wt(n),i=mw(t);t.Au.delete(e),i.Ko()&&lW(t,e),0===t.Au.size&&(i.Ko()?i.jo():Ry(t)&&t.bu.set("Unknown"))}function DF(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ii.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}mw(n).su(e)}function lW(n,e){n.Vu.qt(e),mw(n).iu(e)}function kF(n){n.Vu=new dG({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),mw(n).start(),n.bu.gu()}function OF(n){return Ry(n)&&!mw(n).Uo()&&n.Au.size>0}function Ry(n){return 0===Wt(n).vu.size}function cW(n){n.Vu=void 0}function pY(n){return MF.apply(this,arguments)}function MF(){return MF=(0,Ne.Z)(function*(n){n.Au.forEach((e,t)=>{DF(n,e)})}),MF.apply(this,arguments)}function fY(n,e){return PF.apply(this,arguments)}function PF(){return PF=(0,Ne.Z)(function*(n,e){cW(n),OF(n)?(n.bu.Iu(e),kF(n)):n.bu.set("Unknown")}),PF.apply(this,arguments)}function mY(n,e,t){return LF.apply(this,arguments)}function LF(){return LF=(0,Ne.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof nz&&2===e.state&&e.cause)try{yield(i=(0,Ne.Z)(function*(s,r){const o=r.cause;for(const a of r.targetIds)s.Au.has(a)&&(yield s.remoteSyncer.rejectListen(a,o),s.Au.delete(a),s.Vu.removeTarget(a))}),function(s,r){return i.apply(this,arguments)})(n,e)}catch(i){Ct("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield H1(n,i)}else if(e instanceof w1?n.Vu.Ht(e):e instanceof sz?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Ii.min()))try{const i=yield Xz(n.localStore);t.compareTo(i)>=0&&(yield function(s,r){const o=s.Vu.ce(r);return o.targetChanges.forEach((a,u)=>{if(a.resumeToken.approximateByteSize()>0){const p=s.Au.get(u);p&&s.Au.set(u,p.withResumeToken(a.resumeToken,r))}}),o.targetMismatches.forEach((a,u)=>{const p=s.Au.get(a);if(!p)return;s.Au.set(a,p.withResumeToken(ya.EMPTY_BYTE_STRING,p.snapshotVersion)),lW(s,a);const y=new vm(p.target,a,u,p.sequenceNumber);DF(s,y)}),s.remoteSyncer.applyRemoteEvent(o)}(n,t))}catch(i){Ct("RemoteStore","Failed to raise snapshot:",i),yield H1(n,i)}var i}),LF.apply(this,arguments)}function H1(n,e,t){return RF.apply(this,arguments)}function RF(){return RF=(0,Ne.Z)(function*(n,e,t){if(!Sy(e))throw e;n.vu.add(1),yield pw(n),n.bu.set("Offline"),t||(t=()=>Xz(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ne.Z)(function*(){Ct("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield kx(n)}))}),RF.apply(this,arguments)}function hW(n,e){return e().catch(t=>H1(n,t,e))}function fw(n){return NF.apply(this,arguments)}function NF(){return NF=(0,Ne.Z)(function*(n){const e=Wt(n),t=Ny(e);let i=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;gY(e);)try{const s=yield eY(e.localStore,i);if(null===s){0===e.Eu.length&&t.jo();break}i=s.batchId,yY(e,s)}catch(s){yield H1(e,s)}uW(e)&&dW(e)}),NF.apply(this,arguments)}function gY(n){return Ry(n)&&n.Eu.length<10}function yY(n,e){n.Eu.push(e);const t=Ny(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function uW(n){return Ry(n)&&!Ny(n).Uo()&&n.Eu.length>0}function dW(n){Ny(n).start()}function vY(n){return FF.apply(this,arguments)}function FF(){return FF=(0,Ne.Z)(function*(n){Ny(n).hu()}),FF.apply(this,arguments)}function bY(n){return BF.apply(this,arguments)}function BF(){return BF=(0,Ne.Z)(function*(n){const e=Ny(n);for(const t of n.Eu)e.uu(t.mutations)}),BF.apply(this,arguments)}function CY(n,e,t){return VF.apply(this,arguments)}function VF(){return VF=(0,Ne.Z)(function*(n,e,t){const i=n.Eu.shift(),s=YN.from(i,e,t);yield hW(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield fw(n)}),VF.apply(this,arguments)}function EY(n,e){return HF.apply(this,arguments)}function HF(){return HF=(0,Ne.Z)(function*(n,e){var t;e&&Ny(n).ou&&(yield(t=(0,Ne.Z)(function*(i,s){if(QU(r=s.code)&&r!==Me.ABORTED){const o=i.Eu.shift();Ny(i).Qo(),yield hW(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield fw(i)}var r}),function(i,s){return t.apply(this,arguments)})(n,e)),uW(n)&&dW(n)}),HF.apply(this,arguments)}function pW(n,e){return jF.apply(this,arguments)}function jF(){return jF=(0,Ne.Z)(function*(n,e){const t=Wt(n);t.asyncQueue.verifyOperationInProgress(),Ct("RemoteStore","RemoteStore received new credentials");const i=Ry(t);t.vu.add(3),yield pw(t),i&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield kx(t)}),jF.apply(this,arguments)}function UF(n,e){return zF.apply(this,arguments)}function zF(){return zF=(0,Ne.Z)(function*(n,e){const t=Wt(n);e?(t.vu.delete(2),yield kx(t)):e||(t.vu.add(2),yield pw(t),t.bu.set("Unknown"))}),zF.apply(this,arguments)}function mw(n){return n.Su||(n.Su=function(e,t,i){const s=Wt(e);return s.fu(),new aY(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{uo:pY.bind(null,n),ao:fY.bind(null,n),nu:mY.bind(null,n)}),n.Ru.push(function(){var e=(0,Ne.Z)(function*(t){t?(n.Su.Qo(),OF(n)?kF(n):n.bu.set("Unknown")):(yield n.Su.stop(),cW(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Ny(n){return n.Du||(n.Du=function(e,t,i){const s=Wt(e);return s.fu(),new lY(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{uo:vY.bind(null,n),ao:EY.bind(null,n),au:bY.bind(null,n),cu:CY.bind(null,n)}),n.Ru.push(function(){var e=(0,Ne.Z)(function*(t){t?(n.Du.Qo(),yield fw(n)):(yield n.Du.stop(),n.Eu.length>0&&(Ct("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class WF{constructor(e,t,i,s,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new ga,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,t,i,s,r){const o=Date.now()+i,a=new WF(e,t,o,s,r);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new lt(Me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gw(n,e){if(Fo("AsyncQueue",`${e}: ${n}`),Sy(n))return new lt(Me.UNAVAILABLE,`${e}: ${n}`);throw n}class yw{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ht.comparator(t.key,i.key):(t,i)=>Ht.comparator(t.key,i.key),this.keyedMap=ux(),this.sortedSet=new fr(this.comparator)}static emptySet(e){return new yw(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof yw)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new yw;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class fW{constructor(){this.Cu=new fr(Ht.comparator)}track(e){const t=e.doc.key,i=this.Cu.get(t);i?0!==e.type&&3===i.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==i.type?this.Cu=this.Cu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Cu=this.Cu.remove(t):1===e.type&&2===i.type?this.Cu=this.Cu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):ei():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,i)=>{e.push(i)}),e}}class vw{constructor(e,t,i,s,r,o,a,u,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,s,r){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new vw(e,t,yw.emptySet(t),o,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}class wY{constructor(){this.Nu=void 0,this.listeners=[]}}class SY{constructor(){this.queries=new gm(e=>PU(e),cx),this.onlineState="Unknown",this.ku=new Set}}function qF(n,e){return $F.apply(this,arguments)}function $F(){return $F=(0,Ne.Z)(function*(n,e){const t=Wt(n),i=e.query;let s=!1,r=t.queries.get(i);if(r||(s=!0,r=new wY),s)try{r.Nu=yield t.onListen(i)}catch(o){const a=gw(o,`Initialization of query '${WN(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,r),r.listeners.push(e),e.Mu(t.onlineState),r.Nu&&e.$u(r.Nu)&&KF(t)}),$F.apply(this,arguments)}function GF(n,e){return YF.apply(this,arguments)}function YF(){return YF=(0,Ne.Z)(function*(n,e){const t=Wt(n),i=e.query;let s=!1;const r=t.queries.get(i);if(r){const o=r.listeners.indexOf(e);o>=0&&(r.listeners.splice(o,1),s=0===r.listeners.length)}if(s)return t.queries.delete(i),t.onUnlisten(i)}),YF.apply(this,arguments)}function _Y(n,e){const t=Wt(n);let i=!1;for(const s of e){const o=t.queries.get(s.query);if(o){for(const a of o.listeners)a.$u(s)&&(i=!0);o.Nu=s}}i&&KF(t)}function IY(n,e,t){const i=Wt(n),s=i.queries.get(e);if(s)for(const r of s.listeners)r.onError(t);i.queries.delete(e)}function KF(n){n.ku.forEach(e=>{e.next()})}class ZF{constructor(e,t,i){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=i||{}}$u(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)3!==s.type&&i.push(s);e=new vw(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=vw.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class xY{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class mW{constructor(e){this.serializer=e}rr(e){return $p(this.serializer,e)}ur(e){return e.metadata.exists?pz(this.serializer,e.document,!1):Mr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Bo(e)}}class TY{constructor(e,t,i){this.ju=e,this.localStore=t,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=gW(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const i=Zs.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,i=new mW(this.serializer);for(const s of e)if(s.metadata.queries){const r=i.rr(s.metadata.name);for(const o of s.metadata.queries){const a=(t.get(o)||bs()).add(r);t.set(o,a)}}return t}complete(){var e=this;return(0,Ne.Z)(function*(){const t=yield function tY(n,e,t,i){return vF.apply(this,arguments)}(e.localStore,new mW(e.serializer),e.documents,e.ju.id),i=e.Wu(e.documents);for(const s of e.queries)yield iY(e.localStore,s,i.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function gW(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class yW{constructor(e){this.key=e}}class vW{constructor(e){this.key=e}}class bW{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=bs(),this.mutatedKeys=bs(),this.tc=RU(e),this.ec=new yw(this.tc)}get nc(){return this.Yu}sc(e,t){const i=t?t.ic:new fW,s=t?t.ec:this.ec;let r=t?t.mutatedKeys:this.mutatedKeys,o=s,a=!1;const u="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,p="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((y,E)=>{const _=s.get(y),D=hx(this.query,E)?E:null,L=!!_&&this.mutatedKeys.has(_.key),V=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let H=!1;_&&D?_.data.isEqual(D.data)?L!==V&&(i.track({type:3,doc:D}),H=!0):this.rc(_,D)||(i.track({type:2,doc:D}),H=!0,(u&&this.tc(D,u)>0||p&&this.tc(D,p)<0)&&(a=!0)):!_&&D?(i.track({type:0,doc:D}),H=!0):_&&!D&&(i.track({type:1,doc:_}),H=!0,(u||p)&&(a=!0)),H&&(D?(o=o.add(D),r=V?r.add(y):r.delete(y)):(o=o.delete(y),r=r.delete(y)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const y="F"===this.query.limitType?o.last():o.first();o=o.delete(y.key),r=r.delete(y.key),i.track({type:1,doc:y})}return{ec:o,ic:i,zi:a,mutatedKeys:r}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const s=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const r=e.ic.xu();r.sort((p,y)=>function(E,_){const D=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ei()}};return D(E)-D(_)}(p.type,y.type)||this.tc(p.doc,y.doc)),this.oc(i);const o=t?this.uc():[],a=0===this.Zu.size&&this.current?1:0,u=a!==this.Xu;return this.Xu=a,0!==r.length||u?{snapshot:new vw(this.query,e.ec,s,r,e.mutatedKeys,0===a,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new fW,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=bs(),this.ec.forEach(i=>{this.ac(i.key)&&(this.Zu=this.Zu.add(i.key))});const t=[];return e.forEach(i=>{this.Zu.has(i)||t.push(new vW(i))}),this.Zu.forEach(i=>{e.has(i)||t.push(new yW(i))}),t}hc(e){this.Yu=e.ir,this.Zu=bs();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return vw.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class AY{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class DY{constructor(e){this.key=e,this.fc=!1}}class kY{constructor(e,t,i,s,r,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new gm(a=>PU(a),cx),this._c=new Map,this.mc=new Set,this.gc=new fr(Ht.comparator),this.yc=new Map,this.Ic=new hF,this.Tc={},this.Ec=new Map,this.Ac=Kb.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function OY(n,e){return XF.apply(this,arguments)}function XF(){return XF=(0,Ne.Z)(function*(n,e){const t=CB(n);let i,s;const r=t.wc.get(e);if(r)i=r.targetId,t.sharedClientState.addLocalQueryTarget(i),s=r.view.lc();else{const o=yield uw(t.localStore,bc(e)),a=t.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,s=yield QF(t,e,i,"current"===a,o.resumeToken),t.isPrimaryClient&&V1(t.remoteStore,o)}return s}),XF.apply(this,arguments)}function QF(n,e,t,i,s){return JF.apply(this,arguments)}function JF(){return JF=(0,Ne.Z)(function*(n,e,t,i,s){n.Rc=(E,_,D)=>{return(L=(0,Ne.Z)(function*(V,H,se,_e){let re=H.view.sc(se);re.zi&&(re=yield L1(V.localStore,H.query,!1).then(({documents:ot})=>H.view.sc(ot,re)));const Ae=_e&&_e.targetChanges.get(H.targetId),gt=H.view.applyChanges(re,V.isPrimaryClient,Ae);return cB(V,H.targetId,gt.cc),gt.snapshot}),function(V,H,se,_e){return L.apply(this,arguments)})(n,E,_,D);var L};const r=yield L1(n.localStore,e,!0),o=new bW(e,r.ir),a=o.sc(r.documents),u=yx.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,s),p=o.applyChanges(a,n.isPrimaryClient,u);cB(n,t,p.cc);const y=new AY(e,t,o);return n.wc.set(e,y),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),p.snapshot}),JF.apply(this,arguments)}function MY(n,e){return eB.apply(this,arguments)}function eB(){return eB=(0,Ne.Z)(function*(n,e){const t=Wt(n),i=t.wc.get(e),s=t._c.get(i.targetId);if(s.length>1)return t._c.set(i.targetId,s.filter(r=>!cx(r,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield dw(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),Ox(t.remoteStore,i.targetId),bw(t,i.targetId)}).catch(wy))):(bw(t,i.targetId),yield dw(t.localStore,i.targetId,!0))}),eB.apply(this,arguments)}function tB(){return tB=(0,Ne.Z)(function*(n,e,t){const i=EB(n);try{const s=yield function(r,o){const a=Wt(r),u=qr.now(),p=o.reduce((_,D)=>_.add(D.key),bs());let y,E;return a.persistence.runTransaction("Locally write mutations","readwrite",_=>{let D=th(),L=bs();return a.Zi.getEntries(_,p).next(V=>{D=V,D.forEach((H,se)=>{se.isValidDocument()||(L=L.add(H))})}).next(()=>a.localDocuments.getOverlayedDocuments(_,D)).next(V=>{y=V;const H=[];for(const se of o){const _e=lG(se,y.get(se.key).overlayedDocument);null!=_e&&H.push(new ym(se.key,_e,bU(_e.value.mapValue),$r.exists(!0)))}return a.mutationQueue.addMutationBatch(_,u,H,o)}).next(V=>{E=V;const H=V.applyToLocalDocumentSet(y,L);return a.documentOverlayCache.saveOverlays(_,V.batchId,H)})}).then(()=>({batchId:E.batchId,changes:FU(y)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(r,o,a){let u=r.Tc[r.currentUser.toKey()];u||(u=new fr(rs)),u=u.insert(o,a),r.Tc[r.currentUser.toKey()]=u}(i,s.batchId,t),yield bm(i,s.changes),yield fw(i.remoteStore)}catch(s){const r=gw(s,"Failed to persist write");t.reject(r)}}),tB.apply(this,arguments)}function CW(n,e){return iB.apply(this,arguments)}function iB(){return iB=(0,Ne.Z)(function*(n,e){const t=Wt(n);try{const i=yield JG(t.localStore,e);e.targetChanges.forEach((s,r)=>{const o=t.yc.get(r);o&&(wi(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.fc=!0:s.modifiedDocuments.size>0?wi(o.fc):s.removedDocuments.size>0&&(wi(o.fc),o.fc=!1))}),yield bm(t,i,e)}catch(i){yield wy(i)}}),iB.apply(this,arguments)}function EW(n,e,t){const i=Wt(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const s=[];i.wc.forEach((r,o)=>{const a=o.view.Mu(e);a.snapshot&&s.push(a.snapshot)}),function(r,o){const a=Wt(r);a.onlineState=o;let u=!1;a.queries.forEach((p,y)=>{for(const E of y.listeners)E.Mu(o)&&(u=!0)}),u&&KF(a)}(i.eventManager,e),s.length&&i.dc.nu(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function LY(n,e,t){return sB.apply(this,arguments)}function sB(){return sB=(0,Ne.Z)(function*(n,e,t){const i=Wt(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.yc.get(e),r=s&&s.key;if(r){let o=new fr(Ht.comparator);o=o.insert(r,Mr.newNoDocument(r,Ii.min()));const a=bs().add(r),u=new gx(Ii.min(),new Map,new fr(rs),o,a);yield CW(i,u),i.gc=i.gc.remove(r),i.yc.delete(e),hB(i)}else yield dw(i.localStore,e,!1).then(()=>bw(i,e,t)).catch(wy)}),sB.apply(this,arguments)}function RY(n,e){return nB.apply(this,arguments)}function nB(){return nB=(0,Ne.Z)(function*(n,e){const t=Wt(n),i=e.batch.batchId;try{const s=yield QG(t.localStore,e);lB(t,i,null),aB(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield bm(t,s)}catch(s){yield wy(s)}}),nB.apply(this,arguments)}function NY(n,e,t){return rB.apply(this,arguments)}function rB(){return rB=(0,Ne.Z)(function*(n,e,t){const i=Wt(n);try{const s=yield function(r,o){const a=Wt(r);return a.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let p;return a.mutationQueue.lookupMutationBatch(u,o).next(y=>(wi(null!==y),p=y.keys(),a.mutationQueue.removeMutationBatch(u,y))).next(()=>a.mutationQueue.performConsistencyCheck(u)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(u,p,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,p)).next(()=>a.localDocuments.getDocuments(u,p))})}(i.localStore,e);lB(i,e,t),aB(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield bm(i,s)}catch(s){yield wy(s)}}),rB.apply(this,arguments)}function oB(){return oB=(0,Ne.Z)(function*(n,e){const t=Wt(n);Ry(t.remoteStore)||Ct("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(r){const o=Wt(r);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(t.localStore);if(-1===i)return void e.resolve();const s=t.Ec.get(i)||[];s.push(e),t.Ec.set(i,s)}catch(i){const s=gw(i,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),oB.apply(this,arguments)}function aB(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function lB(n,e,t){const i=Wt(n);let s=i.Tc[i.currentUser.toKey()];if(s){const r=s.get(e);r&&(t?r.reject(t):r.resolve(),s=s.remove(e)),i.Tc[i.currentUser.toKey()]=s}}function bw(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n._c.get(e))n.wc.delete(i),t&&n.dc.Pc(i,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(i=>{n.Ic.containsKey(i)||wW(n,i)})}function wW(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(Ox(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),hB(n))}function cB(n,e,t){for(const i of t)i instanceof yW?(n.Ic.addReference(i.key,e),BY(n,i)):i instanceof vW?(Ct("SyncEngine","Document no longer in limbo: "+i.key),n.Ic.removeReference(i.key,e),n.Ic.containsKey(i.key)||wW(n,i.key)):ei()}function BY(n,e){const t=e.key,i=t.path.canonicalString();n.gc.get(t)||n.mc.has(i)||(Ct("SyncEngine","New document in limbo: "+t),n.mc.add(i),hB(n))}function hB(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Ht(Zs.fromString(e)),i=n.Ac.next();n.yc.set(i,new DY(t)),n.gc=n.gc.insert(t,i),V1(n.remoteStore,new vm(bc(iw(t.path)),i,"TargetPurposeLimboResolution",Fh.ct))}}function bm(n,e,t){return uB.apply(this,arguments)}function uB(){return uB=(0,Ne.Z)(function*(n,e,t){const i=Wt(n),s=[],r=[],o=[];var a;i.wc.isEmpty()||(i.wc.forEach((a,u)=>{o.push(i.Rc(u,e,t).then(p=>{if((p||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(u.targetId,(null==p?void 0:p.fromCache)?"not-current":"current"),p){s.push(p);const y=mF.Li(u.targetId,p);r.push(y)}}))}),yield Promise.all(o),i.dc.nu(s),yield(a=(0,Ne.Z)(function*(u,p){const y=Wt(u);try{yield y.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>Te.forEach(p,_=>Te.forEach(_.Fi,D=>y.persistence.referenceDelegate.addReference(E,_.targetId,D)).next(()=>Te.forEach(_.Bi,D=>y.persistence.referenceDelegate.removeReference(E,_.targetId,D)))))}catch(E){if(!Sy(E))throw E;Ct("LocalStore","Failed to update sequence numbers: "+E)}for(const E of p){const _=E.targetId;if(!E.fromCache){const D=y.Ji.get(_),V=D.withLastLimboFreeSnapshotVersion(D.snapshotVersion);y.Ji=y.Ji.insert(_,V)}}}),function(u,p){return a.apply(this,arguments)})(i.localStore,r))}),uB.apply(this,arguments)}function VY(n,e){return dB.apply(this,arguments)}function dB(){return dB=(0,Ne.Z)(function*(n,e){const t=Wt(n);if(!t.currentUser.isEqual(e)){Ct("SyncEngine","User change. New user:",e.toKey());const i=yield Zz(t.localStore,e);t.currentUser=e,(s=t).Ec.forEach(o=>{o.forEach(a=>{a.reject(new lt(Me.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Ec.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield bm(t,i.er)}var s}),dB.apply(this,arguments)}function HY(n,e){const t=Wt(n),i=t.yc.get(e);if(i&&i.fc)return bs().add(i.key);{let s=bs();const r=t._c.get(e);if(!r)return s;for(const o of r){const a=t.wc.get(o);s=s.unionWith(a.view.nc)}return s}}function jY(n,e){return pB.apply(this,arguments)}function pB(){return pB=(0,Ne.Z)(function*(n,e){const t=Wt(n),i=yield L1(t.localStore,e.query,!0),s=e.view.hc(i);return t.isPrimaryClient&&cB(t,e.targetId,s.cc),s}),pB.apply(this,arguments)}function UY(n,e){return fB.apply(this,arguments)}function fB(){return fB=(0,Ne.Z)(function*(n,e){const t=Wt(n);return eW(t.localStore,e).then(i=>bm(t,i))}),fB.apply(this,arguments)}function zY(n,e,t,i){return mB.apply(this,arguments)}function mB(){return mB=(0,Ne.Z)(function*(n,e,t,i){const s=Wt(n),r=yield function(o,a){const u=Wt(o),p=Wt(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",y=>p.Sn(y,a).next(E=>E?u.localDocuments.getDocuments(y,E):Te.resolve(null)))}(s.localStore,e);var a;null!==r?("pending"===t?yield fw(s.remoteStore):"acknowledged"===t||"rejected"===t?(lB(s,e,i||null),aB(s,e),a=e,Wt(Wt(s.localStore).mutationQueue).Cn(a)):ei(),yield bm(s,r)):Ct("SyncEngine","Cannot apply mutation batch with id: "+e)}),mB.apply(this,arguments)}function gB(){return gB=(0,Ne.Z)(function*(n,e){const t=Wt(n);if(CB(t),EB(t),!0===e&&!0!==t.vc){const i=t.sharedClientState.getAllActiveQueryTargets(),s=yield SW(t,i.toArray());t.vc=!0,yield UF(t.remoteStore,!0);for(const r of s)V1(t.remoteStore,r)}else if(!1===e&&!1!==t.vc){const i=[];let s=Promise.resolve();t._c.forEach((r,o)=>{t.sharedClientState.isLocalQueryTarget(o)?i.push(o):s=s.then(()=>(bw(t,o),dw(t.localStore,o,!0))),Ox(t.remoteStore,o)}),yield s,yield SW(t,i),function(r){const o=Wt(r);o.yc.forEach((a,u)=>{Ox(o.remoteStore,u)}),o.Ic.Ts(),o.yc=new Map,o.gc=new fr(Ht.comparator)}(t),t.vc=!1,yield UF(t.remoteStore,!1)}}),gB.apply(this,arguments)}function SW(n,e,t){return yB.apply(this,arguments)}function yB(){return yB=(0,Ne.Z)(function*(n,e,t){const i=Wt(n),s=[],r=[];for(const o of e){let a;const u=i._c.get(o);if(u&&0!==u.length){a=yield uw(i.localStore,bc(u[0]));for(const p of u){const y=i.wc.get(p),E=yield jY(i,y);E.snapshot&&r.push(E.snapshot)}}else{const p=yield Jz(i.localStore,o);a=yield uw(i.localStore,p),yield QF(i,_W(p),o,!1,a.resumeToken)}s.push(a)}return i.dc.nu(r),s}),yB.apply(this,arguments)}function _W(n){return OU(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function qY(n){const e=Wt(n);return Wt(Wt(e.localStore).persistence).$i()}function $Y(n,e,t,i){return vB.apply(this,arguments)}function vB(){return vB=(0,Ne.Z)(function*(n,e,t,i){const s=Wt(n);if(s.vc)return void Ct("SyncEngine","Ignoring unexpected query state notification.");const r=s._c.get(e);if(r&&r.length>0)switch(t){case"current":case"not-current":{const o=yield eW(s.localStore,LU(r[0])),a=gx.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ya.EMPTY_BYTE_STRING);yield bm(s,o,a);break}case"rejected":yield dw(s.localStore,e,!0),bw(s,e,i);break;default:ei()}}),vB.apply(this,arguments)}function GY(n,e,t){return bB.apply(this,arguments)}function bB(){return bB=(0,Ne.Z)(function*(n,e,t){const i=CB(n);if(i.vc){for(const s of e){if(i._c.has(s)){Ct("SyncEngine","Adding an already active target "+s);continue}const r=yield Jz(i.localStore,s),o=yield uw(i.localStore,r);yield QF(i,_W(r),o.targetId,!1,o.resumeToken),V1(i.remoteStore,o)}for(const s of t)i._c.has(s)&&(yield dw(i.localStore,s,!1).then(()=>{Ox(i.remoteStore,s),bw(i,s)}).catch(wy))}}),bB.apply(this,arguments)}function CB(n){const e=Wt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=CW.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LY.bind(null,e),e.dc.nu=_Y.bind(null,e.eventManager),e.dc.Pc=IY.bind(null,e.eventManager),e}function EB(n){const e=Wt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RY.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NY.bind(null,e),e}class Mx{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ne.Z)(function*(){t.serializer=Dx(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Kz(this.persistence,new Yz,e.initialUser,this.serializer)}createPersistence(e){return new uF(O1.zs,this.serializer)}createSharedClientState(e){return new nW}terminate(){var e=this;return(0,Ne.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class wB extends Mx{constructor(e,t,i){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,Ne.Z)(function*(){yield t().call(i,e),yield i.Vc.initialize(i,e),yield EB(i.Vc.syncEngine),yield fw(i.Vc.remoteStore),yield i.persistence.Ii(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Kz(this.persistence,new Yz,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new Vz(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const i=new C8(t,this.persistence);return new b8(e.asyncQueue,i)}createPersistence(e){const t=fF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Wl.withCacheSize(this.cacheSizeBytes):Wl.DEFAULT;return new pF(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,oW(),B1(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new nW}}class IW extends wB{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,Ne.Z)(function*(){yield t().call(i,e);const s=i.Vc.syncEngine;i.sharedClientState instanceof SF&&(i.sharedClientState.syncEngine={jr:zY.bind(null,s),zr:$Y.bind(null,s),Wr:GY.bind(null,s),$i:qY.bind(null,s),Qr:UY.bind(null,s)},yield i.sharedClientState.start()),yield i.persistence.Ii(function(){var r=(0,Ne.Z)(function*(o){yield function WY(n,e){return gB.apply(this,arguments)}(i.Vc.syncEngine,o),i.gcScheduler&&(o&&!i.gcScheduler.started?i.gcScheduler.start():o||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(o&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():o||i.indexBackfillerScheduler.stop())});return function(o){return r.apply(this,arguments)}}())})()}createSharedClientState(e){const t=oW();if(!SF.D(t))throw new lt(Me.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=fF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new SF(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class Cw{initialize(e,t){var i=this;return(0,Ne.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=s=>EW(i.syncEngine,s,1),i.remoteStore.remoteSyncer.handleCredentialChange=VY.bind(null,i.syncEngine),yield UF(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new SY}createDatastore(e){const t=Dx(e.databaseInfo.databaseId),i=new oY(e.databaseInfo);return new cY(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,s=e.asyncQueue,r=a=>EW(this.syncEngine,a,0),o=rW.D()?new rW:new sY,new dY(t,i,s,r,o);var t,i,s,r,o}createSyncEngine(e,t){return function(i,s,r,o,a,u,p){const y=new kY(i,s,r,o,a,u);return p&&(y.vc=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ne.Z)(function*(t){const i=Wt(t);Ct("RemoteStore","RemoteStore shutting down."),i.vu.add(5),yield pw(i),i.Pu.shutdown(),i.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function xW(n,e=10240){let t=0;return{read:()=>(0,Ne.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,Ne.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class j1{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Fo("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class ZY{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new ga,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(i=>{i&&i.Qu()?this.metadata.resolve(i.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==i?void 0:i.Gu)}`))},i=>this.metadata.reject(i))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Ne.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Ne.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Ne.Z)(function*(){const t=yield e.kc();if(null===t)return null;const i=e.xc.decode(t),s=Number(i);isNaN(s)&&e.Mc(`length string (${i}) is not valid number`);const r=yield e.$c(s);return new xY(JSON.parse(r),t.length+s)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Ne.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}$c(e){var t=this;return(0,Ne.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const i=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Ne.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class XY{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ne.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new lt(Me.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(s=(0,Ne.Z)(function*(r,o){const a=Wt(r),u=bx(a.serializer)+"/documents",p={documents:o.map(D=>vx(a.serializer,D))},y=yield a.vo("BatchGetDocuments",u,p,o.length),E=new Map;y.forEach(D=>{const L=function vG(n,e){return"found"in e?function(t,i){wi(!!i.found);const s=$p(t,i.found.name),r=Bo(i.found.updateTime),o=i.found.createTime?Bo(i.found.createTime):Ii.min(),a=new bl({mapValue:{fields:i.found.fields}});return Mr.newFoundDocument(s,r,o,a)}(n,e):"missing"in e?function(t,i){wi(!!i.missing),wi(!!i.readTime);const s=$p(t,i.missing),r=Bo(i.readTime);return Mr.newNoDocument(s,r)}(n,e):ei()}(a.serializer,D);E.set(L.key.toString(),L)});const _=[];return o.forEach(D=>{const L=E.get(D.toString());wi(!!L),_.push(L)}),_}),function(r,o){return s.apply(this,arguments)})(t.datastore,e);var s;return i.forEach(s=>t.recordVersion(s)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new ow(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ne.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,s)=>{const r=Ht.fromPath(s);e.mutations.push(new $N(r,e.precondition(r)))}),yield(i=(0,Ne.Z)(function*(s,r){const o=Wt(s),a=bx(o.serializer)+"/documents",u={writes:r.map(p=>Cx(o.serializer,p))};yield o.Io("Commit",a,u)}),function(s,r){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ei();t=Ii.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new lt(Me.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ii.min())?$r.exists(!1):$r.updateTime(t):$r.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ii.min()))throw new lt(Me.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return $r.updateTime(t)}return $r.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class QY{constructor(e,t,i,s,r){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=s,this.deferred=r,this.Bc=i.maxAttempts,this.qo=new IF(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Ne.Z)(function*(){const t=new XY(e.datastore),i=e.qc(t);i&&i.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(r=>{e.Uc(r)}))}).catch(s=>{e.Uc(s)})}))}qc(e){try{const t=this.updateFunction(e);return!ix(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!QU(t)}return!1}}class JY{constructor(e,t,i,s){var r=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=za.UNAUTHENTICATED,this.clientId=K3.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var o=(0,Ne.Z)(function*(a){Ct("FirestoreClient","Received user=",a.uid),yield r.authCredentialListener(a),r.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(i,o=>(Ct("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return(0,Ne.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new lt(Me.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ga;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ne.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const s=gw(i,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function U1(n,e){return SB.apply(this,arguments)}function SB(){return SB=(0,Ne.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ct("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,Ne.Z)(function*(r){i.isEqual(r)||(yield Zz(e.localStore,r),i=r)});return function(r){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),SB.apply(this,arguments)}function _B(n,e){return IB.apply(this,arguments)}function IB(){return IB=(0,Ne.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield xB(n);Ct("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(s=>pW(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,r)=>pW(e.remoteStore,r)),n._onlineComponents=e}),IB.apply(this,arguments)}function TW(n){return"FirebaseError"===n.name?n.code===Me.FAILED_PRECONDITION||n.code===Me.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function xB(n){return TB.apply(this,arguments)}function TB(){return TB=(0,Ne.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ct("FirestoreClient","Using user provided OfflineComponentProvider");try{yield U1(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!TW(t))throw t;Lu("Error using user provided cache. Falling back to memory cache: "+t),yield U1(n,new Mx)}}else Ct("FirestoreClient","Using default OfflineComponentProvider"),yield U1(n,new Mx);return n._offlineComponents}),TB.apply(this,arguments)}function z1(n){return AB.apply(this,arguments)}function AB(){return AB=(0,Ne.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ct("FirestoreClient","Using user provided OnlineComponentProvider"),yield _B(n,n._uninitializedComponentsProvider._online)):(Ct("FirestoreClient","Using default OnlineComponentProvider"),yield _B(n,new Cw))),n._onlineComponents}),AB.apply(this,arguments)}function AW(n){return xB(n).then(e=>e.persistence)}function W1(n){return xB(n).then(e=>e.localStore)}function DW(n){return z1(n).then(e=>e.remoteStore)}function DB(n){return z1(n).then(e=>e.syncEngine)}function Ew(n){return kB.apply(this,arguments)}function kB(){return kB=(0,Ne.Z)(function*(n){const e=yield z1(n),t=e.eventManager;return t.onListen=OY.bind(null,e.syncEngine),t.onUnlisten=MY.bind(null,e.syncEngine),t}),kB.apply(this,arguments)}function OW(n,e,t={}){const i=new ga;return n.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return function(s,r,o,a,u){const p=new j1({next:E=>{r.enqueueAndForget(()=>GF(s,y));const _=E.docs.has(o);!_&&E.fromCache?u.reject(new lt(Me.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&E.fromCache&&a&&"server"===a.source?u.reject(new lt(Me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(E)},error:E=>u.reject(E)}),y=new ZF(iw(o.path),p,{includeMetadataChanges:!0,Ku:!0});return qF(s,y)}(yield Ew(n),n.asyncQueue,e,t,i)})),i.promise}function MW(n,e,t={}){const i=new ga;return n.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return function(s,r,o,a,u){const p=new j1({next:E=>{r.enqueueAndForget(()=>GF(s,y)),E.fromCache&&"server"===a.source?u.reject(new lt(Me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(E)},error:E=>u.reject(E)}),y=new ZF(o,p,{includeMetadataChanges:!0,Ku:!0});return qF(s,y)}(yield Ew(n),n.asyncQueue,e,t,i)})),i.promise}function PW(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const LW=new Map;function OB(n,e,t){if(!t)throw new lt(Me.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function RW(n,e,t,i){if(!0===e&&!0===i)throw new lt(Me.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function NW(n){if(!Ht.isDocumentKey(n))throw new lt(Me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function FW(n){if(Ht.isDocumentKey(n))throw new lt(Me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function q1(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ei()}function js(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new lt(Me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=q1(n);throw new lt(Me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function BW(n,e){if(e<=0)throw new lt(Me.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class VW{constructor(e){var t,i;if(void 0===e.host){if(void 0!==e.ssl)throw new lt(Me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new lt(Me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=PW(null!==(i=e.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new lt(Me.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new lt(Me.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new lt(Me.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Px{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new VW({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new lt(Me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new lt(Me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new VW(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new a8;switch(t.type){case"firstParty":return new u8(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new lt(Me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=LW.get(e);t&&(Ct("ComponentProvider","Removing Datastore"),LW.delete(e),t.terminate())}(this),Promise.resolve()}}function HW(n,e,t,i={}){var s;const r=(n=js(n,Px))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==r.host&&r.host!==o&&Lu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},r),{host:o,ssl:!1})),i.mockUserToken){let a,u;if("string"==typeof i.mockUserToken)a=i.mockUserToken,u=za.MOCK_USER;else{a=(0,sn.Sg)(i.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new lt(Me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new za(p)}n._authCredentials=new l8(new G3(a,u))}}class Pr{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gp(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pr(this.firestore,e,this._key)}}class Cl{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Cl(this.firestore,e,this._query)}}class Gp extends Cl{constructor(e,t,i){super(e,t,iw(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pr(this.firestore,null,new Ht(e))}withConverter(e){return new Gp(this.firestore,e,this._path)}}function jW(n,e,...t){if(n=(0,sn.m9)(n),OB("collection","path",e),n instanceof Px){const i=Zs.fromString(e,...t);return FW(i),new Gp(n,null,i)}{if(!(n instanceof Pr||n instanceof Gp))throw new lt(Me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Zs.fromString(e,...t));return FW(i),new Gp(n.firestore,null,i)}}function $1(n,e,...t){if(n=(0,sn.m9)(n),1===arguments.length&&(e=K3.A()),OB("doc","path",e),n instanceof Px){const i=Zs.fromString(e,...t);return NW(i),new Pr(n,null,new Ht(i))}{if(!(n instanceof Pr||n instanceof Gp))throw new lt(Me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Zs.fromString(e,...t));return NW(i),new Pr(n.firestore,n instanceof Gp?n.converter:null,new Ht(i))}}function UW(n,e){return n=(0,sn.m9)(n),e=(0,sn.m9)(e),(n instanceof Pr||n instanceof Gp)&&(e instanceof Pr||e instanceof Gp)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function MB(n,e){return n=(0,sn.m9)(n),e=(0,sn.m9)(e),n instanceof Cl&&e instanceof Cl&&n.firestore===e.firestore&&cx(n._query,e._query)&&n.converter===e.converter}class cK{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new IF(this,"async_queue_retry"),this.Xc=()=>{const t=B1();t&&Ct("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=B1();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=B1();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new ga;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Ne.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Sy(t))throw t;Ct("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(i=>{throw this.Wc=i,this.Hc=!1,Fo("INTERNAL UNHANDLED ERROR: ",function(r){let o=r.message||"";return r.stack&&(o=r.stack.includes(r.message)?r.stack:r.message+"\n"+r.stack),o}(i)),i}).then(i=>(this.Hc=!1,i))));return this.Gc=t,t}enqueueAfterDelay(e,t,i){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const s=WF.createAndSchedule(this,e,t,i,r=>this.na(r));return this.zc.push(s),s}Zc(){this.Wc&&ei()}verifyOperationInProgress(){}sa(){var e=this;return(0,Ne.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function PB(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class hK{constructor(){this._progressObserver={},this._taskCompletionResolver=new ga,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Lr extends Px{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new cK,this._persistenceKey=(null==s?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||zW(this),this._firestoreClient.terminate()}}function dK(n,e){const t="object"==typeof n?n:(0,um.getApp)(),i="string"==typeof n?n:e||"(default)",s=(0,um._getProvider)(t,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=(0,sn.P0)("firestore");r&&HW(s,...r)}return s}function Vo(n){return n._firestoreClient||zW(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function zW(n){var e,t,i;const s=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new j8(n._databaseId,a,n._persistenceKey,(p=s).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,PW(p.experimentalLongPollingOptions),p.useFetchStreams));var a,p;n._firestoreClient=new JY(n._authCredentials,n._appCheckCredentials,n._queue,r),(null===(t=s.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(i=s.cache)||void 0===i?void 0:i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}function WW(n,e,t){const i=new ga;return n.asyncQueue.enqueue((0,Ne.Z)(function*(){try{yield U1(n,t),yield _B(n,e),i.resolve()}catch(s){const r=s;if(!TW(r))throw r;Lu("Error enabling indexeddb cache. Falling back to memory cache: "+r),i.reject(r)}})).then(()=>i.promise)}function qW(n){if(n._initialized||n._terminated)throw new lt(Me.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Yp{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yp(ya.fromBase64String(e))}catch(t){throw new lt(Me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yp(ya.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Cm{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new lt(Me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Eo(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Xb{constructor(e){this._methodName=e}}class G1{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new lt(Me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new lt(Me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rs(this._lat,e._lat)||rs(this._long,e._long)}}const wK=/^__.*__$/;class SK{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new ym(e,this.data,this.fieldMask,t,this.fieldTransforms):new rw(e,this.data,t,this.fieldTransforms)}}class $W{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ym(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function GW(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ei()}}class Y1{constructor(e,t,i,s,r,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,void 0===r&&this.ua(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Y1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:i,la:!1});return s.fa(e),s}da(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:i,la:!1});return s.ua(),s}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return X1(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(GW(this.ca)&&wK.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class _K{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Dx(e)}ya(e,t,i,s=!1){return new Y1({ca:e,methodName:t,ga:i,path:Eo.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qb(n){const e=n._freezeSettings(),t=Dx(n._databaseId);return new _K(n._databaseId,!!e.ignoreUndefinedProperties,t)}function K1(n,e,t,i,s,r={}){const o=n.ya(r.merge||r.mergeFields?2:0,e,t,s);FB("Data must be an object, but it was:",o,i);const a=ZW(i,o);let u,p;if(r.merge)u=new eh(o.fieldMask),p=o.fieldTransforms;else if(r.mergeFields){const y=[];for(const E of r.mergeFields){const _=Nx(e,E,t);if(!o.contains(_))throw new lt(Me.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);QW(y,_)||y.push(_)}u=new eh(y),p=o.fieldTransforms.filter(E=>u.covers(E.field))}else u=null,p=o.fieldTransforms;return new SK(new bl(a),u,p)}class Rx extends Xb{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rx}}function YW(n,e,t){return new Y1({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class LB extends Xb{_toFieldTransform(e){return new px(e.path,new sw)}isEqual(e){return e instanceof LB}}class IK extends Xb{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=YW(this,e,!0),i=this.pa.map(r=>Jb(r,t)),s=new Ub(i);return new px(e.path,s)}isEqual(e){return this===e}}class xK extends Xb{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=YW(this,e,!0),i=this.pa.map(r=>Jb(r,t)),s=new zb(i);return new px(e.path,s)}isEqual(e){return this===e}}class TK extends Xb{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new nw(e.serializer,jU(e.serializer,this.Ia));return new px(e.path,t)}isEqual(e){return this===e}}function RB(n,e,t,i){const s=n.ya(1,e,t);FB("Data must be an object, but it was:",s,i);const r=[],o=bl.empty();_y(i,(u,p)=>{const y=Z1(e,u,t);p=(0,sn.m9)(p);const E=s.da(y);if(p instanceof Rx)r.push(y);else{const _=Jb(p,E);null!=_&&(r.push(y),o.set(y,_))}});const a=new eh(r);return new $W(o,a,s.fieldTransforms)}function NB(n,e,t,i,s,r){const o=n.ya(1,e,t),a=[Nx(e,i,t)],u=[s];if(r.length%2!=0)throw new lt(Me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<r.length;_+=2)a.push(Nx(e,r[_])),u.push(r[_+1]);const p=[],y=bl.empty();for(let _=a.length-1;_>=0;--_)if(!QW(p,a[_])){const D=a[_];let L=u[_];L=(0,sn.m9)(L);const V=o.da(D);if(L instanceof Rx)p.push(D);else{const H=Jb(L,V);null!=H&&(p.push(D),y.set(D,H))}}const E=new eh(p);return new $W(y,E,o.fieldTransforms)}function KW(n,e,t,i=!1){return Jb(t,n.ya(i?4:3,e))}function Jb(n,e){if(XW(n=(0,sn.m9)(n)))return FB("Unsupported field value:",e,n),ZW(n,e);if(n instanceof Xb)return function(t,i){if(!GW(i.ca))throw i._a(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i._a(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,i){const s=[];let r=0;for(const o of t){let a=Jb(o,i.wa(r));null==a&&(a={nullValue:"NULL_VALUE"}),s.push(a),r++}return{arrayValue:{values:s}}}(n,e)}return function(t,i){if(null===(t=(0,sn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return jU(i.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=qr.fromDate(t);return{timestampValue:aw(i.serializer,s)}}if(t instanceof qr){const s=new qr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:aw(i.serializer,s)}}if(t instanceof G1)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Yp)return{bytesValue:lz(i.serializer,t._byteString)};if(t instanceof Pr){const s=i.databaseId,r=t.firestore._databaseId;if(!r.isEqual(s))throw i._a(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:JN(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i._a(`Unsupported field value: ${q1(t)}`)}(n,e)}function ZW(n,e){const t={};return hU(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_y(n,(i,s)=>{const r=Jb(s,e.ha(i));null!=r&&(t[i]=r)}),{mapValue:{fields:t}}}function XW(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof qr||n instanceof G1||n instanceof Yp||n instanceof Pr||n instanceof Xb)}function FB(n,e,t){if(!XW(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=q1(t);throw e._a("an object"===i?n+" a custom object":n+" "+i)}var i}function Nx(n,e,t){if((e=(0,sn.m9)(e))instanceof Cm)return e._internalPath;if("string"==typeof e)return Z1(n,e);throw X1("Field path arguments must be of type string or ",n,!1,void 0,t)}const AK=new RegExp("[~\\*/\\[\\]]");function Z1(n,e,t){if(e.search(AK)>=0)throw X1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Cm(...e.split("."))._internalPath}catch(i){throw X1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function X1(n,e,t,i,s){const r=i&&!i.isEmpty(),o=void 0!==s;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(r||o)&&(u+=" (found",r&&(u+=` in field ${i}`),o&&(u+=` in document ${s}`),u+=")"),new lt(Me.INVALID_ARGUMENT,a+n+u)}function QW(n,e){return n.some(t=>t.isEqual(e))}class Fx{constructor(e,t,i,s,r){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Pr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new DK(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Q1("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class DK extends Fx{data(){return super.data()}}function Q1(n,e){return"string"==typeof e?Z1(n,e):e instanceof Cm?e._internalPath:e._delegate._internalPath}function JW(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new lt(Me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class BB{}class Bx extends BB{}function Fy(n,e,...t){let i=[];e instanceof BB&&i.push(e),i=i.concat(t),function(s){const r=s.filter(a=>a instanceof ww).length,o=s.filter(a=>a instanceof Vx).length;if(r>1||r>0&&o>0)throw new lt(Me.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)n=s._apply(n);return n}class Vx extends Bx{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Vx(e,t,i)}_apply(e){const t=this._parse(e);return s5(e._query,t),new Cl(e.firestore,e.converter,zN(e._query,t))}_parse(e){const t=Qb(e.firestore);return function(s,r,o,a,u,p,y){let E;if(u.isKeyField()){if("array-contains"===p||"array-contains-any"===p)throw new lt(Me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if("in"===p||"not-in"===p){i5(y,p);const _=[];for(const D of y)_.push(t5(a,s,D));E={arrayValue:{values:_}}}else E=t5(a,s,y)}else"in"!==p&&"not-in"!==p&&"array-contains-any"!==p||i5(y,p),E=KW(o,"where",y,"in"===p||"not-in"===p);return Hs.create(u,p,E)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class ww extends BB{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ww(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return 1===t.length?t[0]:Fn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let r=i;const o=s.getFlattenedFilters();for(const a of o)s5(r,a),r=zN(r,a)}(e._query,t),new Cl(e.firestore,e.converter,zN(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class VB extends Bx{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new VB(e,t)}_apply(e){const t=function(i,s,r){if(null!==i.startAt)throw new lt(Me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new lt(Me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new ew(s,r);return function(a,u){if(null===jN(a)){const p=g1(a);null!==p&&n5(0,p,u.field)}}(i,o),o}(e._query,this._field,this._direction);return new Cl(e.firestore,e.converter,function(i,s){const r=i.explicitOrderBy.concat([s]);return new mm(i.path,i.collectionGroup,r,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class J1 extends Bx{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new J1(e,t,i)}_apply(e){return new Cl(e.firestore,e.converter,y1(e._query,this._limit,this._limitType))}}class eO extends Bx{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new eO(e,t,i)}_apply(e){const t=e5(e,this.type,this._docOrFields,this._inclusive);return new Cl(e.firestore,e.converter,(s=t,new mm((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class tO extends Bx{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new tO(e,t,i)}_apply(e){const t=e5(e,this.type,this._docOrFields,this._inclusive);return new Cl(e.firestore,e.converter,(s=t,new mm((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function e5(n,e,t,i){if(t[0]=(0,sn.m9)(t[0]),t[0]instanceof Fx)return function(s,r,o,a,u){if(!a)throw new lt(Me.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const p=[];for(const y of jb(s))if(y.field.isKeyField())p.push(Vb(r,a.key));else{const E=a.data.field(y.field);if(c1(E))throw new lt(Me.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+y.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===E){const _=y.field.canonicalString();throw new lt(Me.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}p.push(E)}return new ky(p,u)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const s=Qb(n.firestore);return function(r,o,a,u,p,y){const E=r.explicitOrderBy;if(p.length>E.length)throw new lt(Me.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let D=0;D<p.length;D++){const L=p[D];if(E[D].field.isKeyField()){if("string"!=typeof L)throw new lt(Me.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof L}`);if(!UN(r)&&-1!==L.indexOf("/"))throw new lt(Me.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${L}' contains a slash.`);const V=r.path.child(Zs.fromString(L));if(!Ht.isDocumentKey(V))throw new lt(Me.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${V}' is not because it contains an odd number of segments.`);const H=new Ht(V);_.push(Vb(o,H))}else{const V=KW(a,u,L);_.push(V)}}return new ky(_,y)}(n._query,n.firestore._databaseId,s,e,t,i)}}function t5(n,e,t){if("string"==typeof(t=(0,sn.m9)(t))){if(""===t)throw new lt(Me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!UN(e)&&-1!==t.indexOf("/"))throw new lt(Me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Zs.fromString(t));if(!Ht.isDocumentKey(i))throw new lt(Me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Vb(n,new Ht(i))}if(t instanceof Pr)return Vb(n,t._key);throw new lt(Me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${q1(t)}.`)}function i5(n,e){if(!Array.isArray(n)||0===n.length)throw new lt(Me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function s5(n,e){if(e.isInequality()){const i=g1(n),s=e.field;if(null!==i&&!i.isEqual(s))throw new lt(Me.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${s.toString()}'`);const r=jN(n);null!==r&&n5(0,s,r)}const t=function(i,s){for(const r of i)for(const o of r.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new lt(Me.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function n5(n,e,t){if(!t.isEqual(e))throw new lt(Me.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class HB{convertValue(e,t="none"){switch(Ay(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wo(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ei()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return _y(e,(s,r)=>{i[s]=this.convertValue(r,t)}),i}convertGeoPoint(e){return new G1(wo(e.latitude),wo(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=h1(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(nx(e));default:return null}}convertTimestamp(e){const t=Iy(e);return new qr(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Zs.fromString(e);wi(vz(i));const s=new xy(i.get(1),i.get(3)),r=new Ht(i.popFirst(5));return s.isEqual(t)||Fo(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}}function iO(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class BK extends HB{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yp(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pr(this.firestore,null,t)}}class eC{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Em extends Fx{constructor(e,t,i,s,r,o){super(e,t,i,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Hx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Q1("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Hx extends Em{data(e={}){return super.data(e)}}class By{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new eC(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Hx(this._firestore,this._userDataWriter,i.key,i,new eC(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new lt(Me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let r=0;return i._snapshot.docChanges.map(o=>({type:"added",doc:new Hx(i._firestore,i._userDataWriter,o.doc.key,o.doc,new eC(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:r++}))}{let r=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||3!==o.type).map(o=>{const a=new Hx(i._firestore,i._userDataWriter,o.doc.key,o.doc,new eC(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,p=-1;return 0!==o.type&&(u=r.indexOf(o.doc.key),r=r.delete(o.doc.key)),1!==o.type&&(r=r.add(o.doc),p=r.indexOf(o.doc.key)),{type:HK(o.type),doc:a,oldIndex:u,newIndex:p}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function HK(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ei()}}function o5(n,e){return n instanceof Em&&e instanceof Em?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof By&&e instanceof By&&n._firestore===e._firestore&&MB(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Vy extends HB{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yp(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pr(this.firestore,null,t)}}function a5(n,e,t){n=js(n,Pr);const i=js(n.firestore,Lr),s=iO(n.converter,e,t);return Sw(i,[K1(Qb(i),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,$r.none())])}function l5(n,e,t,...i){n=js(n,Pr);const s=js(n.firestore,Lr),r=Qb(s);let o;return o="string"==typeof(e=(0,sn.m9)(e))||e instanceof Cm?NB(r,"updateDoc",n._key,e,t,i):RB(r,"updateDoc",n._key,e),Sw(s,[o.toMutation(n._key,$r.exists(!0))])}function c5(n,...e){var t,i,s;n=(0,sn.m9)(n);let r={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||PB(e[o])||(r=e[o],o++);const a={includeMetadataChanges:r.includeMetadataChanges};if(PB(e[o])){const E=e[o];e[o]=null===(t=E.next)||void 0===t?void 0:t.bind(E),e[o+1]=null===(i=E.error)||void 0===i?void 0:i.bind(E),e[o+2]=null===(s=E.complete)||void 0===s?void 0:s.bind(E)}let u,p,y;if(n instanceof Pr)p=js(n.firestore,Lr),y=iw(n._key.path),u={next:E=>{e[o]&&e[o](jB(p,n,E))},error:e[o+1],complete:e[o+2]};else{const E=js(n,Cl);p=js(E.firestore,Lr),y=E._query;const _=new Vy(p);u={next:D=>{e[o]&&e[o](new By(p,_,E,D))},error:e[o+1],complete:e[o+2]},JW(n._query)}return function(E,_,D,L){const V=new j1(L),H=new ZF(_,V,D);return E.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return qF(yield Ew(E),H)})),()=>{V.Dc(),E.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return GF(yield Ew(E),H)}))}}(Vo(p),y,a,u)}function Sw(n,e){return function(t,i){const s=new ga;return t.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return function PY(n,e,t){return tB.apply(this,arguments)}(yield DB(t),i,s)})),s.promise}(Vo(n),e)}function jB(n,e,t){const i=t.docs.get(e._key),s=new Vy(n);return new Em(n,s,e._key,i,new eC(t.hasPendingWrites,t.fromCache),e.converter)}const nZ={maxAttempts:5};class h5{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Qb(e)}set(e,t,i){this._verifyNotCommitted();const s=Hy(e,this._firestore),r=iO(s.converter,t,i),o=K1(this._dataReader,"WriteBatch.set",s._key,r,null!==s.converter,i);return this._mutations.push(o.toMutation(s._key,$r.none())),this}update(e,t,i,...s){this._verifyNotCommitted();const r=Hy(e,this._firestore);let o;return o="string"==typeof(t=(0,sn.m9)(t))||t instanceof Cm?NB(this._dataReader,"WriteBatch.update",r._key,t,i,s):RB(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(o.toMutation(r._key,$r.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Hy(e,this._firestore);return this._mutations=this._mutations.concat(new ow(t._key,$r.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new lt(Me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Hy(n,e){if((n=(0,sn.m9)(n)).firestore!==e)throw new lt(Me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class rZ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Qb(e)}get(e){const t=Hy(e,this._firestore),i=new BK(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return ei();const r=s[0];if(r.isFoundDocument())return new Fx(this._firestore,i,r.key,r,t.converter);if(r.isNoDocument())return new Fx(this._firestore,i,t._key,null,t.converter);throw ei()})}set(e,t,i){const s=Hy(e,this._firestore),r=iO(s.converter,t,i),o=K1(this._dataReader,"Transaction.set",s._key,r,null!==s.converter,i);return this._transaction.set(s._key,o),this}update(e,t,i,...s){const r=Hy(e,this._firestore);let o;return o="string"==typeof(t=(0,sn.m9)(t))||t instanceof Cm?NB(this._dataReader,"Transaction.update",r._key,t,i,s):RB(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,o),this}delete(e){const t=Hy(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Hy(e,this._firestore),i=new Vy(this._firestore);return super.get(e).then(s=>new Em(this._firestore,i,t._key,s._document,new eC(!1,!1),t.converter))}}function UB(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new lt("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function d5(){if("undefined"==typeof Uint8Array)throw new lt("unimplemented","Uint8Arrays are not available in this environment.")}function p5(){if(!function V8(){return"undefined"!=typeof atob}())throw new lt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){ZE=um.SDK_VERSION,(0,um._registerComponent)(new Ek.wA("firestore",(t,{instanceIdentifier:i,options:s})=>{const r=t.getProvider("app").getImmediate(),o=new Lr(new c8(t.getProvider("auth-internal")),new d8(t.getProvider("app-check-internal")),function(a,u){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new lt(Me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xy(a.options.projectId,u)}(r,i),r);return s=Object.assign({useFetchStreams:e},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),(0,um.registerVersion)($3,"3.13.0",n),(0,um.registerVersion)($3,"3.13.0","esm2017")}();class jx{constructor(e){this._delegate=e}static fromBase64String(e){return p5(),new jx(Yp.fromBase64String(e))}static fromUint8Array(e){return d5(),new jx(Yp.fromUint8Array(e))}toBase64(){return p5(),this._delegate.toBase64()}toUint8Array(){return d5(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function zB(n){return function fZ(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class mZ{enableIndexedDbPersistence(e,t){return function pK(n,e){qW(n=js(n,Lr));const t=Vo(n);if(t._uninitializedComponentsProvider)throw new lt(Me.FAILED_PRECONDITION,"SDK cache is already specified.");Lu("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=n._freezeSettings(),s=new Cw;return WW(t,s,new wB(s,i.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function fK(n){qW(n=js(n,Lr));const e=Vo(n);if(e._uninitializedComponentsProvider)throw new lt(Me.FAILED_PRECONDITION,"SDK cache is already specified.");Lu("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),i=new Cw;return WW(e,i,new IW(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function mK(n){if(n._initialized&&!n._terminated)throw new lt(Me.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ga;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ne.Z)(function*(){try{yield(t=(0,Ne.Z)(function*(i){if(!$d.D())return Promise.resolve();const s=i+"main";yield $d.delete(s)}),function(i){return t.apply(this,arguments)})(fF(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class f5{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof xy||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Lu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){HW(this._delegate,e,t,i)}enableNetwork(){return function yK(n){return function eK(n){return n.asyncQueue.enqueue((0,Ne.Z)(function*(){const e=yield AW(n),t=yield DW(n);return e.setNetworkEnabled(!0),function(i){const s=Wt(i);return s.vu.delete(0),kx(s)}(t)}))}(Vo(n=js(n,Lr)))}(this._delegate)}disableNetwork(){return function vK(n){return function tK(n){return n.asyncQueue.enqueue((0,Ne.Z)(function*(){const e=yield AW(n),t=yield DW(n);return e.setNetworkEnabled(!1),(i=(0,Ne.Z)(function*(s){const r=Wt(s);r.vu.add(0),yield pw(r),r.bu.set("Offline")}),function(s){return i.apply(this,arguments)})(t);var i}))}(Vo(n=js(n,Lr)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,RW("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function gK(n){return function(e){const t=new ga;return e.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return function FY(n,e){return oB.apply(this,arguments)}(yield DB(e),t)})),t.promise}(Vo(n=js(n,Lr)))}(this._delegate)}onSnapshotsInSync(e){return function KK(n,e){return function nK(n,e){const t=new j1(e);return n.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return i=yield Ew(n),s=t,Wt(i).ku.add(s),void s.next();var i,s})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return i=yield Ew(n),s=t,void Wt(i).ku.delete(s);var i,s}))}}(Vo(n=js(n,Lr)),PB(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new lt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new _w(this,jW(this._delegate,e))}catch(t){throw Cc(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ru(this,$1(this._delegate,e))}catch(t){throw Cc(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ec(this,function lK(n,e){if(n=js(n,Px),OB("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new lt(Me.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Cl(n,null,(t=e,new mm(Zs.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Cc(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function oZ(n,e,t){n=js(n,Lr);const i=Object.assign(Object.assign({},nZ),t);return function(s){if(s.maxAttempts<1)throw new lt(Me.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,r,o){const a=new ga;return s.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){const u=yield function kW(n){return z1(n).then(e=>e.datastore)}(s);new QY(s.asyncQueue,u,o,r,a).run()})),a.promise}(Vo(n),s=>e(new rZ(n,s)),i)}(this._delegate,t=>e(new m5(this,t)))}batch(){return Vo(this._delegate),new g5(new h5(this._delegate,e=>Sw(this._delegate,e)))}loadBundle(e){return function bK(n,e){const t=Vo(n=js(n,Lr)),i=new hK;return function rK(n,e,t,i){const s=function(r,o){let a;return a="string"==typeof r?ez().encode(r):r,u=function(u,p){if(u instanceof Uint8Array)return xW(u,p);if(u instanceof ArrayBuffer)return xW(new Uint8Array(u),p);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),new ZY(u,o);var u}(t,Dx(e));n.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){!function YY(n,e,t){const i=Wt(n);var s;(s=(0,Ne.Z)(function*(r,o,a){try{const u=yield o.getMetadata();if(yield function(_,D){const L=Wt(_),V=Bo(D.createTime);return L.persistence.runTransaction("hasNewerBundle","readonly",H=>L.qs.getBundleMetadata(H,D.id)).then(H=>!!H&&H.createTime.compareTo(V)>=0)}(r.localStore,u))return yield o.close(),a._completeWith({taskState:"Success",documentsLoaded:(_=u).totalDocuments,bytesLoaded:_.totalBytes,totalDocuments:_.totalDocuments,totalBytes:_.totalBytes}),Promise.resolve(new Set);a._updateProgress(gW(u));const p=new TY(u,r.localStore,o.serializer);let y=yield o.bc();for(;y;){const _=yield p.zu(y);_&&a._updateProgress(_),y=yield o.bc()}const E=yield p.complete();return yield bm(r,E.Ju,void 0),yield function(_,D){const L=Wt(_);return L.persistence.runTransaction("Save bundle","readwrite",V=>L.qs.saveBundleMetadata(V,D))}(r.localStore,u),a._completeWith(E.progress),Promise.resolve(E.Hu)}catch(u){return Lu("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}var _}),function(r,o,a){return s.apply(this,arguments)})(i,e,t).then(s=>{i.sharedClientState.notifyBundleLoaded(s)})}(yield DB(n),s,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function CK(n,e){return function oK(n,e){return n.asyncQueue.enqueue((0,Ne.Z)(function*(){return function(t,i){const s=Wt(t);return s.persistence.runTransaction("Get named query","readonly",r=>s.qs.getNamedQuery(r,i))}(yield W1(n),e)}))}(Vo(n=js(n,Lr)),e).then(t=>t?new Cl(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ec(this,t):null)}}class sO extends HB{constructor(e){super(),this.firestore=e}convertBytes(e){return new jx(new Yp(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ru.forKey(t,this.firestore,null)}}class m5{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new sO(e)}get(e){const t=iC(e);return this._delegate.get(t).then(i=>new Ux(this._firestore,new Em(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const s=iC(e);return i?(UB("Transaction.set",i),this._delegate.set(s,t,i)):this._delegate.set(s,t),this}update(e,t,i,...s){const r=iC(e);return 2===arguments.length?this._delegate.update(r,t):this._delegate.update(r,t,i,...s),this}delete(e){const t=iC(e);return this._delegate.delete(t),this}}class g5{constructor(e){this._delegate=e}set(e,t,i){const s=iC(e);return i?(UB("WriteBatch.set",i),this._delegate.set(s,t,i)):this._delegate.set(s,t),this}update(e,t,i,...s){const r=iC(e);return 2===arguments.length?this._delegate.update(r,t):this._delegate.update(r,t,i,...s),this}delete(e){const t=iC(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class tC{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new Hx(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new zx(this._firestore,i),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=tC.INSTANCES;let s=i.get(e);s||(s=new WeakMap,i.set(e,s));let r=s.get(t);return r||(r=new tC(e,new sO(e),t),s.set(t,r)),r}}tC.INSTANCES=new WeakMap;class Ru{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new sO(e)}static forPath(e,t,i){if(e.length%2!=0)throw new lt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ru(t,new Pr(t._delegate,i,new Ht(e)))}static forKey(e,t,i){return new Ru(t,new Pr(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new _w(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new _w(this.firestore,jW(this._delegate,e))}catch(t){throw Cc(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,sn.m9)(e))instanceof Pr&&UW(this._delegate,e)}set(e,t){t=UB("DocumentReference.set",t);try{return t?a5(this._delegate,e,t):a5(this._delegate,e)}catch(i){throw Cc(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?l5(this._delegate,e):l5(this._delegate,e,t,...i)}catch(s){throw Cc(s,"updateDoc()","DocumentReference.update()")}}delete(){return function GK(n){return Sw(js(n.firestore,Lr),[new ow(n._key,$r.none())])}(this._delegate)}onSnapshot(...e){const t=y5(e),i=v5(e,s=>new Ux(this.firestore,new Em(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return c5(this._delegate,t,i)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function UK(n){n=js(n,Pr);const e=js(n.firestore,Lr),t=Vo(e),i=new Vy(e);return function iK(n,e){const t=new ga;return n.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return(i=(0,Ne.Z)(function*(s,r,o){try{const a=yield function(u,p){const y=Wt(u);return y.persistence.runTransaction("read document","readonly",E=>y.localDocuments.getDocument(E,p))}(s,r);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new lt(Me.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const u=gw(a,`Failed to get document '${r} from cache`);o.reject(u)}}),function(s,r,o){return i.apply(this,arguments)})(yield W1(n),e,t);var i})),t.promise}(t,n._key).then(s=>new Em(e,i,n._key,s,new eC(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function zK(n){n=js(n,Pr);const e=js(n.firestore,Lr);return OW(Vo(e),n._key,{source:"server"}).then(t=>jB(e,n,t))}(this._delegate):function jK(n){n=js(n,Pr);const e=js(n.firestore,Lr);return OW(Vo(e),n._key).then(t=>jB(e,n,t))}(this._delegate),t.then(i=>new Ux(this.firestore,new Em(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new Ru(this.firestore,this._delegate.withConverter(e?tC.getInstance(this.firestore,e):null))}}function Cc(n,e,t){return n.message=n.message.replace(e,t),n}function y5(n){for(const e of n)if("object"==typeof e&&!zB(e))return e;return{}}function v5(n,e){var t,i;let s;return s=zB(n[0])?n[0]:zB(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:r=>{s.next&&s.next(e(r))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(i=s.complete)||void 0===i?void 0:i.bind(s)}}class Ux{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ru(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return o5(this._delegate,e._delegate)}}class zx extends Ux{data(e){const t=this._delegate.data(e);return function o8(n,e){n||ei()}(void 0!==t),t}}class Ec{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new sO(e)}where(e,t,i){try{return new Ec(this.firestore,Fy(this._delegate,function kK(n,e,t){const i=e,s=Q1("where",n);return Vx._create(s,i,t)}(e,t,i)))}catch(s){throw Cc(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ec(this.firestore,Fy(this._delegate,function OK(n,e="asc"){const t=e,i=Q1("orderBy",n);return VB._create(i,t)}(e,t)))}catch(i){throw Cc(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ec(this.firestore,Fy(this._delegate,function MK(n){return BW("limit",n),J1._create("limit",n,"F")}(e)))}catch(t){throw Cc(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ec(this.firestore,Fy(this._delegate,function PK(n){return BW("limitToLast",n),J1._create("limitToLast",n,"L")}(e)))}catch(t){throw Cc(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ec(this.firestore,Fy(this._delegate,function LK(...n){return eO._create("startAt",n,!0)}(...e)))}catch(t){throw Cc(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ec(this.firestore,Fy(this._delegate,function RK(...n){return eO._create("startAfter",n,!1)}(...e)))}catch(t){throw Cc(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ec(this.firestore,Fy(this._delegate,function NK(...n){return tO._create("endBefore",n,!1)}(...e)))}catch(t){throw Cc(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ec(this.firestore,Fy(this._delegate,function FK(...n){return tO._create("endAt",n,!0)}(...e)))}catch(t){throw Cc(t,"endAt()","Query.endAt()")}}isEqual(e){return MB(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function qK(n){n=js(n,Cl);const e=js(n.firestore,Lr),t=Vo(e),i=new Vy(e);return function sK(n,e){const t=new ga;return n.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return(i=(0,Ne.Z)(function*(s,r,o){try{const a=yield L1(s,r,!0),u=new bW(r,a.ir),p=u.sc(a.documents),y=u.applyChanges(p,!1);o.resolve(y.snapshot)}catch(a){const u=gw(a,`Failed to execute query '${r} against cache`);o.reject(u)}}),function(s,r,o){return i.apply(this,arguments)})(yield W1(n),e,t);var i})),t.promise}(t,n._query).then(s=>new By(e,i,n,s))}(this._delegate):"server"===(null==e?void 0:e.source)?function $K(n){n=js(n,Cl);const e=js(n.firestore,Lr),t=Vo(e),i=new Vy(e);return MW(t,n._query,{source:"server"}).then(s=>new By(e,i,n,s))}(this._delegate):function WK(n){n=js(n,Cl);const e=js(n.firestore,Lr),t=Vo(e),i=new Vy(e);return JW(n._query),MW(t,n._query).then(s=>new By(e,i,n,s))}(this._delegate),t.then(i=>new WB(this.firestore,new By(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=y5(e),i=v5(e,s=>new WB(this.firestore,new By(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return c5(this._delegate,t,i)}withConverter(e){return new Ec(this.firestore,this._delegate.withConverter(e?tC.getInstance(this.firestore,e):null))}}class yZ{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new zx(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class WB{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ec(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new zx(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new yZ(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new zx(this._firestore,i))})}isEqual(e){return o5(this._delegate,e._delegate)}}class _w extends Ec{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ru(this.firestore,e):null}doc(e){try{return new Ru(this.firestore,void 0===e?$1(this._delegate):$1(this._delegate,e))}catch(t){throw Cc(t,"doc()","CollectionReference.doc()")}}add(e){return function YK(n,e){const t=js(n.firestore,Lr),i=$1(n),s=iO(n.converter,e);return Sw(t,[K1(Qb(n.firestore),"addDoc",i._key,s,null!==n.converter,{}).toMutation(i._key,$r.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new Ru(this.firestore,t))}isEqual(e){return UW(this._delegate,e._delegate)}withConverter(e){return new _w(this.firestore,this._delegate.withConverter(e?tC.getInstance(this.firestore,e):null))}}function iC(n){return js(n,Pr)}class qB{constructor(...e){this._delegate=new Cm(...e)}static documentId(){return new qB(Eo.keyField().canonicalString())}isEqual(e){return(e=(0,sn.m9)(e))instanceof Cm&&this._delegate._internalPath.isEqual(e._internalPath)}}class sC{constructor(e){this._delegate=e}static serverTimestamp(){const e=function lZ(){return new LB("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new sC(e)}static delete(){const e=function aZ(){return new Rx("deleteField")}();return e._methodName="FieldValue.delete",new sC(e)}static arrayUnion(...e){const t=function cZ(...n){return new IK("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new sC(t)}static arrayRemove(...e){const t=function hZ(...n){return new xK("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new sC(t)}static increment(e){const t=function uZ(n){return new TK("increment",n)}(e);return t._methodName="FieldValue.increment",new sC(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const vZ={Firestore:f5,GeoPoint:G1,Timestamp:qr,Blob:jx,Transaction:m5,WriteBatch:g5,DocumentReference:Ru,DocumentSnapshot:Ux,Query:Ec,QueryDocumentSnapshot:zx,QuerySnapshot:WB,CollectionReference:_w,FieldPath:qB,FieldValue:sC,setLogLevel:function gZ(n){!function r8(n){Ey.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function CZ(n){(function bZ(n,e){n.INTERNAL.registerComponent(new Ek.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(i,s)},"PUBLIC").setServiceProps(Object.assign({},vZ)))})(n,(e,t)=>new f5(e,t,new mZ)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(X9.Z);var EZ=G(6451),nO=G(5363),wZ=G(6063);class SZ extends rl.x{constructor(e=1/0,t=1/0,i=wZ.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:s,_timestampProvider:r,_windowTime:o}=this;t||(i.push(e),!s&&i.push(r.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:s}=this,r=s.slice();for(let o=0;o<r.length&&!e.closed;o+=i?1:2)e.next(r[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:s}=this,r=(s?1:2)*e;if(e<1/0&&r<i.length&&i.splice(0,i.length-r),!s){const o=t.now();let a=0;for(let u=1;u<i.length&&i[u]<=o;u+=2)a=u;a&&i.splice(0,a+1)}}}var _Z=G(3099);function b5(n,e,t){var i,s;let r,o=!1;return n&&"object"==typeof n?(r=null!==(i=n.bufferSize)&&void 0!==i?i:1/0,e=null!==(s=n.windowTime)&&void 0!==s?s:1/0,o=!!n.refCount,t=n.scheduler):r=null!=n?n:1/0,(0,_Z.B)({connector:()=>new SZ(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function C5(n,e){return(0,Ql.m)(e)?lo(()=>n,e):lo(()=>n)}var $B=G(9468),IZ=G(9260);const E5=new d.OlP("angularfire2.auth.use-emulator"),w5=new d.OlP("angularfire2.auth.settings"),S5=new d.OlP("angularfire2.auth.tenant-id"),_5=new d.OlP("angularfire2.auth.langugage-code"),I5=new d.OlP("angularfire2.auth.use-device-language"),x5=new d.OlP("angularfire.auth.persistence"),T5=(n,e,t,i,s,r,o,a)=>(0,zd.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),i&&(u.tenantId=i),u.languageCode=s,r&&u.useDeviceLanguage(),o)for(const[p,y]of Object.entries(o))u.settings[p]=y;return a&&u.setPersistence(a),u},[t,i,s,r,o,a]);let A5=(()=>{class n{constructor(t,i,s,r,o,a,u,p,y,E,_,D){const L=new rl.x,V=_i(void 0).pipe((0,nO.Q)(o.outsideAngular),lo(()=>r.runOutsideAngular(()=>Promise.resolve().then(G.bind(G,9568)))),(0,Qi.U)(()=>(0,zd.on)(t,r,i)),(0,Qi.U)(H=>T5(H,r,a,p,y,E,u,_)),b5({bufferSize:1,refCount:!1}));if(sf(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=_i(null);else{V.pipe(fh()).subscribe();const se=V.pipe(lo(Ae=>Ae.getRedirectResult().then(gt=>gt,()=>null)),tn.iC,b5({bufferSize:1,refCount:!1})),_e=V.pipe(lo(Ae=>new To.y(gt=>({unsubscribe:r.runOutsideAngular(()=>Ae.onAuthStateChanged(ot=>gt.next(ot),ot=>gt.error(ot),()=>gt.complete()))})))),re=V.pipe(lo(Ae=>new To.y(gt=>({unsubscribe:r.runOutsideAngular(()=>Ae.onIdTokenChanged(ot=>gt.next(ot),ot=>gt.error(ot),()=>gt.complete()))}))));this.authState=se.pipe(C5(_e),(0,$B.R)(o.outsideAngular),(0,nO.Q)(o.insideAngular)),this.user=se.pipe(C5(re),(0,$B.R)(o.outsideAngular),(0,nO.Q)(o.insideAngular)),this.idToken=this.user.pipe(lo(Ae=>Ae?(0,ln.D)(Ae.getIdToken()):_i(null))),this.idTokenResult=this.user.pipe(lo(Ae=>Ae?(0,ln.D)(Ae.getIdTokenResult()):_i(null))),this.credential=(0,EZ.T)(se,L,this.authState.pipe(ao(Ae=>!Ae))).pipe((0,Qi.U)(Ae=>(null==Ae?void 0:Ae.user)?Ae:null),(0,$B.R)(o.outsideAngular),(0,nO.Q)(o.insideAngular))}return(0,zd.pX)(this,V,r,{spy:{apply:(H,se,_e)=>{(H.startsWith("signIn")||H.startsWith("createUser"))&&_e.then(re=>L.next(re))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(zd.Dh),d.LFG(zd.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(tn.HU),d.LFG(E5,8),d.LFG(w5,8),d.LFG(S5,8),d.LFG(_5,8),d.LFG(I5,8),d.LFG(x5,8),d.LFG(kI,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function D5(n,e){return function TZ(n,e=Y9.z){return new To.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=i&&i()}})}(n,e)}function GB(n,e){return D5(n,e).pipe((0,Qi.U)(t=>({payload:t,type:"query"})))}function rO(n,e){return GB(n,e).pipe(ld(void 0),VR(),(0,Qi.U)(([t,i])=>{const s=i.payload.docChanges(),r=s.map(o=>({type:o.type,payload:o}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((o,a)=>{const u=s.find(y=>y.doc.ref.isEqual(o.ref)),p=null==t?void 0:t.payload.docs.find(y=>y.ref.isEqual(o.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(o.metadata)||!u&&p&&JSON.stringify(p.metadata)===JSON.stringify(o.metadata)||r.push({type:"modified",payload:{oldIndex:a,newIndex:a,type:"modified",doc:o}})}),r}))}function k5(n,e,t){return rO(n,t).pipe(Br((i,s)=>function DZ(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function kZ(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return YB(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return YB(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return YB(n,e.oldIndex,1)}return n}(n,i))}),n}(i,s.map(r=>r.payload),e),[]),function K9(n,e=hu.y){return n=null!=n?n:Z9,(0,or.e)((t,i)=>{let s,r=!0;t.subscribe(new Fr.Q(i,o=>{const a=e(o);(r||!n(s,a))&&(r=!1,s=a,i.next(o))}))})}(),(0,Qi.U)(i=>i.map(s=>({type:s.type,payload:s}))))}function YB(n,e,t,...i){const s=n.slice();return s.splice(e,t,...i),s}function O5(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class M5{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=rO(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Qi.U)(i=>i.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(ld(void 0),VR(),ao(([i,s])=>s.length>0||!i),(0,Qi.U)(([i,s])=>s),tn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Br((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=O5(e);return k5(this.query,t,this.afs.schedulers.outsideAngular).pipe(tn.iC)}valueChanges(e={}){return GB(this.query,this.afs.schedulers.outsideAngular).pipe((0,Qi.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),tn.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(tn.iC)}add(e){return this.ref.add(e)}doc(e){return new P5(this.ref.doc(e),this.afs)}}class P5{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:s,query:r}=N5(i,t);return new M5(s,r,this.afs)}snapshotChanges(){return function AZ(n,e){return D5(n,e).pipe(ld(void 0),VR(),(0,Qi.U)(([t,i])=>i.exists?(null==t?void 0:t.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(tn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Qi.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ln.D)(this.ref.get(e)).pipe(tn.iC)}}class OZ{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?rO(this.query,this.afs.schedulers.outsideAngular).pipe((0,Qi.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),ao(t=>t.length>0),tn.iC):rO(this.query,this.afs.schedulers.outsideAngular).pipe(tn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Br((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=O5(e);return k5(this.query,t,this.afs.schedulers.outsideAngular).pipe(tn.iC)}valueChanges(e={}){return GB(this.query,this.afs.schedulers.outsideAngular).pipe((0,Qi.U)(i=>i.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),tn.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(tn.iC)}}const L5=new d.OlP("angularfire2.enableFirestorePersistence"),R5=new d.OlP("angularfire2.firestore.persistenceSettings"),MZ=new d.OlP("angularfire2.firestore.settings"),PZ=new d.OlP("angularfire2.firestore.use-emulator");function N5(n,e=(t=>t)){return{query:e(n),ref:n}}let F5=(()=>{class n{constructor(t,i,s,r,o,a,u,p,y,E,_,D,L,V,H,se,_e){this.schedulers=u;const re=(0,zd.on)(t,a,i),Ae=y;E&&T5(re,a,_,L,V,H,D,se),[this.firestore,this.persistenceEnabled$]=(0,zd.cc)(`${re.name}.firestore`,"AngularFirestore",re.name,()=>{const gt=a.runOutsideAngular(()=>re.firestore());if(r&&gt.settings(r),Ae&&gt.useEmulator(...Ae),s&&!sf(o)){const ot=()=>{try{return(0,ln.D)(gt.enablePersistence(p||void 0).then(()=>!0,()=>!1))}catch(ri){return"undefined"!=typeof console&&console.warn(ri),_i(!1)}};return[gt,a.runOutsideAngular(ot)]}return[gt,_i(!1)]},[r,Ae,s])}collection(t,i){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:o}=N5(s,i),a=this.schedulers.ngZone.run(()=>r);return new M5(a,o,this)}collectionGroup(t,i){const s=i||(o=>o),r=this.firestore.collectionGroup(t);return new OZ(s(r),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>i);return new P5(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(zd.Dh),d.LFG(zd.xv,8),d.LFG(L5,8),d.LFG(MZ,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(tn.HU),d.LFG(R5,8),d.LFG(PZ,8),d.LFG(A5,8),d.LFG(E5,8),d.LFG(w5,8),d.LFG(S5,8),d.LFG(_5,8),d.LFG(I5,8),d.LFG(x5,8),d.LFG(kI,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),LZ=(()=>{class n{constructor(){IZ.Z.registerVersion("angularfire",tn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:L5,useValue:!0},{provide:R5,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[F5]}),n})(),KB=(()=>{class n{constructor(t,i){this.auth=t,this.store=i,this.user=this.auth.currentUser,this.prevFolders=[],this.folders=new rl.x,this.loaded=this.initUser()}login(){var t=this;return(0,Ne.Z)(function*(){const i=Dj(),s=new Dk.V;G9(i,s).then(r=>{t.user=r.user}).catch(r=>{console.log(r)})})()}getFolders(){if(this.user)return this.store.collection("users").doc(this.user.uid).collection("folders").snapshotChanges()}getMediaItems(t){if(this.user)return this.store.collection("users").doc(this.user.uid).collection("folders").doc(t).collection(t).snapshotChanges()}saveMediaItem(t){var i=this;return(0,Ne.Z)(function*(){if(i.user){const s=yield i.store.collection("users").doc(i.user.uid).collection("folders");s.doc(t.folder).set({name:t.folder}),s.doc(t.folder).collection(t.folder).doc(JSON.stringify({imdbID:t.imdbID,poster:encodeURIComponent(t.Poster)})).set(t)}})()}delete(t){var i=this;return(0,Ne.Z)(function*(){i.user&&(yield i.store.collection("users").doc(i.user.uid).collection("folders")).doc(t.folder).collection(t.folder).doc(JSON.stringify({imdbID:t.imdbID,poster:encodeURIComponent(t.Poster)})).delete()})()}deleteFolder(t){var i=this;return(0,Ne.Z)(function*(){i.user&&(yield i.store.collection("users").doc(i.user.uid).collection("folders").doc(t).delete())})()}initUser(){var t=this;return(0,Ne.Z)(function*(){const i=yield $9(t.auth);(null==i?void 0:i.user)&&(t.user=i.user),t.user&&(yield t.saveUser(t.user))})()}saveUser(t){var i=this;return(0,Ne.Z)(function*(){try{yield i.store.collection("users").doc(t.uid).set({name:t.displayName,uid:t.uid,email:t.email})}catch(s){console.error(s)}})()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(kk),d.LFG(F5))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Gn=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const oO="e-splitter",ZB="e-splitter-horizontal",XB="e-splitter-vertical",nC="e-pane",rC="e-pane-horizontal",oC="e-pane-vertical",aC="e-split-bar",B5="e-split-bar-horizontal",V5="e-split-bar-vertical",ea="e-static-pane",aO="e-scrollable",Iw="e-resize-handler",QB="e-resizable-split-bar",lC="e-split-bar-hover",jy="e-split-bar-active",lO="e-hide-handler",H5="e-disabled",cO="e-collapsible",cC="e-navigate-arrow",hC="e-arrow-right",uC="e-arrow-left",dC="e-arrow-up",pC="e-arrow-down",El="e-icon-hidden",Bh="e-expanded",is="e-collapsed",U5="e-pane-hidden",Uy="e-resizable",JB="e-last-bar";let BZ=(()=>{class n extends Is{}return Gn([A()],n.prototype,"size",void 0),Gn([A(!1)],n.prototype,"collapsible",void 0),Gn([A(!1)],n.prototype,"collapsed",void 0),Gn([A(!0)],n.prototype,"resizable",void 0),Gn([A(null)],n.prototype,"min",void 0),Gn([A(null)],n.prototype,"max",void 0),Gn([A()],n.prototype,"content",void 0),Gn([A("")],n.prototype,"cssClass",void 0),n})(),VZ=(()=>{let n=class extends Ls{constructor(t,i){super(t,i)}onPropertyChanged(t,i){if(this.element.classList.contains(oO))for(const s of Object.keys(t))switch(s){case"height":this.setSplitterSize(this.element,t.height,"height");break;case"width":this.setSplitterSize(this.element,t.width,"width");break;case"cssClass":this.setCssClass(this.element,t.cssClass);break;case"enabled":this.isEnabled(this.enabled);break;case"enableReversePanes":this.setReversePane();break;case"separatorSize":this.setSeparatorSize(t.separatorSize);break;case"orientation":this.changeOrientation(t.orientation);break;case"paneSettings":if(t.paneSettings instanceof Array&&i.paneSettings instanceof Array)this.destroyPaneSettings(),this.allBars=[],this.allPanes=[],this.createSplitPane(this.element),this.addSeparator(this.element),this.getPanesDimensions(),this.setRTL(this.enableRtl),this.isCollapsed();else{const r=Object.keys(t.paneSettings);for(let o=0;o<r.length;o++){const a=parseInt(Object.keys(t.paneSettings)[o],10),u=Object.keys(t.paneSettings[a]).length;for(let p=0;p<u;p++){const y=Object.keys(t.paneSettings[a])[p];switch(y){case"content":{const E=Object(t.paneSettings[a])[y];m(E)||(this.allPanes[a].innerHTML="",this.setTemplate(E,this.allPanes[a]));break}case"resizable":{const E=Object(t.paneSettings[a])[y];this.resizableModel(a,E);break}case"collapsible":this.collapsibleModelUpdate(a);break;case"collapsed":t.paneSettings[a].collapsed?this.isCollapsed(a):this.collapsedOnchange(a);break;case"cssClass":this.setCssClass(this.allPanes[a],t.paneSettings[a].cssClass);break;case"size":{const E=Object(t.paneSettings[a])[y];""!==E&&!m(E)&&this.updatePaneSize(E,a);break}}}}}break;case"enableRtl":this.setRTL(t.enableRtl)}}updatePaneSize(t,i){this.allPanes[i].style.flexBasis=t;const s=[];let r,o=0;for(let p=0;p<this.allPanes.length;p++)this.paneSettings[p].size||""===this.allPanes[p].innerText?this.paneSettings[p].size&&(r="Horizontal"===this.orientation?this.allPanes[i].offsetWidth:this.allPanes[i].offsetHeight):(s[o]=p,o++);r="Horizontal"===this.orientation?this.allBars[0].offsetWidth*this.allBars.length+r:this.allBars[0].offsetHeight*this.allBars.length+r;const u=(("Horizontal"===this.orientation?this.element.offsetWidth:this.element.offsetHeight)-r-2*this.border)/s.length;for(let p=0;p<s.length;p++)this.allPanes[s[p]].style.flexBasis=u+"px";this.allPanes[i].classList.add(ea)}initializeValues(){this.allPanes=[],this.paneOrder=[],this.separatorOrder=[],this.allBars=[],this.previousCoordinates={},this.currentCoordinates={},this.updatePrePaneInPercentage=!1,this.updateNextPaneInPercentage=!1,this.panesDimensions=[],this.border=0,this.validDataAttributes=["data-size","data-min","data-max","data-collapsible","data-resizable","data-content","data-collapsed"],this.validElementAttributes=["data-orientation","data-width","data-height"],this.iconsDelay=300,this.templateElement=[],this.collapseFlag=!1,this.expandFlag=!0}preRender(){this.initializeValues(),this.onReportWindowSize=this.reportWindowSize.bind(this),this.onMouseMoveHandler=this.onMouseMove.bind(this),this.onMouseUpHandler=this.onMouseUp.bind(this),this.onTouchMoveHandler=this.onMouseMove.bind(this),this.onTouchEndHandler=this.onMouseUp.bind(this),this.wrapper=this.element.cloneNode(!0),this.wrapperParent=this.element.parentElement,Y([this.wrapper],["e-control","e-lib",oO]),j([this.element],"Horizontal"===this.orientation?ZB:XB),this.setCssClass(this.element,"msie"===Q.info.name?"e-ie":""),Q.isDevice&&j([this.element],"e-splitter-touch")}getPersistData(){return this.addOnPersist(["paneSettings"])}getModuleName(){return"splitter"}render(){this.checkDataAttributes(),this.setCssClass(this.element,this.cssClass),this.isEnabled(this.enabled),this.setDimension(this.getHeight(this.element),this.getWidth(this.element)),this.createSplitPane(this.element),this.addSeparator(this.element),this.getPanesDimensions(),this.setPaneSettings(),this.setRTL(this.enableRtl),this.enableReversePanes&&this.setReversePane(),this.collapseFlag=!0,this.isCollapsed(),this.collapseFlag=!1,O.add(document,"touchstart click",this.onDocumentClick,this),this.renderComplete(),this.element.ownerDocument.defaultView.addEventListener("resize",this.onReportWindowSize,!0),O.add(this.element,"keydown",this.onMove,this)}onDocumentClick(t){!t.target.classList.contains(aC)&&!m(this.currentSeparator)&&(this.currentSeparator.classList.remove(lC),this.currentSeparator.classList.remove(jy))}checkPaneSize(t){const i="Horizontal"===this.orientation?this.previousPane.offsetWidth:this.previousPane.offsetHeight,s="Horizontal"===this.orientation?this.nextPane.offsetWidth:this.nextPane.offsetHeight,r=m(this.separatorSize)?1:this.separatorSize;if(this.previousPane.style.flexBasis.indexOf("%")>0||this.nextPane.style.flexBasis.indexOf("%")>0){const o=this.updatePaneFlexBasis(this.previousPane),a=this.updatePaneFlexBasis(this.nextPane);this.totalPercent=o+a,this.totalWidth=this.convertPercentageToPixel(this.totalPercent+"%"),"keydown"===t.type&&!m(t.keyCode)&&((39===t.keyCode||40===t.keyCode)&&s>0&&this.getMinInPixel(this.paneSettings[this.nextPaneIndex].min)<this.convertPercentageToPixel(a-1+"%")?(this.previousPane.style.flexBasis=o+1+"%",this.nextPane.style.flexBasis=a-1+"%"):(37===t.keyCode||38===t.keyCode)&&i>0&&this.getMinInPixel(this.paneSettings[this.prevPaneIndex].min)<this.convertPercentageToPixel(o-1+"%")&&(this.previousPane.style.flexBasis=o-1+"%",this.nextPane.style.flexBasis=a+1+"%"))}else this.totalWidth="Horizontal"===this.orientation?this.previousPane.offsetWidth+this.nextPane.offsetWidth:this.previousPane.offsetHeight+this.nextPane.offsetHeight,"keydown"===t.type&&!m(t.keyCode)&&((39===t.keyCode||40===t.keyCode)&&s>0&&this.getMinInPixel(this.paneSettings[this.nextPaneIndex].min)<s+r?(this.addStaticPaneClass(),this.previousPane.style.flexBasis=i+r+"px",this.nextPane.style.flexBasis=s<r?"0px":s-r+"px"):(37===t.keyCode||38===t.keyCode)&&i>0&&this.getMinInPixel(this.paneSettings[this.prevPaneIndex].min)<i-r&&(this.addStaticPaneClass(),this.previousPane.style.flexBasis=i<r?"0px":i-r+"px",this.nextPane.style.flexBasis=s+r+"px"))}onMove(t){if(this.allPanes.length>1){const i=this.getSeparatorIndex(this.currentSeparator),s=this.previousPane.classList.contains(is),r=this.previousPane.classList.contains(Bh),o=this.nextPane.classList.contains(is);("Horizontal"!==this.orientation&&38===t.keyCode||"Horizontal"===this.orientation&&39===t.keyCode||"Horizontal"===this.orientation&&37===t.keyCode||"Horizontal"!==this.orientation&&40===t.keyCode)&&(!r&&!o&&!s||r&&!o)&&document.activeElement.classList.contains(aC)&&this.paneSettings[i].resizable&&this.paneSettings[i+1].resizable?(t.preventDefault(),this.checkPaneSize(t),this.triggerResizing(t)):13===t.keyCode&&this.paneSettings[i].collapsible&&document.activeElement.classList.contains(aC)&&this.currentSeparator.classList.contains(jy)&&(this.previousPane.classList.contains(is)?(this.expand(i),j([this.currentSeparator],jy)):(this.collapse(i),j([this.currentSeparator],jy)))}}getMinInPixel(t){let i;if(m(t))return 0;let s=this.convertPixelToNumber(t.toString());return t.indexOf("%")>0&&(s=this.convertPercentageToPixel(t)),i=this.convertPixelToNumber(s.toString()),i}sanitizeHelper(t){if(this.enableHtmlSanitizer){const i=_n.beforeSanitize();ut(i,i,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",i),i.cancel&&!m(i.helper)?t=i.helper(t):i.cancel||(t=_n.serializeValue(i,t))}return t}checkDataAttributes(){let t,i;for(let s=0;s<this.validElementAttributes.length;s++)i=this.element.getAttribute(this.validElementAttributes[s]),m(i)||(t=this.removeDataPrefix(this.validElementAttributes[s]),this[t]=i);for(let s=0;s<this.element.children.length;s++)for(let r=0;r<this.validDataAttributes.length;r++)if(i=this.element.children[s].getAttribute(this.validDataAttributes[r]),!m(i)){t=this.removeDataPrefix(this.validDataAttributes[r]),i="collapsible"===t||"resizable"===t?"true"===i:i,m(this.paneSettings[s])&&(this.paneSettings[s]={size:"",min:null,max:null,content:"",resizable:!0,collapsible:!1,collapsed:!1});let o=this.paneSettings[s][t];("resizable"===t||"collapsible"===t||"collapsed"===t)&&(this.paneSettings[s][t]=i),(m(o)||""===o)&&(this.paneSettings[s][t]=i)}}destroyPaneSettings(){[].slice.call(this.element.children).forEach(t=>{ye(t)}),this.restoreElem()}setPaneSettings(){const t=this.allPanes.length,i=[],s={size:"",min:null,max:null,content:"",resizable:!0,collapsed:!1,collapsible:!1,cssClass:""};for(let r=0;r<t;r++)i[r]=m(this.paneSettings[r])?s:this.paneSettings[r];this.setProperties({paneSettings:i},!0)}checkArrow(t,i){return this.allBars[t].querySelector("."+cC+"."+i)}removeDataPrefix(t){return t.slice(t.lastIndexOf("-")+1)}setRTL(t){t?j([this.element],"e-rtl"):Y([this.element],"e-rtl")}setReversePane(){this.allPanes=this.allPanes.reverse(),this.allBars=this.allBars.reverse(),j([this.allBars[this.allBars.length-1]],JB),Y([this.allBars[0]],JB),this.setProperties({paneSettings:this.paneSettings.reverse()},!0),this.enableReversePanes?this.element.setAttribute("dir","rtl"):this.element.removeAttribute("dir")}setSplitterSize(t,i,s){It(t,"width"===s?{width:ct(i)}:{height:ct(i)})}getPanesDimensions(){for(let t=0;t<this.allPanes.length;t++)this.panesDimensions.push("Horizontal"===this.orientation?this.allPanes[t].getBoundingClientRect().width:this.allPanes[t].getBoundingClientRect().height)}setCssClass(t,i){i&&j([t],i.split(i.indexOf(",")>-1?",":" "))}hideResizer(t){j([X("."+Iw,t)],lO)}showResizer(t){!m(this.previousPane)&&this.previousPane.classList.contains(Uy)&&!m(this.nextPane)&&this.nextPane.classList.contains(Uy)&&Y([X("."+Iw,t)],lO)}resizableModel(t,i){const s=t===this.allBars.length?t-1:t,r=t;O.remove(this.allBars[s],"mousedown",this.onMouseDown),i?(O.add(this.allBars[s],"mousedown",this.onMouseDown,this),this.isResizable()&&(this.showResizer(this.allBars[s]),Y([X("."+Iw,this.allBars[s])],lO),this.allBars[s].classList.add(QB),t===this.allBars.length?this.allPanes[t].classList.add(Uy):this.allPanes[s].classList.add(Uy),this.updateResizablePanes(r))):(this.updateResizablePanes(r),this.hideResizer(this.allBars[s]),this.allBars[s].classList.remove(QB),t===this.allBars.length?this.allPanes[t].classList.remove(Uy):this.allPanes[s].classList.remove(Uy))}collapsibleModelUpdate(t){const i=t===this.allBars.length?t-1:t,s=this.checkArrow(i,"Horizontal"===this.orientation?uC:dC),r=this.checkArrow(i,"Horizontal"===this.orientation?hC:pC);this.paneCollapsible(this.allPanes[t],t),this.updateCollapseIcons(i,r,s)}collapseArrow(t,i){return at("."+i,this.allBars[t])[0]}updateIsCollapsed(t,i,s){if(!m(t)){let r;const o=t===this.allBars.length,a=o?t-1:t;r=!o&&this.allPanes[t+1].classList.contains(is)&&0!==t?this.collapseArrow(a-1,s):this.collapseArrow(a,o?s:i),r.click()}}isCollapsed(t){if(m(t)||!this.paneSettings[t].collapsed||!m(this.allPanes[t].classList.contains(is))){if(this.expandFlag=!1,m(t)){for(let i=0;i<this.allPanes.length;i++)!m(this.paneSettings[i])&&this.paneSettings[i].collapsed&&this.updateIsCollapsed(i,this.targetArrows().collapseArrow,this.targetArrows().lastBarArrow);for(let i=this.allPanes.length-1;i>=0;i--)if(!m(this.paneSettings[i])&&this.paneSettings[i].collapsed&&!this.allPanes[i].classList.contains(is)){const s="Horizontal"===this.orientation?hC:pC;0!==i&&this.collapseArrow(i-1,s).click(),this.nextPane.classList.contains(is)||this.collapseArrow(i-1,s).click()}}else{let i;this.collapseFlag=!0;const s=t===this.allBars.length,r=s?t-1:t;i=!s&&this.allPanes[t+1].classList.contains(is)&&0!==t?this.collapseArrow(r-1,this.targetArrows().lastBarArrow):this.collapseArrow(r,s?this.targetArrows().lastBarArrow:this.targetArrows().collapseArrow);const o={target:i},a=this.beforeAction(o);this.trigger("beforeCollapse",a,u=>{if(!u.cancel){let p=[];p[0]=t;let y=1;for(let _=0;_<this.allPanes.length;_++)this.allPanes[_].classList.contains(is)&&(p[y]=_,y++);p=p.sort(),this.updateIsCollapsed(t,this.targetArrows().collapseArrow,this.targetArrows().lastBarArrow);for(let _=0;_<p.length;_++)this.allPanes[p[_]].classList.contains(is)||this.updateIsCollapsed(p[_],this.targetArrows().collapseArrow,this.targetArrows().lastBarArrow);for(let _=p.length;_>0;_--)if(!this.allPanes[p[_-1]].classList.contains(is)){const D=this.targetArrows();this.updateIsCollapsed(p[_-1],D.collapseArrow,D.lastBarArrow)}const E=this.afterAction(o);this.trigger("collapsed",E),this.collapseFlag=!1}})}this.expandFlag=!0}}targetArrows(){return this.splitterProperty(),{collapseArrow:"Horizontal"===this.orientation?uC:dC,lastBarArrow:"Vertical"===this.orientation?pC:hC}}collapsedOnchange(t){!m(this.paneSettings[t])&&!m(this.paneSettings[t].collapsed)&&this.allPanes[t].classList.contains(is)&&this.updateIsCollapsed(t,this.targetArrows().lastBarArrow,this.targetArrows().collapseArrow)}isEnabled(t){t?Y([this.element],H5):j([this.element],H5)}setSeparatorSize(t){const i=m(t)?"auto":t+"px",s="Horizontal"===this.orientation?B5:V5;for(let r=0;r<this.allBars.length;r++){const o=at("."+s,this.element)[r],a=at("."+Iw,o)[0];"Horizontal"===this.orientation?(o.style.width=i,m(a)||(a.style.width=i)):(o.style.height=i,m(a)||(a.style.height=i))}}changeOrientation(t){const i="Vertical"===t;this.element.classList.remove(i?ZB:XB),this.element.classList.add(i?XB:ZB);for(let s=0;s<this.allPanes.length;s++)this.allPanes[s].classList.remove(i?rC:oC),this.allPanes[s].classList.add(i?oC:rC);for(let s=0;s<this.allBars.length;s++)ye(this.allBars[s]);this.allBars=[],this.addSeparator(this.element)}checkSplitPane(t,i){return this.collectPanes(t.parentElement.children)[i]}collectPanes(t){const i=[];for(let s=0;s<t.length;s++)t[s].classList.contains(nC)&&i.push(t[s]);return i}getPrevPane(t){return this.getOrderPane(this.enableReversePanes?t+1:t-1)}getNextPane(t){return this.getOrderPane(this.enableReversePanes?t-1:t+1)}getOrderPane(t){let i;for(let s=0;s<this.element.children.length;s++)parseInt(this.element.children[s].style.order,10)===t&&(i=this.element.children[s]);return i}getOrderIndex(t,i){let s,r;r="pane"===i?this.allPanes:this.allBars;for(let o=0;o<r.length;o++)parseInt(r[o].style.order,10)===t&&(s=o);return s}updateSeparatorSize(t){const i=m(this.separatorSize)?"1px":this.separatorSize+"px";"Horizontal"===this.orientation?t.style.width=i:t.style.height=i}addResizeHandler(t){const i=this.createElement("div");j([i],[Iw,"e-icons"]),this.updateSeparatorSize(i),t.appendChild(i)}getHeight(t){let i=this.height;return i=""!==t.style.height&&"100%"===this.height?t.style.height:this.height,i}getWidth(t){let i=this.width;return i=""!==t.style.width&&"100%"===this.width?t.style.width:this.width,i}setDimension(t,i){It(this.element,{height:t,width:i})}updateCollapseIcons(t,i,s){m(this.paneSettings[t])||m(this.paneSettings[t].collapsible)||(this.paneSettings[t].collapsible?Y([s],[El]):j([s],[El]),m(this.paneSettings[t+1])||(this.paneSettings[t+1].collapsible?Y([i],[El]):j([i],[El])),m(this.paneSettings[t+1])||this.paneSettings[t+1].collapsible&&(this.paneSettings[t+1].collapsible?Y([i],[El]):j([i],[El])))}updateIconClass(){"Horizontal"===this.orientation?(this.leftArrow=uC,this.rightArrow=hC):(this.leftArrow=dC,this.rightArrow=pC)}createSeparator(t){const i=this.createElement("div");this.allBars.push(i);const s=this.createElement("button"),r=this.createElement("button");s.setAttribute("tabindex","-1"),r.setAttribute("tabindex","-1"),s.setAttribute("aria-label","Toggle navigation"),r.setAttribute("aria-label","Toggle navigation"),s.setAttribute("type","button"),r.setAttribute("type","button");const o=m(this.separatorSize)?"1px":this.separatorSize+"px",a=this;return"Horizontal"===this.orientation?(this.updateIconClass(),j([r],[cC,uC,El]),j([s],[cC,hC,El]),j([i],[aC,B5]),i.style.width=o):(j([s],[cC,pC,El]),j([r],[cC,dC,El]),j([i],[aC,V5]),this.updateIconClass(),i.style.height=o),this.addMouseActions(i),i.appendChild(r),this.addResizeHandler(i),i.appendChild(s),this.updateCollapseIcons(t,s,r),i.setAttribute("tabindex","0"),this.enableReversePanes?i.setAttribute("dir","ltr"):i.removeAttribute("dir"),i.addEventListener("focus",()=>{i.classList.add(jy),a.currentSeparator=i,a.getPaneDetails()}),i.addEventListener("blur",()=>{i.classList.remove(jy)}),i}updateResizablePanes(t){this.getPaneDetails(),this.isResizable()?this.allPanes[t].classList.add(Uy):this.allPanes[t].classList.remove(Uy)}addSeparator(t){const i=this.allPanes.length,s=t.children;let r;for(let o=0;o<i;o++)o<i-1?(r=this.createSeparator(o),It(r,{order:2*o+1}),this.separatorOrder.push(2*o+1),s[o].parentNode.appendChild(r),this.currentSeparator=r,r.setAttribute("role","separator"),r.setAttribute("aria-orientation",this.orientation.toLowerCase()),this.wireClickEvents(),m(r)||(this.isResizable()?(O.add(r,"mousedown",this.onMouseDown,this),O.add(r,"msie"===Q.info.name?"pointerdown":"touchstart",this.onMouseDown,this),r.classList.add(QB),this.updateResizablePanes(o)):j([X("."+Iw,r)],lO))):(r&&j([r],JB),i>1&&this.updateResizablePanes(o));if("msie"===Q.info.name){const o=this.element.querySelectorAll(".e-splitter .e-resize-handler");for(let a=0;a<o.length;a++){const u=m(this.separatorSize)?1:this.separatorSize;o[a].style.paddingLeft=u/2+"px",o[a].style.paddingRight=u/2+"px"}}}isResizable(){let t=!1;return(!m(this.paneSettings[this.getPreviousPaneIndex()])&&this.paneSettings[this.getPreviousPaneIndex()].resizable&&!m(this.paneSettings[this.getNextPaneIndex()])&&this.paneSettings[this.getNextPaneIndex()].resizable||m(this.paneSettings[this.getNextPaneIndex()]))&&(t=!0),t}addMouseActions(t){let i,s;t.addEventListener("mouseenter",()=>{i=setTimeout(()=>{j([t],[lC])},this.iconsDelay)}),t.addEventListener("mouseleave",()=>{clearTimeout(i),Y([t],[lC])}),t.addEventListener("mouseout",()=>{clearTimeout(s)}),t.addEventListener("mouseover",()=>{s=setTimeout(()=>{j([t],[lC])},this.iconsDelay)})}getEventType(t){return t.indexOf("mouse")>-1?"mouse":"touch"}updateCurrentSeparator(t){this.currentSeparator=this.isSeparator(t)?t.parentElement:t}isSeparator(t){return!t.classList.contains(aC)}isMouseEvent(t){let i=!1;return("mouse"===this.getEventType(t.type)||!m(t.pointerType)&&"mouse"===this.getEventType(t.pointerType))&&(i=!0),i}updateCursorPosition(t,i){if(this.isMouseEvent(t))this.changeCoordinates({x:t.pageX,y:t.pageY},i);else{const s="msie"!==Q.info.name?t.touches[0]:t;this.changeCoordinates({x:s.pageX,y:s.pageY},i)}}changeCoordinates(t,i){"previous"===i?this.previousCoordinates=t:this.currentCoordinates=t}reportWindowSize(){const t=this.allPanes.length;if(document.body.contains(this.element)){for(let i=0;i<t;i++)m(this.paneSettings[i].size)&&this.allPanes[i].classList.remove(ea),t-1===i&&this.element.querySelectorAll("."+ea).length===t&&Y([this.allPanes[i]],ea);t>0&&setTimeout(()=>{this.updateSplitterSize(!0)},200)}else document.defaultView.removeEventListener("resize",this.onReportWindowSize)}updateSplitterSize(t){let i=0;const s=[];let r=0;const o=this.element.children;for(let p=0;p<o.length;p++)i+="Horizontal"===this.orientation?o[p].offsetWidth:o[p].offsetHeight;for(let p=0;p<this.allBars.length;p++)i+="Horizontal"===this.orientation?parseInt(getComputedStyle(this.allBars[p]).marginLeft,10)+parseInt(getComputedStyle(this.allBars[p]).marginLeft,10):parseInt(getComputedStyle(this.allBars[p]).marginTop,10)+parseInt(getComputedStyle(this.allBars[p]).marginBottom,10);const a="Horizontal"===this.orientation?this.element.offsetWidth-(2*this.border+i):this.element.offsetHeight-(2*this.border+i);for(let p=0;p<this.allPanes.length;p++)!this.paneSettings[p].size&&""!==this.allPanes[p].innerText&&(s[r]=p,r++);const u=a/s.length;for(let p=0;p<s.length;p++)this.allPanes[s[p]].style.flexBasis="Horizontal"===this.orientation?this.allPanes[s[p]].offsetWidth+u+"px":this.allPanes[s[p]].offsetHeight+u+"px";if(2===this.allPanes.length&&t){const p=this.allPanes.length;let y,E;const _=0;let D,L;for(let V=0;V<p;V++)if(!m(this.paneSettings[V].min)&&(E=this.convertPixelToNumber(this.paneSettings[V].min.toString()),this.paneSettings[V].min.indexOf("%")>0&&(E=this.convertPercentageToPixel(this.paneSettings[V].min)),y=this.convertPixelToNumber(E.toString()),this.allPanes[V].offsetWidth<y)){V===_?(D=this.allPanes[V],L=this.allPanes[V+1]):(D=this.allPanes[V],L=this.allPanes[V-1]);const H=y-this.allPanes[V].offsetWidth,se=D.style.flexBasis.indexOf("%")>-1;D.style.flexBasis=se?this.convertPixelToPercentage(D.offsetWidth+H)+"%":D.offsetWidth+H+"px",L.style.flexBasis=L.style.flexBasis.indexOf("%")>-1?this.convertPixelToPercentage(L.offsetWidth-H)+"%":L.offsetWidth-H+"px"}}}wireResizeEvents(){document.addEventListener("mousemove",this.onMouseMoveHandler,!0),document.addEventListener("mouseup",this.onMouseUpHandler,!0);const i="msie"===Q.info.name?"pointerup":"touchend";document.addEventListener("msie"===Q.info.name?"pointermove":"touchmove",this.onTouchMoveHandler,!0),document.addEventListener(i,this.onTouchEndHandler,!0)}unwireResizeEvents(){this.element.ownerDocument.defaultView.removeEventListener("resize",this.onReportWindowSize);const t="msie"===Q.info.name?"pointermove":"touchmove",i="msie"===Q.info.name?"pointerup":"touchend";document.removeEventListener("mousemove",this.onMouseMoveHandler,!0),document.removeEventListener("mouseup",this.onMouseUpHandler,!0),document.removeEventListener(t,this.onTouchMoveHandler,!0),document.removeEventListener(i,this.onTouchEndHandler,!0)}wireClickEvents(){O.add(this.currentSeparator,"touchstart click",this.clickHandler,this)}clickHandler(t){if(!t.target.classList.contains(cC)){const o=at("."+oO+" > ."+aC+"."+lC);o.length>0&&Y(o,lC),t.target.classList.add(lC)}const i=t.target;(i.classList.contains(uC)||i.classList.contains(dC))&&this.collapseAction(t),(i.classList.contains(hC)||i.classList.contains(pC))&&this.expandAction(t);let s=0;const r=this.element.children;for(let o=0;o<r.length;o++)s+="Horizontal"===this.orientation?r[o].offsetWidth:r[o].offsetHeight;s>this.element.offsetWidth&&this.updateSplitterSize()}expandAction(t){this.splitterDetails(t);const i=this.beforeAction(t);this.expandFlag?this.trigger("beforeExpand",i,s=>{s.cancel||this.expandPane(t);const r=this.afterAction(t);this.trigger("expanded",r)}):this.expandPane(t)}expandPane(t){this.removeStaticPanes();const i=this.element.querySelectorAll("."+is).length,s=!this.previousPane.classList.contains(is)&&this.previousPane.classList.contains(ea)&&!this.nextPane.classList.contains(is)&&!this.nextPane.classList.contains(Bh)&&this.nextPane.nextElementSibling.classList.contains(nC)&&!this.nextPane.nextElementSibling.classList.contains(ea)&&i!==this.allPanes.length-2,r=[is,U5];this.previousPane.classList.contains(is)?(Y([this.previousPane],r),Y([this.nextPane],Bh),this.expandFlag&&this.updatePaneSettings(this.prevPaneIndex,!1)):(Y([this.nextPane],Bh),Y([this.previousPane],r),j([this.previousPane],Bh),j([this.nextPane],r),this.expandFlag&&this.updatePaneSettings(this.nextPaneIndex,!0)),this.updateIconsOnExpand(t),this.previousPane.setAttribute("aria-expanded","true"),this.nextPane.setAttribute("aria-expanded","false"),this.updateFlexGrow(this.checkStaticPanes()),s&&(this.previousPane.classList.remove(Bh),this.previousPane.style.flexGrow="")}checkStaticPanes(){let t=!0;for(let i=0;i<this.allPanes.length;i++)!this.allPanes[i].classList.contains(is)&&t&&(t=!!this.allPanes[i].classList.contains(ea));return t}updateFlexGrow(t){let i=0;for(let o=0;o<this.element.children.length;o++)this.element.children[o].classList.contains(is)&&(i+=1);const s=i===this.allPanes.length-2,r=this.allPanes;for(let o=0;o<r.length;o++)r[o].style.flexGrow=r[o].classList.contains(Bh)?"1":r[o].classList.contains(is)?"0":"",t&&!this.nextPane.classList.contains(is)&&(this.nextPane.style.flexGrow="1"),s&&!this.allPanes[o].classList.contains(is)&&this.paneSettings[o].size&&o!==this.allPanes.length-1&&(r[o].style.flexGrow="")}hideTargetBarIcon(t,i){j([X("."+i,t)],El)}showTargetBarIcon(t,i){Y([X("."+i,t)],El)}updateIconsOnCollapse(t){this.splitterProperty(),this.previousPane.classList.contains(is)&&!this.nextPane.classList.contains(is)?(j([t.target],El),this.paneSettings[this.prevPaneIndex].collapsible&&this.showCurrentBarIcon(),this.resizableModel(this.currentBarIndex,!1),this.previousPane.classList.contains(is)&&!this.nextPane.classList.contains(is)&&!this.paneSettings[this.prevPaneIndex].collapsible&&this.hideTargetBarIcon(this.prevBar,this.rightArrow),this.previousPane.previousElementSibling&&!this.previousPane.previousElementSibling.classList.contains(is)&&(this.previousPane.classList.contains(is)&&this.paneSettings[this.prevPaneIndex].collapsible?this.showTargetBarIcon(this.prevBar,this.leftArrow):this.paneSettings[this.prevPaneIndex].collapsible||this.hideTargetBarIcon(this.prevBar,this.leftArrow)),m(this.prevBar)||(this.resizableModel(this.currentBarIndex-1,!1),this.hideTargetBarIcon(this.prevBar,this.arrow)),this.paneSettings[this.prevPaneIndex].collapsible||this.hideTargetBarIcon(this.currentSeparator,this.rightArrow)):!this.splitInstance.prevPaneCollapsed&&!this.splitInstance.nextPaneExpanded&&(this.paneSettings[this.currentBarIndex].resizable&&this.resizableModel(this.currentBarIndex,!0),!this.splitInstance.nextPaneNextEle.classList.contains(is)&&this.paneSettings[this.currentBarIndex+1].resizable&&this.resizableModel(this.currentBarIndex+1,!0),this.paneSettings[this.currentBarIndex].collapsible||j([t.target],El),this.previousPane&&0===this.prevPaneIndex&&this.paneSettings[this.prevPaneIndex].collapsible&&this.showTargetBarIcon(this.currentSeparator,this.leftArrow),this.nextPane&&this.nextPaneIndex===this.allPanes.length-1&&this.paneSettings[this.nextPaneIndex].collapsible&&this.showTargetBarIcon(this.getPrevBar(this.nextPaneIndex),this.rightArrow),!this.previousPane.classList.contains(is)&&this.paneSettings[this.nextPaneIndex].collapsible&&this.showTargetBarIcon(this.currentSeparator,this.rightArrow),m(this.nextBar)||(this.nextPane.nextElementSibling&&this.nextPane.nextElementSibling.classList.contains(is)&&this.paneSettings[this.nextPaneIndex+1].collapsible||!this.nextPane.nextElementSibling.classList.contains(is)&&this.paneSettings[this.nextPaneIndex].collapsible?this.showTargetBarIcon(this.nextBar,this.leftArrow):!this.paneSettings[this.splitInstance.nextPaneIndex+1].collapsible&&this.paneSettings[this.currentBarIndex]&&this.hideTargetBarIcon(this.nextBar,this.arrow)),this.nextPaneIndex!==this.allPanes.length-1&&this.nextPane.nextElementSibling&&!this.nextPane.classList.contains(is)&&!this.nextPane.nextElementSibling.classList.contains(is)&&!this.paneSettings[this.nextPaneIndex+1].collapsible&&this.hideTargetBarIcon(this.nextBar,this.rightArrow))}collapseAction(t){this.splitterDetails(t);const i=this.beforeAction(t);this.collapseFlag?this.collapsePane(t):this.trigger("beforeCollapse",i,s=>{if(!s.cancel){this.collapsePane(t);const r=this.afterAction(t);this.trigger("collapsed",r)}})}collapsePane(t){this.removeStaticPanes();const i=this.element.querySelectorAll("."+is).length,s=this.previousPane.classList.contains(ea)&&!this.previousPane.classList.contains(is)&&!this.nextPane.classList.contains(is)&&this.nextPane.nextElementSibling.classList.contains(nC)&&!this.nextPane.nextElementSibling.classList.contains(ea)&&!this.nextPane.nextElementSibling.classList.contains(is)&&i!==this.allPanes.length-2||this.nextPane.classList.contains(is)&&!this.previousPane.classList.contains(ea)&&this.nextPane.classList.contains(ea),r=[is,U5];this.nextPane.classList.contains(is)?(Y([this.previousPane],Bh),Y([this.nextPane],r),this.collapseFlag||this.updatePaneSettings(this.nextPaneIndex,!1)):(Y([this.previousPane],Bh),Y([this.nextPane],r),j([this.nextPane],Bh),j([this.previousPane],r),this.collapseFlag||this.updatePaneSettings(this.prevPaneIndex,!0)),this.updateIconsOnCollapse(t),this.previousPane.setAttribute("aria-expanded","false"),this.nextPane.setAttribute("aria-expanded","true"),this.updateFlexGrow(this.checkStaticPanes()),s&&(this.nextPane.classList.remove(Bh),this.nextPane.style.flexGrow="")}removeStaticPanes(){for(let t=0;t<this.allPanes.length;t++)m(this.paneSettings[t].size)&&this.allPanes[t].classList.remove(ea)}beforeAction(t){return{element:this.element,event:t,pane:[this.previousPane,this.nextPane],index:[this.prevPaneIndex,this.nextPaneIndex],separator:this.currentSeparator,cancel:!1}}updatePaneSettings(t,i){const s=this.paneSettings;s[t].collapsed=i,this.setProperties({paneSettings:s},!0)}splitterProperty(){this.splitInstance={currentBarIndex:this.currentBarIndex,nextPaneCollapsible:this.nextPane.classList.contains(cO),prevPaneCollapsible:this.previousPane.classList.contains(cO),prevPaneExpanded:this.previousPane.classList.contains(Bh),nextPaneExpanded:this.nextPane.classList.contains(Bh),nextPaneCollapsed:this.nextPane.classList.contains(is),prevPaneCollapsed:this.previousPane.classList.contains(is),nextPaneIndex:this.getNextPaneIndex(),prevPaneIndex:this.getPreviousPaneIndex(),nextPaneNextEle:this.nextPane.nextElementSibling,prevPanePreEle:this.previousPane.previousElementSibling}}showCurrentBarIcon(){Y([X("."+this.arrow,this.currentSeparator)],El)}updateIconsOnExpand(t){this.splitterProperty(),j([t.target],El),this.splitInstance.prevPaneExpanded||this.splitInstance.nextPaneCollapsed?this.splitInstance.prevPaneExpanded&&this.splitInstance.nextPaneCollapsed&&(this.resizableModel(this.currentBarIndex,!1),this.resizableModel(this.currentBarIndex+1,!1),this.paneSettings[this.nextPaneIndex].collapsible&&this.showCurrentBarIcon(),m(this.nextBar)||this.hideTargetBarIcon(this.nextBar,this.arrow),this.nextPane&&this.nextPaneIndex===this.allPanes.length-1&&!this.paneSettings[this.nextPaneIndex].collapsible&&this.splitInstance.nextPaneCollapsed&&this.hideTargetBarIcon(this.currentSeparator,this.arrow),this.nextPaneIndex!==this.allPanes.length-1&&this.nextPane.nextElementSibling&&this.nextPane.classList.contains(is)&&!this.nextPane.nextElementSibling.classList.contains(is)&&this.paneSettings[this.nextPaneIndex].collapsible&&this.showTargetBarIcon(this.nextBar,this.rightArrow)):(this.paneSettings[this.prevPaneIndex].collapsible&&this.showCurrentBarIcon(),this.paneSettings[this.nextPaneIndex].collapsible&&Y([t.target],El),this.paneSettings[this.currentBarIndex].resizable&&this.resizableModel(this.currentBarIndex,!0),m(this.prevBar)||this.splitInstance.prevPanePreEle.classList.contains(is)?(this.previousPane.previousElementSibling&&this.paneSettings[this.prevPaneIndex].collapsible&&this.previousPane.previousElementSibling.classList.contains(is)&&this.paneSettings[this.prevPaneIndex-1].collapsible&&this.showTargetBarIcon(this.prevBar,this.rightArrow),this.paneSettings[this.currentBarIndex+1].collapsible||this.hideTargetBarIcon(this.currentSeparator,this.rightArrow)):(this.paneSettings[this.currentBarIndex-1].resizable&&this.resizableModel(this.currentBarIndex-1,!0),this.paneSettings[this.prevPaneIndex].collapsible&&this.showTargetBarIcon(this.prevBar,this.rightArrow),this.paneSettings[this.currentBarIndex-1].collapsible||this.hideTargetBarIcon(this.prevBar,this.arrow),this.paneSettings[this.currentBarIndex].collapsible&&!this.paneSettings[this.currentBarIndex+1].collapsible&&this.hideTargetBarIcon(this.currentSeparator,this.rightArrow)))}afterAction(t){return{element:this.element,event:t,pane:[this.previousPane,this.nextPane],index:[this.prevPaneIndex,this.nextPaneIndex],separator:this.currentSeparator}}currentIndex(t){this.currentBarIndex=this.getOrderIndex(parseInt(t.target.parentElement.style.order,10),"splitbar")}getSeparatorIndex(t){let i=[].slice.call(this.allBars);return i=this.enableReversePanes?i.reverse():i,i.indexOf(t)}getPrevBar(t){return this.allBars[t-1]}getNextBar(t){return this.allBars[t+1]}updateBars(t){this.prevBar=this.getPrevBar(t),this.nextBar=this.getNextBar(t)}splitterDetails(t){this.arrow="Horizontal"===this.orientation?t.target.classList.contains(uC)?hC:uC:t.target.classList.contains(dC)?pC:dC,this.updateCurrentSeparator(t.target),this.currentIndex(t),this.updateBars(this.currentBarIndex),this.getPaneDetails()}triggerResizing(t){this.trigger("resizing",{element:this.element,event:t,pane:[this.previousPane,this.nextPane],index:[this.prevPaneIndex,this.nextPaneIndex],paneSize:[this.prePaneDimenson,this.nextPaneDimension],separator:this.currentSeparator})}onMouseDown(t){t.preventDefault();const i=t.target;if(i.classList.contains(cC))return;this.updateCurrentSeparator(i),j([this.currentSeparator],jy),this.updateCursorPosition(t,"previous"),this.getPaneDetails();const s={element:this.element,event:t,pane:[this.previousPane,this.nextPane],index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()],separator:this.currentSeparator,cancel:!1};for(let r=0;r<this.element.querySelectorAll("iframe").length;r++)this.element.querySelectorAll("iframe")[r].style.pointerEvents="none";this.trigger("resizeStart",s,r=>{r.cancel||(this.wireResizeEvents(),this.checkPaneSize(t))})}updatePaneFlexBasis(t){let i;return i=t.style.flexBasis.indexOf("%")>0?this.removePercentageUnit(t.style.flexBasis):this.convertPixelToPercentage(""!==t.style.flexBasis?this.convertPixelToNumber(t.style.flexBasis):"Horizontal"===this.orientation?t.offsetWidth:t.offsetHeight),i}removePercentageUnit(t){return parseFloat(t.slice(0,t.indexOf("%")))}convertPercentageToPixel(t,i){const s=t.toString();let r;if(s.indexOf("%")>-1){let o;r=parseFloat(s.slice(0,s.indexOf("%"))),o=m(i)?"Horizontal"===this.orientation?this.element.offsetWidth:this.element.offsetHeight:this.panesDimensions[this.allPanes.indexOf(i)],r=Math.ceil(o*(r/100))}else r=parseInt(s,10);return r}convertPixelToPercentage(t){return t/("Horizontal"===this.orientation?this.element.offsetWidth:this.element.offsetHeight)*100}convertPixelToNumber(t){return t.indexOf("p")>-1?parseFloat(t.slice(0,t.indexOf("p"))):parseFloat(t)}calcDragPosition(t,i){let r;return r=("Horizontal"===this.orientation?this.currentCoordinates.x-t:this.currentCoordinates.y-t)/i,r=r>1?1:r<0?0:r,r*i}getSeparatorPosition(t){this.updateCursorPosition(t,"current");const i="Horizontal"===this.orientation?this.element.getBoundingClientRect().left+window.scrollX:this.element.getBoundingClientRect().top+window.scrollY;return this.calcDragPosition(i,"Horizontal"===this.orientation?this.element.offsetWidth:this.element.offsetHeight)}getMinMax(t,i,s){const r="min"===s?0:null;let o=null;return"min"===s?!m(this.paneSettings[t])&&!m(this.paneSettings[t].min)&&(o=this.paneSettings[t].min):!m(this.paneSettings[t])&&!m(this.paneSettings[t].max)&&(o=this.paneSettings[t].max),this.paneSettings.length>0&&!m(this.paneSettings[t])&&!m(o)?(o.indexOf("%")>0&&(o=this.convertPercentageToPixel(o).toString()),this.convertPixelToNumber(o)):r}getPreviousPaneIndex(){const t=this.enableReversePanes?parseInt(this.currentSeparator.style.order,10)+1:parseInt(this.currentSeparator.style.order,10)-1;return this.getOrderIndex(t,"pane")}getNextPaneIndex(){const t=this.enableReversePanes?parseInt(this.currentSeparator.style.order,10)-1:parseInt(this.currentSeparator.style.order,10)+1;return this.getOrderIndex(t,"pane")}getPaneDetails(){let t=null,i=null;this.order=parseInt(this.currentSeparator.style.order,10),this.allPanes.length>1&&(t=this.getPrevPane(this.order),i=this.getNextPane(this.order)),t&&i&&(this.previousPane=t,this.nextPane=i,this.prevPaneIndex=this.getPreviousPaneIndex(),this.nextPaneIndex=this.getNextPaneIndex())}getPaneHeight(t){return"Horizontal"===this.orientation?t.offsetWidth.toString():t.offsetHeight.toString()}isValidSize(t){let i=!1;return!m(this.paneSettings[t])&&!m(this.paneSettings[t].size)&&this.paneSettings[t].size.indexOf("%")>-1&&(i=!0),i}getPaneDimensions(){this.previousPaneHeightWidth=""===this.previousPane.style.flexBasis?this.getPaneHeight(this.previousPane):this.previousPane.style.flexBasis,this.nextPaneHeightWidth=""===this.nextPane.style.flexBasis?this.getPaneHeight(this.nextPane):this.nextPane.style.flexBasis,this.isValidSize(this.prevPaneIndex)&&(this.previousPaneHeightWidth=this.convertPercentageToPixel(this.previousPaneHeightWidth).toString(),this.updatePrePaneInPercentage=!0),this.isValidSize(this.nextPaneIndex)&&(this.nextPaneHeightWidth=this.convertPercentageToPixel(this.nextPaneHeightWidth).toString(),this.updateNextPaneInPercentage=!0),this.prePaneDimenson=this.convertPixelToNumber(this.previousPaneHeightWidth.toString()),this.nextPaneDimension=this.convertPixelToNumber(this.nextPaneHeightWidth.toString())}checkCoordinates(t,i){let s=!0;return(t===this.previousCoordinates.x||i===this.previousCoordinates.y)&&(s=!1),s}isCursorMoved(t){let i=!0;return i="mouse"===this.getEventType(t.type)||!m(t.pointerType)&&"mouse"===this.getEventType(t.pointerType)?this.checkCoordinates(t.pageX,t.pageY):"msie"!==Q.info.name?this.checkCoordinates(t.touches[0].pageX,t.touches[0].pageY):this.checkCoordinates(t.pageX,t.pageY),i}getBorder(){this.border=0,this.border="chrome"!==Q.info.name?this.border:"Horizontal"===this.orientation?(this.element.offsetWidth-this.element.clientWidth)/2:(this.element.offsetHeight-this.element.clientHeight)/2}onMouseMove(t){if(!this.isCursorMoved(t))return;this.getPaneDetails(),this.getPaneDimensions(),this.triggerResizing(t);const i=this.validateDraggedPosition(this.getSeparatorPosition(t),this.prePaneDimenson,this.nextPaneDimension);let s;this.getBorder(),s="Horizontal"===this.orientation?this.element.getBoundingClientRect().left+i-this.currentSeparator.getBoundingClientRect().left+this.border:this.element.getBoundingClientRect().top+i-this.currentSeparator.getBoundingClientRect().top+this.border,this.nextPaneHeightWidth="string"==typeof this.nextPaneHeightWidth&&this.nextPaneHeightWidth.indexOf("p")>-1?this.convertPixelToNumber(this.nextPaneHeightWidth):parseInt(this.nextPaneHeightWidth,10),this.prevPaneCurrentWidth=s+this.convertPixelToNumber(this.previousPaneHeightWidth),this.nextPaneCurrentWidth=this.nextPaneHeightWidth-s,this.validateMinMaxValues(),this.nextPaneCurrentWidth<0&&(this.nextPaneCurrentWidth=0),this.prevPaneCurrentWidth<0&&(this.prevPaneCurrentWidth=0),this.nextPaneCurrentWidth+this.prevPaneCurrentWidth>this.totalWidth&&(this.nextPaneCurrentWidth<this.prevPaneCurrentWidth?this.prevPaneCurrentWidth=this.prevPaneCurrentWidth-(this.nextPaneCurrentWidth+this.prevPaneCurrentWidth-this.totalWidth):this.nextPaneCurrentWidth=this.nextPaneCurrentWidth-(this.nextPaneCurrentWidth+this.prevPaneCurrentWidth-this.totalWidth)),this.nextPaneCurrentWidth+this.prevPaneCurrentWidth<this.totalWidth&&(this.nextPaneCurrentWidth=this.nextPaneCurrentWidth+(this.totalWidth-(this.nextPaneCurrentWidth+this.prevPaneCurrentWidth))),this.calculateCurrentDimensions(),this.addStaticPaneClass(),this.previousPane.style.flexBasis=this.prevPaneCurrentWidth,this.nextPane.style.flexBasis=this.nextPaneCurrentWidth,this.allPanes.length>2||this.updateSplitterSize()}validateMinRange(t,i,s){let o,u,r=null,a=0;return!m(this.paneSettings[t])&&!m(this.paneSettings[t].min)&&(r=this.paneSettings[t].min.toString()),m(r)||(r.indexOf("%")>0&&(r=this.convertPercentageToPixel(r).toString()),o=this.convertPixelToNumber(r),i<o&&(a=i-o<=0?0:i-o,this.totalWidth=this.totalWidth-a,this.totalPercent=this.convertPixelToPercentage(this.totalWidth),u=o)),m(u)?i:u}validateMaxRange(t,i,s){let o,a,r=null;return!m(this.paneSettings[t])&&!m(this.paneSettings[t].max)&&(r=this.paneSettings[t].max.toString()),m(r)||(r.indexOf("%")>0&&(r=this.convertPercentageToPixel(r).toString()),o=this.convertPixelToNumber(r),i>o&&(this.totalWidth=this.totalWidth-(i-o),this.totalPercent=this.convertPixelToPercentage(this.totalWidth),a=o)),m(a)?i:a}validateMinMaxValues(){this.prevPaneCurrentWidth=this.validateMinRange(this.prevPaneIndex,this.prevPaneCurrentWidth,this.previousPane),this.nextPaneCurrentWidth=this.validateMinRange(this.nextPaneIndex,this.nextPaneCurrentWidth,this.nextPane),this.prevPaneCurrentWidth=this.validateMaxRange(this.prevPaneIndex,this.prevPaneCurrentWidth,this.previousPane),this.nextPaneCurrentWidth=this.validateMaxRange(this.nextPaneIndex,this.nextPaneCurrentWidth,this.nextPane)}equatePaneWidths(){let t;this.prevPaneCurrentWidth+this.nextPaneCurrentWidth>this.totalPercent&&(t=this.prevPaneCurrentWidth+this.nextPaneCurrentWidth-this.totalPercent,this.prevPaneCurrentWidth=this.prevPaneCurrentWidth-t/2+"%",this.nextPaneCurrentWidth=this.nextPaneCurrentWidth-t/2+"%"),this.prevPaneCurrentWidth+this.nextPaneCurrentWidth<this.totalPercent&&(t=this.totalPercent-(this.prevPaneCurrentWidth+this.nextPaneCurrentWidth),this.prevPaneCurrentWidth=this.prevPaneCurrentWidth+t/2+"%",this.nextPaneCurrentWidth=this.nextPaneCurrentWidth+t/2+"%")}calculateCurrentDimensions(){this.updatePrePaneInPercentage||this.updateNextPaneInPercentage?(this.prevPaneCurrentWidth=Math.round(Number(Math.round(10*this.convertPixelToPercentage(this.prevPaneCurrentWidth))/10)),this.nextPaneCurrentWidth=Math.round(Number(Math.round(10*this.convertPixelToPercentage(this.nextPaneCurrentWidth))/10)),0===this.prevPaneCurrentWidth&&(this.nextPaneCurrentWidth=this.totalPercent),0===this.nextPaneCurrentWidth&&(this.prevPaneCurrentWidth=this.totalPercent),this.prevPaneCurrentWidth+this.nextPaneCurrentWidth!==this.totalPercent?this.equatePaneWidths():(this.prevPaneCurrentWidth=this.prevPaneCurrentWidth+"%",this.nextPaneCurrentWidth=this.nextPaneCurrentWidth+"%"),this.prevPaneCurrentWidth=this.updatePrePaneInPercentage?this.prevPaneCurrentWidth:this.convertPercentageToPixel(this.prevPaneCurrentWidth)+"px",this.nextPaneCurrentWidth=this.updateNextPaneInPercentage?this.nextPaneCurrentWidth:this.convertPercentageToPixel(this.nextPaneCurrentWidth)+"px",this.updatePrePaneInPercentage=!1,this.updateNextPaneInPercentage=!1):(this.prevPaneCurrentWidth=this.prevPaneCurrentWidth+"px",this.nextPaneCurrentWidth=this.nextPaneCurrentWidth+"px")}addStaticPaneClass(){this.previousPane.classList.contains(ea)||this.previousPane.classList.add(ea),this.nextPane.classList.contains(ea)||this.nextPane.classList.add(ea)}validateDraggedPosition(t,i,s){const r="Horizontal"===this.orientation?this.currentSeparator.offsetLeft+window.scrollX:this.currentSeparator.offsetTop,o=r-i,a=s+r,u=this.getMinMax(this.prevPaneIndex,this.previousPane,"min"),p=this.getMinMax(this.nextPaneIndex,this.nextPane,"min"),y=this.getMinMax(this.prevPaneIndex,this.previousPane,"max"),E=this.getMinMax(this.nextPaneIndex,this.nextPane,"max");let _=t;return t>a-p?_=a-p:t<o+u&&(_=o+u),m(y)?m(E)||t<a-E&&(_=a-E):t>o+y&&(_=o+y),_}onMouseUp(t){Y([this.currentSeparator],jy),this.unwireResizeEvents();const i={event:t,element:this.element,pane:[this.previousPane,this.nextPane],index:[this.prevPaneIndex,this.nextPaneIndex],separator:this.currentSeparator,paneSize:[this.prePaneDimenson,this.nextPaneDimension]};for(let s=0;s<this.element.querySelectorAll("iframe").length;s++)this.element.querySelectorAll("iframe")[s].style.pointerEvents="auto";if(this.trigger("resizeStop",i),this.enablePersistence){const s=this.paneSettings;s[this.getPreviousPaneIndex()].size=this.allPanes[this.getPreviousPaneIndex()].style.flexBasis,s[this.getNextPaneIndex()].size=this.allPanes[this.getNextPaneIndex()].style.flexBasis,this.setProperties({paneSettings:s},!0)}}panesDimension(t,i){const s=i.length;let r;parseInt(this.getHeight(this.element),10),m(this.paneSettings[t])?It(i[t],{order:2*t}):m(this.paneSettings[t].size)?(this.sizeFlag=!0,It(i[t],{order:2*t})):(r=this.paneSettings[t].size,t<s&&(It(i[t],{"flex-basis":r,order:2*t}),t<s-1&&""!==this.paneSettings[t].size?j([i[t]],ea):this.sizeFlag||(i[t].style.flexBasis=null),t===s-1&&this.sizeFlag&&""!==this.paneSettings[t].size&&j([i[t]],ea))),this.paneOrder.push(2*t)}setTemplate(t,i){i.innerHTML="",t="string"==typeof t?this.sanitizeHelper(t):t,this.templateCompile(i,t),this.isReact&&this.renderReactTemplates()}templateCompile(t,i){const s=this.createElement("div");this.compileElement(s,i,"content"),0!==s.childNodes.length&&[].slice.call(s.childNodes).forEach(r=>{t.appendChild(r)})}compileElement(t,i,s){if("string"==typeof i)if("."===i[0]||"#"===i[0]){const a=document.querySelector(i);if(!m(a))return this.templateElement.push(a),"none"===a.style.display&&a.style.removeProperty("display"),""===a.getAttribute("style")&&a.removeAttribute("style"),void t.appendChild(a);i=i.trim()}else i=i.trim();let r,o;r=m(i.outerHTML)?xs(i):xs(i.outerHTML),m(r)||(o=r({},this,s,this.element.id+"content"+this.allPanes.length.toString(),!0)),!m(r)&&o&&o.length>0&&[].slice.call(o).forEach(a=>{t.appendChild(a)})}paneCollapsible(t,i){this.paneSettings[i].collapsible?j([t],cO):Y([t],cO)}createSplitPane(t){let i=t.children.length;for(let r=0;r<this.paneSettings.length;r++)if(i<this.paneSettings.length){const o=this.createElement("div");this.element.appendChild(o),i+=1}i=t.children.length;const s=[].slice.call(t.children);if(this.sizeFlag=!1,i>0)for(let r=0;r<i;r++)("DIV"===s[r].nodeName||"SPAN"===s[r].nodeName)&&(this.allPanes.push(s[r]),"Horizontal"===this.orientation?(j([s[r]],[nC,rC,aO]),this.panesDimension(r,s)):(j([s[r]],[nC,oC,aO]),this.panesDimension(r,s)),!m(this.paneSettings[r])&&!m(this.paneSettings[r].content)&&this.setTemplate(this.paneSettings[r].content,s[r]),!m(this.paneSettings[r])&&this.paneSettings[r].cssClass&&this.setCssClass(s[r],this.paneSettings[r].cssClass),m(this.paneSettings[r])||this.paneCollapsible(s[r],r))}expand(t){this.collapsedOnchange(t),this.updatePaneSettings(t,!1)}collapse(t){this.isCollapsed(t),this.updatePaneSettings(t,!0)}destroy(){if(!this.isDestroyed){for(super.destroy(),O.remove(document,"touchstart click",this.onDocumentClick),this.element.ownerDocument.defaultView.removeEventListener("resize",this.onReportWindowSize,!0);this.element.attributes.length>0;)this.element.removeAttribute(this.element.attributes[0].name);this.element.innerHTML=this.wrapper.innerHTML;for(let t=0;t<this.wrapper.attributes.length;t++)this.element.setAttribute(this.wrapper.attributes[t].name,this.wrapper.attributes[t].value);this.refreshing&&(j([this.element],["e-control","e-lib",oO]),this.allBars=[],this.allPanes=[]),this.restoreElem(),this.isReact&&this.clearTemplate()}}restoreElem(){if(this.templateElement.length>0)for(let t=0;t<this.templateElement.length;t++)this.templateElement[t].style.display="none",document.body.appendChild(this.templateElement[t])}addPaneClass(t){return j([t],"Horizontal"===this.orientation?[nC,rC,aO]:[nC,oC,aO]),t}removePaneOrders(t){const i=this.element.childNodes,s=[];for(let r=0;i.length<0;r++)i[r].classList.contains(t)&&s.push(i[r]);for(let r=0;r<s.length;r++)s[r].style.removeProperty("order")}setPaneOrder(){for(let t=0;t<this.allPanes.length;t++)this.panesDimension(t,this.allPanes)}removeSeparator(){for(let t=0;t<this.allBars.length;t++)ye(this.allBars[t]);this.allBars=[]}updatePanes(){this.setPaneOrder(),this.removeSeparator(),this.addSeparator(this.element)}addPane(t,i){let s=this.createElement("div");s=this.addPaneClass(s),i=i>this.allPanes.length+1?this.allPanes.length:i;const r={size:m(t.size)?"":t.size,min:m(t.min)?null:t.min,max:m(t.max)?null:t.max,content:m(t.content)?"":t.content,resizable:!!m(t.resizable)||t.resizable,collapsible:!m(t.collapsible)&&t.collapsible,collapsed:!m(t.collapsed)&&t.collapsed,cssClass:m(t.cssClass)?"":t.cssClass};this.paneSettings.splice(i,0,r),this.setProperties({paneSettings:this.paneSettings},!0),"Horizontal"===this.orientation?(this.element.insertBefore(s,this.element.querySelectorAll("."+rC)[i]),this.removePaneOrders(rC)):(this.element.insertBefore(s,this.element.querySelectorAll("."+oC)[i]),this.removePaneOrders(oC)),this.allPanes.splice(i,0,s),this.updatePanes(),this.setTemplate(this.paneSettings[i].content,s),this.setCssClass(this.allPanes[i],t.cssClass),this.allPanes[this.allPanes.length-1].classList.remove(ea)}removePane(t){t=t>this.allPanes.length+1?this.allPanes.length:t;const i="Horizontal"===this.orientation?rC:oC;m(this.element.querySelectorAll("."+i)[t])||(ye(this.element.querySelectorAll("."+i)[t]),this.allPanes.splice(t,1),this.removePaneOrders(i),this.updatePanes(),this.paneSettings.splice(t,1),this.setProperties({paneSettings:this.paneSettings},!0),this.allPanes.length>0&&this.allPanes[this.allPanes.length-1].classList.remove(ea))}};return Gn([A("100%")],n.prototype,"height",void 0),Gn([A(!1)],n.prototype,"enableReversePanes",void 0),Gn([A("100%")],n.prototype,"width",void 0),Gn([A(!1)],n.prototype,"enablePersistence",void 0),Gn([cl([],BZ)],n.prototype,"paneSettings",void 0),Gn([A("Horizontal")],n.prototype,"orientation",void 0),Gn([A("")],n.prototype,"cssClass",void 0),Gn([A(!0)],n.prototype,"enabled",void 0),Gn([A(!0)],n.prototype,"enableHtmlSanitizer",void 0),Gn([A(null)],n.prototype,"separatorSize",void 0),Gn([Z()],n.prototype,"beforeSanitizeHtml",void 0),Gn([Z()],n.prototype,"created",void 0),Gn([Z()],n.prototype,"resizeStart",void 0),Gn([Z()],n.prototype,"resizing",void 0),Gn([Z()],n.prototype,"resizeStop",void 0),Gn([Z()],n.prototype,"beforeCollapse",void 0),Gn([Z()],n.prototype,"beforeExpand",void 0),Gn([Z()],n.prototype,"collapsed",void 0),Gn([Z()],n.prototype,"expanded",void 0),n=Gn([ts],n),n})();var Rs=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const e2="e-prevent",hO="e-dragging",uO="e-drag",t2="e-responsive",z5="e-panel-content",W5="e-panel-container",q5="e-panel-header";class $a extends Is{}Rs([A("")],$a.prototype,"id",void 0),Rs([A("")],$a.prototype,"cssClass",void 0),Rs([A("")],$a.prototype,"header",void 0),Rs([A("")],$a.prototype,"content",void 0),Rs([A(!0)],$a.prototype,"enabled",void 0),Rs([A(0)],$a.prototype,"row",void 0),Rs([A(0)],$a.prototype,"col",void 0),Rs([A(1)],$a.prototype,"sizeX",void 0),Rs([A(1)],$a.prototype,"sizeY",void 0),Rs([A(1)],$a.prototype,"minSizeY",void 0),Rs([A(1)],$a.prototype,"minSizeX",void 0),Rs([A(null)],$a.prototype,"maxSizeY",void 0),Rs([A(null)],$a.prototype,"maxSizeX",void 0),Rs([A(1e3)],$a.prototype,"zIndex",void 0);let mr=class extends Ls{constructor(e,t){super(e,t),this.rows=1,this.panelID=0,this.movePanelCalled=!1,this.resizeCalled=!1,this.mOffX=0,this.mOffY=0,this.maxTop=9999,this.maxRows=100,this.mouseX=0,this.mouseY=0,this.minTop=0,this.minLeft=0,this.isInlineRendering=!1,this.removeAllCalled=!1,this.isPanelRemoved=!1,this.panelsSizeY=0,this.resizeHeight=!1,pi("mergePersistData",this.mergePersistPanelData,this)}preRender(){this.panelCollection=[],this.sortedArray=[],this.gridPanelCollection=[],this.overlapElement=[],this.overlapElementClone=[],this.overlapSubElementClone=[],this.collisionChecker={},this.dragCollection=[],this.elementRef={top:"",left:"",height:"",width:""},this.dimensions=[],this.allItems=[],this.oldRowCol={},this.availableClasses=[],this.setOldRowCol(),this.calculateCellSize(),this.contentTemplateChild=[].slice.call(this.element.children)}setOldRowCol(){for(let e=0;e<this.panels.length;e++)this.panels[e].id||(this.panelPropertyChange(this.panels[e],{id:"layout_"+this.panelID.toString()}),this.panelID=this.panelID+1),this.oldRowCol[this.panels[e].id]={row:this.panels[e].row,col:this.panels[e].col}}createPanelElement(e,t){const i=this.createElement("div");return e&&e.length>0&&j([i],e),t&&i.setAttribute("id",t),i}render(){this.initialize(),this.isRenderComplete=!0,this.showGridLines&&!this.checkMediaQuery()&&this.initGridLines(),this.updateDragArea(),this.renderComplete(),this.renderReactTemplates()}initGridLines(){this.table=document.createElement("table");const e=document.createElement("tbody");this.table.classList.add("e-dashboard-gridline-table");for(let t=0;t<this.maxRow();t++){const i=document.createElement("tr");for(let s=0;s<this.columns;s++){const r=document.createElement("td");r.classList.add("e-dashboard-gridline"),this.setAttributes({value:{row:t.toString(),col:s.toString(),sizeX:"1",sizeY:"1"}},r),r.setAttribute("id",""+s),this.setPanelPosition(r,t,s),this.setHeightAndWidth(r,{row:t,col:s,sizeX:1,sizeY:1}),i.appendChild(r)}e.appendChild(i)}this.table.appendChild(e),this.element.appendChild(this.table),this.renderReactTemplates()}initialize(){if(this.updateRowHeight(),this.element.childElementCount>0&&this.element.querySelectorAll(".e-panel").length>0){const e=[];this.setProperties({panels:[]},!0),this.isInlineRendering=!0;for(let t=0;t<this.element.querySelectorAll(".e-panel").length;t++)e.push(this.element.querySelectorAll(".e-panel")[t]);for(let t=0;t<e.length;t++){const i=e[t];this.enableRtl&&j([i],"e-rtl"),this.getInlinePanels(i),this.maxCol(),this.maxRow()}for(let t=0;t<this.panels.length;t++){const i=this.element.querySelector("#"+this.panels[t].id);if(this.setMinMaxValues(this.panels[t]),this.maxColumnValue<this.panels[t].col||this.maxColumnValue<this.panels[t].col+this.panels[t].sizeX){const r=this.maxColumnValue-this.panels[t].sizeX;this.panelPropertyChange(this.panels[t],{col:r<0?0:r})}this.setXYAttributes(i,this.panels[t]);const s=this.renderPanels(i,this.panels[t],this.panels[t].id,!1);this.panelCollection.push(s),this.setHeightAndWidth(i,this.panels[t]),this.tempObject=this,this.mediaQuery&&!window.matchMedia("("+this.mediaQuery+")").matches&&(this.setPanelPosition(i,this.panels[t].row,this.panels[t].col),this.mainElement=i,this.updatePanelLayout(i,this.panels[t]),this.mainElement=null),this.setClasses([i])}this.updateOldRowColumn(),this.checkMediaQuery()&&this.checkMediaQuerySizing()}else this.renderDashBoardCells(this.panels);this.allowDragging&&(!this.mediaQuery||!window.matchMedia("("+this.mediaQuery+")").matches)&&this.enableDraggingContent(this.panelCollection),this.sortedPanel(),this.bindEvents(),this.updatePanels(),this.updateCloneArrayObject(),this.checkColumnValue=this.maxColumnValue,this.checkMediaQuery()||this.panelResponsiveUpdate(),this.setEnableRtl()}checkMediaQuery(){return this.mediaQuery&&window.matchMedia("("+this.mediaQuery+")").matches}calculateCellSize(){this.cellSize=[],this.checkMediaQuery()?this.cellSize[1]=this.element.parentElement&&this.element.parentElement.offsetWidth/this.cellAspectRatio:(this.cellSize[0]=this.element.parentElement&&this.element.parentElement.offsetWidth,this.cellSize[0]=this.element.parentElement&&(this.element.parentElement.offsetWidth-(this.maxCol()-1)*this.cellSpacing[0])/this.maxCol(),this.cellSize[1]=this.cellSize[0]/this.cellAspectRatio)}maxRow(e){let t=1;if(this.rows>1&&m(e))return t=this.rows,t;for(let i=0;i<this.panels.length;i++)this.panels[i].sizeY+this.panels[i].row>t&&(t=this.panels[i].sizeY+this.panels[i].row);return 0===this.panels.length&&(t=this.columns),t}maxCol(){let e=1;return e=this.columns,this.maxColumnValue=e,e}updateOldRowColumn(){for(let e=0;e<this.panels.length;e++){const t=this.panels[e].id;if(document.getElementById(t)){const i=parseInt(document.getElementById(t).getAttribute("data-row"),10),s=parseInt(document.getElementById(t).getAttribute("data-col"),10);this.oldRowCol[this.panels[e].id]={row:i,col:s}}}}createSubElement(e,t,i){const s=this.createElement("div");return i&&j([s],[i]),e&&e.length>0&&j([s],e),t&&s.setAttribute("id",t),s}templateParser(e){if(e)try{if(document.querySelectorAll(e).length)return xs(document.querySelector(e).innerHTML.trim())}catch(t){const i=_n.sanitize(e);return xs(this.enableHtmlSanitizer&&"string"==typeof e?i:e)}}renderTemplate(e,t,i,s,r){const o=this.templateParser(e),a=[];if("."!==e[0]&&"#"!==e[0]||"SCRIPT"===document.querySelector(e).tagName){const u=o({},this,r,i,s,null,t);if(u){for(const p of u)a.push(p);Pi([].slice.call(a),t)}}else{const u=document.querySelector(e);if(!m(u))return"none"===u.style.display&&u.style.removeProperty("display"),""===u.getAttribute("style")&&u.removeAttribute("style"),void t.appendChild(u);e=e.trim()}}renderPanels(e,t,i,s){j([e],["e-panel","e-panel-transition"]);const r=t.cssClass?t.cssClass.split(" "):null;if(this.panelContent=e.querySelector(".e-panel-container")?e.querySelector(".e-panel-container"):this.createSubElement(r,e.id+"_content",W5),e.appendChild(this.panelContent),t.enabled||this.disablePanel(e),t.header){const o=e.querySelector(".e-panel-header")?e.querySelector(".e-panel-header"):this.createSubElement([],e.id+"template","");j([o],[q5]),e.querySelector(".e-panel-header")||(this.renderTemplate(t.header,o,this.element.id+"HeaderTemplate"+i,s,"header"),this.panelContent.appendChild(o),this.renderReactTemplates())}if(t.content){const o=t.cssClass?t.cssClass.split(" "):null;this.panelBody=e.querySelector(".e-panel-content")?e.querySelector(".e-panel-content"):this.createSubElement(o,e.id+"_body",z5);const a=this.panelContent.querySelector(".e-panel-header")?window.getComputedStyle(this.panelContent.querySelector(".e-panel-header")).height:"0px";It(this.panelBody,{height:"calc( 100% - "+a+")"}),e.querySelector(".e-panel-content")||(this.renderTemplate(t.content,this.panelBody,this.element.id+"ContentTemplate"+i,s,"content"),this.panelContent.appendChild(this.panelBody),this.renderReactTemplates())}return e}disablePanel(e){j([e],["e-disabled"])}getInlinePanels(e){const t={sizeX:e.hasAttribute("data-sizex")?parseInt(e.getAttribute("data-sizex"),10):1,sizeY:e.hasAttribute("data-sizey")?parseInt(e.getAttribute("data-sizey"),10):1,minSizeX:e.hasAttribute("data-minsizex")?parseInt(e.getAttribute("data-minsizex"),10):1,minSizeY:e.hasAttribute("data-minsizey")?parseInt(e.getAttribute("data-minsizey"),10):1,maxSizeX:e.hasAttribute("data-maxsizex")?parseInt(e.getAttribute("data-maxsizex"),10):null,maxSizeY:e.hasAttribute("data-maxsizey")?parseInt(e.getAttribute("data-maxsizey"),10):null,row:e.hasAttribute("data-row")?parseInt(e.getAttribute("data-row"),10):0,col:e.hasAttribute("data-col")?parseInt(e.getAttribute("data-col"),10):0,id:e.getAttribute("id"),zIndex:e.hasAttribute("data-zindex")?parseInt(e.getAttribute("data-zIndex"),10):1e3,header:e.querySelector(".e-panel-header")&&".e-panel-header",content:e.querySelector(".e-panel-content")&&".e-panel-content"};t.id||(t.id="layout_"+this.panelID.toString(),e.setAttribute("id",t.id),this.panelID=this.panelID+1),Jt(t.enabled)&&(t.enabled=!0),e.style.zIndex=""+t.zIndex;const i=new $a(this,"panels",t,!0);this.panels.push(i)}resizeEvents(){if(this.allowResizing){const e=this.element.querySelectorAll(".e-panel .e-panel-container .e-resize");for(let t=0;t<e.length;t++)O.add(e[t],"msie"===Q.info.name?"mousedown pointerdown":"mousedown",this.downResizeHandler,this),"msie"!==Q.info.name&&O.add(e[t],"touchstart",this.touchDownResizeHandler,this)}}bindEvents(){this.refreshListener=this.refresh.bind(this),O.add(window,"resize",this.refreshListener),this.resizeEvents()}downResizeHandler(e){this.downHandler(e),this.lastMouseX=e.pageX,this.lastMouseY=e.pageY;const i="msie"===Q.info.name?"mouseup pointerup":"mouseup";this.isMouseMoveBound||(O.add(document,"msie"===Q.info.name?"mousemove pointermove":"mousemove",this.moveResizeHandler,this),this.isMouseMoveBound=!0),this.isMouseUpBound||(O.add(document,i,this.upResizeHandler,this),this.isMouseUpBound=!0)}downHandler(e){this.resizeCalled=!1,this.panelsInitialModel=this.cloneModels(this.panels);const t=ae(e.currentTarget,".e-panel");this.trigger("resizeStart",{event:e,element:t,isInteracted:!0}),this.downTarget=e.currentTarget,this.shadowEle=document.createElement("div"),this.shadowEle.classList.add("e-holder"),j([this.element],[e2]),this.element.appendChild(this.shadowEle),this.renderReactTemplates(),this.elementX=parseFloat(t.style.left),this.elementY=parseFloat(t.style.top),this.elementWidth=t.offsetWidth,this.elementHeight=t.offsetHeight,this.originalWidth=this.getCellInstance(t.id).sizeX,this.originalHeight=this.getCellInstance(t.id).sizeY,this.previousRow=this.getCellInstance(t.id).row}touchDownResizeHandler(e){this.downHandler(e),this.lastMouseX=e.changedTouches[0].pageX,this.lastMouseY=e.changedTouches[0].pageY,this.isMouseMoveBound||(O.add(document,"touchmove",this.touchMoveResizeHandler,this),this.isMouseMoveBound=!0),this.isMouseUpBound||(O.add(document,"touchend",this.upResizeHandler,this),this.isMouseUpBound=!0)}getCellSize(){return[this.cellSize[0],this.cellSize[1]]}updateMaxTopLeft(e){this.moveTarget=this.downTarget;const t=ae(this.moveTarget,".e-panel");this.trigger("resize",{event:e,element:t,isInteracted:!0})}updateResizeElement(e){this.maxLeft=this.element.offsetWidth-1,this.maxTop=this.cellSize[1]*this.maxRows-1,Y([e],"e-panel-transition"),j([e],[hO]);const t=["e-east","e-west","e-north","e-south","e-south-east","e-north-east","e-north-west","e-south-west"];for(let i=0;i<this.moveTarget.classList.length;i++)-1!==t.indexOf(this.moveTarget.classList[i])&&(this.handleClass=this.moveTarget.classList[i])}moveResizeHandler(e){this.updateMaxTopLeft(e);const t=ae(this.moveTarget,".e-panel");if(this.lastMouseX===e.pageX||this.lastMouseY===e.pageY)return;this.updateResizeElement(t);const i=this.getCellInstance(t.getAttribute("id"));this.mouseX=e.pageX,this.mouseY=e.pageY;const s=this.mouseY-this.lastMouseY+this.mOffY,r=this.mouseX-this.lastMouseX+this.mOffX;this.mOffX=this.mOffY=0,this.lastMouseY=this.mouseY,this.lastMouseX=this.mouseX,this.resizingPanel(t,i,r,s)}touchMoveResizeHandler(e){this.updateMaxTopLeft(e);const t=ae(this.moveTarget,".e-panel");if(this.lastMouseX===e.changedTouches[0].pageX||this.lastMouseY===e.changedTouches[0].pageY)return;this.updateResizeElement(t);const i=this.getCellInstance(t.getAttribute("id"));this.mouseX=e.changedTouches[0].pageX,this.mouseY=e.changedTouches[0].pageY;const s=this.mouseX-this.lastMouseX+this.mOffX,r=this.mouseY-this.lastMouseY+this.mOffY;this.mOffX=this.mOffY=0,this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY,this.resizingPanel(t,i,s,r)}resizingPanel(e,t,i,s){let r=this.getCellInstance(e.id).sizeX,o=this.getCellInstance(e.id).sizeY;const a=s,u=i;this.handleClass.indexOf("north")>=0&&(this.elementHeight-a<this.getMinHeight(t)?(s=this.elementHeight-this.getMinHeight(t),this.mOffY=a-s):t.maxSizeY&&this.elementHeight-a>this.getMaxHeight(t)?(s=this.elementHeight-this.getMaxHeight(t),this.mOffY=a-s):this.elementY+a<this.minTop&&(this.mOffY=a-(s=this.minTop-this.elementY)),this.elementY+=s,this.elementHeight-=s),this.handleClass.indexOf("south")>=0&&(this.elementHeight+a<this.getMinHeight(t)?(s=this.getMinHeight(t)-this.elementHeight,this.mOffY=a-s):t.maxSizeY&&this.elementHeight+a>this.getMaxHeight(t)&&(s=this.getMaxHeight(t)-this.elementHeight,this.mOffY=a-s),this.elementHeight+=s),this.handleClass.indexOf("west")>=0&&(this.elementWidth-u<this.getMinWidth(t)?(i=this.elementWidth-this.getMinWidth(t),this.mOffX=u-i):t.maxSizeX&&this.elementWidth-u>this.getMaxWidth(t)?(i=this.elementWidth-this.getMaxWidth(t),this.mOffX=u-i):this.elementX+u<this.minLeft&&(this.mOffX=u-(i=this.minLeft-this.elementX)),this.elementX+=i,this.elementWidth-=i),this.handleClass.indexOf("east")>=0&&(this.elementWidth+u<this.getMinWidth(t)?(i=this.getMinWidth(t)-this.elementWidth,this.mOffX=u-i):t.maxSizeX&&this.elementWidth+u>this.getMaxWidth(t)&&(i=this.getMaxWidth(t)-this.elementWidth,this.mOffX=u-i),this.elementWidth+=i),e.style.top=this.elementY+"px",e.style.left=this.elementX+"px",e.style.width=this.elementWidth+"px",e.style.height=this.elementHeight+"px";const p=this.getResizeRowColumn(t);if(p.col+p.sizeX>this.columns&&this.panelPropertyChange(p,{sizeX:p.sizeX-1}),this.shadowEle.style.top=p.row*this.getCellSize()[1]+p.row*this.cellSpacing[1]+"px",this.shadowEle.style.left=p.col*this.getCellSize()[0]+p.col*this.cellSpacing[0]+"px",this.shadowEle.style.height=p.sizeY*(this.getCellSize()[1]+this.cellSpacing[1])+"px",this.shadowEle.style.width=p.sizeX*(this.getCellSize()[0]+this.cellSpacing[0])+"px",r!==p.sizeX||o!==p.sizeY){r=p.sizeX,o=p.sizeY;const y=this.getCellInstance(e.id),E={attributes:{row:y.row.toString(),col:y.col.toString(),sizeX:y.sizeX.toString(),sizeY:y.sizeY.toString()}};this.setAttributes(E,e),this.mainElement=e,this.updatePanelLayout(e,this.getCellInstance(e.id)),this.updateOldRowColumn(),this.sortedPanel()}}upResizeHandler(e){if(m(this.downTarget))return;this.upTarget=this.downTarget;const t=ae(this.upTarget,".e-panel"),i={event:e,element:t,isInteracted:!0};if(t){j([t],"e-panel-transition");const r="msie"===Q.info.name?"mouseup pointerup":"mouseup";O.remove(document,"msie"===Q.info.name?"mousemove pointermove":"mousemove",this.moveResizeHandler),O.remove(document,r,this.upResizeHandler),"msie"!==Q.info.name&&(O.remove(document,"touchmove",this.touchMoveResizeHandler),O.remove(document,"touchend",this.upResizeHandler)),this.isMouseUpBound=!1,this.isMouseMoveBound=!1,this.shadowEle&&ye(this.shadowEle),this.shadowEle=null;const o=this.getCellInstance(t.getAttribute("id"));this.setPanelPosition(t,o.row,o.col),this.setHeightAndWidth(t,o)}Y([t],[hO]),this.trigger("resizeStop",i),this.resizeCalled=!1,this.lastMouseX=this.lastMouseY=void 0,this.mOffX=this.mOffY=0,this.mainElement=null,this.allowFloating&&this.moveItemsUpwards(),this.updatePanels(),this.updateCloneArrayObject(),this.checkForChanges(!0)}getResizeRowColumn(e){let t=!1,i=e.col;-1!==["e-west","e-south-west"].indexOf(this.handleClass)&&(i=this.pixelsToColumns(this.elementX,!1));let s=e.row;-1!==["e-north"].indexOf(this.handleClass)&&(s=this.pixelsToRows(this.elementY,!1),this.previousRow!==s&&(this.previousRow=s,t=!0));let r=e.sizeX;-1===["e-north","e-south"].indexOf(this.handleClass)&&(r=this.pixelsToColumns(this.elementWidth-r*this.cellSpacing[1],!0));let o=e.sizeY;return-1===["e-east","e-west"].indexOf(this.handleClass)&&("e-north"!==this.handleClass||t)&&(o=this.pixelsToRows(this.elementHeight-o*this.cellSpacing[0],!0)),e.col+e.sizeX>this.columns&&(e.sizeX=e.sizeX-1),(s>-1&&i>-1&&r+i<=this.maxCol()&&o+s<=this.maxRow()&&0===this.collisions(s,i,r,o,this.getPanelBase(e.id)).length||!1!==this.allowPushing)&&this.panelPropertyChange(e,{row:s,col:i,sizeX:r,sizeY:o}),e}pixelsToColumns(e,t){const i=this.cellSize[0];return t?Math.ceil(e/i):Math.floor(e/i)}pixelsToRows(e,t){return Math.round(t?e/this.cellSize[1]:e/(this.cellSize[1]+this.cellSpacing[0]))}getMinWidth(e){return e.minSizeX*this.getCellSize()[0]}getMaxWidth(e){return e.maxSizeX*this.getCellSize()[0]}getMinHeight(e){return e.minSizeY*this.getCellSize()[1]}getMaxHeight(e){return e.maxSizeY*this.getCellSize()[1]}sortedPanel(){this.sortedArray=[];for(let e=0,t=this.panelCollection.length;e<t;++e)this.sortItem(this.panelCollection[e])}moveItemsUpwards(){if(!1!==this.allowFloating){for(let e=0,t=this.sortedArray.length;e<t;++e){const i=this.sortedArray[e];if(i)for(let s=0,r=i.length;s<r;++s){const o=i[s];o&&this.moveItemUpwards(o)}}this.updateGridLines()}}moveItemUpwards(e){if(!1===this.allowFloating||e===this.mainElement)return;const t=this.getCellInstance(e.id).col,i=parseInt(e.getAttribute("data-sizeY"),10),s=parseInt(e.getAttribute("data-sizeX"),10);let r=null,o=null,a=parseInt(e.getAttribute("data-row"),10)-1;for(;a>-1&&0===this.collisions(a,t,s,i,e).length;)r=a,o=t,--a;null!==r&&this.sortItem(e,r,o)}sortItem(e,t,i){this.overlapElement=[];const s=parseInt(e.getAttribute("data-col"),10),r=parseInt(e.getAttribute("data-row"),10);if(this.sortedArray[r]||(this.sortedArray[r]=[]),this.sortedArray[r][s]=e,void 0!==e&&void 0!==t&&void 0!==i){if(void 0!==this.oldRowCol[e.id]&&null!==this.oldRowCol[e.id].row&&void 0!==this.oldRowCol[e.id].col){const a=this.sortedArray[this.oldRowCol[e.id].row];this.oldRowCol[e.id]&&a[this.oldRowCol[e.id].col]===e&&(delete a[this.oldRowCol[e.id].col],this.updateOldRowColumn(),this.sortedPanel())}this.oldRowCol[e.id].row=t,this.oldRowCol[e.id].row=i,this.sortedArray[r]||(this.sortedArray[r]=[]),this.sortedArray[r][s]=e,-1===this.allItems.indexOf(e)&&this.allItems.push(e),this.panelPropertyChange(this.getCellInstance(e.id),{row:t,col:i});const o=this.getCellInstance(e.id);this.setAttributes({value:{col:o.col.toString(),row:o.row.toString()}},e),this.updateLayout(e,this.getCellInstance(e.id))}}updateLayout(e,t){this.setPanelPosition(e,t.row,t.col),this.setHeightAndWidth(e,t),this.updateRowHeight(),this.sortedPanel()}refresh(){if(this.panelsSizeY=0,this.updateDragArea(),this.checkMediaQuery())this.checkMediaQuerySizing();else{if(this.element.classList.contains(t2)){Y([this.element],[t2]);const e=this.element.querySelectorAll((this.element.id?"#"+this.element.id+" > ":"")+".e-panel");for(let t=0;t<e.length;t++){const i=e[t],s=this.getCellInstance(i.id),r=parseInt(i.getAttribute("data-row"),10),o=parseInt(i.getAttribute("data-col"),10);this.panelPropertyChange(s,{row:r,col:o}),this.setHeightAndWidth(i,this.getCellInstance(i.id)),this.setPanelPosition(i,r,o),this.updateRowHeight()}}this.panelResponsiveUpdate(),this.updateGridLines()}this.removeResizeClasses(this.panelCollection),this.setClasses(this.panelCollection),this.resizeEvents(),this.checkDragging(this.dragCollection)}updateGridLines(){this.element.querySelector(".e-dashboard-gridline-table")&&(this.table&&ye(this.table),this.initGridLines())}checkDragging(e){if(this.checkMediaQuery()||!this.allowDragging)for(let t=0;t<e.length;t++)e[t].destroy();else{for(let t=0;t<e.length;t++)e[t].destroy();this.enableDraggingContent(this.panelCollection)}}sortPanels(){const e=[];for(let t=0;t<=this.rows;t++)for(let i=0;i<this.columns;i++)this.panels.filter(s=>{s.row===t&&s.col===i&&e.push(s)});return e}checkMediaQuerySizing(){let e;j([this.element],[t2]),e=this.isPanelRemoved&&this.panels?this.panels:this.sortPanels(),this.updatedRows=e.length;for(let t=0;t<e.length;t++){const i=document.getElementById(e[t].id);let s;i&&(It(i,{width:"100%"}),i.style.height=" "+(this.element.parentElement&&this.element.parentElement.offsetWidth/this.cellAspectRatio)*e[t].sizeY+"px",e[t].sizeY>1&&(s=(this.element.parentElement&&this.element.parentElement.offsetWidth/this.cellAspectRatio)*e[t].sizeY+parseInt((Math.round(e[t].sizeY/2)*this.cellSpacing[1]).toString(),0),i.style.height=s+"px"),this.resizeHeight=!0,this.panelPropertyChange(e[t],{row:t,col:0}),this.setPanelPosition(i,e[t].row,e[t].col),this.panelsSizeY=this.panelsSizeY+e[t].sizeY,this.setClasses(this.panelCollection),this.checkDragging(this.dragCollection),this.removeResizeClasses(this.panelCollection))}this.updateRowHeight()}panelResponsiveUpdate(){this.element.classList.add("e-responsive"),this.calculateCellSize();for(let e=0;e<this.element.querySelectorAll(".e-panel").length;e++){const t=this.element.querySelectorAll(".e-panel")[e],i=this.getCellInstance(t.id);this.setHeightAndWidth(t,i)}for(let e=0;e<this.panels.length;e++)this.setPanelPosition(document.getElementById(this.panels[e].id),this.panels[e].row,this.panels[e].col);this.updateRowHeight()}updateRowHeight(){this.getRowColumn(),this.setHeightWidth()}setHeightWidth(){let e,t;e=this.checkMediaQuery()?this.maxRow()*(this.element.parentElement&&this.element.parentElement.offsetWidth/this.cellAspectRatio)+(this.maxRow()-1)*this.cellSpacing[1]+"px":this.maxRow()*(this.cellSize[0]/this.cellAspectRatio)+(this.maxRow()-1)*this.cellSpacing[1]+"px",It(this.element,{height:e}),t=window.getComputedStyle(this.element).width,It(this.element,{width:t})}setHeightAndWidth(e,t){It(e,{height:ct(this.setXYDimensions(t)[0])}),It(e,{width:ct(this.setXYDimensions(t)[1])})}renderCell(e,t,i){let s;this.dimensions=this.setXYDimensions(e),Jt(e.enabled)&&(e.enabled=!0),this.contentTemplateChild.length>0&&!m(i)?(s=this.contentTemplateChild[i],e.cssClass&&j([s],[e.cssClass]),e.id&&s.setAttribute("id",e.id)):s=this.createPanelElement(e.cssClass?e.cssClass.split(" "):null,e.id),s.style.zIndex=""+e.zIndex,this.element.appendChild(s),this.renderReactTemplates();const r=this.renderPanels(s,e,e.id,t);return this.panelCollection.push(r),this.setXYAttributes(s,e),this.setHeightAndWidth(s,e),s}setPanelPosition(e,t,i){if(!e)return;this.checkMediaQuery()&&this.calculateCellSize();const s=this.getCellSize()[1],r=this.getCellSize()[0],o=0===i?0:i*(r+this.cellSpacing[0]);let a=0===t?0:t*(s+this.cellSpacing[1]);this.checkMediaQuery()&&(a=0===t?0:this.panelsSizeY*(s+this.cellSpacing[1])),It(e,{left:o+"px",top:a+"px"})}getRowColumn(){if(this.rows=null,this.element.querySelectorAll(".e-panel").length>0&&!this.updatedRows){const e=this.element.querySelectorAll(".e-panel");for(let t=0;t<e.length;t++){const i=e[t],s=parseInt(i.getAttribute("data-row"),10),r=parseInt(i.getAttribute("data-sizeY"),10);this.rows=Math.max(this.rows,s+r)}}else{this.updatedRows&&(this.rows=this.updatedRows,this.updatedRows=null);for(let e=0;e<this.panels.length;e++)this.rows=Math.max(this.rows,this.panels[e].row)}}setMinMaxValues(e){this.panelPropertyChange(e,!e.sizeX||e.sizeX<e.minSizeX?{sizeX:e.minSizeX}:e.maxSizeX&&e.sizeX>e.maxSizeX?{sizeX:e.maxSizeX}:e.sizeX>this.columns?{sizeX:this.columns}:{sizeX:e.sizeX}),this.panelPropertyChange(e,!e.sizeY||e.sizeY<e.minSizeY?{sizeY:e.minSizeY}:e.maxSizeY&&e.sizeY>e.maxSizeY?{sizeY:e.maxSizeY}:{sizeY:e.sizeY})}checkMinMaxValues(e){e.col+e.sizeX>this.columns&&this.panelPropertyChange(e,{sizeX:e.sizeX+(this.columns-(e.col+e.sizeX))})}panelPropertyChange(e,t){e.setProperties(t,!0)}renderDashBoardCells(e){if(this.element.querySelectorAll(".e-panel").length>0||this.panels.length>0)for(let t=0;t<e.length;t++){this.gridPanelCollection.push(e[t]),this.setMinMaxValues(e[t]),(this.maxColumnValue<e[t].col||this.maxColumnValue<e[t].col+e[t].sizeX)&&this.panelPropertyChange(e[t],{col:this.maxColumnValue-e[t].sizeX});const i=this.renderCell(e[t],!1,t);this.enableRtl&&j([i],"e-rtl"),this.element.appendChild(i),this.renderReactTemplates(),this.checkMediaQuery()&&t===e.length-1?this.checkMediaQuerySizing():(this.setPanelPosition(i,e[t].row,e[t].col),this.mainElement=i,this.updatePanelLayout(i,e[t]),this.mainElement=null)}this.setClasses(this.panelCollection)}collisions(e,t,i,s,r){const o=[];let a;(!i||!s)&&(i=s=1),r&&!(r instanceof Array)&&(r=[r]);for(let u=0;u<s;++u)for(let p=0;p<i;++p)a=this.getPanel(e+u,t+p,r),a&&(!r||-1===r.indexOf(document.getElementById(a.id)))&&-1===o.indexOf(document.getElementById(a.id))&&o.push(document.getElementById(a.id));return o}rightWardsSpaceChecking(e,t,i){const s=[];let r=[];if(e.forEach(u=>{const p=parseInt(u.getAttribute("data-col"),10),y=parseInt(u.getAttribute("data-sizeX"),10);if(t<this.columns&&p>=t)if(y>1)for(let E=p;E<p+y;E++)s.push(E);else s.push(p)}),s.length>0)for(let u=t+1;u<=this.columns-1;u++)-1===s.indexOf(u)&&u!==t&&-1===r.indexOf(u)&&r.push(u);const o=this.getOccupiedColumns(i);return o.forEach(u=>{u>t&&-1!==r.indexOf(u)&&r.splice(r.indexOf(u),1)}),this.getOccupiedColumns(this.checkingElement).forEach(u=>{u>parseInt(i.getAttribute("data-col"),10)&&-1===o.indexOf(u)&&-1===r.indexOf(u)&&r.push(u)}),r=r.sort((u,p)=>u-p),r}getOccupiedColumns(e){const t=[],i=parseInt(e.getAttribute("data-sizeX"),10),s=parseInt(e.getAttribute("data-col"),10);for(let r=s;r<s+i&&r<=this.columns;r++)t.push(r);return t}leftWardsSpaceChecking(e,t,i){let s=[];const r=[];if(e.forEach(u=>{const p=parseInt(u.getAttribute("data-col"),10),y=parseInt(u.getAttribute("data-sizeX"),10);if(t<=this.columns&&p<=t)if(y>1)for(let E=p;E<p+y;E++)r.push(E);else r.push(p)}),r.length>0)for(let u=0;u<=t;u++)-1===r.indexOf(u)&&u!==t&&-1===s.indexOf(u)&&s.push(u);const o=this.getOccupiedColumns(i);return o.forEach(u=>{u<t&&-1!==s.indexOf(u)&&s.splice(s.indexOf(u),1)}),this.getOccupiedColumns(this.checkingElement).forEach(u=>{u<parseInt(i.getAttribute("data-col"),10)&&-1===o.indexOf(u)&&-1===s.indexOf(u)&&s.push(u)}),s=s.sort((u,p)=>u-p),s=s.reverse(),s}adjustmentAvailable(e,t,i,s,r){this.leftAdjustable=void 0,this.rightAdjustable=void 0;let a,o=!1,u=[];this.topAdjustable=void 0;const p=parseInt(r.getAttribute("data-sizeX"),10),y=parseInt(r.getAttribute("data-col"),10);u=this.getRowElements(this.collisions(e,0,this.columns,i,[])),-1===u.indexOf(r)&&u.push(r);const E=this.leftWardsSpaceChecking(u,t,r);if(E.length>0?(this.leftAdjustable=this.isLeftAdjustable(E,r,e,t,s,i),this.spacedColumnValue!==y-this.getCellInstance(this.checkingElement.id).sizeX&&(this.leftAdjustable=!1),this.leftAdjustable?this.rightAdjustable=!1:(this.leftAdjustable=!1,a=this.rightWardsSpaceChecking(u,t,r),this.rightAdjustable=a.length>0&&this.isRightAdjustable(a,r,e,t,s,i),this.spacedColumnValue!==p+y&&(this.rightAdjustable=!1),this.rightAdjustable||(this.rightAdjustable=!1))):(a=this.rightWardsSpaceChecking(u,t,r),this.rightAdjustable=a.length>0&&this.isRightAdjustable(a,r,e,t,s,i),this.spacedColumnValue!==p+y&&(this.rightAdjustable=!1),this.rightAdjustable&&(this.leftAdjustable=!1)),!this.rightAdjustable&&!this.leftAdjustable&&e>0){const _=this.getCellInstance(r.id).row;let D=!1;this.startRow!==_&&(D=!0);for(let L=e;L>=0;L--){const V=this.getCellInstance(r.id).sizeY>1&&D?this.checkingElement:r;L!==_&&L===_-i&&0===this.collisions(L,t,s,i,V).length&&(D=!1,this.topAdjustable=!0,this.spacedRowValue=m(this.spacedRowValue)?L:this.spacedRowValue,this.spacedColumnValue=t)}}return(this.rightAdjustable||this.leftAdjustable||this.topAdjustable)&&(o=!0,m(this.spacedRowValue)&&(this.spacedRowValue=e)),o}isXSpacingAvailable(e,t){let i=!1,s=[];for(let r=0;r<e.length;r++)if(e[r+1]-e[r]==1||e[r+1]-e[r]==-1){if(s.push(e[r]),2===t&&s.push(e[r+1]),r===e.length-2&&(s.push(e[r+1]),s.length>t&&s.splice(-1)),s.length===t)return i=!0,this.spacedColumnValue=s.sort((o,a)=>o-a)[0],this.spacedColumnValue<0&&(this.spacedColumnValue=1),i}else s=[];return i}getRowElements(e){const t=[];for(let i=0;i<e.length;i++)t.push(e[i]);return t}isLeftAdjustable(e,t,i,s,r,o){let a;if(1===r&&1===o&&e.length>0)this.spacedColumnValue=e[0],a=!0;else if(r>1&&1===o)a=this.isXSpacingAvailable(e,r);else if(o>1)if(1===r){let u;if(e.length>=1&&(u=!0),u)for(let p=0;p<e.length;p++){if(0===this.collisions(i,e[p],r,o,this.checkingElement).length)return this.spacedColumnValue=e[p],a=!0,a;a=!1}}else a=this.replacable(e,r,i,o,t);return a}isRightAdjustable(e,t,i,s,r,o){let a;if(1===r&&1===o&&e.length>0)this.spacedColumnValue=e[0],a=!0;else if(r>1&&1===o)a=this.isXSpacingAvailable(e,r);else if(o>1)if(1===r){let u;if(e.length>=1&&(u=!0),u)for(let p=0;p<e.length;p++){const y=this.collisions(i,e[p],r,o,this.checkingElement);for(let E=0;E<y.length;E++)parseInt(t.getAttribute("data-col"),10)!==e[p]&&y.splice(y.indexOf(y[E]),1);if(0===y.length)return a=!0,this.spacedColumnValue=e[p],a;a=!1}}else a=this.replacable(e,r,i,o,t);return a}replacable(e,t,i,s,r){let o;const a=[];for(let u=0;u<e.length;u++)if(this.isXSpacingAvailable(e,t)){const y=[];if(y.push(this.checkingElement),y.push(r),0===a.length)return o=!0,this.spacedColumnValue=this.spacedColumnValue,o;o=!1}return o}sortCollisionItems(e){const t=[];let i;for(let s=this.rows-1;s>=0;s--){i=[],e.forEach(r=>{r&&r.getAttribute("data-row")===s.toString()&&i.push(r)});for(let r=this.columns-1;r>=0;r--)i.forEach(o=>{o&&o.getAttribute("data-col")===r.toString()&&t.push(o)})}return t}updatedModels(e,t,i){const s=[];return this.mainElement||this.sortedPanel(),e.forEach(r=>{this.checkingElement=r;const o=this.getCellInstance(r.id),a=!this.adjustmentAvailable(o.row,o.col,o.sizeY,o.sizeX,i);if(o.sizeX>1&&a)for(let u=o.row;u<t.row+t.sizeY;u++)this.collisions(u,o.col,o.sizeX,o.sizeY,r).forEach(y=>{e.indexOf(y)>=0&&-1===s.indexOf(y)&&s.push(y)})}),s.forEach(r=>{s.indexOf(r)>=0&&e.splice(e.indexOf(r),1)}),e}resetLayout(e){let t=this.collisions(e.row,e.col,e.sizeX,e.sizeY,this.mainElement);if(!this.mainElement||this.addPanelCalled||this.resizeCalled||this.movePanelCalled)return t;if(this.mainElement&&this.oldRowCol!==this.cloneObject)for(let i=0;i<this.panels.length;i++){const s=document.getElementById(this.panels[i].id);if(s===this.mainElement)continue;const r=this.cloneObject[s.id].row,o=this.cloneObject[s.id].col;this.setPanelPosition(s,r,o),this.panelPropertyChange(this.getCellInstance(s.id),{row:r,col:o}),this.setAttributes({value:{col:o.toString(),row:r.toString()}},s),this.updateOldRowColumn()}return this.sortedArray=this.cloneArray,t=this.collisions(e.row,e.col,e.sizeX,e.sizeY,this.mainElement),this.sortedPanel(),this.updateOldRowColumn(),this.checkCollision&&this.checkCollision.length>0&&-1===t.indexOf(this.checkCollision[0])&&this.cloneObject[this.checkCollision[0].id].row===e.row&&t.push(this.checkCollision[0]),t}swapAvailability(e,t){let i=!0;const s=this.getCellInstance(t.id);for(let r=0;r<e.length;r++){const o=this.getCellInstance(e[r].id);for(let a=1;a<s.sizeY;a++){const u=[];if(u.push(t),u.push(e[r]),this.collisions(s.row+a,o.col,o.sizeX,o.sizeY,u).length>0)return i=!1,!1}}return i}checkForSwapping(e,t){if(!this.mainElement||0===e.length)return!1;let i;const s=parseInt(e[0].getAttribute("data-row"),10);if(this.startRow<s?i=1:this.startRow>s&&(i=0),!this.swapAvailability(e,t))return!1;let r=!1;for(let a=0;a<e.length;a++)if(e.length>=1&&this.cloneObject[this.mainElement.id].row===this.oldRowCol[this.mainElement.id].row)return!1;const o=0===i?this.getCellInstance(this.mainElement.id).row+this.getCellInstance(this.mainElement.id).sizeY:this.startRow;for(let a=0;a<e.length;a++){const u=this.getCellInstance(e[a].id),p=this.getCellInstance(t.id),y=[];if(1===u.sizeY&&-1===y.indexOf(e[a]))y.push(e[a]);else if(u.sizeY>1&&-1===y.indexOf(e[a]))if(1===i&&p.row===this.cloneObject[u.id].row+u.sizeY-1)y.push(e[a]);else{if(0!==i||p.row!==this.cloneObject[u.id].row)return!1;y.push(e[a])}if(u.sizeY<=p.sizeY&&-1===y.indexOf(e[a])&&y.push(e[a]),y.push(this.mainElement),this.collisions(o,u.col,u.sizeX,u.sizeY,y).length>0)return r=!1,r;a===e.length-1&&(r=!0)}return r}swapItems(e,t,i){let s;const r=[];r.push(t);const o=parseInt(e[0].getAttribute("data-row"),10);this.startRow<o?s=1:this.startRow>o&&(s=0);const a=0===s?o+i.sizeY:this.startRow;if(!this.movePanelCalled){const u=this.getCellInstance(e[0].id);this.panelPropertyChange(i,{row:0===s?o:a+u.sizeY})}for(let u=0;u<e.length;u++)r.push(e[u]),this.setPanelPosition(e[u],a,this.getCellInstance(e[u].id).col),this.panelPropertyChange(this.getCellInstance(e[u].id),{row:a}),e[u].setAttribute("data-row",a.toString());t.setAttribute("data-row",i.row.toString()),this.setPanelPosition(this.shadowEle,i.row,i.col);for(let u=0;u<this.panels.length;u++)this.oldRowCol[this.panels[u].id]={row:this.panels[u].row,col:this.panels[u].col};this.startRow=i.row,this.updateOldRowColumn(),r.forEach(u=>{this.cloneObject[u.id]=this.oldRowCol[u.id];const p=this.getCellInstance(u.id);for(let y=0;y<this.sortedArray.length;y++)if(this.sortedArray[y])for(let E=0;E<this.sortedArray[y].length;E++)this.sortedArray[y][E]===u&&(this.sortedArray[y][E]=void 0);this.sortedArray[p.row]||(this.sortedArray[p.row]=[]),this.sortedArray[p.row][p.col]=u,this.cloneArray=this.sortedArray})}updatePanelLayout(e,t){this.collisionChecker={};let s,i=[];const r=[];let o;if(i=this.mainElement&&this.isRenderComplete?this.resetLayout(t):this.collisions(t.row,t.col,t.sizeX,t.sizeY,e),i.length>0)if(i=this.sortCollisionItems(i),i=this.updatedModels(i,t,e),o=!m(this.startRow)&&this.checkForSwapping(i,e),o)this.swapItems(i,e,t);else for(let a=0;a<i.length;a++){const u=this.getCellInstance(i[a].id);if(this.checkingElement=i[a],this.spacedRowValue=null,this.spacedColumnValue=null,s=this.adjustmentAvailable(u.row,u.col,u.sizeY,u.sizeX,e),s&&!m(this.spacedColumnValue)){this.setPanelPosition(i[a],this.spacedRowValue,this.spacedColumnValue),this.oldRowCol[i[a].id]={row:this.spacedRowValue,col:this.spacedColumnValue};const p={attributes:{row:this.spacedRowValue.toString(),col:this.spacedColumnValue.toString()}};if(this.setAttributes(p,i[a]),this.panelPropertyChange(u,{col:this.spacedColumnValue,row:this.spacedRowValue}),this.topAdjustable&&this.allowFloating&&(this.updatePanels(),this.updateCloneArrayObject()),this.spacedRowValue=null,a<i.length)continue}else r.push(i[a])}if(r.length>0){const a=this;r.forEach(u=>{-1===a.overlapElement.indexOf(u)&&a.overlapElement.push(u)}),this.overlapElement&&-1!==this.overlapElement.indexOf(e)&&this.overlapElement.splice(this.overlapElement.indexOf(e),1),r.length>0&&(this.updateRowColumn(t.row,this.overlapElement,e),this.checkForCompletePushing())}this.isSubValue||this.sortedPanel(),this.updateRowHeight(),this.updateGridLines()}checkForCompletePushing(){for(let e=0;e<this.panels.length;e++)if(this.collisionChecker[this.panels[e].id]&&null!==this.collisionChecker[this.panels[e].id]){this.overlapElement=[this.collisionChecker[this.panels[e].id].ele];const t=this.panels[e].id;this.updateRowColumn(this.collisionChecker[t].row,this.overlapElement,this.collisionChecker[t].srcEle)}}updateCollisionChecked(e){for(let t=0;t<Object.keys(this.collisionChecker).length;t++)this.collisionChecker[e.id]=null}updateRowColumn(e,t,i){if(!i)return;const s=parseInt(i.getAttribute("data-sizeY"),10),r=parseInt(i.getAttribute("data-row"),10);this.overlapElementClone=this.overlapElement;for(let o=0;o<this.overlapElementClone.length;o++){if(0===this.overlapElementClone.length)return;for(let D=0;D<this.overlapElementClone.length;D++)this.collisionChecker[this.overlapElementClone[D].id]={ele:this.overlapElementClone[D],row:e,srcEle:i};const a=r+s,u=parseInt(this.overlapElementClone[o].getAttribute("data-sizeY"),10),p=parseInt(this.overlapElementClone[o].getAttribute("data-col"),10),y=parseInt(this.overlapElementClone[o].getAttribute("data-sizeX"),10);let E,_;if(-1===this.overlapSubElementClone.indexOf(i)&&this.overlapSubElementClone.push(i),-1===this.overlapSubElementClone.indexOf(this.overlapElementClone[o])&&this.overlapSubElementClone.push(this.overlapElementClone[o]),u>1||y>1){const D=this.getCellInstance(this.overlapElementClone[o].id);E=D.col;const L=document.getElementById(D.id);for(let V=D.row;V<r+s;V++){this.isSubValue=!0,this.panelPropertyChange(D,{row:D.row+1}),L.setAttribute("data-row",D.row.toString()),this.setPanelPosition(L,D.row,E),this.updateCollisionChecked(L),this.oldRowCol[L.id]={row:D.row,col:E};const H=this.getCellInstance(L.id);this.panelPropertyChange(H,{col:E,row:D.row});const se=parseInt(L.getAttribute("data-row"),10),_e=parseInt(L.getAttribute("data-col"),10),re=parseInt(L.getAttribute("data-sizeX"),10),Ae=parseInt(L.getAttribute("data-sizeY"),10),gt=[];gt.push(L),gt.push(i),_=this.collisions(se,_e,re,Ae,gt),this.mainElement&&-1!==_.indexOf(this.mainElement)&&_.splice(_.indexOf(this.mainElement),1),this.collisionPanel(_,_e,se,L)}this.isSubValue=!1}else{this.addPanelCalled&&(this.addPanelCalled=!1),this.overlapElementClone[o].setAttribute("data-row",a.toString());const D=[];D.push(this.overlapElementClone[o]),D.push(i),_=this.collisions(a,p,y,u,D),this.mainElement&&-1!==_.indexOf(this.mainElement)&&_.splice(_.indexOf(this.mainElement),1),E=parseInt(this.overlapElementClone[o].getAttribute("data-col"),10),this.setPanelPosition(this.overlapElementClone[o],a,E),this.updateCollisionChecked(this.overlapElementClone[o]),this.oldRowCol[this.overlapElementClone[o].id]={row:a,col:E};const L=this.getCellInstance(this.overlapElementClone[o].id);this.panelPropertyChange(L,{col:E,row:a}),this.collisionPanel(_,E,a,this.overlapElementClone[o])}}}collisionPanel(e,t,i,s){const r=this.getCellInstance(s.id);if(this.panelPropertyChange(r,{row:i,col:t}),e.length>0){const o=this;this.overlapElement=[],this.shouldRestrict=!0,e.forEach(u=>{o.overlapElement.push(u)});const a=parseInt(s.getAttribute("data-row"),10);for(let u=0;u<this.overlapElement.length;u++)this.updateRowColumn(a,this.overlapElement,s);this.shouldRestrict=!1}else{if(this.addPanelCalled||this.sortedPanel(),this.overlapSubElementClone.length>0)for(let o=0;o<this.overlapSubElementClone.length;o++){const a=parseInt(this.overlapSubElementClone[o].getAttribute("data-row"),10),u=parseInt(this.overlapSubElementClone[o].getAttribute("data-col"),10),p=parseInt(this.overlapSubElementClone[o].getAttribute("data-sizeX"),10),y=parseInt(this.overlapSubElementClone[o].getAttribute("data-sizeY"),10),E=this.collisions(a,u,p,y,this.overlapSubElementClone);this.mainElement&&-1!==E.indexOf(this.mainElement)&&E.splice(E.indexOf(this.mainElement),1);const _=this;E.forEach(D=>{_.overlapElement.push(D)}),E.length>0&&this.updateRowColumn(a,this.overlapElement,this.overlapSubElementClone[o])}this.overlapSubElementClone=[]}}removeResizeClasses(e){for(let t=0;t<e.length;t++){const s=e[t].querySelectorAll(".e-resize");for(let r=0;r<s.length;r++)ye(s[r])}}ensureDrag(){this.checkDragging(this.dragCollection),Y(this.element.querySelectorAll("."+uO),[uO]),this.setClasses(this.panelCollection)}setClasses(e){for(let t=0;t<e.length;t++){const i=e[t],s=e[t].querySelector(".e-panel-container");this.allowDragging&&(this.draggableHandle&&i.querySelectorAll(this.draggableHandle)[0]?j([i.querySelectorAll(this.draggableHandle)[0]],[uO]):j([i],[uO])),this.allowResizing&&this.mediaQuery&&!this.checkMediaQuery()&&this.setResizingClass(i,s)}}setResizingClass(e,t){if(this.availableClasses=this.resizableHandles,!e.querySelector(".e-resize"))for(let i=0;i<this.availableClasses.length;i++){const s=this.createElement("span");let r;t.appendChild(s),r="e-east"===this.availableClasses[i]||"e-west"===this.availableClasses[i]||"e-north"===this.availableClasses[i]||"e-south"===this.availableClasses[i]?"e-single":"e-double",j([s],[r,this.availableClasses[i],"e-resize","e-dl-icon"])}}setXYAttributes(e,t){const i={value:{sizeX:t.sizeX.toString(),sizeY:t.sizeY.toString(),minSizeX:t.minSizeX.toString(),minSizeY:t.minSizeY.toString(),maxSizeX:m(t.maxSizeX)?void 0:t.maxSizeX.toString(),maxSizeY:m(t.maxSizeY)?void 0:t.maxSizeY.toString(),row:t.row.toString(),col:t.col.toString()}};this.setAttributes(i,e)}setXYDimensions(e){const t=this.getCellSize()[1],i=this.getCellSize()[0];let s,r;return s=e&&"number"==typeof i&&"number"==typeof e.sizeX&&e.sizeX>1?e.sizeX*i+(e.sizeX-1)*this.cellSpacing[0]:i,r=e&&"number"==typeof t&&e.sizeY>1&&"number"==typeof e.sizeY?e.sizeY*t+(e.sizeY-1)*this.cellSpacing[1]:ct(t),[r,s]}getRowColumnDragValues(e){let t=[];const i=parseFloat(e.element.style.top),s=parseFloat(e.element.style.left);return t=[Math.round(i/(this.getCellSize()[1]+this.cellSpacing[1])),Math.round(s/(this.getCellSize()[0]+ +this.cellSpacing[0]))],t}checkForChanges(e,t,i){let s=[];if(this.removeAllCalled)s=[];else for(let r=0;r<this.panels.length;r++)(m(t)||this.panels[r].id!==t[0].id)&&(m(i)||this.panels[r].id!==i[0].id)&&(this.panels[r].row!==this.panelsInitialModel[r].row||this.panels[r].col!==this.panelsInitialModel[r].col)&&s.push(this.panels[r]);if(s.length>0||this.removeAllCalled){const r={changedPanels:s,isInteracted:e,addedPanels:m(t)?[]:t,removedPanels:m(i)?[]:i};this.trigger("change",r)}}enableDraggingContent(e){for(let t=0;t<e.length;t++)this.dragobj=new Us(e[t],{preventDefault:!1,clone:!1,dragArea:this.element,isDragScroll:!0,handle:this.draggableHandle?this.draggableHandle:".e-panel",abort:[".e-resize",".e-drag-restrict"],dragStart:this.onDraggingStart.bind(this),dragStop:r=>{const o=this.getCellInstance(this.mainElement.id);this.allowPushing&&this.collisions(o.row,o.col,o.sizeX,o.sizeY,this.mainElement).length>0?(this.setHolderPosition(r),this.setPanelPosition(this.mainElement,o.row,o.col),this.updatePanelLayout(this.mainElement,o)):this.setPanelPosition(this.mainElement,o.row,o.col),this.mainElement=null;const a=this.getPanelBase(r);this.shadowEle&&ye(this.shadowEle),Y([this.element],[e2]),Y([r.element],[hO]),this.shadowEle=null,r.element.classList.remove("e-dragging");const u=this.getRowColumnDragValues(r)[0],p=this.getRowColumnDragValues(r)[1],y=this.getCellInstance(r.element.id);this.allowPushing&&0===this.collisions(u,p,y.sizeX,y.sizeY,document.getElementById(a.id)).length?(this.panelPropertyChange(this.getCellInstance(r.element.id),{row:u,col:p}),this.oldRowCol[r.element.id].row=u,this.oldRowCol[r.element.id].col=p,this.setAttributes({value:{col:p.toString(),row:u.toString()}},r.element),this.sortedPanel()):(this.panelPropertyChange(this.getCellInstance(r.element.id),{row:this.oldRowCol[r.element.id].row,col:this.oldRowCol[r.element.id].col}),r.element.setAttribute("data-col",this.getCellInstance(r.element.id).col.toString()),r.element.setAttribute("data-row",this.getCellInstance(r.element.id).row.toString()),this.sortedPanel());const E=this.getCellInstance(r.element.id);this.setPanelPosition(r.element,E.row,E.col),this.updatePanels(),this.updateCloneArrayObject(),this.checkForChanges(!0),this.dragStopEventArgs={event:r.event,element:r.element},this.trigger("dragStop",r),this.resizeEvents(),this.rows=this.maxRow(!0),this.setHeightWidth(),this.updateDragArea()},drag:r=>{this.draggedEventArgs={event:r.event,element:r.element,target:ae(r.target,".e-panel")},this.trigger("drag",this.draggedEventArgs),this.onDragStart(r)}}),-1===this.dragCollection.indexOf(this.dragobj)&&this.dragCollection.push(this.dragobj)}updatePanels(){this.moveItemsUpwards(),this.updateOldRowColumn(),this.sortedPanel()}updateDragArea(){this.dragCollection.forEach(e=>{e.setDragArea()})}updateRowsHeight(e,t,i){e+t>=this.rows&&(this.rows=this.rows+i,this.setHeightWidth())}onDraggingStart(e){this.trigger("dragStart",e,o=>{}),this.panelsInitialModel=this.cloneModels(this.panels),this.mainElement=e.element,this.cloneObject=JSON.parse(JSON.stringify(this.cloneObject));const i=this.startRow=parseInt(e.element.getAttribute("data-row"),10);this.startCol=parseInt(e.element.getAttribute("data-col"),10);const s=parseInt(e.element.getAttribute("data-sizeY"),10);this.updateRowsHeight(i,s,s),this.updateDragArea(),this.shadowEle=document.createElement("div"),this.shadowEle.classList.add("e-holder"),this.shadowEle.classList.add("e-holder-transition"),It(this.shadowEle,{position:"absolute"}),j([this.element],[e2]),j([e.element],[hO]),this.element.appendChild(this.shadowEle),this.renderReactTemplates(),this.shadowEle=document.querySelector(".e-holder"),this.shadowEle.style.height=this.getCellInstance(e.element.id).sizeY*this.cellSize[1]+"px",this.shadowEle.style.width=this.getCellInstance(e.element.id).sizeX*this.cellSize[0]+"px";const r=this.getCellInstance(e.element.id);this.setPanelPosition(this.shadowEle,r.row,r.col)}cloneModels(e,t){void 0===t&&(t=[]);for(let i=0;i<e.length;i++){t[i]||(t[i]={});for(const s in e[i])t[i][s]=e[i][s]}return t}onDragStart(e){let t,i,s;const r=s=this.getRowColumnDragValues(e)[1],o=this.getRowColumnDragValues(e)[0];if(r<0||o<0)return;this.panelPropertyChange(this.getCellInstance(e.element.id),{row:o,col:r});const a=this.getCellInstance(e.element.id);this.updateRowsHeight(a.row,a.sizeY,1),this.updateDragArea(),this.allowPushing&&(this.setAttributes({value:{col:r.toString(),row:o.toString()}},e.element),this.panelPropertyChange(this.getCellInstance(e.element.id),{row:o,col:r}),t=this.oldRowCol[e.element.id].col,i=this.oldRowCol[e.element.id].row,this.oldRowCol[e.element.id]={row:o,col:r},this.updateOldRowColumn(),(this.startCol!==t||this.startRow!==i)&&(this.setHolderPosition(e),this.startCol!==t&&(this.startRow=i),this.startRow!==i&&(this.startCol=t),this.allowPushing))&&(this.mainElement=e.element,this.checkCollision=this.collisions(a.row,a.col,a.sizeX,a.sizeY,e.element),a.col>=this.checkColumnValue&&(this.checkCollision=[]),this.updatePanelLayout(e.element,a),this.moveItemsUpwards()),!1!==this.allowPushing&&this.panelPropertyChange(this.getCellInstance(e.element.id),{row:o,col:r}),(this.oldRowCol[e.element.id].row!==o||this.oldRowCol[e.element.id].col!==r)&&(this.panelPropertyChange(this.getCellInstance(e.element.id),{row:o,col:r}),this.setAttributes({value:{col:r.toString(),row:o.toString()}},e.element)),this.startCol!==s&&(this.startCol=t,this.moveItemsUpwards()),this.allowPushing||this.setHolderPosition(e),this.removeResizeClasses(this.panelCollection),this.setClasses(this.panelCollection)}getPanelBase(e){let t;for(let i=0;i<this.panelCollection.length;i++)this.panelCollection[i].id===(e.element&&e.element.id||e)&&(t=this.panelCollection[i]);return t}getPanel(e,t,i){i&&!(i instanceof Array)&&(i=[i]);let s=1;for(;e>-1;){let r=1,o=t;for(;o>-1;){const a=this.sortedArray[e];if(a){const u=a[o];if(u&&(!i||-1===i.indexOf(u))&&parseInt(u.getAttribute("data-sizeX"),10)>=r&&parseInt(u.getAttribute("data-sizeY"),10)>=s)return u}++r,--o}--e,++s}return null}setHolderPosition(e){const t=parseInt(e.element.getAttribute("data-sizeY"),10),i=parseInt(e.element.getAttribute("data-col"),10),s=parseInt(e.element.getAttribute("data-row"),10),r=parseInt(e.element.getAttribute("data-sizeX"),10),o=this.getCellSize()[0],a=this.getCellSize()[1],u=0===s?0:s*(a+this.cellSpacing[1]),p=0===i?0:i*(o+this.cellSpacing[0]),y=this.getCellSize()[1],E=this.getCellSize()[0];this.elementRef.top=this.shadowEle.style.top=u+"px",this.elementRef.left=this.shadowEle.style.left=p+"px",this.elementRef.height=this.shadowEle.style.height=t*y+(t-1)*this.cellSpacing[1]+"px",this.elementRef.width=this.shadowEle.style.width=r*E+(r-1)*this.cellSpacing[0]+"px"}getCellInstance(e){let t;for(let i=0;i<this.panels.length;i++)this.panels[i].id===e&&(t=this.panels[i]);return t}addPanel(e){this.panelsSizeY=0,this.maxCol(),e.minSizeX||(e.minSizeX=1),e.minSizeY||(e.minSizeY=1),e.id||(e.id="layout_"+this.panelID.toString(),this.panelID=this.panelID+1);const t=new $a(this,"panels",e,!0);this.panels.push(t),this.panelsInitialModel=this.cloneModels(this.panels),this.setMinMaxValues(t),(this.maxColumnValue<t.col||this.maxColumnValue<t.col+t.sizeX)&&this.panelPropertyChange(t,{col:this.maxColumnValue-t.sizeX});const i=this.renderCell(t,!0,null);if(this.oldRowCol[t.id]={row:t.row,col:t.col},this.cloneObject[t.id]={row:t.row,col:t.col},this.updateOldRowColumn(),this.element.insertAdjacentElement("afterbegin",i),this.addPanelCalled=!0,this.checkMediaQuery()?(this.checkMediaQuerySizing(),this.removeResizeClasses(this.panelCollection)):(this.mainElement=i,this.checkCollision||(this.checkCollision=[]),this.setPanelPosition(i,t.row,t.col),this.updatePanelLayout(i,t)),this.addPanelCalled=!1,!(!this.allowDragging||!this.mediaQuery)&&!this.checkMediaQuery()&&this.enableDraggingContent([document.getElementById(t.id)]),this.setClasses([i]),this.allowFloating&&(this.mainElement=null,this.moveItemsUpwards()),this.updateOldRowColumn(),this.sortedPanel(),this.updateCloneArrayObject(),this.allowResizing)for(let s=0;s<i.querySelectorAll(".e-resize").length;s++){const r="msie"===Q.info.name?"mousedown pointerdown":"mousedown";O.add(i.querySelectorAll(".e-resize")[s],r,this.downResizeHandler,this),"msie"!==Q.info.name&&O.add(i.querySelectorAll(".e-resize")[s],"touchstart",this.touchDownResizeHandler,this)}this.checkForChanges(!1,[t])}updatePanel(e){if(this.panelsSizeY=0,!e.id)return;const t=this.getCellInstance(e.id);if(!t)return;this.maxCol(),e.col=e.col<1?0:e.col>this.columns?this.columns-1:e.col,m(e.col)&&(e.col=t.col),this.panelPropertyChange(t,e),this.setMinMaxValues(t);const i=document.getElementById(e.id);this.mainElement=i;const s=t.cssClass?t.cssClass.split(" "):null;if(this.panelContent=i.querySelector(".e-panel-container")?i.querySelector(".e-panel-container"):this.createSubElement(s,i.id+"_content",W5),i.appendChild(this.panelContent),t.header){const r=i.querySelector(".e-panel-header")?i.querySelector(".e-panel-header"):this.createSubElement([],i.id+"template","");j([r],[q5]),r.innerHTML="",this.renderTemplate(t.header,r,this.element.id+"HeaderTemplate"+t.id,!0,"header"),this.panelContent.appendChild(r),this.renderReactTemplates()}else i.querySelector(".e-panel-header")&&ye(i.querySelector(".e-panel-header"));if(t.content){const r=t.cssClass?t.cssClass.split(" "):null;this.panelBody=i.querySelector(".e-panel-content")?i.querySelector(".e-panel-content"):this.createSubElement(r,i.id+"_body",z5),this.panelBody.innerHTML="";const o=this.panelContent.querySelector(".e-panel-header")?window.getComputedStyle(this.panelContent.querySelector(".e-panel-header")).height:"0px";It(this.panelBody,{height:"calc( 100% - "+o+")"}),this.renderTemplate(t.content,this.panelBody,this.element.id+"ContentTemplate"+t.id,!0,"content"),this.panelContent.appendChild(this.panelBody),this.renderReactTemplates()}else i.querySelector(".e-panel-content")&&ye(i.querySelector(".e-panel-content"));this.setXYAttributes(i,t),this.setHeightAndWidth(i,t),this.setPanelPosition(i,t.row,t.col),this.updatePanelLayout(i,t),this.checkMediaQuery()&&this.checkMediaQuerySizing(),this.mainElement=null,this.updatePanels(),this.updateCloneArrayObject()}updateCloneArrayObject(){this.cloneArray=this.sortedArray,this.cloneObject=JSON.parse(JSON.stringify(this.oldRowCol))}serialize(){const e=this.cloneModels(this.panels),t=[];for(let i=0;i<e.length;i++)t.push({id:e[i].id,row:e[i].row,col:e[i].col,sizeX:e[i].sizeX,sizeY:e[i].sizeY,minSizeX:e[i].minSizeX,minSizeY:e[i].minSizeY,maxSizeX:e[i].maxSizeX,maxSizeY:e[i].maxSizeY});return t}removeAll(){this.removeAllCalled=!0;for(let t=0;t<this.panelCollection.length;t++)ye(this.panelCollection[t]),this.clearTemplate();this.removeAllPanel(),this.rows=0,this.gridPanelCollection=[],this.setHeightWidth(),this.sortedPanel(),this.sortedArray=[],this.overlapElementClone=[],this.overlapElement=[],this.overlapSubElementClone=[],this.panelCollection=[],this.oldRowCol={},this.cloneObject={};const e=this.cloneModels(this.panels);this.setProperties({panels:[]},!0),this.updatePanels(),this.updateCloneArrayObject(),this.checkForChanges(!1,null,e),this.removeAllCalled=!1}removePanel(e){let t;this.panelsSizeY=0,this.panelsInitialModel=this.cloneModels(this.panels);for(let i=0;i<this.panelCollection.length;i++)this.panelCollection[i].id===e&&(ye(this.panelCollection[i]),this.panelCollection.splice(i,1)),this.panels[i].id===e&&(t=this.panels[i],this.panels.splice(i,1),this.panelsInitialModel.splice(i,1),this.updateOldRowColumn(),this.sortedPanel());this.updatePanels(),this.checkMediaQuery()&&(this.isPanelRemoved=!0,this.checkMediaQuerySizing(),this.isPanelRemoved=!1),this.gridPanelCollection.forEach(i=>{i.id===e&&this.gridPanelCollection.splice(this.gridPanelCollection.indexOf(i),1)}),this.updateCloneArrayObject(),this.checkForChanges(!1,null,[t])}movePanel(e,t,i){this.movePanelCalled=!0,this.panelsInitialModel=this.cloneModels(this.panels);const s=this.getCellInstance(e);if(isNaN(t)||null===t||isNaN(i)||null===i||!s)return;i<0?i=0:i>this.columns&&(i=this.columns-s.sizeX),this.panelPropertyChange(s,{row:t,col:i});const r=document.getElementById(e);this.mainElement=r,this.startRow=parseInt(r.getAttribute("data-row"),10),this.startCol=parseInt(r.getAttribute("data-col"),10),this.setAttributes({value:{col:i.toString(),row:t.toString()}},r),this.updateOldRowColumn(),this.setPanelPosition(r,t,i),this.updatePanelLayout(r,s),this.updateRowHeight(),this.updatePanels(),this.updateCloneArrayObject(),this.mainElement=null,this.allowFloating&&this.moveItemsUpwards(),this.movePanelCalled=!1,this.checkForChanges(!1)}setAttributes(e,t){for(let i=0;i<Object.keys(e).length;i++)Object.keys(e)&&(e[Object.keys(e)[i]].col&&t.setAttribute("data-col",e[Object.keys(e)[i]].col.toString()),e[Object.keys(e)[i]].row&&t.setAttribute("data-row",e[Object.keys(e)[i]].row.toString()),e[Object.keys(e)[i]].sizeX&&t.setAttribute("data-sizeX",e[Object.keys(e)[i]].sizeX.toString()),e[Object.keys(e)[i]].sizeY&&t.setAttribute("data-sizeY",e[Object.keys(e)[i]].sizeY.toString()),e[Object.keys(e)[i]].minSizeX&&t.setAttribute("data-minSizeX",e[Object.keys(e)[i]].minSizeX.toString()),e[Object.keys(e)[i]].minSizeY&&t.setAttribute("data-minSizeY",e[Object.keys(e)[i]].minSizeY.toString()),e[Object.keys(e)[i]].maxSizeX&&t.setAttribute("data-maxSizeY",e[Object.keys(e)[i]].maxSizeX.toString()),e[Object.keys(e)[i]].maxSizeY&&t.setAttribute("data-maxSizeY",e[Object.keys(e)[i]].maxSizeY.toString()))}resizePanel(e,t,i){this.panelsInitialModel=this.cloneModels(this.panels);const s=this.getCellInstance(e);this.resizeCalled=!0;const r=document.getElementById(e),o={event:null,element:r,isInteracted:!1};this.trigger("resizeStart",o),this.panelPropertyChange(s,{sizeX:t,sizeY:i}),this.setMinMaxValues(s),this.checkMinMaxValues(s),this.mainElement=r,this.setAttributes({value:{sizeX:s.sizeX.toString(),sizeY:s.sizeY.toString()}},r),this.setHeightAndWidth(r,s),this.updatePanelLayout(r,s),this.updatePanels(),this.updateRowHeight(),this.resizeCalled=!1,this.trigger("resizeStop",o),this.checkForChanges(!1)}destroy(){O.remove(window,"resize",this.refreshListener),Y([this.element],["e-dashboardlayout","e-lib","e-responsive","e-control"]),this.element.removeAttribute("style");for(let e=0;e<this.dragCollection.length;e++)this.dragCollection[e].destroy();this.removeAllPanel(),super.destroy(),this.clearTemplate(),this.renderReactTemplates()}removeAllPanel(){for(;this.element.firstElementChild;)ye(this.element.firstElementChild),this.clearTemplate()}setEnableRtl(){!0===this.enableRtl?j([this.element],"e-rtl"):Y([this.element],"e-rtl")}updateCellSizeAndSpacing(){this.panelResponsiveUpdate(),this.setHeightWidth(),this.getRowColumn();for(let e=0;e<this.element.querySelectorAll(".e-panel").length;e++){const t=this.element.querySelectorAll(".e-panel")[e],i=this.getCellInstance(t.id);this.setHeightAndWidth(t,i),this.setPanelPosition(t,i.row,i.col)}}updatePanelsDynamically(e){this.removeAll(),this.setProperties({panels:e},!0),this.setOldRowCol(),this.table&&this.table.remove(),this.initialize(),this.checkMediaQuery()&&this.refresh(),this.showGridLines&&this.initGridLines()}checkForIDValues(e){!m(e)&&e.length>0?(this.panelID=0,e.forEach(t=>{t.id||(this.panelPropertyChange(t,{id:"layout_"+this.panelID.toString()}),this.panelID=this.panelID+1)})):this.restrictDynamicUpdate=!0}onPropertyChanged(e,t){e.panels&&e.panels.length>0&&e.panels[0]instanceof $a&&this.checkForIDValues(e.panels);for(const i of Object.keys(e))switch(i){case"enableRtl":this.setProperties({enableRtl:e.enableRtl},!0),this.setEnableRtl();break;case"mediaQuery":this.setProperties({mediaQuery:e.mediaQuery},!0),this.checkMediaQuery()&&this.checkMediaQuerySizing();break;case"allowDragging":this.setProperties({allowDragging:e.allowDragging},!0),this.ensureDrag();break;case"allowResizing":if(this.setProperties({allowResizing:e.allowResizing},!0),this.allowResizing)this.setClasses(this.panelCollection),this.resizeEvents();else{const s=this.element.querySelectorAll(".e-panel .e-panel-container .e-resize");for(let r=0;r<s.length;r++){const a=s[r];O.remove(a,"msie"===Q.info.name?"mousedown pointerdown":"mousedown",this.downResizeHandler),"msie"!==Q.info.name&&O.remove(a,"touchstart",this.touchDownResizeHandler)}this.removeResizeClasses(this.panelCollection)}break;case"cellSpacing":this.setProperties({cellSpacing:e.cellSpacing},!0),this.updateCellSizeAndSpacing(),this.updateGridLines();break;case"draggableHandle":this.setProperties({draggableHandle:e.draggableHandle},!0),this.ensureDrag();break;case"allowFloating":this.setProperties({allowFloating:e.allowFloating},!0),this.moveItemsUpwards();break;case"showGridLines":this.showGridLines?(this.setProperties({showGridLines:e.showGridLines},!0),this.initGridLines()):this.table&&ye(this.table);break;case"allowPushing":this.setProperties({allowPushing:e.allowPushing},!0);break;case"panels":!e.columns&&!this.restrictDynamicUpdate&&e.panels[0]&&e.panels.length>0?(this.isRenderComplete=!1,this.updatePanelsDynamically(e.panels),this.isRenderComplete=!0):e.panels[0]&&e.panels.length?this.restrictDynamicUpdate=!1:(this.isRenderComplete=!1,this.updatePanelsDynamically(this.panels),this.isRenderComplete=!0);break;case"columns":this.isRenderComplete=!1,e.panels&&this.updatePanelsDynamically(e.panels),this.setProperties({columns:e.columns},!0),this.panelCollection=[],this.maxColumnValue=this.columns,this.calculateCellSize(),this.panels.forEach(s=>{if(this.setMinMaxValues(s),this.maxColumnValue<s.col||this.maxColumnValue<s.col+s.sizeX){const r=this.maxColumnValue-s.sizeX;this.panelPropertyChange(s,{col:r<0?0:r}),this.setXYAttributes(document.getElementById(s.id),s)}this.setHeightAndWidth(document.getElementById(s.id),s),this.panelCollection.push(document.getElementById(s.id)),this.setPanelPosition(document.getElementById(s.id),s.row,s.col),this.mainElement=document.getElementById(s.id),this.updatePanelLayout(document.getElementById(s.id),s),this.mainElement=null}),this.updatePanels(),this.updateCloneArrayObject(),this.isRenderComplete=!0,this.updateGridLines()}}getPersistData(){return this.addOnPersist(["panels"])}mergePersistPanelData(e){const t=window.localStorage.getItem(this.getModuleName()+this.element.id);if(!m(t)&&""!==t||!m(e)){const i=m(e)?JSON.parse(t):e,s=Object.keys(i);this.isProtectedOnChange=!0;for(const r of s)"object"==typeof J(r,this)&&!m(J(r,this))&&Array.isArray(J(r,this))&&"panels"===r&&this.mergePanels(i[r],this[r]);this.isProtectedOnChange=!1}}mergePanels(e,t){const i=e;for(let s=0;s<i.length;s++){this.checkForIDValues(t);const r=t.filter(o=>o.id===i[s].id)[0];m(r)||(i[s]=ut(r,i[s],{},!0))}}getModuleName(){return"DashboardLayout"}};Rs([A(!0)],mr.prototype,"allowDragging",void 0),Rs([A(!1)],mr.prototype,"allowResizing",void 0),Rs([A(!0)],mr.prototype,"allowPushing",void 0),Rs([A(!0)],mr.prototype,"enableHtmlSanitizer",void 0),Rs([A(!0)],mr.prototype,"allowFloating",void 0),Rs([A(1)],mr.prototype,"cellAspectRatio",void 0),Rs([A([5,5])],mr.prototype,"cellSpacing",void 0),Rs([A(1)],mr.prototype,"columns",void 0),Rs([A(!1)],mr.prototype,"showGridLines",void 0),Rs([A(null)],mr.prototype,"draggableHandle",void 0),Rs([A("en-US")],mr.prototype,"locale",void 0),Rs([A("max-width: 600px")],mr.prototype,"mediaQuery",void 0),Rs([cl([],$a)],mr.prototype,"panels",void 0),Rs([A(["e-south-east"])],mr.prototype,"resizableHandles",void 0),Rs([Z()],mr.prototype,"change",void 0),Rs([Z()],mr.prototype,"dragStart",void 0),Rs([Z()],mr.prototype,"drag",void 0),Rs([Z()],mr.prototype,"dragStop",void 0),Rs([Z()],mr.prototype,"resizeStart",void 0),Rs([Z()],mr.prototype,"resize",void 0),Rs([Z()],mr.prototype,"resizeStop",void 0),Rs([Z()],mr.prototype,"created",void 0),Rs([Z()],mr.prototype,"destroyed",void 0),mr=Rs([ts],mr);const $5=["content"],G5=[[["div"]]],Y5=["div"],iX=["header"];var nX=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)};let rX=["collapsed","collapsible","content","cssClass","max","min","resizable","size"],oX=[],aX=(()=>{class n extends xu{constructor(t){super(),this.viewContainerRef=t,ys("currentInstance",this,this.viewContainerRef),this.registerEvents(oX),this.directivePropList=rX}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b))},n.\u0275dir=d.lG2({type:n,selectors:[["e-pane"]],contentQueries:function(t,i,s){if(1&t&&d.Suo(s,$5,5),2&t){let r;d.iGM(r=d.CRH())&&(i.content=r.first)}},inputs:{collapsed:"collapsed",collapsible:"collapsible",content:"content",cssClass:"cssClass",max:"max",min:"min",resizable:"resizable",size:"size"},features:[d.qOj]}),function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);s>3&&r&&Object.defineProperty(e,t,r)}([Ni(),nX("design:type",Object)],n.prototype,"content",void 0),n})(),lX=(()=>{class n extends Tu{constructor(){super("panesettings")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["e-panes"]],contentQueries:function(t,i,s){if(1&t&&d.Suo(s,aX,4),2&t){let r;d.iGM(r=d.CRH())&&(i.children=r)}},features:[d.qOj]}),n})();const uX=["beforeCollapse","beforeExpand","beforeSanitizeHtml","collapsed","created","expanded","resizeStart","resizeStop","resizing"],dX=[""];let K5=(()=>{let n=class extends VZ{constructor(t,i,s,r){super(),this.ngEle=t,this.srenderer=i,this.viewContainerRef=s,this.injector=r,this.tags=["paneSettings"],this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(uX),this.addTwoWay.call(this,dX),ys("currentInstance",this,this.viewContainerRef),this.containerContext=new fi}ngOnInit(){this.containerContext.ngOnInit(this)}ngAfterViewInit(){this.containerContext.ngAfterViewInit(this)}ngOnDestroy(){this.containerContext.ngOnDestroy(this)}ngAfterContentChecked(){this.tagObjects[0].instance=this.childPaneSettings,this.containerContext.ngAfterContentChecked(this)}};return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ejs-splitter"]],contentQueries:function(t,i,s){if(1&t&&d.Suo(s,lX,5),2&t){let r;d.iGM(r=d.CRH())&&(i.childPaneSettings=r.first)}},inputs:{cssClass:"cssClass",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableReversePanes:"enableReversePanes",enableRtl:"enableRtl",enabled:"enabled",height:"height",locale:"locale",orientation:"orientation",paneSettings:"paneSettings",separatorSize:"separatorSize",width:"width"},outputs:{beforeCollapse:"beforeCollapse",beforeExpand:"beforeExpand",beforeSanitizeHtml:"beforeSanitizeHtml",collapsed:"collapsed",created:"created",expanded:"expanded",resizeStart:"resizeStart",resizeStop:"resizeStop",resizing:"resizing"},features:[d.qOj],ngContentSelectors:Y5,decls:1,vars:0,template:function(t,i){1&t&&(d.F$t(G5),d.Hsn(0))},encapsulation:2,changeDetection:0}),n})();K5=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r}([hn([fi]),function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",e)}(0,[d.SBq,d.Qsj,d.s_b,d.zs3])],K5);var X5=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Q5=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)};let pX=["col","content","cssClass","enabled","header","id","maxSizeX","maxSizeY","minSizeX","minSizeY","row","sizeX","sizeY","zIndex"],fX=[],i2=(()=>{class n extends xu{constructor(t){super(),this.viewContainerRef=t,ys("currentInstance",this,this.viewContainerRef),this.registerEvents(fX),this.directivePropList=pX}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b))},n.\u0275dir=d.lG2({type:n,selectors:[["e-panel"]],contentQueries:function(t,i,s){if(1&t&&(d.Suo(s,iX,5),d.Suo(s,$5,5)),2&t){let r;d.iGM(r=d.CRH())&&(i.header=r.first),d.iGM(r=d.CRH())&&(i.content=r.first)}},inputs:{col:"col",content:"content",cssClass:"cssClass",enabled:"enabled",header:"header",id:"id",maxSizeX:"maxSizeX",maxSizeY:"maxSizeY",minSizeX:"minSizeX",minSizeY:"minSizeY",row:"row",sizeX:"sizeX",sizeY:"sizeY",zIndex:"zIndex"},features:[d.qOj]}),n})();X5([Ni(),Q5("design:type",Object)],i2.prototype,"header",void 0),X5([Ni(),Q5("design:type",Object)],i2.prototype,"content",void 0);let mX=(()=>{class n extends Tu{constructor(){super("panels")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["e-panels"]],contentQueries:function(t,i,s){if(1&t&&d.Suo(s,i2,4),2&t){let r;d.iGM(r=d.CRH())&&(i.children=r)}},features:[d.qOj]}),n})();const vX=["change","created","destroyed","drag","dragStart","dragStop","resize","resizeStart","resizeStop"],bX=[""];let xw=(()=>{let n=class extends mr{constructor(t,i,s,r){super(),this.ngEle=t,this.srenderer=i,this.viewContainerRef=s,this.injector=r,this.tags=["panels"],this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(vX),this.addTwoWay.call(this,bX),ys("currentInstance",this,this.viewContainerRef),this.containerContext=new fi}ngOnInit(){this.containerContext.ngOnInit(this)}ngAfterViewInit(){this.containerContext.ngAfterViewInit(this)}ngOnDestroy(){this.containerContext.ngOnDestroy(this)}ngAfterContentChecked(){this.tagObjects[0].instance=this.childPanels,this.containerContext.ngAfterContentChecked(this)}};return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ejs-dashboardlayout"]],contentQueries:function(t,i,s){if(1&t&&d.Suo(s,mX,5),2&t){let r;d.iGM(r=d.CRH())&&(i.childPanels=r.first)}},inputs:{allowDragging:"allowDragging",allowFloating:"allowFloating",allowPushing:"allowPushing",allowResizing:"allowResizing",cellAspectRatio:"cellAspectRatio",cellSpacing:"cellSpacing",columns:"columns",draggableHandle:"draggableHandle",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableRtl:"enableRtl",locale:"locale",mediaQuery:"mediaQuery",panels:"panels",resizableHandles:"resizableHandles",showGridLines:"showGridLines"},outputs:{change:"change",created:"created",destroyed:"destroyed",drag:"drag",dragStart:"dragStart",dragStop:"dragStop",resize:"resize",resizeStart:"resizeStart",resizeStop:"resizeStop"},features:[d.qOj],ngContentSelectors:Y5,decls:1,vars:0,template:function(t,i){1&t&&(d.F$t(G5),d.Hsn(0))},encapsulation:2,changeDetection:0}),n})();xw=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r}([hn([fi]),function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",e)}(0,[d.SBq,d.Qsj,d.s_b,d.zs3])],xw);let s2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[ti]]}),n})();const CX=["footerTemplate"],EX=["header"],J5=["content"],e4=["*"];let wX=["buttonModel","isFlat","type"],SX=["click"],_X=(()=>{class n extends xu{constructor(t){super(),this.viewContainerRef=t,ys("currentInstance",this,this.viewContainerRef),this.registerEvents(SX),this.directivePropList=wX}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b))},n.\u0275dir=d.lG2({type:n,selectors:[["e-dialogbutton"]],inputs:{buttonModel:"buttonModel",isFlat:"isFlat",type:"type"},outputs:{click:"click"},features:[d.qOj]}),n})(),IX=(()=>{class n extends Tu{constructor(){super("buttons")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["e-buttons"]],contentQueries:function(t,i,s){if(1&t&&d.Suo(s,_X,4),2&t){let r;d.iGM(r=d.CRH())&&(i.children=r)}},features:[d.qOj]}),n})();var dO=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},pO=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)};const xX=["beforeClose","beforeOpen","beforeSanitizeHtml","close","created","destroyed","drag","dragStart","dragStop","open","overlayClick","resizeStart","resizeStop","resizing","visibleChange"],TX=["visible"];let t4=(()=>{let n=class extends ws{constructor(t,i,s,r){super(),this.ngEle=t,this.srenderer=i,this.viewContainerRef=s,this.injector=r,this.tags=["buttons"],this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(xX),this.addTwoWay.call(this,TX),ys("currentInstance",this,this.viewContainerRef),this.containerContext=new fi}ngOnInit(){this.containerContext.ngOnInit(this)}ngAfterViewInit(){this.containerContext.ngAfterViewInit(this)}ngOnDestroy(){this.containerContext.ngOnDestroy(this)}ngAfterContentChecked(){this.tagObjects[0].instance=this.childButtons,this.containerContext.ngAfterContentChecked(this)}};return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ejs-dialog"]],contentQueries:function(t,i,s){if(1&t&&(d.Suo(s,CX,5),d.Suo(s,EX,5),d.Suo(s,J5,5),d.Suo(s,IX,5)),2&t){let r;d.iGM(r=d.CRH())&&(i.footerTemplate=r.first),d.iGM(r=d.CRH())&&(i.header=r.first),d.iGM(r=d.CRH())&&(i.content=r.first),d.iGM(r=d.CRH())&&(i.childButtons=r.first)}},inputs:{allowDragging:"allowDragging",animationSettings:"animationSettings",buttons:"buttons",closeOnEscape:"closeOnEscape",content:"content",cssClass:"cssClass",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableResize:"enableResize",enableRtl:"enableRtl",footerTemplate:"footerTemplate",header:"header",height:"height",isModal:"isModal",locale:"locale",minHeight:"minHeight",position:"position",resizeHandles:"resizeHandles",showCloseIcon:"showCloseIcon",target:"target",visible:"visible",width:"width",zIndex:"zIndex"},outputs:{beforeClose:"beforeClose",beforeOpen:"beforeOpen",beforeSanitizeHtml:"beforeSanitizeHtml",close:"close",created:"created",destroyed:"destroyed",drag:"drag",dragStart:"dragStart",dragStop:"dragStop",open:"open",overlayClick:"overlayClick",resizeStart:"resizeStart",resizeStop:"resizeStop",resizing:"resizing",visibleChange:"visibleChange"},features:[d.qOj],ngContentSelectors:e4,decls:1,vars:0,template:function(t,i){1&t&&(d.F$t(),d.Hsn(0))},encapsulation:2,changeDetection:0}),dO([Ni(),pO("design:type",Object)],n.prototype,"footerTemplate",void 0),dO([Ni(),pO("design:type",Object)],n.prototype,"header",void 0),dO([Ni(),pO("design:type",Object)],n.prototype,"content",void 0),n=dO([hn([fi]),pO("design:paramtypes",[d.SBq,d.Qsj,d.s_b,d.zs3])],n),n})(),n2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[ti]]}),n})();var i4=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},s4=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)};const AX=["afterClose","afterOpen","beforeClose","beforeCollision","beforeOpen","beforeRender","created","destroyed"],DX=[""];let r2=(()=>{let n=class extends Ns{constructor(t,i,s,r){super(),this.ngEle=t,this.srenderer=i,this.viewContainerRef=s,this.injector=r,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(AX),this.addTwoWay.call(this,DX),ys("currentInstance",this,this.viewContainerRef),this.containerContext=new fi}ngOnInit(){this.containerContext.ngOnInit(this)}ngAfterViewInit(){this.containerContext.ngAfterViewInit(this)}ngOnDestroy(){this.containerContext.ngOnDestroy(this)}ngAfterContentChecked(){this.containerContext.ngAfterContentChecked(this)}};return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ejs-tooltip"]],contentQueries:function(t,i,s){if(1&t&&d.Suo(s,J5,5),2&t){let r;d.iGM(r=d.CRH())&&(i.content=r.first)}},inputs:{animation:"animation",closeDelay:"closeDelay",container:"container",content:"content",cssClass:"cssClass",enableHtmlParse:"enableHtmlParse",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableRtl:"enableRtl",height:"height",isSticky:"isSticky",locale:"locale",mouseTrail:"mouseTrail",offsetX:"offsetX",offsetY:"offsetY",openDelay:"openDelay",opensOn:"opensOn",position:"position",showTipPointer:"showTipPointer",target:"target",tipPointerPosition:"tipPointerPosition",width:"width",windowCollision:"windowCollision"},outputs:{afterClose:"afterClose",afterOpen:"afterOpen",beforeClose:"beforeClose",beforeCollision:"beforeCollision",beforeOpen:"beforeOpen",beforeRender:"beforeRender",created:"created",destroyed:"destroyed"},features:[d.qOj],ngContentSelectors:e4,decls:1,vars:0,template:function(t,i){1&t&&(d.F$t(),d.Hsn(0))},encapsulation:2,changeDetection:0}),n})();i4([Ni(),s4("design:type",Object)],r2.prototype,"content",void 0),r2=i4([hn([fi]),s4("design:paramtypes",[d.SBq,d.Qsj,d.s_b,d.zs3])],r2);const gr=new d.OlP("NgValueAccessor");let Kp="",D2="",wm=[],wO="";function mC(n,e,t,i){const s=e;i=null==i||i;const r={item:null,index:null};if(n&&n.length){const o=n.length,a=i?n.toLocaleLowerCase():n;for(let u=0,p=s;u<p.length;u++){const y=p[u],E=(i?y.textContent.toLocaleLowerCase():y.textContent).replace(/^\s+|\s+$/g,"");if("Equal"===t&&E===a||"StartsWith"===t&&E.substr(0,o)===a||"EndsWith"===t&&E.substr(E.length-a.length)===a||"Contains"===t&&new RegExp(a,"g").test(E))return r.item=y,r.index=u,{item:y,index:u}}return r}return r}function SO(n,e,t,i){if(""!==e){const s=t?"gim":"gm";e=/^[a-zA-Z0-9- ]*$/.test(e)?e:e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),c6(n,new RegExp("StartsWith"===i?"^("+e+")":"EndsWith"===i?"("+e+")$":"("+e+")",s))}}function c6(n,e){for(let t=0;n.childNodes&&t<n.childNodes.length;t++){if(3===n.childNodes[t].nodeType&&""!==n.childNodes[t].textContent.trim()){const i=n.childNodes[t].nodeValue.trim().replace(e,'<span class="e-highlight">$1</span>');n.childNodes[t].nodeValue="",n.innerHTML=n.innerHTML.trim()+i;break}c6(n.childNodes[t],e)}}function MQ(n){const e=n.querySelectorAll(".e-highlight");for(let t=e.length-1;t>=0;t--){const i=e[t].parentNode,s=document.createTextNode(e[t].textContent);i.replaceChild(s,e[t])}}var Yn=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let k2=(()=>{class n extends Is{}return Yn([A()],n.prototype,"text",void 0),Yn([A()],n.prototype,"value",void 0),Yn([A()],n.prototype,"iconCss",void 0),Yn([A()],n.prototype,"groupBy",void 0),Yn([A()],n.prototype,"htmlAttributes",void 0),n})();const Ge_root="e-dropdownbase",Ge_focus="e-item-focus",Ge_li="e-list-item",Ge_group="e-list-group-item";let O2=(()=>{let n=class extends Ls{constructor(t,i){super(t,i),this.preventChange=!1,this.isAngular=!1,this.isPreventChange=!1,this.isDynamicDataChange=!1}getPropObject(t,i,s){const r=new Object,o=new Object;r[t]=i[t],o[t]=s[t];const u=new Object;return u.newProperty=r,u.oldProperty=o,u}getValueByText(t,i,s){let r=null;return m(this.listData)||(r=this.checkValueCase(t,!!i,s)),r}checkValueCase(t,i,s,r){let o=null;r&&(o=t);const a=this.listData,u=this.fields,p=this.typeOfData(a).typeof;if("string"===p||"number"===p||"boolean"===p)for(const y of a)m(y)||(s?o=this.checkingAccent(String(y),t,i):i?this.checkIgnoreCase(String(y),t)&&(o=this.getItemValue(String(y),t,i)):this.checkNonIgnoreCase(String(y),t)&&(o=this.getItemValue(String(y),t,i,r)));else if(i)a.filter(y=>{!m(J(u.value,y))&&this.checkIgnoreCase(J(u.text,y).toString(),t)&&(o=J(u.value,y))});else if(r){let y=null;y=o,a.filter(E=>{const _=J(u.value,E);!m(_)&&!m(o)&&_.toString()===y.toString()&&(o=J(u.text,E))})}else a.filter(y=>{this.checkNonIgnoreCase(J(u.text,y),t)&&(o=J(u.value,y))});return o}checkingAccent(t,i,s){const r=je.ignoreDiacritics(String(t)),o=je.ignoreDiacritics(i.toString());let a=null;return s?this.checkIgnoreCase(r,o)&&(a=this.getItemValue(String(t),i,s)):this.checkNonIgnoreCase(String(t),i)&&(a=this.getItemValue(String(t),i,s)),a}checkIgnoreCase(t,i){return String(t).toLowerCase()===i.toString().toLowerCase()}checkNonIgnoreCase(t,i){return String(t)===i.toString()}getItemValue(t,i,s,r){let o=null;const u=this.typeOfData(this.listData).typeof;return o=r?t.toString():s?"string"===u?String(t):this.getFormattedValue(String(t)):"string"===u?i:this.getFormattedValue(i),o}templateCompiler(t){let i=!1;if(t)try{i=!!at(t,document).length}catch(s){i=!1}return i}l10nUpdate(t){const i="listbox"===this.getModuleName()?this.ulElement:this.list;if("No records found"!==this.noRecordsTemplate||"Request failed"!==this.actionFailureTemplate){const s=t?this.actionFailureTemplate:this.noRecordsTemplate;let r;const o=t?this.actionFailureTemplateId:this.noRecordsTemplateId;i.innerHTML="",r=this.templateCompiler(s)?xs(X(s,document).innerHTML.trim()):xs(s);const p=r({},this,t?"actionFailureTemplate":"noRecordsTemplate",o,this.isStringTemplate,null,i);if(p&&p.length>0)for(let y=0;y<p.length;y++)i.appendChild(p[y]);this.renderReactTemplates()}else{const s={noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed"},r=new Xr(this.getLocaleName(),{},this.locale);this.l10n=""!==r.getConstant("actionFailureTemplate")?r:new Xr("listbox"===this.getModuleName()?"listbox":"dropdowns",s,this.locale);const o=this.l10n.getConstant(t?"actionFailureTemplate":"noRecordsTemplate");if("listbox"===this.getModuleName()){const a=this.createElement("li");a.textContent=o,i.appendChild(a),a.classList.add("e-list-nrt")}else i.innerHTML=o}}getLocaleName(){return"drop-down-base"}getTextByValue(t){return this.checkValueCase(t,!1,!1,!0)}getFormattedValue(t){if(this.listData&&this.listData.length){const i=this.typeOfData(this.listData);if("number"==typeof J(this.fields.value?this.fields.value:"value",i.item)||"number"===i.typeof)return parseFloat(t);if("boolean"==typeof J(this.fields.value?this.fields.value:"value",i.item)||"boolean"===i.typeof)return"true"===t||""+t=="true"}return t}setEnableRtl(){this.list&&this.enableRtlElements.push(this.list),this.enableRtl?j(this.enableRtlElements,"e-rtl"):Y(this.enableRtlElements,"e-rtl")}initialize(){if(this.bindEvent=!0,this.actionFailureTemplateId=`${this.element.id}ActionFailureTemplate`,"UL"===this.element.tagName){const t=ds.createJsonFromElement(this.element);this.setProperties({fields:{text:"text",value:"text"}},!0),this.resetList(t,this.fields)}else"SELECT"===this.element.tagName?(this.dataSource instanceof Array?this.dataSource.length>0:!m(this.dataSource))?this.isDynamicDataChange&&this.setListData(this.dataSource,this.fields,this.query):this.renderItemsBySelect():this.setListData(this.dataSource,this.fields,this.query)}getPersistData(){return this.addOnPersist([])}setEnabled(){this.element.setAttribute("aria-disabled",this.enabled?"false":"true")}updateDataAttribute(t){const i=["class","style","id","type"],s={};for(let r=0;r<this.element.attributes.length;r++)-1===i.indexOf(this.element.attributes[r].name)&&("dropdownlist"!==this.getModuleName()||"readonly"!==this.element.attributes[r].name)&&(s[this.element.attributes[r].name]=this.element.getAttribute(this.element.attributes[r].name));ut(s,t,s),this.setProperties({htmlAttributes:s},!0)}renderItemsBySelect(){const t=this.element,i={value:"value",text:"text"},s=[],r=t.querySelectorAll("select>optgroup"),o=t.querySelectorAll("select>option");if(this.getJSONfromOption(s,o,i),r.length){for(let a=0;a<r.length;a++){const u=r[a],p={};p[i.text]=u.label,p.isHeader=!0;const y=u.querySelectorAll("option");s.push(p),this.getJSONfromOption(s,y,i)}t.querySelectorAll("select>option")}this.updateFields(i.text,i.value,this.fields.groupBy,this.fields.htmlAttributes,this.fields.iconCss),this.resetList(s,i)}updateFields(t,i,s,r,o){const a={fields:{text:t,value:i,groupBy:m(s)?this.fields&&this.fields.groupBy:s,htmlAttributes:m(r)?this.fields&&this.fields.htmlAttributes:r,iconCss:m(o)?this.fields&&this.fields.iconCss:o}};this.setProperties(a,!0)}getJSONfromOption(t,i,s){for(const r of i){const o={};o[s.text]=r.innerText,o[s.value]=m(r.getAttribute(s.value))?r.innerText:r.getAttribute(s.value),t.push(o)}}preRender(){this.scrollTimer=-1,this.enableRtlElements=[],this.isRequested=!1,this.isDataFetched=!1,this.itemTemplateId=`${this.element.id}ItemTemplate`,this.valueTemplateId=`${this.element.id}ValueTemplate`,this.groupTemplateId=`${this.element.id}GroupTemplate`,this.headerTemplateId=`${this.element.id}HeaderTemplate`,this.footerTemplateId=`${this.element.id}FooterTemplate`,this.noRecordsTemplateId=`${this.element.id}NoRecordsTemplate`}setListData(t,i,s){let r;i=i||this.fields,this.isActive=!0;const o={cancel:!1,data:t,query:s};this.isPreventChange=!(!this.isAngular||!this.preventChange)||this.isPreventChange,this.trigger("actionBegin",o,a=>{if(!a.cancel)if(this.showSpinner(),t instanceof Nt){if(this.isRequested=!0,this.isDataFetched)return void this.emptyDataRequest(i);a.data.executeQuery(this.getQuery(a.query)).then(u=>{this.isPreventChange=!(!this.isAngular||!this.preventChange)||this.isPreventChange,this.trigger("actionComplete",u,p=>{if(!p.cancel){const y=p.result;0===y.length&&(this.isDataFetched=!0),r=this.renderItems(y,i),this.onActionComplete(r,y,p),this.groupTemplate&&this.renderGroupTemplate(r),this.isRequested=!1,this.bindChildItems(y,r,i,p)}})}).catch(u=>{this.isRequested=!1,this.onActionFailure(u),this.hideSpinner()})}else{const u=new Nt(a.data),y={cancel:!1,result:this.getQuery(a.query).executeLocal(u)};this.isPreventChange=!(!this.isAngular||!this.preventChange)||this.isPreventChange,this.trigger("actionComplete",y,E=>{E.cancel||(r=this.renderItems(E.result,i),this.onActionComplete(r,E.result),this.groupTemplate&&this.renderGroupTemplate(r),this.bindChildItems(E.result,r,i),setTimeout(()=>{"multiselect"===this.getModuleName()&&null!=this.itemTemplate&&r.childElementCount>0&&(r.children[0].childElementCount>0||this.fields.groupBy&&r.children[1]&&r.children[1].childElementCount>0)&&this.updateDataList()}))})}})}bindChildItems(t,i,s,r){t.length>=100&&"autocomplete"===this.getModuleName()?setTimeout(()=>{Pi(this.remainingItems(this.sortedData,s),i),this.liCollections=this.list.querySelectorAll("."+Ge_li),this.updateListValues(),this.raiseDataBound(t,r)},0):this.raiseDataBound(t,r)}updateListValues(){}findListElement(t,i,s,r){let o=null;if(t){const a=[].slice.call(t.querySelectorAll(i));for(let u=0;u<a.length;u++)if(a[u].getAttribute(s)===r+""){o=a[u];break}}return o}raiseDataBound(t,i){this.hideSpinner(),this.trigger("dataBound",{items:t,e:i})}remainingItems(t,i){const s=new Nt(t).executeLocal((new Fi).skip(100));if(this.itemTemplate){const o=this.templateListItem(s,i);return[].slice.call(o.childNodes)}const r=this.typeOfData(s).typeof;return"string"===r||"number"===r||"boolean"===r?ds.createListItemFromArray(this.createElement,s,!0,this.listOption(s,i),this):ds.createListItemFromJson(this.createElement,s,this.listOption(s,i),1,!0,this)}emptyDataRequest(t){const i=[];this.onActionComplete(this.renderItems(i,t),i),this.isRequested=!1,this.hideSpinner()}showSpinner(){}hideSpinner(){}onActionFailure(t){this.liCollections=[],this.trigger("actionFailure",t),this.l10nUpdate(!0),j([this.list],"e-nodata")}onActionComplete(t,i,s){if(this.listData=i,this.isReact&&this.clearTemplate(["itemTemplate","groupTemplate","actionFailureTemplate","noRecordsTemplate"]),this.fixedHeaderElement=m(this.fixedHeaderElement)?this.fixedHeaderElement:null,"multiselect"===this.getModuleName()&&this.properties.allowCustomValue&&this.fields.groupBy)for(let r=0;r<t.childElementCount;r++)t.children[r].classList.contains("e-list-group-item")&&(m(t.children[r].innerHTML)||""==t.children[r].innerHTML)&&j([t.children[r]],"e-hide-group-header");m(this.list)||(this.list.innerHTML="",this.list.appendChild(t),this.liCollections=this.list.querySelectorAll("."+Ge_li),this.ulElement=this.list.querySelector("ul"),this.postRender(this.list,i,this.bindEvent))}postRender(t,i,s){const r=t.querySelector("."+Ge_li),o=t.querySelector(".e-active");r&&!o&&r.classList.add(Ge_focus),i.length<=0?(this.l10nUpdate(),j([t],"e-nodata")):t.classList.remove("e-nodata")}getQuery(t){return t||(this.query?this.query:new Fi)}renderGroupTemplate(t){if(null!==this.fields.groupBy&&this.dataSource||this.element.querySelector("."+Ge_group)){const i=this.dataSource,s={groupTemplateID:this.groupTemplateId,isStringTemplate:this.isStringTemplate},r=t.querySelectorAll("."+Ge_group);if(this.templateCompiler(this.groupTemplate)){const a=X(this.groupTemplate,document).innerHTML.trim(),u=ds.renderGroupTemplate(a,i,this.fields.properties,r,s,this);if(this.isGroupChecking)for(let p=0;p<u.length;p++)this.notify("addItem",{module:"CheckBoxSelection",item:u[p]})}else{const a=ds.renderGroupTemplate(this.groupTemplate,i,this.fields.properties,r,s,this);if(this.isGroupChecking)for(let u=0;u<a.length;u++)this.notify("addItem",{module:"CheckBoxSelection",item:a[u]})}this.renderReactTemplates()}}createListItems(t,i){t&&i.groupBy||this.element.querySelector("optgroup")?(i.groupBy&&("None"!==this.sortOrder&&(t=this.getSortedDataSource(t)),t=ds.groupDataSource(t,i.properties,this.sortOrder)),j([this.list],"e-dd-group")):t=this.getSortedDataSource(t);const s=this.listOption(t,i),r=t.length>100?new Nt(t).executeLocal((new Fi).take(100)):t;return this.sortedData=t,ds.createList(this.createElement,"autocomplete"===this.getModuleName()?r:t,s,!0,this)}listOption(t,i){const s=!m(i.iconCss),r=m(i.properties)?i:i.properties;return ut({},null!==i.text||null!==i.value?{fields:r,showIcon:s,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},i,!0)}setFloatingHeader(t){m(this.fixedHeaderElement)&&(this.fixedHeaderElement=this.createElement("div",{className:"e-fixed-head"}),this.list.querySelector("li").classList.contains(Ge_group)||(this.fixedHeaderElement.style.display="none"),Tr([this.fixedHeaderElement],this.list),this.setFixedHeader()),!m(this.fixedHeaderElement)&&"0"===this.fixedHeaderElement.style.zIndex&&this.setFixedHeader(),this.scrollStop(t)}scrollStop(t){let i=m(t)?this.list:t.target,s=parseInt(getComputedStyle(this.getValidLi(),null).getPropertyValue("height"),10);const r=Math.round(i.scrollTop/s),o=this.list.querySelectorAll("li:not(.e-hide-listitem)");for(let a=r;a>-1;a--){if(!m(o[a])&&o[a].classList.contains(Ge_group)){this.fixedHeaderElement.innerHTML=o[a].innerHTML,this.fixedHeaderElement.style.top=i.scrollTop+"px",this.fixedHeaderElement.style.display="block";break}this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none"}}getValidLi(){return this.liCollections[0]}renderItems(t,i){let s;if(this.itemTemplate&&t){let r=t;r&&i.groupBy?("None"!==this.sortOrder&&(r=this.getSortedDataSource(r)),r=ds.groupDataSource(r,i.properties,this.sortOrder)):r=this.getSortedDataSource(r),this.sortedData=r;const o=r.length>100?new Nt(r).executeLocal((new Fi).take(100)):r;s=this.templateListItem("autocomplete"===this.getModuleName()?o:r,i)}else s=this.createListItems(t,i);return s}templateListItem(t,i){const s=this.listOption(t,i);if(s.templateID=this.itemTemplateId,s.isStringTemplate=this.isStringTemplate,this.templateCompiler(this.itemTemplate)){const o=X(this.itemTemplate,document).innerHTML.trim();return ds.renderContentTemplate(this.createElement,o,t,i.properties,s,this)}return ds.renderContentTemplate(this.createElement,this.itemTemplate,t,i.properties,s,this)}typeOfData(t){for(let s=0;!m(t)&&s<t.length;s++)if(!m(t[s])&&!m("string"==typeof t[s]||"number"==typeof t[s]||"boolean"==typeof t[s]?t[s]:J(this.fields.value?this.fields.value:"value",t[s])))return{typeof:typeof t[s],item:t[s]};return{typeof:null,item:null}}setFixedHeader(){this.list.parentElement.style.display="block";let t=0;this.list&&this.list.parentElement&&(t=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10),isNaN(t))&&(t=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-top-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-bottom-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-left-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-right-width"),10));const i=this.getValidLi().offsetWidth-t;this.fixedHeaderElement.style.width=i.toString()+"px",It(this.fixedHeaderElement,{zIndex:10});const s=this.ulElement.querySelector("."+Ge_group+":not(.e-hide-listitem)");this.fixedHeaderElement.innerHTML=s.innerHTML}getSortedDataSource(t){if(t&&"None"!==this.sortOrder){let i=this.fields.text?this.fields.text:"text";("string"===this.typeOfData(t).typeof||"number"===this.typeOfData(t).typeof||"boolean"===this.typeOfData(t).typeof)&&(i=""),t=ds.getDataSource(t,ds.addSorting(this.sortOrder,i))}return t}getIndexByValue(t){let i;const s=this.getItems();for(let r=0;r<s.length;r++)if(!m(t)&&s[r].getAttribute("data-value")===t.toString()){i=r;break}return i}dispatchEvent(t,i){const s=document.createEvent("HTMLEvents");s.initEvent(i,!1,!0),t.dispatchEvent(s)}setFields(){this.fields.value&&!this.fields.text?this.updateFields(this.fields.value,this.fields.value):!this.fields.value&&this.fields.text?this.updateFields(this.fields.text,this.fields.text):!this.fields.value&&!this.fields.text&&this.updateFields("text","text")}resetList(t,i,s){this.list&&(("SELECT"===this.element.tagName&&this.element.options.length>0||"UL"===this.element.tagName&&this.element.childNodes.length>0)&&!(t instanceof Array?t.length>0:!m(t))&&this.selectData&&this.selectData.length>0&&(t=this.selectData),this.setListData(t,i,s))}updateSelectElementData(t){t&&m(this.selectData)&&this.listData&&this.listData.length>0&&(this.selectData=this.listData)}updateSelection(){}renderList(){this.render()}updateDataSource(t){this.resetList(this.dataSource)}setUpdateInitial(t,i){this.isDataFetched=!1;const s={};for(let r=0;t.length>r;r++)i[t[r]]&&"fields"===t[r]?(this.setFields(),s[t[r]]=i[t[r]]):i[t[r]]&&(s[t[r]]=i[t[r]]);Object.keys(s).length>0&&(-1===Object.keys(s).indexOf("dataSource")&&(s.dataSource=this.dataSource),this.updateDataSource(s))}onPropertyChanged(t,i){"dropdownbase"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],t),this.setUpdateInitial(["sortOrder","itemTemplate"],t);for(const s of Object.keys(t))switch(s){case"query":case"sortOrder":case"dataSource":case"itemTemplate":break;case"enableRtl":this.setEnableRtl();break;case"enabled":this.setEnabled();break;case"groupTemplate":if(this.renderGroupTemplate(this.list),this.ulElement&&this.fixedHeaderElement){const r=this.ulElement.querySelector("."+Ge_group);this.fixedHeaderElement.innerHTML=r.innerHTML}break;case"locale":this.list&&!m(this.liCollections)&&0===this.liCollections.length&&this.l10nUpdate();break;case"zIndex":this.setProperties({zIndex:t.zIndex},!0),this.setZIndex()}}render(t){this.list=this.createElement("div",{className:"e-content",attrs:{tabindex:"0"}}),this.list.classList.add(Ge_root),this.setFields(),this.rippleFun=da(this.list,{duration:300,selector:"."+Ge_li});const s=this.element.querySelector("select>optgroup");if((this.fields.groupBy||!m(s))&&!this.isGroupChecking&&O.add(this.list,"scroll",this.setFloatingHeader,this),"dropdownbase"===this.getModuleName()){this.element.getAttribute("tabindex")&&this.list.setAttribute("tabindex",this.element.getAttribute("tabindex")),Y([this.element],Ge_root),this.element.style.display="none";const r=this.createElement("div");this.element.parentElement.insertBefore(r,this.element),r.appendChild(this.element),r.appendChild(this.list)}this.setEnableRtl(),this.setEnabled(),t||this.initialize()}getModuleName(){return"dropdownbase"}getItems(){return this.ulElement.querySelectorAll("."+Ge_li)}addItem(t,i){if((!this.list||this.list.textContent===this.noRecordsTemplate&&"listbox"!==this.getModuleName())&&this.renderList(),"None"!==this.sortOrder&&m(i)){let p=[].slice.call(this.listData);p.push(t),p=this.getSortedDataSource(p),this.fields.groupBy&&(p=ds.groupDataSource(p,this.fields.properties,this.sortOrder)),i=p.indexOf(t)}const s=this.getItems().length,r=this.list.querySelector(".e-active");let o;t=t instanceof Array?t:[t],o=m(i)||i<0||i>s-1?s:i;const a=this.fields;t&&a.groupBy&&(t=ds.groupDataSource(t,a.properties));const u=[];for(let p=0;p<t.length;p++){const y=t[p],E=y.isHeader,_=this.createElement("li",{className:E?Ge_group:Ge_li,id:"option-add-"+p}),D=y instanceof Object?J(a.text,y):y;if(E&&(_.innerText=D),this.itemTemplate&&!E){const H=xs(this.templateCompiler(this.itemTemplate)?X(this.itemTemplate,document).innerHTML.trim():this.itemTemplate)(y,this,"itemTemplate",this.itemTemplateId,this.isStringTemplate,null,_);H&&Pi(H,_)}else E||_.appendChild(document.createTextNode(D));_.setAttribute("data-value",y instanceof Object?J(a.value,y):y),_.setAttribute("role","option"),this.notify("addItem",{module:"CheckBoxSelection",item:_}),u.push(_),this.listData.push(y),"None"===this.sortOrder&&m(i)&&0===o&&(o=null),this.updateActionCompleteData(_,y,o),this.trigger("beforeItemRender",{element:_,item:y})}if(0===s&&m(this.list.querySelector("ul")))this.list.innerHTML="",this.list.classList.remove("e-nodata"),this.list.appendChild(this.ulElement),this.liCollections=u,Pi(u,this.ulElement),this.updateAddItemList(this.list,s);else{"listbox"===this.getModuleName()&&0===s&&(this.ulElement.innerHTML="");const p=[];for(let y=0;y<t.length;y++){const E=this.ulElement.querySelectorAll(".e-list-group-item");for(let D=0;D<E.length;D++)p[D]=E[D].innerText;if(p.indexOf(u[y].innerText)>-1&&a.groupBy){for(let D=0;D<E.length;D++)if(p[D]===u[y].innerText){this.ulElement.insertBefore(u[y+1],"None"===this.sortOrder?E[D+1]:this.ulElement.childNodes[i]),y+=1;break}}else this.liCollections[o]?this.liCollections[o].parentNode.insertBefore(u[y],this.liCollections[o]):this.ulElement.appendChild(u[y]);const _=[].slice.call(this.liCollections);_.splice(o,0,u[y]),this.liCollections=_,o+=1,"multiselect"===this.getModuleName()&&this.updateDataList()}}(r||0===i)&&this.updateSelection()}validationAttribute(t,i){const s=t.getAttribute("name")?t.getAttribute("name"):t.getAttribute("id");i.setAttribute("name",s),t.removeAttribute("name");const r=["required","aria-required","form"];for(let o=0;o<r.length;o++){if(!t.getAttribute(r[o]))continue;const a=t.getAttribute(r[o]);i.setAttribute(r[o],a),t.removeAttribute(r[o])}}setZIndex(){}updateActionCompleteData(t,i,s){}updateAddItemList(t,i){}updateDataList(){}getDataByValue(t){if(!m(this.listData)){const i=this.typeOfData(this.listData).typeof;if("string"===i||"number"===i||"boolean"===i){for(const s of this.listData)if(!m(s)&&s===t)return s}else for(const s of this.listData)if(!m(s)&&J(this.fields.value?this.fields.value:"value",s)===t)return s}return null}destroy(){document.body.contains(this.list)&&(O.remove(this.list,"scroll",this.setFloatingHeader),m(this.rippleFun)||this.rippleFun(),ye(this.list)),super.destroy()}};return Yn([Ps({text:null,value:null,iconCss:null,groupBy:null},k2)],n.prototype,"fields",void 0),Yn([A(!1)],n.prototype,"enablePersistence",void 0),Yn([A(null)],n.prototype,"itemTemplate",void 0),Yn([A(null)],n.prototype,"groupTemplate",void 0),Yn([A("No records found")],n.prototype,"noRecordsTemplate",void 0),Yn([A("Request failed")],n.prototype,"actionFailureTemplate",void 0),Yn([A("None")],n.prototype,"sortOrder",void 0),Yn([A(!0)],n.prototype,"enabled",void 0),Yn([A([])],n.prototype,"dataSource",void 0),Yn([A(null)],n.prototype,"query",void 0),Yn([A("StartsWith")],n.prototype,"filterType",void 0),Yn([A(!0)],n.prototype,"ignoreCase",void 0),Yn([A(1e3)],n.prototype,"zIndex",void 0),Yn([A(!1)],n.prototype,"ignoreAccent",void 0),Yn([A()],n.prototype,"locale",void 0),Yn([Z()],n.prototype,"actionBegin",void 0),Yn([Z()],n.prototype,"actionComplete",void 0),Yn([Z()],n.prototype,"actionFailure",void 0),Yn([Z()],n.prototype,"select",void 0),Yn([Z()],n.prototype,"dataBound",void 0),Yn([Z()],n.prototype,"created",void 0),Yn([Z()],n.prototype,"destroyed",void 0),n=Yn([ts],n),n})();var yr=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const Xt={root:"e-dropdownlist",hover:"e-hover",selected:"e-active",rtl:"e-rtl",li:Ge_li,disable:"e-disabled",base:Ge_root,focus:Ge_focus,input:"e-input-group",inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",mobileFilter:"e-ddl-device-filter",footer:"e-ddl-footer",header:"e-ddl-header",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page",disableIcon:"e-ddl-disable-icon",hiddenElement:"e-ddl-hidden"},jQ={container:null,buttons:[]};let Bn=class extends O2{constructor(e,t){super(e,t),this.isListSearched=!1,this.preventChange=!1,this.isAngular=!1}preRender(){this.valueTempElement=null,this.element.style.opacity="0",this.initializeData(),super.preRender(),this.activeIndex=this.index,this.queryString=""}initializeData(){this.isPopupOpen=!1,this.isDocumentClick=!1,this.isInteracted=!1,this.isFilterFocus=!1,this.beforePopupOpen=!1,this.initial=!0,this.initRemoteRender=!1,this.isNotSearchList=!1,this.isTyped=!1,this.isSelected=!1,this.preventFocus=!1,this.preventAutoFill=!1,this.isValidKey=!1,this.typedString="",this.isEscapeKey=!1,this.isPreventBlur=!1,this.isTabKey=!1,this.actionCompleteData={isUpdated:!1},this.actionData={isUpdated:!1},this.prevSelectPoints={},this.isSelectCustom=!1,this.isDropDownClick=!1,this.preventAltUp=!1,this.isCustomFilter=!1,this.isSecondClick=!1,this.previousValue=null,this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"}}setZIndex(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})}renderList(e){super.render(e),this.unWireListEvents(),this.wireListEvents()}floatLabelChange(){if("dropdownlist"===this.getModuleName()&&"Auto"===this.floatLabelType){const e=this.inputWrapper.container.querySelector(".e-float-text");""!==this.inputElement.value||this.isInteracted?ua(e,["e-label-top"],["e-label-bottom"]):ua(e,["e-label-bottom"],["e-label-top"])}}resetHandler(e){e.preventDefault(),this.clearAll(e)}resetFocusElement(){if(this.removeHover(),this.removeSelection(),this.removeFocus(),this.list.scrollTop=0,"autocomplete"!==this.getModuleName()&&!m(this.ulElement)){const e=this.ulElement.querySelector("."+Xt.li);e&&e.classList.add(Xt.focus)}}clearAll(e,t){(m(t)||!m(t)&&(m(t.dataSource)||!(t.dataSource instanceof Nt)&&0===t.dataSource.length))&&(this.isActive=!0,this.resetSelection(t));const i=this.getItemData();this.previousValue!==i.value&&this.onChangeEvent(e)}resetSelection(e){this.list&&(m(e)||!m(e.dataSource)&&(e.dataSource instanceof Nt||0!==e.dataSource.length)?(this.allowFiltering&&"autocomplete"!==this.getModuleName()&&!m(this.actionCompleteData.ulElement)&&!m(this.actionCompleteData.list)&&this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(!0),this.actionCompleteData.list),this.resetFocusElement()):(this.selectedLI=null,this.actionCompleteData.isUpdated=!1,this.actionCompleteData.ulElement=null,this.actionCompleteData.list=null,this.resetList(e.dataSource))),this.hiddenElement.innerHTML="",this.inputElement.value="",this.value=null,this.itemData=null,this.text=null,this.index=null,this.activeIndex=null,this.item=null,this.queryString="",this.valueTempElement&&(ye(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null),this.setSelection(null,null),this.isSelectCustom=!1,this.updateIconState(),this.cloneElements()}setHTMLAttributes(){if(Object.keys(this.htmlAttributes).length)for(const e of Object.keys(this.htmlAttributes))if("class"===e){const t=this.htmlAttributes[e].replace(/\s+/g," ").trim();""!==t&&j([this.inputWrapper.container],t.split(" "))}else if("disabled"===e&&"disabled"===this.htmlAttributes[e])this.enabled=!1,this.setEnable();else if("readonly"!==e||m(this.htmlAttributes[e]))if("style"===e)this.inputWrapper.container.setAttribute("style",this.htmlAttributes[e]);else{const t=["title","id","placeholder","aria-placeholder","role","autocorrect","autocomplete","autocapitalize","spellcheck","minlength","maxlength"],i=["name","required"];("autocomplete"===this.getModuleName()||"combobox"===this.getModuleName())&&t.push("tabindex"),i.indexOf(e)>-1||0===e.indexOf("data")?this.hiddenElement.setAttribute(e,this.htmlAttributes[e]):t.indexOf(e)>-1?"placeholder"===e?ft.setPlaceholder(this.htmlAttributes[e],this.inputElement):this.inputElement.setAttribute(e,this.htmlAttributes[e]):this.inputWrapper.container.setAttribute(e,this.htmlAttributes[e])}else this.readonly=!0,this.dataBind();("autocomplete"===this.getModuleName()||"combobox"===this.getModuleName())&&this.inputWrapper.container.removeAttribute("tabindex")}getAriaAttributes(){return{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-haspopup":"true","aria-expanded":"false","aria-activedescendant":"null","aria-live":"polite","aria-labelledby":this.hiddenElement.id}}setEnableRtl(){ft.setEnableRtl(this.enableRtl,[this.inputElement.parentElement]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())}setEnable(){ft.setEnabled(this.enabled,this.inputElement),this.enabled?(Y([this.inputWrapper.container],Xt.disable),this.inputElement.setAttribute("aria-disabled","false"),this.targetElement().setAttribute("tabindex",this.tabIndex)):(this.hidePopup(),j([this.inputWrapper.container],Xt.disable),this.inputElement.setAttribute("aria-disabled","true"),this.targetElement().tabIndex=-1)}getPersistData(){return this.addOnPersist(["value"])}getLocaleName(){return"drop-down-list"}preventTabIndex(e){"dropdownlist"===this.getModuleName()&&(e.tabIndex=-1)}targetElement(){return this.inputWrapper.container}getNgDirective(){return"EJS-DROPDOWNLIST"}getElementByText(e){return this.getElementByValue(this.getValueByText(e))}getElementByValue(e){let t;const i=this.getItems();for(const s of i)if(this.getFormattedValue(s.getAttribute("data-value"))===e){t=s;break}return t}initValue(){this.renderList(),this.dataSource instanceof Nt?this.initRemoteRender=!0:this.updateValues()}updateValues(){if(m(this.value))if(this.text&&m(this.value)){const e=this.getElementByText(this.text);if(m(e))return void this.setProperties({text:null});this.setSelection(e,null)}else this.setSelection(this.liCollections[this.activeIndex],null);else this.setSelection(this.getElementByValue(this.value),null);this.setHiddenValue(),ft.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)}onBlurHandler(e){if(!this.enabled)return;const t=e.relatedTarget,i=e.target,s=this.isPreventBlur;this.isPreventBlur=!1,!s||this.isDocumentClick||!this.isPopupOpen||m(i)&&(this.isFilterLayout()||!m(t))?this.isDocumentClick||!m(this.popupObj)&&document.body.contains(this.popupObj.element)&&this.popupObj.element.classList.contains(Xt.mobileFilter)?this.beforePopupOpen||(this.isDocumentClick=!1):(("dropdownlist"===this.getModuleName()&&!this.isFilterFocus&&t!==this.inputElement&&(document.activeElement!==t||document.activeElement===t&&i.classList.contains(Xt.inputFocus))||m(t)&&"dropdownlist"===this.getModuleName()&&this.allowFiltering&&i!==this.inputWrapper.container||"dropdownlist"!==this.getModuleName()&&!this.inputWrapper.container.contains(t)||this.isTabKey)&&(this.isDocumentClick=!!this.isPopupOpen,this.focusOutAction(e),this.isTabKey=!1),this.isRequested&&!this.isPopupOpen&&!this.isPreventBlur&&(this.isActive=!1,this.beforePopupOpen=!1)):"dropdownlist"===this.getModuleName()&&this.allowFiltering&&this.isPopupOpen?this.filterInput.focus():this.targetElement().focus()}focusOutAction(e){this.isInteracted=!1,this.focusOut(e),this.onFocusOut()}onFocusOut(){!this.enabled||(this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(null)),this.floatLabelChange(),this.dispatchEvent(this.hiddenElement,"change"),"dropdownlist"===this.getModuleName()&&"INPUT"!==this.element.tagName&&this.dispatchEvent(this.inputElement,"blur"),this.inputWrapper.clearButton&&j([this.inputWrapper.clearButton],Xt.clearIconHide),this.trigger("blur"))}onFocus(e){this.isInteracted||(this.isInteracted=!0,this.trigger("focus",{isInteracted:!!e,event:e})),this.updateIconState()}resetValueHandler(e){const t=ae(this.inputElement,"form");if(t&&e.target===t){const i=this.element.tagName===this.getNgDirective()?null:this.inputElement.getAttribute("value");this.text=i}}wireEvent(){O.add(this.inputWrapper.container,"mousedown",this.dropDownClick,this),O.add(this.inputWrapper.container,"focus",this.focusIn,this),O.add(this.inputWrapper.container,"keypress",this.onSearch,this),this.bindCommonEvent()}bindCommonEvent(){O.add(this.targetElement(),"blur",this.onBlurHandler,this);const e=ae(this.inputElement,"form");e&&O.add(e,"reset",this.resetValueHandler,this),this.keyboardModule=new Pn(this.targetElement(),Q.isDevice?{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}:{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.bindClearEvent()}bindClearEvent(){this.showClearButton&&O.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this)}unBindCommonEvent(){this.targetElement()&&O.remove(this.targetElement(),"blur",this.onBlurHandler);const e=this.inputElement&&ae(this.inputElement,"form");e&&O.remove(e,"reset",this.resetValueHandler),Q.isDevice||this.keyboardModule.destroy(),this.showClearButton&&O.remove(this.inputWrapper.clearButton,"mousedown",this.resetHandler)}updateIconState(){this.showClearButton&&(""===this.inputElement.value||this.readonly?j([this.inputWrapper.clearButton],Xt.clearIconHide):Y([this.inputWrapper.clearButton],Xt.clearIconHide))}wireListEvents(){O.add(this.list,"click",this.onMouseClick,this),O.add(this.list,"mouseover",this.onMouseOver,this),O.add(this.list,"mouseout",this.onMouseLeave,this)}onSearch(e){32!==e.charCode&&13!==e.charCode&&(void 0===this.list&&this.renderList(),this.searchKeyEvent=e,this.onServerIncrementalSearch(e))}onServerIncrementalSearch(e){!this.isRequested&&!m(this.list)&&!m(this.list.querySelector("li"))&&this.enabled&&!this.readonly&&this.incrementalSearch(e)}onMouseClick(e){const i=ae(e.target,"."+Ge_li);!this.isValidLI(i)||(this.setSelection(i,e),Q.isDevice&&this.isFilterLayout()?history.back():this.closePopup(100))}onMouseOver(e){const t=ae(e.target,"."+Ge_li);this.setHover(t)}setHover(e){this.enabled&&this.isValidLI(e)&&!e.classList.contains("e-hover")&&(this.removeHover(),j([e],"e-hover"))}onMouseLeave(){this.removeHover()}removeHover(){if(this.list){const e=this.list.querySelectorAll(".e-hover");e&&e.length&&Y(e,"e-hover")}}isValidLI(e){return e&&e.hasAttribute("role")&&"option"===e.getAttribute("role")}incrementalSearch(e){if(this.liCollections.length>0){const t=function kQ(n,e,t,i,s){let r;if(Kp+=String.fromCharCode(n),setTimeout(()=>{Kp=""},1e3),Kp=i?Kp.toLowerCase():Kp,wO===s&&D2===Kp){for(let o=0;o<wm.length;o++)if(wm[o].classList.contains("e-active")){r=o;break}return r+=1,wm[r]?wm[r]:wm[0]}{const o=e,a=Kp.length;let u,p,y=t=t?t+1:0;wm=[];do{y===o.length&&(y=-1),r=-1===y?0:y,p=o[r],u=i?p.innerText.toLowerCase():p.innerText,u.substr(0,a)===Kp&&wm.push(o[r]),y++}while(y!==t);return D2=Kp,wO=s,wm[0]}}(e.charCode,this.liCollections,this.activeIndex,!0,this.element.id);m(t)||(this.setSelection(t,e),this.setScrollPosition())}}hideSpinner(){m(this.spinnerElement)||(hl(this.spinnerElement),Y([this.spinnerElement],Xt.disableIcon),this.spinnerElement.innerHTML="",this.spinnerElement=null)}showSpinner(){m(this.spinnerElement)&&(this.spinnerElement=Q.isDevice&&!m(this.filterInputObj)&&this.filterInputObj.buttons[1]||!m(this.filterInputObj)&&this.filterInputObj.buttons[0]||this.inputWrapper.buttons[0],j([this.spinnerElement],Xt.disableIcon),Zc({target:this.spinnerElement,width:Q.isDevice?"16px":"14px"},this.createElement),Bl(this.spinnerElement))}keyActionHandler(e){if(!this.enabled)return;const t="pageUp"===e.action||"pageDown"===e.action,i="dropdownlist"!==this.getModuleName()&&("home"===e.action||"end"===e.action);this.isEscapeKey="escape"===e.action,this.isTabKey=!this.isPopupOpen&&"tab"===e.action;const r="down"===e.action||"up"===e.action||"pageUp"===e.action||"pageDown"===e.action||"home"===e.action||"end"===e.action;if((!(this.isEditTextBox()||t||i)||this.isPopupOpen)&&!this.readonly){const o="tab"===e.action||"close"===e.action;if(void 0===this.list&&!this.isRequested&&!o&&"escape"!==e.action&&(this.searchKeyEvent=e,this.renderList()),m(this.list)||!m(this.liCollections)&&r&&0===this.liCollections.length||this.isRequested)return;switch((o&&"autocomplete"!==this.getModuleName()&&this.isPopupOpen||"escape"===e.action)&&e.preventDefault(),this.isSelected="escape"!==e.action&&this.isSelected,this.isTyped=!r&&"escape"!==e.action&&this.isTyped,e.action){case"down":case"up":this.updateUpDownAction(e);break;case"pageUp":this.pageUpSelection(this.activeIndex-this.getPageCount(),e),e.preventDefault();break;case"pageDown":this.pageDownSelection(this.activeIndex+this.getPageCount(),e),e.preventDefault();break;case"home":case"end":this.updateHomeEndAction(e);break;case"space":"dropdownlist"===this.getModuleName()&&(this.beforePopupOpen||this.showPopup());break;case"open":this.showPopup();break;case"hide":this.preventAltUp=this.isPopupOpen,this.hidePopup(e),this.focusDropDown(e);break;case"enter":this.selectCurrentItem(e);break;case"tab":this.selectCurrentValueOnTab(e);break;case"escape":case"close":this.isPopupOpen&&(this.hidePopup(e),this.focusDropDown(e))}}}updateUpDownAction(e){const t=this.list.querySelector("."+Xt.focus);if(this.isSelectFocusItem(t))this.setSelection(t,e);else if(!m(this.liCollections)){let i="down"===e.action?this.activeIndex+1:this.activeIndex-1,s=0;"autocomplete"===this.getModuleName()&&(s="down"===e.action&&m(this.activeIndex)?0:this.liCollections.length-1,i=i<0?this.liCollections.length-1:i===this.liCollections.length?0:i);const r=m(this.activeIndex)?this.liCollections[s]:this.liCollections[i];m(r)||this.setSelection(r,e)}e.preventDefault()}updateHomeEndAction(e){if("dropdownlist"===this.getModuleName()){let t=0;if(t="home"===e.action?0:this.getItems().length-1,e.preventDefault(),this.activeIndex===t)return;this.setSelection(this.liCollections[t],e)}}selectCurrentValueOnTab(e){"autocomplete"===this.getModuleName()?this.selectCurrentItem(e):this.isPopupOpen&&(this.hidePopup(e),this.focusDropDown(e))}mobileKeyActionHandler(e){if(this.enabled&&(!this.isEditTextBox()||this.isPopupOpen)&&!this.readonly){if(void 0===this.list&&!this.isRequested&&(this.searchKeyEvent=e,this.renderList()),m(this.list)||!m(this.liCollections)&&0===this.liCollections.length||this.isRequested)return;"enter"===e.action&&this.selectCurrentItem(e)}}selectCurrentItem(e){if(this.isPopupOpen){const t=this.list.querySelector("."+Xt.focus);t&&(this.setSelection(t,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e)),this.hidePopup(),this.focusDropDown(e)}else this.showPopup()}isSelectFocusItem(e){return!m(e)}getPageCount(){const e=this.list.classList.contains("e-nodata")?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.getBoundingClientRect().height/parseInt(e,10))}pageUpSelection(e,t){this.setSelection(e>=0?this.liCollections[e+1]:this.liCollections[0],t)}pageDownSelection(e,t){const i=this.getItems();this.setSelection(e<=i.length?this.liCollections[e-1]:this.liCollections[i.length-1],t)}unWireEvent(){O.remove(this.inputWrapper.container,"mousedown",this.dropDownClick),O.remove(this.inputWrapper.container,"keypress",this.onSearch),O.remove(this.inputWrapper.container,"focus",this.focusIn),this.unBindCommonEvent()}unWireListEvents(){O.remove(this.list,"click",this.onMouseClick),O.remove(this.list,"mouseover",this.onMouseOver),O.remove(this.list,"mouseout",this.onMouseLeave)}checkSelector(e){return'[id="'+e.replace(/(:|\.|\[|\]|,|=|@|\\|\/|#)/g,"\\$1")+'"]'}onDocumentClick(e){const t=e.target;if(!m(this.popupObj)&&ae(t,this.checkSelector(this.popupObj.element.id))||this.inputWrapper.container.contains(e.target))t!==this.inputElement&&(!this.allowFiltering||t!==this.filterInput)&&("combobox"!==this.getModuleName()||this.allowFiltering||!Q.isDevice||t!==this.inputWrapper.buttons[0])&&(this.isPreventBlur=(Q.isIE||"edge"===Q.info.name)&&(document.activeElement===this.targetElement()||document.activeElement===this.filterInput),e.preventDefault());else if(this.inputWrapper.container.classList.contains(Xt.inputFocus)||this.isPopupOpen){this.isDocumentClick=!0;const i=this.isRequested;this.isInteracted=!1,this.hidePopup(e),i||(this.onFocusOut(),this.inputWrapper.container.classList.remove(Xt.inputFocus))}}activeStateChange(){this.isDocumentClick&&(this.hidePopup(),this.onFocusOut(),this.inputWrapper.container.classList.remove(Xt.inputFocus))}focusDropDown(e){!this.initial&&this.isFilterLayout()&&this.focusIn(e)}dropDownClick(e){if(3===e.which||2===e.button||this.targetElement().classList.contains(Xt.disable)||this.inputWrapper.clearButton===e.target)return;const t=e.target;if(t!==this.inputElement&&!(this.allowFiltering&&t===this.filterInput)&&"combobox"!==this.getModuleName()&&e.preventDefault(),this.readonly)this.focusIn(e);else{this.isPopupOpen?(this.hidePopup(),this.isFilterLayout()&&this.focusDropDown(e)):(this.focusIn(e),this.floatLabelChange(),this.queryString=""===this.inputElement.value.trim()?null:this.inputElement.value,this.isDropDownClick=!0,this.showPopup());const i=this,s=this.element.tagName===this.getNgDirective()&&this.itemTemplate?500:100;this.isSecondClick||setTimeout(()=>{i.cloneElements(),i.isSecondClick=!0},s)}}cloneElements(){if(this.list){let e=this.list.querySelector("ul");e&&(e=e.cloneNode?e.cloneNode(!0):e,this.actionCompleteData.ulElement=e)}}updateSelectedItem(e,t,i,s){this.removeSelection(),e.classList.add("e-active"),this.removeHover();const r=this.getFormattedValue(e.getAttribute("data-value")),o=this.getDataByValue(r);if(this.initial||i||m(t))this.selectEventCallback(e,t,i,o,r),s&&this.setSelectOptions(e,t);else{const a=this.detachChanges(o);this.isSelected=!0,this.trigger("select",{e:t,item:e,itemData:a,isInteracted:!!t,cancel:!1},p=>{p.cancel?e.classList.remove("e-active"):(this.selectEventCallback(e,t,i,o,r),s&&this.setSelectOptions(e,t))})}}selectEventCallback(e,t,i,s,r){this.previousItemData=m(this.itemData)?null:this.itemData,this.item=e,this.itemData=s;const o=this.list.querySelector("."+Ge_focus);o&&Y([o],Ge_focus),e.setAttribute("aria-selected","true"),this.activeIndex=this.getIndexByValue(r)}activeItem(e){this.isValidLI(e)&&!e.classList.contains("e-active")&&(this.removeSelection(),e.classList.add("e-active"),this.removeHover(),e.setAttribute("aria-selected","true"))}setValue(e){const t=this.getItemData();ft.setValue(null===t.value?null:t.text,this.inputElement,this.floatLabelType,this.showClearButton),this.valueTemplate&&null!==this.itemData?this.setValueTemplate():!m(this.valueTempElement)&&this.inputElement.previousSibling===this.valueTempElement&&(ye(this.valueTempElement),this.inputElement.style.display="block");let i=Xt.clearIcon,r=this.isFiltering()&&this.filterInput&&"combobox"===this.getModuleName()&&this.filterInput.parentElement.querySelector("."+i);return this.isFiltering()&&r&&r.style.removeProperty("visibility"),this.previousValue===t.value?(this.isSelected=!1,!0):(this.isSelected=!this.initial,this.isSelectCustom=!1,"dropdownlist"===this.getModuleName()&&this.updateIconState(),!1)}setSelection(e,t){this.isValidLI(e)&&(!e.classList.contains("e-active")||this.isPopupOpen&&this.isSelected&&e.classList.contains("e-active"))?this.updateSelectedItem(e,t,!1,!0):this.setSelectOptions(e,t)}setSelectOptions(e,t){this.list&&this.removeHover(),this.previousSelectedLI=m(this.selectedLI)?null:this.selectedLI,this.selectedLI=e,!this.setValue(t)&&(this.isPopupOpen&&(bt(this.targetElement(),{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null}),this.isFilterLayout()&&this.filterInput&&bt(this.filterInput,{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})),(!this.isPopupOpen&&!m(e)||this.isPopupOpen&&!m(t)&&("keydown"!==t.type||"keydown"===t.type&&"enter"===t.action))&&(this.isSelectCustom=!1,this.onChangeEvent(t)),this.isPopupOpen&&!m(this.selectedLI)&&null!==this.itemData&&(!t||"click"!==t.type)&&this.setScrollPosition(t),"mozilla"!==Q.info.name&&(bt(this.inputElement,{"aria-label":this.inputElement.value}),bt(this.targetElement(),{"aria-describedby":this.inputElement.id}),this.targetElement().removeAttribute("aria-live")))}dropdownCompiler(e){let t=!1;if(e)try{t=!!document.querySelectorAll(e).length}catch(i){t=!1}return t}setValueTemplate(){let e;this.isReact&&this.clearTemplate(["valueTemplate"]),this.valueTempElement||(this.valueTempElement=this.createElement("span",{className:Xt.value}),this.inputElement.parentElement.insertBefore(this.valueTempElement,this.inputElement),this.inputElement.style.display="none"),this.valueTempElement.innerHTML="",e=this.dropdownCompiler(this.valueTemplate)?xs(document.querySelector(this.valueTemplate).innerHTML.trim()):xs(this.valueTemplate);const i=e(this.itemData,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,this.valueTempElement);if(i&&i.length>0)for(let s=0;s<i.length;s++)this.valueTempElement.appendChild(i[s]);this.renderReactTemplates()}removeSelection(){if(this.list){const e=this.list.querySelectorAll(".e-active");e.length&&(Y(e,"e-active"),e[0].removeAttribute("aria-selected"))}}getItemData(){const e=this.fields;let i,s,t=null;return t=this.itemData,m(t)||(i=J(e.value,t),s=J(e.text,t)),{value:m(t)||Jt(i)?t:i,text:m(t)||Jt(i)?t:s}}onChangeEvent(e){const t=this.getItemData();this.setProperties({index:this.isSelectCustom?null:this.activeIndex,text:t.text,value:t.value},!0),this.detachChangeEvent(e)}detachChanges(e){let t;return t="string"==typeof e||"boolean"==typeof e||"number"==typeof e?Object.defineProperties({},{value:{value:e,enumerable:!0},text:{value:e,enumerable:!0}}):e,t}detachChangeEvent(e){if(this.isSelected=!1,this.previousValue=this.value,this.activeIndex=this.index,this.typedString=m(this.text)?"":this.text,!this.initial){const t=this.detachChanges(this.itemData);let i;i="string"==typeof this.previousItemData||"boolean"==typeof this.previousItemData||"number"==typeof this.previousItemData?Object.defineProperties({},{value:{value:this.previousItemData,enumerable:!0},text:{value:this.previousItemData,enumerable:!0}}):this.previousItemData,this.setHiddenValue();const s={e,item:this.item,itemData:t,previousItem:this.previousSelectedLI,previousItemData:i,isInteracted:!!e,value:this.value,element:this.element,event:e};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",s)}(m(this.value)||""===this.value)&&"Always"!==this.floatLabelType&&Y([this.inputWrapper.container],"e-valid-input")}setHiddenValue(){if(m(this.value))this.hiddenElement.innerHTML="";else if(this.hiddenElement.querySelector("option")){const e=this.hiddenElement.querySelector("option");e.textContent=this.text,e.setAttribute("value",this.value.toString())}else this.hiddenElement.innerHTML="<option selected>"+this.text+"</option>",this.hiddenElement.querySelector("option").setAttribute("value",this.value.toString())}onFilterUp(e){if(e.ctrlKey&&86===e.keyCode||!this.isValidKey&&40!==e.keyCode&&38!==e.keyCode)this.isValidKey=!1;else switch(this.isValidKey=!1,e.keyCode){case 38:case 40:"autocomplete"!==this.getModuleName()||this.isPopupOpen||this.preventAltUp||this.isRequested?this.preventAutoFill=!1:(this.preventAutoFill=!0,this.searchLists(e)),this.preventAltUp=!1,e.preventDefault();break;case 46:case 8:this.typedString=this.filterInput.value,!this.isPopupOpen&&""!==this.typedString||this.isPopupOpen&&this.queryString.length>0||""===this.typedString&&""===this.queryString&&"autocomplete"!==this.getModuleName()?(this.preventAutoFill=!0,this.searchLists(e)):""===this.typedString&&(this.list&&this.resetFocusElement(),this.activeIndex=null,"dropdownlist"!==this.getModuleName()&&(this.preventAutoFill=!0,this.searchLists(e),"autocomplete"===this.getModuleName()&&this.hidePopup())),e.preventDefault();break;default:this.typedString=this.filterInput.value,this.preventAutoFill=!1,this.searchLists(e)}}onFilterDown(e){switch(e.keyCode){case 13:break;case 40:case 38:this.queryString=this.filterInput.value,e.preventDefault();break;case 9:this.isPopupOpen&&"autocomplete"!==this.getModuleName()&&e.preventDefault();break;default:this.prevSelectPoints=this.getSelectionPoints(),this.queryString=this.filterInput.value}}removeFillSelection(){if(this.isInteracted){const e=this.getSelectionPoints();this.inputElement.setSelectionRange(e.end,e.end)}}getQuery(e){let t;if(!this.isCustomFilter&&this.allowFiltering&&this.filterInput){t=e?e.clone():this.query?this.query.clone():new Fi;const i=""===this.typedString?"contains":this.filterType,s=this.typeOfData(this.dataSource).typeof;t.where((this.dataSource instanceof Nt||"string"!==s)&&"number"!==s&&this.fields.text?this.fields.text:"",i,this.typedString,this.ignoreCase,this.ignoreAccent)}else t=e?e.clone():this.query?this.query.clone():new Fi;return t}getSelectionPoints(){const e=this.inputElement;return{start:Math.abs(e.selectionStart),end:Math.abs(e.selectionEnd)}}searchLists(e){if(this.isTyped=!0,this.activeIndex=null,this.isListSearched=!0,this.filterInput.parentElement.querySelector("."+Xt.clearIcon)&&(this.filterInput.parentElement.querySelector("."+Xt.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible"),this.isDataFetched=!1,this.isFiltering()){const t={preventDefaultAction:!1,text:this.filterInput.value,updateData:(i,s,r)=>{t.cancel||(this.isCustomFilter=!0,this.filteringAction(i,s,r))},baseEventArgs:e,cancel:!1};this.trigger("filtering",t,i=>{!i.cancel&&!this.isCustomFilter&&!i.preventDefaultAction&&this.filteringAction(this.dataSource,null,this.fields)})}}filter(e,t,i){this.isCustomFilter=!0,this.filteringAction(e,t,i)}filteringAction(e,t,i){m(this.filterInput)||(this.beforePopupOpen=!(!this.isPopupOpen&&"combobox"===this.getModuleName()&&""===this.filterInput.value),""!==this.filterInput.value.trim()||this.itemTemplate?(this.isNotSearchList=!1,t=""===this.filterInput.value.trim()?null:t,this.resetList(e,i,t)):(this.actionCompleteData.isUpdated=!1,this.isTyped=!1,!m(this.actionCompleteData.ulElement)&&!m(this.actionCompleteData.list)&&this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list),this.isTyped=!0,!m(this.itemData)&&"dropdownlist"===this.getModuleName()&&(this.focusIndexItem(),this.setScrollPosition()),this.isNotSearchList=!0),this.renderReactTemplates())}setSearchBox(e){if(this.isFiltering()){const t=e.querySelector("."+Xt.filterParent)?e.querySelector("."+Xt.filterParent):this.createElement("span",{className:Xt.filterParent});this.filterInput=this.createElement("input",{attrs:{type:"text"},className:Xt.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element);let i=!1;return Q.isDevice&&(i=!0),this.filterInputObj=ft.createInput({element:this.filterInput,buttons:i?[Xt.backIcon,Xt.filterBarClearIcon]:[Xt.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),m(this.cssClass)||(-1!==this.cssClass.split(" ").indexOf("e-outline")?j([this.filterInputObj.container],"e-outline"):-1!==this.cssClass.split(" ").indexOf("e-filled")&&j([this.filterInputObj.container],"e-filled")),Pi([this.filterInputObj.container],t),Tr([t],e),bt(this.filterInput,{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-activedescendant":this.selectedLI?this.selectedLI.id:null,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+Xt.clearIcon),!Q.isDevice&&this.clearIconElement&&(O.add(this.clearIconElement,"click",this.clearText,this),this.clearIconElement.style.visibility="hidden"),this.searchKeyModule=new Pn(this.filterInput,Q.isDevice?{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}:{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),O.add(this.filterInput,"input",this.onInput,this),O.add(this.filterInput,"keyup",this.onFilterUp,this),O.add(this.filterInput,"keydown",this.onFilterDown,this),O.add(this.filterInput,"blur",this.onBlurHandler,this),O.add(this.filterInput,"paste",this.pasteHandler,this),this.filterInputObj}return jQ}onInput(e){this.isValidKey=!0,Q.isDevice&&"mozilla"===Q.info.name&&(this.typedString=this.filterInput.value,this.preventAutoFill=!0,this.searchLists(e))}pasteHandler(e){setTimeout(()=>{this.typedString=this.filterInput.value,this.searchLists(e)})}onActionFailure(e){super.onActionFailure(e),this.beforePopupOpen&&this.renderPopup()}onActionComplete(e,t,i,s){if(this.isNotSearchList)this.isNotSearchList=!1;else if(this.isActive){const r=this.selectedLI?this.selectedLI.cloneNode(!0):null;if(super.onActionComplete(e,t,i),this.updateSelectElementData(this.allowFiltering),this.isRequested&&!m(this.searchKeyEvent)&&"keydown"===this.searchKeyEvent.type&&(this.isRequested=!1,this.keyActionHandler(this.searchKeyEvent),this.searchKeyEvent=null),this.isRequested&&!m(this.searchKeyEvent)&&(this.incrementalSearch(this.searchKeyEvent),this.searchKeyEvent=null),this.list.scrollTop=0,m(e)||bt(e,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"}),this.initRemoteRender&&(this.initial=!0,this.activeIndex=this.index,this.updateValues(),this.initRemoteRender=!1,this.initial=!1,this.value&&this.dataSource instanceof Nt)){const o=m(this.fields.value)?this.fields.text:this.fields.value;t.some(u=>u[o]===this.value)||this.dataSource.executeQuery(this.getQuery(this.query).where(new un(o,"equal",this.value))).then(u=>{u.result.length>0&&(this.addItem(u.result,t.length),this.updateValues())})}"autocomplete"!==this.getModuleName()&&this.isFiltering()&&!this.isTyped&&((!this.actionCompleteData.isUpdated||!this.isCustomFilter&&!this.isFilterFocus||m(this.itemData)&&this.allowFiltering&&(this.dataSource instanceof Nt||!m(this.dataSource)&&!m(this.dataSource.length)&&0!==this.dataSource.length))&&(this.itemTemplate&&"EJS-COMBOBOX"===this.element.tagName&&this.allowFiltering?setTimeout(()=>{this.updateActionCompleteDataValues(e,t)},0):this.updateActionCompleteDataValues(e,t)),this.addNewItem(t,r),m(this.itemData)||this.focusIndexItem()),this.beforePopupOpen&&this.renderPopup()}}updateActionCompleteDataValues(e,t){this.actionCompleteData={ulElement:e.cloneNode(!0),list:t,isUpdated:!0},m(this.actionData.ulElement)&&m(this.actionData.list)&&(this.actionData=this.actionCompleteData)}addNewItem(e,t){if(!m(this.itemData)&&!m(t)){const i=this.getItemData().value;e.some(r=>("string"==typeof r||"number"==typeof r)&&r===i||J(this.fields.value,r)===i)||this.addItem(this.itemData)}}updateActionCompleteData(e,t,i){"autocomplete"!==this.getModuleName()&&this.actionCompleteData.ulElement&&(this.itemTemplate&&"EJS-COMBOBOX"===this.element.tagName&&this.allowFiltering?setTimeout(()=>{this.actionCompleteDataUpdate(e,t,i)},0):this.actionCompleteDataUpdate(e,t,i))}actionCompleteDataUpdate(e,t,i){null!=i?this.actionCompleteData.ulElement.insertBefore(e.cloneNode(!0),this.actionCompleteData.ulElement.childNodes[i]):this.actionCompleteData.ulElement.appendChild(e.cloneNode(!0)),this.isFiltering()&&this.actionCompleteData.list.indexOf(t)<0&&this.actionCompleteData.list.push(t)}focusIndexItem(){const e=this.getItemData().value;this.activeIndex=this.getIndexByValue(e);const t=this.findListElement(this.list,"li","data-value",e);this.selectedLI=t,this.activeItem(t),this.removeFocus()}updateSelection(){const e=this.list.querySelector(".e-active");e?(this.setProperties({index:this.getIndexByValue(e.getAttribute("data-value"))}),this.activeIndex=this.index):(this.removeFocus(),this.list.querySelector("."+Ge_li).classList.add(Xt.focus))}removeFocus(){const e=this.list.querySelectorAll("."+Xt.focus);e&&e.length&&Y(e,Xt.focus)}renderPopup(){this.popupObj&&document.body.contains(this.popupObj.element)?this.refreshPopup():this.trigger("beforeOpen",{cancel:!1},t=>{if(t.cancel)this.beforePopupOpen=!1;else{const i=this.createElement("div",{id:this.element.id+"_popup",className:"e-ddl e-popup "+(null!=this.cssClass?this.cssClass:"")}),s=this.setSearchBox(i);if(this.listHeight=ct(this.popupHeight),this.headerTemplate&&this.setHeaderTemplate(i),Pi([this.list],i),this.footerTemplate&&this.setFooterTemplate(i),document.body.appendChild(i),i.style.visibility="hidden","auto"!==this.popupHeight){if(this.searchBoxHeight=0,m(s.container)||(this.searchBoxHeight=s.container.parentElement.getBoundingClientRect().height,this.listHeight=(parseInt(this.listHeight,10)-this.searchBoxHeight).toString()+"px"),this.headerTemplate){this.header=this.header?this.header:i.querySelector(".e-ddl-header");const _=Math.round(this.header.getBoundingClientRect().height);this.listHeight=(parseInt(this.listHeight,10)-(_+this.searchBoxHeight)).toString()+"px"}if(this.footerTemplate){this.footer=this.footer?this.footer:i.querySelector(".e-ddl-footer");const _=Math.round(this.footer.getBoundingClientRect().height);this.listHeight=(parseInt(this.listHeight,10)-(_+this.searchBoxHeight)).toString()+"px"}this.list.style.maxHeight=(parseInt(this.listHeight,10)-2).toString()+"px",i.style.maxHeight=ct(this.popupHeight)}else i.style.height="auto";let o,r=0;if(!m(this.selectedLI)&&!m(this.activeIndex)&&this.activeIndex>=0?this.setScrollPosition():this.list.scrollTop=0,Q.isDevice&&!this.allowFiltering&&("dropdownlist"===this.getModuleName()||this.isDropDownClick&&"combobox"===this.getModuleName())){r=this.getOffsetValue(i);const _=this.isEmptyList()?this.list:this.liCollections[0];o=-(parseInt(getComputedStyle(_).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))}this.getFocusElement(),this.createPopup(i,r,o),this.checkCollision(i),Q.isDevice&&(this.popupObj.element.classList.add(Xt.device),("dropdownlist"===this.getModuleName()||"combobox"===this.getModuleName()&&!this.allowFiltering&&this.isDropDownClick)&&(this.popupObj.collision={X:"fit",Y:"fit"}),this.isFilterLayout()&&(this.popupObj.element.classList.add(Xt.mobileFilter),this.popupObj.position={X:0,Y:0},this.popupObj.dataBind(),bt(this.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),j([document.body,this.popupObj.element],Xt.popupFullScreen),this.setSearchBoxPosition(),this.backIconElement=s.container.querySelector(".e-back-icon"),this.clearIconElement=s.container.querySelector("."+Xt.clearIcon),O.add(this.backIconElement,"click",this.clickOnBackIcon,this),O.add(this.clearIconElement,"click",this.clearText,this))),i.style.visibility="visible",j([i],"e-popup-close");const a=this.popupObj.getScrollableParent(this.inputWrapper.container);for(const _ of a)O.add(_,"scroll",this.scrollHandler,this);Q.isDevice&&this.isFilterLayout()&&O.add(this.list,"scroll",this.listScroll,this),m(this.list)||(this.unWireListEvents(),this.wireListEvents()),bt(this.targetElement(),{"aria-expanded":"true"}),j([this.isFiltering()?this.filterInput.parentElement:this.inputWrapper.container],[Xt.inputFocus]);const p={name:"FadeIn",duration:100};this.beforePopupOpen=!0,this.trigger("open",{popup:this.popupObj,cancel:!1,animation:p},_=>{_.cancel?(this.beforePopupOpen=!1,this.destroyPopup()):(j([this.inputWrapper.container],[Xt.iconAnimation]),this.renderReactTemplates(),this.popupObj.show(new Wn(_.animation),1e3===this.zIndex?this.element:null))})}})}checkCollision(e){(!Q.isDevice||Q.isDevice&&"dropdownlist"!==this.getModuleName()&&!this.isDropDownClick)&&(Id(e).length>0&&(e.style.marginTop=-parseInt(getComputedStyle(e).marginTop,10)+"px"),this.popupObj.resolveCollision())}getOffsetValue(e){const t=getComputedStyle(e),i=parseInt(t.borderTopWidth,10),s=parseInt(t.borderBottomWidth,10);return this.setPopupPosition(i+s)}createPopup(e,t,i){this.popupObj=new Th(e,{width:this.setWidth(),targetType:"relative",relateTo:this.inputWrapper.container,collision:{X:"flip",Y:"flip"},offsetY:t,enableRtl:this.enableRtl,offsetX:i,position:{X:"left",Y:"bottom"},zIndex:this.zIndex,close:()=>{this.isDocumentClick||this.focusDropDown(),this.isReact&&this.clearTemplate(["headerTemplate","footerTemplate"]),this.getModuleName(),this.isNotSearchList=!1,this.isDocumentClick=!1,this.destroyPopup(),this.isFiltering()&&this.actionCompleteData.list&&this.actionCompleteData.list[0]&&(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0))},open:()=>{O.add(document,"mousedown",this.onDocumentClick,this),this.isPopupOpen=!0;const s=this.actionCompleteData&&this.actionCompleteData.ulElement&&this.actionCompleteData.ulElement.querySelector("li"),r=this.list.querySelector("ul li");this.isFiltering()&&this.itemTemplate&&this.element.tagName===this.getNgDirective()&&s&&r&&s.textContent!==r.textContent&&"EJS-COMBOBOX"!==this.element.tagName&&this.cloneElements(),this.isFilterLayout()&&(Y([this.inputWrapper.container],[Xt.inputFocus]),this.isFilterFocus=!0,this.filterInput.focus(),this.inputWrapper.clearButton&&j([this.inputWrapper.clearButton],Xt.clearIconHide)),this.activeStateChange()},targetExitViewport:()=>{Q.isDevice||this.hidePopup()}})}isEmptyList(){return!m(this.liCollections)&&0===this.liCollections.length}getFocusElement(){}isFilterLayout(){return"dropdownlist"===this.getModuleName()&&this.allowFiltering}scrollHandler(){Q.isDevice&&("dropdownlist"===this.getModuleName()&&!this.isFilterLayout()||"combobox"===this.getModuleName()&&!this.allowFiltering&&this.isDropDownClick)&&this.hidePopup()}setSearchBoxPosition(){const e=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.list.style.maxHeight=window.innerHeight-e+"px",this.list.style.height=window.innerHeight-e+"px";const t=this.filterInput.parentElement.querySelector("."+Xt.clearIcon);ye(this.filterInput),t.parentElement.insertBefore(this.filterInput,t)}setPopupPosition(e){let t;const i=e,s=this.list.querySelector("."+Xt.focus)||this.selectedLI,r=this.isEmptyList()?this.list:this.liCollections[0],o=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],a=r.getBoundingClientRect().height,u=this.list.offsetHeight/2,p=m(s)?r.offsetTop:s.offsetTop;if(o.offsetTop-u<p&&!m(this.liCollections)&&this.liCollections.length>0&&!m(s)){const _=this.list.offsetHeight/a,D=parseInt(getComputedStyle(this.list).paddingBottom,10);t=(_-(this.liCollections.length-this.activeIndex))*a-i+D,this.list.scrollTop=s.offsetTop}else p>u?(t=u-a/2,this.list.scrollTop=p-u+a/2):t=p;return t=t+a+i-(a-this.inputWrapper.container.offsetHeight)/2,-t}setWidth(){let e=ct(this.popupWidth);if(e.indexOf("%")>-1&&(e=(this.inputWrapper.container.offsetWidth*parseFloat(e)/100).toString()+"px"),Q.isDevice&&!this.allowFiltering&&("dropdownlist"===this.getModuleName()||this.isDropDownClick&&"combobox"===this.getModuleName())){const t=this.isEmptyList()?this.list:this.liCollections[0];e=parseInt(e,10)+2*(parseInt(getComputedStyle(t).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))+"px"}return e}scrollBottom(e){if(!m(this.selectedLI)){const t=this.list.offsetHeight,i=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;let s=this.list.scrollTop+i-t;s=e?s+2*parseInt(getComputedStyle(this.list).paddingTop,10):s;let r=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;r=this.fields.groupBy&&!m(this.fixedHeaderElement)?r-this.fixedHeaderElement.offsetHeight:r,0===this.activeIndex?this.list.scrollTop=0:(i>t||!(r>0&&this.list.offsetHeight>r))&&(this.list.scrollTop=s)}}scrollTop(){if(!m(this.selectedLI)){let e=this.selectedLI.offsetTop-this.list.scrollTop;e=this.fields.groupBy&&!m(this.fixedHeaderElement)?e-this.fixedHeaderElement.offsetHeight:e;const t=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:e<0?this.list.scrollTop=this.list.scrollTop+e:t>0&&this.list.offsetHeight>t||(this.list.scrollTop=this.selectedLI.offsetTop-(this.fields.groupBy&&!m(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}}isEditTextBox(){return!1}isFiltering(){return this.allowFiltering}isPopupButton(){return!0}setScrollPosition(e){if(m(e))this.scrollBottom(!0);else switch(e.action){case"pageDown":case"down":case"end":this.scrollBottom();break;default:this.scrollTop()}}clearText(){this.filterInput.value=this.typedString="",this.searchLists(null)}listScroll(){this.filterInput.blur()}setEleWidth(e){m(e)||("number"==typeof e?this.inputWrapper.container.style.width=ct(e):"string"==typeof e&&(this.inputWrapper.container.style.width=e.match(/px|%|em/)?e:ct(e)))}closePopup(e){if(this.isTyped=!1,!(this.popupObj&&document.body.contains(this.popupObj.element)&&this.beforePopupOpen))return;O.remove(document,"mousedown",this.onDocumentClick),this.isActive=!1,this.filterInputObj=null,this.isDropDownClick=!1,this.preventAutoFill=!1;const t=this.popupObj.getScrollableParent(this.inputWrapper.container);for(const o of t)O.remove(o,"scroll",this.scrollHandler);Q.isDevice&&this.isFilterLayout()&&(Y([document.body,this.popupObj.element],Xt.popupFullScreen),O.remove(this.list,"scroll",this.listScroll)),this.isFilterLayout()&&(Q.isDevice||(this.searchKeyModule.destroy(),this.clearIconElement&&O.remove(this.clearIconElement,"click",this.clearText)),this.backIconElement&&(O.remove(this.backIconElement,"click",this.clickOnBackIcon),O.remove(this.clearIconElement,"click",this.clearText)),O.remove(this.filterInput,"input",this.onInput),O.remove(this.filterInput,"keyup",this.onFilterUp),O.remove(this.filterInput,"keydown",this.onFilterDown),O.remove(this.filterInput,"blur",this.onBlurHandler),O.remove(this.filterInput,"paste",this.pasteHandler),this.filterInput=null),bt(this.targetElement(),{"aria-expanded":"false","aria-activedescendant":null}),this.inputWrapper.container.classList.remove(Xt.iconAnimation),this.isFiltering()&&(this.actionCompleteData.isUpdated=!1),this.beforePopupOpen=!1,this.trigger("close",{popup:this.popupObj,cancel:!1,animation:{name:"FadeOut",duration:100,delay:e||0}},o=>{if(!m(this.popupObj)&&!m(this.popupObj.element.querySelector(".e-fixed-head"))){const a=this.popupObj.element.querySelector(".e-fixed-head");a.parentNode.removeChild(a),this.fixedHeaderElement=null}o.cancel||("autocomplete"===this.getModuleName()&&this.rippleFun(),this.isPopupOpen?this.popupObj.hide(new Wn(o.animation)):this.destroyPopup())})}destroyPopup(){this.isPopupOpen=!1,this.isFilterFocus=!1,this.popupObj.destroy(),ye(this.popupObj.element)}clickOnBackIcon(){this.hidePopup(),this.focusIn()}render(){"INPUT"===this.element.tagName?(this.inputElement=this.element,m(this.inputElement.getAttribute("role"))&&this.inputElement.setAttribute("role","textbox"),m(this.inputElement.getAttribute("type"))&&this.inputElement.setAttribute("type","text")):(this.inputElement=this.createElement("input",{attrs:{role:"textbox",type:"text"}}),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.parentElement.insertBefore(this.inputElement,this.element),this.preventTabIndex(this.inputElement));let e=this.cssClass;!m(this.cssClass)&&""!==this.cssClass&&(e=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=ft.createInput({element:this.inputElement,buttons:this.isPopupButton()?[Xt.icon]:null,floatLabelType:this.floatLabelType,properties:{readonly:"dropdownlist"===this.getModuleName()||this.readonly,placeholder:this.placeholder,cssClass:e,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton}},this.createElement),this.element.tagName===this.getNgDirective()?this.element.appendChild(this.inputWrapper.container):this.inputElement.parentElement.insertBefore(this.element,this.inputElement),this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",tabindex:"-1",class:Xt.hiddenElement}}),Tr([this.hiddenElement],this.inputWrapper.container),this.validationAttribute(this.element,this.hiddenElement),this.setReadOnly(),this.setFields(),this.inputWrapper.container.style.width=ct(this.width),this.inputWrapper.container.classList.add("e-ddl"),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex");const t=this.element.getAttribute("id")?this.element.getAttribute("id"):Ks("ej2_dropdownlist");if(this.element.id=t,this.hiddenElement.id=t+"_hidden",this.targetElement().setAttribute("tabindex",this.tabIndex),bt(this.targetElement(),this.getAriaAttributes()),this.updateDataAttribute(this.htmlAttributes),this.setHTMLAttributes(),null!==this.value||null!==this.activeIndex||null!==this.text)this.initValue();else if("SELECT"===this.element.tagName&&this.element.options[0]){const i=this.element;this.value=i.options[i.selectedIndex].value,this.text=m(this.value)?null:i.options[i.selectedIndex].textContent,this.initValue()}this.preventTabIndex(this.element),this.enabled||(this.targetElement().tabIndex=-1),this.initial=!1,this.element.style.opacity="",this.inputElement.onselect=i=>{i.stopImmediatePropagation()},this.inputElement.onchange=i=>{i.stopImmediatePropagation()},this.element.hasAttribute("autofocus")&&this.focusIn(),m(this.text)||this.inputElement.setAttribute("value",this.text),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),this.renderComplete()}setFooterTemplate(e){let t;this.footer?this.footer.innerHTML="":(this.footer=this.createElement("div"),j([this.footer],Xt.footer)),t=this.dropdownCompiler(this.footerTemplate)?xs(X(this.footerTemplate,document).innerHTML.trim()):xs(this.footerTemplate);const s=t({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);if(s&&s.length>0)for(let r=0;r<s.length;r++)this.footer.appendChild(s[r]);Pi([this.footer],e)}setHeaderTemplate(e){let t;this.header?this.header.innerHTML="":(this.header=this.createElement("div"),j([this.header],Xt.header)),t=this.dropdownCompiler(this.headerTemplate)?xs(X(this.headerTemplate,document).innerHTML.trim()):xs(this.headerTemplate);const s=t({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);if(s&&s.length)for(let o=0;o<s.length;o++)this.header.appendChild(s[o]);const r=e.querySelector("div.e-content");e.insertBefore(this.header,r)}setOldText(e){this.text=e}setOldValue(e){this.value=e}refreshPopup(){!m(this.popupObj)&&document.body.contains(this.popupObj.element)&&(this.allowFiltering&&(!Q.isDevice||!this.isFilterLayout())||"autocomplete"===this.getModuleName())&&(Y([this.popupObj.element],"e-popup-close"),this.popupObj.refreshPosition(this.inputWrapper.container),this.popupObj.resolveCollision())}checkData(e){e.dataSource&&!m(Object.keys(e.dataSource))&&this.itemTemplate&&this.allowFiltering&&!(this.isListSearched&&e.dataSource instanceof Nt)&&(this.list=null,this.actionCompleteData={ulElement:null,list:null,isUpdated:!1}),this.isListSearched=!1;const t=-1!==Object.keys(e).indexOf("value")&&m(e.value),i=-1!==Object.keys(e).indexOf("text")&&m(e.text);"autocomplete"!==this.getModuleName()&&this.allowFiltering&&(t||i)&&(this.itemData=null),this.allowFiltering&&e.dataSource&&!m(Object.keys(e.dataSource))?(this.actionCompleteData={ulElement:null,list:null,isUpdated:!1},this.actionData=this.actionCompleteData):this.allowFiltering&&e.query&&!m(Object.keys(e.query))&&(this.actionCompleteData="combobox"===this.getModuleName()?{ulElement:null,list:null,isUpdated:!1}:this.actionCompleteData,this.actionData=this.actionCompleteData)}updateDataSource(e){(""!==this.inputElement.value||!m(e)&&(m(e.dataSource)||!(e.dataSource instanceof Nt)&&0===e.dataSource.length))&&this.clearAll(null,e),this.fields.groupBy&&e.fields&&!this.isGroupChecking&&(O.remove(this.list,"scroll",this.setFloatingHeader),O.add(this.list,"scroll",this.setFloatingHeader,this)),(!(!m(e)&&(m(e.dataSource)||!(e.dataSource instanceof Nt)&&0===e.dataSource.length))||e.dataSource!==[])&&(this.typedString="",this.resetList(this.dataSource)),!this.isCustomFilter&&!this.isFilterFocus&&document.activeElement!==this.filterInput&&this.checkCustomValue()}checkCustomValue(){this.itemData=this.getDataByValue(this.value);const e=this.getItemData();this.setProperties({text:e.text,value:e.value})}updateInputFields(){"dropdownlist"===this.getModuleName()&&ft.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)}onPropertyChanged(e,t){"dropdownlist"===this.getModuleName()&&(this.checkData(e),this.setUpdateInitial(["fields","query","dataSource"],e));for(const i of Object.keys(e))switch(i){case"query":case"dataSource":break;case"htmlAttributes":this.setHTMLAttributes();break;case"width":this.setEleWidth(e.width);break;case"placeholder":ft.setPlaceholder(e.placeholder,this.inputElement);break;case"filterBarPlaceholder":this.filterInput&&ft.setPlaceholder(e.filterBarPlaceholder,this.filterInput);break;case"readonly":"dropdownlist"!==this.getModuleName()&&ft.setReadonly(e.readonly,this.inputElement),this.setReadOnly();break;case"cssClass":this.setCssClass(e.cssClass,t.cssClass);break;case"enableRtl":this.setEnableRtl();break;case"enabled":this.setEnable();break;case"text":if(null===e.text){this.clearAll();break}if(this.list||(this.dataSource instanceof Nt&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){const s=this.getElementByText(e.text);if(!this.checkValidLi(s))if(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100)this.setSelectionData(e.text,t.text,"text");else if(e.text&&this.dataSource instanceof Nt){const r=this.getItems().length,o=m(this.fields.text)?this.fields.value:this.fields.text;this.typedString="",this.dataSource.executeQuery(this.getQuery(this.query).where(new un(o,"equal",e.text))).then(a=>{a.result.length>0?(this.addItem(a.result,r),this.updateValues()):this.setOldText(t.text)})}else this.setOldText(t.text);this.updateInputFields()}break;case"value":if(null===e.value){this.clearAll();break}if(this.notify("beforeValueChange",{newProp:e}),this.list||(this.dataSource instanceof Nt&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){const s=this.getElementByValue(e.value);if(!this.checkValidLi(s))if(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100)this.setSelectionData(e.value,t.value,"value");else if(e.value&&this.dataSource instanceof Nt){const r=this.getItems().length,o=m(this.fields.value)?this.fields.text:this.fields.value;this.typedString="",this.dataSource.executeQuery(this.getQuery(this.query).where(new un(o,"equal",e.value))).then(a=>{a.result.length>0?(this.addItem(a.result,r),this.updateValues()):this.setOldValue(t.value)})}else this.setOldValue(t.value);this.updateInputFields(),this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange}break;case"index":if(null===e.index){this.clearAll();break}this.list||(this.dataSource instanceof Nt&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender&&this.liCollections&&(this.checkValidLi(this.liCollections[e.index])||(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100?this.setSelectionData(e.index,t.index,"index"):this.index=t.index),this.updateInputFields());break;case"footerTemplate":this.popupObj&&this.setFooterTemplate(this.popupObj.element);break;case"headerTemplate":this.popupObj&&this.setHeaderTemplate(this.popupObj.element);break;case"valueTemplate":!m(this.itemData)&&null!=this.valueTemplate&&this.setValueTemplate();break;case"allowFiltering":this.allowFiltering&&(this.actionCompleteData={ulElement:this.ulElement,list:this.listData,isUpdated:!0},this.actionData=this.actionCompleteData,this.updateSelectElementData(this.allowFiltering));break;case"floatLabelType":ft.removeFloating(this.inputWrapper),ft.addFloating(this.inputElement,e.floatLabelType,this.placeholder,this.createElement);break;case"showClearButton":ft.setClearButton(e.showClearButton,this.inputElement,this.inputWrapper,null,this.createElement),this.bindClearEvent();break;default:{const s=this.getPropObject(i,e,t);super.onPropertyChanged(s.newProperty,s.oldProperty)}}}checkValidLi(e){return!!this.isValidLI(e)&&(this.setSelection(e,null),!0)}setSelectionData(e,t,i){let s;this.updateListValues=()=>{"text"===i?(s=this.getElementByText(e),this.checkValidLi(s)||this.setOldText(t)):"value"===i?(s=this.getElementByValue(e),this.checkValidLi(s)||this.setOldValue(t)):"index"===i&&(s=this.liCollections[e],this.checkValidLi(s)||(this.index=t))}}setReadOnly(){this.readonly?j([this.inputWrapper.container],["e-readonly"]):Y([this.inputWrapper.container],["e-readonly"])}setCssClass(e,t){m(t)||(t=t.replace(/\s+/g," ").trim()),m(e)||(e=e.replace(/\s+/g," ").trim()),ft.setCssClass(e,[this.inputWrapper.container],t),this.popupObj&&ft.setCssClass(e,[this.popupObj.element],t)}getModuleName(){return"dropdownlist"}showPopup(){if(this.enabled){if(this.isFiltering()&&this.dataSource instanceof Nt&&this.actionData.list!=this.actionCompleteData.list&&this.actionData.list&&this.actionData.ulElement&&(this.actionCompleteData=this.actionData,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)),this.beforePopupOpen)return void this.refreshPopup();this.beforePopupOpen=!0,this.isFiltering()&&!this.isActive&&this.actionCompleteData.list&&this.actionCompleteData.list[0]?(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)):(m(this.list)||!Jt(this.list)&&(this.list.classList.contains("e-nodata")||this.list.querySelectorAll("."+Ge_li).length<=0))&&this.renderList(),this.invokeRenderPopup()}}invokeRenderPopup(){if(Q.isDevice&&this.isFilterLayout()){const e=this;window.onpopstate=()=>{e.hidePopup()},history.pushState({},"")}(!m(this.list.children[0])||this.list.classList.contains("e-nodata"))&&this.renderPopup(),bt(this.targetElement(),{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})}renderHightSearch(){}hidePopup(e){if(this.isEscapeKey&&"dropdownlist"===this.getModuleName())if(ft.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1,m(this.index))this.resetSelection();else{const s=this.findListElement(this.ulElement,"li","data-value",this.value);this.selectedLI=this.liCollections[this.index]||s,this.selectedLI&&(this.updateSelectedItem(this.selectedLI,null,!0),this.valueTemplate&&null!==this.itemData&&this.setValueTemplate())}this.closePopup();const t=this.getItemData(),i=!m(this.selectedLI);this.inputElement&&""===this.inputElement.value.trim()&&!this.isInteracted&&(this.isSelectCustom||i&&this.inputElement.value!==t.text)&&(this.isSelectCustom=!1,this.clearAll(e))}focusIn(e){if(!this.enabled||this.targetElement().classList.contains(Xt.disable))return;let t=!1;this.preventFocus&&Q.isDevice&&(this.inputWrapper.container.tabIndex=1,this.inputWrapper.container.focus(),this.preventFocus=!1,t=!0),t||this.targetElement().focus(),j([this.inputWrapper.container],[Xt.inputFocus]),this.onFocus(e)}focusOut(e){!this.enabled||(this.isTyped=!0,this.hidePopup(e),this.targetElement()&&this.targetElement().blur(),Y([this.inputWrapper.container],[Xt.inputFocus]))}destroy(){if(this.isActive=!1,function OQ(n){wO===n&&(wO="",D2="",Kp="",wm=[])}(this.element.id),this.isReact&&this.clearTemplate(),this.hidePopup(),this.unWireEvent(),this.list&&this.unWireListEvents(),!this.element||this.element.classList.contains("e-"+this.getModuleName())){if(this.inputElement){const e=["readonly","aria-disabled","aria-placeholder","placeholder","aria-owns","aria-labelledby","aria-haspopup","aria-expanded","aria-activedescendant","autocomplete","aria-readonly","autocorrect","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-describedby","aria-label"];for(let t=0;t<e.length;t++)this.inputElement.removeAttribute(e[t]);this.inputElement.setAttribute("tabindex",this.tabIndex),this.inputElement.classList.remove("e-input"),ft.setValue("",this.inputElement,this.floatLabelType,this.showClearButton)}this.element.style.display="block",this.inputWrapper.container.parentElement.tagName===this.getNgDirective()||this.inputWrapper.container.parentElement.insertBefore(this.element,this.inputWrapper.container),ye(this.inputWrapper.container),super.destroy()}}getItems(){return this.list||(this.dataSource instanceof Nt&&(this.initRemoteRender=!0),this.renderList()),this.ulElement?super.getItems():[]}getDataByValue(e){return super.getDataByValue(e)}clear(){this.value=null}};yr([A(null)],Bn.prototype,"cssClass",void 0),yr([A("100%")],Bn.prototype,"width",void 0),yr([A("300px")],Bn.prototype,"popupHeight",void 0),yr([A("100%")],Bn.prototype,"popupWidth",void 0),yr([A(null)],Bn.prototype,"placeholder",void 0),yr([A(null)],Bn.prototype,"filterBarPlaceholder",void 0),yr([A({})],Bn.prototype,"htmlAttributes",void 0),yr([A(null)],Bn.prototype,"query",void 0),yr([A(null)],Bn.prototype,"valueTemplate",void 0),yr([A(null)],Bn.prototype,"headerTemplate",void 0),yr([A(null)],Bn.prototype,"footerTemplate",void 0),yr([A(!1)],Bn.prototype,"allowFiltering",void 0),yr([A(!1)],Bn.prototype,"readonly",void 0),yr([A(null)],Bn.prototype,"text",void 0),yr([A(null)],Bn.prototype,"value",void 0),yr([A(null)],Bn.prototype,"index",void 0),yr([A("Never")],Bn.prototype,"floatLabelType",void 0),yr([A(!1)],Bn.prototype,"showClearButton",void 0),yr([Z()],Bn.prototype,"filtering",void 0),yr([Z()],Bn.prototype,"change",void 0),yr([Z()],Bn.prototype,"beforeOpen",void 0),yr([Z()],Bn.prototype,"open",void 0),yr([Z()],Bn.prototype,"close",void 0),yr([Z()],Bn.prototype,"blur",void 0),yr([Z()],Bn.prototype,"focus",void 0),Bn=yr([ts],Bn);var ii=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const u6="e-ddt-hidden",d6="e-input-group-icon e-ddt-icon e-icons",Vh="e-show-chip",gC="e-show-clear",M2="e-show-dd-icon",Ga="e-chip-input",Aw="e-input-focus",p6="e-input-group",f6="e-icon-anim",P2="e-chips",m6="e-chipcontent",L2="e-chips-close",nn="e-icon-hide",_O="e-ddt-icon-hide",g6="e-list-parent",y6="e-dropdown",v6="e-disabled",IO="e-selectall-parent",xO="e-hide-selectall",b6="e-all-text",R2="e-frame",Zx="e-check",N2="e-checkbox-wrapper",C6="e-filter-wrap",E6="e-ddt-icon",w6="e-ddt-footer",S6="e-ddt-header",Dw="e-no-data",F2="e-remain",B2="e-overflow",kw="e-show-text",Xx="e-total-count",Ow="e-wrap-count";class Sc extends Is{}ii([A("child")],Sc.prototype,"child",void 0),ii([A([])],Sc.prototype,"dataSource",void 0),ii([A("expanded")],Sc.prototype,"expanded",void 0),ii([A("hasChildren")],Sc.prototype,"hasChildren",void 0),ii([A("htmlAttributes")],Sc.prototype,"htmlAttributes",void 0),ii([A("iconCss")],Sc.prototype,"iconCss",void 0),ii([A("imageUrl")],Sc.prototype,"imageUrl",void 0),ii([A("parentValue")],Sc.prototype,"parentValue",void 0),ii([A(null)],Sc.prototype,"query",void 0),ii([A("selected")],Sc.prototype,"selected",void 0),ii([A(null)],Sc.prototype,"tableName",void 0),ii([A("text")],Sc.prototype,"text",void 0),ii([A("tooltip")],Sc.prototype,"tooltip",void 0),ii([A("value")],Sc.prototype,"value",void 0);class TO extends Is{}ii([A(!1)],TO.prototype,"autoCheck",void 0),ii([A("Auto")],TO.prototype,"expandOn",void 0),ii([A(!1)],TO.prototype,"loadOnDemand",void 0);let Ui=class extends Ls{constructor(e,t){super(e,t),this.filterTimer=null,this.isFilteredData=!1,this.isFilterRestore=!1,this.selectedData=[],this.filterDelayTime=300,this.isClicked=!1}getPersistData(){return this.addOnPersist(["value"])}getLocaleName(){return"drop-down-tree"}preRender(){this.inputFocus=!1,this.isPopupOpen=!1,this.isFirstRender=!0,this.isInitialized=!1,this.currentText=null,this.currentValue=null,this.oldValue=null,this.removeValue=!1,this.selectedText=[],this.treeItems=[],this.dataValue=null,this.isNodeSelected=!1,this.isDynamicChange=!1,this.clearIconWidth=0,this.headerTemplateId=`${this.element.id}HeaderTemplate`,this.footerTemplateId=`${this.element.id}FooterTemplate`,this.actionFailureTemplateId=`${this.element.id}ActionFailureTemplate`,this.noRecordsTemplateId=`${this.element.id}NoRecordsTemplate`,this.customTemplateId=`${this.element.id}CustomTemplate`,this.keyConfigs={escape:"escape",altUp:"alt+uparrow",altDown:"alt+downarrow",tab:"tab",shiftTab:"shift+tab",end:"end",enter:"enter",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space",ctrlA:"ctrl+A"}}render(){const e=X("#"+this.element.id+"_tree",document);e&&ye(X("#"+this.element.id+"_popup",document)||e.parentElement),this.ensureAutoCheck(),"INPUT"===this.element.tagName?(this.inputEle=this.element,m(this.inputEle.getAttribute("role"))&&this.inputEle.setAttribute("role","textbox"),m(this.inputEle.getAttribute("type"))&&this.inputEle.setAttribute("type","text")):(this.inputEle=this.createElement("input",{attrs:{role:"textbox",type:"text"}}),this.element.parentElement.insertBefore(this.inputEle,this.element)),this.inputObj=ft.createInput({element:this.inputEle,floatLabelType:this.floatLabelType,buttons:this.showDropDownIcon?[d6]:null,properties:{readonly:!0,placeholder:this.placeholder,enabled:this.enabled,cssClass:this.cssClass,enableRtl:this.enableRtl}},this.createElement),this.inputWrapper=this.inputObj.container,this.inputWrapper.classList.contains(p6)||this.inputWrapper.classList.add(p6),this.showDropDownIcon&&this.inputWrapper.classList.add(M2),this.element.tagName===this.getDirective()&&this.element.appendChild(this.inputWrapper),this.createHiddenElement(),this.createClearIcon(),this.inputWrapper.classList.add("e-ddt"),this.setElementWidth(this.width),this.updateDataAttribute(),this.setHTMLAttributes(),this.setAttributes(),this.popupDiv=this.createElement("div",{className:"e-popup-content",attrs:{tabindex:"0"}}),this.popupDiv.classList.add(y6),this.tree=this.createElement("div",{id:this.element.id+"_tree"}),this.popupDiv.appendChild(this.tree),document.body.appendChild(this.popupDiv),this.wireTreeEvents(),j([this.popupDiv],_O),this.renderTree(),this.isRemoteData=this.fields.dataSource instanceof Nt,(this.allowMultiSelection||this.showCheckBox)&&("Delimiter"!==this.mode&&this.createChip(),!this.wrapText&&"Custom"!==this.mode&&(this.overFlowWrapper=this.createElement("span",{className:B2+" "+nn}),this.inputWrapper.insertBefore(this.overFlowWrapper,this.hiddenElement),"Box"!==this.mode&&j([this.overFlowWrapper],kw))),this.isRemoteData||(this.setTreeValue(),this.setTreeText(),this.updateHiddenValue(),this.setSelectedValue(),this.wrapText||this.updateView()),this.wireEvents();const t=X("."+g6,this.treeObj.element);t&&t.getAttribute("aria-multiselectable")&&t.removeAttribute("aria-multiselectable"),this.oldValue=this.value,this.isInitialized=!0,this.hasTemplate=this.itemTemplate||this.headerTemplate||this.footerTemplate||this.actionFailureTemplate||this.noRecordsTemplate||this.customTemplate,this.renderComplete()}ensureAutoCheck(){this.allowFiltering&&this.treeSettings.autoCheck&&this.setProperties({treeSettings:{autoCheck:!1}},!0)}hideCheckAll(e){const t=m(this.popupEle)?null:this.popupEle.querySelector("."+IO);m(t)||(e&&!t.classList.contains(xO)?j([t],xO):!e&&t.classList.contains(xO)&&Y([t],xO))}renderFilter(){this.filterContainer=this.createElement("div",{id:this.element.id+"_filter_wrap",className:C6});const e=this.createElement("input",{id:this.element.id+"_filter",attrs:{autocomplete:"off","aria-label":this.filterBarPlaceholder}});this.filterContainer.appendChild(e),Tr([this.filterContainer],this.popupEle),this.filterObj=new Ar({value:"",showClearButton:!0,placeholder:this.filterBarPlaceholder,input:this.filterChangeHandler.bind(this)}),this.filterObj.appendTo("#"+this.element.id+"_filter")}filterChangeHandler(e){m(e.value)||(window.clearTimeout(this.filterTimer),this.filterTimer=window.setTimeout(()=>{this.filterHandler(e.value,e.event)},this.filterDelayTime))}filterHandler(e,t){this.isFilteredData||(this.treeData=this.treeObj.getTreeData());const i=this.cloneFields(this.fields);this.trigger("filtering",{cancel:!1,preventDefaultAction:!1,event:t,text:e,fields:i},r=>{if(!r.cancel){let a,o=!1;if(this.isFilteredData=!0,""===e?(this.isFilteredData=!1,this.isFilterRestore=!0,a=this.cloneFields(this.fields)):r.preventDefaultAction?a=r.fields:1===this.treeDataType?a=this.selfReferencefilter(e,r.fields):this.fields.dataSource instanceof Nt?o=!0:a=this.nestedFilter(e,r.fields),this.hideCheckAll(this.isFilteredData),o)return;this.treeObj.fields=this.getTreeFields(a),this.treeObj.dataBind()}})}nestedFilter(e,t){const i=[];for(let s=0;s<this.treeData.length;s++){const r=this.nestedChildFilter(e,this.treeData[s]);m(r)||i.push(r)}return t.dataSource=i,t}nestedChildFilter(e,t){const i=t[this.fields.child];if(m(i))return this.isMatchedNode(e,t)?t:null;{const s=[];for(let r=0;r<i.length;r++){const o=this.nestedChildFilter(e,i[r]);m(o)||s.push(o)}return 0!==s.length?(t[this.fields.child]=s,t):(t[this.fields.child]=null,this.isMatchedNode(e,t)?t:null)}}selfReferencefilter(e,t){const i=[],s=[];for(let r=0;r<this.treeData.length;r++)this.isMatchedNode(e,this.treeData[r])&&i.push(this.treeData[r]);for(let r=0;r<i.length;r++)if(-1===s.indexOf(i[r])){s.push(i[r]);let o=i[r][this.fields.parentValue];for(;!m(o);){let a=null;for(let u=0;u<this.treeData.length;u++){const p=this.treeData[u][this.fields.value];if(!m(p)&&p===o){a=this.treeData[u];break}}if(m(a)||-1!==s.indexOf(a))break;s.push(a),o=a[this.fields.parentValue]}}return t.dataSource=s,t}isMatchedNode(e,t){let i=t[this.fields.text];return this.ignoreCase&&(i=i.toLowerCase(),e=e.toLowerCase()),this.ignoreAccent&&(i=je.ignoreDiacritics(i),e=je.ignoreDiacritics(e)),"StartsWith"===this.filterType?i.slice(0,e.length)===e:"EndsWith"===this.filterType?i.slice(-e.length)===e:-1!==i.indexOf(e)}wireEvents(){O.add(this.inputWrapper,"mouseup",this.dropDownClick,this),O.add(this.inputWrapper,"focus",this.focusIn,this),O.add(this.inputWrapper,"blur",this.focusOut,this),O.add(this.inputWrapper,"mousemove",this.mouseIn,this),O.add(this.inputWrapper,"mouseout",this.onMouseLeave,this),O.add(this.overAllClear,"mousedown",this.clearAll,this),O.add(window,"resize",this.windowResize,this);const e=ae(this.inputWrapper,"form");e&&O.add(e,"reset",this.resetValueHandler,this),this.keyboardModule=new Pn(this.inputWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}wireTreeEvents(){this.keyboardModule=new Pn(this.tree,{keyAction:this.treeAction.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}wireCheckAllWrapperEvents(){this.keyboardModule=new Pn(this.checkAllParent,{keyAction:this.checkAllAction.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}unWireEvents(){O.remove(this.inputWrapper,"mouseup",this.dropDownClick),O.remove(this.inputWrapper,"focus",this.focusIn),O.remove(this.inputWrapper,"blur",this.focusOut),O.remove(this.inputWrapper,"mousemove",this.mouseIn),O.remove(this.inputWrapper,"mouseout",this.onMouseLeave),O.remove(this.overAllClear,"mousedown",this.clearAll),O.remove(window,"resize",this.windowResize);const e=ae(this.inputWrapper,"form");e&&O.remove(e,"reset",this.resetValueHandler)}dropDownClick(e){if(this.enabled&&!this.readonly){if(this.isClearButtonClick)return void(this.isClearButtonClick=!1);this.isPopupOpen?this.hidePopup():(this.focusIn(e),this.renderPopup()),this.showOverAllClear()}}mouseIn(){(this.enabled||!this.readonly)&&this.showOverAllClear()}onMouseLeave(){this.inputFocus||(j([this.overAllClear],nn),Y([this.inputWrapper],gC))}getDirective(){return"EJS-DROPDOWNTREE"}focusOut(e){if(!this.enabled||this.readonly||!this.inputFocus||(Q.isIE||"edge"===Q.info.name)&&e.target===this.inputWrapper)return;const t=e.relatedTarget;t!==this.inputEle&&m(t)&&(e.target!==this.inputWrapper||!this.isPopupOpen)&&this.onFocusOut(e)}onFocusOut(e){if(this.inputFocus=!1,this.isPopupOpen&&this.hidePopup(),this.isClearButtonClick&&(this.isClearButtonClick=!1),this.showClearButton&&(this.clearIconWidth=X(".e-clear-icon",this.inputWrapper).offsetWidth,j([this.overAllClear],nn),Y([this.inputWrapper],gC)),Y([this.inputWrapper],[Aw]),this.allowMultiSelection||this.showCheckBox){const t=!!this.value&&!!this.value.length;"Delimiter"!==this.mode&&"Custom"!==this.mode&&this.chipWrapper&&"Default"===this.mode&&(j([this.chipWrapper],nn),Y([this.inputWrapper],Vh),Y([this.inputEle],Ga)),!this.wrapText&&t&&this.updateView()}this.changeOnBlur&&this.triggerChangeEvent(e),this.removeValue=!1,this.oldValue=this.value,this.trigger("blur")}updateView(){!this.showCheckBox&&!this.allowMultiSelection||"Custom"===this.mode||this.inputFocus||("Box"!==this.mode?j([this.inputWrapper,this.overFlowWrapper],kw):j([this.inputWrapper],Vh),this.value&&0!==this.value.length&&(this.inputWrapper.contains(this.chipWrapper)&&j([this.chipWrapper],nn),j([this.inputEle],Ga),this.updateOverFlowView(),this.ensurePlaceHolder()))}triggerChangeEvent(e){this.ddtCompareValues(this.oldValue,this.value)&&!this.isChipDelete||this.removeValue||(this.trigger("change",{e,oldValue:this.oldValue,value:this.value,isInteracted:!!e,element:this.element}),this.oldValue=this.value)}ddtCompareValues(e,t){if(null===e||null===t)return(null===e||0===e.length)&&t===e;if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}focusIn(e){!this.enabled||this.readonly||this.inputFocus||(this.showOverAllClear(),this.inputFocus=!0,j([this.inputWrapper],[Aw]),(this.allowMultiSelection||this.showCheckBox)&&("Delimiter"!==this.mode&&this.inputFocus&&(this.chipWrapper&&this.value&&0!==this.value.length&&(Y([this.chipWrapper],nn),j([this.inputEle],Ga)),j([this.inputWrapper],Vh),this.popupObj&&this.popupObj.refreshPosition()),!this.wrapText&&"Custom"!==this.mode&&(this.inputWrapper.contains(this.overFlowWrapper)&&j([this.overFlowWrapper],nn),"Delimiter"===this.mode?(Y([this.inputWrapper],Vh),Y([this.inputEle],Ga)):j([this.inputWrapper],Vh),Y([this.inputWrapper],kw),this.ensurePlaceHolder())),this.trigger("focus",{isInteracted:!!e,event:e}))}treeAction(e){this.trigger("keyPress",{cancel:!1,event:e},i=>{if(i.cancel)e.stopImmediatePropagation();else switch(e.action){case"escape":case"altUp":this.inputWrapper.focus(),e.preventDefault(),this.isPopupOpen&&this.hidePopup();break;case"tab":case"shiftTab":this.isPopupOpen&&this.hidePopup();break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":this.showCheckBox||(this.isValueChange=!0,this.keyEventArgs=e);break;case"space":this.isValueChange=!0,this.keyEventArgs=e;break;case"ctrlA":this.allowMultiSelection&&this.selectAll(!0)}})}keyActionHandler(e){this.trigger("keyPress",{cancel:!1,event:e},i=>{if(!i.cancel)switch(e.action){case"escape":case"altUp":this.isPopupOpen&&this.hidePopup();break;case"shiftTab":case"tab":this.isPopupOpen&&this.hidePopup(),this.inputFocus&&this.onFocusOut();break;case"altDown":this.isPopupOpen||(this.showPopup(),e.preventDefault());break;case"moveDown":this.showSelectAll&&this.showCheckBox&&this.checkAllParent.focus()}})}checkAllAction(e){this.trigger("keyPress",{cancel:!1,event:e},i=>{if(!i.cancel)switch(e.action){case"space":this.clickHandler(e);break;case"moveDown":this.treeObj.element.focus()}})}windowResize(){this.popupObj&&(this.popupObj.setProperties({width:this.setWidth()}),this.popupObj.refreshPosition())}resetValueHandler(e){const t=ae(this.inputWrapper,"form");t&&e.target===t&&(this.isDynamicChange=!0,this.setProperties({value:null},!0),this.resetValue(!0),this.isDynamicChange=!1)}getAriaAttributes(){return{"aria-disabled":this.enabled?"false":"true","aria-owns":this.element.id+"_options",role:"listbox","aria-haspopup":"true","aria-expanded":"false","aria-activedescendant":"null","aria-labelledby":this.hiddenElement.id}}updateOverFlowView(){if(this.overFlowWrapper.classList.remove(Xx),Y([this.overFlowWrapper],nn),this.value&&this.value.length){let t,i,s,o,a,e="",r=1,u=0;this.overFlowWrapper.innerHTML="";const p={overflowCountTemplate:"+${count} more..",totalCountTemplate:"${count} selected"};this.l10n=new Xr(this.getLocaleName(),p,this.locale);const y=this.l10n.getConstant("overflowCountTemplate"),E=this.l10n.getConstant("totalCountTemplate"),_=this.createElement("span",{className:F2});this.overFlowWrapper.appendChild(_),_.innerText=y.replace("${count}",this.value.length.toString());const D=_.offsetWidth;if(Ms(_),this.showDropDownIcon&&(u=X("."+E6,this.inputWrapper).offsetWidth),!m(this.value))if("Box"!==this.mode)for(let L=0;!m(this.value[L]);L++){if(e+=0===L?"":this.delimiterChar+" ",i=this.getOverflowVal(L),e+=i,i=this.overFlowWrapper.innerHTML,this.overFlowWrapper.innerHTML=e,o=this.overFlowWrapper.offsetWidth,t=this.inputWrapper.offsetWidth,o+u+this.clearIconWidth>t){for(void 0!==s&&""!==s&&(i=s,L=r+1),this.overFlowWrapper.innerHTML=i,a=this.value.length-L,o=this.overFlowWrapper.offsetWidth;o+D+u+this.clearIconWidth>=t&&0!==o&&""!==this.overFlowWrapper.innerHTML;){const V=this.overFlowWrapper.innerHTML.split(this.delimiterChar);V.pop(),this.overFlowWrapper.innerHTML=V.join(this.delimiterChar),a++,o=this.overFlowWrapper.offsetWidth}break}o+D+u+this.clearIconWidth<=t?(s=e,r=L):0===L&&(s="",r=-1)}else{j([this.chipWrapper],nn);const L=this.chipWrapper.cloneNode(!0),V=at("."+P2,L);for(let H=0;H<V.length;H++){if(i=this.overFlowWrapper.innerHTML,this.overFlowWrapper.appendChild(V[H]),e=this.overFlowWrapper.innerHTML,o=this.overFlowWrapper.offsetWidth,t=this.inputWrapper.offsetWidth,o+u+this.clearIconWidth>t){for(void 0!==s&&""!==s&&(i=s,H=r+1),this.overFlowWrapper.innerHTML=i,a=this.value.length-H,o=this.overFlowWrapper.offsetWidth;o+D+u+this.clearIconWidth>=t&&0!==o&&""!==this.overFlowWrapper.innerHTML;)this.overFlowWrapper.removeChild(this.overFlowWrapper.lastChild),a++,o=this.overFlowWrapper.offsetWidth;break}o+D+u+this.clearIconWidth<=t?(s=e,r=H):0===H&&(s="",r=-1)}}a>0&&this.overFlowWrapper.appendChild(this.updateRemainTemplate(_,a,y,E)),"Box"===this.mode&&!this.overFlowWrapper.classList.contains(Xx)&&j([_],Ow)}else this.overFlowWrapper.innerHTML="",j([this.overFlowWrapper],nn);this.updateDelimMode()}updateRemainTemplate(e,t,i,s){return this.overFlowWrapper.firstChild&&3===this.overFlowWrapper.firstChild.nodeType&&""===this.overFlowWrapper.firstChild.nodeValue&&this.overFlowWrapper.removeChild(this.overFlowWrapper.firstChild),e.innerHTML="",e.innerText=!this.overFlowWrapper.firstChild||3!==this.overFlowWrapper.firstChild.nodeType&&"Box"!==this.mode?s.replace("${count}",t.toString()):i.replace("${count}",t.toString()),!this.overFlowWrapper.firstChild||3!==this.overFlowWrapper.firstChild.nodeType&&"Box"!==this.mode?(j([this.overFlowWrapper],Xx),Y([this.overFlowWrapper],Ow)):Y([this.overFlowWrapper],Xx),e}getOverflowVal(e){const t=this.getSelectedData(this.value[e]);return J(this.treeSettings.loadOnDemand?this.fields.text:"text",t)}updateDelimMode(){"Box"!==this.mode?X("."+F2,this.overFlowWrapper)&&!this.overFlowWrapper.classList.contains(Xx)?(j([this.overFlowWrapper],Ow),j([this.overFlowWrapper],kw)):(this.overFlowWrapper.classList.remove(Ow),Y([this.overFlowWrapper],Ow)):X("."+F2,this.overFlowWrapper)&&this.overFlowWrapper.classList.remove(Ow)}createHiddenElement(){this.hiddenElement=this.createElement("select",this.allowMultiSelection||this.showCheckBox?{attrs:{"aria-hidden":"true",class:u6,tabindex:"-1",multiple:""}}:{attrs:{"aria-hidden":"true",tabindex:"-1",class:u6}}),Tr([this.hiddenElement],this.inputWrapper),this.validationAttribute()}createClearIcon(){this.overAllClear=this.createElement("span",{className:"e-clear-icon e-icons"}),j([this.overAllClear],nn),Y([this.inputWrapper],gC),this.showClearButton&&this.inputWrapper.insertBefore(this.overAllClear,this.inputObj.buttons[0])}validationAttribute(){const e=this.inputEle.getAttribute("name")?this.inputEle.getAttribute("name"):this.inputEle.getAttribute("id");this.hiddenElement.setAttribute("name",e),this.inputEle.removeAttribute("name");const t=["required","aria-required","form"];for(let i=0;i<t.length;i++){const s=this.inputEle.getAttribute(t[i]);s&&(this.hiddenElement.setAttribute(t[i],s),this.inputEle.removeAttribute(t[i]))}}createChip(){this.inputWrapper.contains(this.chipWrapper)||(this.chipWrapper=this.createElement("span",{className:"e-chips-wrapper"}),this.chipCollection=this.createElement("span",{className:"e-chips-collection"}),this.chipWrapper.appendChild(this.chipCollection),this.inputWrapper.insertBefore(this.chipWrapper,this.hiddenElement),j([this.inputWrapper],Vh),this.getValidMode()&&null!==this.value&&this.value&&0!==this.value.length?j([this.inputEle],Ga):(null===this.value||this.value&&0===this.value.length)&&j([this.chipWrapper],nn))}getValidMode(){return!(!this.allowMultiSelection&&!this.showCheckBox||"Box"!==this.mode&&("Default"!==this.mode||!this.inputFocus))}createSelectAllWrapper(){this.checkAllParent=this.createElement("div",{className:IO,attrs:{tabindex:"0"}}),this.selectAllSpan=this.createElement("span",{className:b6}),this.selectAllSpan.textContent="";const t=m(ae(this.element,".e-bigger"))?"":"e-small";this.checkBoxElement=x0(this.createElement,!0,{cssClass:t}),this.checkBoxElement.setAttribute("role","checkbox"),this.checkAllParent.appendChild(this.checkBoxElement),this.checkAllParent.appendChild(this.selectAllSpan),this.setLocale(),O.add(this.checkAllParent,"mouseup",this.clickHandler,this),this.wireCheckAllWrapperEvents()}clickHandler(e){let t;if(t=e.currentTarget&&e.currentTarget.classList.contains(IO)?e.currentTarget.firstElementChild.lastElementChild:e.target,this.checkWrapper=ae(t,"."+N2),!m(this.checkWrapper)){this.isClicked=!0;const i=X("."+R2,this.checkWrapper);this.changeState(this.checkWrapper,i.classList.contains(Zx)?"uncheck":"check",e),this.isClicked=!1}e.preventDefault()}changeState(e,t,i){let s;const r=e.getElementsByClassName(R2)[0];"check"!==t||r.classList.contains(Zx)?"uncheck"===t&&r.classList.contains(Zx)&&(r.classList.remove(Zx),s="false",this.isReverseUpdate||(this.treeObj.uncheckAll(),this.changeOnBlur||this.triggerChangeEvent(i)),this.setLocale(!1)):(r.classList.add(Zx),s="true",this.isReverseUpdate||(this.treeObj.checkAll(),this.changeOnBlur||this.triggerChangeEvent(i)),this.setLocale(!0)),this.setMultiSelect(),this.ensurePlaceHolder(),s="check"===t?"true":"false",m(s)||e.setAttribute("aria-checked",s)}setLocale(e){if(this.selectAllSpan)if("Select All"!==this.selectAllText||"Unselect All"!==this.unSelectAllText){const t=e?this.unSelectAllText:this.selectAllText;this.selectAllSpan.textContent="";const i=xs(t),s=e?"unSelectAllText":"selectAllText";for(const r of i({},this,s,null,!this.isStringTemplate))this.selectAllSpan.textContent=r.textContent}else this.selectAllSpan.textContent=e?this.unSelectAllText:this.selectAllText}setAttributes(){this.inputEle.setAttribute("tabindex","-1");const e=this.element.getAttribute("id");this.hiddenElement.id=e+"_hidden",this.inputWrapper.setAttribute("tabindex","0"),bt(this.inputWrapper,this.getAriaAttributes())}setHTMLAttributes(){if(Object.keys(this.htmlAttributes).length)for(const e of Object.keys(this.htmlAttributes))if("class"===e)this.inputWrapper.classList.add(this.htmlAttributes[e]);else if("disabled"===e&&"disabled"===this.htmlAttributes[e])this.setProperties({enabled:!1},!0),this.setEnable();else if("readonly"!==e||m(this.htmlAttributes[e]))if("style"===e)this.inputWrapper.setAttribute("style",this.htmlAttributes[e]);else{const t=["title","id","placeholder","aria-placeholder","role","autocorrect","autocomplete","autocapitalize","spellcheck","minlength","maxlength"],i=["name","required"];0===e.indexOf("data")||i.indexOf(e)>-1?this.hiddenElement.setAttribute(e,this.htmlAttributes[e]):t.indexOf(e)>-1?"placeholder"===e?ft.setPlaceholder(this.htmlAttributes[e],this.inputEle):this.inputEle.setAttribute(e,this.htmlAttributes[e]):this.inputWrapper.setAttribute(e,this.htmlAttributes[e])}else this.setProperties({readonly:!0},!0),this.dataBind()}updateDataAttribute(){const e=this.htmlAttributes,t=["class","style","id","type"],i={};for(let s=0;s<this.element.attributes.length;s++)-1===t.indexOf(this.element.attributes[s].name)&&"readonly"!==this.element.attributes[s].name&&(i[this.element.attributes[s].name]=this.element.getAttribute(this.element.attributes[s].name));ut(i,e,i),this.setProperties({htmlAttributes:i},!0)}showOverAllClear(){!this.enabled||this.readonly||this.overAllClear&&(this.value&&this.value.length&&this.showClearButton?(Y([this.overAllClear],nn),j([this.inputWrapper],gC)):(j([this.overAllClear],nn),Y([this.inputWrapper],gC)))}setTreeValue(){if(null!==this.value&&0!==this.value.length){let e;if(this.showCheckBox||this.allowMultiSelection){for(let t=0;t<this.value.length;t++)e=this.treeObj.getTreeData(this.value[t])[0],m(e)&&this.value.splice(this.value.indexOf(this.value[t]),1);0!==this.value.length&&this.setValidValue()}else e=this.treeObj.getTreeData(this.value[0])[0],m(e)?this.setProperties({value:this.currentValue},!0):(this.setProperties({text:e[this.fields.text]},!0),this.setValidValue())}}setTreeText(){if((null===this.value||this.isInitialized)&&null!==this.text){let e;const t=[];if(this.showCheckBox||this.allowMultiSelection){const i=this.text.split(this.delimiterChar);for(let s=0;s<i.length;s++)e=this.getItems(i[s]),m(e)||t.push(e[this.fields.value].toString());0!==t.length?(this.oldValue=this.value,this.setProperties({value:t},!0),this.setValidValue()):this.setProperties({text:this.currentText},!0)}else e=this.getItems(this.text),m(e)?this.setProperties({text:this.currentText},!0):(this.oldValue=this.value,this.setProperties({value:[e[this.fields.value].toString()]},!0),this.setValidValue())}}setSelectedValue(){null==this.value&&(this.isInitialized||(this.oldValue=this.value,this.treeObj.selectedNodes.length>0&&!this.showCheckBox?(this.setProperties({value:this.treeObj.selectedNodes},!0),this.allowMultiSelection&&this.updateMode()):this.showCheckBox&&this.treeObj.checkedNodes&&this.treeObj.checkedNodes.length>0&&(this.setProperties({value:this.treeObj.checkedNodes},!0),pi("selectedNodes",[],this.treeObj),this.treeObj.dataBind(),this.updateMode()),this.updateSelectedValues(),this.currentText=this.text,this.currentValue=this.value))}setValidValue(){if(this.showCheckBox||this.allowMultiSelection)this.showCheckBox?(this.value.filter(t=>-1===this.treeObj.checkedNodes.indexOf(t)).length>0||this.treeSettings.autoCheck)&&(this.treeObj.checkedNodes=this.value.slice(),this.treeObj.dataBind(),this.setMultiSelect()):(this.treeObj.selectedNodes=this.value.slice(),this.selectedText=[],this.updateSelectedValues()),this.treeObj.dataBind();else{ft.setValue(this.text,this.inputEle,this.floatLabelType);const e=this.value[0].toString();this.treeObj.selectedNodes[0]!==e&&pi("selectedNodes",[e],this.treeObj)}this.currentText=this.text,this.currentValue=this.value,this.isInitialized&&this.triggerChangeEvent()}getItems(e){let t;if(1===this.treeDataType)for(let i=0;i<this.treeItems.length;i++){const s=J(this.fields.text,this.treeItems[i]);if(!m(this.treeItems[i])&&!m(s)&&s===e){t=this.treeItems[i];break}}else t=this.getNestedItems(this.treeItems,this.fields,e);return t}getNestedItems(e,t,i){let s;for(let r=0,o=e.length;r<o;r++){const a=J(this.fields.text,e[r]);if(e[r]&&a&&a.toString()===i)return e[r];if("string"!=typeof t.child||m(J(t.child,e[r]))){if(this.fields.dataSource instanceof Nt&&!m(J("child",e[r]))&&(s=this.getNestedItems(J("child",e[r]),this.getChildType(t),i),void 0!==s))break}else{const u=J(t.child,e[r]);if(s=this.getNestedItems(u,this.getChildType(t),i),void 0!==s)break}}return s}getChildType(e){return"string"==typeof e.child||m(e.child)?e:e.child}renderTree(){this.treeObj=new Ji({fields:this.getTreeFields(this.fields),enableRtl:this.enableRtl,nodeSelected:this.onNodeSelected.bind(this),nodeChecked:this.onNodeChecked.bind(this),nodeChecking:this.beforeCheck.bind(this),actionFailure:this.onActionFailure.bind(this),nodeClicked:this.onNodeClicked.bind(this),dataBound:this.OnDataBound.bind(this),allowMultiSelection:this.allowMultiSelection,showCheckBox:this.showCheckBox,autoCheck:this.treeSettings.autoCheck,sortOrder:this.sortOrder,expandOn:this.treeSettings.expandOn,loadOnDemand:this.treeSettings.loadOnDemand,nodeSelecting:this.onBeforeSelect.bind(this),nodeTemplate:this.itemTemplate}),this.treeObj.appendTo("#"+this.tree.id)}renderPopup(){this.isFilteredData&&(this.filterObj.value="",this.treeObj.fields=this.getTreeFields(this.fields),this.isFilterRestore=!0,this.isFilteredData=!1,this.hideCheckAll(!1));let e=!1;this.trigger("beforeOpen",{cancel:!1},i=>{if(i.cancel?e=!0:(j([this.inputWrapper],[f6]),this.isFirstRender?(this.popupEle=this.createElement("div",{id:this.element.id+"_popup",className:"e-ddt e-popup "+(null!=this.cssClass?this.cssClass:"")}),document.body.appendChild(this.popupEle),this.createPopup(this.popupEle)):this.popupEle=this.popupObj.element),this.isFirstRender&&!e&&(Tr([this.popupDiv],this.popupEle),Y([this.popupDiv],_O),this.allowFiltering&&this.renderFilter(),this.showCheckBox&&this.showSelectAll&&!this.popupDiv.classList.contains(Dw)&&(this.createSelectAllWrapper(),this.popupEle.insertBefore(this.checkAllParent,this.popupDiv)),this.headerTemplate&&this.setHeaderTemplate(),this.footerTemplate&&this.setFooterTemplate(),this.isFirstRender=!1,this.hasTemplate&&this.portals&&(this.portals=this.portals.concat(this.treeObj.portals),this.renderReactTemplates())),!e){if(bt(this.inputWrapper,{"aria-expanded":"true"}),this.popupObj.show(null,1e3===this.zIndex?this.inputEle:null),Y([this.popupEle],_O),this.updatePopupHeight(),this.popupObj.refreshPosition(),!(this.showCheckBox&&this.showSelectAll)&&!this.popupDiv.classList.contains(Dw)&&this.treeItems.length>0&&this.treeObj.element.focus(),this.checkSelectAll&&this.checkBoxElement){const r=ae(this.checkBoxElement,"."+N2);this.changeState(r,"check"),this.checkSelectAll=!1}this.allowFiltering&&(Y([this.inputWrapper],[Aw]),this.filterObj.element.focus()),this.trigger("open",{popup:this.popupObj})}})}updatePopupHeight(){if(this.isFirstRender)return;let e=this.getHeight();if(this.popupEle.style.maxHeight=e,this.allowFiltering){const i=Math.round(this.filterContainer.getBoundingClientRect().height);e=ct(parseInt(e,10)-i+"px")}if(this.headerTemplate){const i=Math.round(this.header.getBoundingClientRect().height);e=ct(parseInt(e,10)-i+"px")}if(this.showCheckBox&&this.showSelectAll){const i=Math.round(this.checkAllParent.getBoundingClientRect().height);e=ct(parseInt(e,10)-i+"px")}if(this.footerTemplate){const i=Math.round(this.footer.getBoundingClientRect().height);e=ct(parseInt(e,10)-i+"px")}let t=parseInt(window.getComputedStyle(this.popupEle).borderTopWidth,10);t+=parseInt(window.getComputedStyle(this.popupEle).borderBottomWidth,10),e=ct(parseInt(e,10)-t+"px"),this.popupDiv.style.maxHeight=e}createPopup(e){this.isFirstRender&&(this.popupObj=new Th(e,{width:this.setWidth(),targetType:"relative",collision:{X:"flip",Y:"flip"},relateTo:this.inputWrapper,zIndex:this.zIndex,enableRtl:this.enableRtl,position:{X:"left",Y:"bottom"},close:()=>{this.isPopupOpen=!1},open:()=>{O.add(document,"mousedown",this.onDocumentClick,this),this.isPopupOpen=!0},targetExitViewport:()=>{Q.isDevice||this.hidePopup()}}))}setElementWidth(e){const t=this.inputWrapper;m(e)||("number"==typeof e?t.style.width=ct(e):"string"==typeof e&&(t.style.width=e.match(/px|%|em/)?e:ct(e)))}setWidth(){let e=ct(this.popupWidth);return e.indexOf("%")>-1?e=(this.inputWrapper.offsetWidth*parseFloat(e)/100).toString()+"px":"string"==typeof this.popupWidth&&(e=this.popupWidth.match(/px|em/)?this.popupWidth:e),e}getHeight(){let e=ct(this.popupHeight);return e.indexOf("%")>-1?e=(document.documentElement.clientHeight*parseFloat(e)/100).toString()+"px":"string"==typeof this.popupHeight&&(e=this.popupHeight.match(/px|em/)?this.popupHeight:e),e}onDocumentClick(e){const t=e.target,i=ae(t,"."+g6),s=ae(t,"."+C6),r=ae(t,"."+S6),o=ae(t,"."+w6),a=!!t.classList.contains(y6)||vg(t,".e-ddt .e-popup")||vg(t,".e-ddt .e-treeview");this.isPopupOpen&&(this.inputWrapper.contains(t)||i||s||a||r||o)||(this.allowMultiSelection||this.showCheckBox)&&(this.isPopupOpen&&t.classList.contains(L2)||this.isPopupOpen&&(t.classList.contains(IO)||t.classList.contains(b6)||t.classList.contains(R2)))?(this.isDocumentClick=!1,e.preventDefault()):!this.inputWrapper.contains(t)&&this.inputFocus&&this.focusOut(e)}onActionFailure(e){this.trigger("actionFailure",e),this.l10nUpdate(!0),j([this.popupDiv],Dw)}OnDataBound(e){this.treeItems=e.data,this.treeItems.length<=0?(this.l10nUpdate(),j([this.popupDiv],Dw),this.hideCheckAll(!0)):this.popupDiv.classList.contains(Dw)&&this.treeItems.length>=1&&(Y([this.popupDiv],Dw),this.hideCheckAll(!1)),this.treeDataType=this.getTreeDataType(this.treeItems,this.fields),this.isFirstRender&&this.isRemoteData&&(this.setTreeValue(),this.setTreeText(),this.updateHiddenValue(),this.setSelectedValue(),this.wrapText||this.updateView(),this.treeObj.element.focus()),this.trigger("dataBound",{data:e.data}),this.isFilteredData&&this.treeObj.expandAll(),this.isFilterRestore&&(this.restoreFilterSelection(),this.isFilterRestore=!1)}restoreFilterSelection(){this.showCheckBox?this.treeObj.checkedNodes=this.value?this.value:[]:this.treeObj.selectedNodes=this.value?this.value:[]}setCssClass(e,t){const i=this.popupObj?[this.inputWrapper,this.popupObj.element]:[this.inputWrapper];!m(t)&&""!==t&&Y(i,t.split(" ")),!m(e)&&""!==e&&j(i,e.split(" "))}setEnableRTL(e){e?this.inputWrapper.classList.add("e-rtl"):this.inputWrapper.classList.remove("e-rtl"),this.popupObj&&(this.popupObj.enableRtl=e,this.popupObj.dataBind()),this.treeObj&&(this.treeObj.enableRtl=e,this.treeObj.dataBind())}setEnable(){ft.setEnabled(this.enabled,this.inputEle),this.enabled?(Y([this.inputWrapper],v6),this.inputEle.setAttribute("aria-disabled","false"),this.inputWrapper.setAttribute("aria-disabled","false")):(this.isPopupOpen&&this.hidePopup(),j([this.inputWrapper],v6),this.inputWrapper&&this.inputWrapper.classList.contains(Aw)&&Y([this.inputWrapper],[Aw]),this.inputEle.setAttribute("aria-disabled","true"),this.inputWrapper.setAttribute("aria-disabled","true"))}cloneFields(e){return{dataSource:e.dataSource,value:e.value,text:e.text,parentValue:e.parentValue,child:this.cloneChildField(e.child),hasChildren:e.hasChildren,expanded:e.expanded,iconCss:e.iconCss,imageUrl:e.imageUrl,htmlAttributes:e.htmlAttributes,query:e.query,selected:e.selected,tableName:e.tableName,tooltip:e.tooltip}}cloneChildField(e){return"string"==typeof e?e:{dataSource:e.dataSource,value:e.value,text:e.text,parentValue:e.parentValue,child:e.child?this.cloneChildField(e.child):null,hasChildren:e.hasChildren,expanded:e.expanded,iconCss:e.iconCss,imageUrl:e.imageUrl,htmlAttributes:e.htmlAttributes,query:e.query,selected:e.selected,tableName:e.tableName,tooltip:e.tooltip}}getTreeFields(e){return{dataSource:e.dataSource,id:e.value,text:e.text,parentID:e.parentValue,child:this.getTreeChildren(e.child),hasChildren:e.hasChildren,expanded:e.expanded,iconCss:e.iconCss,imageUrl:e.imageUrl,isChecked:e.selected,htmlAttributes:e.htmlAttributes,query:e.query,selected:e.selected,tableName:e.tableName,tooltip:e.tooltip}}getTreeChildren(e){if("string"==typeof e)return e;if(!m(e)){const t=e=this.getActualProperties(e);return e.value&&(t.id=e.value),e.parentValue&&(t.parentID=e.parentValue),e.child&&(t.child=this.getTreeChildren(e.child)),e.selected&&this.showCheckBox&&(t.isChecked=e.selected),t}return null}getTreeDataType(e,t){if(this.fields.dataSource instanceof Nt){for(let i=0;i<e.length;i++)if("string"==typeof t.child&&m(J(t.child,e[i])))return 1;return 2}for(let i=0,s=e.length;i<s;i++){if("string"==typeof t.child&&!m(J(t.child,e[i])))return 2;if(!m(J(t.parentValue,e[i]))||!m(J(t.hasChildren,e[i])))return 1}return 1}setFields(){this.resetValue(),this.hasTemplate&&this.updateTemplate(),this.treeObj.fields=this.getTreeFields(this.fields),this.treeObj.dataBind()}getEventArgs(e){let s;return this.showCheckBox&&("check"===e.action?s="select":"uncheck"===e.action&&(s="un-select")),{action:this.showCheckBox?s:e.action,isInteracted:!!this.isClicked||e.isInteracted,item:e.node,itemData:this.showCheckBox?e.data[0]:e.nodeData}}onBeforeSelect(e){e.isInteracted&&(this.oldValue=this.value?this.value.slice():this.value,null===this.value&&this.setProperties({value:[]},!0))}updateHiddenValue(){this.allowMultiSelection||this.showCheckBox||(this.hiddenElement.innerHTML=this.value&&this.value.length?'<option selected value ="'+this.value[0]+'">'+this.text+"</option>":"")}onNodeSelected(e){if(this.showCheckBox)return;let t;if(e.isInteracted){const s=J("id",e.nodeData).toString();this.allowMultiSelection?this.allowMultiSelection&&this.setMultiSelect():(this.hiddenElement.innerHTML="",this.setProperties({value:[s]},!0),t=this.itemTemplate?J("text",this.treeObj.getNode(s)):J("text",e.nodeData).toString(),ft.setValue(t,this.inputEle,this.floatLabelType),this.setProperties({text:t},!0),this.currentText=this.text,this.currentValue=this.value,bt(this.inputWrapper,{"aria-describedby":this.element.id}),bt(this.inputWrapper,{"aria-activedescendant":s.toString()}),this.updateHiddenValue(),this.showOverAllClear(),this.hidePopup(),this.isNodeSelected=!0)}const i=this.getEventArgs(e);this.trigger("select",i),this.isValueChange&&!this.changeOnBlur&&(this.triggerChangeEvent(this.keyEventArgs),this.isValueChange=!1)}onNodeClicked(e){!this.changeOnBlur&&this.isNodeSelected&&(this.triggerChangeEvent(e.event),this.isNodeSelected=!1);const t=e.event.target;(t.classList.contains("e-fullrow")||t.classList.contains("e-list-text"))&&this.showCheckBox&&(this.isClicked=!0,"true"===this.treeObj.getNode(e.node).isChecked?this.treeObj.uncheckAll([e.node]):this.treeObj.checkAll([e.node]),this.isClicked=!1,this.setMultiSelect(),this.ensurePlaceHolder()),!this.changeOnBlur&&(this.allowMultiSelection||this.showCheckBox)&&this.triggerChangeEvent(e.event)}onNodeChecked(e){const t=this.getEventArgs(e);if(this.trigger("select",t),this.isFilteredData&&"uncheck"===e.action){const i=J("id",e.data[0]).toString();this.removeSelectedData(i,!0)}if(!this.isChipDelete&&e.isInteracted&&(this.setMultiSelect(),this.ensurePlaceHolder()),this.showSelectAll&&this.checkBoxElement){const i=this.treeObj.element.querySelectorAll("li"),s=this.treeObj.element.querySelectorAll("li .e-checkbox-wrapper[aria-checked=true]"),r=ae(this.checkBoxElement,"."+N2);r&&"uncheck"===e.action?(this.isReverseUpdate=!0,this.changeState(r,"uncheck"),this.isReverseUpdate=!1):r&&"check"===e.action&&s.length===i.length&&(this.isReverseUpdate=!0,this.changeState(r,"check"),this.isReverseUpdate=!1)}}beforeCheck(e){e.isInteracted&&(this.oldValue=this.value?this.value.slice():this.value)}updateClearButton(e){if(e?this.inputWrapper.contains(this.overAllClear)?(Y([this.overAllClear],nn),j([this.inputWrapper],gC)):this.inputEle.parentElement.insertBefore(this.overAllClear,this.inputEle.nextSibling):(j([this.overAllClear],nn),Y([this.inputWrapper],gC)),(this.allowMultiSelection||this.showCheckBox)&&this.chipWrapper){const t=at("."+L2,this.chipWrapper);for(let i=0;i<t.length;i++)e?Y([t[i]],nn):j([t[i]],nn)}}updateDropDownIconState(e){const t=X("."+E6,this.inputWrapper);e?(t?Y([t],nn):ft.appendSpan(d6,this.inputWrapper,this.createElement),j([this.inputWrapper],M2)):(j([t],nn),Y([this.inputWrapper],M2))}updateMode(){if("Custom"!==this.mode)if("Delimiter"!==this.mode){this.inputWrapper.contains(this.chipWrapper)||this.createChip();const e=this.getValidMode();this.chipWrapper.classList.contains(nn)&&e?(Y([this.chipWrapper],nn),j([this.inputWrapper],Vh)):e||(j([this.chipWrapper],nn),Y([this.inputWrapper],Vh));const t=null!==this.value&&0!==this.value.length;e&&t?j([this.inputEle],Ga):Y([this.inputEle],Ga)}else this.inputEle.classList.contains(Ga)&&(Y([this.inputEle],Ga),this.chipWrapper&&(j([this.chipWrapper],nn),Y([this.inputWrapper],Vh)))}ensurePlaceHolder(){this.value&&0===this.value.length&&(Y([this.inputEle],Ga),this.chipWrapper&&j([this.chipWrapper],nn))}ensureClearIconPosition(e){"Never"!==e&&this.inputWrapper.insertBefore(this.overAllClear,this.inputObj.buttons[0])}setMultiSelectValue(e){if(this.isFilteredData){const t=m(this.value)?[]:this.value;for(let i=0;i<e.length;i++)(m(this.value)||-1===this.value.indexOf(e[i]))&&t.push(e[i]);this.setProperties({value:t},!0)}else this.setProperties({value:e},!0),e&&0!==e.length&&!this.showCheckBox&&(this.treeObj.selectedNodes=this.value.slice(),this.treeObj.dataBind())}setMultiSelect(){this.showCheckBox&&!this.isDynamicChange?this.setMultiSelectValue(this.treeObj.checkedNodes.slice()):(this.setMultiSelectValue(this.allowMultiSelection?this.showCheckBox?this.treeObj.checkedNodes:this.treeObj.selectedNodes:this.value?this.showCheckBox?this.value:[this.value[0]]:null),this.showCheckBox&&null!==this.value&&(this.treeObj.checkedNodes=this.value,this.treeObj.dataBind())),this.selectedText=[];const e=!!this.allowMultiSelection||!!this.showCheckBox;this.inputWrapper.contains(this.chipWrapper)&&!e&&(Y([this.inputEle],Ga),ye(this.chipWrapper)),this.getValidMode()&&null!==this.value&&(j([this.inputEle],Ga),this.chipWrapper&&Y([this.chipWrapper],nn)),this.chipWrapper&&"Box"===this.mode&&!(this.value&&this.value.length)&&(j([this.chipWrapper],nn),Y([this.inputEle],Ga)),this.updateSelectedValues()}getSelectedData(e){let t=null;if(this.isFilteredData)for(let i=0;i<this.selectedData.length;i++)if(J(this.treeSettings.loadOnDemand?this.fields.value:"id",this.selectedData[i]).toString()===e){t=this.selectedData[i];break}return m(t)&&(t=this.treeSettings.loadOnDemand?this.getNodeData(e):this.treeObj.getNode(e),m(t)||this.selectedData.push(t)),t}getNodeData(e){let t;if(m(e))return t;if(1!==this.treeDataType)return this.getChildNodeData(this.treeItems,this.fields,e);for(let i=0,s=this.treeItems.length;i<s;i++){let r=J(this.fields.value,this.treeItems[i]);if(!m(this.treeItems[i])&&!m(r)&&r.toString()===e)return this.treeItems[i]}return t}getChildNodeData(e,t,i){let s;if(m(e))return s;for(let r=0,o=e.length;r<o;r++){let a=J(t.value,e[r]);if(e[r]&&a&&a.toString()===i)return e[r];if("string"!=typeof t.child||m(J(t.child,e[r]))){if(this.fields.dataSource instanceof Nt&&!m(J("child",e[r]))&&(s=this.getChildNodeData(J("child",e[r]),this.getChildMapperFields(t),i),void 0!==s))break}else{let u=J(t.child,e[r]);if(s=this.getChildNodeData(u,this.getChildMapperFields(t),i),void 0!==s)break}}return s}getChildMapperFields(e){return"string"==typeof e.child||m(e.child)?e:e.child}removeSelectedData(e,t){const i=m(this.value)?[]:this.value.slice();i.splice(i.indexOf(e),1),this.setProperties({value:i},t);for(let s=0;s<this.selectedData.length;s++)if(J(this.treeSettings.loadOnDemand?this.fields.value:"id",this.selectedData[s]).toString()===e){this.selectedData.splice(s,1);break}}updateSelectedValues(){this.dataValue="";let e,t,s,i="";this.hiddenElement.innerHTML="";let r="";if((!this.isChipDelete||this.treeSettings.autoCheck)&&this.inputWrapper.contains(this.chipWrapper)&&(this.chipCollection.innerHTML=""),this.isFilteredData||(this.selectedData=[]),!m(this.value)){for(let a=0,u=this.value.length;a<u;a++)s=this.getSelectedData(this.value[a]),t=J(this.treeSettings.loadOnDemand?this.fields.text:"text",s),this.selectedText.push(t),e=this.selectedText[this.selectedText.length-1],this.selectedText.length>1?(this.dataValue+=this.delimiterChar+" "+e,i+=","+e):(this.dataValue+=e,i+=e),"Custom"!==this.mode&&"Delimiter"!==this.mode&&(!this.isChipDelete||this.treeSettings.autoCheck)&&(this.allowMultiSelection||this.showCheckBox)&&this.setChipValues(e,this.value[a]),r+='<option selected value ="'+this.value[a]+'">'+this.selectedText[this.selectedText.length-1]+"</option>";this.selectedText.length>=1&&this.setProperties({text:i},!0),this.hiddenElement.innerHTML=r,"Custom"===this.mode&&(this.allowMultiSelection||this.showCheckBox)&&this.setTagValues()}const o=this.getValidMode();"Custom"!==this.mode&&"Box"!==this.mode&&(this.allowMultiSelection||this.showCheckBox)&&!o&&this.chipWrapper&&(j([this.chipWrapper],nn),Y([this.inputWrapper],Vh)),ft.setValue(this.dataValue,this.inputEle,this.floatLabelType),this.setProperties(""===i?{text:null}:{text:i},!0),this.showClearButton&&this.inputFocus&&this.showOverAllClear(),(this.allowMultiSelection||this.showCheckBox)&&this.popupObj&&this.popupObj.refreshPosition(),this.currentText=this.text,this.currentValue=this.value}setChipValues(e,t){this.inputWrapper.contains(this.chipWrapper)||this.createChip();const i=this.createElement("span",{className:P2,attrs:{"data-value":t}}),s=this.createElement("span",{className:m6}),r=this.createElement("span",{className:L2+" e-icons"});s.innerHTML=e,i.appendChild(s),this.chipCollection.appendChild(i),this.showClearButton&&(i.appendChild(r),O.add(r,"mousedown",this.removeChip,this))}setTagValues(){if(null===this.value||null==this.text)return;this.inputWrapper.contains(this.chipWrapper)||this.createChip(),this.inputWrapper.classList.contains(Vh)||j([this.inputWrapper],Vh);const e=this.createElement("span",{className:P2});this.inputEle.classList.contains(Ga)||j([this.inputEle],Ga),this.chipWrapper.classList.contains(nn)&&Y([this.chipWrapper],nn);const t=this.createElement("span",{className:m6}),s=this.customTemplateId;let a=this.templateComplier(this.customTemplate)({value:this.value,text:this.text},this,"customTemplate",s,this.isStringTemplate,void 0,t);a&&(a=Array.prototype.slice.call(a),Pi(a,t)),e.appendChild(t),this.chipCollection.appendChild(e)}setSelectAllWrapper(e){this.isFirstRender||(e&&!this.popupEle.contains(this.checkAllParent)&&this.showCheckBox?(this.createSelectAllWrapper(),this.popupEle.insertBefore(this.checkAllParent,this.popupDiv)):this.popupEle.contains(this.checkAllParent)&&(ye(this.checkAllParent),this.checkAllParent=null))}setHeaderTemplate(){this.header?this.header.innerHTML="":(this.header=this.createElement("div"),j([this.header],S6));let t=this.templateComplier(this.headerTemplate)({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,void 0,this.header);t&&(t=Array.prototype.slice.call(t),Pi(t,this.header)),this.popupEle.insertBefore(this.header,this.checkAllParent?this.checkAllParent:this.popupDiv)}templateComplier(e){if(e)try{if(document.querySelectorAll(e).length)return xs(document.querySelector(e).innerHTML.trim())}catch(t){return xs(e)}return xs(e)}setFooterTemplate(){this.footer?this.footer.innerHTML="":(this.footer=this.createElement("div"),j([this.footer],w6));let t=this.templateComplier(this.footerTemplate)({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,void 0,this.footer);t&&(t=Array.prototype.slice.call(t),Pi(t,this.footer)),Pi([this.footer],this.popupEle)}clearAll(e){!this.enabled||this.readonly||(this.resetValue(),this.showOverAllClear(),(this.allowMultiSelection||this.showCheckBox)&&(this.popupObj&&this.popupObj.refreshPosition(),this.wrapText||this.updateOverflowWrapper(!0)),e&&(this.isClearButtonClick=!0),this.changeOnBlur||this.triggerChangeEvent(e))}removeChip(e){if(!this.enabled||this.readonly)return;const t=e.target.parentElement,i=t.getAttribute("data-value");this.chipCollection&&t&&Ms(t),this.isChipDelete=!0,this.isClearButtonClick=!0,this.removeSelectedData(i,!0),this.selectedText=[],this.allowMultiSelection&&(this.treeObj.selectedNodes=this.value.slice(),this.updateSelectedValues()),this.showCheckBox&&(this.treeObj.uncheckAll([i]),this.clearCheckAll(),this.setMultiSelect()),this.triggerChangeEvent(e),this.isChipDelete=!1,this.ensurePlaceHolder()}resetValue(e){this.value==[]&&null==this.text||(ft.setValue(null,this.inputEle,this.floatLabelType),e||(this.oldValue=this.value,this.setProperties({value:[]},!0)),this.dataValue=null,this.setProperties({text:null},!0),this.selectedData=[],pi("selectedNodes",[],this.treeObj),this.hiddenElement.innerHTML="",this.showCheckBox&&(this.treeObj.checkedNodes=[],this.treeObj.dataBind(),this.setMultiSelect(),this.clearCheckAll()),null!==this.oldValue||e?e&&this.triggerChangeEvent():this.removeValue=!0,(this.allowMultiSelection||this.showCheckBox)&&this.chipWrapper&&(this.chipCollection.innerHTML="",this.wrapText||this.updateOverflowWrapper(!0),this.ensurePlaceHolder()))}clearCheckAll(){this.showSelectAll&&this.value&&0===this.value.length&&this.setLocale(!1)}selectAllItems(e){if(this.showCheckBox)e?this.treeObj.checkAll():this.treeObj.uncheckAll(),this.checkSelectAll=!0;else if(this.allowMultiSelection)if(e){const t=at("li",this.treeObj.element);let i;const s=[];for(let r=0;r<t.length;r++)i=t[r].getAttribute("data-uid").toString(),s.push(i);this.treeObj.selectedNodes=s}else this.treeObj.selectedNodes=[];this.updateMode(),this.setMultiSelect(),this.wrapText||(e?this.updateView():this.updateOverflowWrapper(!0))}updateTreeSettings(e){const t=Object.keys(e.treeSettings)[0];if("autoCheck"===t)this.ensureAutoCheck(),this.treeObj.autoCheck=this.treeSettings.autoCheck;else if("loadOnDemand"===t)this.treeObj.loadOnDemand=this.treeSettings.loadOnDemand;else if("expandOn"===t)return this.treeObj.expandOn=this.treeSettings.expandOn,void this.treeObj.dataBind();this.treeObj.dataBind(),this.setMultiSelect(),this.updateValue(this.value)}updateCheckBoxState(e){this.hasTemplate&&this.updateTemplate(),this.wrapText||this.updateOverflowWrapper(!1),this.treeObj.showCheckBox=e,this.treeObj.dataBind(),this.isDynamicChange=!0,this.setSelectAllWrapper(this.showSelectAll),this.showSelectAll&&this.setLocale(),this.showCheckBox&&this.updateMode(),this.setMultiSelect(),this.isDynamicChange=!1}updateTemplate(){this.popupObj&&(this.clearTemplate(),this.portals=[],this.popupObj.destroy(),this.isPopupOpen?(this.hidePopup(),this.isFirstRender=!0,this.renderPopup()):this.isFirstRender=!0)}l10nUpdate(e){if(this.noRecord?this.noRecord.innerHTML="":(this.noRecord=this.createElement("div"),j([this.noRecord],"e-ddt-nodata"),Tr([this.noRecord],this.popupDiv)),"No Records Found"!==this.noRecordsTemplate||"The Request Failed"!==this.actionFailureTemplate){const i=e?this.actionFailureTemplateId:this.noRecordsTemplateId,s=e?"actionFailureTemplate":"noRecordsTemplate";let o=this.templateComplier(e?this.actionFailureTemplate:this.noRecordsTemplate)({},this,s,i,this.isStringTemplate,void 0,this.noRecord);o&&(o=Array.prototype.slice.call(o),Pi(o,this.noRecord))}else{const t={noRecordsTemplate:"No Records Found",actionFailureTemplate:"The Request Failed"};this.l10n=new Xr(this.getLocaleName(),t,this.locale),this.noRecord.innerHTML=this.l10n.getConstant(e?"actionFailureTemplate":"noRecordsTemplate")}}updateRecordTemplate(e){this.treeItems&&this.treeItems.length<=0&&(this.l10nUpdate(e),this.hasTemplate&&this.updateTemplate())}updateOverflowWrapper(e){e?this.inputWrapper.contains(this.overFlowWrapper)&&e&&(this.overFlowWrapper.innerHTML=""):this.inputWrapper.contains(this.overFlowWrapper)||(this.overFlowWrapper=this.createElement("span",{className:B2+" "+nn}),this.inputWrapper.insertBefore(this.overFlowWrapper,this.hiddenElement))}updateMultiSelection(e){this.wrapText||this.updateOverflowWrapper(!1),this.treeObj.allowMultiSelection=e,this.treeObj.dataBind(),this.updateOption(),this.allowMultiSelection&&this.updateMode(),this.setMultiSelect()}updateAllowFiltering(e){this.isFirstRender||(e?this.renderFilter():this.destroyFilter()),this.ensureAutoCheck()}updateFilterPlaceHolder(){this.filterObj&&(this.filterObj.placeholder=this.filterBarPlaceholder,this.filterObj.element.setAttribute("aria-label",this.filterBarPlaceholder))}updateValue(e){this.isDynamicChange=!0,m(e)||0===e.length?this.resetValue(!0):(this.setTreeValue(),(this.allowMultiSelection||this.showCheckBox)&&!this.wrapText&&(this.updateOverflowWrapper(!1),this.updateView())),this.updateHiddenValue(),this.isDynamicChange=!1}updateText(e){m(e)?this.resetValue():(this.setTreeText(),(this.allowMultiSelection||this.showCheckBox)&&!this.wrapText&&(this.updateOverflowWrapper(!1),this.updateView())),this.updateHiddenValue()}updateModelMode(){if(this.allowMultiSelection||this.showCheckBox){if(!this.wrapText){const t=X("."+B2,this.inputWrapper);t&&(t.innerHTML="")}this.updateMode(),this.setMultiSelect(),!this.wrapText&&this.value&&0!==this.value.length&&(this.updateOverFlowView(),j([this.inputEle],Ga),"Box"===this.mode?Y([this.overFlowWrapper,this.inputWrapper],kw):j([this.overFlowWrapper,this.inputWrapper],kw))}}updateOption(){this.hiddenElement.hasAttribute("multiple")||!this.allowMultiSelection&&!this.showCheckBox?this.hiddenElement.hasAttribute("multiple")&&!this.allowMultiSelection&&!this.showCheckBox&&this.hiddenElement.removeAttribute("multiple"):this.hiddenElement.setAttribute("multiple","")}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"width":this.setElementWidth(e.width),this.popupObj&&(this.popupObj.element.style.width=this.setWidth());break;case"placeholder":ft.setPlaceholder(e.placeholder,this.inputEle);break;case"cssClass":this.setCssClass(e.cssClass,t.cssClass);break;case"enableRtl":this.setEnableRTL(this.enableRtl);break;case"fields":this.setFields();break;case"readonly":ft.setReadonly(e.readonly,this.inputEle);break;case"enabled":this.setEnable();break;case"floatLabelType":ft.removeFloating(this.inputObj),ft.addFloating(this.inputEle,e.floatLabelType,this.placeholder,this.createElement),this.ensureClearIconPosition(e.floatLabelType);break;case"showClearButton":this.updateClearButton(e.showClearButton);break;case"allowFiltering":this.updateAllowFiltering(e.allowFiltering);break;case"filterBarPlaceholder":this.updateFilterPlaceHolder();break;case"value":this.oldValue=t.value,this.updateValue(e.value);break;case"text":this.updateText(e.text);break;case"allowMultiSelection":this.updateMultiSelection(e.allowMultiSelection);break;case"mode":if(!this.showCheckBox&&!this.allowMultiSelection)return;"Custom"===this.mode?(this.overFlowWrapper&&ye(this.overFlowWrapper),this.chipWrapper&&ye(this.chipWrapper),this.setTagValues()):("Custom"===t.mode&&this.updateOverflowWrapper(this.wrapText),this.updateModelMode());break;case"delimiterChar":if("Box"===this.mode)return;(this.showCheckBox||this.allowMultiSelection)&&this.setMultiSelect();break;case"selectAllText":this.showCheckBox&&this.showSelectAll&&this.setLocale();break;case"unSelectAllText":this.showCheckBox&&this.showSelectAll&&this.setLocale(!1);break;case"showSelectAll":this.showCheckBox&&(this.setSelectAllWrapper(e.showSelectAll),this.updatePopupHeight());break;case"showCheckBox":this.updateCheckBoxState(e.showCheckBox),this.wrapText||this.updateOverflowWrapper(!0),this.updatePopupHeight(),this.updateOption();break;case"treeSettings":this.updateTreeSettings(e);break;case"customTemplate":if("Custom"!==this.mode)return;this.chipCollection.innerHTML="",this.setTagValues();break;case"sortOrder":this.hasTemplate&&this.updateTemplate(),this.treeObj.sortOrder=e.sortOrder,this.treeObj.dataBind(),this.updateValue(this.value);break;case"showDropDownIcon":this.updateDropDownIconState(e.showDropDownIcon);break;case"popupWidth":this.popupObj&&(this.popupObj.element.style.width=this.setWidth());break;case"popupHeight":this.popupObj&&this.updatePopupHeight();break;case"zIndex":this.popupObj&&(this.popupObj.zIndex=e.zIndex,this.popupObj.dataBind());break;case"headerTemplate":case"footerTemplate":this.updateTemplate();break;case"itemTemplate":this.updateTemplate(),this.treeObj.nodeTemplate=e.itemTemplate,this.treeObj.dataBind();break;case"noRecordsTemplate":this.updateRecordTemplate();break;case"actionFailureTemplate":this.updateRecordTemplate(!0);break;case"htmlAttributes":this.setHTMLAttributes();break;case"wrapText":this.updateOverflowWrapper(this.wrapText),!this.allowMultiSelection&&!this.showCheckBox||this.wrapText?(j([this.overFlowWrapper],nn),this.chipWrapper&&"Box"===this.mode?Y([this.chipWrapper],nn):(Y([this.inputWrapper],Vh),Y([this.inputEle],Ga)),this.ensurePlaceHolder()):this.updateView()}}clear(){this.clearAll(),this.inputFocus?this.onFocusOut():(this.changeOnBlur&&this.triggerChangeEvent(),this.removeValue=!1)}destroy(){this.clearTemplate(),this.unWireEvents(),this.setCssClass(null,this.cssClass),this.setProperties({value:[]},!0),this.setProperties({text:null},!0),this.treeObj.destroy(),this.destroyFilter(),this.popupObj&&(this.popupObj.destroy(),ye(this.popupObj.element)),this.element.tagName!==this.getDirective()&&this.inputWrapper.parentElement.insertBefore(this.element,this.inputWrapper),ft.setValue(null,this.inputEle,this.floatLabelType),ye(this.inputWrapper),ye(this.popupDiv),this.element.classList.remove("e-input"),(this.showCheckBox||this.allowMultiSelection)&&this.element.classList.remove(Ga),super.destroy()}destroyFilter(){this.filterObj&&(this.filterObj.destroy(),ye(this.filterObj.element),ye(this.filterContainer),this.filterObj=null)}ensureVisible(e){this.treeObj.ensureVisible(e)}getData(e){return this.treeObj.getTreeData(e)}hidePopup(){const e={popup:this.popupObj};this.inputWrapper.classList.remove(f6),this.popupEle&&j([this.popupEle],_O),bt(this.inputWrapper,{"aria-expanded":"false"}),this.popupObj&&this.isPopupOpen&&(this.popupObj.hide(),this.inputFocus&&(this.inputWrapper.focus(),this.allowFiltering&&j([this.inputWrapper],[Aw])),this.trigger("close",e))}selectAll(e){this.selectAllItems(e)}showPopup(){!this.enabled||this.readonly||this.isPopupOpen||(this.renderPopup(),this.focusIn())}getModuleName(){return"dropdowntree"}};ii([A("The Request Failed")],Ui.prototype,"actionFailureTemplate",void 0),ii([A(!1)],Ui.prototype,"allowFiltering",void 0),ii([A(!1)],Ui.prototype,"allowMultiSelection",void 0),ii([A(!0)],Ui.prototype,"changeOnBlur",void 0),ii([A("")],Ui.prototype,"cssClass",void 0),ii([A("${value.length} item(s) selected")],Ui.prototype,"customTemplate",void 0),ii([A(",")],Ui.prototype,"delimiterChar",void 0),ii([A(!0)],Ui.prototype,"enabled",void 0),ii([Ps({},Sc)],Ui.prototype,"fields",void 0),ii([A(null)],Ui.prototype,"filterBarPlaceholder",void 0),ii([A("StartsWith")],Ui.prototype,"filterType",void 0),ii([A("Never")],Ui.prototype,"floatLabelType",void 0),ii([A(null)],Ui.prototype,"footerTemplate",void 0),ii([A(!1)],Ui.prototype,"ignoreAccent",void 0),ii([A(!0)],Ui.prototype,"ignoreCase",void 0),ii([A(null)],Ui.prototype,"headerTemplate",void 0),ii([A({})],Ui.prototype,"htmlAttributes",void 0),ii([A(null)],Ui.prototype,"itemTemplate",void 0),ii([A("Default")],Ui.prototype,"mode",void 0),ii([A("No Records Found")],Ui.prototype,"noRecordsTemplate",void 0),ii([A(null)],Ui.prototype,"placeholder",void 0),ii([A("300px")],Ui.prototype,"popupHeight",void 0),ii([A("100%")],Ui.prototype,"popupWidth",void 0),ii([A(!1)],Ui.prototype,"readonly",void 0),ii([A(!1)],Ui.prototype,"showSelectAll",void 0),ii([A("Select All")],Ui.prototype,"selectAllText",void 0),ii([A(!1)],Ui.prototype,"showCheckBox",void 0),ii([A(!0)],Ui.prototype,"showClearButton",void 0),ii([A(!0)],Ui.prototype,"showDropDownIcon",void 0),ii([A("None")],Ui.prototype,"sortOrder",void 0),ii([A(null)],Ui.prototype,"text",void 0),ii([Ps({},TO)],Ui.prototype,"treeSettings",void 0),ii([A("Unselect All")],Ui.prototype,"unSelectAllText",void 0),ii([A(null)],Ui.prototype,"value",void 0),ii([A("100%")],Ui.prototype,"width",void 0),ii([A(1e3)],Ui.prototype,"zIndex",void 0),ii([A(!1)],Ui.prototype,"wrapText",void 0),ii([Z()],Ui.prototype,"actionFailure",void 0),ii([Z()],Ui.prototype,"beforeOpen",void 0),ii([Z()],Ui.prototype,"change",void 0),ii([Z()],Ui.prototype,"close",void 0),ii([Z()],Ui.prototype,"blur",void 0),ii([Z()],Ui.prototype,"created",void 0),ii([Z()],Ui.prototype,"dataBound",void 0),ii([Z()],Ui.prototype,"destroyed",void 0),ii([Z()],Ui.prototype,"filtering",void 0),ii([Z()],Ui.prototype,"focus",void 0),ii([Z()],Ui.prototype,"keyPress",void 0),ii([Z()],Ui.prototype,"open",void 0),ii([Z()],Ui.prototype,"select",void 0),Ui=ii([ts],Ui);var Gr=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const _6="e-atc-spinner-icon";Xt.root="e-combobox";const sJ={container:null,buttons:[]};let ir=class extends Bn{constructor(e,t){super(e,t)}preRender(){super.preRender()}getLocaleName(){return"combo-box"}wireEvent(){"combobox"===this.getModuleName()&&(O.add(this.inputWrapper.buttons[0],"mousedown",this.preventBlur,this),O.add(this.inputWrapper.container,"blur",this.onBlurHandler,this)),m(this.inputWrapper.buttons[0])||O.add(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick,this),O.add(this.inputElement,"focus",this.targetFocus,this),this.readonly||(O.add(this.inputElement,"input",this.onInput,this),O.add(this.inputElement,"keyup",this.onFilterUp,this),O.add(this.inputElement,"keydown",this.onFilterDown,this),O.add(this.inputElement,"paste",this.pasteHandler,this)),this.bindCommonEvent()}preventBlur(e){(!this.allowFiltering&&document.activeElement!==this.inputElement&&!document.activeElement.classList.contains(Xt.input)&&Q.isDevice||!Q.isDevice)&&e.preventDefault()}onBlurHandler(e){const t=this.inputElement&&""===this.inputElement.value?null:this.inputElement&&this.inputElement.value;!m(this.listData)&&!m(t)&&t!==this.text&&this.customValue(e),super.onBlurHandler(e)}targetElement(){return this.inputElement}setOldText(e){ft.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue(),this.removeSelection()}setOldValue(e){this.valueMuteChange(this.allowCustom?this.value:null),this.removeSelection(),this.setHiddenValue()}valueMuteChange(e){const t=m(e)?null:e.toString();ft.setValue(t,this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({value:e,text:e,index:null},!0),this.activeIndex=this.index;const i=this.fields,s={};s[i.text]=m(e)?null:e.toString(),s[i.value]=m(e)?null:e.toString(),this.itemData=s,this.item=null,this.previousValue!==this.value&&this.detachChangeEvent(null)}updateValues(){if(m(this.value))if(this.text&&m(this.value)){const e=this.getElementByText(this.text);e?this.setSelection(e,null):(ft.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue())}else this.setSelection(this.liCollections[this.activeIndex],null);else{const e=this.getElementByValue(this.value);e?this.setSelection(e,null):this.valueMuteChange(this.allowCustom?this.value:null)}this.setHiddenValue(),ft.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)}updateIconState(){this.showClearButton&&(this.inputElement&&""!==this.inputElement.value&&!this.readonly?Y([this.inputWrapper.clearButton],Xt.clearIconHide):j([this.inputWrapper.clearButton],Xt.clearIconHide))}getAriaAttributes(){return{"aria-owns":this.element.id+"_options",role:"combobox","aria-autocomplete":"both","aria-labelledby":this.hiddenElement.id,"aria-hasPopup":"true","aria-expanded":"false","aria-readonly":this.readonly.toString(),autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}}searchLists(e){this.isTyped=!0,this.isFiltering()?(super.searchLists(e),this.ulElement&&""===this.filterInput.value.trim()&&this.setHoverList(this.ulElement.querySelector("."+Xt.li))):(this.ulElement&&""===this.inputElement.value&&this.preventAutoFill&&this.setHoverList(this.ulElement.querySelector("."+Xt.li)),this.incrementalSearch(e))}getNgDirective(){return"EJS-COMBOBOX"}setSearchBox(){return this.filterInput=this.inputElement,this.isFiltering()?this.inputWrapper:sJ}onActionComplete(e,t,i,s){super.onActionComplete(e,t,i),this.isSelectCustom&&this.removeSelection(),!this.preventAutoFill&&"combobox"===this.getModuleName()&&this.isTyped&&setTimeout(()=>{this.inlineSearch()})}getFocusElement(){const e=this.isSelectCustom?{text:""}:this.getItemData(),t=this.list.querySelector("."+Xt.selected);if(e.text===this.inputElement.value&&!m(t))return t;if((Q.isDevice&&!this.isDropDownClick||!Q.isDevice)&&!m(this.liCollections)&&this.liCollections.length>0){const o=mC(this.inputElement.value,this.liCollections,this.filterType,!0).item;if(m(o))this.isSelectCustom&&""!==this.inputElement.value.trim()&&(this.removeFocus(),this.list.scrollTop=0);else{const a=this.getIndexByValue(o.getAttribute("data-value"))-1,u=parseInt(getComputedStyle(this.liCollections[0],null).getPropertyValue("height"),10);isNaN(u)||"autocomplete"===this.getModuleName()||(this.removeFocus(),this.list.scrollTop=a*u+(this.fields.groupBy?this.liCollections[0].offsetHeight:0),j([o],Xt.focus))}return o}return null}setValue(e){return e&&"keydown"===e.type&&"enter"===e.action&&this.removeFillSelection(),this.autofill&&"combobox"===this.getModuleName()&&e&&"keydown"===e.type&&"enter"!==e.action?(this.preventAutoFill=!1,this.inlineSearch(e),!1):super.setValue(e)}checkCustomValue(){this.itemData=this.getDataByValue(this.value);const e=this.getItemData();this.allowCustom&&m(e.value)&&m(e.text)||this.setProperties({value:e.value,text:e.text},!this.allowCustom)}showSpinner(){m(this.spinnerElement)&&(this.spinnerElement="autocomplete"===this.getModuleName()?this.inputWrapper.buttons[0]||this.inputWrapper.clearButton||ft.appendSpan("e-input-group-icon "+_6,this.inputWrapper.container,this.createElement):this.inputWrapper.buttons[0]||this.inputWrapper.clearButton,j([this.spinnerElement],Xt.disableIcon),Zc({target:this.spinnerElement,width:Q.isDevice?"16px":"14px"},this.createElement),Bl(this.spinnerElement))}hideSpinner(){m(this.spinnerElement)||(hl(this.spinnerElement),Y([this.spinnerElement],Xt.disableIcon),this.spinnerElement.classList.contains(_6)?ye(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)}setAutoFill(e,t){if(t||this.setHoverList(e),this.autofill&&!this.preventAutoFill){const i=this.getTextByValue(e.getAttribute("data-value")).toString(),s=this.getFormattedValue(e.getAttribute("data-value"));"combobox"===this.getModuleName()&&(this.isSelected||this.previousValue===s?this.updateSelectedItem(e,null,!0):(this.updateSelectedItem(e,null),this.isSelected=!0,this.previousValue=this.getFormattedValue(e.getAttribute("data-value")))),this.isAndroidAutoFill(i)||this.setAutoFillSelection(i)}}isAndroidAutoFill(e){if(Q.isAndroid){const t=this.getSelectionPoints(),i=this.prevSelectPoints.end,s=t.end,r=this.prevSelectPoints.start,o=t.start;return 0!==i&&(i===e.length&&r===e.length||r>o&&i>s||i===s&&r===o)}return!1}clearAll(e,t){(m(t)||!m(t)&&m(t.dataSource))&&super.clearAll(e),this.isFiltering()&&!m(e)&&e.target===this.inputWrapper.clearButton&&this.searchLists(e)}isSelectFocusItem(e){return!m(e)}inlineSearch(e){const t=e&&("down"===e.action||"up"===e.action||"home"===e.action||"end"===e.action||"pageUp"===e.action||"pageDown"===e.action),i=t?this.liCollections[this.activeIndex]:this.getFocusElement();if(m(i))if(""===this.inputElement.value){this.activeIndex=null,this.list.scrollTop=0;const s=this.list.querySelector("."+Xt.li);this.setHoverList(s)}else this.activeIndex=null,this.removeSelection(),this.liCollections&&this.liCollections.length>0&&!this.isCustomFilter&&this.removeFocus();else{if(!t){const s=this.getFormattedValue(i.getAttribute("data-value"));this.activeIndex=this.getIndexByValue(s),this.activeIndex=m(this.activeIndex)?null:this.activeIndex}this.preventAutoFill=""!==this.inputElement.value&&this.preventAutoFill,this.setAutoFill(i,t)}}incrementalSearch(e){this.showPopup(),m(this.listData)||(this.inlineSearch(e),e.preventDefault())}setAutoFillSelection(e){const t=this.getSelectionPoints(),i=this.inputElement.value.substr(0,t.start);if(i&&i.toLowerCase()===e.substr(0,t.start).toLowerCase()){const s=i+e.substr(i.length,e.length);ft.setValue(s,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(t.start,this.inputElement.value.length)}else ft.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(0,this.inputElement.value.length)}getValueByText(e){return super.getValueByText(e,!0,this.ignoreAccent)}unWireEvent(){"combobox"===this.getModuleName()&&(O.remove(this.inputWrapper.buttons[0],"mousedown",this.preventBlur),O.remove(this.inputWrapper.container,"blur",this.onBlurHandler)),m(this.inputWrapper.buttons[0])||O.remove(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick),this.inputElement&&(O.remove(this.inputElement,"focus",this.targetFocus),this.readonly||(O.remove(this.inputElement,"input",this.onInput),O.remove(this.inputElement,"keyup",this.onFilterUp),O.remove(this.inputElement,"keydown",this.onFilterDown),O.remove(this.inputElement,"paste",this.pasteHandler))),this.unBindCommonEvent()}setSelection(e,t){super.setSelection(e,t),!m(e)&&!this.autofill&&!this.isDropDownClick&&this.removeFocus()}selectCurrentItem(e){let t;this.isPopupOpen&&(t=this.list.querySelector(this.isSelected?"."+Xt.selected:"."+Xt.focus),t&&(this.setSelection(t,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e))),"enter"===e.action&&""===this.inputElement.value.trim()?this.clearAll(e):this.isTyped&&!this.isSelected&&m(t)&&this.customValue(e),this.hidePopup()}setHoverList(e){this.removeSelection(),this.isValidLI(e)&&!e.classList.contains(Xt.selected)&&(this.removeFocus(),e.classList.add(Xt.focus))}targetFocus(e){Q.isDevice&&!this.allowFiltering&&(this.preventFocus=!1),this.onFocus(e)}dropDownClick(e){e.preventDefault(),Q.isDevice&&!this.isFiltering()&&(this.preventFocus=!0),super.dropDownClick(e)}customValue(e){const t=this.getValueByText(this.inputElement.value);if(this.allowCustom||""===this.inputElement.value)if(""!==this.inputElement.value.trim()){const i=this.value;if(m(t)){const s=""===this.inputElement.value?null:this.inputElement.value,r={text:s,item:{}};this.initial?this.updateCustomValueCallback(s,r,i):this.trigger("customValueSpecifier",r,o=>{this.updateCustomValueCallback(s,o,i,e)})}else this.isSelectCustom=!1,this.setProperties({value:t}),i!==this.value&&this.onChangeEvent(e)}else this.allowCustom&&(this.isSelectCustom=!0);else{const i=this.previousValue,s=this.value;this.setProperties({value:t}),m(this.value)&&ft.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),this.autofill&&i===this.value&&s!==this.value&&this.onChangeEvent(null)}}updateCustomValueCallback(e,t,i,s){const r=this.fields,o=t.item;let a={};o&&J(r.text,o)&&J(r.value,o)?a=o:(pi(r.text,e,a),pi(r.value,e,a)),this.itemData=a;const u={text:J(r.text,this.itemData),value:J(r.value,this.itemData),index:null};this.setProperties(u,!0),this.setSelection(null,null),this.isSelectCustom=!0,i!==this.value&&this.onChangeEvent(s)}onPropertyChanged(e,t){"combobox"===this.getModuleName()&&(this.checkData(e),this.setUpdateInitial(["fields","query","dataSource"],e));for(const i of Object.keys(e))switch(i){case"readonly":ft.setReadonly(this.readonly,this.inputElement),this.readonly?(O.remove(this.inputElement,"input",this.onInput),O.remove(this.inputElement,"keyup",this.onFilterUp),O.remove(this.inputElement,"keydown",this.onFilterDown)):(O.add(this.inputElement,"input",this.onInput,this),O.add(this.inputElement,"keyup",this.onFilterUp,this),O.add(this.inputElement,"keydown",this.onFilterDown,this)),this.setReadOnly();break;case"allowFiltering":this.setSearchBox(),this.isFiltering()&&"combobox"===this.getModuleName()&&m(this.list)&&super.renderList();break;case"allowCustom":break;default:{const s=this.getPropObject(i,e,t);super.onPropertyChanged(s.newProperty,s.oldProperty),this.isFiltering()&&"dataSource"===i&&m(this.list)&&this.itemTemplate&&"combobox"===this.getModuleName()&&super.renderList();break}}}render(){super.render(),this.setSearchBox(),this.isFiltering()&&"combobox"===this.getModuleName()&&m(this.list)&&super.renderList(),this.renderComplete()}getModuleName(){return"combobox"}addItem(e,t){super.addItem(e,t)}filter(e,t,i){super.filter(e,t,i)}showPopup(){super.showPopup()}hidePopup(e){const t=this.inputElement&&""===this.inputElement.value?null:this.inputElement&&this.inputElement.value;if(!m(this.listData)){const i=this.isEscapeKey;this.isEscapeKey&&(ft.setValue(this.typedString,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1),this.autofill&&this.removeFillSelection();const s=this.isSelectCustom?{text:""}:this.getItemData(),r=this.list.querySelector("."+Xt.selected);if(this.inputElement&&s.text===this.inputElement.value&&!m(r))return this.isSelected&&(this.onChangeEvent(e),this.isSelectCustom=!1),void super.hidePopup(e);if("combobox"===this.getModuleName()&&""!==this.inputElement.value.trim()){const o=mC(this.inputElement.value,this.liCollections,"Equal",!0);this.selectedLI=o.item,m(o.index)&&(o.index=mC(this.inputElement.value,this.liCollections,"StartsWith",!0).index),this.activeIndex=o.index,m(this.selectedLI)?i&&(this.isSelectCustom=!0,this.removeSelection()):this.updateSelectedItem(this.selectedLI,null,!0)}!this.isEscapeKey&&this.isTyped&&!this.isInteracted&&this.customValue(e)}m(this.listData)&&this.allowCustom&&!m(t)&&t!==this.value&&this.customValue(),super.hidePopup(e)}focusIn(){!this.enabled||(Q.isDevice&&!this.isFiltering()&&(this.preventFocus=!0),super.focusIn())}clear(){this.value=null}focusOut(e){super.focusOut(e)}getItems(){return super.getItems()}getDataByValue(e){return super.getDataByValue(e)}renderHightSearch(){}};Gr([A(!1)],ir.prototype,"autofill",void 0),Gr([A(!0)],ir.prototype,"allowCustom",void 0),Gr([A({})],ir.prototype,"htmlAttributes",void 0),Gr([A(!1)],ir.prototype,"allowFiltering",void 0),Gr([A(null)],ir.prototype,"query",void 0),Gr([A(null)],ir.prototype,"index",void 0),Gr([A(!0)],ir.prototype,"showClearButton",void 0),Gr([A(!1)],ir.prototype,"enableRtl",void 0),Gr([Z()],ir.prototype,"customValueSpecifier",void 0),Gr([Z()],ir.prototype,"filtering",void 0),Gr([A(null)],ir.prototype,"valueTemplate",void 0),Gr([A("Never")],ir.prototype,"floatLabelType",void 0),Gr([A(null)],ir.prototype,"filterBarPlaceholder",void 0),Gr([A(null)],ir.prototype,"cssClass",void 0),Gr([A(null)],ir.prototype,"headerTemplate",void 0),Gr([A(null)],ir.prototype,"footerTemplate",void 0),Gr([A(null)],ir.prototype,"placeholder",void 0),Gr([A("100%")],ir.prototype,"width",void 0),Gr([A("300px")],ir.prototype,"popupHeight",void 0),Gr([A("100%")],ir.prototype,"popupWidth",void 0),Gr([A(!1)],ir.prototype,"readonly",void 0),Gr([A(null)],ir.prototype,"text",void 0),Gr([A(null)],ir.prototype,"value",void 0),ir=Gr([ts],ir);var wl=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};Xt.root="e-autocomplete",Xt.icon="e-input-group-icon e-ddl-icon e-search-icon";let va=class extends ir{constructor(e,t){super(e,t),this.isFiltered=!1,this.searchList=!1}preRender(){super.preRender()}getLocaleName(){return"auto-complete"}getNgDirective(){return"EJS-AUTOCOMPLETE"}getQuery(e){const t=e?e.clone():this.query?this.query.clone():new Fi,i=""!==this.queryString||m(this.value)?this.filterType:"equal",s=""!==this.queryString||m(this.value)?this.queryString:this.value;if(this.isFiltered)return t;if(null!==this.queryString&&""!==this.queryString){const r=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof Nt||"string"!==r)&&"number"!==r){const o=m(this.fields.value)?"":this.fields.value;t.where(o,i,s,this.ignoreCase,this.ignoreAccent)}else t.where("",i,s,this.ignoreCase,this.ignoreAccent)}if(!m(this.suggestionCount)){if(20!==this.suggestionCount)for(let r=0;r<t.queries.length;r++)"onTake"===t.queries[r].fn&&t.queries.splice(r,1);t.take(this.suggestionCount)}return t}searchLists(e){if(this.isTyped=!0,this.isDataFetched=this.isSelectCustom=!1,m(this.list)&&super.renderList(!0),this.queryString=this.filterInput.value,"mousedown"!==e.type&&(40===e.keyCode||38===e.keyCode))return this.queryString=""===this.queryString?null:this.queryString,this.beforePopupOpen=!0,void this.resetList(this.dataSource,this.fields);this.isSelected=!1,this.activeIndex=null;const t={preventDefaultAction:!1,text:this.filterInput.value,updateData:(i,s,r)=>{t.cancel||(this.isFiltered=!0,this.filterAction(i,s,r))},cancel:!1};this.trigger("filtering",t,i=>{!i.cancel&&!this.isFiltered&&!i.preventDefaultAction&&(this.searchList=!0,this.filterAction(this.dataSource,null,this.fields))})}filter(e,t,i){this.isFiltered=!0,this.filterAction(e,t,i)}filterAction(e,t,i){this.beforePopupOpen=!0,""!==this.queryString&&this.queryString.length>=this.minLength?this.resetList(e,i,t):(this.hidePopup(),this.beforePopupOpen=!1),this.renderReactTemplates()}clearAll(e,t){(m(t)||!m(t)&&m(t.dataSource))&&super.clearAll(e),this.beforePopupOpen&&this.hidePopup()}onActionComplete(e,t,i,s){this.fixedHeaderElement=null,super.onActionComplete(e,t,i);const r=this.list.querySelector("."+Xt.li);m(r)||Y([r],Xt.focus),this.postBackAction()}postBackAction(){if(this.autofill&&!m(this.liCollections[0])&&this.searchList){const t=mC(this.inputElement.value,[this.liCollections[0]],"StartsWith",this.ignoreCase);this.searchList=!1,m(t.item)||super.setAutoFill(this.liCollections[0],!0)}}setSelection(e,t){if(this.isValidLI(e))if(!m(t)&&"keydown"===t.type&&"enter"!==t.action&&"tab"!==t.action&&this.isValidLI(e)){const i=this.getFormattedValue(e.getAttribute("data-value"));this.activeIndex=this.getIndexByValue(i),this.setHoverList(e),this.selectedLI=e,this.setScrollPosition(t),this.autofill&&this.isPopupOpen&&(this.preventAutoFill=!1,super.setAutoFill(e)),bt(this.inputElement,{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})}else super.setSelection(e,t)}listOption(e,t){const i=super.listOption(e,t);if(m(i.itemCreated))i.itemCreated=s=>{this.highlight&&(this.element.tagName===this.getNgDirective()&&this.itemTemplate?setTimeout(()=>{SO(s.item,this.queryString,this.ignoreCase,this.filterType)},0):SO(s.item,this.queryString,this.ignoreCase,this.filterType))};else{const s=i.itemCreated;i.itemCreated=r=>{this.highlight&&SO(r.item,this.queryString,this.ignoreCase,this.filterType),s.apply(this,[r])}}return i}isFiltering(){return!0}renderPopup(){this.list.scrollTop=0,super.renderPopup()}isEditTextBox(){return""!==this.inputElement.value.trim()}isPopupButton(){return this.showPopupButton}isSelectFocusItem(e){return!1}showPopup(){if(this.enabled){if(this.beforePopupOpen)return void this.refreshPopup();this.beforePopupOpen=!0,this.preventAutoFill=!0,m(this.list)?this.renderList():this.resetList(this.dataSource,this.fields)}}hidePopup(){super.hidePopup(),this.activeIndex=-1}onPropertyChanged(e,t){"autocomplete"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],e);for(const i of Object.keys(e))switch(i){case"showPopupButton":if(this.showPopupButton){const s=ft.appendSpan(Xt.icon,this.inputWrapper.container,this.createElement);this.inputWrapper.buttons[0]=s,this.inputWrapper&&this.inputWrapper.buttons&&this.inputWrapper.buttons[0]&&O.add(this.inputWrapper.buttons[0],"click",this.dropDownClick,this)}else ye(this.inputWrapper.buttons[0]),this.inputWrapper.buttons[0]=null;break;default:{const s=this.getPropObject(i,e,t);super.onPropertyChanged(s.newProperty,s.oldProperty);break}}}renderHightSearch(){if(this.highlight)for(let e=0;e<this.liCollections.length;e++)this.ulElement.querySelector(".e-active")||(MQ(this.liCollections[e]),SO(this.liCollections[e],this.queryString,this.ignoreCase,this.filterType))}getModuleName(){return"autocomplete"}render(){super.render()}};wl([Ps({value:null,iconCss:null,groupBy:null},k2)],va.prototype,"fields",void 0),wl([A(!0)],va.prototype,"ignoreCase",void 0),wl([A(!1)],va.prototype,"showPopupButton",void 0),wl([A(!1)],va.prototype,"highlight",void 0),wl([A(20)],va.prototype,"suggestionCount",void 0),wl([A({})],va.prototype,"htmlAttributes",void 0),wl([A(null)],va.prototype,"query",void 0),wl([A(1)],va.prototype,"minLength",void 0),wl([A("Contains")],va.prototype,"filterType",void 0),wl([Z()],va.prototype,"filtering",void 0),wl([A(null)],va.prototype,"index",void 0),wl([A("Never")],va.prototype,"floatLabelType",void 0),wl([A(null)],va.prototype,"valueTemplate",void 0),wl([A(null)],va.prototype,"filterBarPlaceholder",void 0),wl([A(!1)],va.prototype,"allowFiltering",void 0),wl([A(null)],va.prototype,"text",void 0),va=wl([ts],va);const V2="e-float-line",Qx="e-float-text",Mw="e-label-top",yC="e-label-bottom";function I6(n,e,t,i,s,r,o){const a=Ds("span",{className:V2}),u=Ds("label",{className:Qx});!m(t.id)&&""!==t.id&&(u.id="label_"+t.id.replace(/ /g,"_"),bt(t,{"aria-labelledby":u.id})),!m(i.placeholder)&&""!==i.placeholder&&(u.innerText=H2(i.placeholder),i.removeAttribute("placeholder")),u.innerText=H2(o),e.appendChild(a),e.appendChild(u),n.classList.add("e-float-input"),function nJ(n,e){n&&n.length>0?(j([e],Mw),Y([e],yC)):(Y([e],Mw),j([e],yC))}(s,u),"Always"===r&&(u.classList.contains(yC)&&Y([u],yC),j([u],Mw))}function x6(n,e,t){e.placeholder=n&&n.length?"":t}function H2(n){let e="";if(!m(n)&&""!==n){const t=document.createElement("span");t.innerHTML='<input  placeholder="'+n+'"/>',e=t.children[0].placeholder}return e}var gi=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const vC="e-input-focus",T6="e-disabled",sr="e-hide-listitem",Pw="e-chips",AO="e-chips-close",Lw="e-chip-selected",A6="e-delimiter",DO="e-zero-size",D6="e-chips-close e-close-hooker",k6="e-delim-values",j2="e-close-icon-hide",M6="e-ddl-disable-icon",P6="e-ms-spinner-icon",L6="e-input-group-icon e-ddl-icon",R6="e-icon-anim",kO="e-delim-total",N6="e-search-custom-width",OO="e-input-filter";let ci=class extends O2{constructor(e,t){super(e,t),this.clearIconWidth=0,this.isValidKey=!1,this.selectAllEventData=[],this.selectAllEventEle=[],this.scrollFocusStatus=!1,this.keyDownStatus=!1}enableRTL(e){e?this.overAllWrapper.classList.add("e-rtl"):this.overAllWrapper.classList.remove("e-rtl"),this.popupObj&&(this.popupObj.enableRtl=e,this.popupObj.dataBind())}requiredModules(){const e=[];if("CheckBox"===this.mode){if(this.isGroupChecking=this.enableGroupCheckBox,this.enableGroupCheckBox){const t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.enableSelectionOrder=!1,this.isProtectedOnChange=t}this.allowCustomValue=!1,this.hideSelectedItem=!1,this.closePopupOnSelect=!1,e.push({member:"CheckBoxSelection",args:[this]})}return e}updateHTMLAttribute(){if(Object.keys(this.htmlAttributes).length)for(const e of Object.keys(this.htmlAttributes))switch(e){case"class":{const t=this.htmlAttributes[e].replace(/\s+/g," ").trim();""!==t&&(j([this.overAllWrapper],t.split(" ")),j([this.popupWrapper],t.split(" ")));break}case"disabled":this.enable(!1);break;case"placeholder":this.placeholder||(this.inputElement.setAttribute(e,this.htmlAttributes[e]),this.setProperties({placeholder:this.inputElement.placeholder},!0),this.refreshPlaceHolder());break;default:{const i=["name","required","aria-required","form"],s=["title","role","style","class"];["id"].indexOf(e)>-1?this.element.setAttribute(e,this.htmlAttributes[e]):0===e.indexOf("data")||i.indexOf(e)>-1?this.hiddenElement.setAttribute(e,this.htmlAttributes[e]):s.indexOf(e)>-1?this.overAllWrapper.setAttribute(e,this.htmlAttributes[e]):this.inputElement.setAttribute(e,this.htmlAttributes[e]);break}}}updateReadonly(e){e||"CheckBox"===this.mode?this.inputElement.setAttribute("readonly","true"):this.inputElement.removeAttribute("readonly")}updateClearButton(e){e?(this.overAllClear.parentNode?this.overAllClear.style.display="":this.componentWrapper.appendChild(this.overAllClear),this.componentWrapper.classList.remove(j2)):(this.overAllClear.style.display="none",this.componentWrapper.classList.add(j2))}updateCssClass(){if(!m(this.cssClass)&&""!==this.cssClass){let e=this.cssClass;e=this.cssClass.replace(/\s+/g," ").trim(),""!==e&&(j([this.overAllWrapper],e.split(" ")),j([this.popupWrapper],e.split(" ")))}}updateOldPropCssClass(e){!m(e)&&""!==e&&""!==(e=e.replace(/\s+/g," ").trim())&&(Y([this.overAllWrapper],e.split(" ")),Y([this.popupWrapper],e.split(" ")))}onPopupShown(){if(Q.isDevice&&"CheckBox"===this.mode&&this.allowFiltering){const i=this;window.onpopstate=()=>{i.hidePopup(),i.inputElement.focus()},history.pushState({},"")}this.trigger("open",{popup:this.popupObj,cancel:!1,animation:{name:"FadeIn",duration:100}},i=>{i.cancel||(this.focusAtFirstListItem(),document.body.appendChild(this.popupObj.element),"CheckBox"===this.mode&&this.enableGroupCheckBox&&!m(this.fields.groupBy)&&this.updateListItems(this.list.querySelectorAll("li.e-list-item"),this.mainList.querySelectorAll("li.e-list-item")),("CheckBox"===this.mode||this.showDropDownIcon)&&j([this.overAllWrapper],[R6]),this.refreshPopup(),this.renderReactTemplates(),this.popupObj.show(i.animation,1e3===this.zIndex?this.element:null),bt(this.inputElement,{"aria-expanded":"true"}),this.isFirstClick&&this.loadTemplate())})}updateListItems(e,t){for(let i=0;i<e.length;i++)this.findGroupStart(e[i]),this.findGroupStart(t[i]);this.deselectHeader()}loadTemplate(){this.refreshListItems(null),"CheckBox"===this.mode&&this.removeFocus(),this.notify("reOrder",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,e:this})}setScrollPosition(){if((!this.hideSelectedItem&&"CheckBox"!==this.mode||"CheckBox"===this.mode&&!this.enableSelectionOrder)&&!m(this.value)&&this.value.length>0){const e=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",this.value[this.value.length-1]);m(e)||this.scrollBottom(e)}}focusAtFirstListItem(){if(this.ulElement&&this.ulElement.querySelector("li."+Ge_li)){let e;if("CheckBox"===this.mode)return void this.removeFocus();e=this.ulElement.querySelector("li."+Ge_li+":not(."+sr+")"),null!==e&&(this.removeFocus(),this.addListFocus(e))}}focusAtLastListItem(e){let t;e?t=mC(e,this.liCollections,"StartsWith",this.ignoreCase):this.value&&this.value.length?mC(this.value[this.value.length-1],this.liCollections,"StartsWith",this.ignoreCase):t=null,t&&null!==t.item&&(this.addListFocus(t.item),this.scrollBottom(t.item,t.index))}getAriaAttributes(){return{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-multiselectable":"true","aria-activedescendant":"null","aria-haspopup":"true","aria-expanded":"false"}}updateListARIA(){m(this.ulElement)||bt(this.ulElement,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"});const e=!!this.inputElement.disabled;bt(this.inputElement,this.getAriaAttributes()),e&&bt(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled(e?"true":"false")}ensureAriaDisabled(e){if(this.htmlAttributes&&this.htmlAttributes["aria-disabled"]){const t=this.htmlAttributes;ut(t,{"aria-disabled":e},t),this.setProperties({htmlAttributes:t},!0)}}removelastSelection(e){const t=this.chipCollectionWrapper.querySelectorAll("span."+Pw),i=t[t.length-1].getAttribute("data-value");m(this.value)||(this.tempValues=this.value.slice());let s=this.getFormattedValue(i);this.allowCustomValue&&("false"!==i&&!1===s||!m(s)&&"NaN"===s.toString())&&(s=i),this.removeValue(s,e),this.removeChipSelection(),this.updateDelimeter(this.delimiterChar,e),this.makeTextBoxEmpty(),this.mainList&&this.listData&&this.refreshSelection(),this.checkPlaceholderSize()}onActionFailure(e){super.onActionFailure(e),this.renderPopup(),this.onPopupShown()}targetElement(){return this.targetInputElement=this.inputElement,"CheckBox"===this.mode&&this.allowFiltering&&this.notify("targetElement",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.targetInputElement.value}getForQuery(e){let t;const i=m(this.fields.value)?this.fields.text:this.fields.value;for(let s=0;s<e.length;s++)t=0===s?new un(i,"equal",e[s]):t.or(i,"equal",e[s]);return this.getQuery(this.query).where(t)}onActionComplete(e,t,i,s){super.onActionComplete(e,t,i),this.updateSelectElementData(this.allowFiltering);const r=this;if(!m(this.value)&&!this.allowCustomValue)for(let o=0;o<this.value.length;o++)this.findListElement(this.allowFiltering&&!m(this.mainList)?this.mainList:e,"li","data-value",r.value[o])||(this.value.splice(o,1),o-=1);this.updateActionList(e,t,i),this.dataSource instanceof Nt&&"CheckBox"===this.mode&&this.allowFiltering&&this.removeFocus()}updateActionList(e,t,i,s){"CheckBox"===this.mode&&this.showSelectAll&&this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.mainList||this.mainData?(m(this.mainData)||0===this.mainData.length)&&(this.mainData=t):(this.mainList=e.cloneNode?e.cloneNode(!0):e,this.mainData=t,this.mainListCollection=this.liCollections),(this.remoteCustomValue||t.length<=0)&&this.allowCustomValue&&this.inputFocus&&this.allowFiltering&&this.inputElement.value&&""!==this.inputElement.value?this.checkForCustomValue(this.tempQuery,this.fields):(this.value&&this.value.length&&("CheckBox"!==this.mode&&""!==this.inputElement.value.trim()||"CheckBox"===this.mode||(8===this.keyCode||46===this.keyCode)&&this.allowFiltering&&this.allowCustomValue&&this.dataSource instanceof Nt&&""===this.inputElement.value)&&this.refreshSelection(),this.updateListARIA(),this.unwireListEvents(),this.wireListEvents(),m(this.setInitialValue)||this.setInitialValue(),m(this.selectAllAction)||this.selectAllAction(),this.setDynValue&&(!m(this.text)&&(m(this.value)||0===this.value.length)&&this.initialTextUpdate(),this.initialValueUpdate(),this.initialUpdate(),this.refreshPlaceHolder(),"CheckBox"!==this.mode&&this.changeOnBlur&&this.updateValueState(null,this.value,null)),this.renderPopup(),this.beforePopupOpen&&(this.beforePopupOpen=!1,this.onPopupShown()))}refreshSelection(){let e,t;const i=this.hideSelectedItem?sr:"e-active";if(!m(this.value))for(let s=0;!m(this.value[s]);s++)if(e=this.value[s],t=this.findListElement(this.list,"li","data-value",e),t){if(j([t],i),this.hideSelectedItem&&t.previousSibling&&t.previousElementSibling.classList.contains(Ge_group)&&(!t.nextElementSibling||t.nextElementSibling.classList.contains(Ge_group))&&j([t.previousElementSibling],i),this.hideSelectedItem&&this.fields.groupBy&&!t.previousElementSibling.classList.contains(sr)&&this.hideGroupItem(e),this.hideSelectedItem&&t.classList.contains(Ge_focus)){Y([t],Ge_focus);const r=t.parentElement.querySelectorAll("."+Ge_li+":not(."+sr+")");r.length>0?j([r[0]],Ge_focus):this.list&&this.list.querySelectorAll("."+Ge_li).length>0||(this.l10nUpdate(),j([this.list],"e-nodata"))}if(t.setAttribute("aria-selected","true"),"CheckBox"===this.mode&&t.classList.contains("e-active")){const r=t.firstElementChild.getAttribute("aria-checked");(m(r)||"false"===r)&&this.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:t,e:null})}}this.checkSelectAll(),this.checkMaxSelection()}hideGroupItem(e){let t,i;const s=this.hideSelectedItem?sr:"e-active";i=t=this.findListElement(this.ulElement,"li","data-value",e);let r=0,o=0,a=!0,u=!0;do{t&&t.previousElementSibling&&!t.previousElementSibling.classList.contains(sr)&&t.previousElementSibling.classList.contains(Ge_li)&&(a=!1),!a||!t||t.previousElementSibling&&t.previousElementSibling.classList.contains(Ge_group)?r=10:t=t.previousElementSibling,i&&i.nextElementSibling&&!i.nextElementSibling.classList.contains(sr)&&i.nextElementSibling.classList.contains(Ge_li)&&(u=!1),!u||!i||i.nextElementSibling&&i.nextElementSibling.classList.contains(Ge_group)?o=10:i=i.nextElementSibling}while(r<10||o<10);a&&u&&!t.previousElementSibling.classList.contains(sr)?j([t.previousElementSibling],s):a&&u&&t.previousElementSibling.classList.contains(sr)&&Y([t.previousElementSibling],s)}getValidLi(){let e=this.ulElement.querySelector("li."+Ge_li+":not(."+sr+")");return m(e)?this.liCollections[0]:e}checkSelectAll(){const e=this.list.querySelectorAll("li.e-list-group-item.e-active").length,t=this.list.querySelectorAll("li.e-list-item"),i=this.list.querySelectorAll("li."+Ge_li).length;let s=this.list.querySelectorAll("li.e-active").length;if(this.enableGroupCheckBox&&!m(this.fields.groupBy)&&(s-=e),i!==s&&s!==this.maximumSelectionLength||"CheckBox"!==this.mode||!this.showSelectAll?i!==s&&"CheckBox"===this.mode&&this.showSelectAll&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"}):this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"check"}),this.enableGroupCheckBox&&this.fields.groupBy&&!this.enableSelectionOrder){for(let r=0;r<t.length;r++)this.findGroupStart(t[r]);this.deselectHeader()}}openClick(e){this.openOnClick||"CheckBox"===this.mode?!this.openOnClick&&"CheckBox"===this.mode&&!this.isPopupOpen()&&this.showPopup():""!==this.targetElement()?this.showPopup():this.hidePopup()}keyUp(e){"CheckBox"!==this.mode||this.openOnClick||m(String.fromCharCode(e.keyCode).match(/\w/))||(this.isValidKey=!0),this.isValidKey=this.isPopupOpen()&&8===e.keyCode||this.isValidKey,this.isValidKey=(!e.ctrlKey||86!==e.keyCode)&&this.isValidKey,this.isValidKey&&(this.isValidKey=!1,this.expandTextbox(),this.showOverAllClear(),this.search(e))}filter(e,t,i){this.isFiltered=!0,this.remoteFilterAction=!0,this.dataUpdater(e,t,i)}getQuery(e){const t=e?e.clone():this.query?this.query.clone():new Fi;if(this.filterAction){if(null!==this.targetElement()){const i=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof Nt||"string"!==i)&&"number"!==i){const s=this.fields;t.where(m(s.text)?"":s.text,this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent)}else t.where("",this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent)}return t}return e||(this.query?this.query:new Fi)}dataUpdater(e,t,i){if(this.isDataFetched=!1,""===this.targetElement().trim()){const s=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.backCommand&&(this.remoteCustomValue=!1,this.allowCustomValue&&0==s.querySelectorAll("li").length&&this.mainData.length>0&&(this.mainData=[]),this.onActionComplete(s,this.mainData),this.value&&this.value.length&&this.refreshSelection(),8!==this.keyCode&&this.focusAtFirstListItem(),this.notify("reOrder",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,e:this}))}else this.resetList(e,i,t),this.allowCustomValue&&(e instanceof Nt?(this.remoteCustomValue=!0,this.tempQuery=t):this.checkForCustomValue(t,i));this.refreshPopup(),"CheckBox"===this.mode&&this.removeFocus()}checkForCustomValue(e,t){const i=!this.getValueByText(this.inputElement.value,this.ignoreCase);if(this.allowCustomValue&&i){const s=this.inputElement.value,r=t||this.fields,o=!m(this.mainData)&&this.mainData.length>0?this.mainData[0]:this.mainData;if("string"!=typeof o&&"number"!=typeof o&&"boolean"!=typeof o){const a={};pi(r.text,s,a),"number"==typeof J(this.fields.value?this.fields.value:"value",o)?pi(r.value,Math.random(),a):pi(r.value,s,a);const u=JSON.parse(JSON.stringify(this.listData));u.splice(0,0,a),this.resetList(u,r,e)}else{const a=[this.inputElement.value];a[0]="number"!=typeof o||isNaN(parseFloat(a[0]))?a[0]:parseFloat(a[0]),a[0]="boolean"==typeof o?"true"===a[0]||"false"!==a[0]&&a[0]:a[0],this.resetList(a,r)}}this.value&&this.value.length&&this.refreshSelection()}getNgDirective(){return"EJS-MULTISELECT"}wrapperClick(e){if(this.setDynValue=!1,this.enabled){if(e.target===this.overAllClear)return void e.preventDefault();if(this.inputFocus||this.inputElement.focus(),!this.readonly){if(e.target&&-1!==e.target.classList.toString().indexOf(AO))return void(this.isPopupOpen()&&this.refreshPopup());!this.isPopupOpen()&&(this.openOnClick||this.showDropDownIcon&&e.target&&e.target.className===L6)?this.showPopup():(this.hidePopup(),"CheckBox"===this.mode&&(this.showOverAllClear(),this.inputFocus=!0,this.overAllWrapper.classList.contains(vC)||this.overAllWrapper.classList.add(vC)))}this.targetElement()&&""!==this.targetElement()||e.preventDefault()}}enable(e){e?(this.overAllWrapper.classList.remove(T6),this.inputElement.removeAttribute("disabled"),bt(this.inputElement,{"aria-disabled":"false"}),this.ensureAriaDisabled("false")):(this.overAllWrapper.classList.add(T6),this.inputElement.setAttribute("disabled","true"),bt(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled("true")),this.enabled!==e&&(this.enabled=e),this.hidePopup()}onBlurHandler(e,t){let i;if(m(e)||(i=e.relatedTarget),this.popupObj&&document.body.contains(this.popupObj.element)&&this.popupObj.element.contains(i))"CheckBox"!==this.mode?this.inputElement.focus():"Auto"===this.floatLabelType&&(this.overAllWrapper.classList.contains("e-outline")||this.overAllWrapper.classList.contains("e-filled"))&&j([this.overAllWrapper],"e-valid-input");else{if("Auto"===this.floatLabelType&&this.overAllWrapper.classList.contains("e-outline")&&"CheckBox"===this.mode&&(m(this.value)||0===this.value.length)&&Y([this.overAllWrapper],"e-valid-input"),"CheckBox"===this.mode&&Q.isIE&&!m(e)&&!t)return this.inputFocus=!1,void this.overAllWrapper.classList.remove(vC);if(this.scrollFocusStatus)return m(e)||e.preventDefault(),this.inputElement.focus(),void(this.scrollFocusStatus=!1);if(this.inputFocus=!1,this.overAllWrapper.classList.remove(vC),this.addTagOnBlur){const s=this.getValueByText(this.inputElement.value,this.ignoreCase,this.ignoreAccent),r=this.findListElement(this.list,"li","data-value",s),o=this.hideSelectedItem?sr:"e-active";r&&!r.classList.contains(o)&&(this.updateListSelection(r,e),"Delimiter"===this.mode&&this.updateDelimeter(this.delimiterChar))}this.refreshListItems(null),"Box"!==this.mode&&"CheckBox"!==this.mode&&this.updateDelimView(),this.changeOnBlur&&(this.updateValueState(e,this.value,this.tempValues),this.dispatchEvent(this.hiddenElement,"change")),this.overAllClear.style.display="none",this.isPopupOpen()&&this.hidePopup(),this.makeTextBoxEmpty(),this.trigger("blur"),this.focused=!0,Q.isDevice&&"Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.removeChipFocus(),this.removeChipSelection(),this.refreshInputHight(),function aJ(n,e,t,i,s){n.classList.remove("e-input-focus");const r=e.querySelector("."+Qx);t&&t.length<=0&&"Auto"===i&&!m(r)&&(r.classList.contains(Mw)&&Y([r],Mw),j([r],yC))}(this.overAllWrapper,this.componentWrapper,this.value,this.floatLabelType),this.refreshPlaceHolder(),(this.allowFiltering||!0===this.enableSelectionOrder&&"CheckBox"===this.mode)&&!m(this.mainList)&&(this.ulElement=this.mainList),this.checkPlaceholderSize()}}checkPlaceholderSize(){if(this.showDropDownIcon){const e=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10);this.setPlaceholderSize(e)}else m(this.dropIcon)||this.setPlaceholderSize(this.showDropDownIcon?this.dropIcon.offsetWidth:0)}setPlaceholderSize(e){m(this.value)||0===this.value.length?0!==this.dropIcon.offsetWidth?this.searchWrapper.style.width="calc(100% - "+(e+10)+"px":j([this.searchWrapper],N6):m(this.value)||(this.searchWrapper.removeAttribute("style"),Y([this.searchWrapper],N6))}refreshInputHight(){this.value&&this.value.length||!m(this.text)&&""!==this.text?this.searchWrapper.classList.add(DO):this.searchWrapper.classList.remove(DO)}validateValues(e,t){return JSON.stringify(e.slice().sort())!==JSON.stringify(t.slice().sort())}updateValueState(e,t,i){if(this.initStatus&&this.validateValues(t||[],i||[])){const o={e,oldValue:i,value:t,isInteracted:!!e,element:this.element,event:e};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",o),this.updateTempValue(),this.changeOnBlur||this.dispatchEvent(this.hiddenElement,"change")}}updateTempValue(){this.tempValues=this.value?this.value.slice():this.value}getPagingCount(){const e=this.list.classList.contains("e-nodata")?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.offsetHeight/parseInt(e,10))}pageUpSelection(e){const t=this.list.querySelectorAll("li."+Ge_li+":not(."+sr+"):not(.e-reorder-hide)"),i=e>=0?t[e+1]:t[0];this.addListFocus(i),this.scrollBottom(i,this.getIndexByValue(i.getAttribute("data-value")))}pageDownSelection(e){this.getItems();const i=this.list.querySelectorAll("li."+Ge_li+":not(."+sr+"):not(.e-reorder-hide)"),s=e<=i.length?i[e-1]:i[i.length-1];this.addListFocus(s),this.scrollBottom(s,this.getIndexByValue(s.getAttribute("data-value")))}getItems(){return this.list||super.render(),this.ulElement&&this.ulElement.querySelectorAll("."+Ge_li).length>0?this.ulElement.querySelectorAll("."+Ge_li+":not(."+sr+")"):[]}focusInHandler(e){return!!this.enabled&&(this.showOverAllClear(),this.inputFocus=!0,this.value&&this.value.length&&("Delimiter"!==this.mode&&"CheckBox"!==this.mode?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),"CheckBox"!==this.mode&&(this.viewWrapper.style.display="none")),"CheckBox"!==this.mode&&this.searchWrapper.classList.remove(DO),this.checkPlaceholderSize(),this.focused&&(this.trigger("focus",{isInteracted:!!e,event:e}),this.focused=!1),this.overAllWrapper.classList.contains(vC)||this.overAllWrapper.classList.add(vC),function oJ(n,e){n.classList.add("e-input-focus");const t=e.querySelector("."+Qx);m(t)||(j([t],Mw),t.classList.contains(yC)&&Y([t],yC))}(this.overAllWrapper,this.componentWrapper),this.isPopupOpen()&&this.refreshPopup(),!0)}showDelimWrapper(){"CheckBox"===this.mode?this.viewWrapper.style.display="":this.delimiterWrapper.style.display="",this.componentWrapper.classList.add(A6)}hideDelimWrapper(){this.delimiterWrapper.style.display="none",this.componentWrapper.classList.remove(A6)}expandTextbox(){let e=5;this.placeholder&&(e=e>this.inputElement.placeholder.length?e:this.inputElement.placeholder.length),this.inputElement.size=this.inputElement.value.length>e?this.inputElement.value.length:e}isPopupOpen(){return null!==this.popupWrapper&&null!==this.popupWrapper.parentElement}refreshPopup(){this.popupObj&&this.mobFilter&&(this.popupObj.setProperties({width:this.calcPopupWidth()}),this.popupObj.refreshPosition(this.overAllWrapper),this.popupObj.resolveCollision())}checkTextLength(){return this.targetElement().length<1}popupKeyActions(e){switch(e.keyCode){case 38:this.hidePopup(),"CheckBox"===this.mode&&this.inputElement.focus(),e.preventDefault();break;case 40:this.isPopupOpen()||(this.showPopup(),e.preventDefault())}}updateAriaAttribute(){const e=this.list.querySelector("."+Ge_focus);if(!m(e))if(this.inputElement.setAttribute("aria-activedescendant",e.id),this.allowFiltering){var t=this.popupWrapper.querySelector("."+OO);t&&t.setAttribute("aria-activedescendant",e.id)}else"CheckBox"==this.mode&&this.overAllWrapper.setAttribute("aria-activedescendant",e.id)}homeNavigation(e){this.removeFocus();const t=this.ulElement.querySelectorAll("li."+Ge_li+":not(."+sr+"):not(.e-reorder-hide)");if(t.length>0){const i=t[e?0:t.length-1];i.classList.add(Ge_focus),this.scrollBottom(i)}}onKeyDown(e){if(!this.readonly&&(this.enabled||"CheckBox"===this.mode)&&(this.keyCode=e.keyCode,this.keyDownStatus=!0,!(e.keyCode>111&&e.keyCode<124))){if(e.altKey)return void this.popupKeyActions(e);if(this.isPopupOpen()){const t=this.list.querySelector("."+Ge_focus);let i;switch(e.keyCode){case 36:case 35:this.homeNavigation(36===e.keyCode);break;case 33:return e.preventDefault(),void(t&&(this.getIndexByValue(t.getAttribute("data-value")),this.pageUpSelection(i-this.getPagingCount()),this.updateAriaAttribute()));case 34:return e.preventDefault(),void(t&&(this.getIndexByValue(t.getAttribute("data-value")),this.pageDownSelection(i+this.getPagingCount()),this.updateAriaAttribute()));case 38:this.arrowUp(e);break;case 40:this.arrowDown(e);break;case 27:return e.preventDefault(),this.hidePopup(),void("CheckBox"===this.mode&&this.inputElement.focus());case 13:return e.preventDefault(),"CheckBox"!==this.mode&&this.selectByKey(e),void this.checkPlaceholderSize();case 32:return void this.spaceKeySelection(e);case 9:e.preventDefault(),this.hidePopup(),this.inputElement.focus(),this.overAllWrapper.classList.add(vC)}}else switch(e.keyCode){case 13:case 9:case 16:case 17:case 20:return;case 40:this.openOnClick&&this.showPopup();break;case 27:return e.preventDefault(),void this.escapeAction()}this.checkTextLength()&&this.keyNavigation(e),"CheckBox"===this.mode&&this.enableSelectionOrder&&this.checkBackCommand(e),this.expandTextbox(),"CheckBox"===this.mode&&this.showSelectAll||this.refreshPopup()}}arrowDown(e){e.preventDefault(),this.moveByList(1),this.keyAction=!0,(document.activeElement.classList.contains(OO)||"CheckBox"===this.mode&&!this.allowFiltering&&document.activeElement!==this.list)&&O.add(this.list,"keydown",this.onKeyDown,this),this.updateAriaAttribute()}arrowUp(e){e.preventDefault(),this.keyAction=!0;let t=this.list.querySelectorAll("li."+Ge_li+":not(."+sr+"):not(.e-reorder-hide)");this.enableGroupCheckBox&&"CheckBox"===this.mode&&!m(this.fields.groupBy)&&(t=this.list.querySelectorAll("li."+Ge_li+",li."+Ge_group+":not(."+sr+"):not(.e-reorder-hide)"));const i=this.list.querySelector("li."+Ge_focus);Array.prototype.slice.call(t).indexOf(i)<=0&&"CheckBox"===this.mode&&this.allowFiltering&&(this.keyAction=!1,this.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"focus"})),this.moveByList(-1),this.updateAriaAttribute()}spaceKeySelection(e){"CheckBox"===this.mode&&(document.activeElement.classList.contains(OO)||(e.preventDefault(),this.keyAction=!0,this.list.focus()),this.selectByKey(e)),this.checkPlaceholderSize()}checkBackCommand(e){this.backCommand=8!==e.keyCode||""!==this.targetElement()}keyNavigation(e){if("Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.value&&this.value.length)switch(e.keyCode){case 37:e.preventDefault(),this.moveBy(-1,e);break;case 39:e.preventDefault(),this.moveBy(1,e);break;case 8:this.removelastSelection(e);break;case 46:this.removeSelectedChip(e)}else if(8===e.keyCode&&"Delimiter"===this.mode&&this.value&&this.value.length){e.preventDefault();const t=this.value[this.value.length-1];this.removeValue(t,e),this.updateDelimeter(this.delimiterChar,e),this.focusAtLastListItem(t)}}selectByKey(e){this.removeChipSelection(),this.selectListByKey(e),this.hideSelectedItem&&this.focusAtFirstListItem()}escapeAction(){const e=this.tempValues?this.tempValues.slice():[];this.value&&this.validateValues(this.value,e)&&("CheckBox"!==this.mode&&(this.value=e,this.initialValueUpdate()),"Delimiter"!==this.mode&&"CheckBox"!==this.mode?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),this.refreshPlaceHolder(),this.value.length?this.showOverAllClear():this.hideOverAllClear()),this.makeTextBoxEmpty()}scrollBottom(e,t){const i=this.list.offsetHeight,s=e.offsetTop+e.offsetHeight-this.list.scrollTop,r=this.list.scrollTop+s-i;let o=e.offsetTop+e.offsetHeight-this.list.scrollTop;o=this.fields.groupBy&&!m(this.fixedHeaderElement)?o-this.fixedHeaderElement.offsetHeight:o,0===t?this.list.scrollTop=0:s>i?this.list.scrollTop=r:o>0&&this.list.offsetHeight>o||(this.list.scrollTop=r)}scrollTop(e,t){let i=e.offsetTop-this.list.scrollTop;i=this.fields.groupBy&&!Jt(this.fixedHeaderElement)?i-this.fixedHeaderElement.offsetHeight:i;const s=e.offsetTop+e.offsetHeight-this.list.scrollTop;0===t?this.list.scrollTop=0:i<0?this.list.scrollTop=this.list.scrollTop+i:s>0&&this.list.offsetHeight>s||(this.list.scrollTop=e.offsetTop-(this.fields.groupBy&&!Jt(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}selectListByKey(e){const t=this.list.querySelector("li."+Ge_focus);let s,i=this.value&&this.value.length?this.value.length:0;null!==t&&(t.classList.contains("e-active")&&(i-=1),this.isValidLI(t)&&i<this.maximumSelectionLength?(this.updateListSelection(t,e),this.addListFocus(t),"CheckBox"===this.mode?(this.updateDelimView(),this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight(),this.checkPlaceholderSize(),this.enableGroupCheckBox&&!m(this.fields.groupBy)&&(s=t.firstElementChild.lastElementChild,this.findGroupStart(s),this.deselectHeader())):this.updateDelimeter(this.delimiterChar,e),this.makeTextBoxEmpty(),"CheckBox"!==this.mode&&this.refreshListItems(t.textContent),this.changeOnBlur||this.updateValueState(e,this.value,this.tempValues),this.refreshPopup()):!this.isValidLI(t)&&i<this.maximumSelectionLength&&(s=t.firstElementChild.lastElementChild,s.classList.contains("e-check")?this.selectAllItem(!1,e,t):this.selectAllItem(!0,e,t)),this.refreshSelection(),this.closePopupOnSelect&&this.hidePopup()),this.refreshPlaceHolder()}refreshListItems(e){if((this.allowFiltering||"CheckBox"===this.mode&&!0===this.enableSelectionOrder||this.allowCustomValue)&&this.mainList&&this.listData){const t=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(t,this.mainData),this.focusAtLastListItem(e),this.value&&this.value.length&&this.refreshSelection()}}removeSelectedChip(e){const t=this.chipCollectionWrapper.querySelector("span."+Lw);let i;null!==t&&(m(this.value)||(this.tempValues=this.value.slice()),i=t.nextElementSibling,null!==i&&(this.removeChipSelection(),this.addChipSelection(i,e)),this.removeValue(t.getAttribute("data-value"),e),this.makeTextBoxEmpty()),this.closePopupOnSelect&&this.hidePopup(),this.checkPlaceholderSize()}moveByTop(e){const t=this.list.querySelectorAll("li."+Ge_li);let i;t.length>1&&(this.removeFocus(),i=e?0:t.length-1,this.addListFocus(t[i]),this.scrollBottom(t[i],i)),this.updateAriaAttribute()}moveByList(e){if(this.list){let t=this.list.querySelectorAll("li."+Ge_li+":not(."+sr+"):not(.e-reorder-hide)");"CheckBox"===this.mode&&this.enableGroupCheckBox&&!m(this.fields.groupBy)&&(t=this.list.querySelectorAll("li."+Ge_li+",li."+Ge_group+":not(."+sr+"):not(.e-reorder-hide)"));const i=this.list.querySelector("li."+Ge_focus);let s=-1;if(t.length){for(let r=0;r<t.length;r++)if(t[r]===i){s=r;break}e>0?s<t.length-1&&(this.removeFocus(),this.addListFocus(t[++s]),this.updateCheck(t[s]),this.scrollBottom(t[s],s)):s>0&&(this.removeFocus(),this.addListFocus(t[--s]),this.updateCheck(t[s]),this.scrollTop(t[s],s))}}}updateCheck(e){"CheckBox"===this.mode&&this.enableGroupCheckBox&&!m(this.fields.groupBy)&&(e.firstElementChild.lastElementChild.classList.contains("e-check")?e.classList.add("e-active"):e.classList.remove("e-active"))}moveBy(e,t){let i;const s=this.chipCollectionWrapper.querySelectorAll("span."+Pw),r=this.chipCollectionWrapper.querySelector("span."+Lw);null===r?e<0&&this.addChipSelection(s[s.length-1],t):e<0?(i=r.previousElementSibling,null!==i&&(this.removeChipSelection(),this.addChipSelection(i,t))):(i=r.nextElementSibling,this.removeChipSelection(),null!==i&&this.addChipSelection(i,t))}chipClick(e){if(this.enabled){const t=ae(e.target,"."+Pw);this.removeChipSelection(),this.addChipSelection(t,e)}}removeChipSelection(){this.chipCollectionWrapper&&this.removeChipFocus()}addChipSelection(e,t){j([e],Lw),this.trigger("chipSelection",t)}onChipRemove(e){if(3!==e.which&&2!==e.button&&this.enabled&&!this.readonly){const i=e.target.parentElement.getAttribute("data-value");let s=this.getFormattedValue(i);if(this.allowCustomValue&&("false"!==i&&!1===s||!m(s)&&"NaN"===s.toString())&&(s=i),this.isPopupOpen()&&"CheckBox"!==this.mode&&this.hidePopup(),this.inputFocus||this.inputElement.focus(),this.removeValue(s,e),m(this.findListElement(this.list,"li","data-value",s))&&this.mainList&&this.listData){const r=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(r,this.mainData)}this.updateDelimeter(this.delimiterChar,e),this.placeholder&&"Never"===this.floatLabelType?(this.makeTextBoxEmpty(),this.checkPlaceholderSize()):this.inputElement.value="",e.preventDefault()}}makeTextBoxEmpty(){this.inputElement.value="",this.refreshPlaceHolder()}refreshPlaceHolder(){this.placeholder&&"Never"===this.floatLabelType?this.inputElement.placeholder=this.value&&this.value.length||!m(this.text)&&""!==this.text?"":H2(this.placeholder):this.setFloatLabelType(),this.expandTextbox()}removeAllItems(e,t,i,s,r){let o=this.value.indexOf(e);const a=this.value.slice(0);a.splice(o,1),this.setProperties({value:[].concat([],a)},!0),s.setAttribute("aria-selected","false"),Y([s],this.hideSelectedItem?sr:"e-active"),this.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:s,e:this,index:o}),this.invokeCheckboxSelection(s,t,i),this.updateMainList(!0,e,r),this.updateChipStatus()}invokeCheckboxSelection(e,t,i){this.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:e,e:t}),bt(this.inputElement,{"aria-activedescendant":e.id}),this.value&&this.value.length!==this.mainData.length&&"CheckBox"===this.mode&&this.showSelectAll&&!this.isSelectAll&&!i&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"})}removeValue(e,t,i,s){let r=this.value.indexOf(this.getFormattedValue(e));-1===r&&this.allowCustomValue&&!m(e)&&(r=this.value.indexOf(e.toString()));const o=t&&t.target;s=!!(s||o&&o.classList.contains("e-close-hooker"))||null;const a=this.hideSelectedItem?sr:"e-active";if(-1!==r){const u=this.findListElement(this.list,"li","data-value",e),p=this.getDataByValue(e);this.trigger("removing",{e:t,item:u,itemData:p,isInteracted:!!t,cancel:!1},E=>{if(E.cancel)this.removeIndex++;else{const _=this.value.slice(0);if(_.splice(r,1),this.setProperties({value:[].concat([],_)},!0),null!==u){const H=this.findListElement(this.mainList,"li","data-value",e);u.setAttribute("aria-selected","false"),Y([u],a),H&&(H.setAttribute("aria-selected","false"),Y([u,H],a)),this.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:u,e:this,index:r}),this.invokeCheckboxSelection(u,t,s)}this.hideSelectedItem&&this.fields.groupBy&&this.hideGroupItem(e),this.hideSelectedItem&&this.fixedHeaderElement&&this.fields.groupBy&&"CheckBox"!==this.mode&&this.isPopupOpen()&&super.scrollStop(),this.updateMainList(!0,e),this.removeChip(e),this.updateChipStatus(),(this.value&&this.value.length?this.value.length:0)<this.maximumSelectionLength&&Y(this.list.querySelectorAll("li."+Ge_li+":not(.e-active)"),"e-disable"),this.trigger("removed",E);const L=t&&t.currentTarget,V=!(!L||!L.classList.contains("e-selectall-parent"))||null;!this.changeOnBlur&&!s&&t&&i&&!V&&this.updateValueState(t,this.value,this.tempValues),i&&(this.selectAllEventData.push(p),this.selectAllEventEle.push(u)),1===i&&(this.changeOnBlur||this.updateValueState(t,this.value,this.tempValues),this.trigger("selectedAll",{event:t,items:this.selectAllEventEle,itemData:this.selectAllEventData,isInteracted:!!t,isChecked:!1}),this.selectAllEventData=[],this.selectAllEventEle=[]),s&&(1===i||null===i)&&this.clearAllCallback(t,s)}})}}updateMainList(e,t,i){if(this.allowFiltering||"CheckBox"===this.mode){const s=i||this.findListElement(this.mainList,"li","data-value",t);s&&(e?(s.setAttribute("aria-selected","false"),Y([s],this.hideSelectedItem?sr:"e-active"),"CheckBox"===this.mode&&(s.firstElementChild.setAttribute("aria-checked","false"),Y([s.firstElementChild.lastElementChild],"e-check"))):(s.setAttribute("aria-selected","true"),j([s],this.hideSelectedItem?sr:"e-active"),"CheckBox"===this.mode&&(s.firstElementChild.setAttribute("aria-checked","true"),j([s.firstElementChild.lastElementChild],"e-check"))))}}removeChip(e){if(this.chipCollectionWrapper){const t=this.findListElement(this.chipCollectionWrapper,"span","data-value",e);t&&Ms(t)}}setWidth(e){m(e)||("number"==typeof e?this.overAllWrapper.style.width=ct(e):"string"==typeof e&&(this.overAllWrapper.style.width=e.match(/px|%|em/)?e:ct(e)))}updateChipStatus(){this.value&&this.value.length?(m(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display=""),("Delimiter"===this.mode||"CheckBox"===this.mode)&&this.showDelimWrapper(),this.showOverAllClear()):(m(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display="none"),m(this.delimiterWrapper)||(this.delimiterWrapper.style.display="none"),this.hideOverAllClear())}addValue(e,t,i){this.value||(this.value=[]),this.value.indexOf(e)<0&&this.setProperties({value:[].concat([],this.value,[e])},!0);const s=this.findListElement(this.list,"li","data-value",e);this.removeFocus(),s&&(this.addListFocus(s),this.addListSelection(s)),"Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.addChip(t,e,i),this.hideSelectedItem&&this.fields.groupBy&&this.hideGroupItem(e),this.updateChipStatus(),this.checkMaxSelection()}checkMaxSelection(){(this.value&&this.value.length?this.value.length:0)===this.maximumSelectionLength&&j(this.list.querySelectorAll("li."+Ge_li+":not(.e-active)"),"e-disable")}dispatchSelect(e,t,i,s,r){const o=this.listData;if(this.initStatus&&!s){const a=this.getDataByValue(e);this.trigger("select",{e:t,item:i,itemData:a,isInteracted:!!t,cancel:!1},p=>{p.cancel||(r&&(this.selectAllEventData.push(a),this.selectAllEventEle.push(i)),1===r&&(this.trigger("selectedAll",{event:t,items:this.selectAllEventEle,itemData:this.selectAllEventData,isInteracted:!!t,isChecked:!0}),this.selectAllEventData=[]),this.allowCustomValue&&this.isServerRendered&&this.listData!==o&&(this.listData=o),this.updateListSelectEventCallback(e,i,t),this.hideSelectedItem&&this.fixedHeaderElement&&this.fields.groupBy&&"CheckBox"!==this.mode&&super.scrollStop())})}}addChip(e,t,i){this.chipCollectionWrapper&&this.getChip(e,t,i)}removeChipFocus(){const e=this.chipCollectionWrapper.querySelectorAll("span."+Pw),t=this.chipCollectionWrapper.querySelectorAll("span."+AO.split(" ")[0]);if(Y(e,Lw),Q.isDevice)for(let i=0;i<t.length;i++)t[i].style.display="none"}onMobileChipInteraction(e){const t=ae(e.target,"."+Pw),i=t.querySelector("span."+AO.split(" ")[0]);this.enabled&&!this.readonly&&(t.classList.contains(Lw)||(this.removeChipFocus(),i.style.display="",t.classList.add(Lw)),this.refreshPopup(),e.preventDefault())}multiCompiler(e){let t=!1;if(e)try{t=!!at(e,document).length}catch(i){t=!1}return t}getChip(e,t,i){let s={text:t,value:t};const r=this.createElement("span",{className:Pw,attrs:{"data-value":t,title:e}});let o;const a=this.createElement("span",{className:"e-chipcontent"}),u=this.createElement("span",{className:AO});if(this.mainData&&(s=this.getDataByValue(t)),this.valueTemplate&&!m(s)){o=this.multiCompiler(this.valueTemplate)?xs(X(this.valueTemplate,document).innerHTML.trim()):xs(this.valueTemplate);let E=o(s,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,a);if(E&&E.length>0)for(let _=0;_<E.length;_++)a.appendChild(E[_]);this.renderReactTemplates()}else this.enableHtmlSanitizer?a.innerText=e:a.innerHTML=e;r.appendChild(a);const p={isInteracted:!!i,itemData:s,e:i,setClass:y=>{j([r],y)},cancel:!1};this.isPreventChange=this.isAngular&&this.preventChange,this.trigger("tagging",p,y=>{y.cancel||(Q.isDevice?(r.classList.add("e-mob-chip"),Pi([u],r),u.style.display="none",O.add(r,"click",this.onMobileChipInteraction,this)):(O.add(r,"mousedown",this.chipClick,this),this.showClearButton&&r.appendChild(u)),O.add(u,"mousedown",this.onChipRemove,this),this.chipCollectionWrapper.appendChild(r),!this.changeOnBlur&&i&&this.updateValueState(i,this.value,this.tempValues))})}calcPopupWidth(){let e=ct(this.popupWidth);return e.indexOf("%")>-1&&(e=(this.componentWrapper.offsetWidth*parseFloat(e)/100).toString()+"px"),e}mouseIn(){this.enabled&&!this.readonly&&this.showOverAllClear()}mouseOut(){this.inputFocus||(this.overAllClear.style.display="none")}listOption(e,t){const i=!m(t.iconCss),s=m(t.properties)?t:t.properties;return this.listCurrentOptions=null!==t.text||null!==t.value?{fields:s,showIcon:i,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},ut(this.listCurrentOptions,this.listCurrentOptions,t,!0),"CheckBox"===this.mode&&this.notify("listoption",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,dataSource:e,fieldProperty:s}),this.listCurrentOptions}renderPopup(){if(this.list||super.render(),!this.popupObj){document.body.appendChild(this.popupWrapper);const e=this.popupWrapper.querySelector(".e-filter-parent");"CheckBox"===this.mode&&!this.allowFiltering&&e&&this.filterParent&&(e.remove(),this.filterParent=null);let t=parseInt(this.popupHeight,10);if(this.popupWrapper.style.visibility="hidden",this.headerTemplate&&(this.setHeaderTemplate(),t-=this.header.offsetHeight),Pi([this.list],this.popupWrapper),this.footerTemplate&&(this.setFooterTemplate(),t-=this.footer.offsetHeight),"CheckBox"===this.mode&&this.showSelectAll?(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),t-=this.selectAllHeight):"CheckBox"!==this.mode||this.showSelectAll||this.headerTemplate||this.footerTemplate?"CheckBox"===this.mode&&!this.showSelectAll&&(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),t=parseInt(this.popupHeight,10),this.headerTemplate&&this.header&&(t-=this.header.offsetHeight),this.footerTemplate&&this.footer&&(t-=this.footer.offsetHeight)):(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),t=parseInt(this.popupHeight,10)),"CheckBox"===this.mode){const i={module:"CheckBoxSelection",enable:"CheckBox"===this.mode,popupElement:this.popupWrapper};this.allowFiltering&&(this.notify("searchBox",i),t-=this.searchBoxHeight),j([this.popupWrapper],"e-checkbox")}"auto"!==this.popupHeight?(this.list.style.maxHeight=ct(t),this.popupWrapper.style.maxHeight=ct(this.popupHeight)):this.list.style.maxHeight=ct(this.popupHeight),this.popupObj=new Th(this.popupWrapper,{width:this.calcPopupWidth(),targetType:"relative",position:{X:"left",Y:"bottom"},relateTo:this.overAllWrapper,collision:{X:"flip",Y:"flip"},offsetY:1,enableRtl:this.enableRtl,zIndex:this.zIndex,close:()=>{if(this.popupObj.element.parentElement){this.popupObj.unwireScrollEvents();const i=this.popupWrapper.querySelector("."+OO);"CheckBox"===this.mode&&i&&document.activeElement===i&&i.blur(),ye(this.popupObj.element)}},open:()=>{if(this.popupObj.resolveCollision(),!this.isFirstClick){const i=this.list.querySelector("ul");i&&("CheckBox"!==this.mode&&(this.allowFiltering||this.allowCustomValue)&&""!==this.targetElement().trim()||(this.mainList=i.cloneNode?i.cloneNode(!0):i)),this.isFirstClick=!0}this.popupObj.wireScrollEvents(),"CheckBox"!==this.mode&&(this.allowFiltering||this.allowCustomValue)&&""!==this.targetElement().trim()||this.loadTemplate(),this.setScrollPosition(),this.allowFiltering&&this.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"focus"})},targetExitViewport:()=>{Q.isDevice||this.hidePopup()}}),"CheckBox"===this.mode&&Q.isDevice&&this.allowFiltering&&this.notify("deviceSearchBox",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.popupObj.close(),this.popupWrapper.style.visibility=""}}setHeaderTemplate(){let e;this.header&&this.header.remove(),this.header=this.createElement("div"),j([this.header],"e-ddl-header"),e=this.multiCompiler(this.headerTemplate)?xs(X(this.headerTemplate,document).innerHTML.trim()):xs(this.headerTemplate);let i=e({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);if(i&&i.length>0)for(let s=0;s<i.length;s++)this.header.appendChild(i[s]);"CheckBox"===this.mode&&this.showSelectAll?Tr([this.header],this.popupWrapper):Pi([this.header],this.popupWrapper),O.add(this.header,"mousedown",this.onListMouseDown,this)}setFooterTemplate(){let e;this.footer&&this.footer.remove(),this.footer=this.createElement("div"),j([this.footer],"e-ddl-footer"),e=this.multiCompiler(this.footerTemplate)?xs(X(this.footerTemplate,document).innerHTML.trim()):xs(this.footerTemplate);let i=e({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);if(i&&i.length>0)for(let s=0;s<i.length;s++)this.footer.appendChild(i[s]);Pi([this.footer],this.popupWrapper),O.add(this.footer,"mousedown",this.onListMouseDown,this)}clearAll(e){if(this.enabled&&!this.readonly){let t;if(this.value&&this.value.length>0){const i=this.list&&this.list.querySelectorAll("li.e-list-item");if(i&&i.length>0)this.selectAllItems(!1,e);else for(this.removeIndex=0,t=this.value[this.removeIndex];this.removeIndex<this.value.length;t=this.value[this.removeIndex])this.removeValue(t,e,null,!0)}else this.clearAllCallback(e)}}clearAllCallback(e,t){const i=this.value?this.value.slice():[];if(this.mainList&&this.listData&&(this.allowFiltering&&"CheckBox"!==this.mode||this.allowCustomValue)){const s=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(s,this.mainData)}this.focusAtFirstListItem(),this.updateDelimeter(this.delimiterChar,e),"Box"!==this.mode&&(!this.inputFocus||"CheckBox"===this.mode)&&this.updateDelimView(),""!==this.inputElement.value&&(this.makeTextBoxEmpty(),this.search(null)),this.checkPlaceholderSize(),this.isPopupOpen()&&this.refreshPopup(),this.inputFocus||(this.changeOnBlur&&this.updateValueState(e,this.value,i),"CheckBox"!==this.mode&&this.inputElement.focus()),"CheckBox"===this.mode&&(this.refreshPlaceHolder(),this.refreshInputHight(),this.changeOnBlur&&t&&(m(this.value)||0===this.value.length)&&this.updateValueState(e,this.value,this.tempValues)),!this.changeOnBlur&&t&&(m(this.value)||0===this.value.length)&&this.updateValueState(e,this.value,this.tempValues),"CheckBox"===this.mode&&this.enableGroupCheckBox&&!m(this.fields.groupBy)&&this.updateListItems(this.list.querySelectorAll("li.e-list-item"),this.mainList.querySelectorAll("li.e-list-item")),e.preventDefault()}windowResize(){this.refreshPopup(),(!this.inputFocus||"CheckBox"===this.mode)&&this.viewWrapper&&this.viewWrapper.parentElement&&this.updateDelimView()}resetValueHandler(e){const t=ae(this.inputElement,"form");if(t&&e.target===t){const i=this.element.tagName===this.getNgDirective()?null:this.element.getAttribute("data-initial-value");this.text=i}}wireEvent(){O.add(this.componentWrapper,"mousedown",this.wrapperClick,this),O.add(window,"resize",this.windowResize,this),O.add(this.inputElement,"focus",this.focusInHandler,this),O.add(this.inputElement,"keydown",this.onKeyDown,this),O.add(this.inputElement,"keyup",this.keyUp,this),"CheckBox"!==this.mode&&O.add(this.inputElement,"input",this.onInput,this),O.add(this.inputElement,"blur",this.onBlurHandler,this),O.add(this.componentWrapper,"mouseover",this.mouseIn,this);const e=ae(this.inputElement,"form");e&&O.add(e,"reset",this.resetValueHandler,this),O.add(this.componentWrapper,"mouseout",this.mouseOut,this),O.add(this.overAllClear,"mouseup",this.clearAll,this),O.add(this.inputElement,"paste",this.pasteHandler,this)}onInput(e){this.isValidKey=!!this.keyDownStatus,this.keyDownStatus=!1,Q.isDevice&&"mozilla"===Q.info.name&&this.search(e)}pasteHandler(e){setTimeout(()=>{this.expandTextbox(),this.search(e)})}search(e){if(m(e)||(this.keyCode=e.keyCode),!this.isPopupOpen()&&this.openOnClick&&this.showPopup(),this.openClick(e),!this.checkTextLength()||this.allowFiltering||m(e)||8===e.keyCode){const t=this.targetElement();if(this.allowFiltering){const i={preventDefaultAction:!1,text:this.targetElement(),updateData:(s,r,o)=>{i.cancel||(this.isFiltered=!0,this.remoteFilterAction=!0,this.dataUpdater(s,r,o))},event:e,cancel:!1};this.trigger("filtering",i,s=>{s.cancel||!this.isFiltered&&!s.preventDefaultAction&&(this.filterAction=!0,this.dataUpdater(this.dataSource,null,this.fields))})}else if(this.allowCustomValue){let i=new Fi;i=""!==t?i.where(this.fields.text,"startswith",t,this.ignoreCase,this.ignoreAccent):i,this.dataUpdater(this.mainData,i,this.fields)}else{const i=this.list.querySelectorAll("li."+Ge_li+":not(.e-hide-listitem)"),s=mC(this.targetElement(),i,"StartsWith",this.ignoreCase);s&&null!==s.item?(this.addListFocus(s.item),this.list.scrollTop=s.item.offsetHeight*s.index):""!==this.targetElement()?this.removeFocus():this.focusAtFirstListItem()}}else this.focusAtFirstListItem()}preRender(){null===this.allowFiltering&&(this.allowFiltering="CheckBox"===this.mode),this.initializeData(),this.updateDataAttribute(this.htmlAttributes),super.preRender()}getLocaleName(){return"multi-select"}initializeData(){this.mainListCollection=[],this.beforePopupOpen=!1,this.filterAction=!1,this.remoteFilterAction=!1,this.isFirstClick=!1,this.mobFilter=!0,this.isFiltered=!1,this.focused=!0,this.initial=!0,this.backCommand=!0}updateData(e,t){let i="";const s="Delimiter"===this.mode||"CheckBox"===this.mode,r=[];let o;const a=this.listData;if(this.listData=this.mainData,this.hiddenElement.innerHTML="",!m(this.value))for(let y=0;!m(this.value[y]);y++){const E=this.findListElement(m(this.mainList)?this.ulElement:this.mainList,"li","data-value",this.value[y]);m(E)&&!this.allowCustomValue?(this.value.splice(y,1),y-=1):(o=this.listData?this.getTextByValue(this.value[y]):this.value[y],i+=o+e+" ",r.push(o)),this.hiddenElement.innerHTML+='<option selected value ="'+this.value[y]+'">'+y+"</option>"}this.setProperties({text:r.toString()},!0),s&&(this.updateWrapperText(this.delimiterWrapper,i),this.delimiterWrapper.setAttribute("id",Ks("delim_val")),this.inputElement.setAttribute("aria-describedby",this.delimiterWrapper.id),this.inputElement.setAttribute("aria-labelledby",this.delimiterWrapper.id));const u=t&&t.target,p=!(!u||!u.classList.contains("e-close-hooker"))||null;(!this.changeOnBlur&&t&&!p||this.isSelectAll)&&(this.isSelectAll=!1,this.updateValueState(t,this.value,this.tempValues)),this.listData=a,this.addValidInputClass()}initialTextUpdate(){if(m(this.text))this.setProperties({value:null},!0);else{const e=this.text.split(this.delimiterChar),t=[];for(let i=0;e.length>i;i++){const s=this.getValueByText(e[i]);m(s)?this.allowCustomValue&&t.push(e[i]):t.push(s)}t&&t.length&&this.setProperties({value:t},!0)}}renderList(e){!e&&this.allowCustomValue&&this.list&&(this.list.textContent===this.noRecordsTemplate||this.list.querySelector(".e-ul")&&0===this.list.querySelector(".e-ul").childElementCount)&&(e=!0),super.render(e),this.unwireListEvents(),this.wireListEvents()}initialValueUpdate(){if(this.list){let e,t,i;if(this.chipCollectionWrapper&&(this.chipCollectionWrapper.innerHTML=""),this.removeListSelection(),!m(this.value))for(let s=0;!m(this.value[s]);s++)if(i=this.value[s],t=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",i),e=this.getTextByValue(i),t&&"true"!==t.getAttribute("aria-selected")||t&&"true"===t.getAttribute("aria-selected")&&this.hideSelectedItem&&("Box"===this.mode||"Default"===this.mode))this.addChip(e,i),this.addListSelection(t);else if(i&&this.allowCustomValue){const r=this.listData.length,o={};pi(this.fields.text,i,o),pi(this.fields.value,i,o);const a=this.popupWrapper.querySelector(".e-nodata");this.addItem(o,r),t=t||this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",i),this.popupWrapper.contains(a)&&(this.list.setAttribute("style",a.getAttribute("style")),this.popupWrapper.replaceChild(this.list,a),this.wireListEvents()),this.addChip(e,i),this.addListSelection(t)}"CheckBox"===this.mode?(this.updateDelimView(),this.changeOnBlur&&this.updateValueState(null,this.value,this.tempValues),this.updateDelimeter(this.delimiterChar),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar),"CheckBox"===this.mode&&this.showSelectAll&&(m(this.value)||!this.value.length)&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"}),"Box"===this.mode||"Default"===this.mode&&this.inputFocus?this.chipCollectionWrapper.style.display="":("Delimiter"===this.mode||"CheckBox"===this.mode)&&this.showDelimWrapper()}}updateActionCompleteData(e,t){this.value&&this.value.indexOf(e.getAttribute("data-value"))>-1&&(this.mainList=this.ulElement,this.hideSelectedItem&&j([e],sr))}updateAddItemList(e,t){this.popupObj&&this.popupObj.element&&this.popupObj.element.querySelector(".e-nodata")&&e?(this.list=e,this.mainList=this.ulElement=e.querySelector("ul"),Ms(this.popupWrapper.querySelector(".e-content")),this.popupObj=null,this.renderPopup()):this.allowCustomValue&&(this.list=e,this.mainList=this.ulElement=e.querySelector("ul"))}updateDataList(){if(this.mainList&&this.ulElement){let t=this.ulElement.childElementCount>0&&this.ulElement.children[0].childElementCount>0&&this.mainList.children[0].childElementCount<this.ulElement.children[0].childElementCount,i=this.itemTemplate&&this.ulElement.childElementCount>0&&(this.ulElement.children[0].childElementCount>0||this.fields.groupBy&&this.ulElement.children[1]&&this.ulElement.children[1].childElementCount>0);(this.mainList.childElementCount<this.ulElement.childElementCount||t||i)&&(this.mainList=this.ulElement)}}isValidLI(e){return e&&!e.classList.contains("e-disabled")&&!e.classList.contains(Ge_group)&&e.classList.contains(Ge_li)}updateListSelection(e,t,i){const s=e.getAttribute("data-value");let r=this.getFormattedValue(s);this.allowCustomValue&&("false"!==s&&!1===r||!m(r)&&"NaN"===r.toString())&&(r=s),this.removeHover(),this.value&&-1!==this.value.indexOf(r)?this.removeValue(r,t,i):this.dispatchSelect(r,t,e,"true"===e.getAttribute("aria-selected"),i)}updateListSelectEventCallback(e,t,i){const s=this.getTextByValue(e);if(!this.allowCustomValue&&!this.allowFiltering||this.findListElement(this.mainList,"li","data-value",e))this.remoteCustomValue=!1,this.addValue(e,s,i);else{const r=t.cloneNode(!0),o=this.fields.value?this.fields.value:"value";this.allowCustomValue&&this.mainData.length&&"number"==typeof J(o,this.mainData[0])&&(e=isNaN(parseFloat(e.toString()))?e:parseFloat(e.toString()));const a=this.getDataByValue(e);this.trigger("customValueSelection",{newData:a,cancel:!1},p=>{p.cancel||(Pi([r],this.mainList),this.mainData.push(a),this.remoteCustomValue=!1,this.addValue(e,s,i))})}}removeListSelection(){const e=this.hideSelectedItem?sr:"e-active",t=this.list.querySelectorAll("."+e);let i=t.length;if(t&&t.length)for(Y(t,e);i>0;)t[i-1].setAttribute("aria-selected","false"),i--;if(!m(this.mainList)){const s=this.mainList.querySelectorAll("."+e);let r=s.length;if(s&&s.length)for(Y(s,e);r>0;)s[r-1].setAttribute("aria-selected","false"),"CheckBox"===this.mode&&(t&&t.length>r-1&&(t[r-1].firstElementChild.setAttribute("aria-checked","false"),Y([t[r-1].firstElementChild.lastElementChild],"e-check")),s[r-1].firstElementChild.setAttribute("aria-checked","false"),Y([s[r-1].firstElementChild.lastElementChild],"e-check")),r--}}removeHover(){const e=this.list.querySelectorAll(".e-hover");e&&e.length&&Y(e,"e-hover")}removeFocus(){if(this.list&&this.mainList){const e=this.list.querySelectorAll("."+Ge_focus),t=this.mainList.querySelectorAll("."+Ge_focus);e&&e.length&&(Y(e,Ge_focus),Y(t,Ge_focus))}}addListHover(e){(this.enabled&&this.isValidLI(e)||null!==e&&e.classList.contains("e-list-group-item")&&this.enableGroupCheckBox&&"CheckBox"===this.mode&&!m(this.fields.groupBy))&&(this.removeHover(),j([e],"e-hover"))}addListFocus(e){this.enabled&&this.isValidLI(e)?(this.removeFocus(),j([e],Ge_focus)):this.enableGroupCheckBox&&"CheckBox"===this.mode&&!m(this.fields.groupBy)&&j([e],Ge_focus)}addListSelection(e,t){const i=this.hideSelectedItem?sr:"e-active";if(this.isValidLI(e)&&!e.classList.contains("e-hover")){if(j([e],i),this.updateMainList(!1,e.getAttribute("data-value"),t),e.setAttribute("aria-selected","true"),"CheckBox"===this.mode){const s=e.firstElementChild.getAttribute("aria-checked");("false"===s||m(s))&&this.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:e,e:this})}this.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:e,e:this}),this.chipCollectionWrapper&&this.removeChipSelection(),bt(this.inputElement,{"aria-activedescendant":e.id})}}updateDelimeter(e,t){this.updateData(e,t)}onMouseClick(e){this.keyCode=null,this.scrollFocusStatus=!1;let t=e.target;const i=ae(t,"."+Ge_li);if(ae(t,"."+Ge_group)&&this.enableGroupCheckBox&&"CheckBox"===this.mode&&this.fields.groupBy)t=t.classList.contains("e-list-group-item")?t.firstElementChild.lastElementChild:e.target,t.classList.contains("e-check")?(this.selectAllItem(!1,e),t.classList.remove("e-check"),t.classList.remove("e-stop"),ae(t,".e-list-group-item").classList.remove("e-active"),t.setAttribute("aria-selected","false")):(this.selectAllItem(!0,e),t.classList.remove("e-stop"),t.classList.add("e-check"),ae(t,".e-list-group-item").classList.add("e-active"),t.setAttribute("aria-selected","true")),this.refreshSelection(),this.checkSelectAll();else{if(this.isValidLI(i)){let r=this.value&&this.value.length?this.value.length:0;i.classList.contains("e-active")&&(r-=1),r<this.maximumSelectionLength&&(this.updateListSelection(i,e),this.checkPlaceholderSize(),this.addListFocus(i),(this.allowCustomValue||this.allowFiltering)&&this.mainList&&this.listData?"CheckBox"!==this.mode&&(this.focusAtLastListItem(i.getAttribute("data-value")),this.refreshSelection()):this.makeTextBoxEmpty()),"CheckBox"===this.mode?(this.updateDelimView(),this.value&&this.value.length>50?setTimeout(()=>{this.updateDelimeter(this.delimiterChar,e)},0):this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,e),this.checkSelectAll(),this.refreshPopup(),this.hideSelectedItem&&this.focusAtFirstListItem(),this.closePopupOnSelect?this.hidePopup():e.preventDefault(),this.makeTextBoxEmpty(),this.findGroupStart(t),"CheckBox"!==this.mode&&this.refreshListItems(m(i)?null:i.textContent)}else e.preventDefault();this.refreshPlaceHolder(),this.deselectHeader()}}findGroupStart(e){if(this.enableGroupCheckBox&&"CheckBox"===this.mode&&!m(this.fields.groupBy)){let r;if(this.itemTemplate&&!e.getElementsByClassName("e-frame").length)for(;!e.getElementsByClassName("e-frame").length;)e=e.parentElement;for(e.classList.contains("e-frame")&&(e=e.parentElement.parentElement),r=this.findGroupAttrtibutes(e,0,0,0,0),r=this.findGroupAttrtibutes(e,r[0],r[1],r[2],1);!e.classList.contains("e-list-group-item")&&(e.classList.contains("e-list-icon")&&(e=e.parentElement),null!=(e=e.previousElementSibling)););this.updateCheckBox(e,r[0],r[1],r[2])}}findGroupAttrtibutes(e,t,i,s,r){for(;!e.classList.contains("e-list-group-item")&&(e.classList.contains("e-list-icon")&&(e=e.parentElement),e.getElementsByClassName("e-frame")[0].classList.contains("e-check")&&e.classList.contains("e-list-item")?t++:e.classList.contains("e-list-item")&&i++,s++,null!=(e=r?e.nextElementSibling:e.previousElementSibling)););return[t,i,s]}updateCheckBox(e,t,i,s){if(null===e)return;const r=e.getElementsByClassName("e-frame")[0];s===t?(r.classList.remove("e-stop"),r.classList.add("e-check"),ae(r,".e-list-group-item").classList.add("e-active"),e.setAttribute("aria-selected","true")):s===i?(r.classList.remove("e-check"),r.classList.remove("e-stop"),ae(r,".e-list-group-item").classList.remove("e-active"),e.setAttribute("aria-selected","false")):this.maximumSelectionLength===t-1?(r.classList.remove("e-stop"),e.setAttribute("aria-selected","true"),ae(r,".e-list-group-item").classList.add("e-active"),r.classList.add("e-check")):(r.classList.remove("e-check"),r.classList.add("e-stop"),ae(r,".e-list-group-item").classList.add("e-active"),e.setAttribute("aria-selected","false"))}deselectHeader(){const e=this.value&&this.value.length?this.value.length:0,t=this.list.querySelectorAll("li.e-list-group-item:not(.e-active)");e<this.maximumSelectionLength&&Y(t,"e-disable"),e===this.maximumSelectionLength&&j(t,"e-disable")}onMouseOver(e){let t=ae(e.target,"."+Ge_li);null===t&&"CheckBox"===this.mode&&!m(this.fields.groupBy)&&this.enableGroupCheckBox&&(t=ae(e.target,"."+Ge_group)),this.addListHover(t)}onMouseLeave(){this.removeHover()}onListMouseDown(e){e.preventDefault(),this.scrollFocusStatus=!0}onDocumentClick(e){if("CheckBox"!==this.mode){const t=e.target;this.scrollFocusStatus=!!(!m(this.popupObj)&&ae(t,'[id="'+this.popupObj.element.id+'"]')||this.overAllWrapper.contains(e.target))&&(Q.isIE||"edge"===Q.info.name)&&document.activeElement===this.inputElement}}wireListEvents(){m(this.list)||(O.add(document,"mousedown",this.onDocumentClick,this),O.add(this.list,"mousedown",this.onListMouseDown,this),O.add(this.list,"mouseup",this.onMouseClick,this),O.add(this.list,"mouseover",this.onMouseOver,this),O.add(this.list,"mouseout",this.onMouseLeave,this))}unwireListEvents(){O.remove(document,"mousedown",this.onDocumentClick),this.list&&(O.remove(this.list,"mousedown",this.onListMouseDown),O.remove(this.list,"mouseup",this.onMouseClick),O.remove(this.list,"mouseover",this.onMouseOver),O.remove(this.list,"mouseout",this.onMouseLeave))}hideOverAllClear(){(!this.value||!this.value.length||""===this.inputElement.value)&&(this.overAllClear.style.display="none")}showOverAllClear(){this.overAllClear.style.display=(this.value&&this.value.length||""!==this.inputElement.value)&&this.showClearButton&&!0!==this.readonly?"":"none"}focusIn(){document.activeElement!==this.inputElement&&this.enabled&&this.inputElement.focus()}focusOut(){document.activeElement===this.inputElement&&this.enabled&&this.inputElement.blur()}showSpinner(){if(m(this.spinnerElement)){let e=this.filterParent&&this.filterParent.querySelector(".e-clear-icon.e-icons");"none"!==this.overAllClear.style.display||e?this.spinnerElement=e||this.overAllClear:(this.spinnerElement=this.createElement("span",{className:D6+" "+P6}),this.componentWrapper.appendChild(this.spinnerElement)),Zc({target:this.spinnerElement,width:Q.isDevice?"16px":"14px"},this.createElement),j([this.spinnerElement],M6),Bl(this.spinnerElement)}}hideSpinner(){m(this.spinnerElement)||(hl(this.spinnerElement),Y([this.spinnerElement],M6),this.spinnerElement.classList.contains(P6)?ye(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)}updateWrapperText(e,t){this.valueTemplate||!this.enableHtmlSanitizer?e.innerHTML=t:e.innerText=_n.sanitize(t)}updateDelimView(){if(this.delimiterWrapper&&this.hideDelimWrapper(),this.chipCollectionWrapper&&(this.chipCollectionWrapper.style.display="none"),this.viewWrapper.style.display="",this.viewWrapper.style.width="",this.viewWrapper.classList.remove(kO),this.value&&this.value.length){let t,i,r,o,u,e="",s=1,a=0;this.updateWrapperText(this.viewWrapper,e);const p={noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed",overflowCountTemplate:"+${count} more..",totalCountTemplate:"${count} selected"};let y=new Xr(this.getLocaleName(),p,this.locale);""===y.getConstant("actionFailureTemplate")&&(y=new Xr("dropdowns",p,this.locale)),""===y.getConstant("noRecordsTemplate")&&(y=new Xr("dropdowns",p,this.locale));const E=y.getConstant("overflowCountTemplate"),_=y.getConstant("totalCountTemplate"),D=this.createElement("span",{className:"e-remain"});let L=E.replace("${count}",this.value.length.toString());D.innerText=L,this.viewWrapper.appendChild(D),this.renderReactTemplates();const V=D.offsetWidth;if(Ms(D),this.showDropDownIcon&&(a=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10)),this.checkClearIconWidth(),!m(this.value))for(let H=0;!m(this.value[H]);H++){if(e+=0===H?"":this.delimiterChar+" ",t=this.getOverflowVal(H),e+=t,t=this.viewWrapper.innerHTML,this.updateWrapperText(this.viewWrapper,e),r=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10),u=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10),r+a+this.clearIconWidth>u){for(void 0!==i&&""!==i&&(t=i,H=s+1),this.updateWrapperText(this.viewWrapper,t),o=this.value.length-H,r=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10);r+V+a+this.clearIconWidth>u&&0!==r&&""!==this.viewWrapper.innerHTML;)this.viewWrapper.innerHTML=[].join(this.delimiterChar),o=this.value.length,r=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10);break}r+V+a+this.clearIconWidth<=u?(i=e,s=H):0===H&&(i="",s=-1)}if(o>0){const H=u-a-this.clearIconWidth;this.viewWrapper.appendChild(this.updateRemainTemplate(D,this.viewWrapper,o,E,_,H)),this.updateRemainWidth(this.viewWrapper,H),this.updateRemainingText(D,a,o,E,_)}}else this.viewWrapper.innerHTML="",this.viewWrapper.style.display="none"}checkClearIconWidth(){this.showClearButton&&(this.clearIconWidth=this.overAllClear.offsetWidth)}updateRemainWidth(e,t){e.classList.contains(kO)&&t<e.offsetWidth+parseInt(window.getComputedStyle(e).paddingLeft,10)+parseInt(window.getComputedStyle(e).paddingLeft,10)&&(e.style.width=t+"px")}updateRemainTemplate(e,t,i,s,r,o){t.firstChild&&3===t.firstChild.nodeType&&""===t.firstChild.nodeValue&&t.removeChild(t.firstChild),e.innerHTML="";let a=s.replace("${count}",i.toString()),u=r.replace("${count}",i.toString());return e.innerText=t.firstChild&&3===t.firstChild.nodeType?a:u,t.firstChild&&3===t.firstChild.nodeType?t.classList.remove(kO):(t.classList.add(kO),this.updateRemainWidth(t,o)),e}updateRemainingText(e,t,i,s,r){const o=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10);let a=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10);if(a+t>=o&&0!==a&&this.viewWrapper.firstChild&&3===this.viewWrapper.firstChild.nodeType){for(;a+t>o&&0!==a&&this.viewWrapper.firstChild&&3===this.viewWrapper.firstChild.nodeType;){const p=this.viewWrapper.firstChild.nodeValue.split(this.delimiterChar);p.pop(),this.viewWrapper.firstChild.nodeValue=p.join(this.delimiterChar),""===this.viewWrapper.firstChild.nodeValue&&this.viewWrapper.removeChild(this.viewWrapper.firstChild),i++,a=this.viewWrapper.offsetWidth}this.updateRemainTemplate(e,this.viewWrapper,i,s,r,o-t)}}getOverflowVal(e){let t;if(this.mainData&&this.mainData.length)if("CheckBox"===this.mode){const i=this.listData;this.listData=this.mainData,t=this.getTextByValue(this.value[e]),this.listData=i}else t=this.getTextByValue(this.value[e]);else t=this.value[e];return t}unWireEvent(){O.remove(this.componentWrapper,"mousedown",this.wrapperClick),O.remove(window,"resize",this.windowResize),O.remove(this.inputElement,"focus",this.focusInHandler),O.remove(this.inputElement,"keydown",this.onKeyDown),"CheckBox"!==this.mode&&O.remove(this.inputElement,"input",this.onInput),O.remove(this.inputElement,"keyup",this.keyUp);const e=ae(this.inputElement,"form");e&&O.remove(e,"reset",this.resetValueHandler),O.remove(this.inputElement,"blur",this.onBlurHandler),O.remove(this.componentWrapper,"mouseover",this.mouseIn),O.remove(this.componentWrapper,"mouseout",this.mouseOut),O.remove(this.overAllClear,"mousedown",this.clearAll),O.remove(this.inputElement,"paste",this.pasteHandler)}selectAllItem(e,t,i){let s;if(s=this.list.querySelectorAll(e?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)'),this.value&&this.value.length&&t&&t.target&&ae(t.target,".e-close-hooker")&&this.allowFiltering&&(s=this.mainList.querySelectorAll(e?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)')),this.enableGroupCheckBox&&"CheckBox"===this.mode&&!m(this.fields.groupBy)){let r=t?this.groupTemplate?ae(t.target,".e-list-group-item"):t.target:null;if(r=t&&32===t.keyCode?i:r,r=r&&r.classList.contains("e-frame")?r.parentElement.parentElement:r,r&&r.classList.contains("e-list-group-item")){let o=r.nextElementSibling;if(m(o))return;for(;o.classList.contains("e-list-item");){if(e){if(!o.firstElementChild.lastElementChild.classList.contains("e-check")){let a=this.value&&this.value.length?this.value.length:0;o.classList.contains("e-active")&&(a-=1),a<this.maximumSelectionLength&&this.updateListSelection(o,t)}}else o.firstElementChild.lastElementChild.classList.contains("e-check")&&this.updateListSelection(o,t);if(o=o.nextElementSibling,null==o)break}if(r.classList.contains("e-list-group-item")){const a=this.list.getElementsByClassName("e-item-focus")[0];a&&a.classList.remove("e-item-focus"),e?r.classList.add("e-active"):r.classList.remove("e-active"),r.classList.add("e-item-focus")}this.textboxValueUpdate(),this.checkPlaceholderSize(),!this.changeOnBlur&&t&&this.updateValueState(t,this.value,this.tempValues)}else this.updateValue(t,s,e)}else this.updateValue(t,s,e)}updateValue(e,t,i){const s=t.length,r={event:e,items:i?t:[],itemData:i?this.listData:[],isInteracted:!!e,isChecked:i,preventSelectEvent:!1};if(this.trigger("beforeSelectAll",r),t&&t.length){let o=0,a=0;if(a=this.enableGroupCheckBox?i?this.maximumSelectionLength-(this.value?this.value.length:0):t.length:i?this.maximumSelectionLength-(this.value?this.value.length:0):this.maximumSelectionLength,r.preventSelectEvent){for(let p=0;p<t.length&&p<a;p++){this.removeHover();let y=t[p].getAttribute("data-value"),E=this.getFormattedValue(y),_=this.mainList?this.mainList.querySelectorAll(i?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)')[p]:null;i?(this.value=this.value?this.value:[],this.value.indexOf(E)<0&&this.setProperties({value:[].concat([],this.value,[E])},!0),this.removeFocus(),this.addListSelection(t[p],_),this.updateChipStatus(),this.checkMaxSelection()):this.removeAllItems(E,e,!1,t[p],_),this.enableGroupCheckBox&&this.findGroupStart(t[p])}!i&&(this.value&&this.value.length?this.value.length:0)<this.maximumSelectionLength&&Y(this.list.querySelectorAll("li."+Ge_li+":not(.e-active)"),"e-disable"),this.trigger("selectedAll",{event:e,items:i?t:[],itemData:i?this.listData:[],isInteracted:!!e,isChecked:i})}else{for(;o<s&&o<=50&&o<a;)this.updateListSelection(t[o],e,s-o),this.enableGroupCheckBox&&this.findGroupStart(t[o]),o++;s>50&&setTimeout(()=>{for(;o<s&&o<a;)this.updateListSelection(t[o],e,s-o),this.enableGroupCheckBox&&this.findGroupStart(t[o]),o++;this.updatedataValueItems(e),this.changeOnBlur||(this.updateValueState(e,this.value,this.tempValues),this.isSelectAll=this.isSelectAll?!this.isSelectAll:this.isSelectAll),this.updateHiddenElement()},0)}}this.updatedataValueItems(e),this.checkPlaceholderSize(),s<=50&&!r.preventSelectEvent&&(this.changeOnBlur||(this.updateValueState(e,this.value,this.tempValues),this.isSelectAll=this.isSelectAll?!this.isSelectAll:this.isSelectAll),this.updateHiddenElement())}updateHiddenElement(){let e="",t="",i="";const s=[];"CheckBox"===this.mode&&(this.value.map((r,o)=>{e+='<option selected value ="'+r+'">'+o+"</option>",i=this.listData?this.getTextByValue(r):r,t+=i+this.delimiterChar+" ",s.push(i)}),this.hiddenElement.innerHTML=e,this.updateWrapperText(this.delimiterWrapper,t),this.delimiterWrapper.setAttribute("id",Ks("delim_val")),this.inputElement.setAttribute("aria-describedby",this.delimiterWrapper.id),this.inputElement.setAttribute("aria-labelledby",this.delimiterWrapper.id),this.setProperties({text:s.toString()},!0),this.refreshInputHight(),this.refreshPlaceHolder())}updatedataValueItems(e){this.deselectHeader(),this.textboxValueUpdate(e)}textboxValueUpdate(e){const t=e&&e.target&&(ae(e.target,".e-selectall-parent")||ae(e.target,".e-close-hooker"));"Box"===this.mode||this.isPopupOpen()||"CheckBox"===this.mode&&(this.isSelectAll||t)?this.searchWrapper.classList.remove(DO):this.updateDelimView(),"CheckBox"===this.mode?(this.updateDelimView(),t||this.isSelectAll||this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,e),this.refreshPlaceHolder()}setZIndex(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})}updateDataSource(e){m(this.list)?this.renderPopup():this.resetList(this.dataSource),this.value&&this.value.length&&(this.setProperties({value:this.value}),this.refreshSelection())}onLoadSelect(){this.setDynValue=!0,this.renderPopup()}selectAllItems(e,t){m(this.list)?(this.selectAllAction=()=>{"CheckBox"===this.mode&&this.showSelectAll&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:e?"check":"uncheck"}),this.selectAllItem(e,t),this.selectAllAction=null},super.render()):(this.selectAllAction=null,"CheckBox"===this.mode&&this.showSelectAll&&this.notify("checkSelectAll",{value:e?"check":"uncheck",enable:"CheckBox"===this.mode,module:"CheckBoxSelection"}),this.selectAllItem(e,t))}getPersistData(){return this.addOnPersist(["value"])}onPropertyChanged(e,t){(e.dataSource&&!m(Object.keys(e.dataSource))||e.query&&!m(Object.keys(e.query)))&&(this.mainList=null,this.mainData=null,this.isFirstClick=!1,this.isDynamicDataChange=!0),"multiselect"===this.getModuleName()&&(this.filterAction=!1,this.setUpdateInitial(["fields","query","dataSource"],e));for(const i of Object.keys(e))switch(i){case"query":case"dataSource":"CheckBox"===this.mode&&this.showSelectAll&&(m(this.popupObj)||(this.popupObj.destroy(),this.popupObj=null),this.renderPopup());break;case"htmlAttributes":this.updateHTMLAttribute();break;case"showClearButton":this.updateClearButton(e.showClearButton);break;case"text":this.updateVal(this.value,this.value,"text");break;case"value":this.updateVal(this.value,t.value,"value"),this.addValidInputClass(),!this.closePopupOnSelect&&this.isPopupOpen()&&this.refreshPopup(),this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange;break;case"width":this.setWidth(e.width),this.popupObj.setProperties({width:this.calcPopupWidth()});break;case"placeholder":this.refreshPlaceHolder();break;case"filterBarPlaceholder":this.allowFiltering&&this.notify("filterBarPlaceholder",{filterBarPlaceholder:e.filterBarPlaceholder});break;case"delimiterChar":"Box"!==this.mode&&this.updateDelimView(),this.updateData(e.delimiterChar);break;case"cssClass":this.updateOldPropCssClass(t.cssClass),this.updateCssClass();break;case"enableRtl":this.enableRTL(e.enableRtl),super.onPropertyChanged(e,t);break;case"readonly":this.updateReadonly(e.readonly),this.hidePopup();break;case"enabled":this.hidePopup(),this.enable(e.enabled);break;case"showSelectAll":this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup();break;case"showDropDownIcon":this.dropDownIcon();break;case"floatLabelType":this.setFloatLabelType(),this.addValidInputClass();break;case"enableSelectionOrder":break;case"selectAllText":this.notify("selectAllText",!1);break;case"popupHeight":if(this.popupObj){let s=parseInt(this.popupHeight,10);"auto"!==this.popupHeight?(this.list.style.maxHeight=ct(s),this.popupWrapper.style.maxHeight=ct(this.popupHeight)):this.list.style.maxHeight=ct(this.popupHeight)}break;case"headerTemplate":case"footerTemplate":this.reInitializePoup();break;case"allowFiltering":"CheckBox"===this.mode&&this.popupObj&&this.reInitializePoup(),this.updateSelectElementData(this.allowFiltering);break;default:{const s=this.getPropObject(i,e,t);super.onPropertyChanged(s.newProperty,s.oldProperty)}}}reInitializePoup(){this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup()}presentItemValue(e){let t=[];for(let i=0;i<this.value.length;i++)this.findListElement(this.allowFiltering&&!m(this.mainList)?this.mainList:e,"li","data-value",this.value[i])||t.push(this.value[i]);return t}addNonPresentItems(e,t,i,s){this.dataSource.executeQuery(this.getForQuery(e)).then(r=>{this.addItem(r.result,i.length),this.updateActionList(t,i,s)})}updateVal(e,t,i){if(this.list)if(!(this.dataSource instanceof Nt)||this.listData&&this.mainList&&this.mainData){let s=[];if(!m(this.value)&&!this.allowCustomValue&&(s=this.presentItemValue(this.ulElement)),"value"==i&&s.length>0&&this.dataSource instanceof Nt&&!m(this.value)&&null!=this.listData)this.mainData=null,this.setDynValue=!0,this.addNonPresentItems(s,this.ulElement,this.listData);else{if("text"===i&&(this.initialTextUpdate(),e=this.value),(m(this.value)||0===this.value.length)&&(this.tempValues=t),this.allowCustomValue&&("Default"===this.mode||"Box"===this.mode)&&this.isReact&&this.inputFocus&&this.isPopupOpen()&&this.mainData!==this.listData){const r=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(r,this.mainData)}this.initialValueUpdate(),"Box"!==this.mode&&!this.inputFocus&&this.updateDelimView(),this.inputFocus||this.refreshInputHight(),this.refreshPlaceHolder(),"CheckBox"!==this.mode&&this.changeOnBlur&&this.updateValueState(null,e,t),this.checkPlaceholderSize()}}else this.onLoadSelect();else this.onLoadSelect();this.changeOnBlur||this.updateValueState(null,e,t)}addItem(e,t){super.addItem(e,t)}hidePopup(){this.isPopupOpen()&&this.trigger("close",{popup:this.popupObj,cancel:!1,animation:{name:"FadeOut",duration:100,delay:100}},s=>{s.cancel||(this.fields.groupBy&&"CheckBox"!==this.mode&&this.fixedHeaderElement&&(Ms(this.fixedHeaderElement),this.fixedHeaderElement=null),this.beforePopupOpen=!1,this.overAllWrapper.classList.remove(R6),this.popupObj.hide(new Wn(s.animation)),bt(this.inputElement,{"aria-expanded":"false"}),this.allowFiltering&&this.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"clear"}),this.popupObj.hide(),Y([document.body,this.popupObj.element],"e-popup-full-page"),O.remove(this.list,"keydown",this.onKeyDown))})}showPopup(){this.enabled&&this.trigger("beforeOpen",{cancel:!1},t=>{if(!t.cancel){if(!this.ulElement)return this.beforePopupOpen=!0,super.render(),void("CheckBox"===this.mode&&Q.isDevice&&this.allowFiltering&&this.notify("popupFullScreen",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}));"CheckBox"===this.mode&&Q.isDevice&&this.allowFiltering&&this.notify("popupFullScreen",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode});const i=this.ulElement.querySelectorAll("li.e-list-item").length,s=this.ulElement.querySelectorAll("li."+Ge_li+"."+sr).length;if(i>0&&i===s&&s===this.mainData.length)return void(this.beforePopupOpen=!1);this.onPopupShown()}})}selectAll(e){this.isSelectAll=!0,this.selectAllItems(e)}getModuleName(){return"multiselect"}clear(){this.selectAll(!1),this.value&&this.value.length?setTimeout(()=>{this.setProperties({value:null},!0)},0):this.setProperties({value:null},!0)}render(){this.setDynValue=this.initStatus=!1,this.isSelectAll=!1,this.searchWrapper=this.createElement("span",{className:"e-searcher "+("Box"===this.mode?"e-multiselect-box":"")}),this.viewWrapper=this.createElement("span",{className:"e-delim-view "+k6,styles:"display:none;"}),this.overAllClear=this.createElement("span",{className:D6,styles:"display:none;"}),this.componentWrapper=this.createElement("div",{className:"e-multi-select-wrapper"}),this.overAllWrapper=this.createElement("div",{className:"e-multiselect e-input-group e-control-wrapper"}),"CheckBox"===this.mode&&j([this.overAllWrapper],"e-checkbox"),Q.isDevice&&this.componentWrapper.classList.add("e-mob-wrapper"),this.setWidth(this.width),this.overAllWrapper.appendChild(this.componentWrapper),this.popupWrapper=this.createElement("div",{id:this.element.id+"_popup",className:"e-ddl e-popup e-multi-select-list-wrapper"}),"Delimiter"===this.mode||"CheckBox"===this.mode?(this.delimiterWrapper=this.createElement("span",{className:k6,styles:"display:none"}),this.componentWrapper.appendChild(this.delimiterWrapper)):(this.chipCollectionWrapper=this.createElement("span",{className:"e-chips-collection",styles:"display:none"}),"Default"===this.mode?this.chipCollectionWrapper.setAttribute("id",Ks("chip_default")):"Box"===this.mode&&this.chipCollectionWrapper.setAttribute("id",Ks("chip_box")),this.componentWrapper.appendChild(this.chipCollectionWrapper)),"Box"!==this.mode&&this.componentWrapper.appendChild(this.viewWrapper),this.componentWrapper.appendChild(this.searchWrapper),this.showClearButton&&!Q.isDevice?this.componentWrapper.appendChild(this.overAllClear):this.componentWrapper.classList.add(j2),this.dropDownIcon(),this.inputElement=this.createElement("input",{className:"e-dropdownbase",attrs:{spellcheck:"false",type:"text",autocomplete:"off",tabindex:"0"}}),("Default"===this.mode||"Box"===this.mode)&&(this.inputElement.setAttribute("aria-describedby",this.chipCollectionWrapper.id),this.inputElement.setAttribute("aria-labelledby",this.chipCollectionWrapper.id)),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.tagName===this.getNgDirective()?(this.element.appendChild(this.overAllWrapper),this.searchWrapper.appendChild(this.inputElement)):(this.element.parentElement.insertBefore(this.overAllWrapper,this.element),this.searchWrapper.appendChild(this.inputElement),this.searchWrapper.appendChild(this.element),this.element.removeAttribute("tabindex")),"Never"!==this.floatLabelType?I6(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder):"Never"===this.floatLabelType&&this.refreshPlaceHolder(),this.addValidInputClass(),this.element.style.opacity="";const e=this.element.getAttribute("id")?this.element.getAttribute("id"):Ks("ej2_dropdownlist");this.element.id=e,this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",class:"e-multi-hidden",tabindex:"-1",multiple:""}}),this.componentWrapper.appendChild(this.hiddenElement),this.validationAttribute(this.element,this.hiddenElement),"CheckBox"!==this.mode&&this.hideOverAllClear(),this.wireEvent(),this.enable(this.enabled),this.enableRTL(this.enableRtl),this.checkInitialValue(),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),this.renderComplete()}checkInitialValue(){const e=this.dataSource instanceof Array?this.dataSource.length>0:!m(this.dataSource);if((!this.value||!this.value.length)&&m(this.text)&&!e&&"SELECT"===this.element.tagName&&this.element.options.length>0){const t=this.element.options,i=[];let s="";for(let r=0,o=t.length;r<o;r++){const a=t[r];m(a.getAttribute("selected"))||(a.getAttribute("value")?i.push(a.getAttribute("value")):s+=a.text+this.delimiterChar)}i.length>0?this.setProperties({value:i},!0):""!==s&&this.setProperties({text:s},!0),(i.length>0||""!==s)&&(this.refreshInputHight(),this.refreshPlaceHolder())}(this.value&&this.value.length||!m(this.text))&&(this.list||super.render()),!m(this.text)&&(m(this.value)||0===this.value.length)&&this.initialTextUpdate(),this.value&&this.value.length?(this.dataSource instanceof Nt?this.setInitialValue=()=>{this.initStatus=!1,this.initialValueUpdate(),this.initialUpdate(),this.setInitialValue=null,this.initStatus=!0}:(this.initialValueUpdate(),this.initialUpdate()),this.updateTempValue()):this.initialUpdate(),this.initStatus=!0,this.checkAutoFocus(),m(this.text)||this.element.setAttribute("data-initial-value",this.text)}checkAutoFocus(){this.element.hasAttribute("autofocus")&&this.inputElement.focus()}setFloatLabelType(){(function rJ(n,e,t,i,s,r,o){const a=e.querySelector("."+Qx),u=e.querySelector("."+V2);let p;m(a)?(p=null!==o?o:"",x6(s,i,p)):(p=a.innerText,ye(t.querySelector("."+Qx)),x6(s,i,p),m(u)||ye(t.querySelector("."+V2))),n.classList.remove("e-float-input")})(this.overAllWrapper,this.componentWrapper,this.searchWrapper,this.inputElement,this.value,0,this.placeholder),"Never"!==this.floatLabelType&&I6(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder)}addValidInputClass(){!m(this.value)&&this.value.length||"Always"===this.floatLabelType?j([this.overAllWrapper],"e-valid-input"):Y([this.overAllWrapper],"e-valid-input")}dropDownIcon(){this.showDropDownIcon?(this.dropIcon=this.createElement("span",{className:L6}),this.componentWrapper.appendChild(this.dropIcon),j([this.componentWrapper],["e-down-icon"])):m(this.dropIcon)||(this.dropIcon.parentElement.removeChild(this.dropIcon),Y([this.componentWrapper],["e-down-icon"]))}initialUpdate(){"Box"!==this.mode&&!(this.setDynValue&&"Default"===this.mode&&this.inputFocus)&&this.updateDelimView(),this.updateCssClass(),this.updateHTMLAttribute(),this.updateReadonly(this.readonly),this.refreshInputHight(),this.checkPlaceholderSize()}destroy(){this.isReact&&this.clearTemplate(),this.popupObj&&this.popupObj.hide(),this.notify("destroy",{}),this.unwireListEvents(),this.unWireEvent(),this.list=null,this.popupObj=null,this.mainList=null,this.mainData=null,this.filterParent=null,this.ulElement=null,this.mainListCollection=null,super.destroy();const e=["readonly","aria-disabled","aria-placeholder","placeholder"];let t=e.length;for(;t>0;)this.inputElement.removeAttribute(e[t-1]),t--;this.element.removeAttribute("data-initial-value"),this.element.style.display="block",this.overAllWrapper.parentElement&&(this.overAllWrapper.parentElement.tagName===this.getNgDirective()||this.overAllWrapper.parentElement.insertBefore(this.element,this.overAllWrapper),Ms(this.overAllWrapper))}};gi([Ps({text:null,value:null,iconCss:null,groupBy:null},k2)],ci.prototype,"fields",void 0),gi([A(!1)],ci.prototype,"enablePersistence",void 0),gi([A(null)],ci.prototype,"groupTemplate",void 0),gi([A("No records found")],ci.prototype,"noRecordsTemplate",void 0),gi([A("Request failed")],ci.prototype,"actionFailureTemplate",void 0),gi([A("None")],ci.prototype,"sortOrder",void 0),gi([A(!0)],ci.prototype,"enabled",void 0),gi([A(!1)],ci.prototype,"enableHtmlSanitizer",void 0),gi([A([])],ci.prototype,"dataSource",void 0),gi([A(null)],ci.prototype,"query",void 0),gi([A("StartsWith")],ci.prototype,"filterType",void 0),gi([A(1e3)],ci.prototype,"zIndex",void 0),gi([A(!1)],ci.prototype,"ignoreAccent",void 0),gi([A()],ci.prototype,"locale",void 0),gi([A(!1)],ci.prototype,"enableGroupCheckBox",void 0),gi([A(null)],ci.prototype,"cssClass",void 0),gi([A("100%")],ci.prototype,"width",void 0),gi([A("300px")],ci.prototype,"popupHeight",void 0),gi([A("100%")],ci.prototype,"popupWidth",void 0),gi([A(null)],ci.prototype,"placeholder",void 0),gi([A(null)],ci.prototype,"filterBarPlaceholder",void 0),gi([A({})],ci.prototype,"htmlAttributes",void 0),gi([A(null)],ci.prototype,"valueTemplate",void 0),gi([A(null)],ci.prototype,"headerTemplate",void 0),gi([A(null)],ci.prototype,"footerTemplate",void 0),gi([A(null)],ci.prototype,"itemTemplate",void 0),gi([A(null)],ci.prototype,"allowFiltering",void 0),gi([A(!0)],ci.prototype,"changeOnBlur",void 0),gi([A(!1)],ci.prototype,"allowCustomValue",void 0),gi([A(!0)],ci.prototype,"showClearButton",void 0),gi([A(1e3)],ci.prototype,"maximumSelectionLength",void 0),gi([A(!1)],ci.prototype,"readonly",void 0),gi([A(null)],ci.prototype,"text",void 0),gi([A(null)],ci.prototype,"value",void 0),gi([A(!0)],ci.prototype,"hideSelectedItem",void 0),gi([A(!0)],ci.prototype,"closePopupOnSelect",void 0),gi([A("Default")],ci.prototype,"mode",void 0),gi([A(",")],ci.prototype,"delimiterChar",void 0),gi([A(!0)],ci.prototype,"ignoreCase",void 0),gi([A(!1)],ci.prototype,"showDropDownIcon",void 0),gi([A("Never")],ci.prototype,"floatLabelType",void 0),gi([A(!1)],ci.prototype,"showSelectAll",void 0),gi([A("Select All")],ci.prototype,"selectAllText",void 0),gi([A("Unselect All")],ci.prototype,"unSelectAllText",void 0),gi([A(!0)],ci.prototype,"enableSelectionOrder",void 0),gi([A(!0)],ci.prototype,"openOnClick",void 0),gi([A(!1)],ci.prototype,"addTagOnBlur",void 0),gi([Z()],ci.prototype,"change",void 0),gi([Z()],ci.prototype,"removing",void 0),gi([Z()],ci.prototype,"removed",void 0),gi([Z()],ci.prototype,"beforeSelectAll",void 0),gi([Z()],ci.prototype,"selectedAll",void 0),gi([Z()],ci.prototype,"beforeOpen",void 0),gi([Z()],ci.prototype,"open",void 0),gi([Z()],ci.prototype,"close",void 0),gi([Z()],ci.prototype,"blur",void 0),gi([Z()],ci.prototype,"focus",void 0),gi([Z()],ci.prototype,"chipSelection",void 0),gi([Z()],ci.prototype,"filtering",void 0),gi([Z()],ci.prototype,"tagging",void 0),gi([Z()],ci.prototype,"customValueSelection",void 0),ci=gi([ts],ci);var PO,vn=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class eT extends Is{}vn([A("Multiple")],eT.prototype,"mode",void 0),vn([A(!1)],eT.prototype,"showCheckbox",void 0),vn([A(!1)],eT.prototype,"showSelectAll",void 0),vn([A("Left")],eT.prototype,"checkboxPosition",void 0);class z2 extends Is{}vn([A([])],z2.prototype,"items",void 0),vn([A("Right")],z2.prototype,"position",void 0);let nr=PO=class extends O2{constructor(e,t){super(e,t),this.isValidKey=!1,this.isDataSourceUpdate=!1,this.keyDownStatus=!1}addItem(e,t){super.addItem(e,t)}render(){this.inputString="",this.initLoad=!0,this.isCustomFiltering=!1,this.initialSelectedOptions=this.value,super.render(),this.renderComplete()}initWrapper(){const e=this.createElement("select",{className:"e-hidden-select",attrs:{multiple:""}});this.list.classList.add("e-listbox-wrapper"),this.itemTemplate&&this.list.classList.add("e-list-template"),this.list.classList.add("e-wrapper"),this.list.classList.add("e-lib"),"EJS-LISTBOX"===this.element.tagName?(this.element.setAttribute("tabindex","0"),this.initLoad&&this.element.appendChild(this.list)):(this.initLoad&&this.element.parentElement.insertBefore(this.list,this.element),this.list.insertBefore(this.element,this.list.firstChild),this.element.style.display="none"),this.list.insertBefore(e,this.list.firstChild),this.list.getElementsByClassName("e-list-item")[0]&&this.list.getElementsByClassName("e-list-item")[0].classList.remove(Ge_focus),this.itemTemplate&&this.renderReactTemplates(),Y([this.list],["e-content",Ge_root]),this.validationAttribute(this.element,e),this.list.setAttribute("role","listbox"),bt(this.list,{role:"listbox","aria-multiselectable":"Multiple"===this.selectionSettings.mode?"true":"false"}),this.updateSelectionSettings()}updateSelectionSettings(){if(this.selectionSettings.showCheckbox&&this.selectionSettings.showSelectAll&&this.liCollections.length){const e=new Xr(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.showSelectAll=!0,this.selectAllText=e.getConstant("selectAllText"),this.unSelectAllText=e.getConstant("unSelectAllText"),this.popupWrapper=this.list,this.checkBoxSelectionModule.checkAllParent=null,this.notify("selectAll",{})}}initDraggable(){this.ulElement&&(this.ulElement.id=this.element.id+"_parent"),this.allowDragAndDrop&&new dc(this.ulElement,{scope:this.scope,itemClass:"e-list-item",dragStart:this.triggerDragStart.bind(this),drag:this.triggerDrag.bind(this),beforeDrop:this.beforeDragEnd.bind(this),drop:this.dragEnd.bind(this),placeHolder:()=>this.createElement("span",{className:"e-placeholder"}),helper:e=>{const t=this.list.cloneNode(),i=e.sender.cloneNode(!0);t.appendChild(i);const s=this.getItems()[0];return t.style.width=s.offsetWidth+"px",t.style.height=s.offsetHeight+"px",(this.value&&this.value.length)>1&&this.isSelected(i)&&i.appendChild(this.createElement("span",{className:"e-list-badge",innerHTML:this.value.length+""})),t.style.zIndex=pa(this.element)+"",t}})}updateActionCompleteData(e,t){this.jsonData.push(t)}initToolbar(){const e=this.toolbarSettings.position,t=this.element.getAttribute("data-value");if(this.toolbarSettings.items.length){const s=this.createElement("div",{className:"e-listbox-tool",attrs:{role:"toolbar"}}),r=this.createElement("div",{className:"e-listboxtool-wrapper e-lib e-"+e.toLowerCase()});this.list.parentElement.insertBefore(r,this.list),r.appendChild("Right"===e?this.list:s),r.appendChild("Right"===e?s:this.list),this.createButtons(s),this.element.id||(this.element.id=Ks("e-"+this.getModuleName())),this.scope?document.querySelector(this.scope).setAttribute("data-value",this.element.id):this.updateToolBarState()}const i=this.element.getAttribute("data-value");t&&i&&t!==i?(this.tBListBox=Oo(document.getElementById(t),this.getModuleName()),this.tBListBox.updateToolBarState()):i&&(this.tBListBox=Oo(document.getElementById(i),this.getModuleName()),this.tBListBox.updateToolBarState())}createButtons(e){let t,i,s;const r=new Xr(this.getModuleName(),{moveUp:"Move Up",moveDown:"Move Down",moveTo:"Move To",moveFrom:"Move From",moveAllTo:"Move All To",moveAllFrom:"Move All From"},this.locale);this.toolbarSettings.items.forEach(o=>{s=r.getConstant(o),i=this.createElement("button",{attrs:{type:"button","data-value":o,title:s,"aria-label":s}}),e.appendChild(i),t=new Ip({iconCss:"e-icons e-"+o.toLowerCase()},i),t.createElement=this.createElement})}validationAttribute(e,t){super.validationAttribute(e,t),t.required=e.required,e.required=!1}setHeight(){(this.toolbarSettings.items.length?this.list.parentElement:this.list).style.height=ct(this.height),this.allowFiltering&&this.height.toString().indexOf("%")<0?j([this.list],"e-filter-list"):Y([this.list],"e-filter-list")}setCssClass(){this.cssClass&&j([this.toolbarSettings.items.length?this.list.parentElement:this.list],this.cssClass.split(" ")),this.enableRtl&&j([this.list],"e-rtl")}setEnable(){const e=this.toolbarSettings.items.length?this.list.parentElement:this.list;this.enabled?Y([e],li.disabled):j([e],li.disabled)}showSpinner(){this.spinner||(this.spinner=this.createElement("div",{className:"e-listbox-wrapper"})),this.spinner.style.height=ct(this.height),this.element.parentElement.insertBefore(this.spinner,this.element.nextSibling),Zc({target:this.spinner},this.createElement),Bl(this.spinner)}hideSpinner(){this.spinner.querySelector(".e-spinner-pane")&&hl(this.spinner),this.spinner.parentElement&&ye(this.spinner)}onInput(){this.isDataSourceUpdate=!1,this.isValidKey=!!this.keyDownStatus,this.keyDownStatus=!1,this.refreshClearIcon()}clearText(){this.filterInput.value="",this.refreshClearIcon();const e=document.createEvent("KeyboardEvent");this.isValidKey=!0,this.KeyUp(e)}refreshClearIcon(){this.filterInput.parentElement.querySelector("."+Rw.clearIcon)&&(this.filterInput.parentElement.querySelector("."+Rw.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible")}onActionComplete(e,t,i){let s;if(this.allowFiltering&&this.list.getElementsByClassName("e-filter-parent")[0]&&(s=this.list.getElementsByClassName("e-filter-parent")[0].cloneNode(!0)),0===t.length){const r=e.childNodes[0];r&&e.removeChild(r)}if(super.onActionComplete(e,t,i),this.allowFiltering&&!m(s)&&(this.list.insertBefore(s,this.list.firstElementChild),this.filterParent=this.list.getElementsByClassName("e-filter-parent")[0],this.filterWireEvents(s)),this.initWrapper(),this.setSelection(),this.initDraggable(),this.mainList=this.ulElement,this.initLoad)this.jsonData=[],ut(this.jsonData,t,[]),this.initToolbarAndStyles(),this.wireEvents(),this.showCheckbox&&this.setCheckboxPosition(),this.allowFiltering&&this.setFiltering();else if(this.isDataSourceUpdate&&(this.jsonData=[],ut(this.jsonData,t,[]),this.isDataSourceUpdate=!1),this.allowFiltering){const r=this.list.getElementsByClassName("e-input-filter")[0],o=this.filterInput.value.length;r.selectionStart=o,r.selectionEnd=o,r.focus()}if(this.toolbarSettings.items.length&&this.scope&&this.scope.indexOf("#")>-1&&!m(i)){const r=this.scope.replace("#","");Oo(document.getElementById(r),this.getModuleName()).initToolbar()}this.initLoad=!1}initToolbarAndStyles(){this.initToolbar(),this.setCssClass(),this.setEnable(),this.setHeight()}triggerDragStart(e){let t;e=ut(this.getDragArgs(e),{dragSelected:!0}),Q.isIos&&(this.list.style.overflow="hidden"),this.trigger("dragStart",e,i=>{this.allowDragAll=i.dragSelected,this.allowDragAll||(t=this.ulElement.getElementsByClassName("e-list-badge")[0],t&&ye(t))})}triggerDrag(e){let t,i,o,r=e.event;if(e.target&&(e.target.classList.contains("e-listbox-wrapper")||e.target.classList.contains("e-list-item")||e.target.classList.contains("e-filter-parent")||e.target.classList.contains("e-input-group"))&&(o=e.target.classList.contains("e-list-item")||e.target.classList.contains("e-filter-parent")||e.target.classList.contains("e-input-group")?e.target.closest(".e-listbox-wrapper"):e.target,t=this.allowFiltering?o.querySelector(".e-list-parent"):o,i=t.getBoundingClientRect(),i.y+t.offsetHeight-(r.pageY+36)<1?t.scrollTop=t.scrollTop+10:r.pageY-36-i.y<1&&(t.scrollTop=t.scrollTop-10)),null===e.target)return;this.trigger("drag",this.getDragArgs(e));const a=this.getComponent(e.target);if(a&&0===a.listData.length){const u=a.ulElement.childNodes[0];u&&a.ulElement.removeChild(u)}}beforeDragEnd(e){const t=this.getFormattedValue(e.droppedElement.getAttribute("data-value"));e.items=this.value.indexOf(t)>-1?this.getDataByValues(this.value):this.getDataByValues([t]),this.trigger("beforeDrop",e)}dragEnd(e){let t,i,s,r,o,a;const u=this.getFormattedValue(e.droppedElement.getAttribute("data-value")),p=this.getComponent(e.droppedElement),y=this.getDragArgs({target:e.droppedElement},!0),E={previousData:this.dataSource},_={previousData:p.dataSource};let D=ut({},y,{target:e.target,source:{previousData:this.dataSource},previousIndex:e.previousIndex,currentIndex:e.currentIndex});if(p!==this){const L=ut(E,{currentData:this.listData});D=ut(D,{source:L,destination:_})}if(Q.isIos&&(this.list.style.overflow=""),p===this){const L=this.ulElement;t=[].slice.call(this.listData),i=[].slice.call(this.liCollections),s=[].slice.call(this.jsonData),a=[].slice.call(this.sortedData);const V=e.currentIndex;let H=e.currentIndex=this.getCurIdx(this,e.currentIndex);const se=t.indexOf(this.getDataByValue(u)),_e=s.indexOf(this.getDataByValue(u)),re=a.indexOf(this.getDataByValue(u));t.splice(H,0,t.splice(se,1)[0]),a.splice(V,0,a.splice(re,1)[0]),s.splice(H,0,s.splice(_e,1)[0]),i.splice(H,0,i.splice(se,1)[0]),this.allowDragAll&&(o=this.value&&Array.prototype.indexOf.call(this.value,u)>-1?this.value:[u],o.forEach(Ae=>{if(Ae!==u){const gt=t.indexOf(this.getDataByValue(Ae)),ot=s.indexOf(this.getDataByValue(Ae)),ri=a.indexOf(this.getDataByValue(Ae));gt>H&&H++,s.splice(H,0,s.splice(ot,1)[0]),t.splice(H,0,t.splice(gt,1)[0]),a.splice(V,0,a.splice(ri,1)[0]),i.splice(H,0,i.splice(gt,1)[0]),L.insertBefore(this.getItems()[this.getIndexByValue(Ae)],L.getElementsByClassName("e-placeholder")[0])}})),this.listData=t,this.jsonData=s,this.sortedData=a,this.liCollections=i}else{let L;const V=[].slice.call(this.liCollections);let H=e.currentIndex=this.getCurIdx(p,e.currentIndex);const se=p.ulElement;t=[].slice.call(p.listData),i=[].slice.call(p.liCollections),s=[].slice.call(p.jsonData),a=[].slice.call(p.sortedData),o=this.value&&Array.prototype.indexOf.call(this.value,u)>-1&&this.allowDragAll?this.value:[u];const _e=[].slice.call(this.listData),re=[].slice.call(this.sortedData);if(o.forEach((Ae,gt)=>{r=this.getDataByValue(Ae);const ot=this.listData.indexOf(r),ri=this.jsonData.indexOf(r),jt=this.sortedData.indexOf(r);_e.splice(ot,1),this.jsonData.splice(ri,1),re.splice(jt,1),this.listData=_e,this.sortedData=re;const Ai=Ae===u?e.currentIndex:H;if(t.splice(Ai,0,r),s.splice(Ai,0,r),a.splice(Ai,0,r),i.splice(Ai,0,V.splice(ot,1)[0]),Ae)L=this.getItems()[this.getIndexByValue(Ae)];else{const rr=this.getItems();for(let mt=0;mt<rr.length;mt++)if(null===rr[mt].getAttribute("data-value")&&rr[mt].classList.contains("e-list-item")){L=rr[mt];break}}L||(L=e.helper),this.removeSelected(this,Ae===u?[e.droppedElement]:[L]),se.insertBefore(L,se.getElementsByClassName("e-placeholder")[0]),H++}),this.fields.groupBy){let Ae=this.renderItems(this.listData,this.fields);this.updateListItems(Ae,this.ulElement),this.setSelection()}if("None"!==p.sortOrder||this.selectionSettings.showCheckbox!==p.selectionSettings.showCheckbox||p.fields.groupBy||p.itemTemplate||this.itemTemplate){const Ae=Oo(se,"sortable");let gt=p.renderItems(t,p.fields);p.updateListItems(gt,se),this.setSelection(),Ae.placeHolderElement&&se.appendChild(Ae.placeHolderElement),se.appendChild(e.helper),p.setSelection()}this.liCollections=V,p.liCollections=i,p.jsonData=ut([],[],s,!1),p.listData=ut([],[],t,!1),p.sortedData=ut([],[],a,!1),0===this.listData.length&&this.l10nUpdate()}if(this===p){const L=ut(E,{currentData:t});D=ut(D,{source:L})}else{const L=ut(_,{currentData:t});D=ut(D,{destination:L})}this.trigger("drop",D)}updateListItems(e,t){for(t.innerHTML="";0<e.childNodes.length;)t.appendChild(e.childNodes[0])}removeSelected(e,t){e.selectionSettings.showCheckbox?t.forEach(i=>{i.getElementsByClassName("e-frame")[0].classList.remove("e-check")}):Y(t,li.selected)}getCurIdx(e,t){return e.fields.groupBy&&(t-=[].slice.call(e.ulElement.children).slice(0,t).filter(i=>i.classList.contains(li.group)).length),t}getComponent(e){let t;const i="EJS-LISTBOX"===this.element.tagName?ae(e,".e-listbox"):ae(e,".e-listbox-wrapper")&&ae(e,".e-listbox-wrapper").querySelector(".e-listbox");return i&&(t=Oo(i,this.getModuleName())),t}listOption(e,t){return this.listCurrentOptions=super.listOption(e,t),this.listCurrentOptions=ut({},this.listCurrentOptions,{itemCreated:this.triggerBeforeItemRender.bind(this)},!0),this.notify("listoption",{module:"CheckBoxSelection"}),this.listCurrentOptions}triggerBeforeItemRender(e){e.item.setAttribute("tabindex","-1"),this.trigger("beforeItemRender",{element:e.item,item:e.curData})}requiredModules(){const e=[];return this.selectionSettings.showCheckbox&&e.push({member:"CheckBoxSelection",args:[this]}),e}enableItems(e,t=!0,i){let s;e.forEach(r=>{s=this.findListElement(this.list,"li","data-value",i?r:this.getValueByText(r)),s&&(t?(Y([s],li.disabled),s.removeAttribute("aria-disabled")):(j([s],li.disabled),s.setAttribute("aria-disabled","true")))})}selectItems(e,t=!0,i){this.setSelection(e,t,!i),this.updateSelectedOptions()}selectAll(e=!0){this.selectAllItems(e)}addItems(e,t){super.addItem(e,t)}removeItems(e,t){this.removeItem(e,t)}removeItem(e,t){const i=[],s=this.list.querySelectorAll("."+Ge_li);if(e){e=e instanceof Array?e:[e];const r=this.fields;let o,a;const u=[];let p;ut(u,[],this.listData);const y=[],E=[];for(let _=0;_<e.length;_++){o=e[_]instanceof Object?J(r.value,e[_]):e[_].toString();for(let D=0,L=u.length;D<L;D++)if(a=u[D]instanceof Object?J(r.value,u[D]):u[D].toString(),a===o){p=this.getIndexByValue(o);const V=p===D?p:D;i.push(s[V]),y.push(V),E.push(V)}}for(let _=y.length-1;_>=0;_--)this.listData.splice(y[_],1);for(let _=y.length-1;_>=0;_--)this.jsonData.splice(y[_],1);for(let _=E.length-1;_>=0;_--)this.updateLiCollection(E[_])}else i.push(s[t=t||0]),this.listData.splice(t,1),this.jsonData.splice(t,1),this.updateLiCollection(t);for(let r=0;r<i.length;r++)this.ulElement.removeChild(i[r]);0===this.listData.length&&this.l10nUpdate()}getDataByValues(e){const t=[];for(let i=0;i<e.length;i++)t.push(this.getDataByValue(e[i]));return t}moveUp(e){const t=e?this.getElemByValue(e):this.getSelectedItems();this.moveUpDown(!0,!1,t)}moveDown(e){const t=e?this.getElemByValue(e):this.getSelectedItems();this.moveUpDown(!1,!1,t)}moveTo(e,t,i){const s=e?this.getElemByValue(e):this.getSelectedItems(),r=i?Oo(i,PO):this.getScopedListBox();this.moveData(this,r,!1,s,t)}moveAllTo(e,t){if(this.listData.length>0){const i=e?Oo(e,PO):this.getScopedListBox();this.moveAllData(this,i,!1,t)}}getDataList(){return this.jsonData}getSortedList(){let e,t;if(e=t=this.sortedData,this.fields.groupBy){e=[];for(let i=0;i<t.length;i++)t[i].isHeader||e.push(t[i])}return e}getElemByValue(e){const t=[];for(let i=0;i<e.length;i++)t.push(this.ulElement.querySelector('[data-value ="'+e[i]+'"]'));return t}updateLiCollection(e){const t=[].slice.call(this.liCollections);t.splice(e,1),this.liCollections=t}selectAllItems(e,t){if([].slice.call(this.getItems()).forEach(i=>{if(!i.classList.contains(li.disabled))if(this.selectionSettings.showCheckbox){const s=i.getElementsByClassName("e-check")[0];(!s&&e||s&&!e)&&(this.notify("updatelist",{li:i,module:"listbox"}),this.maximumSelectionLength>=this.list.querySelectorAll(".e-list-item span.e-check").length&&this.checkMaxSelection())}else e?i.classList.add(li.selected):i.classList.remove(li.selected)}),this.updateSelectedOptions(),this.allowFiltering&&this.selectionSettings.showCheckbox){const i=this.list.getElementsByTagName("li");let s=0;if(e)for(s=0;s<i.length;s++){const r=this.getFormattedValue(i[s].getAttribute("data-value"));this.value.some(o=>o===r)||this.value.push(this.getFormattedValue(i[s].getAttribute("data-value")))}else for(s=0;s<i.length;s++){const r=this.getFormattedValue(i[s].getAttribute("data-value"));this.value=this.value.filter(o=>o!==r)}document.querySelectorAll("ul").length<2&&this.updateMainList()}this.triggerChange(this.getSelectedItems(),t)}updateMainList(){const e=this.mainList.querySelectorAll(".e-list-item"),t=this.ulElement.querySelectorAll(".e-list-item"),i=e.length,s=t.length;if(this.selectionSettings.showCheckbox||document.querySelectorAll("ul").length>1||i!==s){let r=0,o=0,a=0;for(;r<i;){if(this.value)for(;o<this.value.length;o++)e[r].getAttribute("data-value")===this.value[o]&&a++;!a&&this.selectionSettings.showCheckbox&&e[r].getElementsByClassName("e-frame")[0].classList.remove("e-check"),document.querySelectorAll("ul").length>1&&a&&i!==s?(this.mainList.removeChild(this.mainList.getElementsByTagName("li")[r]),r=0):r++,a=0,o=0}}}wireEvents(){const e=ae(this.element,"form"),t="EJS-LISTBOX"===this.element.tagName?this.element:this.list;O.add(this.list,"click",this.clickHandler,this),O.add(t,"keydown",this.keyDownHandler,this),O.add(t,"focusout",this.focusOutHandler,this),this.wireToolbarEvent(),this.selectionSettings.showCheckbox&&O.remove(document,"mousedown",this.checkBoxSelectionModule.onDocumentClick),(this.fields.groupBy||this.element.querySelector("select>optgroup"))&&O.remove(this.list,"scroll",this.setFloatingHeader),e&&O.add(e,"reset",this.formResetHandler,this)}wireToolbarEvent(){this.toolbarSettings.items.length&&O.add(this.getToolElem(),"click",this.toolbarClickHandler,this)}unwireEvents(){const e=ae(this.element,"form"),t="EJS-LISTBOX"===this.element.tagName?this.element:this.list;O.remove(this.list,"click",this.clickHandler),O.remove(t,"keydown",this.keyDownHandler),O.remove(t,"focusout",this.focusOutHandler),this.allowFiltering&&this.clearFilterIconElem&&O.remove(this.clearFilterIconElem,"click",this.clearText),this.toolbarSettings.items.length&&O.remove(this.getToolElem(),"click",this.toolbarClickHandler),e&&O.remove(e,"reset",this.formResetHandler)}clickHandler(e){this.selectHandler(e)}checkSelectAll(){let e=0;const t=this.list.querySelectorAll("li."+Ge_li);for(let s=0;s<t.length;s++)t[s].classList.contains("e-disabled")||e++;const i=this.getSelectedItems().length;this.showSelectAll&&e&&this.notify("checkSelectAll",{module:"CheckBoxSelection",value:e===i?"check":0===i?"uncheck":"indeterminate"})}getQuery(e){let t=e?e.clone():this.query?this.query.clone():new Fi;if(this.allowFiltering){const i=""===this.inputString?"contains":this.filterType,s=this.typeOfData(this.dataSource).typeof;t.where((this.dataSource instanceof Nt||"string"!==s)&&"number"!==s&&this.fields.text?this.fields.text:"",i,this.inputString,this.ignoreCase,this.ignoreAccent)}else t=e||(this.query?this.query:new Fi);return t}setFiltering(){let e;if(this.initLoad||m(this.filterParent))return this.filterParent=this.createElement("span",{className:Rw.filterParent}),this.filterInput=this.createElement("input",{attrs:{type:"text"},className:Rw.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element),e=ft.createInput({element:this.filterInput,buttons:[Rw.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),Pi([e.container],this.filterParent),Tr([this.filterParent],this.list),bt(this.filterInput,{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-activedescendant":null,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}),this.height.toString().indexOf("%")<0&&j([this.list],"e-filter-list"),this.inputString=this.filterInput.value,this.filterWireEvents(),e}filterWireEvents(e){e&&(this.filterInput=e.querySelector(".e-input-filter")),this.clearFilterIconElem=this.filterInput.parentElement.querySelector("."+Rw.clearIcon),this.clearFilterIconElem&&(O.add(this.clearFilterIconElem,"click",this.clearText,this),e||(this.clearFilterIconElem.style.visibility="hidden")),O.add(this.filterInput,"input",this.onInput,this),O.add(this.filterInput,"keyup",this.KeyUp,this),O.add(this.filterInput,"keydown",this.onKeyDown,this)}selectHandler(e,t){let s,i=!0;const r=ae(e.target,".e-list-item");let o=[r];if(r&&r.parentElement){if(s=[].slice.call(r.parentElement.children).indexOf(r),this.selectionSettings.showCheckbox?i=!r.getElementsByClassName("e-frame")[0].classList.contains("e-check"):(e.ctrlKey||Q.isDevice)&&this.isSelected(r)?(r.classList.remove(li.selected),r.removeAttribute("aria-selected"),i=!1):"Multiple"===this.selectionSettings.mode&&(e.ctrlKey||Q.isDevice)||(this.getSelectedItems().forEach(a=>{a.removeAttribute("aria-selected")}),Y(this.getSelectedItems(),li.selected)),e.shiftKey&&!this.selectionSettings.showCheckbox&&"Single"!==this.selectionSettings.mode?o=[].slice.call(r.parentElement.children).slice(Math.min(s,this.prevSelIdx),Math.max(s,this.prevSelIdx)+1).filter(a=>a.classList.contains("e-list-item")):this.prevSelIdx=[].slice.call(r.parentElement.children).indexOf(r),i&&(this.selectionSettings.showCheckbox||j(o,li.selected),o.forEach(a=>{a.setAttribute("aria-selected","true")}),this.list.setAttribute("aria-activedescendant",r.id)),!t&&(this.maximumSelectionLength>(this.value&&this.value.length)||!i)&&(this.maximumSelectionLength>=(this.value&&this.value.length)||!i)&&!(this.maximumSelectionLength<(this.value&&this.value.length))&&this.notify("updatelist",{li:r,e,module:"listbox"}),this.allowFiltering&&!t){const a=this.getFormattedValue(r.getAttribute("data-value"));if(i){const u=[];ut(u,this.value),u.push(a),this.value=u}else this.value=this.value.filter(u=>u!==a);document.querySelectorAll("ul").length<2&&this.updateMainList()}this.updateSelectedOptions(),this.triggerChange(this.getSelectedItems(),e),this.checkMaxSelection()}}triggerChange(e,t){this.trigger("change",{elements:e,items:this.getDataByElements(e),value:this.value,event:t})}getDataByElems(e){const t=[];for(let i=0,s=e.length;i<s;i++)t.push(this.getDataByValue(this.getFormattedValue(e[i].getAttribute("data-value"))));return t}getDataByElements(e){const t=[];let i,s=0;if(!m(this.listData)){const r=this.typeOfData(this.listData).typeof;if("string"===r||"number"===r||"boolean"===r)for(const o of this.listData){for(let a=s,u=e.length;a<u;a++)if(i=this.getFormattedValue(e[a].getAttribute("data-value")),!m(o)&&o===i){s=a,t.push(o);break}if(e.length===t.length)break}else for(const o of this.listData){for(let a=s,u=e.length;a<u;a++)if(i=this.getFormattedValue(e[a].getAttribute("data-value")),!m(o)&&J(this.fields.value?this.fields.value:"value",o)===i){s=a,t.push(o);break}if(e.length===t.length)break}return t}return null}checkMaxSelection(){const e=this.list.querySelectorAll(".e-list-item span.e-check").length;if(this.selectionSettings.showCheckbox){let t=0;const i=this.list.getElementsByClassName("e-list-item");for(;t<i.length;t++)i[t].querySelector(".e-frame.e-check")||(e===this.maximumSelectionLength?i[t].classList.add("e-disable"):i[t].classList.contains("e-disable")&&i[t].classList.remove("e-disable"))}}toolbarClickHandler(e){const t=ae(e.target,"button");if(t){if(this.toolbarAction=t.getAttribute("data-value"),t.disabled)return;switch(this.toolbarAction){case"moveUp":this.moveUpDown(!0);break;case"moveDown":this.moveUpDown();break;case"moveTo":this.moveItemTo();break;case"moveFrom":this.moveItemFrom();break;case"moveAllTo":this.moveAllItemTo();break;case"moveAllFrom":this.moveAllItemFrom();break;default:this.trigger("actionBegin",{cancel:!1,items:this.getDataByElems(this.getSelectedItems()),eventName:this.toolbarAction})}}}moveUpDown(e,t,i){let s=this.getSelectedItems();if(i&&(s=i),(e&&this.isSelected(this.ulElement.firstElementChild)||!e&&this.isSelected(this.ulElement.lastElementChild))&&!i)return;const r=this.getDataByElems(s),o={cancel:!1,items:r,eventName:this.toolbarAction};this.trigger("actionBegin",o),!o.cancel&&((e?s:s.reverse()).forEach(a=>{const u=Array.prototype.indexOf.call(this.ulElement.querySelectorAll(".e-list-item"),a),p=Array.prototype.indexOf.call(this.ulElement.children,a);lE(this.ulElement,this.ulElement,[p],e?p-1:p+2),this.changeData(p,e?p-1:p+1,e?u-1:u+1,a)}),this.trigger("actionComplete",{items:r,eventName:this.toolbarAction}),s[0].focus(),!t&&this.toolbarSettings.items.length&&this.getToolElem().querySelector("[data-value="+(e?"moveUp":"moveDown")+"]").focus(),this.updateToolBarState())}moveItemTo(){this.moveData(this,this.getScopedListBox())}moveItemFrom(){this.moveData(this.getScopedListBox(),this)}moveData(e,t,i,s,r){const o=[],a=[],u=[],p=[],y=[].slice.call(e.listData),E=[].slice.call(t.listData),_=[].slice.call(e.sortedData);let D=[].slice.call(t.sortedData);const L=[].slice.call(e.liCollections),V=[],H=[].slice.call(t.liCollections),se=[],_e=[];let re=e.getSelectedItems();s&&(re=s);const Ae="None"!==t.sortOrder||t.selectionSettings.showCheckbox!==e.selectionSettings.showCheckbox||t.fields.groupBy||t.itemTemplate||e.itemTemplate;if(e.value=[],re.length){this.removeSelected(e,re),re.forEach(jt=>{o.push(Array.prototype.indexOf.call(e.ulElement.children,jt)),V.push(Array.prototype.indexOf.call(e.ulElement.querySelectorAll(".e-list-item"),jt)),a.push(Array.prototype.indexOf.call(e.listData,e.getDataByElems([jt])[0])),p.push(Array.prototype.indexOf.call(e.sortedData,e.getDataByElems([jt])[0])),u.push(Array.prototype.indexOf.call(e.jsonData,e.getDataByElems([jt])[0]))}),"None"!==this.sortOrder?p.forEach(jt=>{se.push(e.sortedData[jt])}):u.forEach(jt=>{se.push(e.jsonData[jt])});const gt={cancel:!1,items:se,eventName:this.toolbarAction};if(e.trigger("actionBegin",gt),gt.cancel)return;const ot=[];if(V.sort((jt,Ai)=>jt-Ai).reverse().forEach(jt=>{ot.push(L.splice(jt,1)[0])}),e.liCollections=L,r){const jt=H.splice(0,r);t.liCollections=jt.concat(ot.reverse()).concat(H)}else t.liCollections=H.concat(ot.reverse());if(0===t.listData.length){const jt=t.ulElement.childNodes[0];jt&&t.ulElement.removeChild(jt)}if(a.sort((jt,Ai)=>Ai-jt).forEach(jt=>{y.splice(jt,1)}),p.sort((jt,Ai)=>Ai-jt).forEach(jt=>{_.splice(jt,1)}),u.slice().reverse().forEach(jt=>{_e.push(e.jsonData.splice(jt,1)[0])}),Ae)if(e.fields.groupBy){let jt=e.renderItems(y,e.fields);e.updateListItems(jt,e.ulElement)}else re.forEach(jt=>{ye(jt)});else lE(e.ulElement,t.ulElement,o,r),e.trigger("actionComplete",{items:se,eventName:this.toolbarAction});t.mainList.childElementCount!==t.jsonData.length&&(t.mainList=t.ulElement),e.updateMainList();const ri=[].slice.call(t.jsonData);D=[].slice.call(t.sortedData),this.selectNextList(re,V,a,e),i&&this.list.focus(),e.listData=y,e.sortedData=_,r=r||E.length;for(let jt=se.length-1;jt>=0;jt--)E.splice(r,0,se[jt]),ri.splice(r,0,se[jt]),D.splice(r,0,se[jt]);if(t.listData=E,t.jsonData=ri,t.sortedData=D,Ae){let jt=t.renderItems(E,t.fields);t.updateListItems(jt,t.ulElement),t.setSelection(),e.trigger("actionComplete",{items:se,eventName:this.toolbarAction})}e.updateSelectedOptions(),0===e.listData.length&&e.l10nUpdate()}1===e.value.length&&e.getSelectedItems().length&&(e.value[0]=e.getFormattedValue(e.getSelectedItems()[0].getAttribute("data-value")))}selectNextList(e,t,i,s){const r=s.ulElement.querySelectorAll(".e-list-item").length;let o,a,u=-1;1===e.length&&r&&!s.selectionSettings.showCheckbox&&(a=r<=t[0]?r-1:t[0],o=s.ulElement.querySelectorAll(".e-list-item")[a],u=s.getValidIndex(o,a,r===i[0]?38:40),u>-1&&s.ulElement.querySelectorAll(".e-list-item")[u].classList.add(li.selected))}moveAllItemTo(){this.moveAllData(this,this.getScopedListBox())}moveAllItemFrom(){this.moveAllData(this.getScopedListBox(),this)}moveAllData(e,t,i,s){let r=[].slice.call(t.listData);const o=[].slice.call(t.jsonData),a="None"!==t.sortOrder||t.selectionSettings.showCheckbox!==e.selectionSettings.showCheckbox||t.fields.groupBy||t.itemTemplate||e.itemTemplate;this.removeSelected(e,e.getSelectedItems());const u=[].slice.call(e.jsonData),p={cancel:!1,items:u,eventName:this.toolbarAction};if(e.trigger("actionBegin",p),p.cancel)return;if(0===t.listData.length){const _=t.ulElement.childNodes[0];_&&t.ulElement.removeChild(_)}if(a){const _=e.ulElement.childNodes[0];_&&e.ulElement.removeChild(_)}lE(e.ulElement,t.ulElement,Array.apply(null,{length:e.ulElement.childElementCount}).map(Number.call,Number),s),this.trigger("actionComplete",{items:u,eventName:this.toolbarAction}),i&&this.list.focus(),s=s||r.length;for(let _=0;_<e.listData.length;_++)r.splice(s+_,0,e.listData[_]);for(let _=0;_<e.jsonData.length;_++)o.splice(s+_,0,e.jsonData[_]);const y=[].slice.call(e.liCollections),E=[].slice.call(t.liCollections);if(e.liCollections=[],s){const _=E.splice(0,s);t.liCollections=_.concat(y).concat(E)}else t.liCollections=E.concat(y);if(e.value=[],r=r.filter(_=>!0!==_.isHeader),t.listData=r,t.jsonData=o,e.listData=e.sortedData=e.jsonData=[],a){let _=t.renderItems(r,t.fields);t.updateListItems(_,t.ulElement),this.trigger("actionComplete",{items:u,eventName:this.toolbarAction})}else t.sortedData=r;e.updateSelectedOptions(),0===e.listData.length&&e.l10nUpdate()}changeData(e,t,i,s){const r=[].slice.call(this.listData),o=[].slice.call(this.jsonData),a=[].slice.call(this.sortedData),u=Array.prototype.indexOf.call(this.jsonData,this.getDataByElems([s])[0]),p=Array.prototype.indexOf.call(this.sortedData,this.getDataByElems([s])[0]),y=[].slice.call(this.liCollections);r.splice(t,0,r.splice(e,1)[0]),o.splice(i,0,o.splice(u,1)[0]),a.splice(t,0,a.splice(p,1)[0]),y.splice(t,0,y.splice(e,1)[0]),this.listData=r,this.jsonData=o,this.liCollections=y,this.sortedData=a}getSelectedItems(){let e=[];return this.selectionSettings.showCheckbox?[].slice.call(this.ulElement.getElementsByClassName("e-check")).forEach(t=>{e.push(ae(t,".e-list-item"))}):e=[].slice.call(this.ulElement.getElementsByClassName(li.selected)),e}getScopedListBox(){let e;return this.scope&&[].slice.call(document.querySelectorAll(this.scope)).forEach(t=>{Oo(t,this.getModuleName())&&(e=Oo(t,this.getModuleName()))}),e}getGrabbedItems(){return Array.prototype.slice.call(this.element.querySelectorAll(".e-grabbed"))}getDragArgs(e,t){let i=this.getGrabbedItems();return i.length?t&&i.push(e.target):i=[e.target],{elements:i,items:this.getDataByElems(i)}}onKeyDown(e){this.keyDownHandler(e),e.stopPropagation()}keyDownHandler(e){if([32,35,36,37,38,39,40,65].indexOf(e.keyCode)>-1&&!this.allowFiltering){if(e.target&&e.target.className.indexOf("e-edit-template")>-1)return;if(e.preventDefault(),32===e.keyCode&&this.ulElement.children.length)this.selectHandler({target:this.ulElement.getElementsByClassName("e-focused")[0],ctrlKey:e.ctrlKey,shiftKey:e.shiftKey});else if(65===e.keyCode&&e.ctrlKey)this.selectAll();else if((38===e.keyCode||40===e.keyCode)&&e.ctrlKey&&e.shiftKey)this.moveUpDown(38===e.keyCode,!0);else if(!this.toolbarSettings.items.length&&!this.tBListBox||39!==e.keyCode&&37!==e.keyCode||!e.ctrlKey)37!==e.keyCode&&39!==e.keyCode&&this.upDownKeyHandler(e);else{const t=this.tBListBox||this.getScopedListBox();39===e.keyCode?e.shiftKey?this.moveAllData(this,t,!0):this.moveData(this,t,!0):e.shiftKey?this.moveAllData(t,this,!0):this.moveData(t,this,!0)}}else this.allowFiltering&&(40===e.keyCode||38===e.keyCode)&&this.upDownKeyHandler(e)}upDownKeyHandler(e){const t=this.ulElement;let s=40===e.keyCode||36===e.keyCode?0:t.childElementCount-1;const r=t.getElementsByClassName("e-focused")[0]||t.getElementsByClassName(li.selected)[0];if(r){if(35!==e.keyCode&&36!==e.keyCode&&(s=Array.prototype.indexOf.call(t.children,r),40===e.keyCode?s++:s--,s<0||s>t.childElementCount-1))return;Y([r],"e-focused")}const o=t.children[s];if(o){if(s=this.getValidIndex(o,s,e.keyCode),-1===s)return void j([r],"e-focused");t.children[s].focus(),t.children[s].classList.add("e-focused"),e.ctrlKey||this.selectHandler({target:t.children[s],ctrlKey:e.ctrlKey,shiftKey:e.shiftKey},!0)}}KeyUp(e){if(m(String.fromCharCode(e.keyCode).match(/\w/))||(this.isValidKey=!0),this.isValidKey=8===e.keyCode||46===e.keyCode||this.isValidKey,this.isValidKey&&(this.isValidKey=!1,this.allowFiltering)){const s={preventDefaultAction:!1,text:this.targetElement(),updateData:(r,o,a)=>{s.cancel||(this.isFiltered=!0,this.remoteFilterAction=!0,this.dataUpdater(r,o,a))},event:e,cancel:!1};this.trigger("filtering",s,r=>{this.isDataFetched=!1,!(r.cancel||""!==this.filterInput.value&&this.isFiltered)&&(!r.cancel&&!this.isCustomFiltering&&!r.preventDefaultAction&&(this.inputString=this.filterInput.value,this.filteringAction(this.jsonData,new Fi,this.fields)),!this.isFiltered&&!this.isCustomFiltering&&!r.preventDefaultAction&&this.dataUpdater(this.jsonData,new Fi,this.fields))})}}filter(e,t,i){this.isCustomFiltering=!0,this.filteringAction(e,t,i)}filteringAction(e,t,i){this.resetList(e,i,t)}targetElement(){return this.targetInputElement=this.list.getElementsByClassName("e-input-filter")[0],this.targetInputElement.value}dataUpdater(e,t,i){if(this.isDataFetched=!1,""===this.targetElement().trim()){const r=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.remoteCustomValue=!1,this.onActionComplete(r,this.jsonData),this.notify("reOrder",{module:"CheckBoxSelection",enable:this.selectionSettings.showCheckbox,e:this})}else this.resetList(e,i,t)}focusOutHandler(){const e=this.list.getElementsByClassName("e-focused")[0];e&&e.classList.remove("e-focused"),this.allowFiltering&&this.refreshClearIcon()}getValidIndex(e,t,i){const s=this.ulElement;return(e.classList.contains("e-disabled")||e.classList.contains(li.group))&&(40===i||36===i?t++:t--),t<0||t===s.childElementCount?-1:(((e=s.querySelectorAll(".e-list-item")[t]).classList.contains("e-disabled")||e.classList.contains(li.group))&&(t=this.getValidIndex(e,t,i)),t)}updateSelectedOptions(){const e=[],t=[];if(ut(t,this.value),this.getSelectedItems().forEach(i=>{i.classList.contains("e-grabbed")||e.push(this.getFormattedValue(i.getAttribute("data-value")))}),this.mainList.childElementCount===this.ulElement.childElementCount)if(this.allowFiltering&&this.selectionSettings.showCheckbox){for(let i=0;i<e.length;i++)t.indexOf(e[i])>-1||t.push(e[i]);this.setProperties({value:t},!0)}else this.setProperties({value:e},!0);this.updateSelectTag(),this.updateToolBarState(),this.tBListBox&&this.tBListBox.updateToolBarState()}clearSelection(e=this.value){if(this.selectionSettings.showCheckbox){let t;this.getSelectedItems().forEach(i=>{t=this.getFormattedValue(i.getAttribute("data-value")),e.indexOf(t)<0&&(i.getElementsByClassName("e-check")[0].classList.remove("e-check"),i.getElementsByClassName("e-checkbox-wrapper")[0].removeAttribute("aria-checked"),i.removeAttribute("aria-selected"))})}}setSelection(e=this.value,t=!0,i=!1){let s,r;e&&e.forEach(o=>{let a;a=i?this.getValueByText(o):o,s=this.list.querySelector('[data-value="'+a+'"]'),s&&(r=this.selectionSettings.showCheckbox?s.getElementsByClassName("e-frame")[0].classList.contains("e-check"):s.classList.contains("e-selected"),(!t&&r||t&&!r&&s)&&(this.selectionSettings.showCheckbox?this.notify("updatelist",{li:s,module:"listbox"}):t?(s.classList.add(li.selected),s.setAttribute("aria-selected","true")):(s.classList.remove(li.selected),s.removeAttribute("aria-selected"))))}),this.updateSelectTag()}updateSelectTag(){const e=this.getSelectTag();let t="";if(e.innerHTML="",this.value){for(let i=0,s=this.value.length;i<s;i++)t+='<option selected value="'+this.value[i]+'"></option>';e.innerHTML+=t}this.checkSelectAll()}checkDisabledState(e){return 0===e.ulElement.querySelectorAll("."+li.li).length}updateToolBarState(){if(this.toolbarSettings.items.length){const e=this.getScopedListBox(),t=this.list.parentElement.getElementsByClassName("e-listbox-tool")[0];this.toolbarSettings.items.forEach(i=>{const s=t.querySelector('[data-value="'+i+'"]');switch(i){case"moveAllTo":s.disabled=this.checkDisabledState(this);break;case"moveAllFrom":s.disabled=this.checkDisabledState(e);break;case"moveFrom":s.disabled=!(e.value&&e.value.length);break;case"moveUp":s.disabled=!(this.value&&this.value.length&&!this.isSelected(this.ulElement.children[0]));break;case"moveDown":s.disabled=!(this.value&&this.value.length&&!this.isSelected(this.ulElement.children[this.ulElement.childElementCount-1]));break;default:s.disabled=!(this.value&&this.value.length)}})}}setCheckboxPosition(){const e=this.list;!this.initLoad&&"Left"===this.selectionSettings.checkboxPosition&&e.classList.remove("e-right"),"Right"===this.selectionSettings.checkboxPosition&&e.classList.add("e-right")}showCheckbox(e){let t=0;const i=this.list.lastElementChild.querySelectorAll("li"),s=this.list.lastElementChild.getElementsByClassName("e-list-item").length;if(e){if(this.ulElement=this.renderItems(this.listData,this.fields),this.mainList=this.ulElement,this.list.removeChild(this.list.getElementsByTagName("ul")[0]),this.list.appendChild(this.ulElement),this.selectionSettings.showSelectAll&&!this.list.getElementsByClassName("e-selectall-parent")[0]){const r=new Xr(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.showSelectAll=!0,this.selectAllText=r.getConstant("selectAllText"),this.unSelectAllText=r.getConstant("unSelectAllText"),this.popupWrapper=this.list,this.checkBoxSelectionModule.checkAllParent=null,this.notify("selectAll",{}),this.checkSelectAll()}}else{for(this.list.getElementsByClassName("e-selectall-parent")[0]&&this.list.removeChild(this.list.getElementsByClassName("e-selectall-parent")[0]);t<s;t++)i[t].classList.contains("e-list-item")&&i[t].removeChild(i[t].getElementsByClassName("e-checkbox-wrapper")[0]),i[t].hasAttribute("aria-selected")&&i[t].removeAttribute("aria-selected");this.mainList=this.ulElement}this.value=[]}isSelected(e){return!m(e)&&(e.classList.contains(li.selected)||null!==e.querySelector(".e-check"))}getSelectTag(){return this.list.getElementsByClassName("e-hidden-select")[0]}getToolElem(){return this.list.parentElement.getElementsByClassName("e-listbox-tool")[0]}formResetHandler(){this.value=this.initialSelectedOptions}getModuleName(){return"listbox"}getPersistData(){return this.addOnPersist(["value"])}getLocaleName(){return"listbox"}destroy(){this.unwireEvents(),"EJS-LISTBOX"===this.element.tagName?this.element.innerHTML="":(this.element.style.display="inline-block",this.toolbarSettings.items.length&&(this.list.parentElement.parentElement.insertBefore(this.list,this.list.parentElement),ye(this.list.nextElementSibling)),this.list.parentElement.insertBefore(this.element,this.list)),super.destroy(),this.itemTemplate&&this.clearTemplate()}onPropertyChanged(e,t){const i=this.toolbarSettings.items.length?this.list.parentElement:this.list;super.onPropertyChanged(e,t),this.setUpdateInitial(["fields","query","dataSource"],e);for(const s of Object.keys(e))switch(s){case"cssClass":t.cssClass&&Y([i],t.cssClass.split(" ")),e.cssClass&&j([i],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?this.list.classList.add("e-rtl"):this.list.classList.remove("e-rtl");break;case"value":Y(this.list.querySelectorAll("."+li.selected),li.selected),this.clearSelection(this.value),this.setSelection();break;case"height":this.setHeight();break;case"enabled":this.setEnable();break;case"allowDragAndDrop":e.allowDragAndDrop?this.initDraggable():Oo(this.ulElement,"sortable").destroy();break;case"allowFiltering":this.allowFiltering?this.setFiltering():(this.list.removeChild(this.list.getElementsByClassName("e-filter-parent")[0]),this.filterParent=null,Y([this.list],"e-filter-list"));break;case"filterBarPlaceholder":this.allowFiltering&&this.filterInput&&ft.setPlaceholder(e.filterBarPlaceholder,this.filterInput);break;case"scope":this.allowDragAndDrop&&(Oo(this.ulElement,"sortable").scope=e.scope),this.toolbarSettings.items.length&&(t.scope&&(Oo(document.querySelector(t.scope),this.getModuleName()).tBListBox=null),e.scope&&(Oo(document.querySelector(e.scope),this.getModuleName()).tBListBox=this));break;case"toolbarSettings":{let r;const o=e.toolbarSettings.position,a=this.getToolElem();o&&(Y([i],["e-right","e-left"]),i.classList.add("e-"+o.toLowerCase()),"Left"===o?i.insertBefore(a,this.list):i.appendChild(a)),e.toolbarSettings.items&&(t.toolbarSettings&&t.toolbarSettings.items.length&&(r=this.list.parentElement,r.parentElement.insertBefore(this.list,r),ye(r)),this.initToolbarAndStyles(),this.wireToolbarEvent());break}case"selectionSettings":{const r=e.selectionSettings.showSelectAll,o=e.selectionSettings.showCheckbox;if(!m(r)){if(this.showSelectAll=r,this.showSelectAll){const a=new Xr(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.checkBoxSelectionModule.checkAllParent=null,this.showSelectAll=!0,this.selectAllText=a.getConstant("selectAllText"),this.unSelectAllText=a.getConstant("selectAllText"),this.popupWrapper=this.list}this.notify("selectAll",{}),this.checkSelectAll()}m(o)||this.showCheckbox(o),this.selectionSettings.showCheckbox&&this.setCheckboxPosition();break}case"dataSource":this.isDataSourceUpdate=!0,this.jsonData=[].slice.call(this.dataSource)}}};vn([A("")],nr.prototype,"cssClass",void 0),vn([A([])],nr.prototype,"value",void 0),vn([A("")],nr.prototype,"height",void 0),vn([A(!1)],nr.prototype,"allowDragAndDrop",void 0),vn([A(1e3)],nr.prototype,"maximumSelectionLength",void 0),vn([A(!1)],nr.prototype,"allowFiltering",void 0),vn([A("")],nr.prototype,"scope",void 0),vn([A(!0)],nr.prototype,"ignoreCase",void 0),vn([A(null)],nr.prototype,"filterBarPlaceholder",void 0),vn([Z()],nr.prototype,"beforeItemRender",void 0),vn([Z()],nr.prototype,"filtering",void 0),vn([Z()],nr.prototype,"select",void 0),vn([Z()],nr.prototype,"change",void 0),vn([Z()],nr.prototype,"beforeDrop",void 0),vn([Z()],nr.prototype,"dragStart",void 0),vn([Z()],nr.prototype,"drag",void 0),vn([Z()],nr.prototype,"drop",void 0),vn([Z()],nr.prototype,"dataBound",void 0),vn([A(null)],nr.prototype,"groupTemplate",void 0),vn([A("Request failed")],nr.prototype,"actionFailureTemplate",void 0),vn([A(1e3)],nr.prototype,"zIndex",void 0),vn([A(!1)],nr.prototype,"ignoreAccent",void 0),vn([Ps({},z2)],nr.prototype,"toolbarSettings",void 0),vn([Ps({},eT)],nr.prototype,"selectionSettings",void 0),nr=PO=vn([ts],nr);const Rw={backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",clearIcon:"e-clear-icon"},tT=["footerTemplate"],iT=["headerTemplate"],j6=["valueTemplate"],LO=["groupTemplate"],Nw=["itemTemplate"],Fw=["noRecordsTemplate"],sT=["actionFailureTemplate"];var $y=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Gy=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)};const PJ=["actionBegin","actionComplete","actionFailure","beforeOpen","blur","change","close","created","dataBound","destroyed","filtering","focus","open","select","valueChange"],LJ=["value"];let _c=W2=class extends Bn{constructor(e,t,i,s){super(),this.ngEle=e,this.srenderer=t,this.viewContainerRef=i,this.injector=s,this.skipFromEvent=!0,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(PJ),this.addTwoWay.call(this,LJ),ys("currentInstance",this,this.viewContainerRef),this.formContext=new Vs,this.formCompContext=new fi}registerOnChange(e){}registerOnTouched(e){}writeValue(e){}setDisabledState(e){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var W2;_c.\u0275fac=function(e){return new(e||_c)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},_c.\u0275cmp=d.Xpm({type:_c,selectors:[["ejs-dropdownlist"]],contentQueries:function(e,t,i){if(1&e&&(d.Suo(i,tT,5),d.Suo(i,iT,5),d.Suo(i,j6,5),d.Suo(i,LO,5),d.Suo(i,Nw,5),d.Suo(i,Fw,5),d.Suo(i,sT,5)),2&e){let s;d.iGM(s=d.CRH())&&(t.footerTemplate=s.first),d.iGM(s=d.CRH())&&(t.headerTemplate=s.first),d.iGM(s=d.CRH())&&(t.valueTemplate=s.first),d.iGM(s=d.CRH())&&(t.groupTemplate=s.first),d.iGM(s=d.CRH())&&(t.itemTemplate=s.first),d.iGM(s=d.CRH())&&(t.noRecordsTemplate=s.first),d.iGM(s=d.CRH())&&(t.actionFailureTemplate=s.first)}},inputs:{actionFailureTemplate:"actionFailureTemplate",allowFiltering:"allowFiltering",cssClass:"cssClass",dataSource:"dataSource",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enabled:"enabled",fields:"fields",filterBarPlaceholder:"filterBarPlaceholder",filterType:"filterType",floatLabelType:"floatLabelType",footerTemplate:"footerTemplate",groupTemplate:"groupTemplate",headerTemplate:"headerTemplate",htmlAttributes:"htmlAttributes",ignoreAccent:"ignoreAccent",ignoreCase:"ignoreCase",index:"index",itemTemplate:"itemTemplate",locale:"locale",noRecordsTemplate:"noRecordsTemplate",placeholder:"placeholder",popupHeight:"popupHeight",popupWidth:"popupWidth",query:"query",readonly:"readonly",showClearButton:"showClearButton",sortOrder:"sortOrder",text:"text",value:"value",valueTemplate:"valueTemplate",width:"width",zIndex:"zIndex"},outputs:{actionBegin:"actionBegin",actionComplete:"actionComplete",actionFailure:"actionFailure",beforeOpen:"beforeOpen",blur:"blur",change:"change",close:"close",created:"created",dataBound:"dataBound",destroyed:"destroyed",filtering:"filtering",focus:"focus",open:"open",select:"select",valueChange:"valueChange"},features:[d._Bn([{provide:gr,useExisting:(0,d.Gpc)(()=>W2),multi:!0}]),d.qOj],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),_c.ctorParameters=()=>[{type:d.SBq},{type:d.Qsj},{type:d.s_b},{type:d.zs3}],_c.propDecorators={footerTemplate:[{type:d.aQ5,args:["footerTemplate"]}],headerTemplate:[{type:d.aQ5,args:["headerTemplate"]}],valueTemplate:[{type:d.aQ5,args:["valueTemplate"]}],groupTemplate:[{type:d.aQ5,args:["groupTemplate"]}],itemTemplate:[{type:d.aQ5,args:["itemTemplate"]}],noRecordsTemplate:[{type:d.aQ5,args:["noRecordsTemplate"]}],actionFailureTemplate:[{type:d.aQ5,args:["actionFailureTemplate"]}]},$y([Ni(),Gy("design:type",Object)],_c.prototype,"footerTemplate",void 0),$y([Ni(),Gy("design:type",Object)],_c.prototype,"headerTemplate",void 0),$y([Ni(),Gy("design:type",Object)],_c.prototype,"valueTemplate",void 0),$y([Ni(),Gy("design:type",Object)],_c.prototype,"groupTemplate",void 0),$y([Ni(),Gy("design:type",Object)],_c.prototype,"itemTemplate",void 0),$y([Ni("No records found"),Gy("design:type",Object)],_c.prototype,"noRecordsTemplate",void 0),$y([Ni("Request failed"),Gy("design:type",Object)],_c.prototype,"actionFailureTemplate",void 0),_c=W2=$y([hn([fi,Vs]),Gy("design:paramtypes",[d.SBq,d.Qsj,d.s_b,d.zs3])],_c);var CC=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},EC=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)};const RJ=["actionBegin","actionComplete","actionFailure","beforeOpen","blur","change","close","created","customValueSpecifier","dataBound","destroyed","filtering","focus","open","select","valueChange"],NJ=["value"];let Ic=q2=class extends ir{constructor(e,t,i,s){super(),this.ngEle=e,this.srenderer=t,this.viewContainerRef=i,this.injector=s,this.skipFromEvent=!0,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(RJ),this.addTwoWay.call(this,NJ),ys("currentInstance",this,this.viewContainerRef),this.formContext=new Vs,this.formCompContext=new fi}registerOnChange(e){}registerOnTouched(e){}writeValue(e){}setDisabledState(e){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var q2;Ic.\u0275fac=function(e){return new(e||Ic)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},Ic.\u0275cmp=d.Xpm({type:Ic,selectors:[["ejs-combobox"]],contentQueries:function(e,t,i){if(1&e&&(d.Suo(i,tT,5),d.Suo(i,iT,5),d.Suo(i,LO,5),d.Suo(i,Nw,5),d.Suo(i,Fw,5),d.Suo(i,sT,5)),2&e){let s;d.iGM(s=d.CRH())&&(t.footerTemplate=s.first),d.iGM(s=d.CRH())&&(t.headerTemplate=s.first),d.iGM(s=d.CRH())&&(t.groupTemplate=s.first),d.iGM(s=d.CRH())&&(t.itemTemplate=s.first),d.iGM(s=d.CRH())&&(t.noRecordsTemplate=s.first),d.iGM(s=d.CRH())&&(t.actionFailureTemplate=s.first)}},inputs:{actionFailureTemplate:"actionFailureTemplate",allowCustom:"allowCustom",allowFiltering:"allowFiltering",autofill:"autofill",cssClass:"cssClass",dataSource:"dataSource",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enabled:"enabled",fields:"fields",filterBarPlaceholder:"filterBarPlaceholder",filterType:"filterType",floatLabelType:"floatLabelType",footerTemplate:"footerTemplate",groupTemplate:"groupTemplate",headerTemplate:"headerTemplate",htmlAttributes:"htmlAttributes",ignoreAccent:"ignoreAccent",ignoreCase:"ignoreCase",index:"index",itemTemplate:"itemTemplate",locale:"locale",noRecordsTemplate:"noRecordsTemplate",placeholder:"placeholder",popupHeight:"popupHeight",popupWidth:"popupWidth",query:"query",readonly:"readonly",showClearButton:"showClearButton",sortOrder:"sortOrder",text:"text",value:"value",valueTemplate:"valueTemplate",width:"width",zIndex:"zIndex"},outputs:{actionBegin:"actionBegin",actionComplete:"actionComplete",actionFailure:"actionFailure",beforeOpen:"beforeOpen",blur:"blur",change:"change",close:"close",created:"created",customValueSpecifier:"customValueSpecifier",dataBound:"dataBound",destroyed:"destroyed",filtering:"filtering",focus:"focus",open:"open",select:"select",valueChange:"valueChange"},features:[d._Bn([{provide:gr,useExisting:(0,d.Gpc)(()=>q2),multi:!0}]),d.qOj],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),Ic.ctorParameters=()=>[{type:d.SBq},{type:d.Qsj},{type:d.s_b},{type:d.zs3}],Ic.propDecorators={footerTemplate:[{type:d.aQ5,args:["footerTemplate"]}],headerTemplate:[{type:d.aQ5,args:["headerTemplate"]}],groupTemplate:[{type:d.aQ5,args:["groupTemplate"]}],itemTemplate:[{type:d.aQ5,args:["itemTemplate"]}],noRecordsTemplate:[{type:d.aQ5,args:["noRecordsTemplate"]}],actionFailureTemplate:[{type:d.aQ5,args:["actionFailureTemplate"]}]},CC([Ni(),EC("design:type",Object)],Ic.prototype,"footerTemplate",void 0),CC([Ni(),EC("design:type",Object)],Ic.prototype,"headerTemplate",void 0),CC([Ni(),EC("design:type",Object)],Ic.prototype,"groupTemplate",void 0),CC([Ni(),EC("design:type",Object)],Ic.prototype,"itemTemplate",void 0),CC([Ni("No records found"),EC("design:type",Object)],Ic.prototype,"noRecordsTemplate",void 0),CC([Ni("Request failed"),EC("design:type",Object)],Ic.prototype,"actionFailureTemplate",void 0),Ic=q2=CC([hn([fi,Vs]),EC("design:paramtypes",[d.SBq,d.Qsj,d.s_b,d.zs3])],Ic);let $2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[ti]]}),n})();var wC=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},SC=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)};const FJ=["actionBegin","actionComplete","actionFailure","beforeOpen","blur","change","close","created","customValueSpecifier","dataBound","destroyed","filtering","focus","open","select","valueChange"],BJ=["value"];let ih=G2=class extends va{constructor(e,t,i,s){super(),this.ngEle=e,this.srenderer=t,this.viewContainerRef=i,this.injector=s,this.skipFromEvent=!0,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(FJ),this.addTwoWay.call(this,BJ),ys("currentInstance",this,this.viewContainerRef),this.formContext=new Vs,this.formCompContext=new fi}registerOnChange(e){}registerOnTouched(e){}writeValue(e){}setDisabledState(e){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var G2;ih.\u0275fac=function(e){return new(e||ih)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},ih.\u0275cmp=d.Xpm({type:ih,selectors:[["ejs-autocomplete"]],contentQueries:function(e,t,i){if(1&e&&(d.Suo(i,tT,5),d.Suo(i,iT,5),d.Suo(i,LO,5),d.Suo(i,Nw,5),d.Suo(i,Fw,5),d.Suo(i,sT,5)),2&e){let s;d.iGM(s=d.CRH())&&(t.footerTemplate=s.first),d.iGM(s=d.CRH())&&(t.headerTemplate=s.first),d.iGM(s=d.CRH())&&(t.groupTemplate=s.first),d.iGM(s=d.CRH())&&(t.itemTemplate=s.first),d.iGM(s=d.CRH())&&(t.noRecordsTemplate=s.first),d.iGM(s=d.CRH())&&(t.actionFailureTemplate=s.first)}},inputs:{actionFailureTemplate:"actionFailureTemplate",allowCustom:"allowCustom",allowFiltering:"allowFiltering",autofill:"autofill",cssClass:"cssClass",dataSource:"dataSource",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enabled:"enabled",fields:"fields",filterBarPlaceholder:"filterBarPlaceholder",filterType:"filterType",floatLabelType:"floatLabelType",footerTemplate:"footerTemplate",groupTemplate:"groupTemplate",headerTemplate:"headerTemplate",highlight:"highlight",htmlAttributes:"htmlAttributes",ignoreAccent:"ignoreAccent",ignoreCase:"ignoreCase",index:"index",itemTemplate:"itemTemplate",locale:"locale",minLength:"minLength",noRecordsTemplate:"noRecordsTemplate",placeholder:"placeholder",popupHeight:"popupHeight",popupWidth:"popupWidth",query:"query",readonly:"readonly",showClearButton:"showClearButton",showPopupButton:"showPopupButton",sortOrder:"sortOrder",suggestionCount:"suggestionCount",text:"text",value:"value",valueTemplate:"valueTemplate",width:"width",zIndex:"zIndex"},outputs:{actionBegin:"actionBegin",actionComplete:"actionComplete",actionFailure:"actionFailure",beforeOpen:"beforeOpen",blur:"blur",change:"change",close:"close",created:"created",customValueSpecifier:"customValueSpecifier",dataBound:"dataBound",destroyed:"destroyed",filtering:"filtering",focus:"focus",open:"open",select:"select",valueChange:"valueChange"},features:[d._Bn([{provide:gr,useExisting:(0,d.Gpc)(()=>G2),multi:!0}]),d.qOj],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),ih.ctorParameters=()=>[{type:d.SBq},{type:d.Qsj},{type:d.s_b},{type:d.zs3}],ih.propDecorators={footerTemplate:[{type:d.aQ5,args:["footerTemplate"]}],headerTemplate:[{type:d.aQ5,args:["headerTemplate"]}],groupTemplate:[{type:d.aQ5,args:["groupTemplate"]}],itemTemplate:[{type:d.aQ5,args:["itemTemplate"]}],noRecordsTemplate:[{type:d.aQ5,args:["noRecordsTemplate"]}],actionFailureTemplate:[{type:d.aQ5,args:["actionFailureTemplate"]}]},wC([Ni(),SC("design:type",Object)],ih.prototype,"footerTemplate",void 0),wC([Ni(),SC("design:type",Object)],ih.prototype,"headerTemplate",void 0),wC([Ni(),SC("design:type",Object)],ih.prototype,"groupTemplate",void 0),wC([Ni(),SC("design:type",Object)],ih.prototype,"itemTemplate",void 0),wC([Ni("No records found"),SC("design:type",Object)],ih.prototype,"noRecordsTemplate",void 0),wC([Ni("Request failed"),SC("design:type",Object)],ih.prototype,"actionFailureTemplate",void 0),ih=G2=wC([hn([fi,Vs]),SC("design:paramtypes",[d.SBq,d.Qsj,d.s_b,d.zs3])],ih);var Yy=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Ky=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)};const VJ=["actionBegin","actionComplete","actionFailure","beforeOpen","beforeSelectAll","blur","change","chipSelection","close","created","customValueSelection","dataBound","destroyed","filtering","focus","open","removed","removing","select","selectedAll","tagging","valueChange"],HJ=["value"];let xc=Y2=class extends ci{constructor(e,t,i,s){super(),this.ngEle=e,this.srenderer=t,this.viewContainerRef=i,this.injector=s,this.skipFromEvent=!0,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[];try{let r=this.injector.get("DropDownsCheckBoxSelection");-1===this.injectedModules.indexOf(r)&&this.injectedModules.push(r)}catch(r){}this.registerEvents(VJ),this.addTwoWay.call(this,HJ),ys("currentInstance",this,this.viewContainerRef),this.formContext=new Vs,this.formCompContext=new fi}registerOnChange(e){}registerOnTouched(e){}writeValue(e){}setDisabledState(e){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var Y2;xc.\u0275fac=function(e){return new(e||xc)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},xc.\u0275cmp=d.Xpm({type:xc,selectors:[["ejs-multiselect"]],contentQueries:function(e,t,i){if(1&e&&(d.Suo(i,tT,5),d.Suo(i,iT,5),d.Suo(i,j6,5),d.Suo(i,Nw,5),d.Suo(i,LO,5),d.Suo(i,Fw,5),d.Suo(i,sT,5)),2&e){let s;d.iGM(s=d.CRH())&&(t.footerTemplate=s.first),d.iGM(s=d.CRH())&&(t.headerTemplate=s.first),d.iGM(s=d.CRH())&&(t.valueTemplate=s.first),d.iGM(s=d.CRH())&&(t.itemTemplate=s.first),d.iGM(s=d.CRH())&&(t.groupTemplate=s.first),d.iGM(s=d.CRH())&&(t.noRecordsTemplate=s.first),d.iGM(s=d.CRH())&&(t.actionFailureTemplate=s.first)}},inputs:{actionFailureTemplate:"actionFailureTemplate",addTagOnBlur:"addTagOnBlur",allowCustomValue:"allowCustomValue",allowFiltering:"allowFiltering",changeOnBlur:"changeOnBlur",closePopupOnSelect:"closePopupOnSelect",cssClass:"cssClass",dataSource:"dataSource",delimiterChar:"delimiterChar",enableGroupCheckBox:"enableGroupCheckBox",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enableSelectionOrder:"enableSelectionOrder",enabled:"enabled",fields:"fields",filterBarPlaceholder:"filterBarPlaceholder",filterType:"filterType",floatLabelType:"floatLabelType",footerTemplate:"footerTemplate",groupTemplate:"groupTemplate",headerTemplate:"headerTemplate",hideSelectedItem:"hideSelectedItem",htmlAttributes:"htmlAttributes",ignoreAccent:"ignoreAccent",ignoreCase:"ignoreCase",itemTemplate:"itemTemplate",locale:"locale",maximumSelectionLength:"maximumSelectionLength",mode:"mode",noRecordsTemplate:"noRecordsTemplate",openOnClick:"openOnClick",placeholder:"placeholder",popupHeight:"popupHeight",popupWidth:"popupWidth",query:"query",readonly:"readonly",selectAllText:"selectAllText",showClearButton:"showClearButton",showDropDownIcon:"showDropDownIcon",showSelectAll:"showSelectAll",sortOrder:"sortOrder",text:"text",unSelectAllText:"unSelectAllText",value:"value",valueTemplate:"valueTemplate",width:"width",zIndex:"zIndex"},outputs:{actionBegin:"actionBegin",actionComplete:"actionComplete",actionFailure:"actionFailure",beforeOpen:"beforeOpen",beforeSelectAll:"beforeSelectAll",blur:"blur",change:"change",chipSelection:"chipSelection",close:"close",created:"created",customValueSelection:"customValueSelection",dataBound:"dataBound",destroyed:"destroyed",filtering:"filtering",focus:"focus",open:"open",removed:"removed",removing:"removing",select:"select",selectedAll:"selectedAll",tagging:"tagging",valueChange:"valueChange"},features:[d._Bn([{provide:gr,useExisting:(0,d.Gpc)(()=>Y2),multi:!0}]),d.qOj],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),xc.ctorParameters=()=>[{type:d.SBq},{type:d.Qsj},{type:d.s_b},{type:d.zs3}],xc.propDecorators={footerTemplate:[{type:d.aQ5,args:["footerTemplate"]}],headerTemplate:[{type:d.aQ5,args:["headerTemplate"]}],valueTemplate:[{type:d.aQ5,args:["valueTemplate"]}],itemTemplate:[{type:d.aQ5,args:["itemTemplate"]}],groupTemplate:[{type:d.aQ5,args:["groupTemplate"]}],noRecordsTemplate:[{type:d.aQ5,args:["noRecordsTemplate"]}],actionFailureTemplate:[{type:d.aQ5,args:["actionFailureTemplate"]}]},Yy([Ni(),Ky("design:type",Object)],xc.prototype,"footerTemplate",void 0),Yy([Ni(),Ky("design:type",Object)],xc.prototype,"headerTemplate",void 0),Yy([Ni(),Ky("design:type",Object)],xc.prototype,"valueTemplate",void 0),Yy([Ni(),Ky("design:type",Object)],xc.prototype,"itemTemplate",void 0),Yy([Ni(),Ky("design:type",Object)],xc.prototype,"groupTemplate",void 0),Yy([Ni("No records found"),Ky("design:type",Object)],xc.prototype,"noRecordsTemplate",void 0),Yy([Ni("Request failed"),Ky("design:type",Object)],xc.prototype,"actionFailureTemplate",void 0),xc=Y2=Yy([hn([fi,Vs]),Ky("design:paramtypes",[d.SBq,d.Qsj,d.s_b,d.zs3])],xc);var K2=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Z2=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)};const UJ=["focus","blur","actionBegin","actionComplete","actionFailure","beforeDrop","beforeItemRender","change","created","dataBound","destroyed","drag","dragStart","drop","filtering","select","valueChange"],zJ=["value"];let Zp=X2=class extends nr{constructor(e,t,i,s){super(),this.ngEle=e,this.srenderer=t,this.viewContainerRef=i,this.injector=s,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[];try{let r=this.injector.get("DropDownsCheckBoxSelection");-1===this.injectedModules.indexOf(r)&&this.injectedModules.push(r)}catch(r){}this.registerEvents(UJ),this.addTwoWay.call(this,zJ),ys("currentInstance",this,this.viewContainerRef),this.formContext=new Vs,this.formCompContext=new fi}registerOnChange(e){}registerOnTouched(e){}writeValue(e){}setDisabledState(e){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var X2;Zp.\u0275fac=function(e){return new(e||Zp)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},Zp.\u0275cmp=d.Xpm({type:Zp,selectors:[["ejs-listbox"]],contentQueries:function(e,t,i){if(1&e&&(d.Suo(i,Nw,5),d.Suo(i,Fw,5)),2&e){let s;d.iGM(s=d.CRH())&&(t.itemTemplate=s.first),d.iGM(s=d.CRH())&&(t.noRecordsTemplate=s.first)}},inputs:{actionFailureTemplate:"actionFailureTemplate",allowDragAndDrop:"allowDragAndDrop",allowFiltering:"allowFiltering",cssClass:"cssClass",dataSource:"dataSource",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enabled:"enabled",fields:"fields",filterBarPlaceholder:"filterBarPlaceholder",filterType:"filterType",groupTemplate:"groupTemplate",height:"height",ignoreAccent:"ignoreAccent",ignoreCase:"ignoreCase",itemTemplate:"itemTemplate",locale:"locale",maximumSelectionLength:"maximumSelectionLength",noRecordsTemplate:"noRecordsTemplate",query:"query",scope:"scope",selectionSettings:"selectionSettings",sortOrder:"sortOrder",toolbarSettings:"toolbarSettings",value:"value",zIndex:"zIndex"},outputs:{focus:"focus",blur:"blur",actionBegin:"actionBegin",actionComplete:"actionComplete",actionFailure:"actionFailure",beforeDrop:"beforeDrop",beforeItemRender:"beforeItemRender",change:"change",created:"created",dataBound:"dataBound",destroyed:"destroyed",drag:"drag",dragStart:"dragStart",drop:"drop",filtering:"filtering",select:"select",valueChange:"valueChange"},features:[d._Bn([{provide:gr,useExisting:(0,d.Gpc)(()=>X2),multi:!0}]),d.qOj],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),Zp.ctorParameters=()=>[{type:d.SBq},{type:d.Qsj},{type:d.s_b},{type:d.zs3}],Zp.propDecorators={itemTemplate:[{type:d.aQ5,args:["itemTemplate"]}],noRecordsTemplate:[{type:d.aQ5,args:["noRecordsTemplate"]}]},K2([Ni(),Z2("design:type",Object)],Zp.prototype,"itemTemplate",void 0),K2([Ni("No records found"),Z2("design:type",Object)],Zp.prototype,"noRecordsTemplate",void 0),Zp=X2=K2([hn([fi,Vs]),Z2("design:paramtypes",[d.SBq,d.Qsj,d.s_b,d.zs3])],Zp);var Bw=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Vw=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)};const WJ=["actionFailure","beforeOpen","blur","change","close","created","dataBound","destroyed","filtering","focus","keyPress","open","select","valueChange"],qJ=["value"];let Hh=Q2=class extends Ui{constructor(e,t,i,s){super(),this.ngEle=e,this.srenderer=t,this.viewContainerRef=i,this.injector=s,this.skipFromEvent=!0,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(WJ),this.addTwoWay.call(this,qJ),ys("currentInstance",this,this.viewContainerRef),this.formContext=new Vs,this.formCompContext=new fi}registerOnChange(e){}registerOnTouched(e){}writeValue(e){}setDisabledState(e){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var Q2;Hh.\u0275fac=function(e){return new(e||Hh)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},Hh.\u0275cmp=d.Xpm({type:Hh,selectors:[["ejs-dropdowntree"]],contentQueries:function(e,t,i){if(1&e&&(d.Suo(i,tT,5),d.Suo(i,iT,5),d.Suo(i,Nw,5),d.Suo(i,Fw,5),d.Suo(i,sT,5)),2&e){let s;d.iGM(s=d.CRH())&&(t.footerTemplate=s.first),d.iGM(s=d.CRH())&&(t.headerTemplate=s.first),d.iGM(s=d.CRH())&&(t.itemTemplate=s.first),d.iGM(s=d.CRH())&&(t.noRecordsTemplate=s.first),d.iGM(s=d.CRH())&&(t.actionFailureTemplate=s.first)}},inputs:{actionFailureTemplate:"actionFailureTemplate",allowFiltering:"allowFiltering",allowMultiSelection:"allowMultiSelection",changeOnBlur:"changeOnBlur",cssClass:"cssClass",customTemplate:"customTemplate",delimiterChar:"delimiterChar",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enabled:"enabled",fields:"fields",filterBarPlaceholder:"filterBarPlaceholder",filterType:"filterType",floatLabelType:"floatLabelType",footerTemplate:"footerTemplate",headerTemplate:"headerTemplate",htmlAttributes:"htmlAttributes",ignoreAccent:"ignoreAccent",ignoreCase:"ignoreCase",itemTemplate:"itemTemplate",locale:"locale",mode:"mode",noRecordsTemplate:"noRecordsTemplate",placeholder:"placeholder",popupHeight:"popupHeight",popupWidth:"popupWidth",readonly:"readonly",selectAllText:"selectAllText",showCheckBox:"showCheckBox",showClearButton:"showClearButton",showDropDownIcon:"showDropDownIcon",showSelectAll:"showSelectAll",sortOrder:"sortOrder",text:"text",treeSettings:"treeSettings",unSelectAllText:"unSelectAllText",value:"value",width:"width",wrapText:"wrapText",zIndex:"zIndex"},outputs:{actionFailure:"actionFailure",beforeOpen:"beforeOpen",blur:"blur",change:"change",close:"close",created:"created",dataBound:"dataBound",destroyed:"destroyed",filtering:"filtering",focus:"focus",keyPress:"keyPress",open:"open",select:"select",valueChange:"valueChange"},features:[d._Bn([{provide:gr,useExisting:(0,d.Gpc)(()=>Q2),multi:!0}]),d.qOj],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),Hh.ctorParameters=()=>[{type:d.SBq},{type:d.Qsj},{type:d.s_b},{type:d.zs3}],Hh.propDecorators={footerTemplate:[{type:d.aQ5,args:["footerTemplate"]}],headerTemplate:[{type:d.aQ5,args:["headerTemplate"]}],itemTemplate:[{type:d.aQ5,args:["itemTemplate"]}],noRecordsTemplate:[{type:d.aQ5,args:["noRecordsTemplate"]}],actionFailureTemplate:[{type:d.aQ5,args:["actionFailureTemplate"]}]},Bw([Ni(),Vw("design:type",Object)],Hh.prototype,"footerTemplate",void 0),Bw([Ni(),Vw("design:type",Object)],Hh.prototype,"headerTemplate",void 0),Bw([Ni(),Vw("design:type",Object)],Hh.prototype,"itemTemplate",void 0),Bw([Ni("No records found"),Vw("design:type",Object)],Hh.prototype,"noRecordsTemplate",void 0),Bw([Ni("Request failed"),Vw("design:type",Object)],Hh.prototype,"actionFailureTemplate",void 0),Hh=Q2=Bw([hn([fi,Vs]),Vw("design:paramtypes",[d.SBq,d.Qsj,d.s_b,d.zs3])],Hh);const $J=["ejs-button",""],GJ=["*"];var KJ=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)};const ZJ=["created"],XJ=[];let RO=(()=>{let n=class extends Ip{constructor(t,i,s,r){super(),this.ngEle=t,this.srenderer=i,this.viewContainerRef=s,this.injector=r,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(ZJ),this.addTwoWay.call(this,XJ),ys("currentInstance",this,this.viewContainerRef),this.containerContext=new fi}ngOnInit(){this.containerContext.ngOnInit(this)}ngAfterViewInit(){this.containerContext.ngAfterViewInit(this)}ngOnDestroy(){this.containerContext.ngOnDestroy(this)}ngAfterContentChecked(){this.containerContext.ngAfterContentChecked(this)}};return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},n.\u0275cmp=d.Xpm({type:n,selectors:[["","ejs-button",""]],inputs:{content:"content",cssClass:"cssClass",disabled:"disabled",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableRtl:"enableRtl",iconCss:"iconCss",iconPosition:"iconPosition",isPrimary:"isPrimary",isToggle:"isToggle",locale:"locale"},outputs:{created:"created"},features:[d.qOj],attrs:$J,ngContentSelectors:GJ,decls:1,vars:0,template:function(t,i){1&t&&(d.F$t(),d.Hsn(0))},encapsulation:2,changeDetection:0}),n=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r}([hn([fi]),KJ("design:paramtypes",[d.SBq,d.Qsj,d.s_b,d.zs3])],n),n})(),J2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[ti]]}),n})();const eee=["focus","blur","change","created","checkedChange","indeterminateChange"],tee=["checked","indeterminate"];let _C=eV=class extends Ra{constructor(e,t,i,s){super(),this.ngEle=e,this.srenderer=t,this.viewContainerRef=i,this.injector=s,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(eee),this.addTwoWay.call(this,tee),ys("currentInstance",this,this.viewContainerRef),this.formContext=new Vs,this.formCompContext=new fi}registerOnChange(e){}registerOnTouched(e){}writeValue(e){}setDisabledState(e){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var eV;_C.\u0275fac=function(e){return new(e||_C)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},_C.\u0275cmp=d.Xpm({type:_C,selectors:[["ejs-checkbox"]],inputs:{checked:"checked",cssClass:"cssClass",disabled:"disabled",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableRtl:"enableRtl",htmlAttributes:"htmlAttributes",indeterminate:"indeterminate",label:"label",labelPosition:"labelPosition",locale:"locale",name:"name",value:"value"},outputs:{focus:"focus",blur:"blur",change:"change",created:"created",checkedChange:"checkedChange",indeterminateChange:"indeterminateChange"},features:[d._Bn([{provide:gr,useExisting:(0,d.Gpc)(()=>eV),multi:!0}]),d.qOj],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),_C.ctorParameters=()=>[{type:d.SBq},{type:d.Qsj},{type:d.s_b},{type:d.zs3}],_C=eV=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r}([hn([fi,Vs]),function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",e)}(0,[d.SBq,d.Qsj,d.s_b,d.zs3])],_C);const nee=["focus","blur","change","created","valueChange"],ree=["value"];let Zy=tV=class extends Na{constructor(e,t,i,s){super(),this.ngEle=e,this.srenderer=t,this.viewContainerRef=i,this.injector=s,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(nee),this.addTwoWay.call(this,ree),ys("currentInstance",this,this.viewContainerRef),this.formContext=new Vs,this.formCompContext=new fi}registerOnChange(e){}registerOnTouched(e){}writeValue(e){}setDisabledState(e){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var tV;Zy.\u0275fac=function(e){return new(e||Zy)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},Zy.\u0275cmp=d.Xpm({type:Zy,selectors:[["ejs-radiobutton"]],inputs:{checked:"checked",cssClass:"cssClass",disabled:"disabled",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableRtl:"enableRtl",htmlAttributes:"htmlAttributes",label:"label",labelPosition:"labelPosition",locale:"locale",name:"name",value:"value"},outputs:{focus:"focus",blur:"blur",change:"change",created:"created",valueChange:"valueChange"},features:[d._Bn([{provide:gr,useExisting:(0,d.Gpc)(()=>tV),multi:!0}]),d.qOj],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),Zy.ctorParameters=()=>[{type:d.SBq},{type:d.Qsj},{type:d.s_b},{type:d.zs3}],Zy=tV=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r}([hn([fi,Vs]),function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",e)}(0,[d.SBq,d.Qsj,d.s_b,d.zs3])],Zy);let iV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[ti]]}),n})();const lee=["focus","blur","change","created","checkedChange"],cee=["checked"];let IC=sV=class extends hc{constructor(e,t,i,s){super(),this.ngEle=e,this.srenderer=t,this.viewContainerRef=i,this.injector=s,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(lee),this.addTwoWay.call(this,cee),ys("currentInstance",this,this.viewContainerRef),this.formContext=new Vs,this.formCompContext=new fi}registerOnChange(e){}registerOnTouched(e){}writeValue(e){}setDisabledState(e){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var sV;IC.\u0275fac=function(e){return new(e||IC)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},IC.\u0275cmp=d.Xpm({type:IC,selectors:[["ejs-switch"]],inputs:{checked:"checked",cssClass:"cssClass",disabled:"disabled",enablePersistence:"enablePersistence",enableRtl:"enableRtl",locale:"locale",name:"name",offLabel:"offLabel",onLabel:"onLabel",value:"value"},outputs:{focus:"focus",blur:"blur",change:"change",created:"created",checkedChange:"checkedChange"},features:[d._Bn([{provide:gr,useExisting:(0,d.Gpc)(()=>sV),multi:!0}]),d.qOj],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),IC.ctorParameters=()=>[{type:d.SBq},{type:d.Qsj},{type:d.s_b},{type:d.zs3}],IC=sV=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r}([hn([fi,Vs]),function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",e)}(0,[d.SBq,d.Qsj,d.s_b,d.zs3])],IC);let hee=["avatarIconCss","avatarText","cssClass","enabled","leadingIconCss","leadingIconUrl","text","trailingIconCss","trailingIconUrl","value"],uee=[],dee=(()=>{class n extends xu{constructor(t){super(),this.viewContainerRef=t,ys("currentInstance",this,this.viewContainerRef),this.registerEvents(uee),this.directivePropList=hee}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b))},n.\u0275dir=d.lG2({type:n,selectors:[["e-chip"]],inputs:{avatarIconCss:"avatarIconCss",avatarText:"avatarText",cssClass:"cssClass",enabled:"enabled",leadingIconCss:"leadingIconCss",leadingIconUrl:"leadingIconUrl",text:"text",trailingIconCss:"trailingIconCss",trailingIconUrl:"trailingIconUrl",value:"value"},features:[d.qOj]}),n})(),pee=(()=>{class n extends Tu{constructor(){super("chips")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["e-chips"]],contentQueries:function(t,i,s){if(1&t&&d.Suo(s,dee,4),2&t){let r;d.iGM(r=d.CRH())&&(i.children=r)}},features:[d.qOj]}),n})();const gee=["beforeClick","click","created","delete","deleted"],yee=[""];let K6=(()=>{let n=class extends Hr{constructor(t,i,s,r){super(),this.ngEle=t,this.srenderer=i,this.viewContainerRef=s,this.injector=r,this.tags=["chips"],this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(gee),this.addTwoWay.call(this,yee),ys("currentInstance",this,this.viewContainerRef),this.context=new fi}ngOnInit(){this.context.ngOnInit(this)}ngAfterViewInit(){this.context.ngAfterViewInit(this)}ngOnDestroy(){this.context.ngOnDestroy(this)}ngAfterContentChecked(){this.tagObjects[0].instance=this.childChips,this.context.ngAfterContentChecked(this)}};return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ejs-chiplist"]],contentQueries:function(t,i,s){if(1&t&&d.Suo(s,pee,5),2&t){let r;d.iGM(r=d.CRH())&&(i.childChips=r.first)}},inputs:{avatarIconCss:"avatarIconCss",avatarText:"avatarText",chips:"chips",cssClass:"cssClass",enableDelete:"enableDelete",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enabled:"enabled",leadingIconCss:"leadingIconCss",leadingIconUrl:"leadingIconUrl",locale:"locale",selectedChips:"selectedChips",selection:"selection",text:"text",trailingIconCss:"trailingIconCss",trailingIconUrl:"trailingIconUrl"},outputs:{beforeClick:"beforeClick",click:"click",created:"created",delete:"delete",deleted:"deleted"},features:[d.qOj],decls:0,vars:0,template:function(t,i){},encapsulation:2,changeDetection:0}),n})();function vee(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"table"),d.TgZ(1,"tr"),d.TgZ(2,"td"),d._UZ(3,"ejs-combobox",null,4),d.qZA(),d.TgZ(5,"td"),d.TgZ(6,"button",5),d.NdJ("click",function(){d.CHM(t);const s=d.MAs(4);return d.oxw().save(s.value)}),d._uU(7,"Save"),d.qZA(),d.qZA(),d.qZA(),d.qZA()}}function bee(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"table"),d.TgZ(1,"tr"),d.TgZ(2,"td"),d.TgZ(3,"button",6),d.NdJ("click",function(){return d.CHM(t),d.oxw().delete()}),d._uU(4,"Delete"),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&n){const t=d.oxw();d.xp6(3),d.Q6J("disabled",!t.user)}}K6=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r}([hn([fi]),function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",e)}(0,[d.SBq,d.Qsj,d.s_b,d.zs3])],K6);let NO=(()=>{class n{constructor(t){this.fireService=t,this.showSpinner=new d.vpe,this.hideSpinner=new d.vpe}get user(){return this.fireService.user}get poster(){var t,i,s;return(null===(t=this.details)||void 0===t?void 0:t.Poster)&&"N/A"!=(null===(i=this.details)||void 0===i?void 0:i.Poster)?null===(s=this.details)||void 0===s?void 0:s.Poster:"assets/images/noImage.png"}ngOnInit(){}hide(){var t;null===(t=this.dialog)||void 0===t||t.hide()}show(t){var i;this.details=t,null===(i=this.dialog)||void 0===i||i.show()}save(t){var i=this;return(0,Ne.Z)(function*(){var s;if(i.details){const r={Poster:i.details.Poster,Title:i.details.Title,Type:i.details.Type,Year:i.details.Year,imdbID:i.details.imdbID,folder:t.toString()};i.showSpinner.emit(),yield i.fireService.saveMediaItem(r),i.hideSpinner.emit(),null===(s=i.dialog)||void 0===s||s.hide()}})()}delete(){var t=this;return(0,Ne.Z)(function*(){var i;t.details&&(t.showSpinner.emit(),yield t.fireService.delete(t.details),t.hideSpinner.emit(),null===(i=t.dialog)||void 0===i||i.hide())})()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(KB))},n.\u0275cmp=d.Xpm({type:n,selectors:[["media-item-dialog"]],viewQuery:function(t,i){if(1&t&&d.Gf(t4,5),2&t){let s;d.iGM(s=d.CRH())&&(i.dialog=s.first)}},outputs:{showSpinner:"showSpinner",hideSpinner:"hideSpinner"},decls:48,vars:12,consts:[["showCloseIcon","true","width","400px","zIndex","1100",3,"visible","isModal"],["height","1200px"],[3,"src"],[4,"ngIf"],["folder",""],["ejs-button","","isPrimary","true",3,"click"],["ejs-button","","isPrimary","true",3,"disabled","click"]],template:function(t,i){1&t&&(d.TgZ(0,"ejs-dialog",0),d.TgZ(1,"div",1),d._UZ(2,"img",2),d.TgZ(3,"table"),d.TgZ(4,"tr"),d.TgZ(5,"td"),d.TgZ(6,"b"),d._uU(7,"Title:"),d.qZA(),d.qZA(),d.TgZ(8,"td"),d._uU(9),d.qZA(),d.qZA(),d.TgZ(10,"tr"),d.TgZ(11,"td"),d.TgZ(12,"b"),d._uU(13,"Released:"),d.qZA(),d.qZA(),d.TgZ(14,"td"),d._uU(15),d.qZA(),d.qZA(),d.TgZ(16,"tr"),d.TgZ(17,"td"),d.TgZ(18,"b"),d._uU(19,"Writer:"),d.qZA(),d.qZA(),d.TgZ(20,"td"),d._uU(21),d.qZA(),d.qZA(),d.TgZ(22,"tr"),d.TgZ(23,"td"),d.TgZ(24,"b"),d._uU(25,"Director:"),d.qZA(),d.qZA(),d.TgZ(26,"td"),d._uU(27),d.qZA(),d.qZA(),d.TgZ(28,"tr"),d.TgZ(29,"td"),d.TgZ(30,"b"),d._uU(31,"Actors:"),d.qZA(),d.qZA(),d.TgZ(32,"td"),d._uU(33),d.qZA(),d.qZA(),d.TgZ(34,"tr"),d.TgZ(35,"td"),d.TgZ(36,"b"),d._uU(37,"Genre:"),d.qZA(),d.qZA(),d.TgZ(38,"td"),d._uU(39),d.qZA(),d.qZA(),d.TgZ(40,"tr"),d.TgZ(41,"td"),d.TgZ(42,"b"),d._uU(43,"Plot:"),d.qZA(),d.qZA(),d.TgZ(44,"td"),d._uU(45),d.qZA(),d.qZA(),d.qZA(),d.YNc(46,vee,8,0,"table",3),d.YNc(47,bee,5,1,"table",3),d.qZA(),d.qZA()),2&t&&(d.Q6J("visible",!1)("isModal",!0),d.xp6(2),d.Q6J("src",i.poster,d.LSH),d.xp6(7),d.Oqu(null==i.details?null:i.details.Title),d.xp6(6),d.Oqu(null==i.details?null:i.details.Released),d.xp6(6),d.Oqu(null==i.details?null:i.details.Writer),d.xp6(6),d.Oqu(null==i.details?null:i.details.Director),d.xp6(6),d.Oqu(null==i.details?null:i.details.Actors),d.xp6(6),d.Oqu(null==i.details?null:i.details.Genre),d.xp6(6),d.Oqu(null==i.details?null:i.details.Plot),d.xp6(1),d.Q6J("ngIf",!(null!=i.details&&i.details.folder)&&i.user),d.xp6(1),d.Q6J("ngIf",null==i.details?null:i.details.folder))},directives:[t4,no,Ic,RO],styles:["ejs-dialog[_ngcontent-%COMP%]{max-height:1000px!important}img[_ngcontent-%COMP%]{width:100%;height:500px}table[_ngcontent-%COMP%]{margin-top:10px;width:100%;border-collapse:separate;text-indent:initial;border-spacing:0px}b[_ngcontent-%COMP%]{margin-right:5px}button[_ngcontent-%COMP%]{width:100%}"]}),n})(),X6=(()=>{class n{constructor(t){this.http=t,this.rapidApiKey="4ccbc10367msh3a0aae042eaac2ep10144bjsn5bf582dc9c1c"}browse(t,i,s){const u={headers:new oa({"x-rapidapi-key":this.rapidApiKey}),params:this.createHttpParams({s:t,type:i,page:s,r:"json"})};return this.http.get("https://movie-database-alternative.p.rapidapi.com",u)}getDetails(t){const o={headers:new oa({"x-rapidapi-key":this.rapidApiKey}),params:this.createHttpParams({i:t})};return this.http.get("https://movie-database-alternative.p.rapidapi.com",o)}createHttpParams(t){let i=new xl;return Object.keys(t).forEach(s=>{t[s]&&(i=i.set(s,t[s]))}),i}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(mf))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Cee=["template"],Iee=["blur","change","created","destroyed","focus","input","valueChange"],xee=["value"];let Xy=nV=class extends Ar{constructor(e,t,i,s){super(),this.ngEle=e,this.srenderer=t,this.viewContainerRef=i,this.injector=s,this.skipFromEvent=!0,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(Iee),this.addTwoWay.call(this,xee),ys("currentInstance",this,this.viewContainerRef),this.formContext=new Vs,this.formCompContext=new fi}registerOnChange(e){}registerOnTouched(e){}writeValue(e){}setDisabledState(e){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var nV;Xy.\u0275fac=function(e){return new(e||Xy)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},Xy.\u0275cmp=d.Xpm({type:Xy,selectors:[["ejs-textbox"]],inputs:{autocomplete:"autocomplete",cssClass:"cssClass",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enabled:"enabled",floatLabelType:"floatLabelType",htmlAttributes:"htmlAttributes",locale:"locale",multiline:"multiline",placeholder:"placeholder",readonly:"readonly",showClearButton:"showClearButton",type:"type",value:"value",width:"width"},outputs:{blur:"blur",change:"change",created:"created",destroyed:"destroyed",focus:"focus",input:"input",valueChange:"valueChange"},features:[d._Bn([{provide:gr,useExisting:(0,d.Gpc)(()=>nV),multi:!0}]),d.qOj],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),Xy.ctorParameters=()=>[{type:d.SBq},{type:d.Qsj},{type:d.s_b},{type:d.zs3}],Xy=nV=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r}([hn([fi,Vs]),function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",e)}(0,[d.SBq,d.Qsj,d.s_b,d.zs3])],Xy);let rV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[ti]]}),n})();const Dee=["blur","change","created","destroyed","focus","valueChange"],kee=["value"];let xC=oV=class extends fb{constructor(e,t,i,s){super(),this.ngEle=e,this.srenderer=t,this.viewContainerRef=i,this.injector=s,this.skipFromEvent=!0,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(Dee),this.addTwoWay.call(this,kee),ys("currentInstance",this,this.viewContainerRef),this.formContext=new Vs,this.formCompContext=new fi}registerOnChange(e){}registerOnTouched(e){}writeValue(e){}setDisabledState(e){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var oV;xC.\u0275fac=function(e){return new(e||xC)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},xC.\u0275cmp=d.Xpm({type:xC,selectors:[["ejs-numerictextbox"]],inputs:{cssClass:"cssClass",currency:"currency",currencyCode:"currencyCode",decimals:"decimals",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enabled:"enabled",floatLabelType:"floatLabelType",format:"format",htmlAttributes:"htmlAttributes",locale:"locale",max:"max",min:"min",placeholder:"placeholder",readonly:"readonly",showClearButton:"showClearButton",showSpinButton:"showSpinButton",step:"step",strictMode:"strictMode",validateDecimalOnType:"validateDecimalOnType",value:"value",width:"width"},outputs:{blur:"blur",change:"change",created:"created",destroyed:"destroyed",focus:"focus",valueChange:"valueChange"},features:[d._Bn([{provide:gr,useExisting:(0,d.Gpc)(()=>oV),multi:!0}]),d.qOj],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),xC.ctorParameters=()=>[{type:d.SBq},{type:d.Qsj},{type:d.s_b},{type:d.zs3}],xC=oV=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r}([hn([fi,Vs]),function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",e)}(0,[d.SBq,d.Qsj,d.s_b,d.zs3])],xC);const Pee=["blur","change","created","destroyed","focus","valueChange"],Lee=["value"];let TC=aV=class extends mo{constructor(e,t,i,s){super(),this.ngEle=e,this.srenderer=t,this.viewContainerRef=i,this.injector=s,this.skipFromEvent=!0,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(Pee),this.addTwoWay.call(this,Lee),ys("currentInstance",this,this.viewContainerRef),this.formContext=new Vs,this.formCompContext=new fi}registerOnChange(e){}registerOnTouched(e){}writeValue(e){}setDisabledState(e){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var aV;TC.\u0275fac=function(e){return new(e||TC)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},TC.\u0275cmp=d.Xpm({type:TC,selectors:[["ejs-maskedtextbox"]],inputs:{cssClass:"cssClass",customCharacters:"customCharacters",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enabled:"enabled",floatLabelType:"floatLabelType",htmlAttributes:"htmlAttributes",locale:"locale",mask:"mask",placeholder:"placeholder",promptChar:"promptChar",readonly:"readonly",showClearButton:"showClearButton",value:"value",width:"width"},outputs:{blur:"blur",change:"change",created:"created",destroyed:"destroyed",focus:"focus",valueChange:"valueChange"},features:[d._Bn([{provide:gr,useExisting:(0,d.Gpc)(()=>aV),multi:!0}]),d.qOj],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),TC.ctorParameters=()=>[{type:d.SBq},{type:d.Qsj},{type:d.s_b},{type:d.zs3}],TC=aV=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r}([hn([fi,Vs]),function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",e)}(0,[d.SBq,d.Qsj,d.s_b,d.zs3])],TC);const Fee=["focus","blur","change","changed","created","renderedTicks","renderingTicks","tooltipChange","valueChange"],Bee=["value"];let AC=lV=class extends pn{constructor(e,t,i,s){super(),this.ngEle=e,this.srenderer=t,this.viewContainerRef=i,this.injector=s,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(Fee),this.addTwoWay.call(this,Bee),ys("currentInstance",this,this.viewContainerRef),this.formContext=new Vs,this.formCompContext=new fi}registerOnChange(e){}registerOnTouched(e){}writeValue(e){}setDisabledState(e){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var lV;AC.\u0275fac=function(e){return new(e||AC)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},AC.\u0275cmp=d.Xpm({type:AC,selectors:[["ejs-slider"]],inputs:{colorRange:"colorRange",cssClass:"cssClass",customValues:"customValues",enableAnimation:"enableAnimation",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enabled:"enabled",limits:"limits",locale:"locale",max:"max",min:"min",orientation:"orientation",readonly:"readonly",showButtons:"showButtons",step:"step",ticks:"ticks",tooltip:"tooltip",type:"type",value:"value",width:"width"},outputs:{focus:"focus",blur:"blur",change:"change",changed:"changed",created:"created",renderedTicks:"renderedTicks",renderingTicks:"renderingTicks",tooltipChange:"tooltipChange",valueChange:"valueChange"},features:[d._Bn([{provide:gr,useExisting:(0,d.Gpc)(()=>lV),multi:!0}]),d.qOj],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),AC.ctorParameters=()=>[{type:d.SBq},{type:d.Qsj},{type:d.s_b},{type:d.zs3}],AC=lV=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r}([hn([fi,Vs]),function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",e)}(0,[d.SBq,d.Qsj,d.s_b,d.zs3])],AC);let Vee=["name","size","type"],Hee=[],jee=(()=>{class n extends xu{constructor(t){super(),this.viewContainerRef=t,ys("currentInstance",this,this.viewContainerRef),this.registerEvents(Hee),this.directivePropList=Vee}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b))},n.\u0275dir=d.lG2({type:n,selectors:[["e-uploadedfiles"]],inputs:{name:"name",size:"size",type:"type"},features:[d.qOj]}),n})(),Uee=(()=>{class n extends Tu{constructor(){super("files")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["e-files"]],contentQueries:function(t,i,s){if(1&t&&d.Suo(s,jee,4),2&t){let r;d.iGM(r=d.CRH())&&(i.children=r)}},features:[d.qOj]}),n})();var tq=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},iq=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)};const zee=["focus","blur","actionComplete","beforeRemove","beforeUpload","canceling","change","chunkFailure","chunkSuccess","chunkUploading","clearing","created","failure","fileListRendering","pausing","progress","removing","rendering","resuming","selected","success","uploading"],Wee=[];let Sm=cV=class extends ps{constructor(e,t,i,s){super(),this.ngEle=e,this.srenderer=t,this.viewContainerRef=i,this.injector=s,this.tags=["files"],this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(zee),this.addTwoWay.call(this,Wee),ys("currentInstance",this,this.viewContainerRef),this.formContext=new Vs,this.formCompContext=new fi}registerOnChange(e){}registerOnTouched(e){}writeValue(e){}setDisabledState(e){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.tagObjects[0].instance=this.childFiles,this.formCompContext.ngAfterContentChecked(this)}};var cV;Sm.\u0275fac=function(e){return new(e||Sm)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},Sm.\u0275cmp=d.Xpm({type:Sm,selectors:[["ejs-uploader"]],contentQueries:function(e,t,i){if(1&e&&(d.Suo(i,Cee,5),d.Suo(i,Uee,5)),2&e){let s;d.iGM(s=d.CRH())&&(t.template=s.first),d.iGM(s=d.CRH())&&(t.childFiles=s.first)}},inputs:{allowedExtensions:"allowedExtensions",asyncSettings:"asyncSettings",autoUpload:"autoUpload",buttons:"buttons",cssClass:"cssClass",directoryUpload:"directoryUpload",dropArea:"dropArea",dropEffect:"dropEffect",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enabled:"enabled",files:"files",htmlAttributes:"htmlAttributes",locale:"locale",maxFileSize:"maxFileSize",minFileSize:"minFileSize",multiple:"multiple",sequentialUpload:"sequentialUpload",showFileList:"showFileList",template:"template"},outputs:{focus:"focus",blur:"blur",actionComplete:"actionComplete",beforeRemove:"beforeRemove",beforeUpload:"beforeUpload",canceling:"canceling",change:"change",chunkFailure:"chunkFailure",chunkSuccess:"chunkSuccess",chunkUploading:"chunkUploading",clearing:"clearing",created:"created",failure:"failure",fileListRendering:"fileListRendering",pausing:"pausing",progress:"progress",removing:"removing",rendering:"rendering",resuming:"resuming",selected:"selected",success:"success",uploading:"uploading"},features:[d._Bn([{provide:gr,useExisting:(0,d.Gpc)(()=>cV),multi:!0}]),d.qOj],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),Sm.ctorParameters=()=>[{type:d.SBq},{type:d.Qsj},{type:d.s_b},{type:d.zs3}],Sm.propDecorators={template:[{type:d.aQ5,args:["template"]}]},tq([Ni(),iq("design:type",Object)],Sm.prototype,"template",void 0),Sm=cV=tq([hn([fi,Vs]),iq("design:paramtypes",[d.SBq,d.Qsj,d.s_b,d.zs3])],Sm);const Gee=["focus","blur","beforeClose","beforeModeSwitch","beforeOpen","beforeTileRender","change","created","onModeSwitch","open","select","valueChange"],Yee=["value"];let DC=hV=class extends ur{constructor(e,t,i,s){super(),this.ngEle=e,this.srenderer=t,this.viewContainerRef=i,this.injector=s,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(Gee),this.addTwoWay.call(this,Yee),ys("currentInstance",this,this.viewContainerRef),this.formContext=new Vs,this.formCompContext=new fi}registerOnChange(e){}registerOnTouched(e){}writeValue(e){}setDisabledState(e){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var hV;DC.\u0275fac=function(e){return new(e||DC)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},DC.\u0275cmp=d.Xpm({type:DC,selectors:[["","ejs-colorpicker",""]],inputs:{columns:"columns",createPopupOnClick:"createPopupOnClick",cssClass:"cssClass",disabled:"disabled",enableOpacity:"enableOpacity",enablePersistence:"enablePersistence",enableRtl:"enableRtl",inline:"inline",locale:"locale",mode:"mode",modeSwitcher:"modeSwitcher",noColor:"noColor",presetColors:"presetColors",showButtons:"showButtons",value:"value"},outputs:{focus:"focus",blur:"blur",beforeClose:"beforeClose",beforeModeSwitch:"beforeModeSwitch",beforeOpen:"beforeOpen",beforeTileRender:"beforeTileRender",change:"change",created:"created",onModeSwitch:"onModeSwitch",open:"open",select:"select",valueChange:"valueChange"},features:[d._Bn([{provide:gr,useExisting:(0,d.Gpc)(()=>hV),multi:!0}]),d.qOj],attrs:["ejs-colorpicker",""],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),DC.ctorParameters=()=>[{type:d.SBq},{type:d.Qsj},{type:d.s_b},{type:d.zs3}],DC=hV=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r}([hn([fi,Vs]),function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",e)}(0,[d.SBq,d.Qsj,d.s_b,d.zs3])],DC);const Xee=["focus","blur","beforeSave","change","created"],Qee=[];let kC=uV=class extends No{constructor(e,t,i,s){super(),this.ngEle=e,this.srenderer=t,this.viewContainerRef=i,this.injector=s,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(Xee),this.addTwoWay.call(this,Qee),ys("currentInstance",this,this.viewContainerRef),this.formContext=new Vs,this.formCompContext=new fi}registerOnChange(e){}registerOnTouched(e){}writeValue(e){}setDisabledState(e){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var uV;function Jee(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",12),d.NdJ("click",function(){return d.CHM(t),d.oxw().getPrevPage()}),d._UZ(1,"i",13),d.qZA()}}function ete(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",12),d.NdJ("click",function(){return d.CHM(t),d.oxw().getNextPage()}),d._UZ(1,"i",14),d.qZA()}}kC.\u0275fac=function(e){return new(e||kC)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},kC.\u0275cmp=d.Xpm({type:kC,selectors:[["","ejs-signature",""]],inputs:{backgroundColor:"backgroundColor",backgroundImage:"backgroundImage",disabled:"disabled",enablePersistence:"enablePersistence",enableRtl:"enableRtl",isReadOnly:"isReadOnly",locale:"locale",maxStrokeWidth:"maxStrokeWidth",minStrokeWidth:"minStrokeWidth",saveWithBackground:"saveWithBackground",strokeColor:"strokeColor",velocity:"velocity"},outputs:{focus:"focus",blur:"blur",beforeSave:"beforeSave",change:"change",created:"created"},features:[d._Bn([{provide:gr,useExisting:(0,d.Gpc)(()=>uV),multi:!0}]),d.qOj],attrs:["ejs-signature",""],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),kC.ctorParameters=()=>[{type:d.SBq},{type:d.Qsj},{type:d.s_b},{type:d.zs3}],kC=uV=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r}([hn([fi,Vs]),function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",e)}(0,[d.SBq,d.Qsj,d.s_b,d.zs3])],kC);const tte=function(){return[20,20]};let ite=(()=>{class n{constructor(t){this.imdbService=t,this.showSpinner=new d.vpe,this.hideSpinner=new d.vpe,this.response={Search:[],totalResults:"0",Response:"True"},this.text="",this.isMovie=!0,this.page=1}get showPrevNav(){return this.page>1}get showNextNav(){return parseInt(this.response.totalResults)>10*this.page}ngOnInit(){}dashCreated(){this.search({text:"Movie",isMovie:!0,page:1})}search(t){var i=this;return(0,Ne.Z)(function*(){i.showSpinner.emit(),i.text=t.text,i.isMovie=t.isMovie,i.page=t.page;try{i.response=yield i.imdbService.browse(i.text,i.isMovie?"movie":"series",i.page).toPromise(),i.buildPanels(i.response)}catch(s){console.log(s)}finally{i.hideSpinner.emit()}})()}getPrevPage(){this.search({text:this.text,isMovie:this.isMovie,page:--this.page})}getNextPage(){this.search({text:this.text,isMovie:this.isMovie,page:++this.page})}buildPanels(t){var i,s,r;null===(i=this.dashboard)||void 0===i||i.removeAll();let o=0,a=0;for(let u of null!==(s=t.Search)&&void 0!==s?s:[]){a>4&&(a=0,o+=1);const p="N/A"!=u.Poster?u.Poster:"assets/images/noImage.png";null===(r=this.dashboard)||void 0===r||r.addPanel({sizeX:1,sizeY:1,row:o,col:a++,content:`<img id="${u.imdbID}" class="mediaItem" src="${p}"/>`});const y=document.getElementById(u.imdbID);y&&y.addEventListener("click",this.openDialog.bind(this))}}openDialog(t){var i=this;return(0,Ne.Z)(function*(){var s;const r=yield i.imdbService.getDetails(t.target.id).toPromise();null===(s=i.dialog)||void 0===s||s.show(r)})()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(X6))},n.\u0275cmp=d.Xpm({type:n,selectors:[["browse-page"]],viewQuery:function(t,i){if(1&t&&(d.Gf(xw,5),d.Gf(NO,5)),2&t){let s;d.iGM(s=d.CRH())&&(i.dashboard=s.first),d.iGM(s=d.CRH())&&(i.dialog=s.first)}},outputs:{showSpinner:"showSpinner",hideSpinner:"hideSpinner"},decls:26,vars:9,consts:[["id","searchBar"],[1,"navTable"],["class","navLink",3,"click",4,"ngIf"],["label","Movie","value","Movie","name","type","checked","true"],["movie",""],["label","Tv","value","Tv","name","type"],["searchTxt",""],["ejs-button","","isPrimary","true",3,"click"],["id","dashDiv"],[3,"columns","cellAspectRatio","cellSpacing","allowFloating","allowDragging","mediaQuery","created"],["browseDashboard",""],[3,"showSpinner","hideSpinner"],[1,"navLink",3,"click"],[1,"fa","fa-chevron-left"],[1,"fa","fa-chevron-right"]],template:function(t,i){if(1&t){const s=d.EpF();d.TgZ(0,"div",0),d.TgZ(1,"table",1),d.TgZ(2,"tr"),d.TgZ(3,"td"),d.YNc(4,Jee,2,0,"div",2),d.qZA(),d.qZA(),d.qZA(),d.TgZ(5,"table"),d.TgZ(6,"tr"),d.TgZ(7,"td"),d._UZ(8,"ejs-radiobutton",3,4),d.qZA(),d.TgZ(10,"td"),d._UZ(11,"ejs-radiobutton",5),d.qZA(),d.TgZ(12,"td"),d._UZ(13,"ejs-textbox",null,6),d.qZA(),d.TgZ(15,"td"),d.TgZ(16,"button",7),d.NdJ("click",function(){d.CHM(s);const o=d.MAs(14),a=d.MAs(9);return i.search({text:o.value,isMovie:a.checked,page:1})}),d._uU(17,"Search"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(18,"table",1),d.TgZ(19,"tr"),d.TgZ(20,"td"),d.YNc(21,ete,2,0,"div",2),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(22,"div",8),d.TgZ(23,"ejs-dashboardlayout",9,10),d.NdJ("created",function(){return i.dashCreated()}),d.qZA(),d.qZA(),d.TgZ(25,"media-item-dialog",11),d.NdJ("showSpinner",function(){return i.showSpinner.emit()})("hideSpinner",function(){return i.hideSpinner.emit()}),d.qZA()}2&t&&(d.xp6(4),d.Q6J("ngIf",i.showPrevNav),d.xp6(17),d.Q6J("ngIf",i.showNextNav),d.xp6(2),d.Q6J("columns",5)("cellAspectRatio",.7)("cellSpacing",d.DdM(8,tte))("allowFloating",!1)("allowDragging",!1)("mediaQuery","max-width: 800px"))},directives:[no,Zy,Xy,RO,xw,NO],styles:["#searchBar[_ngcontent-%COMP%]{display:flex;align-content:center;justify-content:space-between;border-bottom:1px solid darkgray;background:#f2f2f2!important;height:38px}table[_ngcontent-%COMP%]{border-collapse:separate;border-spacing:15px 0px}#dashDiv[_ngcontent-%COMP%]{margin:20px}.navTable[_ngcontent-%COMP%]{width:41px}.navLink[_ngcontent-%COMP%]{font-size:14px;line-height:.75em;font-weight:700;color:#e3165b;cursor:pointer}"]}),n})();function ste(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",8),d.NdJ("click",function(){return d.CHM(t),d.oxw().folderNav()}),d._UZ(1,"i",9),d._uU(2,"Folders"),d.qZA()}}function nte(n,e){if(1&n&&(d.TgZ(0,"label",10),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Oqu(t.folder)}}function rte(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"table"),d.TgZ(1,"tr"),d.TgZ(2,"td"),d.TgZ(3,"button",11),d.NdJ("click",function(){return d.CHM(t),d.oxw().deleteFolder()}),d._uU(4,"Delete Folder"),d.qZA(),d.qZA(),d.qZA(),d.qZA()}}const ote=function(){return[20,20]};let ate=(()=>{class n{constructor(t,i){this.fireService=t,this.imdbService=i,this.showSpinner=new d.vpe,this.hideSpinner=new d.vpe,this.cols=5,this.maxCol=this.cols-1}ngOnInit(){}ngOnDestroy(){var t,i;null===(t=this.foldersSub)||void 0===t||t.unsubscribe(),null===(i=this.mediaItemsSub)||void 0===i||i.unsubscribe()}deleteFolder(){var t=this;const i=K0.confirm({title:"Confirm",content:"Are you sure you want to delete this folder and all of it's contents?",okButton:{text:"Yes",click:(s=(0,Ne.Z)(function*(){t.folder&&(t.showSpinner.emit(),yield t.fireService.deleteFolder(t.folder),t.hideSpinner.emit(),t.folderNav()),i.close()}),function(){return s.apply(this,arguments)})},showCloseIcon:!0});var s}dashCreated(){var t=this;return(0,Ne.Z)(function*(){yield t.fireService.loaded,t.getFolders()})()}folderNav(){var t;this.folder=void 0,null===(t=this.mediaItemsSub)||void 0===t||t.unsubscribe(),this.getFolders()}getFolders(){var t;this.foldersSub=null===(t=this.fireService.getFolders())||void 0===t?void 0:t.subscribe(i=>{const s=i.map(r=>r.payload.doc.id);this.buildFolders(s)})}buildFolders(t){var i,s;null===(i=this.dashboard)||void 0===i||i.removeAll();let r=0,o=0;for(let a of t){o>this.maxCol&&(o=0,r+=1),null===(s=this.dashboard)||void 0===s||s.addPanel({sizeX:1,sizeY:1,row:r,col:o++,header:`<div>${a}</div>`,content:`<div id="folder-${a}" folder="${a}" class="folder"><i class="far fa-folder-open fa-7x" folder="${a}"></i></div>`});const u=document.getElementById(`folder-${a}`);u&&u.addEventListener("click",this.openFolder.bind(this))}}openFolder(t){var i,s,r,o,a;null===(i=this.foldersSub)||void 0===i||i.unsubscribe();const u=null===(o=null===(r=null===(s=null==t?void 0:t.target)||void 0===s?void 0:s.attributes)||void 0===r?void 0:r.folder)||void 0===o?void 0:o.value;u&&(this.folder=u,this.mediaItemsSub=null===(a=this.fireService.getMediaItems(u))||void 0===a?void 0:a.subscribe(p=>{const y=p.map(E=>JSON.parse(E.payload.doc.id));this.buildMediaItems(y)}))}buildMediaItems(t){var i,s;null===(i=this.dashboard)||void 0===i||i.removeAll();let r=0,o=0;for(let a of t){o>this.maxCol&&(o=0,r+=1);const u=decodeURIComponent(a.poster);null===(s=this.dashboard)||void 0===s||s.addPanel({sizeX:1,sizeY:2,row:r,col:o++,content:`<img id="${this.folder}-${a.imdbID}" imdbID="${a.imdbID}" class="mediaItem" src="${u}"/>`});const p=document.getElementById(`${this.folder}-${a.imdbID}`);p&&p.addEventListener("click",this.openDialog.bind(this))}}openDialog(t){var i=this;return(0,Ne.Z)(function*(){var s,r,o,a;const u=null===(o=null===(r=null===(s=null==t?void 0:t.target)||void 0===s?void 0:s.attributes)||void 0===r?void 0:r.imdbID)||void 0===o?void 0:o.value;if(u){const p=yield i.imdbService.getDetails(u).toPromise();p.folder=i.folder,null===(a=i.dialog)||void 0===a||a.show(p)}})()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(KB),d.Y36(X6))},n.\u0275cmp=d.Xpm({type:n,selectors:[["saved-page"]],viewQuery:function(t,i){if(1&t&&(d.Gf(xw,5),d.Gf(NO,5)),2&t){let s;d.iGM(s=d.CRH())&&(i.dashboard=s.first),d.iGM(s=d.CRH())&&(i.dialog=s.first)}},outputs:{showSpinner:"showSpinner",hideSpinner:"hideSpinner"},decls:14,vars:10,consts:[["id","filterBar"],["id","foldersLink",3,"click",4,"ngIf"],["id","folderHeader",4,"ngIf"],[4,"ngIf"],["id","dashDiv"],[3,"columns","cellAspectRatio","cellSpacing","allowFloating","allowDragging","mediaQuery","created"],["savedDashboard",""],[3,"showSpinner","hideSpinner"],["id","foldersLink",3,"click"],[1,"fa","fa-chevron-left"],["id","folderHeader"],["ejs-button","","isPrimary","true",3,"click"]],template:function(t,i){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"table"),d.TgZ(2,"tr"),d.TgZ(3,"td"),d.YNc(4,ste,3,0,"div",1),d.qZA(),d.qZA(),d.qZA(),d.TgZ(5,"table"),d.TgZ(6,"tr"),d.TgZ(7,"td"),d.YNc(8,nte,2,1,"label",2),d.qZA(),d.qZA(),d.qZA(),d.YNc(9,rte,5,0,"table",3),d.qZA(),d.TgZ(10,"div",4),d.TgZ(11,"ejs-dashboardlayout",5,6),d.NdJ("created",function(){return i.dashCreated()}),d.qZA(),d.qZA(),d.TgZ(13,"media-item-dialog",7),d.NdJ("showSpinner",function(){return i.showSpinner.emit()})("hideSpinner",function(){return i.hideSpinner.emit()}),d.qZA()),2&t&&(d.xp6(4),d.Q6J("ngIf",i.folder),d.xp6(4),d.Q6J("ngIf",i.folder),d.xp6(1),d.Q6J("ngIf",i.folder),d.xp6(2),d.Q6J("columns",i.cols)("cellAspectRatio",1.4)("cellSpacing",d.DdM(9,ote))("allowFloating",!1)("allowDragging",!1)("mediaQuery","max-width: 800px"))},directives:[no,RO,xw,NO],styles:["table[_ngcontent-%COMP%]{border-collapse:separate;border-spacing:15px 0px}#filterBar[_ngcontent-%COMP%]{display:flex;align-content:center;justify-content:space-between;border-bottom:1px solid darkgray;background:#f2f2f2!important;height:38px}#dashDiv[_ngcontent-%COMP%]{margin:20px}#foldersLink[_ngcontent-%COMP%]{font-size:14px;line-height:.75em;font-weight:700;color:#e3165b;cursor:pointer}#folderHeader[_ngcontent-%COMP%]{font-size:14px;line-height:.75em;font-weight:700}.fa-chevron-left[_ngcontent-%COMP%]{margin-right:3px}"]}),n})();function lte(n,e){1&n&&(d.TgZ(0,"h1",6),d._uU(1,"Tv Tracker"),d.qZA())}function cte(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"browse-page",7),d.NdJ("showSpinner",function(){return d.CHM(t),d.oxw(2).showSpinner()})("hideSpinner",function(){return d.CHM(t),d.oxw(2).hideSpinner()}),d.qZA()}}function hte(n,e){1&n&&(d.TgZ(0,"e-tabitem"),d.YNc(1,lte,2,0,"ng-template",null,3,d.W1O),d.YNc(3,cte,1,0,"ng-template",null,5,d.W1O),d.qZA())}function ute(n,e){1&n&&d._uU(0," Browse ")}function dte(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"browse-page",7),d.NdJ("showSpinner",function(){return d.CHM(t),d.oxw(3).showSpinner()})("hideSpinner",function(){return d.CHM(t),d.oxw(3).hideSpinner()}),d.qZA()}}function pte(n,e){if(1&n&&d.YNc(0,dte,1,0,"browse-page",8),2&n){const t=d.oxw(2);d.Q6J("ngIf",0==t.selectedIndex)}}function fte(n,e){1&n&&(d.TgZ(0,"e-tabitem"),d.YNc(1,ute,1,0,"ng-template",null,3,d.W1O),d.YNc(3,pte,1,1,"ng-template",null,5,d.W1O),d.qZA())}function mte(n,e){1&n&&d._uU(0," Saved ")}function gte(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"saved-page",7),d.NdJ("showSpinner",function(){return d.CHM(t),d.oxw(3).showSpinner()})("hideSpinner",function(){return d.CHM(t),d.oxw(3).hideSpinner()}),d.qZA()}}function yte(n,e){if(1&n&&d.YNc(0,gte,1,0,"saved-page",8),2&n){const t=d.oxw(2);d.Q6J("ngIf",1==t.selectedIndex)}}function vte(n,e){1&n&&(d.TgZ(0,"e-tabitem"),d.YNc(1,mte,1,0,"ng-template",null,3,d.W1O),d.YNc(3,yte,1,1,"ng-template",null,5,d.W1O),d.qZA())}function bte(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",10),d.NdJ("click",function(){return d.CHM(t),d.oxw(2).login()}),d._uU(1,"Login"),d.qZA()}}function Cte(n,e){if(1&n&&d.YNc(0,bte,2,0,"button",9),2&n){const t=d.oxw();d.Q6J("ngIf",!t.user)}}const Ete=[{path:"**",component:(()=>{class n{constructor(t){this.fireService=t,this.selectedIndex=1}get user(){return this.fireService.user}ngOnInit(){}login(){var t=this;return(0,Ne.Z)(function*(){t.fireService.login()})()}showSpinner(){const t=document.querySelector("#spinnerDiv");this.spinnerExist()||Zc({target:t,width:"70px"}),Bl(t)}hideSpinner(){this.spinnerExist()&&hl(document.querySelector("#spinnerDiv"))}spinnerExist(){const t=document.querySelector("#spinnerDiv");return Array.from(t.children).reduce((s,r)=>(r.classList.forEach(o=>s.push(o)),s),[]).includes("e-spinner-pane")}selected(t){this.selectedIndex=t.selectedIndex}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(KB))},n.\u0275cmp=d.Xpm({type:n,selectors:[["main-page"]],viewQuery:function(t,i){if(1&t&&d.Gf(Ck,5),2&t){let s;d.iGM(s=d.CRH())&&(i.tabs=s.first)}},decls:9,vars:4,consts:[[3,"selected"],[4,"ngIf"],["cssClass","loginTab",3,"disabled"],["headerText",""],["id","spinnerDiv"],["content",""],["id","title"],[3,"showSpinner","hideSpinner"],[3,"showSpinner","hideSpinner",4,"ngIf"],["ejs-button","","isPrimary","true",3,"click",4,"ngIf"],["ejs-button","","isPrimary","true",3,"click"]],template:function(t,i){1&t&&(d.TgZ(0,"ejs-tab",0),d.NdJ("selected",function(r){return i.selected(r)}),d.TgZ(1,"e-tabitems"),d.YNc(2,hte,5,0,"e-tabitem",1),d.YNc(3,fte,5,0,"e-tabitem",1),d.YNc(4,vte,5,0,"e-tabitem",1),d.TgZ(5,"e-tabitem",2),d.YNc(6,Cte,1,1,"ng-template",null,3,d.W1O),d.qZA(),d.qZA(),d.qZA(),d._UZ(8,"div",4)),2&t&&(d.xp6(2),d.Q6J("ngIf",!i.user),d.xp6(1),d.Q6J("ngIf",i.user),d.xp6(1),d.Q6J("ngIf",i.user),d.xp6(1),d.Q6J("disabled",!0))},directives:[Ck,XH,no,TI,ite,ate,RO],styles:['#header[_ngcontent-%COMP%]{background-color:#7dbcff;padding:0 15px}#title[_ngcontent-%COMP%]{display:inline-block;text-align:center;font-family:Arial,Roboto,Segoe UI,GeezaPro,"DejaVu Serif","sans-serif",-apple-system,BlinkMacSystemFont;font-size:1.5em;color:#fff}.loginTab[_ngcontent-%COMP%]{pointer-events:auto!important;float:right}.e-tab[_ngcontent-%COMP%]   .e-tab-header[_ngcontent-%COMP%]{background:#7dbcff!important;border-bottom:1px solid darkgray}.e-toolbar-items[_ngcontent-%COMP%]{width:100%}.e-tab[_ngcontent-%COMP%]   .e-tab-header[_ngcontent-%COMP%]   .e-toolbar-item[_ngcontent-%COMP%]   .e-tab-wrap[_ngcontent-%COMP%]{color:#f2f2f2}']}),n})()}];let wte=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[eM.forRoot(Ete)],eM]}),n})(),Ste=(()=>{class n{constructor(){this.title="TvTracker"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,i){1&t&&d._UZ(0,"router-outlet")},directives:[ve],styles:[""]}),n})();const dV_firebase={apiKey:"AIzaSyCJv2YZgyz9Qp_Crm5fH1FFhmEMxE_IY8w",authDomain:"tvtrackerweb-f9f10.firebaseapp.com",projectId:"tvtrackerweb-f9f10",storageBucket:"tvtrackerweb-f9f10.appspot.com",messagingSenderId:"200695251639",appId:"1:200695251639:web:441fbd163430661fa48332",measurementId:"G-G5Z21LS3EC"};class pV{constructor(e){return e}}const oq="firestore",fV=new d.OlP("angularfire2.firestore-instances");function xte(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new pV(i)}}const Tte={provide:class _te{constructor(){return(0,tn.vb)(oq)}},deps:[[new d.FiY,fV]]},Ate={provide:pV,useFactory:function Ite(n,e){const t=(0,tn.JM)(oq,n,e);return t&&new pV(t)},deps:[[new d.FiY,fV],jE]};let Dte=(()=>{class n{constructor(){(0,yy.KN)("angularfire",tn.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Ate,Tte]}),n})();function kte(n,...e){return{ngModule:Dte,providers:[{provide:fV,useFactory:xte(n),multi:!0,deps:[d.R0b,d.zs3,tn.HU,mR,[new d.FiY,Aj],[new d.FiY,kI],...e]}]}}const Ote=(0,tn.u3)(dK,!0);let Mte=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[Ste]}),n.\u0275inj=d.cJS({providers:[],imports:[[cf,wte,Gm,dR,s2,rV,J2,iV,$2,zd.hO.initializeApp(dV_firebase),LZ,Z7(()=>X7(dV_firebase)),kte(()=>Ote()),q9(()=>Dj()),n2]]}),n})();(0,d.G48)(),$u().bootstrapModule(Mte).catch(n=>console.error(n))},8306:(Kt,Xe,G)=>{G.d(Xe,{y:()=>he});var d=G(2961),ee=G(727),z=G(8822),Ie=G(4671);var Le=G(2416),Be=G(576),Ue=G(2806);let he=(()=>{class rt{constructor(At){At&&(this._subscribe=At)}lift(At){const Fe=new rt;return Fe.source=this,Fe.operator=At,Fe}subscribe(At,Fe,Ye){const Et=function Pt(rt){return rt&&rt instanceof d.Lv||function xe(rt){return rt&&(0,Be.m)(rt.next)&&(0,Be.m)(rt.error)&&(0,Be.m)(rt.complete)}(rt)&&(0,ee.Nn)(rt)}(At)?At:new d.Hp(At,Fe,Ye);return(0,Ue.x)(()=>{const{operator:Dt,source:wt}=this;Et.add(Dt?Dt.call(Et,wt):wt?this._subscribe(Et):this._trySubscribe(Et))}),Et}_trySubscribe(At){try{return this._subscribe(At)}catch(Fe){At.error(Fe)}}forEach(At,Fe){return new(Fe=ue(Fe))((Ye,Et)=>{let Dt;Dt=this.subscribe(wt=>{try{At(wt)}catch(Gt){Et(Gt),null==Dt||Dt.unsubscribe()}},Et,Ye)})}_subscribe(At){var Fe;return null===(Fe=this.source)||void 0===Fe?void 0:Fe.subscribe(At)}[z.L](){return this}pipe(...At){return function ze(rt){return 0===rt.length?Ie.y:1===rt.length?rt[0]:function(At){return rt.reduce((Fe,Ye)=>Ye(Fe),At)}}(At)(this)}toPromise(At){return new(At=ue(At))((Fe,Ye)=>{let Et;this.subscribe(Dt=>Et=Dt,Dt=>Ye(Dt),()=>Fe(Et))})}}return rt.create=vt=>new rt(vt),rt})();function ue(rt){var vt;return null!==(vt=null!=rt?rt:Le.v.Promise)&&void 0!==vt?vt:Promise}},7579:(Kt,Xe,G)=>{G.d(Xe,{x:()=>Le});var d=G(8306),ee=G(727);const Ie=(0,G(3888).d)(Ue=>function(){Ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Pe=G(8737),ze=G(2806);let Le=(()=>{class Ue extends d.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ue){const xe=new Be(this,this);return xe.operator=ue,xe}_throwIfClosed(){if(this.closed)throw new Ie}next(ue){(0,ze.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const xe=this.observers.slice();for(const Pt of xe)Pt.next(ue)}})}error(ue){(0,ze.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ue;const{observers:xe}=this;for(;xe.length;)xe.shift().error(ue)}})}complete(){(0,ze.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ue}=this;for(;ue.length;)ue.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var ue;return(null===(ue=this.observers)||void 0===ue?void 0:ue.length)>0}_trySubscribe(ue){return this._throwIfClosed(),super._trySubscribe(ue)}_subscribe(ue){return this._throwIfClosed(),this._checkFinalizedStatuses(ue),this._innerSubscribe(ue)}_innerSubscribe(ue){const{hasError:xe,isStopped:Pt,observers:rt}=this;return xe||Pt?ee.Lc:(rt.push(ue),new ee.w0(()=>(0,Pe.P)(rt,ue)))}_checkFinalizedStatuses(ue){const{hasError:xe,thrownError:Pt,isStopped:rt}=this;xe?ue.error(Pt):rt&&ue.complete()}asObservable(){const ue=new d.y;return ue.source=this,ue}}return Ue.create=(he,ue)=>new Be(he,ue),Ue})();class Be extends Le{constructor(he,ue){super(),this.destination=he,this.source=ue}next(he){var ue,xe;null===(xe=null===(ue=this.destination)||void 0===ue?void 0:ue.next)||void 0===xe||xe.call(ue,he)}error(he){var ue,xe;null===(xe=null===(ue=this.destination)||void 0===ue?void 0:ue.error)||void 0===xe||xe.call(ue,he)}complete(){var he,ue;null===(ue=null===(he=this.destination)||void 0===he?void 0:he.complete)||void 0===ue||ue.call(he)}_subscribe(he){var ue,xe;return null!==(xe=null===(ue=this.source)||void 0===ue?void 0:ue.subscribe(he))&&void 0!==xe?xe:ee.Lc}}},2961:(Kt,Xe,G)=>{G.d(Xe,{Hp:()=>Pt,Lv:()=>xe});var d=G(576),ee=G(727),z=G(2416),Ie=G(7849);function Pe(){}const ze=Ue("C",void 0,void 0);function Ue(Ye,Et,Dt){return{kind:Ye,value:Et,error:Dt}}var he=G(3410),ue=G(2806);class xe extends ee.w0{constructor(Et){super(),this.isStopped=!1,Et?(this.destination=Et,(0,ee.Nn)(Et)&&Et.add(this)):this.destination=Fe}static create(Et,Dt,wt){return new Pt(Et,Dt,wt)}next(Et){this.isStopped?At(function Be(Ye){return Ue("N",Ye,void 0)}(Et),this):this._next(Et)}error(Et){this.isStopped?At(function Le(Ye){return Ue("E",void 0,Ye)}(Et),this):(this.isStopped=!0,this._error(Et))}complete(){this.isStopped?At(ze,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Et){this.destination.next(Et)}_error(Et){try{this.destination.error(Et)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Pt extends xe{constructor(Et,Dt,wt){let Gt;if(super(),(0,d.m)(Et))Gt=Et;else if(Et){let ht;({next:Gt,error:Dt,complete:wt}=Et),this&&z.v.useDeprecatedNextContext?(ht=Object.create(Et),ht.unsubscribe=()=>this.unsubscribe()):ht=Et,Gt=null==Gt?void 0:Gt.bind(ht),Dt=null==Dt?void 0:Dt.bind(ht),wt=null==wt?void 0:wt.bind(ht)}this.destination={next:Gt?rt(Gt):Pe,error:rt(null!=Dt?Dt:vt),complete:wt?rt(wt):Pe}}}function rt(Ye,Et){return(...Dt)=>{try{Ye(...Dt)}catch(wt){z.v.useDeprecatedSynchronousErrorHandling?(0,ue.O)(wt):(0,Ie.h)(wt)}}}function vt(Ye){throw Ye}function At(Ye,Et){const{onStoppedNotification:Dt}=z.v;Dt&&he.z.setTimeout(()=>Dt(Ye,Et))}const Fe={closed:!0,next:Pe,error:vt,complete:Pe}},727:(Kt,Xe,G)=>{G.d(Xe,{Lc:()=>ze,w0:()=>Pe,Nn:()=>Le});var d=G(576);const z=(0,G(3888).d)(Ue=>function(ue){Ue(this),this.message=ue?`${ue.length} errors occurred during unsubscription:\n${ue.map((xe,Pt)=>`${Pt+1}) ${xe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ue});var Ie=G(8737);class Pe{constructor(he){this.initialTeardown=he,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let he;if(!this.closed){this.closed=!0;const{_parentage:ue}=this;if(ue)if(this._parentage=null,Array.isArray(ue))for(const rt of ue)rt.remove(this);else ue.remove(this);const{initialTeardown:xe}=this;if((0,d.m)(xe))try{xe()}catch(rt){he=rt instanceof z?rt.errors:[rt]}const{_teardowns:Pt}=this;if(Pt){this._teardowns=null;for(const rt of Pt)try{Be(rt)}catch(vt){he=null!=he?he:[],vt instanceof z?he=[...he,...vt.errors]:he.push(vt)}}if(he)throw new z(he)}}add(he){var ue;if(he&&he!==this)if(this.closed)Be(he);else{if(he instanceof Pe){if(he.closed||he._hasParent(this))return;he._addParent(this)}(this._teardowns=null!==(ue=this._teardowns)&&void 0!==ue?ue:[]).push(he)}}_hasParent(he){const{_parentage:ue}=this;return ue===he||Array.isArray(ue)&&ue.includes(he)}_addParent(he){const{_parentage:ue}=this;this._parentage=Array.isArray(ue)?(ue.push(he),ue):ue?[ue,he]:he}_removeParent(he){const{_parentage:ue}=this;ue===he?this._parentage=null:Array.isArray(ue)&&(0,Ie.P)(ue,he)}remove(he){const{_teardowns:ue}=this;ue&&(0,Ie.P)(ue,he),he instanceof Pe&&he._removeParent(this)}}Pe.EMPTY=(()=>{const Ue=new Pe;return Ue.closed=!0,Ue})();const ze=Pe.EMPTY;function Le(Ue){return Ue instanceof Pe||Ue&&"closed"in Ue&&(0,d.m)(Ue.remove)&&(0,d.m)(Ue.add)&&(0,d.m)(Ue.unsubscribe)}function Be(Ue){(0,d.m)(Ue)?Ue():Ue.unsubscribe()}},2416:(Kt,Xe,G)=>{G.d(Xe,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Kt,Xe,G)=>{G.d(Xe,{E:()=>ee});const ee=new(G(8306).y)(Pe=>Pe.complete())},8996:(Kt,Xe,G)=>{G.d(Xe,{D:()=>Gt});var d=G(8421),ee=G(5363),z=G(9468),ze=G(8306),Be=G(2202),Ue=G(576),he=G(9672);function xe(ht,zt){if(!ht)throw new Error("Iterable cannot be null");return new ze.y(Rt=>{(0,he.f)(Rt,zt,()=>{const bi=ht[Symbol.asyncIterator]();(0,he.f)(Rt,zt,()=>{bi.next().then(be=>{be.done?Rt.complete():Rt.next(be.value)})},0,!0)})})}var Pt=G(3670),rt=G(8239),vt=G(1144),At=G(6495),Fe=G(2206),Ye=G(4532),Et=G(3260);function Gt(ht,zt){return zt?function wt(ht,zt){if(null!=ht){if((0,Pt.c)(ht))return function Ie(ht,zt){return(0,d.Xf)(ht).pipe((0,z.R)(zt),(0,ee.Q)(zt))}(ht,zt);if((0,vt.z)(ht))return function Le(ht,zt){return new ze.y(Rt=>{let bi=0;return zt.schedule(function(){bi===ht.length?Rt.complete():(Rt.next(ht[bi++]),Rt.closed||this.schedule())})})}(ht,zt);if((0,rt.t)(ht))return function Pe(ht,zt){return(0,d.Xf)(ht).pipe((0,z.R)(zt),(0,ee.Q)(zt))}(ht,zt);if((0,Fe.D)(ht))return xe(ht,zt);if((0,At.T)(ht))return function ue(ht,zt){return new ze.y(Rt=>{let bi;return(0,he.f)(Rt,zt,()=>{bi=ht[Be.h](),(0,he.f)(Rt,zt,()=>{let be,We;try{({value:be,done:We}=bi.next())}catch(qe){return void Rt.error(qe)}We?Rt.complete():Rt.next(be)},0,!0)}),()=>(0,Ue.m)(null==bi?void 0:bi.return)&&bi.return()})}(ht,zt);if((0,Et.L)(ht))return function Dt(ht,zt){return xe((0,Et.Q)(ht),zt)}(ht,zt)}throw(0,Ye.z)(ht)}(ht,zt):(0,d.Xf)(ht)}},8421:(Kt,Xe,G)=>{G.d(Xe,{Xf:()=>Pt});var d=G(5987),ee=G(1144),z=G(8239),Ie=G(8306),Pe=G(3670),ze=G(2206),Le=G(4532),Be=G(6495),Ue=G(3260),he=G(576),ue=G(7849),xe=G(8822);function Pt(wt){if(wt instanceof Ie.y)return wt;if(null!=wt){if((0,Pe.c)(wt))return function rt(wt){return new Ie.y(Gt=>{const ht=wt[xe.L]();if((0,he.m)(ht.subscribe))return ht.subscribe(Gt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(wt);if((0,ee.z)(wt))return function vt(wt){return new Ie.y(Gt=>{for(let ht=0;ht<wt.length&&!Gt.closed;ht++)Gt.next(wt[ht]);Gt.complete()})}(wt);if((0,z.t)(wt))return function At(wt){return new Ie.y(Gt=>{wt.then(ht=>{Gt.closed||(Gt.next(ht),Gt.complete())},ht=>Gt.error(ht)).then(null,ue.h)})}(wt);if((0,ze.D)(wt))return Ye(wt);if((0,Be.T)(wt))return function Fe(wt){return new Ie.y(Gt=>{for(const ht of wt)if(Gt.next(ht),Gt.closed)return;Gt.complete()})}(wt);if((0,Ue.L)(wt))return function Et(wt){return Ye((0,Ue.Q)(wt))}(wt)}throw(0,Le.z)(wt)}function Ye(wt){return new Ie.y(Gt=>{(function Dt(wt,Gt){var ht,zt,Rt,bi;return(0,d.mG)(this,void 0,void 0,function*(){try{for(ht=(0,d.KL)(wt);!(zt=yield ht.next()).done;)if(Gt.next(zt.value),Gt.closed)return}catch(be){Rt={error:be}}finally{try{zt&&!zt.done&&(bi=ht.return)&&(yield bi.call(ht))}finally{if(Rt)throw Rt.error}}Gt.complete()})})(wt,Gt).catch(ht=>Gt.error(ht))})}},6451:(Kt,Xe,G)=>{G.d(Xe,{T:()=>ze});var d=G(8189),ee=G(8421),z=G(515),Ie=G(7669),Pe=G(8996);function ze(...Le){const Be=(0,Ie.yG)(Le),Ue=(0,Ie._6)(Le,1/0),he=Le;return he.length?1===he.length?(0,ee.Xf)(he[0]):(0,d.J)(Ue)((0,Pe.D)(he,Be)):z.E}},5403:(Kt,Xe,G)=>{G.d(Xe,{Q:()=>ee});var d=G(2961);class ee extends d.Lv{constructor(Ie,Pe,ze,Le,Be){super(Ie),this.onFinalize=Be,this._next=Pe?function(Ue){try{Pe(Ue)}catch(he){Ie.error(he)}}:super._next,this._error=Le?function(Ue){try{Le(Ue)}catch(he){Ie.error(he)}finally{this.unsubscribe()}}:super._error,this._complete=ze?function(){try{ze()}catch(Ue){Ie.error(Ue)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ie;const{closed:Pe}=this;super.unsubscribe(),!Pe&&(null===(Ie=this.onFinalize)||void 0===Ie||Ie.call(this))}}},4004:(Kt,Xe,G)=>{G.d(Xe,{U:()=>z});var d=G(4482),ee=G(5403);function z(Ie,Pe){return(0,d.e)((ze,Le)=>{let Be=0;ze.subscribe(new ee.Q(Le,Ue=>{Le.next(Ie.call(Pe,Ue,Be++))}))})}},8189:(Kt,Xe,G)=>{G.d(Xe,{J:()=>z});var d=G(5577),ee=G(4671);function z(Ie=1/0){return(0,d.z)(ee.y,Ie)}},5577:(Kt,Xe,G)=>{G.d(Xe,{z:()=>Be});var d=G(4004),ee=G(8421),z=G(4482),Ie=G(9672),Pe=G(5403),Le=G(576);function Be(Ue,he,ue=1/0){return(0,Le.m)(he)?Be((xe,Pt)=>(0,d.U)((rt,vt)=>he(xe,rt,Pt,vt))((0,ee.Xf)(Ue(xe,Pt))),ue):("number"==typeof he&&(ue=he),(0,z.e)((xe,Pt)=>function ze(Ue,he,ue,xe,Pt,rt,vt,At){const Fe=[];let Ye=0,Et=0,Dt=!1;const wt=()=>{Dt&&!Fe.length&&!Ye&&he.complete()},Gt=zt=>Ye<xe?ht(zt):Fe.push(zt),ht=zt=>{rt&&he.next(zt),Ye++;let Rt=!1;(0,ee.Xf)(ue(zt,Et++)).subscribe(new Pe.Q(he,bi=>{null==Pt||Pt(bi),rt?Gt(bi):he.next(bi)},()=>{Rt=!0},void 0,()=>{if(Rt)try{for(Ye--;Fe.length&&Ye<xe;){const bi=Fe.shift();vt?(0,Ie.f)(he,vt,()=>ht(bi)):ht(bi)}wt()}catch(bi){he.error(bi)}}))};return Ue.subscribe(new Pe.Q(he,Gt,()=>{Dt=!0,wt()})),()=>{null==At||At()}}(xe,Pt,Ue,ue)))}},5363:(Kt,Xe,G)=>{G.d(Xe,{Q:()=>Ie});var d=G(9672),ee=G(4482),z=G(5403);function Ie(Pe,ze=0){return(0,ee.e)((Le,Be)=>{Le.subscribe(new z.Q(Be,Ue=>(0,d.f)(Be,Pe,()=>Be.next(Ue),ze),()=>(0,d.f)(Be,Pe,()=>Be.complete(),ze),Ue=>(0,d.f)(Be,Pe,()=>Be.error(Ue),ze)))})}},3099:(Kt,Xe,G)=>{G.d(Xe,{B:()=>ze});var d=G(8996),ee=G(5698),z=G(7579),Ie=G(2961),Pe=G(4482);function ze(Be={}){const{connector:Ue=(()=>new z.x),resetOnError:he=!0,resetOnComplete:ue=!0,resetOnRefCountZero:xe=!0}=Be;return Pt=>{let rt=null,vt=null,At=null,Fe=0,Ye=!1,Et=!1;const Dt=()=>{null==vt||vt.unsubscribe(),vt=null},wt=()=>{Dt(),rt=At=null,Ye=Et=!1},Gt=()=>{const ht=rt;wt(),null==ht||ht.unsubscribe()};return(0,Pe.e)((ht,zt)=>{Fe++,!Et&&!Ye&&Dt();const Rt=At=null!=At?At:Ue();zt.add(()=>{Fe--,0===Fe&&!Et&&!Ye&&(vt=Le(Gt,xe))}),Rt.subscribe(zt),rt||(rt=new Ie.Hp({next:bi=>Rt.next(bi),error:bi=>{Et=!0,Dt(),vt=Le(wt,he,bi),Rt.error(bi)},complete:()=>{Ye=!0,Dt(),vt=Le(wt,ue),Rt.complete()}}),(0,d.D)(ht).subscribe(rt))})(Pt)}}function Le(Be,Ue,...he){return!0===Ue?(Be(),null):!1===Ue?null:Ue(...he).pipe((0,ee.q)(1)).subscribe(()=>Be())}},9468:(Kt,Xe,G)=>{G.d(Xe,{R:()=>ee});var d=G(4482);function ee(z,Ie=0){return(0,d.e)((Pe,ze)=>{ze.add(z.schedule(()=>Pe.subscribe(ze),Ie))})}},5698:(Kt,Xe,G)=>{G.d(Xe,{q:()=>Ie});var d=G(515),ee=G(4482),z=G(5403);function Ie(Pe){return Pe<=0?()=>d.E:(0,ee.e)((ze,Le)=>{let Be=0;ze.subscribe(new z.Q(Le,Ue=>{++Be<=Pe&&(Le.next(Ue),Pe<=Be&&Le.complete())}))})}},8505:(Kt,Xe,G)=>{G.d(Xe,{b:()=>Pe});var d=G(576),ee=G(4482),z=G(5403),Ie=G(4671);function Pe(ze,Le,Be){const Ue=(0,d.m)(ze)||Le||Be?{next:ze,error:Le,complete:Be}:ze;return Ue?(0,ee.e)((he,ue)=>{var xe;null===(xe=Ue.subscribe)||void 0===xe||xe.call(Ue);let Pt=!0;he.subscribe(new z.Q(ue,rt=>{var vt;null===(vt=Ue.next)||void 0===vt||vt.call(Ue,rt),ue.next(rt)},()=>{var rt;Pt=!1,null===(rt=Ue.complete)||void 0===rt||rt.call(Ue),ue.complete()},rt=>{var vt;Pt=!1,null===(vt=Ue.error)||void 0===vt||vt.call(Ue,rt),ue.error(rt)},()=>{var rt,vt;Pt&&(null===(rt=Ue.unsubscribe)||void 0===rt||rt.call(Ue)),null===(vt=Ue.finalize)||void 0===vt||vt.call(Ue)}))}):Ie.y}},4408:(Kt,Xe,G)=>{G.d(Xe,{o:()=>Pe});var d=G(727);class ee extends d.w0{constructor(Le,Be){super()}schedule(Le,Be=0){return this}}const z={setInterval(...ze){const{delegate:Le}=z;return((null==Le?void 0:Le.setInterval)||setInterval)(...ze)},clearInterval(ze){const{delegate:Le}=z;return((null==Le?void 0:Le.clearInterval)||clearInterval)(ze)},delegate:void 0};var Ie=G(8737);class Pe extends ee{constructor(Le,Be){super(Le,Be),this.scheduler=Le,this.work=Be,this.pending=!1}schedule(Le,Be=0){if(this.closed)return this;this.state=Le;const Ue=this.id,he=this.scheduler;return null!=Ue&&(this.id=this.recycleAsyncId(he,Ue,Be)),this.pending=!0,this.delay=Be,this.id=this.id||this.requestAsyncId(he,this.id,Be),this}requestAsyncId(Le,Be,Ue=0){return z.setInterval(Le.flush.bind(Le,this),Ue)}recycleAsyncId(Le,Be,Ue=0){if(null!=Ue&&this.delay===Ue&&!1===this.pending)return Be;z.clearInterval(Be)}execute(Le,Be){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ue=this._execute(Le,Be);if(Ue)return Ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Le,Be){let he,Ue=!1;try{this.work(Le)}catch(ue){Ue=!0,he=ue||new Error("Scheduled action threw falsy error")}if(Ue)return this.unsubscribe(),he}unsubscribe(){if(!this.closed){const{id:Le,scheduler:Be}=this,{actions:Ue}=Be;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ie.P)(Ue,this),null!=Le&&(this.id=this.recycleAsyncId(Be,Le,null)),this.delay=null,super.unsubscribe()}}}},7565:(Kt,Xe,G)=>{G.d(Xe,{v:()=>z});var d=G(6063);class ee{constructor(Pe,ze=ee.now){this.schedulerActionCtor=Pe,this.now=ze}schedule(Pe,ze=0,Le){return new this.schedulerActionCtor(this,Pe).schedule(Le,ze)}}ee.now=d.l.now;class z extends ee{constructor(Pe,ze=ee.now){super(Pe,ze),this.actions=[],this._active=!1,this._scheduled=void 0}flush(Pe){const{actions:ze}=this;if(this._active)return void ze.push(Pe);let Le;this._active=!0;do{if(Le=Pe.execute(Pe.state,Pe.delay))break}while(Pe=ze.shift());if(this._active=!1,Le){for(;Pe=ze.shift();)Pe.unsubscribe();throw Le}}}},4986:(Kt,Xe,G)=>{G.d(Xe,{z:()=>z});var d=G(4408);const z=new(G(7565).v)(d.o)},6063:(Kt,Xe,G)=>{G.d(Xe,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(Kt,Xe,G)=>{G.d(Xe,{z:()=>d});const d={setTimeout(...ee){const{delegate:z}=d;return((null==z?void 0:z.setTimeout)||setTimeout)(...ee)},clearTimeout(ee){const{delegate:z}=d;return((null==z?void 0:z.clearTimeout)||clearTimeout)(ee)},delegate:void 0}},2202:(Kt,Xe,G)=>{G.d(Xe,{h:()=>ee});const ee=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Kt,Xe,G)=>{G.d(Xe,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Kt,Xe,G)=>{G.d(Xe,{_6:()=>ze,jO:()=>Ie,yG:()=>Pe});var d=G(576);function z(Le){return Le[Le.length-1]}function Ie(Le){return(0,d.m)(z(Le))?Le.pop():void 0}function Pe(Le){return function ee(Le){return Le&&(0,d.m)(Le.schedule)}(z(Le))?Le.pop():void 0}function ze(Le,Be){return"number"==typeof z(Le)?Le.pop():Be}},8737:(Kt,Xe,G)=>{function d(ee,z){if(ee){const Ie=ee.indexOf(z);0<=Ie&&ee.splice(Ie,1)}}G.d(Xe,{P:()=>d})},3888:(Kt,Xe,G)=>{function d(ee){const Ie=ee(Pe=>{Error.call(Pe),Pe.stack=(new Error).stack});return Ie.prototype=Object.create(Error.prototype),Ie.prototype.constructor=Ie,Ie}G.d(Xe,{d:()=>d})},2806:(Kt,Xe,G)=>{G.d(Xe,{O:()=>Ie,x:()=>z});var d=G(2416);let ee=null;function z(Pe){if(d.v.useDeprecatedSynchronousErrorHandling){const ze=!ee;if(ze&&(ee={errorThrown:!1,error:null}),Pe(),ze){const{errorThrown:Le,error:Be}=ee;if(ee=null,Le)throw Be}}else Pe()}function Ie(Pe){d.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=Pe)}},9672:(Kt,Xe,G)=>{function d(ee,z,Ie,Pe=0,ze=!1){const Le=z.schedule(function(){Ie(),ze?ee.add(this.schedule(null,Pe)):this.unsubscribe()},Pe);if(ee.add(Le),!ze)return Le}G.d(Xe,{f:()=>d})},4671:(Kt,Xe,G)=>{function d(ee){return ee}G.d(Xe,{y:()=>d})},1144:(Kt,Xe,G)=>{G.d(Xe,{z:()=>d});const d=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(Kt,Xe,G)=>{G.d(Xe,{D:()=>ee});var d=G(576);function ee(z){return Symbol.asyncIterator&&(0,d.m)(null==z?void 0:z[Symbol.asyncIterator])}},576:(Kt,Xe,G)=>{function d(ee){return"function"==typeof ee}G.d(Xe,{m:()=>d})},3670:(Kt,Xe,G)=>{G.d(Xe,{c:()=>z});var d=G(8822),ee=G(576);function z(Ie){return(0,ee.m)(Ie[d.L])}},6495:(Kt,Xe,G)=>{G.d(Xe,{T:()=>z});var d=G(2202),ee=G(576);function z(Ie){return(0,ee.m)(null==Ie?void 0:Ie[d.h])}},8239:(Kt,Xe,G)=>{G.d(Xe,{t:()=>ee});var d=G(576);function ee(z){return(0,d.m)(null==z?void 0:z.then)}},3260:(Kt,Xe,G)=>{G.d(Xe,{L:()=>Ie,Q:()=>z});var d=G(5987),ee=G(576);function z(Pe){return(0,d.FC)(this,arguments,function*(){const Le=Pe.getReader();try{for(;;){const{value:Be,done:Ue}=yield(0,d.qq)(Le.read());if(Ue)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(Be)}}finally{Le.releaseLock()}})}function Ie(Pe){return(0,ee.m)(null==Pe?void 0:Pe.getReader)}},4482:(Kt,Xe,G)=>{G.d(Xe,{A:()=>ee,e:()=>z});var d=G(576);function ee(Ie){return(0,d.m)(null==Ie?void 0:Ie.lift)}function z(Ie){return Pe=>{if(ee(Pe))return Pe.lift(function(ze){try{return Ie(ze,this)}catch(Le){this.error(Le)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(Kt,Xe,G)=>{G.d(Xe,{h:()=>z});var d=G(2416),ee=G(3410);function z(Ie){ee.z.setTimeout(()=>{const{onUnhandledError:Pe}=d.v;if(!Pe)throw Ie;Pe(Ie)})}},4532:(Kt,Xe,G)=>{function d(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}G.d(Xe,{z:()=>d})},5987:(Kt,Xe,G)=>{function Be(be,We,qe,Qe){return new(qe||(qe=Promise))(function(Ve,xi){function Bs(Wi){try{ui(Qe.next(Wi))}catch(ba){xi(ba)}}function Yr(Wi){try{ui(Qe.throw(Wi))}catch(ba){xi(ba)}}function ui(Wi){Wi.done?Ve(Wi.value):function xt(Ve){return Ve instanceof qe?Ve:new qe(function(xi){xi(Ve)})}(Wi.value).then(Bs,Yr)}ui((Qe=Qe.apply(be,We||[])).next())})}function Fe(be){return this instanceof Fe?(this.v=be,this):new Fe(be)}function Ye(be,We,qe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xt,Qe=qe.apply(be,We||[]),Ve=[];return xt={},xi("next"),xi("throw"),xi("return"),xt[Symbol.asyncIterator]=function(){return this},xt;function xi(bn){Qe[bn]&&(xt[bn]=function(io){return new Promise(function(qs,Tn){Ve.push([bn,io,qs,Tn])>1||Bs(bn,io)})})}function Bs(bn,io){try{!function Yr(bn){bn.value instanceof Fe?Promise.resolve(bn.value.v).then(ui,Wi):ba(Ve[0][2],bn)}(Qe[bn](io))}catch(qs){ba(Ve[0][3],qs)}}function ui(bn){Bs("next",bn)}function Wi(bn){Bs("throw",bn)}function ba(bn,io){bn(io),Ve.shift(),Ve.length&&Bs(Ve[0][0],Ve[0][1])}}function Dt(be){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var qe,We=be[Symbol.asyncIterator];return We?We.call(be):(be=function xe(be){var We="function"==typeof Symbol&&Symbol.iterator,qe=We&&be[We],Qe=0;if(qe)return qe.call(be);if(be&&"number"==typeof be.length)return{next:function(){return be&&Qe>=be.length&&(be=void 0),{value:be&&be[Qe++],done:!be}}};throw new TypeError(We?"Object is not iterable.":"Symbol.iterator is not defined.")}(be),qe={},Qe("next"),Qe("throw"),Qe("return"),qe[Symbol.asyncIterator]=function(){return this},qe);function Qe(Ve){qe[Ve]=be[Ve]&&function(xi){return new Promise(function(Bs,Yr){!function xt(Ve,xi,Bs,Yr){Promise.resolve(Yr).then(function(ui){Ve({value:ui,done:Bs})},xi)}(Bs,Yr,(xi=be[Ve](xi)).done,xi.value)})}}}G.d(Xe,{FC:()=>Ye,KL:()=>Dt,mG:()=>Be,qq:()=>Fe})},5e3:(Kt,Xe,G)=>{G.d(Xe,{$8M:()=>mf,$Z:()=>gA,AFp:()=>Kf,AaK:()=>Be,CHM:()=>Rm,CRH:()=>fD,CZH:()=>fc,CqO:()=>xp,DdM:()=>ds,EJc:()=>qi,EpF:()=>Hr,F$t:()=>HS,F4k:()=>Ih,FYo:()=>__,FiY:()=>ol,G48:()=>J_,Gf:()=>pD,GfV:()=>NP,Gpc:()=>ue,Hsn:()=>jS,JOm:()=>Ma,LFG:()=>Vr,LSH:()=>mp,Lbi:()=>Go,MAs:()=>rA,NdJ:()=>Lg,OlP:()=>Qn,Oqu:()=>Ah,PXZ:()=>MD,Q6J:()=>Na,QGY:()=>CA,Qsj:()=>ys,R0b:()=>Hl,RDi:()=>Om,Rgc:()=>Qr,SBq:()=>sb,Sil:()=>gE,Suo:()=>R_,TTD:()=>Wh,TgZ:()=>Pg,VLi:()=>Qc,W1O:()=>N_,X6Q:()=>EE,XFs:()=>Vi,Xpm:()=>Ho,Y36:()=>qf,YKP:()=>BP,YNc:()=>MS,Yjl:()=>Ze,Yz7:()=>qs,ZZ4:()=>xE,_Bn:()=>nE,_UZ:()=>O0,_Vd:()=>ib,_c5:()=>AE,_uU:()=>j0,aQ5:()=>id,aQg:()=>Np,c2e:()=>ny,cJS:()=>ta,cg1:()=>r_,dDg:()=>Rp,deG:()=>jw,dqk:()=>es,eFA:()=>PD,ekj:()=>V0,g9A:()=>pn,h0i:()=>Vl,hGG:()=>aI,iGM:()=>dD,ifc:()=>Yi,ip1:()=>iy,kL8:()=>RA,kYT:()=>q,lG2:()=>ge,n5z:()=>ff,oAB:()=>W,oxw:()=>wu,q4F:()=>fi,qLn:()=>vp,qOj:()=>Ls,qZA:()=>k0,sBO:()=>hy,sIi:()=>Pn,s_b:()=>k_,soG:()=>zr,tBr:()=>la,tb:()=>sy,tp0:()=>mu,uIk:()=>w0,vHH:()=>vt,vpe:()=>qn,wAp:()=>Ri,xp6:()=>IT,z2F:()=>Eb,zSh:()=>qT,zs3:()=>A});var d=G(7579),ee=G(727),z=G(8306),Ie=G(6451),Pe=G(3099);function ze(l){for(let c in l)if(l[c]===ze)return c;throw Error("Could not find renamed property on target object.")}function Le(l,c){for(const h in c)c.hasOwnProperty(h)&&!l.hasOwnProperty(h)&&(l[h]=c[h])}function Be(l){if("string"==typeof l)return l;if(Array.isArray(l))return"["+l.map(Be).join(", ")+"]";if(null==l)return""+l;if(l.overriddenName)return`${l.overriddenName}`;if(l.name)return`${l.name}`;const c=l.toString();if(null==c)return""+c;const h=c.indexOf("\n");return-1===h?c:c.substring(0,h)}function Ue(l,c){return null==l||""===l?null===c?"":c:null==c||""===c?l:l+" "+c}const he=ze({__forward_ref__:ze});function ue(l){return l.__forward_ref__=ue,l.toString=function(){return Be(this())},l}function xe(l){return Pt(l)?l():l}function Pt(l){return"function"==typeof l&&l.hasOwnProperty(he)&&l.__forward_ref__===ue}class vt extends Error{constructor(c,h){super(function At(l,c){return`NG0${Math.abs(l)}${c?": "+c:""}`}(c,h)),this.code=c}}function Fe(l){return"string"==typeof l?l:null==l?"":String(l)}function Ye(l){return"function"==typeof l?l.name||l.toString():"object"==typeof l&&null!=l&&"function"==typeof l.type?l.type.name||l.type.toString():Fe(l)}function Gt(l,c){const h=c?` in ${c}`:"";throw new vt(-201,`No provider for ${Ye(l)} found${h}`)}function ui(l,c){null==l&&function Wi(l,c,h,f){throw new Error(`ASSERTION ERROR: ${l}`+(null==f?"":` [Expected=> ${h} ${f} ${c} <=Actual]`))}(c,l,null,"!=")}function qs(l){return{token:l.token,providedIn:l.providedIn||null,factory:l.factory,value:void 0}}function ta(l){return{providers:l.providers||[],imports:l.imports||[]}}function An(l){return Sl(l,Ka)||Sl(l,Ca)}function Sl(l,c){return l.hasOwnProperty(c)?l[c]:null}function sh(l){return l&&(l.hasOwnProperty(ia)||l.hasOwnProperty(_l))?l[ia]:null}const Ka=ze({\u0275prov:ze}),ia=ze({\u0275inj:ze}),Ca=ze({ngInjectableDef:ze}),_l=ze({ngInjectorDef:ze});var Vi=(()=>((Vi=Vi||{})[Vi.Default=0]="Default",Vi[Vi.Host=1]="Host",Vi[Vi.Self=2]="Self",Vi[Vi.SkipSelf=4]="SkipSelf",Vi[Vi.Optional=8]="Optional",Vi))();let Ea;function Zi(l){const c=Ea;return Ea=l,c}function wa(l,c,h){const f=An(l);return f&&"root"==f.providedIn?void 0===f.value?f.value=f.factory():f.value:h&Vi.Optional?null:void 0!==c?c:void Gt(Be(l),"Injector")}function Vn(l){return{toString:l}.toString()}var dt=(()=>((dt=dt||{})[dt.OnPush=0]="OnPush",dt[dt.Default=1]="Default",dt))(),Yi=(()=>{return(l=Yi||(Yi={}))[l.Emulated=0]="Emulated",l[l.None=2]="None",l[l.ShadowDom=3]="ShadowDom",Yi;var l})();const di="undefined"!=typeof globalThis&&globalThis,ai="undefined"!=typeof window&&window,Za="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,es=di||"undefined"!=typeof global&&global||ai||Za,fn={},Si=[],Ss=ze({\u0275cmp:ze}),ni=ze({\u0275dir:ze}),Kn=ze({\u0275pipe:ze}),Rr=ze({\u0275mod:ze}),Dn=ze({\u0275fac:ze}),$s=ze({__NG_ELEMENT_ID__:ze});let Xa=0;function Ho(l){return Vn(()=>{const h={},f={type:l.type,providersResolver:null,decls:l.decls,vars:l.vars,factory:null,template:l.template||null,consts:l.consts||null,ngContentSelectors:l.ngContentSelectors,hostBindings:l.hostBindings||null,hostVars:l.hostVars||0,hostAttrs:l.hostAttrs||null,contentQueries:l.contentQueries||null,declaredInputs:h,inputs:null,outputs:null,exportAs:l.exportAs||null,onPush:l.changeDetection===dt.OnPush,directiveDefs:null,pipeDefs:null,selectors:l.selectors||Si,viewQuery:l.viewQuery||null,features:l.features||null,data:l.data||{},encapsulation:l.encapsulation||Yi.Emulated,id:"c",styles:l.styles||Si,_:null,setInput:null,schemas:l.schemas||null,tView:null},g=l.directives,b=l.features,S=l.pipes;return f.id+=Xa++,f.inputs=U(l.inputs,h),f.outputs=U(l.outputs),b&&b.forEach(T=>T(f)),f.directiveDefs=g?()=>("function"==typeof g?g():g).map(Kr):null,f.pipeDefs=S?()=>("function"==typeof S?S():S).map(ne):null,f})}function Kr(l){return Ot(l)||function Ci(l){return l[ni]||null}(l)}function ne(l){return function Ei(l){return l[Kn]||null}(l)}const te={};function W(l){return Vn(()=>{const c={type:l.type,bootstrap:l.bootstrap||Si,declarations:l.declarations||Si,imports:l.imports||Si,exports:l.exports||Si,transitiveCompileScopes:null,schemas:l.schemas||null,id:l.id||null};return null!=l.id&&(te[l.id]=l.type),c})}function q(l,c){return Vn(()=>{const h=$i(l,!0);h.declarations=c.declarations||Si,h.imports=c.imports||Si,h.exports=c.exports||Si})}function U(l,c){if(null==l)return fn;const h={};for(const f in l)if(l.hasOwnProperty(f)){let g=l[f],b=g;Array.isArray(g)&&(b=g[1],g=g[0]),h[g]=f,c&&(c[g]=b)}return h}const ge=Ho;function Ze(l){return{type:l.type,name:l.name,factory:null,pure:!1!==l.pure,onDestroy:l.type.prototype.ngOnDestroy||null}}function Ot(l){return l[Ss]||null}function $i(l,c){const h=l[Rr]||null;if(!h&&!0===c)throw new Error(`Type ${Be(l)} does not have '\u0275mod' property.`);return h}function Uo(l){return Array.isArray(l)&&"object"==typeof l[1]}function xa(l){return Array.isArray(l)&&!0===l[1]}function oh(l){return 0!=(8&l.flags)}function Qp(l){return 2==(2&l.flags)}function Fu(l){return 1==(1&l.flags)}function na(l){return null!==l.template}function Jp(l){return 0!=(512&l[2])}function ah(l,c){return l.hasOwnProperty(Dn)?l[Dn]:null}class sv{constructor(c,h,f){this.previousValue=c,this.currentValue=h,this.firstChange=f}isFirstChange(){return this.firstChange}}function Wh(){return Bu}function Bu(l){return l.type.prototype.ngOnChanges&&(l.setInput=rv),nv}function nv(){const l=Dc(this),c=null==l?void 0:l.current;if(c){const h=l.previous;if(h===fn)l.previous=c;else for(let f in c)h[f]=c[f];l.current=null,this.ngOnChanges(c)}}function rv(l,c,h,f){const g=Dc(l)||function km(l,c){return l[ti]=c}(l,{previous:fn,current:null}),b=g.current||(g.current={}),S=g.previous,T=this.declaredInputs[h],k=S[T];b[T]=new sv(k&&k.currentValue,c,S===fn),l[f]=c}Wh.ngInherit=!0;const ti="__ngSimpleChanges__";function Dc(l){return l[ti]||null}let Gd;function Om(l){Gd=l}function jn(l){return!!l.listen}const $h={createRenderer:(l,c)=>function qh(){return void 0!==Gd?Gd:"undefined"!=typeof document?document:void 0}()};function mn(l){for(;Array.isArray(l);)l=l[0];return l}function Yl(l,c){return mn(c[l])}function zo(l,c){return mn(c[l.index])}function Gh(l,c){return l.data[c]}function ro(l,c){const h=c[l];return Uo(h)?h:h[0]}function kc(l){return 4==(4&l[2])}function xo(l){return 128==(128&l[2])}function Ja(l,c){return null==c?null:l[c]}function oo(l){l[18]=0}function Kd(l,c){l[5]+=c;let h=l,f=l[3];for(;null!==f&&(1===c&&1===h[5]||-1===c&&0===h[5]);)f[5]+=c,h=f,f=f[3]}const Oi={lFrame:Zh(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function zu(){return Oi.bindingsEnabled}function it(){return Oi.lFrame.lView}function Es(){return Oi.lFrame.tView}function Rm(l){return Oi.lFrame.contextLView=l,l[8]}function an(){let l=lf();for(;null!==l&&64===l.type;)l=l.parent;return l}function lf(){return Oi.lFrame.currentTNode}function Zn(l,c){const h=Oi.lFrame;h.currentTNode=l,h.isParent=c}function Il(){return Oi.lFrame.isParent}function lh(){Oi.lFrame.isParent=!1}function Zl(){return Oi.isInCheckNoChangesMode}function Aa(l){Oi.isInCheckNoChangesMode=l}function Oc(){return Oi.lFrame.bindingIndex++}function Nm(l,c){const h=Oi.lFrame;h.bindingIndex=h.bindingRootIndex=l,tl(c)}function tl(l){Oi.lFrame.currentDirectiveIndex=l}function $u(){return Oi.lFrame.currentQueryIndex}function Gu(l){Oi.lFrame.currentQueryIndex=l}function cf(l){const c=l[1];return 2===c.type?c.declTNode:1===c.type?l[6]:null}function Yu(l,c,h){if(h&Vi.SkipSelf){let g=c,b=l;for(;!(g=g.parent,null!==g||h&Vi.Host||(g=cf(b),null===g||(b=b[15],10&g.type))););if(null===g)return!1;c=g,l=b}const f=Oi.lFrame=hf();return f.currentTNode=c,f.lView=l,!0}function Pc(l){const c=hf(),h=l[1];Oi.lFrame=c,c.currentTNode=h.firstChild,c.lView=l,c.tView=h,c.contextLView=l,c.bindingIndex=h.bindingStartIndex,c.inI18n=!1}function hf(){const l=Oi.lFrame,c=null===l?null:l.child;return null===c?Zh(l):c}function Zh(l){const c={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:l,child:null,inI18n:!1};return null!==l&&(l.child=c),c}function Xh(){const l=Oi.lFrame;return Oi.lFrame=l.parent,l.currentTNode=null,l.lView=null,l}const uf=Xh;function Un(){const l=Xh();l.isParent=!0,l.tView=null,l.selectedIndex=-1,l.contextLView=null,l.elementDepthCount=0,l.currentDirectiveIndex=-1,l.currentNamespace=null,l.bindingRootIndex=-1,l.bindingIndex=-1,l.currentQueryIndex=0}function Cr(){return Oi.lFrame.selectedIndex}function Er(l){Oi.lFrame.selectedIndex=l}function wn(){const l=Oi.lFrame;return Gh(l.tView,l.selectedIndex)}function eu(l,c){for(let h=c.directiveStart,f=c.directiveEnd;h<f;h++){const b=l.data[h].type.prototype,{ngAfterContentInit:S,ngAfterContentChecked:T,ngAfterViewInit:k,ngAfterViewChecked:R,ngOnDestroy:B}=b;S&&(l.contentHooks||(l.contentHooks=[])).push(-h,S),T&&((l.contentHooks||(l.contentHooks=[])).push(h,T),(l.contentCheckHooks||(l.contentCheckHooks=[])).push(h,T)),k&&(l.viewHooks||(l.viewHooks=[])).push(-h,k),R&&((l.viewHooks||(l.viewHooks=[])).push(h,R),(l.viewCheckHooks||(l.viewCheckHooks=[])).push(h,R)),null!=B&&(l.destroyHooks||(l.destroyHooks=[])).push(h,B)}}function Xl(l,c,h){iu(l,c,3,h)}function ch(l,c,h,f){(3&l[2])===h&&iu(l,c,h,f)}function tu(l,c){let h=l[2];(3&h)===c&&(h&=2047,h+=1,l[2]=h)}function iu(l,c,h,f){const b=null!=f?f:-1,S=c.length-1;let T=0;for(let k=void 0!==f?65535&l[18]:0;k<S;k++)if("number"==typeof c[k+1]){if(T=c[k],null!=f&&T>=f)break}else c[k]<0&&(l[18]+=65536),(T<b||-1==b)&&(Bm(l,h,c,k),l[18]=(4294901760&l[18])+k+2),k++}function Bm(l,c,h,f){const g=h[f]<0,b=h[f+1],T=l[g?-h[f]:h[f]];if(g){if(l[2]>>11<l[18]>>16&&(3&l[2])===c){l[2]+=2048;try{b.call(T)}finally{}}}else try{b.call(T)}finally{}}class su{constructor(c,h,f){this.factory=c,this.resolving=!1,this.canSeeViewProviders=h,this.injectImpl=f}}function ru(l,c,h){const f=jn(l);let g=0;for(;g<h.length;){const b=h[g];if("number"==typeof b){if(0!==b)break;g++;const S=h[g++],T=h[g++],k=h[g++];f?l.setAttribute(c,T,k,S):c.setAttributeNS(S,T,k)}else{const S=b,T=h[++g];ln(S)?f&&l.setProperty(c,S,T):f?l.setAttribute(c,S,T):c.setAttribute(S,T),g++}}return g}function hh(l){return 3===l||4===l||6===l}function ln(l){return 64===l.charCodeAt(0)}function _i(l,c){if(null!==c&&0!==c.length)if(null===l||0===l.length)l=c.slice();else{let h=-1;for(let f=0;f<c.length;f++){const g=c[f];"number"==typeof g?h=g:0===h||To(l,h,g,null,-1===h||2===h?c[++f]:null)}}return l}function To(l,c,h,f,g){let b=0,S=l.length;if(-1===c)S=-1;else for(;b<l.length;){const T=l[b++];if("number"==typeof T){if(T===c){S=-1;break}if(T>c){S=b-1;break}}}for(;b<l.length;){const T=l[b];if("number"==typeof T)break;if(T===h){if(null===f)return void(null!==g&&(l[b+1]=g));if(f===l[b+1])return void(l[b+2]=g)}b++,null!==f&&b++,null!==g&&b++}-1!==S&&(l.splice(S,0,c),b=S+1),l.splice(b++,0,h),null!==f&&l.splice(b++,0,f),null!==g&&l.splice(b++,0,g)}function wr(l){return-1!==l}function Ql(l){return 32767&l}function or(l,c){let h=function Lc(l){return l>>16}(l),f=c;for(;h>0;)f=f[15],h--;return f}let Fr=!0;function ao(l){const c=Fr;return Fr=l,c}let oa=0;function Jl(l,c){const h=ou(l,c);if(-1!==h)return h;const f=c[1];f.firstCreatePass&&(l.injectorIndex=c.length,Jd(f.data,l),Jd(c,null),Jd(f.blueprint,null));const g=Qu(l,c),b=l.injectorIndex;if(wr(g)){const S=Ql(g),T=or(g,c),k=T[1].data;for(let R=0;R<8;R++)c[b+R]=T[S+R]|k[S+R]}return c[b+8]=g,b}function Jd(l,c){l.push(0,0,0,0,0,0,0,0,c)}function ou(l,c){return-1===l.injectorIndex||l.parent&&l.parent.injectorIndex===l.injectorIndex||null===c[l.injectorIndex+8]?-1:l.injectorIndex}function Qu(l,c){if(l.parent&&-1!==l.parent.injectorIndex)return l.parent.injectorIndex;let h=0,f=null,g=c;for(;null!==g;){const b=g[1],S=b.type;if(f=2===S?b.declTNode:1===S?g[6]:null,null===f)return-1;if(h++,g=g[15],-1!==f.injectorIndex)return f.injectorIndex|h<<16}return-1}function Ju(l,c,h){!function hv(l,c,h){let f;"string"==typeof h?f=h.charCodeAt(0)||0:h.hasOwnProperty($s)&&(f=h[$s]),null==f&&(f=h[$s]=oa++);const g=255&f;c.data[l+(g>>5)]|=1<<g}(l,c,h)}function ep(l,c,h){if(h&Vi.Optional)return l;Gt(c,"NodeInjector")}function tp(l,c,h,f){if(h&Vi.Optional&&void 0===f&&(f=null),0==(h&(Vi.Self|Vi.Host))){const g=l[9],b=Zi(void 0);try{return g?g.get(c,f,h&Vi.Optional):wa(c,f,h&Vi.Optional)}finally{Zi(b)}}return ep(f,c,h)}function uh(l,c,h,f=Vi.Default,g){if(null!==l){const b=function Sr(l){if("string"==typeof l)return l.charCodeAt(0)||0;const c=l.hasOwnProperty($s)?l[$s]:void 0;return"number"==typeof c?c>=0?255&c:Um:c}(h);if("function"==typeof b){if(!Yu(c,l,f))return f&Vi.Host?ep(g,h,f):tp(c,h,f,g);try{const S=b(f);if(null!=S||f&Vi.Optional)return S;Gt(h)}finally{uf()}}else if("number"==typeof b){let S=null,T=ou(l,c),k=-1,R=f&Vi.Host?c[16][6]:null;for((-1===T||f&Vi.SkipSelf)&&(k=-1===T?Qu(l,c):c[T+8],-1!==k&&lu(f,!1)?(S=c[1],T=Ql(k),c=or(k,c)):T=-1);-1!==T;){const B=c[1];if(zm(b,T,B.data)){const $=uv(T,c,h,S,f,R);if($!==au)return $}k=c[T+8],-1!==k&&lu(f,c[1].data[T+8]===R)&&zm(b,T,c)?(S=B,T=Ql(k),c=or(k,c)):T=-1}}}return tp(c,h,f,g)}const au={};function Um(){return new ec(an(),it())}function uv(l,c,h,f,g,b){const S=c[1],T=S.data[l+8],B=pf(T,S,h,null==f?Qp(T)&&Fr:f!=S&&0!=(3&T.type),g&Vi.Host&&b===T);return null!==B?sl(c,S,B,T):au}function pf(l,c,h,f,g){const b=l.providerIndexes,S=c.data,T=1048575&b,k=l.directiveStart,B=b>>20,le=g?T+B:l.directiveEnd;for(let de=f?T:T+B;de<le;de++){const $e=S[de];if(de<k&&h===$e||de>=k&&$e.type===h)return de}if(g){const de=S[k];if(de&&na(de)&&de.type===h)return k}return null}function sl(l,c,h,f){let g=l[h];const b=c.data;if(function Vm(l){return l instanceof su}(g)){const S=g;S.resolving&&function Et(l,c){const h=c?`. Dependency path: ${c.join(" > ")} > ${l}`:"";throw new vt(-200,`Circular dependency in DI detected for ${l}${h}`)}(Ye(b[h]));const T=ao(S.canSeeViewProviders);S.resolving=!0;const k=S.injectImpl?Zi(S.injectImpl):null;Yu(l,f,Vi.Default);try{g=l[h]=S.factory(void 0,b,l,f),c.firstCreatePass&&h>=f.directiveStart&&function NC(l,c,h){const{ngOnChanges:f,ngOnInit:g,ngDoCheck:b}=c.type.prototype;if(f){const S=Bu(c);(h.preOrderHooks||(h.preOrderHooks=[])).push(l,S),(h.preOrderCheckHooks||(h.preOrderCheckHooks=[])).push(l,S)}g&&(h.preOrderHooks||(h.preOrderHooks=[])).push(0-l,g),b&&((h.preOrderHooks||(h.preOrderHooks=[])).push(l,b),(h.preOrderCheckHooks||(h.preOrderCheckHooks=[])).push(l,b))}(h,b[h],c)}finally{null!==k&&Zi(k),ao(T),S.resolving=!1,uf()}}return g}function zm(l,c,h){return!!(h[c+(l>>5)]&1<<l)}function lu(l,c){return!(l&Vi.Self||l&Vi.Host&&c)}class ec{constructor(c,h){this._tNode=c,this._lView=h}get(c,h,f){return uh(this._tNode,this._lView,c,f,h)}}function ff(l){return Vn(()=>{const c=l.prototype.constructor,h=c[Dn]||ip(c),f=Object.prototype;let g=Object.getPrototypeOf(l.prototype).constructor;for(;g&&g!==f;){const b=g[Dn]||ip(g);if(b&&b!==h)return b;g=Object.getPrototypeOf(g)}return b=>new b})}function ip(l){return Pt(l)?()=>{const c=ip(xe(l));return c&&c()}:ah(l)}function mf(l){return function xl(l,c){if("class"===c)return l.classes;if("style"===c)return l.styles;const h=l.attrs;if(h){const f=h.length;let g=0;for(;g<f;){const b=h[g];if(hh(b))break;if(0===b)g+=2;else if("number"==typeof b)for(g++;g<f&&"string"==typeof h[g];)g++;else{if(b===c)return h[g+1];g+=2}}}return null}(an(),l)}const On="__parameters__",ed="__prop__metadata__";function Nc(l){return function(...h){if(l){const f=l(...h);for(const g in f)this[g]=f[g]}}}function Fc(l,c,h){return Vn(()=>{const f=Nc(c);function g(...b){if(this instanceof g)return f.apply(this,b),this;const S=new g(...b);return T.annotation=S,T;function T(k,R,B){const $=k.hasOwnProperty(On)?k[On]:Object.defineProperty(k,On,{value:[]})[On];for(;$.length<=B;)$.push(null);return($[B]=$[B]||[]).push(S),k}}return h&&(g.prototype=Object.create(h.prototype)),g.prototype.ngMetadataName=l,g.annotationCls=g,g})}function VC(l,c,h,f){return Vn(()=>{const g=Nc(c);function b(...S){if(this instanceof b)return g.apply(this,S),this;const T=new b(...S);return function k(R,B){const $=R.constructor,le=$.hasOwnProperty(ed)?$[ed]:Object.defineProperty($,ed,{value:{}})[ed];le[B]=le.hasOwnProperty(B)&&le[B]||[],le[B].unshift(T),f&&f(R,B,...S)}}return h&&(b.prototype=Object.create(h.prototype)),b.prototype.ngMetadataName=l,b.annotationCls=b,b})}class Qn{constructor(c,h){this._desc=c,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof h?this.__NG_ELEMENT_ID__=h:void 0!==h&&(this.\u0275prov=qs({token:this,providedIn:h.providedIn||"root",factory:h.factory}))}toString(){return`InjectionToken ${this._desc}`}}const jw=new Qn("AnalyzeForEntryComponents");class dv{}const id=VC("ContentChild",(l,c={})=>Object.assign({selector:l,first:!0,isViewQuery:!1,descendants:!0},c),dv);function aa(l,c){void 0===c&&(c=l);for(let h=0;h<l.length;h++){let f=l[h];Array.isArray(f)?(c===l&&(c=l.slice(0,h)),aa(f,c)):c!==l&&c.push(f)}return c}function nl(l,c){l.forEach(h=>Array.isArray(h)?nl(h,c):c(h))}function rl(l,c,h){c>=l.length?l.push(h):l.splice(c,0,h)}function ar(l,c){return c>=l.length-1?l.pop():l.splice(c,1)[0]}function sd(l,c){const h=[];for(let f=0;f<l;f++)h.push(c);return h}function Ao(l,c,h){let f=tc(l,c);return f>=0?l[1|f]=h:(f=~f,function nd(l,c,h,f){let g=l.length;if(g==c)l.push(h,f);else if(1===g)l.push(f,l[0]),l[0]=h;else{for(g--,l.push(l[g-1],l[g]);g>c;)l[g]=l[g-2],g--;l[c]=h,l[c+1]=f}}(l,f,c,h)),f}function rp(l,c){const h=tc(l,c);if(h>=0)return l[1|h]}function tc(l,c){return function rd(l,c,h){let f=0,g=l.length>>h;for(;g!==f;){const b=f+(g-f>>1),S=l[b<<h];if(c===S)return b<<h;S>c?g=b:f=b+1}return~(g<<h)}(l,c,1)}const pu={},Tl="__NG_DI_FLAG__",lp="ngTempTokenPath",Km=/\n/gm,ph="__source",ld=ze({provide:String,useValue:ze});let fu;function Br(l){const c=fu;return fu=l,c}function Al(l,c=Vi.Default){if(void 0===fu)throw new vt(203,"");return null===fu?wa(l,void 0,c):fu.get(l,c&Vi.Optional?null:void 0,c)}function Vr(l,c=Vi.Default){return(function Cs(){return Ea}()||Al)(xe(l),c)}function bf(l){const c=[];for(let h=0;h<l.length;h++){const f=xe(l[h]);if(Array.isArray(f)){if(0===f.length)throw new vt(900,"");let g,b=Vi.Default;for(let S=0;S<f.length;S++){const T=f[S],k=fh(T);"number"==typeof k?-1===k?g=T.token:b|=k:g=T}c.push(Vr(g,b))}else c.push(Vr(f))}return c}function cd(l,c){return l[Tl]=c,l.prototype[Tl]=c,l}function fh(l){return l[Tl]}const la=cd(Fc("Inject",l=>({token:l})),-1),ol=cd(Fc("Optional"),8),mu=cd(Fc("SkipSelf"),4);class fd{constructor(c){this.changingThisBreaksApplicationSecurity=c}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function jc(l){return l instanceof fd?l.changingThisBreaksApplicationSecurity:l}const N=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,ce=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var xr=(()=>((xr=xr||{})[xr.NONE=0]="NONE",xr[xr.HTML=1]="HTML",xr[xr.STYLE=2]="STYLE",xr[xr.SCRIPT=3]="SCRIPT",xr[xr.URL=4]="URL",xr[xr.RESOURCE_URL=5]="RESOURCE_URL",xr))();function mp(l){const c=function Af(){const l=it();return l&&l[12]}();return c?c.sanitize(xr.URL,l)||"":function ca(l,c){const h=function _f(l){return l instanceof fd&&l.getTypeName()||null}(l);if(null!=h&&h!==c){if("ResourceURL"===h&&"URL"===c)return!0;throw new Error(`Required a safe ${c}, got a ${h} (see https://g.co/ng/security#xss)`)}return h===c}(l,"URL")?jc(l):function fe(l){return(l=String(l)).match(N)||l.match(ce)?l:"unsafe:"+l}(Fe(l))}const Df="__ngContext__";function ko(l,c){l[Df]=c}function kf(l){const c=function vd(l){return l[Df]||null}(l);return c?Array.isArray(c)?c:c.lView:null}function Iv(l){return l.ngOriginalError}function vu(l,...c){l.error(...c)}class vp{constructor(){this._console=console}handleError(c){const h=this._findOriginalError(c),f=function xv(l){return l&&l.ngErrorLogger||vu}(c);f(this._console,"ERROR",c),h&&f(this._console,"ORIGINAL ERROR",h)}_findOriginalError(c){let h=c&&Iv(c);for(;h&&Iv(h);)h=Iv(h);return h||null}}const pt=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(es))();function Ys(l){return l instanceof Function?l():l}var Ma=(()=>((Ma=Ma||{})[Ma.Important=1]="Important",Ma[Ma.DashCase=2]="DashCase",Ma))();function cg(l,c){return undefined(l,c)}function Ch(l){const c=l[3];return xa(c)?c[3]:c}function Cd(l){return Av(l[13])}function ZC(l){return Av(l[4])}function Av(l){for(;null!==l&&!xa(l);)l=l[4];return l}function ug(l,c,h,f,g){if(null!=f){let b,S=!1;xa(f)?b=f:Uo(f)&&(S=!0,f=f[0]);const T=mn(f);0===l&&null!==h?null==g?uT(c,h,T):Rf(c,h,T,g||null,!0):1===l&&null!==h?Rf(c,h,T,g||null,!0):2===l?function iS(l,c,h){const f=QC(l,c);f&&function qO(l,c,h,f){jn(l)?l.removeChild(c,h,f):c.removeChild(h)}(l,f,c,h)}(c,T,S):3===l&&c.destroyNode(T),null!=b&&function GO(l,c,h,f,g){const b=h[7];b!==mn(h)&&ug(c,l,f,b,g);for(let T=10;T<h.length;T++){const k=h[T];pg(k[1],k,l,c,f,b)}}(c,l,b,h,g)}}function Kw(l,c,h){return jn(l)?l.createElement(c,h):null===h?l.createElement(c):l.createElementNS(h,c)}function Dv(l,c){const h=l[9],f=h.indexOf(c),g=c[3];1024&c[2]&&(c[2]&=-1025,Kd(g,-1)),h.splice(f,1)}function Xw(l,c){if(l.length<=10)return;const h=10+c,f=l[h];if(f){const g=f[17];null!==g&&g!==l&&Dv(g,f),c>0&&(l[h-1][4]=f[4]);const b=ar(l,10+c);!function Zw(l,c){pg(l,c,c[11],2,null,null),c[0]=null,c[6]=null}(f[1],f);const S=b[19];null!==S&&S.detachView(b[1]),f[3]=null,f[4]=null,f[2]&=-129}return f}function dg(l,c){if(!(256&c[2])){const h=c[11];jn(h)&&h.destroyNode&&pg(l,c,h,3,null,null),function XC(l){let c=l[13];if(!c)return Qw(l[1],l);for(;c;){let h=null;if(Uo(c))h=c[13];else{const f=c[10];f&&(h=f)}if(!h){for(;c&&!c[4]&&c!==l;)Uo(c)&&Qw(c[1],c),c=c[3];null===c&&(c=l),Uo(c)&&Qw(c[1],c),h=c&&c[4]}c=h}}(c)}}function Qw(l,c){if(!(256&c[2])){c[2]&=-129,c[2]|=256,function kv(l,c){let h;if(null!=l&&null!=(h=l.destroyHooks))for(let f=0;f<h.length;f+=2){const g=c[h[f]];if(!(g instanceof su)){const b=h[f+1];if(Array.isArray(b))for(let S=0;S<b.length;S+=2){const T=g[b[S]],k=b[S+1];try{k.call(T)}finally{}}else try{b.call(g)}finally{}}}}(l,c),function WO(l,c){const h=l.cleanup,f=c[7];let g=-1;if(null!==h)for(let b=0;b<h.length-1;b+=2)if("string"==typeof h[b]){const S=h[b+1],T="function"==typeof S?S(c):mn(c[S]),k=f[g=h[b+2]],R=h[b+3];"boolean"==typeof R?T.removeEventListener(h[b],k,R):R>=0?f[g=R]():f[g=-R].unsubscribe(),b+=2}else{const S=f[g=h[b+1]];h[b].call(S)}if(null!==f){for(let b=g+1;b<f.length;b++)f[b]();c[7]=null}}(l,c),1===c[1].type&&jn(c[11])&&c[11].destroy();const h=c[17];if(null!==h&&xa(c[3])){h!==c[3]&&Dv(h,c);const f=c[19];null!==f&&f.detachView(l)}}}function cT(l,c,h){return function hT(l,c,h){let f=c;for(;null!==f&&40&f.type;)f=(c=f).parent;if(null===f)return h[0];if(2&f.flags){const g=l.data[f.directiveStart].encapsulation;if(g===Yi.None||g===Yi.Emulated)return null}return zo(f,h)}(l,c.parent,h)}function Rf(l,c,h,f,g){jn(l)?l.insertBefore(c,h,f,g):c.insertBefore(h,f,g)}function uT(l,c,h){jn(l)?l.appendChild(c,h):c.appendChild(h)}function dT(l,c,h,f,g){null!==f?Rf(l,c,h,f,g):uT(l,c,h)}function QC(l,c){return jn(l)?l.parentNode(c):c.parentNode}function pT(l,c,h){return fT(l,c,h)}let fT=function Jw(l,c,h){return 40&l.type?zo(l,h):null};function JC(l,c,h,f){const g=cT(l,f,c),b=c[11],T=pT(f.parent||c[6],f,c);if(null!=g)if(Array.isArray(h))for(let k=0;k<h.length;k++)dT(b,g,h[k],T,!1);else dT(b,g,h,T,!1)}function e0(l,c){if(null!==c){const h=c.type;if(3&h)return zo(c,l);if(4&h)return gT(-1,l[c.index]);if(8&h){const f=c.child;if(null!==f)return e0(l,f);{const g=l[c.index];return xa(g)?gT(-1,g):mn(g)}}if(32&h)return cg(c,l)()||mn(l[c.index]);{const f=tS(l,c);return null!==f?Array.isArray(f)?f[0]:e0(Ch(l[16]),f):e0(l,c.next)}}return null}function tS(l,c){return null!==c?l[16][6].projection[c.projection]:null}function gT(l,c){const h=10+l+1;if(h<c.length){const f=c[h],g=f[1].firstChild;if(null!==g)return e0(f,g)}return c[7]}function t0(l,c,h,f,g,b,S){for(;null!=h;){const T=f[h.index],k=h.type;if(S&&0===c&&(T&&ko(mn(T),f),h.flags|=4),64!=(64&h.flags))if(8&k)t0(l,c,h.child,f,g,b,!1),ug(c,l,g,T,b);else if(32&k){const R=cg(h,f);let B;for(;B=R();)ug(c,l,g,B,b);ug(c,l,g,T,b)}else 16&k?vT(l,c,f,h,g,b):ug(c,l,g,T,b);h=S?h.projectionNext:h.next}}function pg(l,c,h,f,g,b){t0(h,f,l.firstChild,c,g,b,!1)}function vT(l,c,h,f,g,b){const S=h[16],k=S[6].projection[f.projection];if(Array.isArray(k))for(let R=0;R<k.length;R++)ug(c,l,g,k[R],b);else t0(l,c,k,S[3],g,b,!0)}function bT(l,c,h){jn(l)?l.setAttribute(c,"style",h):c.style.cssText=h}function sS(l,c,h){jn(l)?""===h?l.removeAttribute(c,"class"):l.setAttribute(c,"class",h):c.className=h}function s0(l,c,h){let f=l.length;for(;;){const g=l.indexOf(c,h);if(-1===g)return g;if(0===g||l.charCodeAt(g-1)<=32){const b=c.length;if(g+b===f||l.charCodeAt(g+b)<=32)return g}h=g+1}}const CT="ng-template";function KO(l,c,h){let f=0;for(;f<l.length;){let g=l[f++];if(h&&"class"===g){if(g=l[f],-1!==s0(g.toLowerCase(),c,0))return!0}else if(1===g){for(;f<l.length&&"string"==typeof(g=l[f++]);)if(g.toLowerCase()===c)return!0;return!1}}return!1}function n0(l){return 4===l.type&&l.value!==CT}function ET(l,c,h){return c===(4!==l.type||h?l.value:CT)}function ZO(l,c,h){let f=4;const g=l.attrs||[],b=function QO(l){for(let c=0;c<l.length;c++)if(hh(l[c]))return c;return l.length}(g);let S=!1;for(let T=0;T<c.length;T++){const k=c[T];if("number"!=typeof k){if(!S)if(4&f){if(f=2|1&f,""!==k&&!ET(l,k,h)||""===k&&1===c.length){if(Eh(f))return!1;S=!0}}else{const R=8&f?k:c[++T];if(8&f&&null!==l.attrs){if(!KO(l.attrs,R,h)){if(Eh(f))return!1;S=!0}continue}const $=XO(8&f?"class":k,g,n0(l),h);if(-1===$){if(Eh(f))return!1;S=!0;continue}if(""!==R){let le;le=$>b?"":g[$+1].toLowerCase();const de=8&f?le:null;if(de&&-1!==s0(de,R,0)||2&f&&R!==le){if(Eh(f))return!1;S=!0}}}}else{if(!S&&!Eh(f)&&!Eh(k))return!1;if(S&&Eh(k))continue;S=!1,f=k|1&f}}return Eh(f)||S}function Eh(l){return 0==(1&l)}function XO(l,c,h,f){if(null===c)return-1;let g=0;if(f||!h){let b=!1;for(;g<c.length;){const S=c[g];if(S===l)return g;if(3===S||6===S)b=!0;else{if(1===S||2===S){let T=c[++g];for(;"string"==typeof T;)T=c[++g];continue}if(4===S)break;if(0===S){g+=4;continue}}g+=b?1:2}return-1}return function JO(l,c){let h=l.indexOf(4);if(h>-1)for(h++;h<l.length;){const f=l[h];if("number"==typeof f)return-1;if(f===c)return h;h++}return-1}(c,l)}function wT(l,c,h=!1){for(let f=0;f<c.length;f++)if(ZO(l,c[f],h))return!0;return!1}function oc(l,c){e:for(let h=0;h<c.length;h++){const f=c[h];if(l.length===f.length){for(let g=0;g<l.length;g++)if(l[g]!==f[g])continue e;return!0}}return!1}function _T(l,c){return l?":not("+c.trim()+")":c}function r0(l){let c=l[0],h=1,f=2,g="",b=!1;for(;h<l.length;){let S=l[h];if("string"==typeof S)if(2&f){const T=l[++h];g+="["+S+(T.length>0?'="'+T+'"':"")+"]"}else 8&f?g+="."+S:4&f&&(g+=" "+S);else""!==g&&!Eh(S)&&(c+=_T(b,g),g=""),f=S,b=b||!Eh(f);h++}return""!==g&&(c+=_T(b,g)),c}const Gi={};function IT(l){xT(Es(),it(),Cr()+l,Zl())}function xT(l,c,h,f){if(!f)if(3==(3&c[2])){const b=l.preOrderCheckHooks;null!==b&&Xl(c,b,h)}else{const b=l.preOrderHooks;null!==b&&ch(c,b,0,h)}Er(h)}function o0(l,c){return l<<17|c<<2}function Wc(l){return l>>17&32767}function TT(l){return 2|l}function ll(l){return(131068&l)>>2}function a0(l,c){return-131069&l|c<<2}function cS(l){return 1|l}function RT(l,c){const h=l.contentQueries;if(null!==h)for(let f=0;f<h.length;f+=2){const g=h[f],b=h[f+1];if(-1!==b){const S=l.data[b];Gu(g),S.contentQueries(2,c[b],b)}}}function fg(l,c,h,f,g,b,S,T,k,R){const B=c.blueprint.slice();return B[0]=g,B[2]=140|f,oo(B),B[3]=B[15]=l,B[8]=h,B[10]=S||l&&l[10],B[11]=T||l&&l[11],B[12]=k||l&&l[12]||null,B[9]=R||l&&l[9]||null,B[6]=b,B[16]=2==c.type?l[16]:B,B}function cn(l,c,h,f,g){let b=l.data[c];if(null===b)b=function mS(l,c,h,f,g){const b=lf(),S=Il(),k=l.data[c]=function hM(l,c,h,f,g,b){return{type:h,index:f,insertBeforeIndex:null,injectorIndex:c?c.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:g,attrs:b,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:c,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,S?b:b&&b.parent,h,c,f,g);return null===l.firstChild&&(l.firstChild=k),null!==b&&(S?null==b.child&&null!==k.parent&&(b.child=k):null===b.next&&(b.next=k)),k}(l,c,h,f,g),function qu(){return Oi.lFrame.inI18n}()&&(b.flags|=64);else if(64&b.type){b.type=h,b.value=f,b.attrs=g;const S=function Kh(){const l=Oi.lFrame,c=l.currentTNode;return l.isParent?c:c.parent}();b.injectorIndex=null===S?-1:S.injectorIndex}return Zn(b,!0),b}function mg(l,c,h,f){if(0===h)return-1;const g=c.length;for(let b=0;b<h;b++)c.push(f),l.blueprint.push(f),l.data.push(null);return g}function wd(l,c,h){Pc(c);try{const f=l.viewQuery;null!==f&&Tr(1,f,h);const g=l.template;null!==g&&BT(l,c,g,1,h),l.firstCreatePass&&(l.firstCreatePass=!1),l.staticContentQueries&&RT(l,c),l.staticViewQueries&&Tr(2,l.viewQuery,h);const b=l.components;null!==b&&function NT(l,c){for(let h=0;h<c.length;h++)wM(l,c[h])}(c,b)}catch(f){throw l.firstCreatePass&&(l.incompleteFirstPass=!0,l.firstCreatePass=!1),f}finally{c[2]&=-5,Un()}}function gg(l,c,h,f){const g=c[2];if(256==(256&g))return;Pc(c);const b=Zl();try{oo(c),function Wu(l){return Oi.lFrame.bindingIndex=l}(l.bindingStartIndex),null!==h&&BT(l,c,h,2,f);const S=3==(3&g);if(!b)if(S){const R=l.preOrderCheckHooks;null!==R&&Xl(c,R,null)}else{const R=l.preOrderHooks;null!==R&&ch(c,R,0,null),tu(c,0)}if(function CM(l){for(let c=Cd(l);null!==c;c=ZC(c)){if(!c[2])continue;const h=c[9];for(let f=0;f<h.length;f++){const g=h[f],b=g[3];0==(1024&g[2])&&Kd(b,1),g[2]|=1024}}}(c),function bM(l){for(let c=Cd(l);null!==c;c=ZC(c))for(let h=10;h<c.length;h++){const f=c[h],g=f[1];xo(f)&&gg(g,f,g.template,f[8])}}(c),null!==l.contentQueries&&RT(l,c),!b)if(S){const R=l.contentCheckHooks;null!==R&&Xl(c,R)}else{const R=l.contentHooks;null!==R&&ch(c,R,1),tu(c,1)}!function aM(l,c){const h=l.hostBindingOpCodes;if(null!==h)try{for(let f=0;f<h.length;f++){const g=h[f];if(g<0)Er(~g);else{const b=g,S=h[++f],T=h[++f];Nm(S,b),T(2,c[b])}}}finally{Er(-1)}}(l,c);const T=l.components;null!==T&&function lM(l,c){for(let h=0;h<c.length;h++)EM(l,c[h])}(c,T);const k=l.viewQuery;if(null!==k&&Tr(2,k,f),!b)if(S){const R=l.viewCheckHooks;null!==R&&Xl(c,R)}else{const R=l.viewHooks;null!==R&&ch(c,R,2),tu(c,2)}!0===l.firstUpdatePass&&(l.firstUpdatePass=!1),b||(c[2]&=-73),1024&c[2]&&(c[2]&=-1025,Kd(c[3],-1))}finally{Un()}}function FT(l,c,h,f){const g=c[10],b=!Zl(),S=kc(c);try{b&&!S&&g.begin&&g.begin(),S&&wd(l,c,f),gg(l,c,h,f)}finally{b&&!S&&g.end&&g.end()}}function BT(l,c,h,f,g){const b=Cr(),S=2&f;try{Er(-1),S&&c.length>20&&xT(l,c,20,Zl()),h(f,g)}finally{Er(b)}}function yS(l,c,h){!zu()||(function d0(l,c,h,f){const g=h.directiveStart,b=h.directiveEnd;l.firstCreatePass||Jl(h,c),ko(f,c);const S=h.initialInputs;for(let T=g;T<b;T++){const k=l.data[T],R=na(k);R&&mi(c,h,k);const B=sl(c,l,T,h);ko(B,c),null!==S&&Ep(0,T-g,B,k,0,S),R&&(ro(h.index,c)[8]=B)}}(l,c,h,zo(h,c)),128==(128&h.flags)&&function SV(l,c,h){const f=h.directiveStart,g=h.directiveEnd,S=h.index,T=function av(){return Oi.lFrame.currentDirectiveIndex}();try{Er(S);for(let k=f;k<g;k++){const R=l.data[k],B=c[k];tl(k),(null!==R.hostBindings||0!==R.hostVars||null!==R.hostAttrs)&&mM(R,B)}}finally{Er(-1),tl(T)}}(l,c,h))}function vS(l,c,h=zo){const f=c.localNames;if(null!==f){let g=c.index+1;for(let b=0;b<f.length;b+=2){const S=f[b+1],T=-1===S?h(c,l):l[S];l[g++]=T}}}function bS(l){const c=l.tView;return null===c||c.incompleteFirstPass?l.tView=Lv(1,null,l.template,l.decls,l.vars,l.directiveDefs,l.pipeDefs,l.viewQuery,l.schemas,l.consts):c}function Lv(l,c,h,f,g,b,S,T,k,R){const B=20+f,$=B+g,le=function cM(l,c){const h=[];for(let f=0;f<c;f++)h.push(f<l?null:Gi);return h}(B,$),de="function"==typeof R?R():R;return le[1]={type:l,blueprint:le,template:h,queries:null,viewQuery:T,declTNode:c,data:le.slice().fill(null,B),bindingStartIndex:B,expandoStartIndex:$,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof b?b():b,pipeRegistry:"function"==typeof S?S():S,firstChild:null,schemas:k,consts:de,incompleteFirstPass:!1}}function ES(l,c,h,f){const g=ye(c);null===h?g.push(f):(g.push(h),l.firstCreatePass&&Ms(l).push(f,g.length-1))}function wS(l,c,h){for(let f in l)if(l.hasOwnProperty(f)){const g=l[f];(h=null===h?{}:h).hasOwnProperty(f)?h[f].push(c,g):h[f]=[c,g]}return h}function Ff(l,c,h,f){let g=!1;if(zu()){const b=function _V(l,c,h){const f=l.directiveRegistry;let g=null;if(f)for(let b=0;b<f.length;b++){const S=f[b];wT(h,S.selectors,!1)&&(g||(g=[]),Ju(Jl(h,c),l,S.type),na(S)?(gM(l,h),g.unshift(S)):g.push(S))}return g}(l,c,h),S=null===f?null:{"":-1};if(null!==b){g=!0,yM(h,l.data.length,b.length);for(let B=0;B<b.length;B++){const $=b[B];$.providersResolver&&$.providersResolver($)}let T=!1,k=!1,R=mg(l,c,b.length,null);for(let B=0;B<b.length;B++){const $=b[B];h.mergedAttrs=_i(h.mergedAttrs,$.hostAttrs),_S(l,h,c,R,$),IV(R,$,S),null!==$.contentQueries&&(h.flags|=8),(null!==$.hostBindings||null!==$.hostAttrs||0!==$.hostVars)&&(h.flags|=128);const le=$.type.prototype;!T&&(le.ngOnChanges||le.ngOnInit||le.ngDoCheck)&&((l.preOrderHooks||(l.preOrderHooks=[])).push(h.index),T=!0),!k&&(le.ngOnChanges||le.ngDoCheck)&&((l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(h.index),k=!0),R++}!function uM(l,c){const f=c.directiveEnd,g=l.data,b=c.attrs,S=[];let T=null,k=null;for(let R=c.directiveStart;R<f;R++){const B=g[R],$=B.inputs,le=null===b||n0(c)?null:vM($,b);S.push(le),T=wS($,R,T),k=wS(B.outputs,R,k)}null!==T&&(T.hasOwnProperty("class")&&(c.flags|=16),T.hasOwnProperty("style")&&(c.flags|=32)),c.initialInputs=S,c.inputs=T,c.outputs=k}(l,h)}S&&function p0(l,c,h){if(c){const f=l.localNames=[];for(let g=0;g<c.length;g+=2){const b=h[c[g+1]];if(null==b)throw new vt(-301,`Export of name '${c[g+1]}' not found!`);f.push(c[g],b)}}}(h,f,S)}return h.mergedAttrs=_i(h.mergedAttrs,h.attrs),g}function yg(l,c,h,f,g,b){const S=b.hostBindings;if(S){let T=l.hostBindingOpCodes;null===T&&(T=l.hostBindingOpCodes=[]);const k=~c.index;(function SS(l){let c=l.length;for(;c>0;){const h=l[--c];if("number"==typeof h&&h<0)return h}return 0})(T)!=k&&T.push(k),T.push(f,g,S)}}function mM(l,c){null!==l.hostBindings&&l.hostBindings(1,c)}function gM(l,c){c.flags|=2,(l.components||(l.components=[])).push(c.index)}function IV(l,c,h){if(h){if(c.exportAs)for(let f=0;f<c.exportAs.length;f++)h[c.exportAs[f]]=l;na(c)&&(h[""]=l)}}function yM(l,c,h){l.flags|=1,l.directiveStart=c,l.directiveEnd=c+h,l.providerIndexes=c}function _S(l,c,h,f,g){l.data[f]=g;const b=g.factory||(g.factory=ah(g.type)),S=new su(b,na(g),null);l.blueprint[f]=S,h[f]=S,yg(l,c,0,f,mg(l,h,g.hostVars,Gi),g)}function mi(l,c,h){const f=zo(c,l),g=bS(h),b=l[10],S=Q(l,fg(l,g,null,h.onPush?64:16,f,c,b,b.createRenderer(f,h),null,null));l[c.index]=S}function wh(l,c,h,f,g,b){const S=zo(l,c);!function f0(l,c,h,f,g,b,S){if(null==b)jn(l)?l.removeAttribute(c,g,h):c.removeAttribute(g);else{const T=null==S?Fe(b):S(b,f||"",g);jn(l)?l.setAttribute(c,g,T,h):h?c.setAttributeNS(h,g,T):c.setAttribute(g,T)}}(c[11],S,b,l.value,h,f,g)}function Ep(l,c,h,f,g,b){const S=b[c];if(null!==S){const T=f.setInput;for(let k=0;k<S.length;){const R=S[k++],B=S[k++],$=S[k++];null!==T?f.setInput(h,$,R,B):h[B]=$}}}function vM(l,c){let h=null,f=0;for(;f<c.length;){const g=c[f];if(0!==g)if(5!==g){if("number"==typeof g)break;l.hasOwnProperty(g)&&(null===h&&(h=[]),h.push(g,l[g],c[f+1])),f+=2}else f+=2;else f+=4}return h}function jT(l,c,h,f){return new Array(l,!0,!1,c,null,0,f,h,null,null)}function EM(l,c){const h=ro(c,l);if(xo(h)){const f=h[1];80&h[2]?gg(f,h,f.template,h[8]):h[5]>0&&IS(h)}}function IS(l){for(let f=Cd(l);null!==f;f=ZC(f))for(let g=10;g<f.length;g++){const b=f[g];if(1024&b[2]){const S=b[1];gg(S,b,S.template,b[8])}else b[5]>0&&IS(b)}const h=l[1].components;if(null!==h)for(let f=0;f<h.length;f++){const g=ro(h[f],l);xo(g)&&g[5]>0&&IS(g)}}function wM(l,c){const h=ro(c,l),f=h[1];(function UT(l,c){for(let h=c.length;h<l.blueprint.length;h++)c.push(l.blueprint[h])})(f,h),wd(f,h,h[8])}function Q(l,c){return l[13]?l[14][4]=c:l[13]=c,l[14]=c,c}function O(l){for(;l;){l[2]|=64;const c=Ch(l);if(Jp(l)&&!c)return l;l=c}return null}function j(l,c,h){const f=c[10];f.begin&&f.begin();try{gg(l,c,l.template,h)}catch(g){throw X(c,g),g}finally{f.end&&f.end()}}function Y(l){!function Ds(l){for(let c=0;c<l.components.length;c++){const h=l.components[c],f=kf(h),g=f[1];FT(g,f,g.template,h)}}(l[8])}function Tr(l,c,h){Gu(0),c(l,h)}const WT=(()=>Promise.resolve(null))();function ye(l){return l[7]||(l[7]=[])}function Ms(l){return l.cleanup||(l.cleanup=[])}function X(l,c){const h=l[9],f=h?h.get(vp,null):null;f&&f.handleError(c)}function at(l,c,h,f,g){for(let b=0;b<h.length;){const S=h[b++],T=h[b++],k=c[S],R=l.data[S];null!==R.setInput?R.setInput(k,g,f,T):k[T]=g}}function bu(l,c,h){const f=Yl(c,l);!function aT(l,c,h){jn(l)?l.setValue(c,h):c.textContent=h}(l[11],f,h)}function ae(l,c,h){let f=h?l.styles:null,g=h?l.classes:null,b=0;if(null!==c)for(let S=0;S<c.length;S++){const T=c[S];"number"==typeof T?b=T:1==b?g=Ue(g,T):2==b&&(f=Ue(f,T+": "+c[++S]+";"))}h?l.styles=f:l.stylesWithoutHost=f,h?l.classes=g:l.classesWithoutHost=g}const ua=new Qn("INJECTOR",-1);class vg{get(c,h=pu){if(h===pu){const f=new Error(`NullInjectorError: No provider for ${Be(c)}!`);throw f.name="NullInjectorError",f}return h}}const qT=new Qn("Set Injector scope."),m0={},DV={};let xS;function Gc(){return void 0===xS&&(xS=new vg),xS}function Oo(l,c=null,h=null,f){const g=_M(l,c,h,f);return g._resolveInjectorDefTypes(),g}function _M(l,c=null,h=null,f){return new g0(l,h,c||Gc(),f)}class g0{constructor(c,h,f,g=null){this.parent=f,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const b=[];h&&nl(h,T=>this.processProvider(T,c,h)),nl([c],T=>this.processInjectorType(T,[],b)),this.records.set(ua,bg(void 0,this));const S=this.records.get(qT);this.scope=null!=S?S.value:null,this.source=g||("object"==typeof c?null:Be(c))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(c=>c.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(c,h=pu,f=Vi.Default){this.assertNotDestroyed();const g=Br(this),b=Zi(void 0);try{if(!(f&Vi.SkipSelf)){let T=this.records.get(c);if(void 0===T){const k=function KT(l){return"function"==typeof l||"object"==typeof l&&l instanceof Qn}(c)&&An(c);T=k&&this.injectableDefInScope(k)?bg(Bf(c),m0):null,this.records.set(c,T)}if(null!=T)return this.hydrate(c,T)}return(f&Vi.Self?Gc():this.parent).get(c,h=f&Vi.Optional&&h===pu?null:h)}catch(S){if("NullInjectorError"===S.name){if((S[lp]=S[lp]||[]).unshift(Be(c)),g)throw S;return function Do(l,c,h,f){const g=l[lp];throw c[ph]&&g.unshift(c[ph]),l.message=function jC(l,c,h,f=null){l=l&&"\n"===l.charAt(0)&&"\u0275"==l.charAt(1)?l.substr(2):l;let g=Be(c);if(Array.isArray(c))g=c.map(Be).join(" -> ");else if("object"==typeof c){let b=[];for(let S in c)if(c.hasOwnProperty(S)){let T=c[S];b.push(S+":"+("string"==typeof T?JSON.stringify(T):Be(T)))}g=`{${b.join(", ")}}`}return`${h}${f?"("+f+")":""}[${g}]: ${l.replace(Km,"\n  ")}`}("\n"+l.message,g,h,f),l.ngTokenPath=g,l[lp]=null,l}(S,c,"R3InjectorError",this.source)}throw S}finally{Zi(b),Br(g)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(c=>this.get(c))}toString(){const c=[];return this.records.forEach((f,g)=>c.push(Be(g))),`R3Injector[${c.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new vt(205,"")}processInjectorType(c,h,f){if(!(c=xe(c)))return!1;let g=sh(c);const b=null==g&&c.ngModule||void 0,S=void 0===b?c:b,T=-1!==f.indexOf(S);if(void 0!==b&&(g=sh(b)),null==g)return!1;if(null!=g.imports&&!T){let B;f.push(S);try{nl(g.imports,$=>{this.processInjectorType($,h,f)&&(void 0===B&&(B=[]),B.push($))})}finally{}if(void 0!==B)for(let $=0;$<B.length;$++){const{ngModule:le,providers:de}=B[$];nl(de,$e=>this.processProvider($e,le,de||Si))}}this.injectorDefTypes.add(S);const k=ah(S)||(()=>new S);this.records.set(S,bg(k,m0));const R=g.providers;if(null!=R&&!T){const B=c;nl(R,$=>this.processProvider($,B,R))}return void 0!==b&&void 0!==c.providers}processProvider(c,h,f){let g=Cg(c=xe(c))?c:xe(c&&c.provide);const b=function IM(l,c,h){return YT(l)?bg(void 0,l.useValue):bg(GT(l),m0)}(c);if(Cg(c)||!0!==c.multi)this.records.get(g);else{let S=this.records.get(g);S||(S=bg(void 0,m0,!0),S.factory=()=>bf(S.multi),this.records.set(g,S)),g=c,S.multi.push(c)}this.records.set(g,b)}hydrate(c,h){return h.value===m0&&(h.value=DV,h.value=h.factory()),"object"==typeof h.value&&h.value&&function kM(l){return null!==l&&"object"==typeof l&&"function"==typeof l.ngOnDestroy}(h.value)&&this.onDestroy.add(h.value),h.value}injectableDefInScope(c){if(!c.providedIn)return!1;const h=xe(c.providedIn);return"string"==typeof h?"any"===h||h===this.scope:this.injectorDefTypes.has(h)}}function Bf(l){const c=An(l),h=null!==c?c.factory:ah(l);if(null!==h)return h;if(l instanceof Qn)throw new vt(204,"");if(l instanceof Function)return function $T(l){const c=l.length;if(c>0)throw sd(c,"?"),new vt(204,"");const h=function Ya(l){const c=l&&(l[Ka]||l[Ca]);if(c){const h=function Tc(l){if(l.hasOwnProperty("name"))return l.name;const c=(""+l).match(/^function\s*([^\s(]+)/);return null===c?"":c[1]}(l);return console.warn(`DEPRECATED: DI is instantiating a token "${h}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${h}" class.`),c}return null}(l);return null!==h?()=>h.factory(l):()=>new l}(l);throw new vt(204,"")}function GT(l,c,h){let f;if(Cg(l)){const g=xe(l);return ah(g)||Bf(g)}if(YT(l))f=()=>xe(l.useValue);else if(function TM(l){return!(!l||!l.useFactory)}(l))f=()=>l.useFactory(...bf(l.deps||[]));else if(function xM(l){return!(!l||!l.useExisting)}(l))f=()=>Vr(xe(l.useExisting));else{const g=xe(l&&(l.useClass||l.provide));if(!function DM(l){return!!l.deps}(l))return ah(g)||Bf(g);f=()=>new g(...bf(l.deps))}return f}function bg(l,c,h=!1){return{factory:l,value:c,multi:h?[]:void 0}}function YT(l){return null!==l&&"object"==typeof l&&ld in l}function Cg(l){return"function"==typeof l}let A=(()=>{class l{static create(h,f){var g;if(Array.isArray(h))return Oo({name:""},f,h,"");{const b=null!==(g=h.name)&&void 0!==g?g:"";return Oo({name:b},h.parent,h.providers,b)}}}return l.THROW_IF_NOT_FOUND=pu,l.NULL=new vg,l.\u0275prov=qs({token:l,providedIn:"any",factory:()=>Vr(ua)}),l.__NG_ELEMENT_ID__=-1,l})();function XT(l,c){eu(kf(l)[1],an())}function Ls(l){let c=function LM(l){return Object.getPrototypeOf(l.prototype).constructor}(l.type),h=!0;const f=[l];for(;c;){let g;if(na(l))g=c.\u0275cmp||c.\u0275dir;else{if(c.\u0275cmp)throw new vt(903,"");g=c.\u0275dir}if(g){if(h){f.push(g);const S=l;S.inputs=Hf(l.inputs),S.declaredInputs=Hf(l.declaredInputs),S.outputs=Hf(l.outputs);const T=g.hostBindings;T&&OS(l,T);const k=g.viewQuery,R=g.contentQueries;if(k&&RM(l,k),R&&kS(l,R),Le(l.inputs,g.inputs),Le(l.declaredInputs,g.declaredInputs),Le(l.outputs,g.outputs),na(g)&&g.data.animation){const B=l.data;B.animation=(B.animation||[]).concat(g.data.animation)}}const b=g.features;if(b)for(let S=0;S<b.length;S++){const T=b[S];T&&T.ngInherit&&T(l),T===Ls&&(h=!1)}}c=Object.getPrototypeOf(c)}!function Mn(l){let c=0,h=null;for(let f=l.length-1;f>=0;f--){const g=l[f];g.hostVars=c+=g.hostVars,g.hostAttrs=_i(g.hostAttrs,h=_i(h,g.hostAttrs))}}(f)}function Hf(l){return l===fn?{}:l===Si?[]:l}function RM(l,c){const h=l.viewQuery;l.viewQuery=h?(f,g)=>{c(f,g),h(f,g)}:c}function kS(l,c){const h=l.contentQueries;l.contentQueries=h?(f,g,b)=>{c(f,g,b),h(f,g,b)}:c}function OS(l,c){const h=l.hostBindings;l.hostBindings=h?(f,g)=>{c(f,g),h(f,g)}:c}let jf=null;function Cu(){if(!jf){const l=es.Symbol;if(l&&l.iterator)jf=l.iterator;else{const c=Object.getOwnPropertyNames(Map.prototype);for(let h=0;h<c.length;++h){const f=c[h];"entries"!==f&&"size"!==f&&Map.prototype[f]===Map.prototype.entries&&(jf=f)}}}return jf}function Pn(l){return!!C0(l)&&(Array.isArray(l)||!(l instanceof Map)&&Cu()in l)}function C0(l){return null!==l&&("function"==typeof l||"object"==typeof l)}function Pa(l,c,h){return!Object.is(l[c],h)&&(l[c]=h,!0)}function w0(l,c,h,f){const g=it();return Pa(g,Oc(),c)&&(Es(),wh(wn(),g,l,c,h,f)),w0}function MS(l,c,h,f,g,b,S,T){const k=it(),R=Es(),B=l+20,$=R.firstCreatePass?function nA(l,c,h,f,g,b,S,T,k){const R=c.consts,B=cn(c,l,4,S||null,Ja(R,T));Ff(c,h,B,Ja(R,k)),eu(c,B);const $=B.tViews=Lv(2,B,f,g,b,c.directiveRegistry,c.pipeRegistry,null,c.schemas,R);return null!==c.queries&&(c.queries.template(c,B),$.queries=c.queries.embeddedTView(B)),B}(B,R,k,c,h,f,g,b,S):R.data[B];Zn($,!1);const le=k[11].createComment("");JC(R,k,le,$),ko(le,k),Q(k,k[B]=jT(le,k,le,$)),Fu($)&&yS(R,k,$),null!=S&&vS(k,$,T)}function rA(l){return function Kl(l,c){return l[c]}(function RC(){return Oi.lFrame.contextLView}(),20+l)}function qf(l,c=Vi.Default){const h=it();return null===h?Vr(l,c):uh(an(),h,xe(l),c)}function gA(){throw new Error("invalid")}function Na(l,c,h){const f=it();return Pa(f,Oc(),c)&&function lc(l,c,h,f,g,b,S,T){const k=zo(c,h);let B,R=c.inputs;!T&&null!=R&&(B=R[f])?(at(l,h,B,f,g),Qp(c)&&function pM(l,c){const h=ro(c,l);16&h[2]||(h[2]|=64)}(h,c.index)):3&c.type&&(f=function dM(l){return"class"===l?"className":"for"===l?"htmlFor":"formaction"===l?"formAction":"innerHtml"===l?"innerHTML":"readonly"===l?"readOnly":"tabindex"===l?"tabIndex":l}(f),g=null!=S?S(g,c.value||"",f):g,jn(b)?b.setProperty(k,f,g):ln(f)||(k.setProperty?k.setProperty(f,g):k[f]=g))}(Es(),wn(),f,l,c,f[11],h,!1),Na}function Kc(l,c,h,f,g){const S=g?"class":"style";at(l,h,c.inputs[S],S,f)}function Pg(l,c,h,f){const g=it(),b=Es(),S=20+l,T=g[11],k=g[S]=Kw(T,c,function df(){return Oi.lFrame.currentNamespace}()),R=b.firstCreatePass?function yA(l,c,h,f,g,b,S){const T=c.consts,R=cn(c,l,2,g,Ja(T,b));return Ff(c,h,R,Ja(T,S)),null!==R.attrs&&ae(R,R.attrs,!1),null!==R.mergedAttrs&&ae(R,R.mergedAttrs,!0),null!==c.queries&&c.queries.elementStart(c,R),R}(S,b,g,0,c,h,f):b.data[S];Zn(R,!0);const B=R.mergedAttrs;null!==B&&ru(T,k,B);const $=R.classes;null!==$&&sS(T,k,$);const le=R.styles;null!==le&&bT(T,k,le),64!=(64&R.flags)&&JC(b,g,k,R),0===function Ta(){return Oi.lFrame.elementDepthCount}()&&ko(k,g),function Uu(){Oi.lFrame.elementDepthCount++}(),Fu(R)&&(yS(b,g,R),function gS(l,c,h){if(oh(c)){const g=c.directiveEnd;for(let b=c.directiveStart;b<g;b++){const S=l.data[b];S.contentQueries&&S.contentQueries(1,h[b],b)}}}(b,R,g)),null!==f&&vS(g,R)}function k0(){let l=an();Il()?lh():(l=l.parent,Zn(l,!1));const c=l;!function Yh(){Oi.lFrame.elementDepthCount--}();const h=Es();h.firstCreatePass&&(eu(h,l),oh(l)&&h.queries.elementEnd(l)),null!=c.classesWithoutHost&&function jm(l){return 0!=(16&l.flags)}(c)&&Kc(h,c,it(),c.classesWithoutHost,!0),null!=c.stylesWithoutHost&&function FC(l){return 0!=(32&l.flags)}(c)&&Kc(h,c,it(),c.stylesWithoutHost,!1)}function O0(l,c,h,f){Pg(l,c,h,f),k0()}function Hr(){return it()}function CA(l){return!!l&&"function"==typeof l.then}function Ih(l){return!!l&&"function"==typeof l.subscribe}const xp=Ih;function Lg(l,c,h,f){const g=it(),b=Es(),S=an();return function EA(l,c,h,f,g,b,S,T){const k=Fu(f),B=l.firstCreatePass&&Ms(l),$=c[8],le=ye(c);let de=!0;if(3&f.type||T){const kt=zo(f,c),Yt=T?T(kt):kt,et=le.length,vi=T?vs=>T(mn(vs[f.index])):f.index;if(jn(h)){let vs=null;if(!T&&k&&(vs=function VS(l,c,h,f){const g=l.cleanup;if(null!=g)for(let b=0;b<g.length-1;b+=2){const S=g[b];if(S===h&&g[b+1]===f){const T=c[7],k=g[b+2];return T.length>k?T[k]:null}"string"==typeof S&&(b+=2)}return null}(l,c,g,f.index)),null!==vs)(vs.__ngLastListenerFn__||vs).__ngNextListenerFn__=b,vs.__ngLastListenerFn__=b,de=!1;else{b=xh(f,c,$,b,!1);const en=h.listen(Yt,g,b);le.push(b,en),B&&B.push(g,vi,et,et+1)}}else b=xh(f,c,$,b,!0),Yt.addEventListener(g,b,S),le.push(b),B&&B.push(g,vi,et,S)}else b=xh(f,c,$,b,!1);const $e=f.outputs;let _t;if(de&&null!==$e&&(_t=$e[g])){const kt=_t.length;if(kt)for(let Yt=0;Yt<kt;Yt+=2){const Ko=c[_t[Yt]][_t[Yt+1]].subscribe(b),Pd=le.length;le.push(b,Ko),B&&B.push(g,f.index,Pd,-(Pd+1))}}}(b,g,g[11],S,l,c,!!h,f),Lg}function Mo(l,c,h,f){try{return!1!==h(f)}catch(g){return X(l,g),!1}}function xh(l,c,h,f,g){return function b(S){if(S===Function)return f;const T=2&l.flags?ro(l.index,c):c;0==(32&c[2])&&O(T);let k=Mo(c,0,f,S),R=b.__ngNextListenerFn__;for(;R;)k=Mo(c,0,R,S)&&k,R=R.__ngNextListenerFn__;return g&&!1===k&&(S.preventDefault(),S.returnValue=!1),k}}function wu(l=1){return function lv(l){return(Oi.lFrame.contextLView=function Xd(l,c){for(;l>0;)c=c[15],l--;return c}(l,Oi.lFrame.contextLView))[8]}(l)}function zM(l,c){let h=null;const f=function ST(l){const c=l.attrs;if(null!=c){const h=c.indexOf(5);if(0==(1&h))return c[h+1]}return null}(l);for(let g=0;g<c.length;g++){const b=c[g];if("*"!==b){if(null===f?wT(l,b,!0):oc(f,b))return g}else h=g}return h}function HS(l){const c=it()[16][6];if(!c.projection){const f=c.projection=sd(l?l.length:1,null),g=f.slice();let b=c.child;for(;null!==b;){const S=l?zM(b,l):0;null!==S&&(g[S]?g[S].projectionNext=b:f[S]=b,g[S]=b),b=b.next}}}function jS(l,c=0,h){const f=it(),g=Es(),b=cn(g,20+l,16,null,h||null);null===b.projection&&(b.projection=c),lh(),64!=(64&b.flags)&&function yT(l,c,h){vT(c[11],0,c,h,cT(l,h,c),pT(h.parent||c[6],h,c))}(g,f,b)}function N0(l,c,h,f,g){const b=l[h+1],S=null===c;let T=f?Wc(b):ll(b),k=!1;for(;0!==T&&(!1===k||S);){const B=l[T+1];wA(l[T],c)&&(k=!0,l[T+1]=f?cS(B):TT(B)),T=f?Wc(B):ll(B)}k&&(l[h+1]=f?TT(b):cS(b))}function wA(l,c){return null===l||null==c||(Array.isArray(l)?l[1]:l)===c||!(!Array.isArray(l)||"string"!=typeof c)&&tc(l,c)>=0}function V0(l,c){return function Su(l,c,h,f){const g=it(),b=Es(),S=function Da(l){const c=Oi.lFrame,h=c.bindingIndex;return c.bindingIndex=c.bindingIndex+l,h}(2);b.firstUpdatePass&&function Dp(l,c,h,f){const g=l.data;if(null===g[h+1]){const b=g[Cr()],S=function Uv(l,c){return c>=l.expandoStartIndex}(l,h);(function xd(l,c){return 0!=(l.flags&(c?16:32))})(b,f)&&null===c&&!S&&(c=!1),c=function GM(l,c,h,f){const g=function Mc(l){const c=Oi.lFrame.currentDirectiveIndex;return-1===c?null:l[c]}(l);let b=f?c.residualClasses:c.residualStyles;if(null===g)0===(f?c.classBindings:c.styleBindings)&&(h=Fl(h=zs(null,l,c,h,f),c.attrs,f),b=null);else{const S=c.directiveStylingLast;if(-1===S||l[S]!==g)if(h=zs(g,l,c,h,f),null===b){let k=function xA(l,c,h){const f=h?c.classBindings:c.styleBindings;if(0!==ll(f))return l[Wc(f)]}(l,c,f);void 0!==k&&Array.isArray(k)&&(k=zs(null,l,c,k[1],f),k=Fl(k,c.attrs,f),function TA(l,c,h,f){l[Wc(h?c.classBindings:c.styleBindings)]=f}(l,c,f,k))}else b=function YM(l,c,h){let f;const g=c.directiveEnd;for(let b=1+c.directiveStylingLast;b<g;b++)f=Fl(f,l[b].hostAttrs,h);return Fl(f,c.attrs,h)}(l,c,f)}return void 0!==b&&(f?c.residualClasses=b:c.residualStyles=b),h}(g,b,c,f),function WM(l,c,h,f,g,b){let S=b?c.classBindings:c.styleBindings,T=Wc(S),k=ll(S);l[f]=h;let B,R=!1;if(Array.isArray(h)){const $=h;B=$[1],(null===B||tc($,B)>0)&&(R=!0)}else B=h;if(g)if(0!==k){const le=Wc(l[T+1]);l[f+1]=o0(le,T),0!==le&&(l[le+1]=a0(l[le+1],f)),l[T+1]=function lS(l,c){return 131071&l|c<<17}(l[T+1],f)}else l[f+1]=o0(T,0),0!==T&&(l[T+1]=a0(l[T+1],f)),T=f;else l[f+1]=o0(k,0),0===T?T=f:l[k+1]=a0(l[k+1],f),k=f;R&&(l[f+1]=TT(l[f+1])),N0(l,B,f,!0),N0(l,B,f,!1),function qM(l,c,h,f,g){const b=g?l.residualClasses:l.residualStyles;null!=b&&"string"==typeof c&&tc(b,c)>=0&&(h[f+1]=cS(h[f+1]))}(c,B,l,f,b),S=o0(T,k),b?c.classBindings=S:c.styleBindings=S}(g,b,c,h,S,f)}}(b,l,S,f),c!==Gi&&Pa(g,S,c)&&function ZS(l,c,h,f,g,b,S,T){if(!(3&c.type))return;const k=l.data,R=k[T+1];kp(function AT(l){return 1==(1&l)}(R)?Ng(k,c,h,g,ll(R),S):void 0)||(kp(b)||function aS(l){return 2==(2&l)}(R)&&(b=Ng(k,null,h,g,T,S)),function YO(l,c,h,f,g){const b=jn(l);if(c)g?b?l.addClass(h,f):h.classList.add(f):b?l.removeClass(h,f):h.classList.remove(f);else{let S=-1===f.indexOf("-")?void 0:Ma.DashCase;if(null==g)b?l.removeStyle(h,f,S):h.style.removeProperty(f);else{const T="string"==typeof g&&g.endsWith("!important");T&&(g=g.slice(0,-10),S|=Ma.Important),b?l.setStyle(h,f,g,S):h.style.setProperty(f,g,T?"important":"")}}}(f,S,Yl(Cr(),h),g,b))}(b,b.data[Cr()],g,g[11],l,g[S+1]=function Fg(l,c){return null==l||("string"==typeof c?l+=c:"object"==typeof l&&(l=Be(jc(l)))),l}(c,h),f,S)}(l,c,null,!0),V0}function zs(l,c,h,f,g){let b=null;const S=h.directiveEnd;let T=h.directiveStylingLast;for(-1===T?T=h.directiveStart:T++;T<S&&(b=c[T],f=Fl(f,b.hostAttrs,g),b!==l);)T++;return null!==l&&(h.directiveStylingLast=T),f}function Fl(l,c,h){const f=h?1:2;let g=-1;if(null!==c)for(let b=0;b<c.length;b++){const S=c[b];"number"==typeof S?g=S:g===f&&(Array.isArray(l)||(l=void 0===l?[]:["",l]),Ao(l,S,!!h||c[++b]))}return void 0===l?null:l}function Ng(l,c,h,f,g,b){const S=null===c;let T;for(;g>0;){const k=l[g],R=Array.isArray(k),B=R?k[1]:k,$=null===B;let le=h[g+1];le===Gi&&(le=$?Si:void 0);let de=$?rp(le,f):B===f?le:void 0;if(R&&!kp(de)&&(de=rp(k,f)),kp(de)&&(T=de,S))return T;const $e=l[g+1];g=S?Wc($e):ll($e)}if(null!==c){let k=b?c.residualClasses:c.residualStyles;null!=k&&(T=rp(k,f))}return T}function kp(l){return void 0!==l}function j0(l,c=""){const h=it(),f=Es(),g=l+20,b=f.firstCreatePass?cn(f,g,1,c,null):f.data[g],S=h[g]=function Yw(l,c){return jn(l)?l.createText(c):l.createTextNode(c)}(h[11],c);JC(f,h,S,b),Zn(b,!1)}function Ah(l){return gs("",l,""),Ah}function gs(l,c,h){const f=it(),g=function zf(l,c,h,f){return Pa(l,Oc(),h)?c+Fe(h)+f:Gi}(f,l,c,h);return g!==Gi&&bu(f,Cr(),g),gs}const Mp=void 0;var _u=["en",[["a","p"],["AM","PM"],Mp],[["AM","PM"],Mp,Mp],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Mp,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Mp,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Mp,"{1} 'at' {0}",Mp],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function eP(l){const h=Math.floor(Math.abs(l)),f=l.toString().replace(/^[^.]*\.?/,"").length;return 1===h&&0===f?1:5}];let jg={};function r_(l){const c=function tP(l){return l.toLowerCase().replace(/_/g,"-")}(l);let h=o_(c);if(h)return h;const f=c.split("-")[0];if(h=o_(f),h)return h;if("en"===f)return _u;throw new Error(`Missing locale data for the locale "${l}".`)}function RA(l){return r_(l)[Ri.PluralCase]}function o_(l){return l in jg||(jg[l]=es.ng&&es.ng.common&&es.ng.common.locales&&es.ng.common.locales[l]),jg[l]}var Ri=(()=>((Ri=Ri||{})[Ri.LocaleId=0]="LocaleId",Ri[Ri.DayPeriodsFormat=1]="DayPeriodsFormat",Ri[Ri.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ri[Ri.DaysFormat=3]="DaysFormat",Ri[Ri.DaysStandalone=4]="DaysStandalone",Ri[Ri.MonthsFormat=5]="MonthsFormat",Ri[Ri.MonthsStandalone=6]="MonthsStandalone",Ri[Ri.Eras=7]="Eras",Ri[Ri.FirstDayOfWeek=8]="FirstDayOfWeek",Ri[Ri.WeekendRange=9]="WeekendRange",Ri[Ri.DateFormat=10]="DateFormat",Ri[Ri.TimeFormat=11]="TimeFormat",Ri[Ri.DateTimeFormat=12]="DateTimeFormat",Ri[Ri.NumberSymbols=13]="NumberSymbols",Ri[Ri.NumberFormats=14]="NumberFormats",Ri[Ri.CurrencyCode=15]="CurrencyCode",Ri[Ri.CurrencySymbol=16]="CurrencySymbol",Ri[Ri.CurrencyName=17]="CurrencyName",Ri[Ri.Currencies=18]="Currencies",Ri[Ri.Directionality=19]="Directionality",Ri[Ri.PluralCase=20]="PluralCase",Ri[Ri.ExtraData=21]="ExtraData",Ri))();const Gv="en-US";let BA=Gv;function tE(l,c,h,f,g){if(l=xe(l),Array.isArray(l))for(let b=0;b<l.length;b++)tE(l[b],c,h,f,g);else{const b=Es(),S=it();let T=Cg(l)?l:xe(l.provide),k=GT(l);const R=an(),B=1048575&R.providerIndexes,$=R.directiveStart,le=R.providerIndexes>>20;if(Cg(l)||!l.multi){const de=new su(k,g,qf),$e=w_(T,c,g?B:B+le,$);-1===$e?(Ju(Jl(R,S),b,T),E_(b,l,c.length),c.push(T),R.directiveStart++,R.directiveEnd++,g&&(R.providerIndexes+=1048576),h.push(de),S.push(de)):(h[$e]=de,S[$e]=de)}else{const de=w_(T,c,B+le,$),$e=w_(T,c,B,B+le),_t=de>=0&&h[de],kt=$e>=0&&h[$e];if(g&&!kt||!g&&!_t){Ju(Jl(R,S),b,T);const Yt=function kP(l,c,h,f,g){const b=new su(l,h,qf);return b.multi=[],b.index=c,b.componentProviders=0,iE(b,g,f&&!h),b}(g?iD:DP,h.length,g,f,k);!g&&kt&&(h[$e].providerFactory=Yt),E_(b,l,c.length,0),c.push(T),R.directiveStart++,R.directiveEnd++,g&&(R.providerIndexes+=1048576),h.push(Yt),S.push(Yt)}else E_(b,l,de>-1?de:$e,iE(h[g?$e:de],k,!g&&f));!g&&f&&kt&&h[$e].componentProviders++}}}function E_(l,c,h,f){const g=Cg(c),b=function AM(l){return!!l.useClass}(c);if(g||b){const k=(b?xe(c.useClass):c).prototype.ngOnDestroy;if(k){const R=l.destroyHooks||(l.destroyHooks=[]);if(!g&&c.multi){const B=R.indexOf(h);-1===B?R.push(h,[f,k]):R[B+1].push(f,k)}else R.push(h,k)}}}function iE(l,c,h){return h&&l.componentProviders++,l.multi.push(c)-1}function w_(l,c,h,f){for(let g=h;g<f;g++)if(c[g]===l)return g;return-1}function DP(l,c,h,f){return sE(this.multi,[])}function iD(l,c,h,f){const g=this.multi;let b;if(this.providerFactory){const S=this.providerFactory.componentProviders,T=sl(h,h[1],this.providerFactory.index,f);b=T.slice(0,S),sE(g,b);for(let k=S;k<T.length;k++)b.push(T[k])}else b=[],sE(g,b);return b}function sE(l,c){for(let h=0;h<l.length;h++)c.push((0,l[h])());return c}function nE(l,c=[]){return h=>{h.providersResolver=(f,g)=>function AP(l,c,h){const f=Es();if(f.firstCreatePass){const g=na(l);tE(h,f.data,f.blueprint,g,!0),tE(c,f.data,f.blueprint,g,!1)}}(f,g?g(l):l,c)}}class sD{}class hl{resolveComponentFactory(c){throw function OP(l){const c=Error(`No component factory found for ${Be(l)}. Did you add it to @NgModule.entryComponents?`);return c.ngComponent=l,c}(c)}}let ib=(()=>{class l{}return l.NULL=new hl,l})();function PP(){return Yg(an(),it())}function Yg(l,c){return new sb(zo(l,c))}let sb=(()=>{class l{constructor(h){this.nativeElement=h}}return l.__NG_ELEMENT_ID__=PP,l})();function hn(l){return l instanceof sb?l.nativeElement:l}class __{}let ys=(()=>{class l{}return l.__NG_ELEMENT_ID__=()=>function xu(){const l=it(),h=ro(an().index,l);return function RP(l){return l[11]}(Uo(h)?h:l)}(),l})(),Tu=(()=>{class l{}return l.\u0275prov=qs({token:l,providedIn:"root",factory:()=>null}),l})();class NP{constructor(c){this.full=c,this.major=c.split(".")[0],this.minor=c.split(".")[1],this.patch=c.split(".").slice(2).join(".")}}const fi=new NP("13.1.3"),Vs={};function rE(l,c,h,f,g=!1){for(;null!==h;){const b=c[h.index];if(null!==b&&f.push(mn(b)),xa(b))for(let T=10;T<b.length;T++){const k=b[T],R=k[1].firstChild;null!==R&&rE(k[1],k,R,f)}const S=h.type;if(8&S)rE(l,c,h.child,f);else if(32&S){const T=cg(h,c);let k;for(;k=T();)f.push(k)}else if(16&S){const T=tS(c,h);if(Array.isArray(T))f.push(...T);else{const k=Ch(c[16]);rE(k[1],k,T,f,!0)}}h=g?h.projectionNext:h.next}return f}class nb{constructor(c,h){this._lView=c,this._cdRefInjectingView=h,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const c=this._lView,h=c[1];return rE(h,c,h.firstChild,[])}get context(){return this._lView[8]}set context(c){this._lView[8]=c}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const c=this._lView[3];if(xa(c)){const h=c[8],f=h?h.indexOf(this):-1;f>-1&&(Xw(c,f),ar(h,f))}this._attachedToViewContainer=!1}dg(this._lView[1],this._lView)}onDestroy(c){ES(this._lView[1],this._lView,null,c)}markForCheck(){O(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){j(this._lView[1],this._lView,this.context)}checkNoChanges(){!function zT(l,c,h){Aa(!0);try{j(l,c,h)}finally{Aa(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new vt(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function lT(l,c){pg(l,c,c[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(c){if(this._attachedToViewContainer)throw new vt(902,"");this._appRef=c}}class Ni extends nb{constructor(c){super(c),this._view=c}detectChanges(){Y(this._view)}checkNoChanges(){!function zn(l){Aa(!0);try{Y(l)}finally{Aa(!1)}}(this._view)}get context(){return null}}class nD extends ib{constructor(c){super(),this.ngModule=c}resolveComponentFactory(c){const h=Ot(c);return new je(h,this.ngModule)}}function rD(l){const c=[];for(let h in l)l.hasOwnProperty(h)&&c.push({propName:l[h],templateName:h});return c}const un=new Qn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>pt});class je extends sD{constructor(c,h){super(),this.componentDef=c,this.ngModule=h,this.componentType=c.type,this.selector=function nS(l){return l.map(r0).join(",")}(c.selectors),this.ngContentSelectors=c.ngContentSelectors?c.ngContentSelectors:[],this.isBoundToModule=!!h}get inputs(){return rD(this.componentDef.inputs)}get outputs(){return rD(this.componentDef.outputs)}create(c,h,f,g){const b=(g=g||this.ngModule)?function oD(l,c){return{get:(h,f,g)=>{const b=l.get(h,Vs,g);return b!==Vs||f===Vs?b:c.get(h,f,g)}}}(c,g.injector):c,S=b.get(__,$h),T=b.get(Tu,null),k=S.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",B=f?function CS(l,c,h){if(jn(l))return l.selectRootElement(c,h===Yi.ShadowDom);let f="string"==typeof c?l.querySelector(c):c;return f.textContent="",f}(k,f,this.componentDef.encapsulation):Kw(S.createRenderer(null,this.componentDef),R,function Fi(l){const c=l.toLowerCase();return"svg"===c?"http://www.w3.org/2000/svg":"math"===c?"http://www.w3.org/1998/MathML/":null}(R)),$=this.componentDef.onPush?576:528,le=function b0(l,c){return{components:[],scheduler:l||pt,clean:WT,playerHandler:c||null,flags:0}}(),de=Lv(0,null,null,1,0,null,null,null,null,null),$e=fg(null,de,le,$,null,null,S,k,T,b);let _t,kt;Pc($e);try{const Yt=function Nv(l,c,h,f,g,b){const S=h[1];h[20]=l;const k=cn(S,20,2,"#host",null),R=k.mergedAttrs=c.hostAttrs;null!==R&&(ae(k,R,!0),null!==l&&(ru(g,l,R),null!==k.classes&&sS(g,l,k.classes),null!==k.styles&&bT(g,l,k.styles)));const B=f.createRenderer(l,c),$=fg(h,bS(c),null,c.onPush?64:16,h[20],k,f,B,b||null,null);return S.firstCreatePass&&(Ju(Jl(k,h),S,c.type),gM(S,k),yM(k,h.length,1)),Q(h,$),h[20]=$}(B,this.componentDef,$e,S,k);if(B)if(f)ru(k,B,["ng-version",fi.full]);else{const{attrs:et,classes:vi}=function rS(l){const c=[],h=[];let f=1,g=2;for(;f<l.length;){let b=l[f];if("string"==typeof b)2===g?""!==b&&c.push(b,l[++f]):8===g&&h.push(b);else{if(!Eh(g))break;g=b}f++}return{attrs:c,classes:h}}(this.componentDef.selectors[0]);et&&ru(k,B,et),vi&&vi.length>0&&sS(k,B,vi.join(" "))}if(kt=Gh(de,20),void 0!==h){const et=kt.projection=[];for(let vi=0;vi<this.ngContentSelectors.length;vi++){const vs=h[vi];et.push(null!=vs?Array.from(vs):null)}}_t=function v0(l,c,h,f,g){const b=h[1],S=function $c(l,c,h){const f=an();l.firstCreatePass&&(h.providersResolver&&h.providersResolver(h),_S(l,f,c,mg(l,c,1,null),h));const g=sl(c,l,f.directiveStart,f);ko(g,c);const b=zo(f,c);return b&&ko(b,c),g}(b,h,c);if(f.components.push(S),l[8]=S,g&&g.forEach(k=>k(S,c)),c.contentQueries){const k=an();c.contentQueries(1,S,k.directiveStart)}const T=an();return!b.firstCreatePass||null===c.hostBindings&&null===c.hostAttrs||(Er(T.index),yg(h[1],T,0,T.directiveStart,T.directiveEnd,c),mM(c,S)),S}(Yt,this.componentDef,$e,le,[XT]),wd(de,$e,null)}finally{Un()}return new x_(this.componentType,_t,Yg(kt,$e),$e,kt)}}class x_ extends class S_{}{constructor(c,h,f,g,b){super(),this.location=f,this._rootLView=g,this._tNode=b,this.instance=h,this.hostView=this.changeDetectorRef=new Ni(g),this.componentType=c}get injector(){return new ec(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(c){this.hostView.onDestroy(c)}}class Vl{}class BP{}const rb=new Map;class ob extends Vl{constructor(c,h){super(),this._parent=h,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new nD(this);const f=$i(c);this._bootstrapComponents=Ys(f.bootstrap),this._r3Injector=_M(c,h,[{provide:Vl,useValue:this},{provide:ib,useValue:this.componentFactoryResolver}],Be(c)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(c)}get(c,h=A.THROW_IF_NOT_FOUND,f=Vi.Default){return c===A||c===Vl||c===ua?this:this._r3Injector.get(c,h,f)}destroy(){const c=this._r3Injector;!c.destroyed&&c.destroy(),this.destroyCbs.forEach(h=>h()),this.destroyCbs=null}onDestroy(c){this.destroyCbs.push(c)}}class li extends BP{constructor(c){super(),this.moduleType=c,null!==$i(c)&&function VP(l){const c=new Set;!function h(f){const g=$i(f,!0),b=g.id;null!==b&&(function aD(l,c,h){if(c&&c!==h)throw new Error(`Duplicate module registered for ${l} - ${Be(c)} vs ${Be(c.name)}`)}(b,rb.get(b),f),rb.set(b,f));const S=Ys(g.imports);for(const T of S)c.has(T)||(c.add(T),h(T))}(l)}(c)}create(c){return new ob(this.moduleType,c)}}function ds(l,c,h){const f=function Xn(){const l=Oi.lFrame;let c=l.bindingRootIndex;return-1===c&&(c=l.bindingRootIndex=l.tView.bindingStartIndex),c}()+l,g=it();return g[f]===Gi?function Eu(l,c,h){return l[c]=h}(g,f,h?c.call(h):c()):function Sn(l,c){return l[c]}(g,f)}function cb(l){return c=>{setTimeout(l,void 0,c)}}const qn=class WP extends d.x{constructor(c=!1){super(),this.__isAsync=c}emit(c){super.next(c)}subscribe(c,h,f){var g,b,S;let T=c,k=h||(()=>null),R=f;if(c&&"object"==typeof c){const $=c;T=null===(g=$.next)||void 0===g?void 0:g.bind($),k=null===(b=$.error)||void 0===b?void 0:b.bind($),R=null===(S=$.complete)||void 0===S?void 0:S.bind($)}this.__isAsync&&(k=cb(k),T&&(T=cb(T)),R&&(R=cb(R)));const B=super.subscribe({next:T,error:k,complete:R});return c instanceof ee.w0&&c.add(B),B}};function Lp(){return this._results[Cu()]()}class Ur{constructor(c=!1){this._emitDistinctChangesOnly=c,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const h=Cu(),f=Ur.prototype;f[h]||(f[h]=Lp)}get changes(){return this._changes||(this._changes=new qn)}get(c){return this._results[c]}map(c){return this._results.map(c)}filter(c){return this._results.filter(c)}find(c){return this._results.find(c)}reduce(c,h){return this._results.reduce(c,h)}forEach(c){this._results.forEach(c)}some(c){return this._results.some(c)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(c,h){const f=this;f.dirty=!1;const g=aa(c);(this._changesDetected=!function Gm(l,c,h){if(l.length!==c.length)return!1;for(let f=0;f<l.length;f++){let g=l[f],b=c[f];if(h&&(g=h(g),b=h(b)),b!==g)return!1}return!0}(f._results,g,h))&&(f._results=g,f.length=g.length,f.last=g[this.length-1],f.first=g[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Qr=(()=>{class l{}return l.__NG_ELEMENT_ID__=Po,l})();const cE=Qr,D_=class extends cE{constructor(c,h,f){super(),this._declarationLView=c,this._declarationTContainer=h,this.elementRef=f}createEmbeddedView(c){const h=this._declarationTContainer.tViews,f=fg(this._declarationLView,h,c,16,null,h.declTNode,null,null,null,null);f[17]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[19];return null!==b&&(f[19]=b.createEmbeddedView(h)),wd(h,f,c),new nb(f)}};function Po(){return Yf(an(),it())}function Yf(l,c){return 4&l.type?new D_(c,l,Yg(l,c)):null}let k_=(()=>{class l{}return l.__NG_ELEMENT_ID__=lr,l})();function lr(){return hb(an(),it())}const O_=k_,M_=class extends O_{constructor(c,h,f){super(),this._lContainer=c,this._hostTNode=h,this._hostLView=f}get element(){return Yg(this._hostTNode,this._hostLView)}get injector(){return new ec(this._hostTNode,this._hostLView)}get parentInjector(){const c=Qu(this._hostTNode,this._hostLView);if(wr(c)){const h=or(c,this._hostLView),f=Ql(c);return new ec(h[1].data[f+8],h)}return new ec(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(c){const h=Qg(this._lContainer);return null!==h&&h[c]||null}get length(){return this._lContainer.length-10}createEmbeddedView(c,h,f){const g=c.createEmbeddedView(h||{});return this.insert(g,f),g}createComponent(c,h,f,g,b){const S=c&&!function yf(l){return"function"==typeof l}(c);let T;if(S)T=h;else{const $=h||{};T=$.index,f=$.injector,g=$.projectableNodes,b=$.ngModuleRef}const k=S?c:new je(Ot(c)),R=f||this.parentInjector;if(!b&&null==k.ngModule&&R){const $=R.get(Vl,null);$&&(b=$)}const B=k.create(R,g,void 0,b);return this.insert(B.hostView,T),B}insert(c,h){const f=c._lView,g=f[1];if(function of(l){return xa(l[3])}(f)){const B=this.indexOf(c);if(-1!==B)this.detach(B);else{const $=f[3],le=new M_($,$[6],$[3]);le.detach(le.indexOf(c))}}const b=this._adjustIndex(h),S=this._lContainer;!function UO(l,c,h,f){const g=10+f,b=h.length;f>0&&(h[g-1][4]=c),f<b-10?(c[4]=h[g],rl(h,10+f,c)):(h.push(c),c[4]=null),c[3]=h;const S=c[17];null!==S&&h!==S&&function zO(l,c){const h=l[9];c[16]!==c[3][3][16]&&(l[2]=!0),null===h?l[9]=[c]:h.push(c)}(S,c);const T=c[19];null!==T&&T.insertView(l),c[2]|=128}(g,f,S,b);const T=gT(b,S),k=f[11],R=QC(k,S[7]);return null!==R&&function jO(l,c,h,f,g,b){f[0]=g,f[6]=c,pg(l,f,h,1,g,b)}(g,S[6],k,f,R,T),c.attachToViewContainerRef(),rl(Dd(S),b,c),c}move(c,h){return this.insert(c,h)}indexOf(c){const h=Qg(this._lContainer);return null!==h?h.indexOf(c):-1}remove(c){const h=this._adjustIndex(c,-1),f=Xw(this._lContainer,h);f&&(ar(Dd(this._lContainer),h),dg(f[1],f))}detach(c){const h=this._adjustIndex(c,-1),f=Xw(this._lContainer,h);return f&&null!=ar(Dd(this._lContainer),h)?new nb(f):null}_adjustIndex(c,h=0){return null==c?this.length+h:c}};function Qg(l){return l[8]}function Dd(l){return l[8]||(l[8]=[])}function hb(l,c){let h;const f=c[l.index];if(xa(f))h=f;else{let g;if(8&l.type)g=mn(f);else{const b=c[11];g=b.createComment("");const S=zo(l,c);Rf(b,QC(b,S),g,function $O(l,c){return jn(l)?l.nextSibling(c):c.nextSibling}(b,S),!1)}c[l.index]=h=jT(f,c,g,l),Q(c,h)}return new M_(h,l,c)}class ft{constructor(c){this.queryList=c,this.matches=null}clone(){return new ft(this.queryList)}setDirty(){this.queryList.setDirty()}}class xn{constructor(c=[]){this.queries=c}createEmbeddedView(c){const h=c.queries;if(null!==h){const f=null!==c.contentQueries?c.contentQueries[0]:h.length,g=[];for(let b=0;b<f;b++){const S=h.getByIndex(b);g.push(this.queries[S.indexInDeclarationView].clone())}return new xn(g)}return null}insertView(c){this.dirtyQueriesWithMatches(c)}detachView(c){this.dirtyQueriesWithMatches(c)}dirtyQueriesWithMatches(c){for(let h=0;h<this.queries.length;h++)null!==gD(c,h).matches&&this.queries[h].setDirty()}}class hD{constructor(c,h,f=null){this.predicate=c,this.flags=h,this.read=f}}class ub{constructor(c=[]){this.queries=c}elementStart(c,h){for(let f=0;f<this.queries.length;f++)this.queries[f].elementStart(c,h)}elementEnd(c){for(let h=0;h<this.queries.length;h++)this.queries[h].elementEnd(c)}embeddedTView(c){let h=null;for(let f=0;f<this.length;f++){const g=null!==h?h.length:0,b=this.getByIndex(f).embeddedTView(c,g);b&&(b.indexInDeclarationView=f,null!==h?h.push(b):h=[b])}return null!==h?new ub(h):null}template(c,h){for(let f=0;f<this.queries.length;f++)this.queries[f].template(c,h)}getByIndex(c){return this.queries[c]}get length(){return this.queries.length}track(c){this.queries.push(c)}}class db{constructor(c,h=-1){this.metadata=c,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=h}elementStart(c,h){this.isApplyingToNode(h)&&this.matchTNode(c,h)}elementEnd(c){this._declarationNodeIndex===c.index&&(this._appliesToNextNode=!1)}template(c,h){this.elementStart(c,h)}embeddedTView(c,h){return this.isApplyingToNode(c)?(this.crossesNgTemplate=!0,this.addMatch(-c.index,h),new db(this.metadata)):null}isApplyingToNode(c){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const h=this._declarationNodeIndex;let f=c.parent;for(;null!==f&&8&f.type&&f.index!==h;)f=f.parent;return h===(null!==f?f.index:-1)}return this._appliesToNextNode}matchTNode(c,h){const f=this.metadata.predicate;if(Array.isArray(f))for(let g=0;g<f.length;g++){const b=f[g];this.matchTNodeWithReadOption(c,h,qP(h,b)),this.matchTNodeWithReadOption(c,h,pf(h,c,b,!1,!1))}else f===Qr?4&h.type&&this.matchTNodeWithReadOption(c,h,-1):this.matchTNodeWithReadOption(c,h,pf(h,c,f,!1,!1))}matchTNodeWithReadOption(c,h,f){if(null!==f){const g=this.metadata.read;if(null!==g)if(g===sb||g===k_||g===Qr&&4&h.type)this.addMatch(h.index,-2);else{const b=pf(h,c,g,!1,!1);null!==b&&this.addMatch(h.index,b)}else this.addMatch(h.index,f)}}addMatch(c,h){null===this.matches?this.matches=[c,h]:this.matches.push(c,h)}}function qP(l,c){const h=l.localNames;if(null!==h)for(let f=0;f<h.length;f+=2)if(h[f]===c)return h[f+1];return null}function Jg(l,c,h,f){return-1===h?function P_(l,c){return 11&l.type?Yg(l,c):4&l.type?Yf(l,c):null}(c,l):-2===h?function pb(l,c,h){return h===sb?Yg(c,l):h===Qr?Yf(c,l):h===k_?hb(c,l):void 0}(l,c,f):sl(l,l[1],h,c)}function uD(l,c,h,f){const g=c[19].queries[f];if(null===g.matches){const b=l.data,S=h.matches,T=[];for(let k=0;k<S.length;k+=2){const R=S[k];T.push(R<0?null:Jg(c,b[R],S[k+1],h.metadata.read))}g.matches=T}return g.matches}function L_(l,c,h,f){const g=l.queries.getByIndex(h),b=g.matches;if(null!==b){const S=uD(l,c,g,h);for(let T=0;T<b.length;T+=2){const k=b[T];if(k>0)f.push(S[T/2]);else{const R=b[T+1],B=c[-k];for(let $=10;$<B.length;$++){const le=B[$];le[17]===le[3]&&L_(le[1],le,R,f)}if(null!==B[9]){const $=B[9];for(let le=0;le<$.length;le++){const de=$[le];L_(de[1],de,R,f)}}}}}return f}function dD(l){const c=it(),h=Es(),f=$u();Gu(f+1);const g=gD(h,f);if(l.dirty&&kc(c)===(2==(2&g.metadata.flags))){if(null===g.matches)l.reset([]);else{const b=g.crossesNgTemplate?L_(h,c,f,[]):uD(h,c,g,f);l.reset(b,hn),l.notifyOnChanges()}return!0}return!1}function pD(l,c,h){const f=Es();f.firstCreatePass&&(mb(f,new hD(l,c,h),-1),2==(2&c)&&(f.staticViewQueries=!0)),fb(f,it(),c)}function R_(l,c,h,f){const g=Es();if(g.firstCreatePass){const b=an();mb(g,new hD(c,h,f),b.index),function $P(l,c){const h=l.contentQueries||(l.contentQueries=[]);c!==(h.length?h[h.length-1]:-1)&&h.push(l.queries.length-1,c)}(g,l),2==(2&h)&&(g.staticContentQueries=!0)}fb(g,it(),h)}function fD(){return function mD(l,c){return l[19].queries[c].queryList}(it(),$u())}function fb(l,c,h){const f=new Ur(4==(4&h));ES(l,c,f,f.destroy),null===c[19]&&(c[19]=new xn),c[19].queries.push(new ft(f))}function mb(l,c,h){null===l.queries&&(l.queries=new ub),l.queries.track(new db(c,h))}function gD(l,c){return l.queries.getByIndex(c)}function N_(l,c){return Yf(l,c)}function Ki(...l){}const iy=new Qn("Application Initializer");let fc=(()=>{class l{constructor(h){this.appInits=h,this.resolve=Ki,this.reject=Ki,this.initialized=!1,this.done=!1,this.donePromise=new Promise((f,g)=>{this.resolve=f,this.reject=g})}runInitializers(){if(this.initialized)return;const h=[],f=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let g=0;g<this.appInits.length;g++){const b=this.appInits[g]();if(CA(b))h.push(b);else if(xp(b)){const S=new Promise((T,k)=>{b.subscribe({complete:T,error:k})});h.push(S)}}Promise.all(h).then(()=>{f()}).catch(g=>{this.reject(g)}),0===h.length&&f(),this.initialized=!0}}return l.\u0275fac=function(h){return new(h||l)(Vr(iy,8))},l.\u0275prov=qs({token:l,factory:l.\u0275fac}),l})();const Kf=new Qn("AppId"),nL={provide:Kf,useFactory:function sL(){return`${Se()}${Se()}${Se()}`},deps:[]};function Se(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const pn=new Qn("Platform Initializer"),Go=new Qn("Platform ID"),sy=new Qn("appBootstrapListener");let ny=(()=>{class l{log(h){console.log(h)}warn(h){console.warn(h)}}return l.\u0275fac=function(h){return new(h||l)},l.\u0275prov=qs({token:l,factory:l.\u0275fac}),l})();const zr=new Qn("LocaleId"),qi=new Qn("DefaultCurrencyCode");class oL{constructor(c,h){this.ngModuleFactory=c,this.componentFactories=h}}let gE=(()=>{class l{compileModuleSync(h){return new li(h)}compileModuleAsync(h){return Promise.resolve(this.compileModuleSync(h))}compileModuleAndAllComponentsSync(h){const f=this.compileModuleSync(h),b=Ys($i(h).declarations).reduce((S,T)=>{const k=Ot(T);return k&&S.push(new je(k)),S},[]);return new oL(f,b)}compileModuleAndAllComponentsAsync(h){return Promise.resolve(this.compileModuleAndAllComponentsSync(h))}clearCache(){}clearCacheFor(h){}getModuleId(h){}}return l.\u0275fac=function(h){return new(h||l)},l.\u0275prov=qs({token:l,factory:l.\u0275fac}),l})();const aL=(()=>Promise.resolve(0))();function G_(l){"undefined"==typeof Zone?aL.then(()=>{l&&l.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",l)}class Hl{constructor({enableLongStackTrace:c=!1,shouldCoalesceEventChangeDetection:h=!1,shouldCoalesceRunChangeDetection:f=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new qn(!1),this.onMicrotaskEmpty=new qn(!1),this.onStable=new qn(!1),this.onError=new qn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const g=this;g._nesting=0,g._outer=g._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(g._inner=g._inner.fork(new Zone.TaskTrackingZoneSpec)),c&&Zone.longStackTraceZoneSpec&&(g._inner=g._inner.fork(Zone.longStackTraceZoneSpec)),g.shouldCoalesceEventChangeDetection=!f&&h,g.shouldCoalesceRunChangeDetection=f,g.lastRequestAnimationFrameId=-1,g.nativeRequestAnimationFrame=function lL(){let l=es.requestAnimationFrame,c=es.cancelAnimationFrame;if("undefined"!=typeof Zone&&l&&c){const h=l[Zone.__symbol__("OriginalDelegate")];h&&(l=h);const f=c[Zone.__symbol__("OriginalDelegate")];f&&(c=f)}return{nativeRequestAnimationFrame:l,nativeCancelAnimationFrame:c}}().nativeRequestAnimationFrame,function Xc(l){const c=()=>{!function Yo(l){l.isCheckStableRunning||-1!==l.lastRequestAnimationFrameId||(l.lastRequestAnimationFrameId=l.nativeRequestAnimationFrame.call(es,()=>{l.fakeTopEventTask||(l.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{l.lastRequestAnimationFrameId=-1,bE(l),l.isCheckStableRunning=!0,vE(l),l.isCheckStableRunning=!1},void 0,()=>{},()=>{})),l.fakeTopEventTask.invoke()}),bE(l))}(l)};l._inner=l._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(h,f,g,b,S,T)=>{try{return cr(l),h.invokeTask(g,b,S,T)}finally{(l.shouldCoalesceEventChangeDetection&&"eventTask"===b.type||l.shouldCoalesceRunChangeDetection)&&c(),kh(l)}},onInvoke:(h,f,g,b,S,T,k)=>{try{return cr(l),h.invoke(g,b,S,T,k)}finally{l.shouldCoalesceRunChangeDetection&&c(),kh(l)}},onHasTask:(h,f,g,b)=>{h.hasTask(g,b),f===g&&("microTask"==b.change?(l._hasPendingMicrotasks=b.microTask,bE(l),vE(l)):"macroTask"==b.change&&(l.hasPendingMacrotasks=b.macroTask))},onHandleError:(h,f,g,b)=>(h.handleError(g,b),l.runOutsideAngular(()=>l.onError.emit(b)),!1)})}(g)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Hl.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Hl.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(c,h,f){return this._inner.run(c,h,f)}runTask(c,h,f,g){const b=this._inner,S=b.scheduleEventTask("NgZoneEvent: "+g,c,kD,Ki,Ki);try{return b.runTask(S,h,f)}finally{b.cancelTask(S)}}runGuarded(c,h,f){return this._inner.runGuarded(c,h,f)}runOutsideAngular(c){return this._outer.run(c)}}const kD={};function vE(l){if(0==l._nesting&&!l.hasPendingMicrotasks&&!l.isStable)try{l._nesting++,l.onMicrotaskEmpty.emit(null)}finally{if(l._nesting--,!l.hasPendingMicrotasks)try{l.runOutsideAngular(()=>l.onStable.emit(null))}finally{l.isStable=!0}}}function bE(l){l.hasPendingMicrotasks=!!(l._hasPendingMicrotasks||(l.shouldCoalesceEventChangeDetection||l.shouldCoalesceRunChangeDetection)&&-1!==l.lastRequestAnimationFrameId)}function cr(l){l._nesting++,l.isStable&&(l.isStable=!1,l.onUnstable.emit(null))}function kh(l){l._nesting--,vE(l)}class Y_{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new qn,this.onMicrotaskEmpty=new qn,this.onStable=new qn,this.onError=new qn}run(c,h,f){return c.apply(h,f)}runGuarded(c,h,f){return c.apply(h,f)}runOutsideAngular(c){return c()}runTask(c,h,f,g){return c.apply(h,f)}}let Rp=(()=>{class l{constructor(h){this._ngZone=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),h.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Hl.assertNotInAngularZone(),G_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())G_(()=>{for(;0!==this._callbacks.length;){let h=this._callbacks.pop();clearTimeout(h.timeoutId),h.doneCb(this._didWork)}this._didWork=!1});else{let h=this.getPendingTasks();this._callbacks=this._callbacks.filter(f=>!f.updateCb||!f.updateCb(h)||(clearTimeout(f.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(h=>({source:h.source,creationLocation:h.creationLocation,data:h.data})):[]}addCallback(h,f,g){let b=-1;f&&f>0&&(b=setTimeout(()=>{this._callbacks=this._callbacks.filter(S=>S.timeoutId!==b),h(this._didWork,this.getPendingTasks())},f)),this._callbacks.push({doneCb:h,timeoutId:b,updateCb:g})}whenStable(h,f,g){if(g&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(h,f,g),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(h,f,g){return[]}}return l.\u0275fac=function(h){return new(h||l)(Vr(Hl))},l.\u0275prov=qs({token:l,factory:l.\u0275fac}),l})(),Cb=(()=>{class l{constructor(){this._applications=new Map,mc.addToWindow(this)}registerApplication(h,f){this._applications.set(h,f)}unregisterApplication(h){this._applications.delete(h)}unregisterAllApplications(){this._applications.clear()}getTestability(h){return this._applications.get(h)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(h,f=!0){return mc.findTestabilityInTree(this,h,f)}}return l.\u0275fac=function(h){return new(h||l)},l.\u0275prov=qs({token:l,factory:l.\u0275fac}),l})();class K_{addToWindow(c){}findTestabilityInTree(c,h,f){return null}}function Qc(l){mc=l}let Wr,mc=new K_;const CE=new Qn("AllowMultipleToken");class MD{constructor(c,h){this.name=c,this.token=h}}function PD(l,c,h=[]){const f=`Platform: ${c}`,g=new Qn(f);return(b=[])=>{let S=oy();if(!S||S.injector.get(CE,!1))if(l)l(h.concat(b).concat({provide:g,useValue:!0}));else{const T=h.concat(b).concat({provide:g,useValue:!0},{provide:qT,useValue:"platform"});!function X_(l){if(Wr&&!Wr.destroyed&&!Wr.injector.get(CE,!1))throw new vt(400,"");Wr=l.get(Q_);const c=l.get(pn,null);c&&c.forEach(h=>h())}(A.create({providers:T,name:f}))}return function Fa(l){const c=oy();if(!c)throw new vt(401,"");return c}()}}function oy(){return Wr&&!Wr.destroyed?Wr:null}let Q_=(()=>{class l{constructor(h){this._injector=h,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(h,f){const T=function LD(l,c){let h;return h="noop"===l?new Y_:("zone.js"===l?void 0:l)||new Hl({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==c?void 0:c.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==c?void 0:c.ngZoneRunCoalescing)}),h}(f?f.ngZone:void 0,{ngZoneEventCoalescing:f&&f.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:f&&f.ngZoneRunCoalescing||!1}),k=[{provide:Hl,useValue:T}];return T.run(()=>{const R=A.create({providers:k,parent:this.injector,name:h.moduleType.name}),B=h.create(R),$=B.injector.get(vp,null);if(!$)throw new vt(402,"");return T.runOutsideAngular(()=>{const le=T.onError.subscribe({next:de=>{$.handleError(de)}});B.onDestroy(()=>{ly(this._modules,B),le.unsubscribe()})}),function hL(l,c,h){try{const f=h();return CA(f)?f.catch(g=>{throw c.runOutsideAngular(()=>l.handleError(g)),g}):f}catch(f){throw c.runOutsideAngular(()=>l.handleError(f)),f}}($,T,()=>{const le=B.injector.get(fc);return le.runInitializers(),le.donePromise.then(()=>(function c_(l){ui(l,"Expected localeId to be defined"),"string"==typeof l&&(BA=l.toLowerCase().replace(/_/g,"-"))}(B.injector.get(zr,Gv)||Gv),this._moduleDoBootstrap(B),B))})})}bootstrapModule(h,f=[]){const g=ay({},f);return function Z_(l,c,h){const f=new li(h);return Promise.resolve(f)}(0,0,h).then(b=>this.bootstrapModuleFactory(b,g))}_moduleDoBootstrap(h){const f=h.injector.get(Eb);if(h._bootstrapComponents.length>0)h._bootstrapComponents.forEach(g=>f.bootstrap(g));else{if(!h.instance.ngDoBootstrap)throw new vt(403,"");h.instance.ngDoBootstrap(f)}this._modules.push(h)}onDestroy(h){this._destroyListeners.push(h)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new vt(404,"");this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h()),this._destroyed=!0}get destroyed(){return this._destroyed}}return l.\u0275fac=function(h){return new(h||l)(Vr(A))},l.\u0275prov=qs({token:l,factory:l.\u0275fac}),l})();function ay(l,c){return Array.isArray(c)?c.reduce(ay,l):Object.assign(Object.assign({},l),c)}let Eb=(()=>{class l{constructor(h,f,g,b,S){this._zone=h,this._injector=f,this._exceptionHandler=g,this._componentFactoryResolver=b,this._initStatus=S,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const T=new z.y(R=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{R.next(this._stable),R.complete()})}),k=new z.y(R=>{let B;this._zone.runOutsideAngular(()=>{B=this._zone.onStable.subscribe(()=>{Hl.assertNotInAngularZone(),G_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,R.next(!0))})})});const $=this._zone.onUnstable.subscribe(()=>{Hl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{R.next(!1)}))});return()=>{B.unsubscribe(),$.unsubscribe()}});this.isStable=(0,Ie.T)(T,k.pipe((0,Pe.B)()))}bootstrap(h,f){if(!this._initStatus.done)throw new vt(405,"");let g;g=h instanceof sD?h:this._componentFactoryResolver.resolveComponentFactory(h),this.componentTypes.push(g.componentType);const b=function OD(l){return l.isBoundToModule}(g)?void 0:this._injector.get(Vl),T=g.create(A.NULL,[],f||g.selector,b),k=T.location.nativeElement,R=T.injector.get(Rp,null),B=R&&T.injector.get(Cb);return R&&B&&B.registerApplication(k,R),T.onDestroy(()=>{this.detachView(T.hostView),ly(this.components,T),B&&B.unregisterApplication(k)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new vt(101,"");try{this._runningTick=!0;for(let h of this._views)h.detectChanges()}catch(h){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(h))}finally{this._runningTick=!1}}attachView(h){const f=h;this._views.push(f),f.attachToAppRef(this)}detachView(h){const f=h;ly(this._views,f),f.detachFromAppRef()}_loadComponent(h){this.attachView(h.hostView),this.tick(),this.components.push(h),this._injector.get(sy,[]).concat(this._bootstrapListeners).forEach(g=>g(h))}ngOnDestroy(){this._views.slice().forEach(h=>h.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return l.\u0275fac=function(h){return new(h||l)(Vr(Hl),Vr(A),Vr(vp),Vr(ib),Vr(fc))},l.\u0275prov=qs({token:l,factory:l.\u0275fac}),l})();function ly(l,c){const h=l.indexOf(c);h>-1&&l.splice(h,1)}let ps=!0,hr=!1;function EE(){return hr=!0,ps}function J_(){if(hr)throw new Error("Cannot enable prod mode after platform setup.");ps=!1}let hy=(()=>{class l{}return l.__NG_ELEMENT_ID__=ND,l})();function ND(l){return function FD(l,c,h){if(Qp(l)&&!h){const f=ro(l.index,c);return new nb(f,f)}return 47&l.type?new nb(c[16],c):null}(an(),it(),16==(16&l))}class zD{constructor(){}supports(c){return Pn(c)}create(c){return new tI(c)}}const WD=(l,c)=>c;class tI{constructor(c){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=c||WD}forEachItem(c){let h;for(h=this._itHead;null!==h;h=h._next)c(h)}forEachOperation(c){let h=this._itHead,f=this._removalsHead,g=0,b=null;for(;h||f;){const S=!f||h&&h.currentIndex<No(f,g,b)?h:f,T=No(S,g,b),k=S.currentIndex;if(S===f)g--,f=f._nextRemoved;else if(h=h._next,null==S.previousIndex)g++;else{b||(b=[]);const R=T-g,B=k-g;if(R!=B){for(let le=0;le<R;le++){const de=le<b.length?b[le]:b[le]=0,$e=de+le;B<=$e&&$e<R&&(b[le]=de+1)}b[S.previousIndex]=B-R}}T!==k&&c(S,T,k)}}forEachPreviousItem(c){let h;for(h=this._previousItHead;null!==h;h=h._nextPrevious)c(h)}forEachAddedItem(c){let h;for(h=this._additionsHead;null!==h;h=h._nextAdded)c(h)}forEachMovedItem(c){let h;for(h=this._movesHead;null!==h;h=h._nextMoved)c(h)}forEachRemovedItem(c){let h;for(h=this._removalsHead;null!==h;h=h._nextRemoved)c(h)}forEachIdentityChange(c){let h;for(h=this._identityChangesHead;null!==h;h=h._nextIdentityChange)c(h)}diff(c){if(null==c&&(c=[]),!Pn(c))throw new vt(900,"");return this.check(c)?this:null}onDestroy(){}check(c){this._reset();let g,b,S,h=this._itHead,f=!1;if(Array.isArray(c)){this.length=c.length;for(let T=0;T<this.length;T++)b=c[T],S=this._trackByFn(T,b),null!==h&&Object.is(h.trackById,S)?(f&&(h=this._verifyReinsertion(h,b,S,T)),Object.is(h.item,b)||this._addIdentityChange(h,b)):(h=this._mismatch(h,b,S,T),f=!0),h=h._next}else g=0,function Sd(l,c){if(Array.isArray(l))for(let h=0;h<l.length;h++)c(l[h]);else{const h=l[Cu()]();let f;for(;!(f=h.next()).done;)c(f.value)}}(c,T=>{S=this._trackByFn(g,T),null!==h&&Object.is(h.trackById,S)?(f&&(h=this._verifyReinsertion(h,T,S,g)),Object.is(h.item,T)||this._addIdentityChange(h,T)):(h=this._mismatch(h,T,S,g),f=!0),h=h._next,g++}),this.length=g;return this._truncate(h),this.collection=c,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let c;for(c=this._previousItHead=this._itHead;null!==c;c=c._next)c._nextPrevious=c._next;for(c=this._additionsHead;null!==c;c=c._nextAdded)c.previousIndex=c.currentIndex;for(this._additionsHead=this._additionsTail=null,c=this._movesHead;null!==c;c=c._nextMoved)c.previousIndex=c.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(c,h,f,g){let b;return null===c?b=this._itTail:(b=c._prev,this._remove(c)),null!==(c=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null))?(Object.is(c.item,h)||this._addIdentityChange(c,h),this._reinsertAfter(c,b,g)):null!==(c=null===this._linkedRecords?null:this._linkedRecords.get(f,g))?(Object.is(c.item,h)||this._addIdentityChange(c,h),this._moveAfter(c,b,g)):c=this._addAfter(new Ar(h,f),b,g),c}_verifyReinsertion(c,h,f,g){let b=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null);return null!==b?c=this._reinsertAfter(b,c._prev,g):c.currentIndex!=g&&(c.currentIndex=g,this._addToMoves(c,g)),c}_truncate(c){for(;null!==c;){const h=c._next;this._addToRemovals(this._unlink(c)),c=h}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(c,h,f){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(c);const g=c._prevRemoved,b=c._nextRemoved;return null===g?this._removalsHead=b:g._nextRemoved=b,null===b?this._removalsTail=g:b._prevRemoved=g,this._insertAfter(c,h,f),this._addToMoves(c,f),c}_moveAfter(c,h,f){return this._unlink(c),this._insertAfter(c,h,f),this._addToMoves(c,f),c}_addAfter(c,h,f){return this._insertAfter(c,h,f),this._additionsTail=null===this._additionsTail?this._additionsHead=c:this._additionsTail._nextAdded=c,c}_insertAfter(c,h,f){const g=null===h?this._itHead:h._next;return c._next=g,c._prev=h,null===g?this._itTail=c:g._prev=c,null===h?this._itHead=c:h._next=c,null===this._linkedRecords&&(this._linkedRecords=new fa),this._linkedRecords.put(c),c.currentIndex=f,c}_remove(c){return this._addToRemovals(this._unlink(c))}_unlink(c){null!==this._linkedRecords&&this._linkedRecords.remove(c);const h=c._prev,f=c._next;return null===h?this._itHead=f:h._next=f,null===f?this._itTail=h:f._prev=h,c}_addToMoves(c,h){return c.previousIndex===h||(this._movesTail=null===this._movesTail?this._movesHead=c:this._movesTail._nextMoved=c),c}_addToRemovals(c){return null===this._unlinkedRecords&&(this._unlinkedRecords=new fa),this._unlinkedRecords.put(c),c.currentIndex=null,c._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=c,c._prevRemoved=null):(c._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=c),c}_addIdentityChange(c,h){return c.item=h,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=c:this._identityChangesTail._nextIdentityChange=c,c}}class Ar{constructor(c,h){this.item=c,this.trackById=h,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class pL{constructor(){this._head=null,this._tail=null}add(c){null===this._head?(this._head=this._tail=c,c._nextDup=null,c._prevDup=null):(this._tail._nextDup=c,c._prevDup=this._tail,c._nextDup=null,this._tail=c)}get(c,h){let f;for(f=this._head;null!==f;f=f._nextDup)if((null===h||h<=f.currentIndex)&&Object.is(f.trackById,c))return f;return null}remove(c){const h=c._prevDup,f=c._nextDup;return null===h?this._head=f:h._nextDup=f,null===f?this._tail=h:f._prevDup=h,null===this._head}}class fa{constructor(){this.map=new Map}put(c){const h=c.trackById;let f=this.map.get(h);f||(f=new pL,this.map.set(h,f)),f.add(c)}get(c,h){const g=this.map.get(c);return g?g.get(c,h):null}remove(c){const h=c.trackById;return this.map.get(h).remove(c)&&this.map.delete(h),c}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function No(l,c,h){const f=l.previousIndex;if(null===f)return f;let g=0;return h&&f<h.length&&(g=h[f]),f+c+g}class iI{constructor(){}supports(c){return c instanceof Map||C0(c)}create(){return new fL}}class fL{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(c){let h;for(h=this._mapHead;null!==h;h=h._next)c(h)}forEachPreviousItem(c){let h;for(h=this._previousMapHead;null!==h;h=h._nextPrevious)c(h)}forEachChangedItem(c){let h;for(h=this._changesHead;null!==h;h=h._nextChanged)c(h)}forEachAddedItem(c){let h;for(h=this._additionsHead;null!==h;h=h._nextAdded)c(h)}forEachRemovedItem(c){let h;for(h=this._removalsHead;null!==h;h=h._nextRemoved)c(h)}diff(c){if(c){if(!(c instanceof Map||C0(c)))throw new vt(900,"")}else c=new Map;return this.check(c)?this:null}onDestroy(){}check(c){this._reset();let h=this._mapHead;if(this._appendAfter=null,this._forEach(c,(f,g)=>{if(h&&h.key===g)this._maybeAddToChanges(h,f),this._appendAfter=h,h=h._next;else{const b=this._getOrCreateRecordForKey(g,f);h=this._insertBeforeOrAppend(h,b)}}),h){h._prev&&(h._prev._next=null),this._removalsHead=h;for(let f=h;null!==f;f=f._nextRemoved)f===this._mapHead&&(this._mapHead=null),this._records.delete(f.key),f._nextRemoved=f._next,f.previousValue=f.currentValue,f.currentValue=null,f._prev=null,f._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(c,h){if(c){const f=c._prev;return h._next=c,h._prev=f,c._prev=h,f&&(f._next=h),c===this._mapHead&&(this._mapHead=h),this._appendAfter=c,c}return this._appendAfter?(this._appendAfter._next=h,h._prev=this._appendAfter):this._mapHead=h,this._appendAfter=h,null}_getOrCreateRecordForKey(c,h){if(this._records.has(c)){const g=this._records.get(c);this._maybeAddToChanges(g,h);const b=g._prev,S=g._next;return b&&(b._next=S),S&&(S._prev=b),g._next=null,g._prev=null,g}const f=new Jf(c);return this._records.set(c,f),f.currentValue=h,this._addToAdditions(f),f}_reset(){if(this.isDirty){let c;for(this._previousMapHead=this._mapHead,c=this._previousMapHead;null!==c;c=c._next)c._nextPrevious=c._next;for(c=this._changesHead;null!==c;c=c._nextChanged)c.previousValue=c.currentValue;for(c=this._additionsHead;null!=c;c=c._nextAdded)c.previousValue=c.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(c,h){Object.is(h,c.currentValue)||(c.previousValue=c.currentValue,c.currentValue=h,this._addToChanges(c))}_addToAdditions(c){null===this._additionsHead?this._additionsHead=this._additionsTail=c:(this._additionsTail._nextAdded=c,this._additionsTail=c)}_addToChanges(c){null===this._changesHead?this._changesHead=this._changesTail=c:(this._changesTail._nextChanged=c,this._changesTail=c)}_forEach(c,h){c instanceof Map?c.forEach(h):Object.keys(c).forEach(f=>h(c[f],f))}}class Jf{constructor(c){this.key=c,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Md(){return new xE([new zD])}let xE=(()=>{class l{constructor(h){this.factories=h}static create(h,f){if(null!=f){const g=f.factories.slice();h=h.concat(g)}return new l(h)}static extend(h){return{provide:l,useFactory:f=>l.create(h,f||Md()),deps:[[l,new mu,new ol]]}}find(h){const f=this.factories.find(g=>g.supports(h));if(null!=f)return f;throw new vt(901,"")}}return l.\u0275prov=qs({token:l,providedIn:"root",factory:Md}),l})();function dy(){return new Np([new iI])}let Np=(()=>{class l{constructor(h){this.factories=h}static create(h,f){if(f){const g=f.factories.slice();h=h.concat(g)}return new l(h)}static extend(h){return{provide:l,useFactory:f=>l.create(h,f||dy()),deps:[[l,new mu,new ol]]}}find(h){const f=this.factories.find(b=>b.supports(h));if(f)return f;throw new vt(901,"")}}return l.\u0275prov=qs({token:l,providedIn:"root",factory:dy}),l})();const TE=[new iI],sI=new xE([new zD]),qD=new Np(TE),AE=PD(null,"core",[{provide:Go,useValue:"unknown"},{provide:Q_,deps:[A]},{provide:Cb,deps:[]},{provide:ny,deps:[]}]),GD=[{provide:Eb,useClass:Eb,deps:[Hl,A,vp,ib,fc]},{provide:un,deps:[Hl],useFactory:function gL(l){let c=[];return l.onStable.subscribe(()=>{for(;c.length;)c.pop()()}),function(h){c.push(h)}}},{provide:fc,useClass:fc,deps:[[new ol,iy]]},{provide:gE,useClass:gE,deps:[]},nL,{provide:xE,useFactory:function nI(){return sI},deps:[]},{provide:Np,useFactory:function rI(){return qD},deps:[]},{provide:zr,useFactory:function $D(l){return l||function oI(){return"undefined"!=typeof $localize&&$localize.locale||Gv}()},deps:[[new la(zr),new ol,new mu]]},{provide:qi,useValue:"USD"}];let aI=(()=>{class l{constructor(h){}}return l.\u0275fac=function(h){return new(h||l)(Vr(Eb))},l.\u0275mod=W({type:l}),l.\u0275inj=ta({providers:GD}),l})()},3942:(Kt,Xe,G)=>{G.d(Xe,{Z:()=>vt});var d=G(2090),ee=G(4859),z=G(6881),Ie=G(1877);class Pe{constructor(Fe,Ye){this._delegate=Fe,this.firebase=Ye,(0,z._addComponent)(Fe,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=Fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Fe){this._delegate.automaticDataCollectionEnabled=Fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Fe=>{this._delegate.checkDestroyed(),Fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,z.deleteApp)(this._delegate)))}_getService(Fe,Ye=z._DEFAULT_ENTRY_NAME){var Et;this._delegate.checkDestroyed();const Dt=this._delegate.container.getProvider(Fe);return!Dt.isInitialized()&&"EXPLICIT"===(null===(Et=Dt.getComponent())||void 0===Et?void 0:Et.instantiationMode)&&Dt.initialize(),Dt.getImmediate({identifier:Ye})}_removeServiceInstance(Fe,Ye=z._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Fe).clearInstance(Ye)}_addComponent(Fe){(0,z._addComponent)(this._delegate,Fe)}_addOrOverwriteComponent(Fe){(0,z._addOrOverwriteComponent)(this._delegate,Fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Le=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),he=function Ue(){const At=function Be(At){const Fe={},Ye={__esModule:!0,initializeApp:function wt(Rt,bi={}){const be=z.initializeApp(Rt,bi);if((0,d.r3)(Fe,be.name))return Fe[be.name];const We=new At(be,Ye);return Fe[be.name]=We,We},app:Dt,registerVersion:z.registerVersion,setLogLevel:z.setLogLevel,onLog:z.onLog,apps:null,SDK_VERSION:z.SDK_VERSION,INTERNAL:{registerComponent:function ht(Rt){const bi=Rt.name,be=bi.replace("-compat","");if(z._registerComponent(Rt)&&"PUBLIC"===Rt.type){const We=(qe=Dt())=>{if("function"!=typeof qe[be])throw Le.create("invalid-app-argument",{appName:bi});return qe[be]()};void 0!==Rt.serviceProps&&(0,d.ZB)(We,Rt.serviceProps),Ye[be]=We,At.prototype[be]=function(...qe){return this._getService.bind(this,bi).apply(this,Rt.multipleInstances?qe:[])}}return"PUBLIC"===Rt.type?Ye[be]:null},removeApp:function Et(Rt){delete Fe[Rt]},useAsService:function zt(Rt,bi){return"serverAuth"===bi?null:bi},modularAPIs:z}};function Dt(Rt){if(!(0,d.r3)(Fe,Rt=Rt||z._DEFAULT_ENTRY_NAME))throw Le.create("no-app",{appName:Rt});return Fe[Rt]}return Ye.default=Ye,Object.defineProperty(Ye,"apps",{get:function Gt(){return Object.keys(Fe).map(Rt=>Fe[Rt])}}),Dt.App=At,Ye}(Pe);return At.INTERNAL=Object.assign(Object.assign({},At.INTERNAL),{createFirebaseNamespace:Ue,extendNamespace:function Fe(Ye){(0,d.ZB)(At,Ye)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),At}(),ue=new Ie.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){ue.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const At=self.firebase.SDK_VERSION;At&&At.indexOf("LITE")>=0&&ue.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const vt=he;!function rt(At){(0,z.registerVersion)("@firebase/app-compat","0.2.13",At)}()},6881:(Kt,Xe,G)=>{G.r(Xe),G.d(Xe,{FirebaseError:()=>Ie.ZR,SDK_VERSION:()=>Si,_DEFAULT_ENTRY_NAME:()=>Vn,_addComponent:()=>Yi,_addOrOverwriteComponent:()=>di,_apps:()=>Qs,_clearComponents:()=>es,_components:()=>Cn,_getProvider:()=>Za,_registerComponent:()=>ai,_removeServiceInstance:()=>Gl,deleteApp:()=>Rr,getApp:()=>ni,getApps:()=>Kn,initializeApp:()=>Ss,onLog:()=>Xa,registerVersion:()=>$s,setLogLevel:()=>Ho});var d=G(5861),ee=G(4859),z=G(1877),Ie=G(2090);let ze,Le;const he=new WeakMap,ue=new WeakMap,xe=new WeakMap,Pt=new WeakMap,rt=new WeakMap;let Fe={get(De,Ee,tt){if(De instanceof IDBTransaction){if("done"===Ee)return ue.get(De);if("objectStoreNames"===Ee)return De.objectStoreNames||xe.get(De);if("store"===Ee)return tt.objectStoreNames[1]?void 0:tt.objectStore(tt.objectStoreNames[0])}return wt(De[Ee])},set:(De,Ee,tt)=>(De[Ee]=tt,!0),has:(De,Ee)=>De instanceof IDBTransaction&&("done"===Ee||"store"===Ee)||Ee in De};function Dt(De){return"function"==typeof De?function Et(De){return De!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ue(){return Le||(Le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(De)?function(...Ee){return De.apply(Gt(this),Ee),wt(he.get(this))}:function(...Ee){return wt(De.apply(Gt(this),Ee))}:function(Ee,...tt){const He=De.call(Gt(this),Ee,...tt);return xe.set(He,Ee.sort?Ee.sort():[Ee]),wt(He)}}(De):(De instanceof IDBTransaction&&function At(De){if(ue.has(De))return;const Ee=new Promise((tt,He)=>{const Mt=()=>{De.removeEventListener("complete",Qt),De.removeEventListener("error",ns),De.removeEventListener("abort",ns)},Qt=()=>{tt(),Mt()},ns=()=>{He(De.error||new DOMException("AbortError","AbortError")),Mt()};De.addEventListener("complete",Qt),De.addEventListener("error",ns),De.addEventListener("abort",ns)});ue.set(De,Ee)}(De),((De,Ee)=>Ee.some(tt=>De instanceof tt))(De,function Be(){return ze||(ze=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(De,Fe):De)}function wt(De){if(De instanceof IDBRequest)return function vt(De){const Ee=new Promise((tt,He)=>{const Mt=()=>{De.removeEventListener("success",Qt),De.removeEventListener("error",ns)},Qt=()=>{tt(wt(De.result)),Mt()},ns=()=>{He(De.error),Mt()};De.addEventListener("success",Qt),De.addEventListener("error",ns)});return Ee.then(tt=>{tt instanceof IDBCursor&&he.set(tt,De)}).catch(()=>{}),rt.set(Ee,De),Ee}(De);if(Pt.has(De))return Pt.get(De);const Ee=Dt(De);return Ee!==De&&(Pt.set(De,Ee),rt.set(Ee,De)),Ee}const Gt=De=>rt.get(De),Rt=["get","getKey","getAll","getAllKeys","count"],bi=["put","add","delete","clear"],be=new Map;function We(De,Ee){if(!(De instanceof IDBDatabase)||Ee in De||"string"!=typeof Ee)return;if(be.get(Ee))return be.get(Ee);const tt=Ee.replace(/FromIndex$/,""),He=Ee!==tt,Mt=bi.includes(tt);if(!(tt in(He?IDBIndex:IDBObjectStore).prototype)||!Mt&&!Rt.includes(tt))return;const Qt=function(){var ns=(0,d.Z)(function*(Hn,...ms){const Nr=this.transaction(Hn,Mt?"readwrite":"readonly");let Os=Nr.store;return He&&(Os=Os.index(ms.shift())),(yield Promise.all([Os[tt](...ms),Mt&&Nr.done]))[0]});return function(ms){return ns.apply(this,arguments)}}();return be.set(Ee,Qt),Qt}!function Ye(De){Fe=De(Fe)}(De=>BO(FO({},De),{get:(Ee,tt,He)=>We(Ee,tt)||De.get(Ee,tt,He),has:(Ee,tt)=>!!We(Ee,tt)||De.has(Ee,tt)}));class qe{constructor(Ee){this.container=Ee}getPlatformInfoString(){return this.container.getProviders().map(tt=>{if(function Qe(De){const Ee=De.getComponent();return"VERSION"===(null==Ee?void 0:Ee.type)}(tt)){const He=tt.getImmediate();return`${He.library}/${He.version}`}return null}).filter(tt=>tt).join(" ")}}const xt="@firebase/app",xi=new z.Yd("@firebase/app"),Vn="[DEFAULT]",dt={[xt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Qs=new Map,Cn=new Map;function Yi(De,Ee){try{De.container.addComponent(Ee)}catch(tt){xi.debug(`Component ${Ee.name} failed to register with FirebaseApp ${De.name}`,tt)}}function di(De,Ee){De.container.addOrOverwriteComponent(Ee)}function ai(De){const Ee=De.name;if(Cn.has(Ee))return xi.debug(`There were multiple attempts to register component ${Ee}.`),!1;Cn.set(Ee,De);for(const tt of Qs.values())Yi(tt,De);return!0}function Za(De,Ee){const tt=De.container.getProvider("heartbeat").getImmediate({optional:!0});return tt&&tt.triggerHeartbeat(),De.container.getProvider(Ee)}function Gl(De,Ee,tt=Vn){Za(De,Ee).clearInstance(tt)}function es(){Cn.clear()}const rn=new Ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class fn{constructor(Ee,tt,He){this._isDeleted=!1,this._options=Object.assign({},Ee),this._config=Object.assign({},tt),this._name=tt.name,this._automaticDataCollectionEnabled=tt.automaticDataCollectionEnabled,this._container=He,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ee){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ee}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ee){this._isDeleted=Ee}checkDestroyed(){if(this.isDeleted)throw rn.create("app-deleted",{appName:this._name})}}const Si="9.23.0";function Ss(De,Ee={}){let tt=De;"object"!=typeof Ee&&(Ee={name:Ee});const He=Object.assign({name:Vn,automaticDataCollectionEnabled:!1},Ee),Mt=He.name;if("string"!=typeof Mt||!Mt)throw rn.create("bad-app-name",{appName:String(Mt)});if(tt||(tt=(0,Ie.aH)()),!tt)throw rn.create("no-options");const Qt=Qs.get(Mt);if(Qt){if((0,Ie.vZ)(tt,Qt.options)&&(0,Ie.vZ)(He,Qt.config))return Qt;throw rn.create("duplicate-app",{appName:Mt})}const ns=new ee.H0(Mt);for(const ms of Cn.values())ns.addComponent(ms);const Hn=new fn(tt,He,ns);return Qs.set(Mt,Hn),Hn}function ni(De=Vn){const Ee=Qs.get(De);if(!Ee&&De===Vn&&(0,Ie.aH)())return Ss();if(!Ee)throw rn.create("no-app",{appName:De});return Ee}function Kn(){return Array.from(Qs.values())}function Rr(De){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,d.Z)(function*(De){const Ee=De.name;Qs.has(Ee)&&(Qs.delete(Ee),yield Promise.all(De.container.getProviders().map(tt=>tt.delete())),De.isDeleted=!0)})).apply(this,arguments)}function $s(De,Ee,tt){var He;let Mt=null!==(He=dt[De])&&void 0!==He?He:De;tt&&(Mt+=`-${tt}`);const Qt=Mt.match(/\s|\//),ns=Ee.match(/\s|\//);if(Qt||ns){const Hn=[`Unable to register library "${Mt}" with version "${Ee}":`];return Qt&&Hn.push(`library name "${Mt}" contains illegal characters (whitespace or "/")`),Qt&&ns&&Hn.push("and"),ns&&Hn.push(`version name "${Ee}" contains illegal characters (whitespace or "/")`),void xi.warn(Hn.join(" "))}ai(new ee.wA(`${Mt}-version`,()=>({library:Mt,version:Ee}),"VERSION"))}function Xa(De,Ee){if(null!==De&&"function"!=typeof De)throw rn.create("invalid-log-argument");(0,z.Am)(De,Ee)}function Ho(De){(0,z.Ub)(De)}const ne="firebase-heartbeat-store";let te=null;function W(){return te||(te=function ht(De,Ee,{blocked:tt,upgrade:He,blocking:Mt,terminated:Qt}={}){const ns=indexedDB.open(De,Ee),Hn=wt(ns);return He&&ns.addEventListener("upgradeneeded",ms=>{He(wt(ns.result),ms.oldVersion,ms.newVersion,wt(ns.transaction),ms)}),tt&&ns.addEventListener("blocked",ms=>tt(ms.oldVersion,ms.newVersion,ms)),Hn.then(ms=>{Qt&&ms.addEventListener("close",()=>Qt()),Mt&&ms.addEventListener("versionchange",Nr=>Mt(Nr.oldVersion,Nr.newVersion,Nr))}).catch(()=>{}),Hn}("firebase-heartbeat-database",1,{upgrade:(De,Ee)=>{0===Ee&&De.createObjectStore(ne)}}).catch(De=>{throw rn.create("idb-open",{originalErrorMessage:De.message})})),te}function U(){return(U=(0,d.Z)(function*(De){try{return yield(yield W()).transaction(ne).objectStore(ne).get(Ot(De))}catch(Ee){if(Ee instanceof Ie.ZR)xi.warn(Ee.message);else{const tt=rn.create("idb-get",{originalErrorMessage:null==Ee?void 0:Ee.message});xi.warn(tt.message)}}})).apply(this,arguments)}function ge(De,Ee){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,d.Z)(function*(De,Ee){try{const He=(yield W()).transaction(ne,"readwrite");yield He.objectStore(ne).put(Ee,Ot(De)),yield He.done}catch(tt){if(tt instanceof Ie.ZR)xi.warn(tt.message);else{const He=rn.create("idb-set",{originalErrorMessage:null==tt?void 0:tt.message});xi.warn(He.message)}}})).apply(this,arguments)}function Ot(De){return`${De.name}!${De.options.appId}`}class $i{constructor(Ee){this.container=Ee,this._heartbeatsCache=null;const tt=this.container.getProvider("app").getImmediate();this._storage=new Di(tt),this._heartbeatsCachePromise=this._storage.read().then(He=>(this._heartbeatsCache=He,He))}triggerHeartbeat(){var Ee=this;return(0,d.Z)(function*(){const He=Ee.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Mt=yi();if(null===Ee._heartbeatsCache&&(Ee._heartbeatsCache=yield Ee._heartbeatsCachePromise),Ee._heartbeatsCache.lastSentHeartbeatDate!==Mt&&!Ee._heartbeatsCache.heartbeats.some(Qt=>Qt.date===Mt))return Ee._heartbeatsCache.heartbeats.push({date:Mt,agent:He}),Ee._heartbeatsCache.heartbeats=Ee._heartbeatsCache.heartbeats.filter(Qt=>{const ns=new Date(Qt.date).valueOf();return Date.now()-ns<=2592e6}),Ee._storage.overwrite(Ee._heartbeatsCache)})()}getHeartbeatsHeader(){var Ee=this;return(0,d.Z)(function*(){if(null===Ee._heartbeatsCache&&(yield Ee._heartbeatsCachePromise),null===Ee._heartbeatsCache||0===Ee._heartbeatsCache.heartbeats.length)return"";const tt=yi(),{heartbeatsToSend:He,unsentEntries:Mt}=function Gs(De,Ee=1024){const tt=[];let He=De.slice();for(const Mt of De){const Qt=tt.find(ns=>ns.agent===Mt.agent);if(Qt){if(Qt.dates.push(Mt.date),En(tt)>Ee){Qt.dates.pop();break}}else if(tt.push({agent:Mt.agent,dates:[Mt.date]}),En(tt)>Ee){tt.pop();break}He=He.slice(1)}return{heartbeatsToSend:tt,unsentEntries:He}}(Ee._heartbeatsCache.heartbeats),Qt=(0,Ie.L)(JSON.stringify({version:2,heartbeats:He}));return Ee._heartbeatsCache.lastSentHeartbeatDate=tt,Mt.length>0?(Ee._heartbeatsCache.heartbeats=Mt,yield Ee._storage.overwrite(Ee._heartbeatsCache)):(Ee._heartbeatsCache.heartbeats=[],Ee._storage.overwrite(Ee._heartbeatsCache)),Qt})()}}function yi(){return(new Date).toISOString().substring(0,10)}class Di{constructor(Ee){this.app=Ee,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,Ie.hl)()&&(0,Ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ee=this;return(0,d.Z)(function*(){return(yield Ee._canUseIndexedDBPromise)&&(yield function q(De){return U.apply(this,arguments)}(Ee.app))||{heartbeats:[]}})()}overwrite(Ee){var tt=this;return(0,d.Z)(function*(){var He;if(yield tt._canUseIndexedDBPromise){const Qt=yield tt.read();return ge(tt.app,{lastSentHeartbeatDate:null!==(He=Ee.lastSentHeartbeatDate)&&void 0!==He?He:Qt.lastSentHeartbeatDate,heartbeats:Ee.heartbeats})}})()}add(Ee){var tt=this;return(0,d.Z)(function*(){var He;if(yield tt._canUseIndexedDBPromise){const Qt=yield tt.read();return ge(tt.app,{lastSentHeartbeatDate:null!==(He=Ee.lastSentHeartbeatDate)&&void 0!==He?He:Qt.lastSentHeartbeatDate,heartbeats:[...Qt.heartbeats,...Ee.heartbeats]})}})()}}function En(De){return(0,Ie.L)(JSON.stringify({version:2,heartbeats:De})).length}!function So(De){ai(new ee.wA("platform-logger",Ee=>new qe(Ee),"PRIVATE")),ai(new ee.wA("heartbeat",Ee=>new $i(Ee),"PRIVATE")),$s(xt,"0.9.13",De),$s(xt,"0.9.13","esm2017"),$s("fire-js","")}("")},4859:(Kt,Xe,G)=>{G.d(Xe,{H0:()=>Be,wA:()=>z});var d=G(5861),ee=G(2090);class z{constructor(he,ue,xe){this.name=he,this.instanceFactory=ue,this.type=xe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(he){return this.instantiationMode=he,this}setMultipleInstances(he){return this.multipleInstances=he,this}setServiceProps(he){return this.serviceProps=he,this}setInstanceCreatedCallback(he){return this.onInstanceCreated=he,this}}const Ie="[DEFAULT]";class Pe{constructor(he,ue){this.name=he,this.container=ue,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(he){const ue=this.normalizeInstanceIdentifier(he);if(!this.instancesDeferred.has(ue)){const xe=new ee.BH;if(this.instancesDeferred.set(ue,xe),this.isInitialized(ue)||this.shouldAutoInitialize())try{const Pt=this.getOrInitializeService({instanceIdentifier:ue});Pt&&xe.resolve(Pt)}catch(Pt){}}return this.instancesDeferred.get(ue).promise}getImmediate(he){var ue;const xe=this.normalizeInstanceIdentifier(null==he?void 0:he.identifier),Pt=null!==(ue=null==he?void 0:he.optional)&&void 0!==ue&&ue;if(!this.isInitialized(xe)&&!this.shouldAutoInitialize()){if(Pt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:xe})}catch(rt){if(Pt)return null;throw rt}}getComponent(){return this.component}setComponent(he){if(he.name!==this.name)throw Error(`Mismatching Component ${he.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=he,this.shouldAutoInitialize()){if(function Le(Ue){return"EAGER"===Ue.instantiationMode}(he))try{this.getOrInitializeService({instanceIdentifier:Ie})}catch(ue){}for(const[ue,xe]of this.instancesDeferred.entries()){const Pt=this.normalizeInstanceIdentifier(ue);try{const rt=this.getOrInitializeService({instanceIdentifier:Pt});xe.resolve(rt)}catch(rt){}}}}clearInstance(he=Ie){this.instancesDeferred.delete(he),this.instancesOptions.delete(he),this.instances.delete(he)}delete(){var he=this;return(0,d.Z)(function*(){const ue=Array.from(he.instances.values());yield Promise.all([...ue.filter(xe=>"INTERNAL"in xe).map(xe=>xe.INTERNAL.delete()),...ue.filter(xe=>"_delete"in xe).map(xe=>xe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(he=Ie){return this.instances.has(he)}getOptions(he=Ie){return this.instancesOptions.get(he)||{}}initialize(he={}){const{options:ue={}}=he,xe=this.normalizeInstanceIdentifier(he.instanceIdentifier);if(this.isInitialized(xe))throw Error(`${this.name}(${xe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Pt=this.getOrInitializeService({instanceIdentifier:xe,options:ue});for(const[rt,vt]of this.instancesDeferred.entries())xe===this.normalizeInstanceIdentifier(rt)&&vt.resolve(Pt);return Pt}onInit(he,ue){var xe;const Pt=this.normalizeInstanceIdentifier(ue),rt=null!==(xe=this.onInitCallbacks.get(Pt))&&void 0!==xe?xe:new Set;rt.add(he),this.onInitCallbacks.set(Pt,rt);const vt=this.instances.get(Pt);return vt&&he(vt,Pt),()=>{rt.delete(he)}}invokeOnInitCallbacks(he,ue){const xe=this.onInitCallbacks.get(ue);if(xe)for(const Pt of xe)try{Pt(he,ue)}catch(rt){}}getOrInitializeService({instanceIdentifier:he,options:ue={}}){let xe=this.instances.get(he);if(!xe&&this.component&&(xe=this.component.instanceFactory(this.container,{instanceIdentifier:(Ue=he,Ue===Ie?void 0:Ue),options:ue}),this.instances.set(he,xe),this.instancesOptions.set(he,ue),this.invokeOnInitCallbacks(xe,he),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,he,xe)}catch(Pt){}var Ue;return xe||null}normalizeInstanceIdentifier(he=Ie){return this.component?this.component.multipleInstances?he:Ie:he}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Be{constructor(he){this.name=he,this.providers=new Map}addComponent(he){const ue=this.getProvider(he.name);if(ue.isComponentSet())throw new Error(`Component ${he.name} has already been registered with ${this.name}`);ue.setComponent(he)}addOrOverwriteComponent(he){this.getProvider(he.name).isComponentSet()&&this.providers.delete(he.name),this.addComponent(he)}getProvider(he){if(this.providers.has(he))return this.providers.get(he);const ue=new Pe(he,this);return this.providers.set(he,ue),ue}getProviders(){return Array.from(this.providers.values())}}},1877:(Kt,Xe,G)=>{G.d(Xe,{Am:()=>Ue,Ub:()=>Be,Yd:()=>Le,in:()=>ee});const d=[];var ee=(()=>{return(he=ee||(ee={}))[he.DEBUG=0]="DEBUG",he[he.VERBOSE=1]="VERBOSE",he[he.INFO=2]="INFO",he[he.WARN=3]="WARN",he[he.ERROR=4]="ERROR",he[he.SILENT=5]="SILENT",ee;var he})();const z={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},Ie=ee.INFO,Pe={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},ze=(he,ue,...xe)=>{if(ue<he.logLevel)return;const Pt=(new Date).toISOString(),rt=Pe[ue];if(!rt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ue})`);console[rt](`[${Pt}]  ${he.name}:`,...xe)};class Le{constructor(ue){this.name=ue,this._logLevel=Ie,this._logHandler=ze,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(ue){if(!(ue in ee))throw new TypeError(`Invalid value "${ue}" assigned to \`logLevel\``);this._logLevel=ue}setLogLevel(ue){this._logLevel="string"==typeof ue?z[ue]:ue}get logHandler(){return this._logHandler}set logHandler(ue){if("function"!=typeof ue)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ue}get userLogHandler(){return this._userLogHandler}set userLogHandler(ue){this._userLogHandler=ue}debug(...ue){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...ue),this._logHandler(this,ee.DEBUG,...ue)}log(...ue){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...ue),this._logHandler(this,ee.VERBOSE,...ue)}info(...ue){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...ue),this._logHandler(this,ee.INFO,...ue)}warn(...ue){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...ue),this._logHandler(this,ee.WARN,...ue)}error(...ue){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...ue),this._logHandler(this,ee.ERROR,...ue)}}function Be(he){d.forEach(ue=>{ue.setLogLevel(he)})}function Ue(he,ue){for(const xe of d){let Pt=null;ue&&ue.level&&(Pt=z[ue.level]),xe.userLogHandler=null===he?null:(rt,vt,...At)=>{const Fe=At.map(Ye=>{if(null==Ye)return null;if("string"==typeof Ye)return Ye;if("number"==typeof Ye||"boolean"==typeof Ye)return Ye.toString();if(Ye instanceof Error)return Ye.message;try{return JSON.stringify(Ye)}catch(Et){return null}}).filter(Ye=>Ye).join(" ");vt>=(null!=Pt?Pt:rt.logLevel)&&he({level:ee[vt].toLowerCase(),message:Fe,args:At,type:rt.name})}}}},259:(Kt,Xe,G)=>{G.d(Xe,{C6:()=>d.getApps,KN:()=>d.registerVersion,Mq:()=>d.getApp,ZF:()=>d.initializeApp});var d=G(6881);(0,d.registerVersion)("firebase","9.23.0","app")},9260:(Kt,Xe,G)=>{G.d(Xe,{Z:()=>d.Z});var d=G(3942);d.Z.registerVersion("firebase","9.23.0","app-compat")},9568:(Kt,Xe,G)=>{G.r(Xe);var d=G(5861),ee=G(3942),z=G(9914),Ie=G(2090),Le=(G(6881),G(1877),G(4859));function Be(){return window}function ue(){return(ue=(0,d.Z)(function*(W,q,U){var ge;const{BuildInfo:Ze}=Be();(0,z.as)(q.sessionId,"AuthEvent did not contain a session ID");const Ot=yield Ye(q.sessionId),Ci={};return(0,z.at)()?Ci.ibi=Ze.packageName:(0,z.au)()?Ci.apn=Ze.packageName:(0,z.av)(W,"operation-not-supported-in-this-environment"),Ze.displayName&&(Ci.appDisplayName=Ze.displayName),Ci.sessionId=Ot,(0,z.aw)(W,U,q.type,void 0,null!==(ge=q.eventId)&&void 0!==ge?ge:void 0,Ci)})).apply(this,arguments)}function Pt(){return(Pt=(0,d.Z)(function*(W){const{BuildInfo:q}=Be(),U={};(0,z.at)()?U.iosBundleId=q.packageName:(0,z.au)()?U.androidPackageName=q.packageName:(0,z.av)(W,"operation-not-supported-in-this-environment"),yield(0,z.ax)(W,U)})).apply(this,arguments)}function At(){return(At=(0,d.Z)(function*(W,q,U){const{cordova:ge}=Be();let Ze=()=>{};try{yield new Promise((Ot,Ci)=>{let Ei=null;function $i(){var Di;Ot();const En=null===(Di=ge.plugins.browsertab)||void 0===Di?void 0:Di.close;"function"==typeof En&&En(),"function"==typeof(null==U?void 0:U.close)&&U.close()}function yi(){Ei||(Ei=window.setTimeout(()=>{Ci((0,z.az)(W,"redirect-cancelled-by-user"))},2e3))}function Gs(){"visible"===(null==document?void 0:document.visibilityState)&&yi()}q.addPassiveListener($i),document.addEventListener("resume",yi,!1),(0,z.au)()&&document.addEventListener("visibilitychange",Gs,!1),Ze=()=>{q.removePassiveListener($i),document.removeEventListener("resume",yi,!1),document.removeEventListener("visibilitychange",Gs,!1),Ei&&window.clearTimeout(Ei)}})}finally{Ze()}})).apply(this,arguments)}function Ye(W){return Et.apply(this,arguments)}function Et(){return(Et=(0,d.Z)(function*(W){const q=Dt(W),U=yield crypto.subtle.digest("SHA-256",q);return Array.from(new Uint8Array(U)).map(Ze=>Ze.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Dt(W){if((0,z.as)(/[0-9a-zA-Z]+/.test(W),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(W);const q=new ArrayBuffer(W.length),U=new Uint8Array(q);for(let ge=0;ge<W.length;ge++)U[ge]=W.charCodeAt(ge);return U}class Gt extends z.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(q=>{this.resolveInialized=q})}addPassiveListener(q){this.passiveListeners.add(q)}removePassiveListener(q){this.passiveListeners.delete(q)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(q){return this.resolveInialized(),this.passiveListeners.forEach(U=>U(q)),super.onEvent(q)}initialized(){var q=this;return(0,d.Z)(function*(){yield q.initPromise})()}}function Rt(W){return bi.apply(this,arguments)}function bi(){return(bi=(0,d.Z)(function*(W){const q=yield qe()._get(Qe(W));return q&&(yield qe()._remove(Qe(W))),q})).apply(this,arguments)}function We(){const W=[],q="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let U=0;U<20;U++){const ge=Math.floor(Math.random()*q.length);W.push(q.charAt(ge))}return W.join("")}function qe(){return(0,z.aC)(z.b)}function Qe(W){return(0,z.aD)("authEvent",W.config.apiKey,W.name)}function xi(W){if(!(null==W?void 0:W.includes("?")))return{};const[q,...U]=W.split("?");return(0,Ie.zd)(U.join("?"))}function Wi(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,z.az)("no-auth-event")}}function Tn(){var W;return(null===(W=null==self?void 0:self.location)||void 0===W?void 0:W.protocol)||null}function An(W=(0,Ie.z$)()){return!("file:"!==Tn()&&"ionic:"!==Tn()&&"capacitor:"!==Tn()||!W.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ka(){try{const W=self.localStorage,q=z.aL();if(W)return W.setItem(q,"1"),W.removeItem(q),!function sh(W=(0,Ie.z$)()){return function Ya(){return(0,Ie.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Tc(W=(0,Ie.z$)()){return/Edge\/\d+/.test(W)}(W)}()||(0,Ie.hl)()}catch(W){return ia()&&(0,Ie.hl)()}return!1}function ia(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ca(){return(function ta(){return"http:"===Tn()||"https:"===Tn()}()||(0,Ie.ru)()||An())&&!function Sl(){return(0,Ie.b$)()||(0,Ie.UG)()}()&&Ka()&&!ia()}function _l(){return An()&&"undefined"!=typeof document}function Ea(){return(Ea=(0,d.Z)(function*(){return!!_l()&&new Promise(W=>{const q=setTimeout(()=>{W(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(q),W(!0)})})})).apply(this,arguments)}const Zi={LOCAL:"local",NONE:"none",SESSION:"session"},wa=z.aA,Sa="persistence";function dt(W){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,d.Z)(function*(W){yield W._initializationPromise;const q=Yi(),U=z.aD(Sa,W.config.apiKey,W.name);q&&q.setItem(U,W._getPersistence())})).apply(this,arguments)}function Yi(){var W;try{return(null===(W=function Cs(){return"undefined"!=typeof window?window:null}())||void 0===W?void 0:W.sessionStorage)||null}catch(q){return null}}const di=z.aA;class ai{constructor(){this.browserResolver=z.aC(z.k),this.cordovaResolver=z.aC(class Yr{constructor(){this._redirectPersistence=z.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=z.aE,this._overrideRedirectResult=z.aF}_initialize(q){var U=this;return(0,d.Z)(function*(){const ge=q._key();let Ze=U.eventManagers.get(ge);return Ze||(Ze=new Gt(q),U.eventManagers.set(ge,Ze),U.attachCallbackListeners(q,Ze)),Ze})()}_openPopup(q){(0,z.av)(q,"operation-not-supported-in-this-environment")}_openRedirect(q,U,ge,Ze){var Ot=this;return(0,d.Z)(function*(){!function Fe(W){var q,U,ge,Ze,Ot,Ci,Ei,$i,yi,Gs;const Di=Be();(0,z.aA)("function"==typeof(null===(q=null==Di?void 0:Di.universalLinks)||void 0===q?void 0:q.subscribe),W,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,z.aA)(void 0!==(null===(U=null==Di?void 0:Di.BuildInfo)||void 0===U?void 0:U.packageName),W,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,z.aA)("function"==typeof(null===(Ot=null===(Ze=null===(ge=null==Di?void 0:Di.cordova)||void 0===ge?void 0:ge.plugins)||void 0===Ze?void 0:Ze.browsertab)||void 0===Ot?void 0:Ot.openUrl),W,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,z.aA)("function"==typeof(null===($i=null===(Ei=null===(Ci=null==Di?void 0:Di.cordova)||void 0===Ci?void 0:Ci.plugins)||void 0===Ei?void 0:Ei.browsertab)||void 0===$i?void 0:$i.isAvailable),W,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,z.aA)("function"==typeof(null===(Gs=null===(yi=null==Di?void 0:Di.cordova)||void 0===yi?void 0:yi.InAppBrowser)||void 0===Gs?void 0:Gs.open),W,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(q);const Ci=yield Ot._initialize(q);yield Ci.initialized(),Ci.resetRedirect(),(0,z.aG)(),yield Ot._originValidation(q);const Ei=function ht(W,q,U=null){return{type:q,eventId:U,urlResponse:null,sessionId:We(),postBody:null,tenantId:W.tenantId,error:(0,z.az)(W,"no-auth-event")}}(q,ge,Ze);yield function zt(W,q){return qe()._set(Qe(W),q)}(q,Ei);const $i=yield function he(W,q,U){return ue.apply(this,arguments)}(q,Ei,U),yi=yield function rt(W){const{cordova:q}=Be();return new Promise(U=>{q.plugins.browsertab.isAvailable(ge=>{let Ze=null;ge?q.plugins.browsertab.openUrl(W):Ze=q.InAppBrowser.open(W,(0,z.ay)()?"_blank":"_system","location=yes"),U(Ze)})})}($i);return function vt(W,q,U){return At.apply(this,arguments)}(q,Ci,yi)})()}_isIframeWebStorageSupported(q,U){throw new Error("Method not implemented.")}_originValidation(q){const U=q._key();return this.originValidationPromises[U]||(this.originValidationPromises[U]=function xe(W){return Pt.apply(this,arguments)}(q)),this.originValidationPromises[U]}attachCallbackListeners(q,U){const{universalLinks:ge,handleOpenURL:Ze,BuildInfo:Ot}=Be(),Ci=setTimeout((0,d.Z)(function*(){yield Rt(q),U.onEvent(Wi())}),500),Ei=function(){var Gs=(0,d.Z)(function*(Di){clearTimeout(Ci);const En=yield Rt(q);let So=null;En&&(null==Di?void 0:Di.url)&&(So=function be(W,q){var U,ge;const Ze=function Ve(W){const q=xi(W),U=q.link?decodeURIComponent(q.link):void 0,ge=xi(U).link,Ze=q.deep_link_id?decodeURIComponent(q.deep_link_id):void 0;return xi(Ze).link||Ze||ge||U||W}(q);if(Ze.includes("/__/auth/callback")){const Ot=xi(Ze),Ci=Ot.firebaseError?function xt(W){try{return JSON.parse(W)}catch(q){return null}}(decodeURIComponent(Ot.firebaseError)):null,Ei=null===(ge=null===(U=null==Ci?void 0:Ci.code)||void 0===U?void 0:U.split("auth/"))||void 0===ge?void 0:ge[1],$i=Ei?(0,z.az)(Ei):null;return $i?{type:W.type,eventId:W.eventId,tenantId:W.tenantId,error:$i,urlResponse:null,sessionId:null,postBody:null}:{type:W.type,eventId:W.eventId,tenantId:W.tenantId,sessionId:W.sessionId,urlResponse:Ze,postBody:null}}return null}(En,Di.url)),U.onEvent(So||Wi())});return function(En){return Gs.apply(this,arguments)}}();void 0!==ge&&"function"==typeof ge.subscribe&&ge.subscribe(null,Ei);const $i=Ze,yi=`${Ot.packageName.toLowerCase()}://`;Be().handleOpenURL=function(){var Gs=(0,d.Z)(function*(Di){if(Di.toLowerCase().startsWith(yi)&&Ei({url:Di}),"function"==typeof $i)try{$i(Di)}catch(En){console.error(En)}});return function(Di){return Gs.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=z.a,this._completeRedirectFn=z.aE,this._overrideRedirectResult=z.aF}_initialize(q){var U=this;return(0,d.Z)(function*(){return yield U.selectUnderlyingResolver(),U.assertedUnderlyingResolver._initialize(q)})()}_openPopup(q,U,ge,Ze){var Ot=this;return(0,d.Z)(function*(){return yield Ot.selectUnderlyingResolver(),Ot.assertedUnderlyingResolver._openPopup(q,U,ge,Ze)})()}_openRedirect(q,U,ge,Ze){var Ot=this;return(0,d.Z)(function*(){return yield Ot.selectUnderlyingResolver(),Ot.assertedUnderlyingResolver._openRedirect(q,U,ge,Ze)})()}_isIframeWebStorageSupported(q,U){this.assertedUnderlyingResolver._isIframeWebStorageSupported(q,U)}_originValidation(q){return this.assertedUnderlyingResolver._originValidation(q)}get _shouldInitProactively(){return _l()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return di(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var q=this;return(0,d.Z)(function*(){if(q.underlyingResolver)return;const U=yield function Vi(){return Ea.apply(this,arguments)}();q.underlyingResolver=U?q.cordovaResolver:q.browserResolver})()}}function Za(W){return W.unwrap()}function es(W){return rn(W)}function rn(W){const{_tokenResponse:q}=W instanceof Ie.ZR?W.customData:W;if(!q)return null;if(!(W instanceof Ie.ZR)&&"temporaryProof"in q&&"phoneNumber"in q)return z.P.credentialFromResult(W);const U=q.providerId;if(!U||U===z.p.PASSWORD)return null;let ge;switch(U){case z.p.GOOGLE:ge=z.V;break;case z.p.FACEBOOK:ge=z.U;break;case z.p.GITHUB:ge=z.W;break;case z.p.TWITTER:ge=z.Z;break;default:const{oauthIdToken:Ze,oauthAccessToken:Ot,oauthTokenSecret:Ci,pendingToken:Ei,nonce:$i}=q;return Ot||Ci||Ze||Ei?Ei?U.startsWith("saml.")?z.aO._create(U,Ei):z.L._fromParams({providerId:U,signInMethod:U,pendingToken:Ei,idToken:Ze,accessToken:Ot}):new z.X(U).credential({idToken:Ze,accessToken:Ot,rawNonce:$i}):null}return W instanceof Ie.ZR?ge.credentialFromError(W):ge.credentialFromResult(W)}function fn(W,q){return q.catch(U=>{throw U instanceof Ie.ZR&&function so(W,q){var U;const ge=null===(U=q.customData)||void 0===U?void 0:U._tokenResponse;if("auth/multi-factor-auth-required"===(null==q?void 0:q.code))q.resolver=new ni(W,z.aq(W,q));else if(ge){const Ze=rn(q),Ot=q;Ze&&(Ot.credential=Ze,Ot.tenantId=ge.tenantId||void 0,Ot.email=ge.email||void 0,Ot.phoneNumber=ge.phoneNumber||void 0)}}(W,U),U}).then(U=>{const Ze=U.user;return{operationType:U.operationType,credential:es(U),additionalUserInfo:z.ao(U),user:Kn.getOrCreate(Ze)}})}function Si(W,q){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,d.Z)(function*(W,q){const U=yield q;return{verificationId:U.verificationId,confirm:ge=>fn(W,U.confirm(ge))}})).apply(this,arguments)}class ni{constructor(q,U){this.resolver=U,this.auth=function Gl(W){return W.wrapped()}(q)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(q){return fn(Za(this.auth),this.resolver.resolveSignIn(q))}}class Kn{constructor(q){this._delegate=q,this.multiFactor=z.ar(q)}static getOrCreate(q){return Kn.USER_MAP.has(q)||Kn.USER_MAP.set(q,new Kn(q)),Kn.USER_MAP.get(q)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(q){return this._delegate.getIdTokenResult(q)}getIdToken(q){return this._delegate.getIdToken(q)}linkAndRetrieveDataWithCredential(q){return this.linkWithCredential(q)}linkWithCredential(q){var U=this;return(0,d.Z)(function*(){return fn(U.auth,z.a0(U._delegate,q))})()}linkWithPhoneNumber(q,U){var ge=this;return(0,d.Z)(function*(){return Si(ge.auth,z.l(ge._delegate,q,U))})()}linkWithPopup(q){var U=this;return(0,d.Z)(function*(){return fn(U.auth,z.d(U._delegate,q,ai))})()}linkWithRedirect(q){var U=this;return(0,d.Z)(function*(){return yield dt(z.aH(U.auth)),z.g(U._delegate,q,ai)})()}reauthenticateAndRetrieveDataWithCredential(q){return this.reauthenticateWithCredential(q)}reauthenticateWithCredential(q){var U=this;return(0,d.Z)(function*(){return fn(U.auth,z.a1(U._delegate,q))})()}reauthenticateWithPhoneNumber(q,U){return Si(this.auth,z.r(this._delegate,q,U))}reauthenticateWithPopup(q){return fn(this.auth,z.e(this._delegate,q,ai))}reauthenticateWithRedirect(q){var U=this;return(0,d.Z)(function*(){return yield dt(z.aH(U.auth)),z.h(U._delegate,q,ai)})()}sendEmailVerification(q){return z.ae(this._delegate,q)}unlink(q){var U=this;return(0,d.Z)(function*(){return yield z.an(U._delegate,q),U})()}updateEmail(q){return z.aj(this._delegate,q)}updatePassword(q){return z.ak(this._delegate,q)}updatePhoneNumber(q){return z.u(this._delegate,q)}updateProfile(q){return z.ai(this._delegate,q)}verifyBeforeUpdateEmail(q,U){return z.af(this._delegate,q,U)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Kn.USER_MAP=new WeakMap;const Rr=z.aA;let Dn=(()=>{class W{constructor(U,ge){if(this.app=U,ge.isInitialized())return this._delegate=ge.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ze}=U.options;Rr(Ze,"invalid-api-key",{appName:U.name}),Rr(Ze,"invalid-api-key",{appName:U.name});const Ot="undefined"!=typeof window?ai:void 0;this._delegate=ge.initialize({options:{persistence:Xa(Ze,U.name),popupRedirectResolver:Ot}}),this._delegate._updateErrorMap(z.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Kn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(U){this._delegate.languageCode=U}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(U){this._delegate.tenantId=U}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(U,ge){z.I(this._delegate,U,ge)}applyActionCode(U){return z.a5(this._delegate,U)}checkActionCode(U){return z.a6(this._delegate,U)}confirmPasswordReset(U,ge){return z.a4(this._delegate,U,ge)}createUserWithEmailAndPassword(U,ge){var Ze=this;return(0,d.Z)(function*(){return fn(Ze._delegate,z.a8(Ze._delegate,U,ge))})()}fetchProvidersForEmail(U){return this.fetchSignInMethodsForEmail(U)}fetchSignInMethodsForEmail(U){return z.ad(this._delegate,U)}isSignInWithEmailLink(U){return z.ab(this._delegate,U)}getRedirectResult(){var U=this;return(0,d.Z)(function*(){Rr(Ca(),U._delegate,"operation-not-supported-in-this-environment");const ge=yield z.j(U._delegate,ai);return ge?fn(U._delegate,Promise.resolve(ge)):{credential:null,user:null}})()}addFrameworkForLogging(U){!function ba(W,q){(0,z.aH)(W)._logFramework(q)}(this._delegate,U)}onAuthStateChanged(U,ge,Ze){const{next:Ot,error:Ci,complete:Ei}=$s(U,ge,Ze);return this._delegate.onAuthStateChanged(Ot,Ci,Ei)}onIdTokenChanged(U,ge,Ze){const{next:Ot,error:Ci,complete:Ei}=$s(U,ge,Ze);return this._delegate.onIdTokenChanged(Ot,Ci,Ei)}sendSignInLinkToEmail(U,ge){return z.aa(this._delegate,U,ge)}sendPasswordResetEmail(U,ge){return z.a3(this._delegate,U,ge||void 0)}setPersistence(U){var ge=this;return(0,d.Z)(function*(){let Ze;switch(function Vn(W,q){wa(Object.values(Zi).includes(q),W,"invalid-persistence-type"),(0,Ie.b$)()?wa(q!==Zi.SESSION,W,"unsupported-persistence-type"):(0,Ie.UG)()?wa(q===Zi.NONE,W,"unsupported-persistence-type"):ia()?wa(q===Zi.NONE||q===Zi.LOCAL&&(0,Ie.hl)(),W,"unsupported-persistence-type"):wa(q===Zi.NONE||Ka(),W,"unsupported-persistence-type")}(ge._delegate,U),U){case Zi.SESSION:Ze=z.a;break;case Zi.LOCAL:Ze=(yield z.aC(z.i)._isAvailable())?z.i:z.b;break;case Zi.NONE:Ze=z.N;break;default:return z.av("argument-error",{appName:ge._delegate.name})}return ge._delegate.setPersistence(Ze)})()}signInAndRetrieveDataWithCredential(U){return this.signInWithCredential(U)}signInAnonymously(){return fn(this._delegate,z._(this._delegate))}signInWithCredential(U){return fn(this._delegate,z.$(this._delegate,U))}signInWithCustomToken(U){return fn(this._delegate,z.a2(this._delegate,U))}signInWithEmailAndPassword(U,ge){return fn(this._delegate,z.a9(this._delegate,U,ge))}signInWithEmailLink(U,ge){return fn(this._delegate,z.ac(this._delegate,U,ge))}signInWithPhoneNumber(U,ge){return Si(this._delegate,z.s(this._delegate,U,ge))}signInWithPopup(U){var ge=this;return(0,d.Z)(function*(){return Rr(Ca(),ge._delegate,"operation-not-supported-in-this-environment"),fn(ge._delegate,z.c(ge._delegate,U,ai))})()}signInWithRedirect(U){var ge=this;return(0,d.Z)(function*(){return Rr(Ca(),ge._delegate,"operation-not-supported-in-this-environment"),yield dt(ge._delegate),z.f(ge._delegate,U,ai)})()}updateCurrentUser(U){return this._delegate.updateCurrentUser(U)}verifyPasswordResetCode(U){return z.a7(this._delegate,U)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return W.Persistence=Zi,W})();function $s(W,q,U){let ge=W;"function"!=typeof W&&({next:ge,error:q,complete:U}=W);const Ze=ge;return{next:Ci=>Ze(Ci&&Kn.getOrCreate(Ci)),error:q,complete:U}}function Xa(W,q){const U=function Cn(W,q){const U=Yi();if(!U)return[];const ge=z.aD(Sa,W,q);switch(U.getItem(ge)){case Zi.NONE:return[z.N];case Zi.LOCAL:return[z.i,z.a];case Zi.SESSION:return[z.a];default:return[]}}(W,q);if("undefined"!=typeof self&&!U.includes(z.i)&&U.push(z.i),"undefined"!=typeof window)for(const ge of[z.b,z.a])U.includes(ge)||U.push(ge);return U.includes(z.N)||U.push(z.N),U}class Ho{constructor(){this.providerId="phone",this._delegate=new z.P(Za(ee.Z.auth()))}static credential(q,U){return z.P.credential(q,U)}verifyPhoneNumber(q,U){return this._delegate.verifyPhoneNumber(q,U)}unwrap(){return this._delegate}}Ho.PHONE_SIGN_IN_METHOD=z.P.PHONE_SIGN_IN_METHOD,Ho.PROVIDER_ID=z.P.PROVIDER_ID;const sa=z.aA;class Kr{constructor(q,U,ge=ee.Z.app()){var Ze;sa(null===(Ze=ge.options)||void 0===Ze?void 0:Ze.apiKey,"invalid-api-key",{appName:ge.name}),this._delegate=new z.R(q,U,ge.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function te(W){W.INTERNAL.registerComponent(new Le.wA("auth-compat",q=>{const U=q.getProvider("app-compat").getImmediate(),ge=q.getProvider("auth");return new Dn(U,ge)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:z.A.EMAIL_SIGNIN,PASSWORD_RESET:z.A.PASSWORD_RESET,RECOVER_EMAIL:z.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:z.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:z.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:z.A.VERIFY_EMAIL}},EmailAuthProvider:z.Q,FacebookAuthProvider:z.U,GithubAuthProvider:z.W,GoogleAuthProvider:z.V,OAuthProvider:z.X,SAMLAuthProvider:z.Y,PhoneAuthProvider:Ho,PhoneMultiFactorGenerator:z.m,RecaptchaVerifier:Kr,TwitterAuthProvider:z.Z,Auth:Dn,AuthCredential:z.J,Error:Ie.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),W.registerVersion("@firebase/auth-compat","0.4.2")}(ee.Z)},5861:(Kt,Xe,G)=>{function d(z,Ie,Pe,ze,Le,Be,Ue){try{var he=z[Be](Ue),ue=he.value}catch(xe){return void Pe(xe)}he.done?Ie(ue):Promise.resolve(ue).then(ze,Le)}function ee(z){return function(){var Ie=this,Pe=arguments;return new Promise(function(ze,Le){var Be=z.apply(Ie,Pe);function Ue(ue){d(Be,ze,Le,Ue,he,"next",ue)}function he(ue){d(Be,ze,Le,Ue,he,"throw",ue)}Ue(void 0)})}}G.d(Xe,{Z:()=>ee})}},Kt=>{Kt(Kt.s=7881)}]);